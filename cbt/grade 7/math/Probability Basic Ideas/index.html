<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 Math - Probability Basic Ideas | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Probability Theme */
        :root {
            --primary-blue: #2962FF;
            --secondary-teal: #00BFA5;
            --accent-amber: #FFAB00;
            --accent-purple: #AA00FF;
            --accent-pink: #FF4081;
            --accent-green: #00C853;
            --dark-bg: #0D1B2A;
            --dark-surface: #1B2B3A;
            --dark-card: #253447;
            --dark-border: #3A4A5A;
            --text-primary: #FFFFFF;
            --text-secondary: #B8D0E0;
            --text-muted: #7A94A8;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(41, 98, 255, 0.3);
            --probability-glow: 0 0 15px rgba(0, 191, 165, 0.4);
            --chance-glow: 0 0 15px rgba(255, 171, 0, 0.4);
            --outcome-glow: 0 0 15px rgba(170, 0, 255, 0.4);
            --event-glow: 0 0 15px rgba(255, 64, 129, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Probability Pattern Background */
        .probability-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(41, 98, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 191, 165, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 171, 0, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0D1B2A, #1B2B3A);
            opacity: 0.8;
        }

        .floating-dice {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 3rem;
            font-weight: bold;
            animation: floatDice 20s linear infinite;
        }

        @keyframes floatDice {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 27, 42, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(41, 98, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(41, 98, 255, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.4);
        }

        .btn-primary:hover {
            background: #1A56DB;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(41, 98, 255, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 191, 165, 0.4);
        }

        .btn-secondary:hover {
            background: #009688;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 191, 165, 0.5);
        }

        .btn-amber {
            background: var(--accent-amber);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 171, 0, 0.4);
        }

        .btn-amber:hover {
            background: #FF9800;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 171, 0, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(41, 98, 255, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .probability-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-purple);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(41, 98, 255, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-pink);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 200, 83, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-left: 5px solid var(--accent-pink);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-pink);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-pink);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Probability Display */
        .probability-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .probability-container {
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-purple);
        }

        .probability-scenario {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .probability-highlight {
            background: rgba(170, 0, 255, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid var(--accent-purple);
        }

        .highlight-text {
            color: var(--accent-purple);
            font-weight: bold;
        }

        /* Interactive Probability Canvas */
        .probability-canvas {
            width: 100%;
            height: 300px;
            background: var(--dark-surface);
            border-radius: 12px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--secondary-teal);
            padding: 20px;
        }

        #probabilityCanvas {
            width: 100%;
            height: 100%;
            display: block;
            background: var(--dark-surface);
        }

        .probability-element {
            position: absolute;
            padding: 8px 12px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }

        .probability-element:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        /* Probability Types Grid */
        .probability-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .probability-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .probability-grid {
                grid-template-columns: 1fr;
            }
        }

        .probability-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .probability-card:hover {
            transform: translateY(-5px);
        }

        .probability-card.basics {
            border-color: var(--secondary-teal);
        }

        .probability-card.experimental {
            border-color: var(--accent-amber);
        }

        .probability-card.theoretical {
            border-color: var(--accent-purple);
        }

        .probability-card.conditional {
            border-color: var(--accent-green);
        }

        .probability-card.complementary {
            border-color: var(--accent-pink);
        }

        .probability-card.applications {
            border-color: var(--primary-blue);
        }

        .probability-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .basics .probability-icon {
            color: var(--secondary-teal);
        }

        .experimental .probability-icon {
            color: var(--accent-amber);
        }

        .theoretical .probability-icon {
            color: var(--accent-purple);
        }

        .conditional .probability-icon {
            color: var(--accent-green);
        }

        .complementary .probability-icon {
            color: var(--accent-pink);
        }

        .applications .probability-icon {
            color: var(--primary-blue);
        }

        .probability-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .basics .probability-title {
            color: var(--secondary-teal);
        }

        .experimental .probability-title {
            color: var(--accent-amber);
        }

        .theoretical .probability-title {
            color: var(--accent-purple);
        }

        .conditional .probability-title {
            color: var(--accent-green);
        }

        .complementary .probability-title {
            color: var(--accent-pink);
        }

        .applications .probability-title {
            color: var(--primary-blue);
        }

        .probability-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .probability-examples {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 10px;
            background: var(--dark-surface);
            padding: 8px;
            border-radius: 4px;
        }

        /* Probability Calculator Table */
        .probability-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .probability-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-purple);
            border-bottom: 2px solid var(--accent-purple);
        }

        .probability-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .probability-table tr:hover {
            background: rgba(170, 0, 255, 0.05);
        }

        /* Basic Probability Display */
        .basics-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--secondary-teal);
        }

        .basics-title {
            color: var(--secondary-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .basics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .basics-grid {
                grid-template-columns: 1fr;
            }
        }

        .basic-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .basic-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary-teal);
        }

        .basic-type {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--secondary-teal);
            font-size: 1.2rem;
        }

        .basic-steps {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Experimental Probability Display */
        .experimental-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-amber);
        }

        .experimental-title {
            color: var(--accent-amber);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .experimental-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .experimental-grid {
                grid-template-columns: 1fr;
            }
        }

        .experimental-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .experimental-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-amber);
        }

        .experimental-type {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-amber);
            font-size: 1.2rem;
        }

        .experimental-steps {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Theoretical Probability Display */
        .theoretical-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .theoretical-title {
            color: var(--accent-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .theoretical-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .theoretical-grid {
                grid-template-columns: 1fr;
            }
        }

        .theoretical-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .theoretical-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-purple);
        }

        .theoretical-type {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-purple);
            font-size: 1.2rem;
        }

        .theoretical-steps {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Interactive Probability Calculator */
        .calculator-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--primary-blue);
        }

        .calculator-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .calculator-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .calculator-select {
            padding: 10px 15px;
            background: var(--dark-surface);
            border: 2px solid var(--primary-blue);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .calculator-input {
            padding: 15px;
            background: var(--dark-surface);
            border: 2px solid var(--primary-blue);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            resize: vertical;
            min-height: 60px;
        }

        .calculator-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .calculator-btn {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--primary-blue);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calculator-btn:hover {
            background: rgba(41, 98, 255, 0.1);
            transform: translateY(-2px);
        }

        .calculator-display {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Probability Study Display */
        .probability-study-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .probability-study-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .probability-study-grid {
                grid-template-columns: 1fr;
            }
        }

        .study-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--accent-green);
        }

        .study-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-green);
        }

        .study-concept {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent-green);
        }

        .study-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Probability Visual Elements */
        .probability-step {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 191, 165, 0.05);
            border-radius: 6px;
            border-left: 4px solid var(--secondary-teal);
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--secondary-teal);
            color: white;
            border-radius: 50%;
            font-weight: bold;
        }

        .step-description {
            flex: 1;
        }

        .probability-box {
            display: inline-block;
            padding: 5px 10px;
            margin: 0 5px;
            background: rgba(255, 171, 0, 0.1);
            border-radius: 4px;
            border: 1px solid var(--accent-amber);
            font-weight: bold;
        }

        .favorable-outcome {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--accent-pink);
            border-radius: 50%;
            margin: 0 5px;
        }

        .total-outcome {
            display: inline-block;
            height: 2px;
            width: 30px;
            background: var(--primary-blue);
            margin: 0 5px;
            vertical-align: middle;
        }

        .probability-scale {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--accent-amber);
            margin: 0 5px;
            position: relative;
        }

        .probability-scale::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-amber);
            opacity: 0.3;
        }

        /* Canvas Styling */
        canvas {
            cursor: crosshair;
        }

        .canvas-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .canvas-btn {
            padding: 8px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .canvas-btn:hover {
            background: rgba(41, 98, 255, 0.1);
            border-color: var(--primary-blue);
        }

        .canvas-btn.active {
            background: rgba(41, 98, 255, 0.2);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .probability-grid {
                grid-template-columns: 1fr;
            }
            
            .basics-grid {
                grid-template-columns: 1fr;
            }
            
            .experimental-grid {
                grid-template-columns: 1fr;
            }
            
            .theoretical-grid {
                grid-template-columns: 1fr;
            }
            
            .probability-study-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes probabilityReveal {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .probability-reveal {
            animation: probabilityReveal 0.5s ease forwards;
        }
        
        @keyframes probabilityGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 191, 165, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(0, 191, 165, 0.2); }
        }
        
        .probability-glow {
            animation: probabilityGlow 2s ease-in-out infinite;
        }
        
        @keyframes chanceGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 171, 0, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(255, 171, 0, 0.2); }
        }
        
        .chance-glow {
            animation: chanceGlow 2s ease-in-out infinite;
        }
        
        @keyframes outcomeGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(170, 0, 255, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(170, 0, 255, 0.2); }
        }
        
        .outcome-glow {
            animation: outcomeGlow 2s ease-in-out infinite;
        }
        
        @keyframes floatSymbol {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .float-symbol {
            animation: floatSymbol 3s ease-in-out infinite;
        }
        
        @keyframes diceRoll {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .dice-roll {
            animation: diceRoll 2s ease-in-out infinite;
        }
        
        @keyframes spinCoin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .spin-coin {
            animation: spinCoin 3s linear infinite;
        }
        
        @keyframes bounceBall {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .bounce-ball {
            animation: bounceBall 2s ease-in-out infinite;
        }
        
        @keyframes drawProbability {
            0% { stroke-dashoffset: 100; }
            100% { stroke-dashoffset: 0; }
        }
        
        .draw-probability {
            animation: drawProbability 1s ease forwards;
        }
        
        /* Dice Styles */
        .dice {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 10px;
            position: relative;
            display: inline-block;
            margin: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .dot {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #333;
            border-radius: 50%;
        }
        
        .dice-1 .dot:nth-child(1) { top: 20px; left: 20px; }
        
        .dice-2 .dot:nth-child(1) { top: 10px; left: 10px; }
        .dice-2 .dot:nth-child(2) { bottom: 10px; right: 10px; }
        
        .dice-3 .dot:nth-child(1) { top: 10px; left: 10px; }
        .dice-3 .dot:nth-child(2) { top: 20px; left: 20px; }
        .dice-3 .dot:nth-child(3) { bottom: 10px; right: 10px; }
        
        .dice-4 .dot:nth-child(1) { top: 10px; left: 10px; }
        .dice-4 .dot:nth-child(2) { top: 10px; right: 10px; }
        .dice-4 .dot:nth-child(3) { bottom: 10px; left: 10px; }
        .dice-4 .dot:nth-child(4) { bottom: 10px; right: 10px; }
        
        .dice-5 .dot:nth-child(1) { top: 10px; left: 10px; }
        .dice-5 .dot:nth-child(2) { top: 10px; right: 10px; }
        .dice-5 .dot:nth-child(3) { top: 20px; left: 20px; }
        .dice-5 .dot:nth-child(4) { bottom: 10px; left: 10px; }
        .dice-5 .dot:nth-child(5) { bottom: 10px; right: 10px; }
        
        .dice-6 .dot:nth-child(1) { top: 10px; left: 10px; }
        .dice-6 .dot:nth-child(2) { top: 10px; left: 20px; }
        .dice-6 .dot:nth-child(3) { top: 10px; right: 10px; }
        .dice-6 .dot:nth-child(4) { bottom: 10px; left: 10px; }
        .dice-6 .dot:nth-child(5) { bottom: 10px; left: 20px; }
        .dice-6 .dot:nth-child(6) { bottom: 10px; right: 10px; }
        
        /* Card Styles */
        .card-suit {
            display: inline-block;
            width: 40px;
            height: 60px;
            background: white;
            border-radius: 5px;
            margin: 5px;
            text-align: center;
            line-height: 60px;
            font-size: 24px;
            color: #333;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .red-card { color: #FF4444; }
        .black-card { color: #333333; }
        
        /* Spinner Styles */
        .spinner {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(
                #FF4444 0deg 90deg,
                #44FF44 90deg 180deg,
                #4444FF 180deg 270deg,
                #FFFF44 270deg 360deg
            );
            margin: 20px auto;
            position: relative;
            animation: spin 5s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .spinner-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 20px solid white;
        }
    </style>
</head>
<body>
    <!-- Probability Pattern Background -->
    <div class="probability-bg" id="probabilityBg">
        <!-- Probability symbols will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 7 Math - Probability Basic Ideas</h1>
            <p class="welcome-subtitle">Master the exciting world of probability! Learn to calculate chances, predict outcomes, and understand uncertainty through dice, cards, coins, and real-world scenarios. Develop your analytical thinking and become a probability expert!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üé≤ üÉè ü™ô üìä üìà</span>
                <span class="topic-name">Chance, Outcomes & Predictions</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Probability Journey</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Probability fact display -->
                <div id="probabilityFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Probability Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Practice Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other Math Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const probabilityBg = document.getElementById('probabilityBg');
            
            // Create floating probability symbols
            const symbols = ['üé≤', 'üéØ', 'üÉè', 'ü™ô', 'üìä', 'üìà', 'üé∞', '‚ö´', '‚ö™', 'üîÑ', 'üé™', 'üéÆ', 'üé∞', 'üé™', 'üéÆ'];
            
            for (let i = 0; i < 25; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'floating-dice float-symbol';
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.left = `${Math.random() * 100}%`;
                symbol.style.top = `${Math.random() * 100}%`;
                symbol.style.animationDelay = `${Math.random() * 5}s`;
                symbol.style.fontSize = `${2 + Math.random() * 4}rem`;
                
                // Color based on symbol type
                if (symbol.textContent === 'üé≤' || symbol.textContent === 'üéØ') {
                    symbol.style.color = 'rgba(0, 191, 165, 0.1)';
                } else if (symbol.textContent === 'üÉè' || symbol.textContent === 'ü™ô') {
                    symbol.style.color = 'rgba(255, 171, 0, 0.1)';
                } else if (symbol.textContent === 'üìä' || symbol.textContent === 'üìà') {
                    symbol.style.color = 'rgba(170, 0, 255, 0.1)';
                } else {
                    symbol.style.color = 'rgba(41, 98, 255, 0.1)';
                }
                
                probabilityBg.appendChild(symbol);
            }
        }

        // Questions array - 80+ Grade 7 Probability Questions
        const questions = [
            // Basic Probability Concepts (1-20)
            {
                type: "basic_concepts",
                question: "What is probability?",
                options: ["Measure of how likely an event is to occur", "Certainty of an event", "Number of favorable outcomes", "Total number of outcomes"],
                answer: "A",
                explanation: "Probability is a measure of the likelihood or chance that a particular event will occur, expressed as a number between 0 and 1."
            },
            {
                type: "basic_concepts",
                question: "What is the probability range?",
                options: ["0 to 1", "0 to 10", "-1 to 1", "0 to 100"],
                answer: "A",
                explanation: "Probability values range from 0 (impossible event) to 1 (certain event). All probabilities fall within this range."
            },
            {
                type: "basic_concepts",
                question: "What does a probability of 0 mean?",
                options: ["Impossible event", "Certain event", "Very likely event", "Unlikely event"],
                answer: "A",
                explanation: "Probability = 0 means the event is impossible and will definitely not occur."
            },
            {
                type: "basic_concepts",
                question: "What does a probability of 1 mean?",
                options: ["Certain event", "Impossible event", "50-50 chance", "Rare event"],
                answer: "A",
                explanation: "Probability = 1 means the event is certain and will definitely occur."
            },
            {
                type: "basic_concepts",
                question: "What is the probability of getting heads when flipping a fair coin?",
                options: ["1/2 or 0.5", "1", "0", "1/4"],
                answer: "A",
                explanation: "A fair coin has two equally likely outcomes: heads or tails. So probability of heads = 1/2 = 0.5"
            },
            // Sample Space and Outcomes (21-40)
            {
                type: "sample_space",
                question: "What is a sample space?",
                options: ["Set of all possible outcomes", "Set of favorable outcomes", "Number of trials", "Probability value"],
                answer: "A",
                explanation: "Sample space is the set of all possible outcomes of a probability experiment."
            },
            {
                type: "sample_space",
                question: "What is the sample space when rolling a standard die?",
                options: ["{1, 2, 3, 4, 5, 6}", "{1, 2, 3}", "{even, odd}", "{1, 2, 3, 4, 5}"],
                answer: "A",
                explanation: "A standard die has six faces numbered 1 through 6, so the sample space includes all six numbers."
            },
            {
                type: "sample_space",
                question: "How many outcomes are there when flipping two coins?",
                options: ["4", "2", "3", "6"],
                answer: "A",
                explanation: "Two coins: HH, HT, TH, TT = 4 possible outcomes"
            },
            {
                type: "sample_space",
                question: "What is an event in probability?",
                options: ["Subset of sample space", "Single outcome", "Probability value", "Number of trials"],
                answer: "A",
                explanation: "An event is a subset of the sample space - a collection of one or more outcomes."
            },
            {
                type: "sample_space",
                question: "What is a favorable outcome?",
                options: ["Outcome that satisfies event condition", "All outcomes", "First outcome", "Last outcome"],
                answer: "A",
                explanation: "Favorable outcomes are those outcomes that make the event occur."
            },
            // Calculating Probability (41-60)
            {
                type: "calculating_probability",
                question: "What is the formula for probability of event A?",
                options: ["P(A) = favorable outcomes / total outcomes", "P(A) = total outcomes / favorable outcomes", "P(A) = favorable outcomes √ó total outcomes", "P(A) = favorable outcomes - total outcomes"],
                answer: "A",
                explanation: "Probability = Number of favorable outcomes √∑ Total number of possible outcomes"
            },
            {
                type: "calculating_probability",
                question: "Probability of rolling an even number on a fair die?",
                options: ["1/2", "1/6", "1/3", "2/3"],
                answer: "A",
                explanation: "Even numbers on die: 2, 4, 6 (3 outcomes). Total outcomes: 6. Probability = 3/6 = 1/2"
            },
            {
                type: "calculating_probability",
                question: "Probability of drawing a heart from a standard deck?",
                options: ["1/4", "1/13", "1/52", "12/52"],
                answer: "A",
                explanation: "Standard deck has 52 cards, 13 hearts. Probability = 13/52 = 1/4"
            },
            {
                type: "calculating_probability",
                question: "Probability of getting a 7 when rolling a die?",
                options: ["0", "1/6", "1/7", "1"],
                answer: "A",
                explanation: "A standard die only has numbers 1-6, so getting 7 is impossible. Probability = 0"
            },
            {
                type: "calculating_probability",
                question: "Probability of getting at least 1 head when flipping 2 coins?",
                options: ["3/4", "1/2", "1/4", "1"],
                answer: "A",
                explanation: "Possible outcomes: HH, HT, TH, TT. At least 1 head in first 3 outcomes. Probability = 3/4"
            },
            // Complementary Events (61-80)
            {
                type: "complementary_events",
                question: "What is the complement of an event?",
                options: ["Event that does NOT occur", "Event that definitely occurs", "Same event", "Opposite outcome"],
                answer: "A",
                explanation: "Complement of event A is all outcomes where A does NOT occur."
            },
            {
                type: "complementary_events",
                question: "If P(A) = 0.3, what is P(not A)?",
                options: ["0.7", "0.3", "1", "0.5"],
                answer: "A",
                explanation: "P(not A) = 1 - P(A) = 1 - 0.3 = 0.7"
            },
            {
                type: "complementary_events",
                question: "Probability of NOT drawing an ace from a deck?",
                options: ["12/13", "1/13", "4/52", "48/52"],
                answer: "A",
                explanation: "There are 4 aces in 52 cards. P(ace) = 4/52 = 1/13. P(not ace) = 1 - 1/13 = 12/13"
            },
            {
                type: "complementary_events",
                question: "What is P(A) + P(not A) always equal to?",
                options: ["1", "0", "P(A)", "2"],
                answer: "A",
                explanation: "An event either occurs or doesn't occur, so their probabilities always sum to 1."
            },
            // Experimental vs Theoretical (81-100)
            {
                type: "experimental_theoretical",
                question: "What is theoretical probability?",
                options: ["Calculated using math principles", "Based on actual experiments", "Guessed probability", "Average probability"],
                answer: "A",
                explanation: "Theoretical probability is calculated mathematically based on possible outcomes, assuming all outcomes are equally likely."
            },
            {
                type: "experimental_theoretical",
                question: "What is experimental probability?",
                options: ["Based on actual trials/experiments", "Calculated mathematically", "Perfect probability", "Theoretical value"],
                answer: "A",
                explanation: "Experimental probability is calculated from actual observations or experiments: P = (number of times event occurred) √∑ (total trials)"
            },
            {
                type: "experimental_theoretical",
                question: "Which probability is more accurate with more trials?",
                options: ["Experimental approaches theoretical", "Theoretical changes", "Both stay same", "Experimental becomes less accurate"],
                answer: "A",
                explanation: "As number of trials increases, experimental probability tends to get closer to theoretical probability (Law of Large Numbers)"
            },
            {
                type: "experimental_theoretical",
                question: "Flip coin 100 times, get 45 heads. Experimental P(heads)?",
                options: ["0.45", "0.5", "0.55", "45"],
                answer: "A",
                explanation: "Experimental probability = favorable outcomes / total trials = 45/100 = 0.45"
            },
            // Probability Scale (101-120)
            {
                type: "probability_scale",
                question: "Where does 'certain' fall on probability scale?",
                options: ["1", "0", "0.5", "0.75"],
                answer: "A",
                explanation: "Certain events have probability = 1"
            },
            {
                type: "probability_scale",
                question: "Where does 'impossible' fall on probability scale?",
                options: ["0", "1", "0.5", "0.25"],
                answer: "A",
                explanation: "Impossible events have probability = 0"
            },
            {
                type: "probability_scale",
                question: "What is 'equally likely' on probability scale?",
                options: ["0.5", "0", "1", "0.25"],
                answer: "A",
                explanation: "Equally likely events (like coin flip) have probability = 0.5"
            },
            {
                type: "probability_scale",
                question: "Probability of 0.8 means event is...",
                options: ["Very likely", "Unlikely", "Certain", "Impossible"],
                answer: "A",
                explanation: "0.8 is close to 1, so event is very likely to occur"
            },
            // Combined Events (121-140)
            {
                type: "combined_events",
                question: "Probability of rolling 3 on die AND flipping heads on coin?",
                options: ["1/12", "1/6", "1/2", "1"],
                answer: "A",
                explanation: "P(3) = 1/6, P(heads) = 1/2. P(both) = (1/6) √ó (1/2) = 1/12"
            },
            {
                type: "combined_events",
                question: "Probability of drawing red card OR face card from deck?",
                options: ["8/13", "3/13", "1/4", "1/2"],
                answer: "A",
                explanation: "P(red) = 26/52, P(face) = 12/52, P(red face) = 6/52. P(red OR face) = (26 + 12 - 6)/52 = 32/52 = 8/13"
            },
            {
                type: "combined_events",
                question: "Are coin flips independent events?",
                options: ["Yes", "No", "Sometimes", "Never"],
                answer: "A",
                explanation: "Coin flips are independent - outcome of one flip doesn't affect another"
            },
            // Real-world Applications (141-160)
            {
                type: "real_world",
                question: "Weather forecast says 80% chance of rain. What does this mean?",
                options: ["High probability of rain", "Definite rain", "No rain", "50-50 chance"],
                answer: "A",
                explanation: "80% = 0.8 probability, which means rain is very likely but not certain"
            },
            {
                type: "real_world",
                question: "In game with 1 in 1000 chance of winning, probability is...",
                options: ["0.001", "0.1", "0.01", "0.0001"],
                answer: "A",
                explanation: "1 in 1000 = 1/1000 = 0.001 probability"
            },
            {
                type: "real_world",
                question: "If test has 4 choices per question, random guessing probability?",
                options: ["1/4 or 0.25", "1/2", "1/3", "1"],
                answer: "A",
                explanation: "With 4 equally likely choices, probability of guessing correctly = 1/4 = 0.25"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent probability reasoning!",
            "Perfect understanding of chance!",
            "Great job with probability calculations!",
            "Amazing! You're a probability champion!",
            "Perfect grasp of theoretical vs experimental!",
            "You're a future statistician in the making!",
            "Outstanding analytical thinking!",
            "Brilliant probability methodology!",
            "You think like a probabilist!",
            "Probability mastery achieved!"
        ];

        // Probability concepts
        const probabilityConcepts = [
            {
                name: "Basic Concepts",
                description: "Understanding probability fundamentals",
                icon: "üéØ"
            },
            {
                name: "Sample Space",
                description: "Identifying all possible outcomes",
                icon: "üìä"
            },
            {
                name: "Calculating Probability",
                description: "Using probability formulas",
                icon: "üßÆ"
            },
            {
                name: "Complementary Events",
                description: "Events that don't occur",
                icon: "üîÑ"
            },
            {
                name: "Experimental vs Theoretical",
                description: "Different probability approaches",
                icon: "‚öñÔ∏è"
            },
            {
                name: "Real Applications",
                description: "Probability in daily life",
                icon: "üåç"
            }
        ];

        // Probability types
        const probabilityTypes = [
            {
                name: "Basic Concepts",
                description: "Understanding probability fundamentals",
                examples: "Probability range (0-1), impossible vs certain events",
                characteristics: "Foundation of probability theory",
                icon: "üéØ",
                color: "#00BFA5"
            },
            {
                name: "Sample Space",
                description: "Identifying all possible outcomes",
                examples: "Dice outcomes, coin flip results, card draws",
                characteristics: "Complete set of possibilities",
                icon: "üìä",
                color: "#FFAB00"
            },
            {
                name: "Calculating Probability",
                description: "Using probability formulas and calculations",
                examples: "P = favorable/total, fractions, decimals, percentages",
                characteristics: "Mathematical computation of chances",
                icon: "üßÆ",
                color: "#AA00FF"
            },
            {
                name: "Complementary Events",
                description: "Events that don't occur",
                examples: "P(not A) = 1 - P(A), opposite events",
                characteristics: "Sum of probabilities equals 1",
                icon: "üîÑ",
                color: "#00C853"
            },
            {
                name: "Experimental vs Theoretical",
                description: "Different approaches to probability",
                examples: "Actual experiments vs mathematical predictions",
                characteristics: "Law of Large Numbers",
                icon: "‚öñÔ∏è",
                color: "#FF4081"
            },
            {
                name: "Real Applications",
                description: "Probability in daily life and decisions",
                examples: "Weather forecasts, game chances, risk assessment",
                characteristics: "Practical use of probability",
                icon: "üåç",
                color: "#2962FF"
            }
        ];

        // Basic probability examples
        const basicProbabilityExamples = [
            {
                type: "Coin Flip",
                probability: "1/2 or 0.5 or 50%",
                explanation: "Two equally likely outcomes: heads or tails"
            },
            {
                type: "Die Roll (even)",
                probability: "1/2 or 0.5 or 50%",
                explanation: "3 even numbers out of 6 possible outcomes"
            },
            {
                type: "Drawing Heart",
                probability: "1/4 or 0.25 or 25%",
                explanation: "13 hearts out of 52 cards in deck"
            },
            {
                type: "Certain Event",
                probability: "1 or 100%",
                explanation: "Event that will definitely happen"
            },
            {
                type: "Impossible Event",
                probability: "0 or 0%",
                explanation: "Event that cannot possibly happen"
            }
        ];

        // Experimental probability examples
        const experimentalProbabilityExamples = [
            {
                experiment: "Coin Flip 100 times",
                results: "Heads: 53, Tails: 47",
                probability: "P(Heads) = 53/100 = 0.53"
            },
            {
                experiment: "Die Roll 60 times",
                results: "Six appeared 8 times",
                probability: "P(Six) = 8/60 ‚âà 0.133"
            },
            {
                experiment: "Drawing Cards 200 times",
                results: "Aces drawn 15 times",
                probability: "P(Ace) = 15/200 = 0.075"
            },
            {
                experiment: "Spinner 80 spins",
                results: "Red landed 32 times",
                probability: "P(Red) = 32/80 = 0.4"
            }
        ];

        // Theoretical probability examples
        const theoreticalProbabilityExamples = [
            {
                scenario: "Standard die roll",
                calculation: "P(Number > 4) = P(5 or 6) = 2/6 = 1/3",
                result: "0.333 or 33.3%"
            },
            {
                scenario: "Card deck draw",
                calculation: "P(Face Card) = 12/52 = 3/13",
                result: "0.231 or 23.1%"
            },
            {
                scenario: "Two coin flips",
                calculation: "P(Two Heads) = 1/4",
                result: "0.25 or 25%"
            },
            {
                scenario: "Sum of two dice = 7",
                calculation: "6 favorable outcomes out of 36 total",
                result: "6/36 = 1/6 ‚âà 0.167"
            }
        ];

        // Probability facts
        const probabilityFacts = [
            "Probability theory began with studies of gambling games in the 17th century!",
            "The probability of getting a royal flush in poker is about 1 in 649,740!",
            "In a room of 23 people, there's a 50% chance two share a birthday!",
            "The Law of Large Numbers says experimental probability approaches theoretical with many trials!",
            "Probability is used in weather forecasting, insurance, medicine, and sports!",
            "The Monty Hall problem is a famous probability puzzle that confuses many!",
            "Probability values can be expressed as fractions, decimals, or percentages!",
            "Independent events don't affect each other's probabilities!"
        ];

        // Probability study concepts
        const probabilityStudyConcepts = [
            {
                concept: "Probability Scale",
                description: "Understanding the 0 to 1 probability range",
                examples: "0 = impossible, 0.5 = equally likely, 1 = certain"
            },
            {
                concept: "Sample Space",
                description: "Identifying all possible outcomes",
                examples: "List outcomes, use tree diagrams, organized lists"
            },
            {
                concept: "Probability Calculation",
                description: "Using the basic probability formula",
                examples: "P = favorable outcomes √∑ total outcomes"
            },
            {
                concept: "Real Applications",
                description: "Applying probability to real-world situations",
                examples: "Games, weather, statistics, decision making"
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const probabilityFact = document.getElementById('probabilityFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade7Probability');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade7Probability', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade7Probability_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a probability expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent probability skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing your probability calculations!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review probability concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Probability builds analytical thinking and decision-making skills!";
            }
        }

        // Create probability fact display
        function createProbabilityFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'probability-fact';
            
            factDiv.innerHTML = `<strong>Interesting Probability Fact:</strong> ${probabilityFacts[Math.floor(Math.random() * probabilityFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "basic_concepts": "üéØ",
                "sample_space": "üìä",
                "calculating_probability": "üßÆ",
                "complementary_events": "üîÑ",
                "experimental_theoretical": "‚öñÔ∏è",
                "probability_scale": "üìà",
                "combined_events": "üîó",
                "real_world": "üåç"
            };
            
            let conceptName = "Basic Concepts";
            let conceptIcon = "üéØ";
            
            if (question.type.includes("basic_concepts")) {
                conceptName = "Basic Concepts";
                conceptIcon = conceptIcons.basic_concepts;
            } else if (question.type.includes("sample_space")) {
                conceptName = "Sample Space";
                conceptIcon = conceptIcons.sample_space;
            } else if (question.type.includes("calculating_probability")) {
                conceptName = "Calculating Probability";
                conceptIcon = conceptIcons.calculating_probability;
            } else if (question.type.includes("complementary_events")) {
                conceptName = "Complementary Events";
                conceptIcon = conceptIcons.complementary_events;
            } else if (question.type.includes("experimental_theoretical")) {
                conceptName = "Experimental vs Theoretical";
                conceptIcon = conceptIcons.experimental_theoretical;
            } else if (question.type.includes("probability_scale")) {
                conceptName = "Probability Scale";
                conceptIcon = conceptIcons.probability_scale;
            } else if (question.type.includes("combined_events")) {
                conceptName = "Combined Events";
                conceptIcon = conceptIcons.combined_events;
            } else if (question.type.includes("real_world")) {
                conceptName = "Real World Applications";
                conceptIcon = conceptIcons.real_world;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("basic_concepts")) {
                label.textContent = "Understanding probability fundamentals: range, impossible vs certain";
            } else if (question.type.includes("sample_space")) {
                label.textContent = "Identifying all possible outcomes of probability experiments";
            } else if (question.type.includes("calculating_probability")) {
                label.textContent = "Using probability formulas: P = favorable outcomes √∑ total outcomes";
            } else if (question.type.includes("complementary_events")) {
                label.textContent = "Events that don't occur: P(not A) = 1 - P(A)";
            } else if (question.type.includes("experimental_theoretical")) {
                label.textContent = "Experimental (actual trials) vs Theoretical (mathematical) probability";
            } else if (question.type.includes("probability_scale")) {
                label.textContent = "Understanding the 0 to 1 probability scale and interpreting values";
            } else if (question.type.includes("combined_events")) {
                label.textContent = "Probability of combined events: AND (multiply), OR (add)";
            } else if (question.type.includes("real_world")) {
                label.textContent = "Real-world applications of probability in daily life";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create probability visualization
        function createProbabilityVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">Probability Explorer</h3>
                
                <div class="probability-display">
                    <div class="display-title">Current Probability Concept</div>
                    <div class="probability-container">
                        <div class="probability-scenario">${currentQuestion.question}</div>
                        <div class="probability-highlight">
                            <strong>Key Concept:</strong> <span class="highlight-text">${getProbabilityConcept(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Probability Demonstrator -->
                <div class="probability-canvas">
                    <div style="display: flex; justify-content: space-around; align-items: center; height: 100%;">
                        <div style="text-align: center;">
                            <div class="dice dice-${Math.floor(Math.random() * 6) + 1} dice-roll">
                                ${Array(Math.floor(Math.random() * 6) + 1).fill('<div class="dot"></div>').join('')}
                            </div>
                            <div style="margin-top: 10px; color: var(--text-secondary);">Rolling Die</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; animation: spinCoin 3s linear infinite;">ü™ô</div>
                            <div style="margin-top: 10px; color: var(--text-secondary);">Flipping Coin</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div class="card-suit ${Math.random() > 0.5 ? 'red-card' : 'black-card'} bounce-ball" style="font-size: 2rem;">
                                ${['‚ô•', '‚ô¶', '‚ô£', '‚ô†'][Math.floor(Math.random() * 4)]}
                            </div>
                            <div style="margin-top: 10px; color: var(--text-secondary);">Drawing Card</div>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-bottom: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                    Interactive Probability Demonstrator - See probability in action!
                </div>
                
                <div class="probability-grid">
                    ${probabilityTypes.map(type => `
                        <div class="probability-card ${type.name.toLowerCase().replace(' ', '_')} ${type.name.toLowerCase().replace(' ', '_')}-glow" style="border-color: ${type.color}" onclick="showProbabilityDemo('${type.name}')">
                            <div class="probability-icon probability-glow" style="color: ${type.color}">${type.icon}</div>
                            <div class="probability-title" style="color: ${type.color}">${type.name}</div>
                            <div class="probability-description">${type.description}</div>
                            <div class="probability-examples">
                                <strong>Examples:</strong> ${type.examples}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <table class="probability-table">
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Favorable Outcomes</th>
                            <th>Total Outcomes</th>
                            <th>Probability</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${basicProbabilityExamples.slice(0, 4).map(example => `
                            <tr>
                                <td style="font-weight: bold; color: var(--secondary-teal);">${example.type}</td>
                                <td>${getFavorableOutcomes(example.type)}</td>
                                <td>${getTotalOutcomes(example.type)}</td>
                                <td style="color: var(--accent-purple); font-weight: bold;">${example.probability}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="basics-container probability-glow">
                    <div class="basics-title">Basic Probability Examples</div>
                    <div class="basics-grid">
                        ${basicProbabilityExamples.map(example => `
                            <div class="basic-card">
                                <div class="basic-icon">üéØ</div>
                                <div class="basic-type">${example.type}</div>
                                <div class="basic-steps">
                                    <strong>Probability:</strong> ${example.probability}<br>
                                    <strong>Why:</strong> ${example.explanation}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="experimental-container chance-glow">
                    <div class="experimental-title">Experimental Probability Examples</div>
                    <div class="experimental-grid">
                        ${experimentalProbabilityExamples.slice(0, 4).map(example => `
                            <div class="experimental-card">
                                <div class="experimental-icon">üî¨</div>
                                <div class="experimental-type">${example.experiment}</div>
                                <div class="experimental-steps">
                                    <strong>Results:</strong> ${example.results}<br>
                                    <strong>Calculation:</strong> ${example.probability}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="theoretical-container outcome-glow">
                    <div class="theoretical-title">Theoretical Probability Examples</div>
                    <div class="theoretical-grid">
                        ${theoreticalProbabilityExamples.slice(0, 4).map(example => `
                            <div class="theoretical-card">
                                <div class="theoretical-icon">üìê</div>
                                <div class="theoretical-type">${example.scenario}</div>
                                <div class="theoretical-steps">
                                    <strong>Calculation:</strong> ${example.calculation}<br>
                                    <strong>Result:</strong> ${example.result}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="calculator-container">
                    <div class="calculator-title">Interactive Probability Calculator</div>
                    <div class="calculator-controls">
                        <select class="calculator-select" id="probabilityType">
                            <option value="">Select Probability Type</option>
                            <option value="coin">Coin Flip</option>
                            <option value="dice">Dice Roll</option>
                            <option value="cards">Card Draw</option>
                            <option value="spinner">Spinner</option>
                        </select>
                        <textarea class="calculator-input" id="probabilityInput" placeholder="Describe your probability problem... Example: 'Probability of rolling an even number on a die' or 'Chance of drawing a heart from deck'"></textarea>
                        <div class="calculator-buttons">
                            <button class="calculator-btn" onclick="calculateProbability()">Calculate</button>
                            <button class="calculator-btn" onclick="getProbabilityChallenge()">Get Challenge</button>
                            <button class="calculator-btn" onclick="clearProbabilityCalculator()">Clear</button>
                        </div>
                    </div>
                    <div class="calculator-display" id="calculatorDisplay">
                        Your probability calculation will appear here...
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-purple);">
                    <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 10px;">Quick Probability Guide:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. <strong>Probability Formula:</strong> P = favorable outcomes √∑ total outcomes<br>
                        2. <strong>Probability Range:</strong> 0 (impossible) to 1 (certain)<br>
                        3. <strong>Coin Flip:</strong> 2 outcomes, P(heads) = 1/2 = 0.5 = 50%<br>
                        4. <strong>Die Roll:</strong> 6 outcomes, P(even) = 3/6 = 1/2 = 0.5<br>
                        5. <strong>Card Deck:</strong> 52 cards, P(heart) = 13/52 = 1/4 = 0.25<br>
                        6. <strong>Complementary:</strong> P(not A) = 1 - P(A)<br>
                        7. <strong>Experimental:</strong> Based on actual trials/experiments<br>
                        8. <strong>Theoretical:</strong> Based on mathematical calculations
                    </div>
                </div>
                
                <div class="probability-study-container">
                    <div class="display-title">Probability Study Strategies</div>
                    <div class="probability-study-grid">
                        ${probabilityStudyConcepts.map(concept => `
                            <div class="study-card">
                                <div class="study-icon">üìö</div>
                                <div class="study-concept">${concept.concept}</div>
                                <div class="study-description">
                                    <strong>Description:</strong> ${concept.description}<br>
                                    <strong>Examples:</strong> ${concept.examples}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="solution-container">
                    <div class="display-title">Step-by-Step Learning Path</div>
                    <div class="solution-steps" id="solutionSteps">
                        ${generateLearningPath(currentQuestion)}
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--secondary-teal);">
                    <div style="color: var(--secondary-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Probability Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Always Identify Sample Space:</strong> List all possible outcomes first<br>
                        <strong>Count Carefully:</strong> Make sure you count favorable outcomes correctly<br>
                        <strong>Simplify Fractions:</strong> Always simplify probability fractions<br>
                        <strong>Check Range:</strong> Probability must be between 0 and 1<br>
                        <strong>Practice with Real Objects:</strong> Use actual coins, dice, cards<br>
                        <em>Probability develops analytical thinking, decision-making skills, and helps understand uncertainty in the world!</em>
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper functions
        function getProbabilityConcept(typeString) {
            const conceptMap = {
                "basic_concepts": "Basic Concepts - Understanding probability fundamentals, range, impossible vs certain events",
                "sample_space": "Sample Space - Identifying all possible outcomes of probability experiments",
                "calculating_probability": "Calculating Probability - Using probability formulas: P = favorable outcomes √∑ total outcomes",
                "complementary_events": "Complementary Events - Events that don't occur: P(not A) = 1 - P(A)",
                "experimental_theoretical": "Experimental vs Theoretical - Experimental (actual trials) vs Theoretical (mathematical) probability",
                "probability_scale": "Probability Scale - Understanding the 0 to 1 scale and interpreting probability values",
                "combined_events": "Combined Events - Probability of combined events: AND (multiply), OR (add)",
                "real_world": "Real World Applications - Practical applications of probability in daily life"
            };
            
            return conceptMap[typeString] || "Probability Concept";
        }

        function getFavorableOutcomes(scenario) {
            const favorableMap = {
                "Coin Flip": "1 (heads)",
                "Die Roll (even)": "3 (2, 4, 6)",
                "Drawing Heart": "13 (all hearts)",
                "Certain Event": "All outcomes",
                "Impossible Event": "0 (no outcomes)"
            };
            return favorableMap[scenario] || "Varies";
        }

        function getTotalOutcomes(scenario) {
            const totalMap = {
                "Coin Flip": "2 (heads, tails)",
                "Die Roll (even)": "6 (1-6)",
                "Drawing Heart": "52 (all cards)",
                "Certain Event": "All outcomes",
                "Impossible Event": "All outcomes"
            };
            return totalMap[scenario] || "Varies";
        }

        function generateLearningPath(question) {
            let steps = [];
            
            if (question.type.includes("basic_concepts")) {
                steps = [
                    "Step 1: Understand what probability measures (likelihood/chance)",
                    "Step 2: Learn the probability range (0 to 1)",
                    "Step 3: Identify impossible (0) vs certain (1) events",
                    "Step 4: Recognize equally likely events (0.5 or 50%)",
                    "Step 5: Apply these concepts to probability problems"
                ];
            } else if (question.type.includes("sample_space")) {
                steps = [
                    "Step 1: Identify the experiment (coin flip, die roll, etc.)",
                    "Step 2: List ALL possible outcomes",
                    "Step 3: Ensure outcomes are equally likely",
                    "Step 4: Count total number of outcomes",
                    "Step 5: Use sample space for probability calculations"
                ];
            } else if (question.type.includes("calculating_probability")) {
                steps = [
                    "Step 1: Identify favorable outcomes",
                    "Step 2: Count total possible outcomes",
                    "Step 3: Apply formula: P = favorable √∑ total",
                    "Step 4: Simplify fraction if possible",
                    "Step 5: Express as fraction, decimal, or percentage"
                ];
            } else if (question.type.includes("complementary_events")) {
                steps = [
                    "Step 1: Identify the event A",
                    "Step 2: Find P(A) if not given",
                    "Step 3: Apply complementary rule: P(not A) = 1 - P(A)",
                    "Step 4: Calculate the complement",
                    "Step 5: Verify sum equals 1"
                ];
            } else {
                steps = [
                    "Step 1: Read the probability problem carefully",
                    "Step 2: Identify the probability concept being tested",
                    "Step 3: Recall the appropriate formula or method",
                    "Step 4: Apply the probability principles",
                    "Step 5: Verify your answer makes sense (0 to 1 range)"
                ];
            }
            
            return steps.map((step, index) => `
                <div class="probability-step probability-reveal" style="animation-delay: ${index * 0.1}s">
                    <span class="step-number">${index + 1}</span>
                    <span class="step-description">${step}</span>
                    ${index === steps.length - 1 ? `
                        <div style="margin-top: 10px; padding: 10px; background: rgba(170, 0, 255, 0.05); border-radius: 6px;">
                            <strong>Correct Answer:</strong> ${question.options[question.answer.charCodeAt(0) - 65]}
                        </div>
                        <div style="margin-top: 10px; font-style: italic; color: var(--text-secondary);">
                            ${question.explanation}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Interactive calculator functions
        window.calculateProbability = function() {
            const probabilityType = document.getElementById('probabilityType').value;
            const probabilityInput = document.getElementById('probabilityInput').value.trim();
            const calculatorDisplay = document.getElementById('calculatorDisplay');
            
            if (!probabilityType && !probabilityInput) {
                calculatorDisplay.innerHTML = "Please select a probability type or describe your probability problem.";
                return;
            }
            
            let result;
            let explanation;
            let color = "#00BFA5";
            
            if (probabilityType === "coin") {
                result = "Probability = 1/2 = 0.5 = 50%";
                explanation = "A fair coin has 2 equally likely outcomes: heads or tails. Probability of any specific outcome = 1/2.";
            } else if (probabilityType === "dice") {
                const outcomes = [
                    "P(1) = 1/6 ‚âà 0.167",
                    "P(even) = 3/6 = 1/2 = 0.5",
                    "P(>4) = 2/6 = 1/3 ‚âà 0.333",
                    "P(7) = 0/6 = 0"
                ];
                result = outcomes[Math.floor(Math.random() * outcomes.length)];
                explanation = "Standard die has 6 equally likely outcomes: 1, 2, 3, 4, 5, 6.";
            } else if (probabilityType === "cards") {
                const outcomes = [
                    "P(Heart) = 13/52 = 1/4 = 0.25",
                    "P(Ace) = 4/52 = 1/13 ‚âà 0.077",
                    "P(Face Card) = 12/52 = 3/13 ‚âà 0.231",
                    "P(Red Card) = 26/52 = 1/2 = 0.5"
                ];
                result = outcomes[Math.floor(Math.random() * outcomes.length)];
                explanation = "Standard deck has 52 cards: 4 suits (13 cards each), 2 colors (red/black).";
            } else {
                // Try to determine from user input
                const input = probabilityInput.toLowerCase();
                if (input.includes('coin') || input.includes('flip')) {
                    result = "P(heads) = 1/2 = 0.5 = 50%";
                    explanation = "Fair coin: 2 outcomes (heads, tails), equally likely.";
                    color = "#FFAB00";
                } else if (input.includes('die') || input.includes('dice') || input.includes('roll')) {
                    if (input.includes('even')) {
                        result = "P(even) = 3/6 = 1/2 = 0.5 = 50%";
                        explanation = "Even numbers on die: 2, 4, 6 (3 outcomes). Total outcomes: 6.";
                    } else if (input.includes('odd')) {
                        result = "P(odd) = 3/6 = 1/2 = 0.5 = 50%";
                        explanation = "Odd numbers on die: 1, 3, 5 (3 outcomes). Total outcomes: 6.";
                    } else if (input.includes('prime')) {
                        result = "P(prime) = 3/6 = 1/2 = 0.5 = 50%";
                        explanation = "Prime numbers on die: 2, 3, 5 (3 outcomes). Total outcomes: 6.";
                    } else {
                        result = "P(specific number) = 1/6 ‚âà 0.167 = 16.7%";
                        explanation = "Standard die has 6 equally likely outcomes.";
                    }
                    color = "#AA00FF";
                } else if (input.includes('card') || input.includes('deck')) {
                    if (input.includes('heart')) {
                        result = "P(heart) = 13/52 = 1/4 = 0.25 = 25%";
                        explanation = "13 hearts in 52-card deck.";
                    } else if (input.includes('ace')) {
                        result = "P(ace) = 4/52 = 1/13 ‚âà 0.077 = 7.7%";
                        explanation = "4 aces in 52-card deck.";
                    } else if (input.includes('face')) {
                        result = "P(face card) = 12/52 = 3/13 ‚âà 0.231 = 23.1%";
                        explanation = "12 face cards (J, Q, K) in 52-card deck.";
                    } else {
                        result = "P(red card) = 26/52 = 1/2 = 0.5 = 50%";
                        explanation = "26 red cards (hearts + diamonds) in 52-card deck.";
                    }
                    color = "#00C853";
                } else {
                    result = "P = favorable outcomes √∑ total outcomes";
                    explanation = "Basic probability formula. Identify favorable outcomes and total possible outcomes.";
                    color = "#2962FF";
                }
            }
            
            calculatorDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; margin-bottom: 10px; color: ${color};">
                        Probability Calculation
                    </div>
                    
                    ${probabilityInput ? `<div style="background: var(--dark-surface); padding: 10px; border-radius: 8px; margin: 10px 0;">
                        <strong>Your Problem:</strong> ${probabilityInput}
                    </div>` : ''}
                    
                    <div style="background: rgba(${parseInt(color.slice(1,3), 16)}, ${parseInt(color.slice(3,5), 16)}, ${parseInt(color.slice(5,7), 16)}, 0.1); padding: 20px; border-radius: 8px; margin: 15px 0; border: 2px solid ${color};">
                        <div style="font-size: 1.8rem; font-weight: bold; color: ${color};">
                            ${result}
                        </div>
                    </div>
                    
                    <div style="text-align: left;">
                        <div style="color: ${color}; font-weight: bold; margin: 10px 0;">Explanation:</div>
                        <div style="padding: 10px; background: var(--dark-surface); border-radius: 6px;">
                            ${explanation}
                        </div>
                        
                        <div style="margin-top: 15px; color: var(--text-secondary);">
                            <strong>Remember:</strong> Probability values range from 0 (impossible) to 1 (certain).
                        </div>
                    </div>
                </div>
            `;
        };

        window.getProbabilityChallenge = function() {
            const probabilityInput = document.getElementById('probabilityInput');
            
            if (!probabilityInput) return;
            
            const challenges = [
                "What's the probability of rolling a prime number on a standard die?",
                "Calculate the probability of drawing a club from a standard deck.",
                "If you flip two coins, what's the probability of getting at least one head?",
                "What's the probability of rolling a number greater than 2 on a die?",
                "Calculate P(not drawing an ace) from a standard deck.",
                "If a spinner has 8 equal sections (3 red, 2 blue, 3 green), what's P(red)?",
                "What's the probability of getting heads when flipping a fair coin?",
                "Calculate the probability of rolling an even number AND flipping tails."
            ];
            
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            probabilityInput.value = randomChallenge;
            probabilityInput.focus();
        };

        window.clearProbabilityCalculator = function() {
            const probabilityInput = document.getElementById('probabilityInput');
            const calculatorDisplay = document.getElementById('calculatorDisplay');
            
            if (probabilityInput) probabilityInput.value = '';
            if (calculatorDisplay) {
                calculatorDisplay.innerHTML = "Your probability calculation will appear here...";
            }
        };

        window.showProbabilityDemo = function(probabilityName) {
            const calculatorDisplay = document.getElementById('calculatorDisplay');
            
            const demos = {
                "Basic Concepts": {
                    color: "#00BFA5",
                    content: `
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; color: #00BFA5; margin-bottom: 15px;">Basic Probability Concepts</div>
                            <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                                <div style="text-align: center;">
                                    <div style="font-size: 3rem;">0</div>
                                    <div style="color: var(--text-secondary);">Impossible</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 3rem;">0.5</div>
                                    <div style="color: var(--text-secondary);">Equally Likely</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 3rem;">1</div>
                                    <div style="color: var(--text-secondary);">Certain</div>
                                </div>
                            </div>
                            <div style="color: var(--text-secondary);">
                                <strong>Key Idea:</strong> All probabilities range from 0 to 1
                            </div>
                        </div>
                    `
                },
                "Sample Space": {
                    color: "#FFAB00",
                    content: `
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; color: #FFAB00; margin-bottom: 15px;">Sample Space Examples</div>
                            <div style="text-align: left; padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                                <div><strong>Coin Flip:</strong> {Heads, Tails}</div>
                                <div><strong>Die Roll:</strong> {1, 2, 3, 4, 5, 6}</div>
                                <div><strong>Card Draw:</strong> {52 different cards}</div>
                                <div><strong>Two Coins:</strong> {HH, HT, TH, TT}</div>
                            </div>
                            <div style="margin-top: 15px; color: var(--text-secondary);">
                                <strong>Definition:</strong> Sample space = set of all possible outcomes
                            </div>
                        </div>
                    `
                }
            };
            
            if (demos[probabilityName] && calculatorDisplay) {
                calculatorDisplay.innerHTML = demos[probabilityName].content;
            }
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            probabilityFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            probabilityFact.appendChild(createProbabilityFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createProbabilityVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin your probability journey!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
