<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 Science - Food Chains, Food Webs & Ecosystems | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Science/Nature Theme */
        :root {
            --primary-green: #4CAF50;
            --secondary-teal: #009688;
            --accent-brown: #795548;
            --accent-orange: #FF9800;
            --accent-blue: #2196F3;
            --accent-yellow: #FFEB3B;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(76, 175, 80, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(76, 175, 80, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-green);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-green);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-primary:hover {
            background: #388E3C;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
        }

        .btn-secondary:hover {
            background: #00796B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-green);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-green), var(--secondary-teal));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-green), var(--accent-brown));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-green);
            background: rgba(76, 175, 80, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--primary-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 5px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Ecosystem Display */
        .ecosystem-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid var(--secondary-teal);
            line-height: 1.6;
            font-size: 1.1rem;
        }

        .ecosystem-title {
            color: var(--secondary-teal);
            margin-bottom: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ecosystem-type {
            display: inline-block;
            padding: 5px 10px;
            background: var(--primary-green);
            color: white;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .food-chain .ecosystem-type { background: var(--accent-orange); }
        .food-web .ecosystem-type { background: var(--accent-blue); }
        .habitat .ecosystem-type { background: var(--accent-brown); }

        /* Comparison Display */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }
        }

        .ecosystem-column {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid transparent;
        }

        .ecosystem-column.food-chain {
            border-color: var(--accent-orange);
        }

        .ecosystem-column.food-web {
            border-color: var(--accent-blue);
        }

        .column-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .ecosystem-column.food-web .column-title {
            color: var(--accent-blue);
        }

        /* Chain/Web Display */
        .chain-display {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .chain-display {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .chain-display {
                grid-template-columns: 1fr;
            }
        }

        .chain-item {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .chain-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--accent-yellow);
        }

        .chain-name {
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 8px;
        }

        .chain-role {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Habitat Cards */
        .habitat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .habitat-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .habitat-grid {
                grid-template-columns: 1fr;
            }
        }

        .habitat-card {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
        }

        .habitat-card:hover {
            transform: translateY(-3px);
        }

        .habitat-card.active {
            border-color: var(--primary-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .habitat-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .habitat-title {
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 8px;
            text-align: center;
        }

        .habitat-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Food Web Diagram */
        .web-diagram {
            margin: 20px 0;
            padding: 20px;
            background: var(--dark-card);
            border-radius: 8px;
            border: 2px solid var(--accent-blue);
        }

        .web-node {
            display: inline-block;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 20px;
            font-weight: bold;
            text-align: center;
        }

        .producer { background: rgba(76, 175, 80, 0.2); border: 2px solid var(--primary-green); }
        .primary-consumer { background: rgba(255, 152, 0, 0.2); border: 2px solid var(--accent-orange); }
        .secondary-consumer { background: rgba(33, 150, 243, 0.2); border: 2px solid var(--accent-blue); }
        .decomposer { background: rgba(121, 85, 72, 0.2); border: 2px solid var(--accent-brown); }

        /* Flow Display */
        .flow-display {
            margin: 20px 0;
        }

        .flow-step {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent-orange);
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .step-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--accent-orange);
            border-radius: 50%;
            font-weight: bold;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .step-detail {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Conservation Tips Display */
        .conservation-tips {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .tips-title {
            color: var(--primary-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .tips-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 6px;
        }

        .tip-icon {
            color: var(--primary-green);
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .tip-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Ecosystem Table */
        .ecosystem-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .ecosystem-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--primary-green);
            border-bottom: 2px solid var(--primary-green);
        }

        .ecosystem-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .ecosystem-table tr:hover {
            background: rgba(76, 175, 80, 0.05);
        }

        .producer-cell {
            border-left: 4px solid var(--primary-green);
        }

        .consumer-cell {
            border-left: 4px solid var(--accent-orange);
        }

        .decomposer-cell {
            border-left: 4px solid var(--accent-brown);
        }

        /* Interactive Practice */
        .interactive-practice {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .practice-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .ecosystem-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--dark-border);
            min-height: 150px;
            position: relative;
        }

        .solution-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--primary-green);
            min-height: 150px;
            color: var(--primary-green);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .habitat-grid {
                grid-template-columns: 1fr;
            }
            
            .chain-display {
                grid-template-columns: 1fr;
            }
            
            .tips-list {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes energyFlow {
            0% { transform: translateX(-10px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .energy-flow {
            animation: energyFlow 0.8s ease forwards;
        }
        
        @keyframes habitatCycle {
            0% { transform: rotateY(0); }
            100% { transform: rotateY(360deg); }
        }
        
        .habitat-cycle {
            animation: habitatCycle 4s ease-in-out infinite;
        }
        
        @keyframes foodChain {
            0%, 100% { color: var(--primary-green); }
            50% { color: var(--accent-orange); }
        }
        
        .food-chain-anim {
            animation: foodChain 2s ease-in-out infinite;
        }
        
        @keyframes ecosystemPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(76, 175, 80, 0.1); }
        }
        
        .ecosystem-pulse {
            animation: ecosystemPulse 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1418065460487-3e41a6c84dc5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1518837695005-2083093ee35b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 Science</h1>
            <p class="welcome-subtitle">Explore the fascinating world of ecosystems! Learn how food chains and food webs show energy flow in nature. Discover different habitats and how living things depend on each other and their environment. Understand the delicate balance of nature!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üåøü¶Åüêü</span>
                <span class="topic-name">Food Chains, Food Webs & Ecosystems</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Ecosystem Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 130</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Science fact display -->
                <div id="scienceFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Ecosystem Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 130+ Grade 5 Ecosystems, Food Chains & Food Webs questions
        const questions = [
            // Food Chain Basics (1-25)
            {
                type: "food_chain_basics",
                question: "What is a food chain?",
                options: ["A sequence showing who eats whom", "A list of animals in a forest", "Types of food animals eat", "Different habitats in an area"],
                answer: "A",
                explanation: "A food chain shows the flow of energy from one organism to another through feeding relationships."
            },
            {
                type: "food_chain_basics",
                question: "What always starts a food chain?",
                options: ["Producer (plant)", "Herbivore", "Carnivore", "Decomposer"],
                answer: "A",
                explanation: "All food chains begin with producers (plants) that make their own food using sunlight."
            },
            {
                type: "food_chain_basics",
                question: "What is a producer in a food chain?",
                options: ["Organism that makes its own food", "Animal that eats plants", "Animal that eats other animals", "Organism that breaks down dead matter"],
                answer: "A",
                explanation: "Producers (mainly plants) use sunlight to make food through photosynthesis."
            },
            {
                type: "food_chain_basics",
                question: "What is a consumer?",
                options: ["Organism that eats other organisms", "Plant that makes food", "Sun that provides energy", "Fungus that decomposes"],
                answer: "A",
                explanation: "Consumers cannot make their own food and must eat other organisms for energy."
            },
            {
                type: "food_chain_basics",
                question: "What is a herbivore?",
                options: ["Animal that eats only plants", "Animal that eats only meat", "Animal that eats plants and animals", "Plant that makes food"],
                answer: "A",
                explanation: "Herbivores are primary consumers that eat producers (plants)."
            },
            {
                type: "food_chain_basics",
                question: "What is a carnivore?",
                options: ["Animal that eats only other animals", "Animal that eats only plants", "Animal that eats both plants and animals", "Plant that eats insects"],
                answer: "A",
                explanation: "Carnivores are meat-eaters that consume other animals."
            },
            {
                type: "food_chain_basics",
                question: "What is an omnivore?",
                options: ["Animal that eats both plants and animals", "Animal that eats only plants", "Animal that eats only meat", "Plant that makes food"],
                answer: "A",
                explanation: "Omnivores consume both plant and animal matter."
            },
            {
                type: "food_chain_basics",
                question: "What is a decomposer?",
                options: ["Organism that breaks down dead matter", "Plant that makes food", "Animal that hunts others", "First animal in food chain"],
                answer: "A",
                explanation: "Decomposers like fungi and bacteria break down dead organisms, returning nutrients to soil."
            },
            {
                type: "food_chain_basics",
                question: "What shows the direction of energy flow in a food chain?",
                options: ["Arrow pointing from eater to eaten", "Arrow pointing from eaten to eater", "Equal signs between organisms", "No arrows needed"],
                answer: "A",
                explanation: "Arrows in food chains point from the organism being eaten to the organism that eats it, showing energy flow."
            },
            {
                type: "food_chain_basics",
                question: "Which is a correct food chain?",
                options: ["Grass ‚Üí Grasshopper ‚Üí Frog ‚Üí Snake", "Snake ‚Üí Frog ‚Üí Grasshopper ‚Üí Grass", "Grass ‚Üí Snake ‚Üí Frog ‚Üí Grasshopper", "Frog ‚Üí Grass ‚Üí Snake ‚Üí Grasshopper"],
                answer: "A",
                explanation: "Energy flows: producer (grass) ‚Üí herbivore (grasshopper) ‚Üí carnivore (frog) ‚Üí carnivore (snake)."

            },
            // Food Web Concepts (26-50)
            {
                type: "food_web_concepts",
                question: "What is a food web?",
                options: ["Multiple interconnected food chains", "A single food chain", "List of all plants in ecosystem", "Types of food humans eat"],
                answer: "A",
                explanation: "A food web shows how multiple food chains in an ecosystem are connected."
            },
            {
                type: "food_web_concepts",
                question: "How is a food web different from a food chain?",
                options: ["Shows multiple feeding relationships", "Has fewer organisms", "Shows only one path", "Doesn't include producers"],
                answer: "A",
                explanation: "Food webs show the complex network of feeding relationships, while food chains show a single path."
            },
            {
                type: "food_web_concepts",
                question: "Why are food webs more realistic than food chains?",
                options: ["Animals usually eat more than one type of food", "Animals eat only one thing", "Plants don't need animals", "Energy flows only one way"],
                answer: "A",
                explanation: "Most animals eat multiple types of food, so food webs better represent real ecosystems."
            },
            {
                type: "food_web_concepts",
                question: "What happens if one species disappears from a food web?",
                options: ["Can affect many other species", "Only affects one other species", "Nothing changes", "Makes ecosystem stronger"],
                answer: "A",
                explanation: "In interconnected food webs, removing one species can impact predators, prey, and competitors."
            },
            {
                type: "food_web_concepts",
                question: "What is an apex predator?",
                options: ["Top predator with no natural enemies", "Plant at start of food chain", "Herbivore that eats plants", "Decomposer that breaks down waste"],
                answer: "A",
                explanation: "Apex predators are at the top of the food chain/web with no natural predators."
            },
            {
                type: "food_web_concepts",
                question: "What do arrows in a food web represent?",
                options: ["Flow of energy", "Movement of animals", "Growth of plants", "Changes in population"],
                answer: "A",
                explanation: "Arrows show the direction of energy transfer from prey to predator."
            },
            {
                type: "food_web_concepts",
                question: "Where does all energy in a food web originally come from?",
                options: ["The Sun", "Plants", "Animals", "Soil"],
                answer: "A",
                explanation: "Sunlight provides the initial energy that plants capture through photosynthesis."
            },
            {
                type: "food_web_concepts",
                question: "What percentage of energy is transferred between levels?",
                options: ["About 10%", "About 50%", "About 90%", "100%"],
                answer: "A",
                explanation: "Only about 10% of energy is transferred from one trophic level to the next; rest is lost as heat."
            },
            {
                type: "food_web_concepts",
                question: "What is a trophic level?",
                options: ["Position in food chain/web", "Type of habitat", "Seasonal change", "Population size"],
                answer: "A",
                explanation: "Trophic levels are feeding positions: producers (1st), herbivores (2nd), carnivores (3rd/4th)."
            },
            {
                type: "food_web_concepts",
                question: "Why are there usually fewer apex predators than herbivores?",
                options: ["Energy decreases at each level", "They reproduce slower", "They need less food", "They live shorter lives"],
                answer: "A",
                explanation: "Due to 10% energy transfer, fewer organisms can be supported at higher trophic levels."

            },
            // Ecosystem Basics (51-75)
            {
                type: "ecosystem_basics",
                question: "What is an ecosystem?",
                options: ["Community of living things plus their environment", "Only the plants in an area", "Only the animals in an area", "The weather in a region"],
                answer: "A",
                explanation: "Ecosystem includes all living organisms (biotic) and non-living factors (abiotic) in an area."
            },
            {
                type: "ecosystem_basics",
                question: "What are biotic factors?",
                options: ["Living components of ecosystem", "Non-living components", "Weather patterns", "Soil types"],
                answer: "A",
                explanation: "Biotic factors: plants, animals, fungi, bacteria - all living organisms."
            },
            {
                type: "ecosystem_basics",
                question: "What are abiotic factors?",
                options: ["Non-living components of ecosystem", "Living organisms", "Only animals", "Only plants"],
                answer: "A",
                explanation: "Abiotic factors: sunlight, water, temperature, soil, air - non-living environmental components."
            },
            {
                type: "ecosystem_basics",
                question: "What is a population?",
                options: ["All members of one species in an area", "All living things in ecosystem", "Only plants in ecosystem", "Only animals in ecosystem"],
                answer: "A",
                explanation: "Population: group of same species living in same area at same time."
            },
            {
                type: "ecosystem_basics",
                question: "What is a community?",
                options: ["All populations living in an area", "One species in ecosystem", "Only abiotic factors", "The entire planet"],
                answer: "A",
                explanation: "Community: all different populations (species) interacting in an area."
            },
            {
                type: "ecosystem_basics",
                question: "What is a habitat?",
                options: ["Where an organism lives", "What an organism eats", "How an organism reproduces", "When an organism sleeps"],
                answer: "A",
                explanation: "Habitat: specific environment where an organism lives and gets what it needs."
            },
            {
                type: "ecosystem_basics",
                question: "What is a niche?",
                options: ["An organism's role in ecosystem", "Where it lives", "What color it is", "How big it grows"],
                answer: "A",
                explanation: "Niche: an organism's job or role - what it eats, where it lives, how it interacts."
            },
            {
                type: "ecosystem_basics",
                question: "What is biodiversity?",
                options: ["Variety of living things in ecosystem", "Number of one species", "Amount of sunlight", "Depth of soil"],
                answer: "A",
                explanation: "Biodiversity: the variety of different species living in an ecosystem."
            },
            {
                type: "ecosystem_basics",
                question: "Why is biodiversity important?",
                options: ["Makes ecosystem more stable", "Makes it less colorful", "Reduces number of plants", "Increases temperature"],
                answer: "A",
                explanation: "Higher biodiversity makes ecosystems more resilient to changes and disturbances."
            },
            {
                type: "ecosystem_basics",
                question: "What is interdependence?",
                options: ["Organisms depending on each other", "Organisms living alone", "Plants not needing animals", "Animals not needing plants"],
                answer: "A",
                explanation: "Interdependence: organisms relying on each other for food, shelter, pollination, etc."

            },
            // Habitat Types (76-100)
            {
                type: "habitat_types",
                question: "What is a forest habitat?",
                options: ["Area with many trees and diverse life", "Dry area with cacti", "Frozen area with ice", "Grassy area with few trees"],
                answer: "A",
                explanation: "Forests: dominated by trees, rich biodiversity, different layers (canopy, understory, floor)."
            },
            {
                type: "habitat_types",
                question: "What is a desert habitat?",
                options: ["Dry area with little rainfall", "Wet area with much rain", "Cold area with snow", "Area with many trees"],
                answer: "A",
                explanation: "Deserts: very little rainfall, extreme temperatures, specialized plants/animals."
            },
            {
                type: "habitat_types",
                question: "What is a grassland habitat?",
                options: ["Area dominated by grasses", "Area with many trees", "Frozen tundra", "Underwater area"],
                answer: "A",
                explanation: "Grasslands: dominated by grasses, few trees, good for grazing animals."
            },
            {
                type: "habitat_types",
                question: "What is an aquatic habitat?",
                options: ["Water-based environment", "Land-based environment", "Underground environment", "Tree-based environment"],
                answer: "A",
                explanation: "Aquatic habitats: freshwater (rivers, lakes) or saltwater (oceans, seas) environments."
            },
            {
                type: "habitat_types",
                question: "What is a tundra habitat?",
                options: ["Cold, treeless Arctic region", "Hot desert region", "Tropical rainforest", "Temperate grassland"],
                answer: "A",
                explanation: "Tundra: frozen soil (permafrost), very cold, low-growing plants, Arctic animals."
            },
            {
                type: "habitat_types",
                question: "What is a rainforest habitat?",
                options: ["Warm, wet forest with high biodiversity", "Cold, dry desert", "Grassy plain", "Frozen ice cap"],
                answer: "A",
                explanation: "Rainforests: high rainfall, warm temperatures, incredible biodiversity, dense vegetation."
            },
            {
                type: "habitat_types",
                question: "What adaptation helps desert plants?",
                options: ["Store water in stems", "Grow very tall", "Need lots of water", "Have large leaves"],
                answer: "A",
                explanation: "Desert plants like cacti have thick stems to store water and reduced leaves to minimize water loss."
            },
            {
                type: "habitat_types",
                question: "What adaptation helps Arctic animals?",
                options: ["Thick fur/blubber for insulation", "Thin skin to cool down", "No fur to stay cool", "Bright colors to attract mates"],
                answer: "A",
                explanation: "Arctic animals have insulation (fur, feathers, blubber) to conserve body heat."
            },
            {
                type: "habitat_types",
                question: "What is a wetland habitat?",
                options: ["Land saturated with water", "Completely dry land", "High mountain area", "Deep ocean area"],
                answer: "A",
                explanation: "Wetlands: marshes, swamps, bogs - land soaked with water, important for water filtration and wildlife."
            },
            {
                type: "habitat_types",
                question: "What is a coral reef habitat?",
                options: ["Underwater ecosystem made of corals", "Desert oasis", "Mountain peak", "Forest clearing"],
                answer: "A",
                explanation: "Coral reefs: underwater structures made by coral animals, incredibly biodiverse 'rainforests of the sea'."

            },
            // Energy Flow & Relationships (101-125)
            {
                type: "energy_relationships",
                question: "What is photosynthesis?",
                options: ["Plants making food from sunlight", "Animals eating plants", "Decomposers breaking waste", "Predators hunting prey"],
                answer: "A",
                explanation: "Photosynthesis: process where plants use sunlight, water, and CO‚ÇÇ to make food (glucose) and oxygen."
            },
            {
                type: "energy_relationships",
                question: "What is the source of energy for almost all ecosystems?",
                options: ["Sunlight", "Plants", "Animals", "Soil nutrients"],
                answer: "A",
                explanation: "Sunlight provides energy for photosynthesis, starting almost all food chains/webs."
            },
            {
                type: "energy_relationships",
                question: "What is a predator-prey relationship?",
                options: ["One hunts and eats the other", "Both help each other", "One benefits, other unaffected", "Both compete for same resource"],
                answer: "A",
                explanation: "Predator-prey: predator hunts and kills prey for food."
            },
            {
                type: "energy_relationships",
                question: "What is symbiosis?",
                options: ["Close long-term relationship between species", "Short hunting event", "Competition for food", "Random encounter"],
                answer: "A",
                explanation: "Symbiosis: long-term interaction between different species living together."
            },
            {
                type: "energy_relationships",
                question: "What is mutualism?",
                options: ["Both species benefit", "One benefits, other harmed", "One benefits, other unaffected", "Both compete"],
                answer: "A",
                explanation: "Mutualism: symbiotic relationship where both organisms benefit."
            },
            {
                type: "energy_relationships",
                question: "What is commensalism?",
                options: ["One benefits, other unaffected", "Both benefit", "One benefits, other harmed", "Both compete"],
                answer: "A",
                explanation: "Commensalism: one organism benefits, the other is neither helped nor harmed."
            },
            {
                type: "energy_relationships",
                question: "What is parasitism?",
                options: ["One benefits, other harmed", "Both benefit", "One benefits, other unaffected", "Neither benefits"],
                answer: "A",
                explanation: "Parasitism: parasite benefits by harming host (e.g., tapeworm in intestine)."
            },
            {
                type: "energy_relationships",
                question: "What is competition?",
                options: ["Organisms fighting for same resources", "One eating another", "Both helping each other", "Ignoring each other"],
                answer: "A",
                explanation: "Competition: organisms competing for limited resources (food, water, space, mates)."
            },
            {
                type: "energy_relationships",
                question: "What is a scavenger?",
                options: ["Animal that eats dead organisms", "Animal that hunts live prey", "Plant that makes food", "Fungus that decomposes"],
                answer: "A",
                explanation: "Scavengers: animals that consume dead organisms they didn't kill themselves."
            },
            {
                type: "energy_relationships",
                question: "What do decomposers do with nutrients?",
                options: ["Return them to soil for plants", "Store them in their bodies", "Release them into air", "Destroy them completely"],
                answer: "A",
                explanation: "Decomposers break down dead matter, releasing nutrients back into soil for plants to use."

            },
            // Human Impact & Conservation (126-150)
            {
                type: "human_impact",
                question: "What is pollution?",
                options: ["Harmful substances in environment", "Natural ecosystem balance", "Animal migration", "Plant growth"],
                answer: "A",
                explanation: "Pollution: introduction of harmful materials (chemicals, waste) into environment."
            },
            {
                type: "human_impact",
                question: "What is deforestation?",
                options: ["Clearing of forests by humans", "Natural forest growth", "Planting new trees", "Forest animals migrating"],
                answer: "A",
                explanation: "Deforestation: removal of forests for agriculture, logging, or development."
            },
            {
                type: "human_impact",
                question: "What is an endangered species?",
                options: ["At risk of extinction", "Very common species", "Newly discovered species", "Species that helps humans"],
                answer: "A",
                explanation: "Endangered species: at serious risk of disappearing completely (extinction)."
            },
            {
                type: "human_impact",
                question: "What is conservation?",
                options: ["Protecting and preserving nature", "Using all natural resources", "Changing ecosystems completely", "Removing all humans from nature"],
                answer: "A",
                explanation: "Conservation: protecting ecosystems, species, and natural resources for future generations."
            },
            {
                type: "human_impact",
                question: "What is habitat destruction?",
                options: ["Natural homes destroyed by humans", "Animals building new homes", "Natural seasonal changes", "Plants growing too much"],
                answer: "A",
                explanation: "Habitat destruction: natural environments damaged or destroyed, often for human development."
            },
            {
                type: "human_impact",
                question: "What does recycling help with?",
                options: ["Reducing waste and pollution", "Increasing deforestation", "Killing more animals", "Using more resources"],
                answer: "A",
                explanation: "Recycling reduces waste in landfills, conserves resources, and decreases pollution."
            },
            {
                type: "human_impact",
                question: "What is a protected area?",
                options: ["Land set aside to conserve nature", "Area for industrial development", "Place for unlimited hunting", "Location for waste dumping"],
                answer: "A",
                explanation: "Protected areas: national parks, wildlife reserves where ecosystems are conserved."
            },
            {
                type: "human_impact",
                question: "What is overfishing?",
                options: ["Catching fish faster than they reproduce", "Fishing with small nets", "Fishing only in oceans", "Catching too few fish"],
                answer: "A",
                explanation: "Overfishing: removing fish from oceans faster than populations can recover."
            },
            {
                type: "human_impact",
                question: "How can you help protect ecosystems?",
                options: ["Reduce, reuse, recycle", "Use more plastic", "Waste water", "Cut down trees"],
                answer: "A",
                explanation: "Reduce consumption, reuse items, recycle materials to minimize environmental impact."
            },
            {
                type: "human_impact",
                question: "Why are bees important for ecosystems?",
                options: ["Pollinate plants for reproduction", "Make honey for humans", "Sting predators", "Look colorful"],
                answer: "A",
                explanation: "Bees pollinate flowers, enabling plants to produce fruits and seeds - crucial for food chains."

            },
            // Advanced Concepts (151-155)
            {
                type: "advanced_concepts",
                question: "What is an ecological pyramid?",
                options: ["Shows energy/biomass/numbers at each trophic level", "Shape of some habitats", "Type of food web", "Ancient ecosystem"],
                answer: "A",
                explanation: "Ecological pyramids show decreasing energy/biomass/organism numbers at higher trophic levels."
            },
            {
                type: "advanced_concepts",
                question: "What is biomagnification?",
                options: ["Toxins concentrate up food chain", "Energy increases up food chain", "Animals get larger up food chain", "Biodiversity increases up food chain"],
                answer: "A",
                explanation: "Biomagnification: harmful chemicals become more concentrated in organisms higher up food chain."
            },
            {
                type: "advanced_concepts",
                question: "What is a keystone species?",
                options: ["Species crucial for ecosystem balance", "Most common species", "Largest species", "Newest species"],
                answer: "A",
                explanation: "Keystone species have disproportionate effect on ecosystem; their removal causes major changes."
            },
            {
                type: "advanced_concepts",
                question: "What is carrying capacity?",
                options: ["Maximum population environment can support", "Minimum population needed", "Speed of population growth", "Number of species in area"],
                answer: "A",
                explanation: "Carrying capacity: maximum number of individuals an environment can sustainably support."
            },
            {
                type: "advanced_concepts",
                question: "What are invasive species?",
                options: ["Non-native species harming ecosystem", "Native species helping ecosystem", "Endangered species", "Newly discovered species"],
                answer: "A",
                explanation: "Invasive species: organisms introduced to new area where they harm native species and ecosystems."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent ecosystem knowledge!",
            "Fantastic understanding of food webs!",
            "Great job! You're an ecology expert!",
            "Amazing! Your habitat knowledge is perfect!",
            "Well done! Perfect energy flow identification!",
            "You're an ecosystems champion!",
            "Perfect! You understand ecological relationships!",
            "Outstanding environmental science knowledge!",
            "Brilliant! You think like an ecologist!",
            "You're on fire! Great ecological insight!"
        ];

        // Sample food chains
        const foodChains = [
            {
                habitat: "Grassland",
                chain: ["Grass (Producer)", "Grasshopper (Herbivore)", "Frog (Carnivore)", "Snake (Carnivore)", "Hawk (Apex Predator)"],
                energyFlow: "Sun ‚Üí Grass ‚Üí Grasshopper ‚Üí Frog ‚Üí Snake ‚Üí Hawk"
            },
            {
                habitat: "Forest",
                chain: ["Tree (Producer)", "Caterpillar (Herbivore)", "Bird (Carnivore)", "Fox (Carnivore)"],
                energyFlow: "Sun ‚Üí Tree ‚Üí Caterpillar ‚Üí Bird ‚Üí Fox"
            },
            {
                habitat: "Aquatic",
                chain: ["Algae (Producer)", "Zooplankton (Herbivore)", "Small Fish (Carnivore)", "Large Fish (Carnivore)", "Shark (Apex Predator)"],
                energyFlow: "Sun ‚Üí Algae ‚Üí Zooplankton ‚Üí Small Fish ‚Üí Large Fish ‚Üí Shark"
            }
        ];

        // Food web relationships
        const foodWeb = {
            habitat: "Forest Ecosystem",
            producers: ["Oak Tree", "Grass", "Berry Bush", "Mushrooms"],
            primaryConsumers: ["Deer", "Rabbit", "Caterpillar", "Squirrel"],
            secondaryConsumers: ["Fox", "Owl", "Snake", "Hawk"],
            tertiaryConsumers: ["Mountain Lion", "Bear"],
            decomposers: ["Earthworms", "Fungi", "Bacteria"],
            connections: [
                "Deer eats Grass, Oak leaves",
                "Rabbit eats Grass, Berries",
                "Caterpillar eats Oak leaves",
                "Squirrel eats Acorns, Berries",
                "Fox eats Rabbit, Squirrel",
                "Owl eats Rabbit, Squirrel",
                "Snake eats Rabbit, Caterpillar",
                "Hawk eats Snake, Rabbit",
                "Mountain Lion eats Deer, Fox",
                "Bear eats Berries, Deer, Fish",
                "All dead matter decomposed by Fungi/Bacteria"
            ]
        };

        // Habitat information
        const habitats = [
            {
                name: "Rainforest",
                description: "Warm, wet, high biodiversity",
                characteristics: ["High rainfall", "Warm year-round", "Dense vegetation", "Many canopy layers"],
                animals: ["Monkeys", "Parrots", "Jaguars", "Frogs"],
                plants: ["Tall trees", "Vines", "Orchids", "Ferns"],
                adaptations: ["Buttress roots", "Drip-tip leaves", "Camouflage", "Bright colors"]
            },
            {
                name: "Desert",
                description: "Dry, extreme temperatures",
                characteristics: ["Little rainfall", "Hot days, cold nights", "Sandy or rocky soil", "Sparse vegetation"],
                animals: ["Camels", "Snakes", "Scorpions", "Lizards"],
                plants: ["Cacti", "Succulents", "Desert shrubs", "Creosote bush"],
                adaptations: ["Water storage", "Nocturnal activity", "Burrowing", "Reduced leaves"]
            },
            {
                name: "Grassland",
                description: "Open areas dominated by grasses",
                characteristics: ["Seasonal rainfall", "Few trees", "Fertile soil", "Frequent fires"],
                animals: ["Bison", "Zebras", "Lions", "Prairie dogs"],
                plants: ["Grasses", "Wildflowers", "Scattered trees", "Shrubs"],
                adaptations: ["Grazing teeth", "Burrowing", "Fast running", "Fire-resistant seeds"]
            },
            {
                name: "Ocean",
                description: "Saltwater marine environment",
                characteristics: ["Salty water", "Various depths", "Currents", "Tides"],
                animals: ["Fish", "Whales", "Sharks", "Coral"],
                plants: ["Seaweed", "Algae", "Kelp", "Phytoplankton"],
                adaptations: ["Gills for breathing", "Streamlined bodies", "Camouflage", "Bioluminescence"]
            }
        ];

        // Ecosystem relationships
        const relationships = [
            {
                type: "Predator-Prey",
                example: "Lion hunting Zebra",
                description: "One organism hunts and consumes another",
                effect: "Controls populations, maintains balance"
            },
            {
                type: "Mutualism",
                example: "Bees and Flowers",
                description: "Both species benefit from relationship",
                effect: "Pollination, food, protection"
            },
            {
                type: "Commensalism",
                example: "Barnacles on Whales",
                description: "One benefits, other unaffected",
                effect: "Transportation, housing"
            },
            {
                type: "Parasitism",
                example: "Ticks on Dogs",
                description: "One benefits, other harmed",
                effect: "Disease, weakness in host"
            },
            {
                type: "Competition",
                example: "Lions and Hyenas",
                description: "Competing for same resources",
                effect: "Limits population growth"
            }
        ];

        // Conservation tips
        const conservationTips = [
            "Reduce, reuse, recycle to minimize waste",
            "Conserve water - turn off taps, fix leaks",
            "Plant native trees and plants",
            "Use less plastic - bring reusable bags",
            "Support protected areas and wildlife reserves",
            "Learn about local ecosystems",
            "Participate in clean-up events",
            "Use energy-efficient appliances",
            "Walk, bike, or carpool when possible",
            "Educate others about conservation"
        ];

        // Interesting ecosystem facts
        const ecosystemFacts = [
            "A single teaspoon of soil contains more microorganisms than there are people on Earth!",
            "Rainforests produce about 20% of Earth's oxygen and are home to half of all plant and animal species!",
            "Coral reefs cover less than 1% of ocean floor but support 25% of all marine life!",
            "The largest food web on Earth is in the ocean, with the smallest plankton feeding the largest whales!",
            "One mature tree can absorb over 48 pounds of carbon dioxide per year!",
            "Ants move more soil than earthworms and are crucial for soil health!",
            "Bees pollinate about one-third of the food we eat!",
            "The Amazon rainforest is so large it creates its own rainfall through transpiration!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceFact = document.getElementById('scienceFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5Ecosystems');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5Ecosystems', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5Ecosystems_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5Ecosystems_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're an ecosystems expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent ecology knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning to become an ecology master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review ecosystems and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Ecological knowledge grows with observation!";
            }
        }

        // Create science fact display
        function createScienceFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'science-fact';
            
            factDiv.innerHTML = `<strong>Amazing Ecosystem Fact:</strong> ${ecosystemFacts[Math.floor(Math.random() * ecosystemFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "food_chain_basics": "üçÉ",
                "food_web_concepts": "üï∏Ô∏è",
                "ecosystem_basics": "üåç",
                "habitat_types": "üèûÔ∏è",
                "energy_relationships": "‚ö°",
                "human_impact": "üë§",
                "advanced_concepts": "üß†"
            };
            
            let conceptName = "Food Chains";
            let conceptIcon = "üçÉ";
            
            if (question.type.includes("food_chain_basics")) {
                conceptName = "Food Chains";
                conceptIcon = conceptIcons.food_chain_basics;
            } else if (question.type.includes("food_web_concepts")) {
                conceptName = "Food Webs";
                conceptIcon = conceptIcons.food_web_concepts;
            } else if (question.type.includes("ecosystem_basics")) {
                conceptName = "Ecosystems";
                conceptIcon = conceptIcons.ecosystem_basics;
            } else if (question.type.includes("habitat_types")) {
                conceptName = "Habitats";
                conceptIcon = conceptIcons.habitat_types;
            } else if (question.type.includes("energy_relationships")) {
                conceptName = "Energy Flow";
                conceptIcon = conceptIcons.energy_relationships;
            } else if (question.type.includes("human_impact")) {
                conceptName = "Human Impact";
                conceptIcon = conceptIcons.human_impact;
            } else if (question.type.includes("advanced_concepts")) {
                conceptName = "Advanced Concepts";
                conceptIcon = conceptIcons.advanced_concepts;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("food_chain_basics")) {
                label.textContent = "Linear feeding relationships in ecosystems";
            } else if (question.type.includes("food_web_concepts")) {
                label.textContent = "Complex interconnected feeding relationships";
            } else if (question.type.includes("ecosystem_basics")) {
                label.textContent = "Living organisms and their environment";
            } else if (question.type.includes("habitat_types")) {
                label.textContent = "Different environments where organisms live";
            } else if (question.type.includes("energy_relationships")) {
                label.textContent = "How energy moves through ecosystems";
            } else if (question.type.includes("human_impact")) {
                label.textContent = "How humans affect ecosystems";
            } else if (question.type.includes("advanced_concepts")) {
                label.textContent = "Deeper ecological concepts and relationships";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create ecosystem visualization
        function createEcosystemVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const foodChain = foodChains[Math.floor(Math.random() * foodChains.length)];
            const habitat = habitats[Math.floor(Math.random() * habitats.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-green);">Ecosystems: Food Chains, Food Webs & Habitats</h3>
                
                <div class="comparison-container">
                    <div class="ecosystem-column food-chain">
                        <div class="column-title">Food Chain Example</div>
                        <div class="ecosystem-display food-chain">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="font-size: 1.3rem; color: var(--accent-orange); font-weight: bold;">${foodChain.habitat} Ecosystem</div>
                                <div style="font-size: 0.9rem; color: var(--text-secondary);">Linear energy flow</div>
                            </div>
                            <div style="text-align: center; margin: 20px 0; font-size: 1.2rem; color: var(--text-primary);">
                                ${foodChain.chain.map(item => `
                                    <div style="margin: 10px 0; padding: 10px; background: rgba(255, 152, 0, 0.1); border-radius: 8px;">
                                        ${item}
                                    </div>
                                `).join('<div style="color: var(--accent-orange); font-size: 1.5rem;">‚Üì</div>')}
                            </div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary); text-align: center;">
                                <strong>Energy Flow:</strong> ${foodChain.energyFlow}
                            </div>
                        </div>
                    </div>
                    
                    <div class="ecosystem-column food-web">
                        <div class="column-title">Food Web Concept</div>
                        <div class="ecosystem-display food-web">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="font-size: 1.3rem; color: var(--accent-blue); font-weight: bold;">Complex Feeding Relationships</div>
                                <div style="font-size: 0.9rem; color: var(--text-secondary);">Multiple interconnected food chains</div>
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Why Food Webs are Important:</strong><br>
                                ‚Ä¢ Show real ecosystem complexity<br>
                                ‚Ä¢ Animals usually eat multiple foods<br>
                                ‚Ä¢ Changes affect many species<br>
                                ‚Ä¢ More stable than single chains
                            </div>
                            <div>
                                <strong>Energy Transfer:</strong><br>
                                ‚Ä¢ Only ~10% energy moves to next level<br>
                                ‚Ä¢ 90% lost as heat/metabolism<br>
                                ‚Ä¢ Explains why top predators are fewer
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="ecosystem-column habitat" style="margin-top: 20px;">
                    <div class="column-title" style="color: var(--accent-brown);">${habitat.name} Habitat</div>
                    <div class="ecosystem-display habitat">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>Characteristics:</strong><br>
                                ${habitat.characteristics.map(char => `‚Ä¢ ${char}`).join('<br>')}
                            </div>
                            <div>
                                <strong>Adaptations:</strong><br>
                                ${habitat.adaptations.map(adapt => `‚Ä¢ ${adapt}`).join('<br>')}
                            </div>
                        </div>
                        <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>Animals:</strong><br>
                                ${habitat.animals.map(animal => `‚Ä¢ ${animal}`).join('<br>')}
                            </div>
                            <div>
                                <strong>Plants:</strong><br>
                                ${habitat.plants.map(plant => `‚Ä¢ ${plant}`).join('<br>')}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="chain-display">
                    <div class="chain-item energy-flow" style="animation-delay: 0s">
                        <div class="chain-icon">üå±</div>
                        <div class="chain-name">Producers</div>
                        <div class="chain-role">Make food from sunlight</div>
                    </div>
                    <div class="chain-item energy-flow" style="animation-delay: 0.1s">
                        <div class="chain-icon">üêá</div>
                        <div class="chain-name">Herbivores</div>
                        <div class="chain-role">Eat plants (primary consumers)</div>
                    </div>
                    <div class="chain-item energy-flow" style="animation-delay: 0.2s">
                        <div class="chain-icon">ü¶ä</div>
                        <div class="chain-name">Carnivores</div>
                        <div class="chain-role">Eat other animals</div>
                    </div>
                    <div class="chain-item energy-flow" style="animation-delay: 0.3s">
                        <div class="chain-icon">üçÑ</div>
                        <div class="chain-name">Decomposers</div>
                        <div class="chain-role">Break down dead matter</div>
                    </div>
                </div>
                
                <div class="habitat-grid">
                    ${habitats.map((hab, index) => `
                        <div class="habitat-card habitat-cycle" style="animation-delay: ${index * 0.1}s">
                            <div class="habitat-icon">${getHabitatIcon(hab.name)}</div>
                            <div class="habitat-title">${hab.name}</div>
                            <div class="habitat-description">${hab.description}</div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="flow-display">
                    <h4 style="color: var(--accent-blue); margin-bottom: 15px; text-align: center;">Ecosystem Relationships</h4>
                    
                    ${relationships.map((rel, index) => `
                        <div class="flow-step energy-flow" style="animation-delay: ${index * 0.2}s">
                            <div class="step-number">${index + 1}</div>
                            <div class="step-content">
                                <div class="step-title">${rel.type}</div>
                                <div class="step-detail"><strong>Example:</strong> ${rel.example}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                                    ${rel.description} - ${rel.effect}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="conservation-tips ecosystem-pulse">
                    <div class="tips-title">Conservation Tips</div>
                    <div class="tips-list">
                        ${conservationTips.slice(0, 8).map((tip, index) => `
                            <div class="tip-item food-chain-anim" style="animation-delay: ${index * 0.1}s">
                                <div class="tip-icon">üíö</div>
                                <div class="tip-text">${tip}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="interactive-practice">
                    <div class="practice-title">Ecosystem Challenge</div>
                    <div class="practice-area">
                        <div class="ecosystem-box">
                            <strong>Create a forest food chain:</strong><br><br>
                            Organisms: Oak Tree, Deer, Wolf, Mushrooms<br><br>
                            Put them in correct order with arrows (‚Üí)
                        </div>
                        <div class="solution-box">
                            <strong>Correct Answer:</strong><br><br>
                            Sun ‚Üí Oak Tree ‚Üí Deer ‚Üí Wolf<br>
                            (All dead matter) ‚Üí Mushrooms<br><br>
                            <em>Energy flows from producer to consumers, decomposers break down all dead matter.</em>
                        </div>
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Review Questions:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. What always starts a food chain?<br>
                        2. How is a food web different from a food chain?<br>
                        3. What are biotic and abiotic factors?<br>
                        4. Name three different habitats and one adaptation for each.
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper function to get habitat icons
        function getHabitatIcon(habitatName) {
            const icons = {
                "Rainforest": "üå¥",
                "Desert": "üèúÔ∏è",
                "Grassland": "üåæ",
                "Ocean": "üåä",
                "Forest": "üå≤",
                "Tundra": "‚ùÑÔ∏è",
                "Wetland": "ü¶Ü"
            };
            return icons[habitatName] || "üåç";
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceFact.appendChild(createScienceFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createEcosystemVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
