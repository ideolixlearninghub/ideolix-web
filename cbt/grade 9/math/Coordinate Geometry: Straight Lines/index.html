<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 9 Math - Coordinate Geometry: Straight Lines | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Coordinate Geometry Theme */
        :root {
            --coordinate-blue: #2196F3;
            --gradient-green: #4CAF50;
            --intercept-purple: #9C27B0;
            --equation-red: #F44336;
            --graph-teal: #009688;
            --applications-orange: #FF9800;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --grid-color: rgba(255, 255, 255, 0.1);
            --axis-color: rgba(255, 255, 255, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(156, 39, 176, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--coordinate-blue), var(--gradient-green), var(--intercept-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--coordinate-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--coordinate-blue);
        }

        /* Math Symbols */
        .math-symbol {
            font-family: 'Cambria Math', 'Times New Roman', serif;
            font-weight: bold;
        }

        /* Concepts Grid */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin: 25px 0;
        }

        @media (max-width: 768px) {
            .concepts-grid {
                grid-template-columns: 1fr;
            }
        }

        .concept-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .concept-card.coordinates {
            border-color: var(--coordinate-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .concept-card.gradient {
            border-color: var(--gradient-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .concept-card.intercept {
            border-color: var(--intercept-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .concept-card.equation {
            border-color: var(--equation-red);
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.1), transparent);
        }

        .concept-card.graph {
            border-color: var(--graph-teal);
            background: linear-gradient(135deg, rgba(0, 150, 136, 0.1), transparent);
        }

        .concept-card.applications {
            border-color: var(--applications-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .concept-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .concept-card.coordinates .concept-title {
            color: var(--coordinate-blue);
        }

        .concept-card.gradient .concept-title {
            color: var(--gradient-green);
        }

        .concept-card.intercept .concept-title {
            color: var(--intercept-purple);
        }

        .concept-card.equation .concept-title {
            color: var(--equation-red);
        }

        .concept-card.graph .concept-title {
            color: var(--graph-teal);
        }

        .concept-card.applications .concept-title {
            color: var(--applications-orange);
        }

        .concept-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
            flex-grow: 1;
        }

        .concept-examples {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .concept-examples h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-list {
            list-style-type: none;
        }

        .example-list li {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
            font-family: 'Cambria Math', 'Times New Roman', serif;
        }

        .example-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--coordinate-blue);
            font-weight: bold;
        }

        /* Input Group */
        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--coordinate-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--coordinate-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-green {
            background: var(--gradient-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-green:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-purple {
            background: var(--intercept-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-purple:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--coordinate-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--coordinate-blue), var(--gradient-green), var(--intercept-purple));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-primary);
            font-family: 'Cambria Math', 'Times New Roman', serif;
        }

        .math-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--applications-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            font-family: 'Cambria Math', 'Times New Roman', serif;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--coordinate-blue);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--gradient-green);
            color: var(--gradient-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--equation-red);
            color: var(--equation-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--coordinate-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--gradient-green);
        }

        .option.incorrect .option-letter {
            background: var(--equation-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--gradient-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--equation-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--gradient-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--equation-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--gradient-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--equation-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Area */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 800px;
        }

        /* Graph Canvas */
        .graph-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--graph-teal);
        }

        .graph-title {
            color: var(--graph-teal);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .graph-canvas-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: var(--dark-bg);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            overflow: hidden;
        }

        .graph-canvas {
            width: 100%;
            height: 100%;
        }

        .graph-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
            justify-content: center;
        }

        /* Coordinate Practice */
        .coordinate-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--coordinate-blue);
        }

        .coordinate-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-size: 1rem;
            line-height: 1.6;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cambria Math', 'Times New Roman', serif;
        }

        /* Gradient Practice */
        .gradient-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--gradient-green);
        }

        .gradient-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .gradient-inputs {
                grid-template-columns: 1fr;
            }
        }

        .coordinate-input {
            padding: 10px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            text-align: center;
        }

        /* Intercept Practice */
        .intercept-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--intercept-purple);
        }

        .intercept-input {
            width: 100%;
            height: 80px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            padding: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            line-height: 1.5;
            resize: vertical;
            margin: 10px 0;
            font-family: 'Cambria Math', 'Times New Roman', serif;
        }

        .intercept-input:focus {
            outline: none;
            border-color: var(--intercept-purple);
        }

        /* Equation Practice */
        .equation-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--equation-red);
        }

        .equation-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .equation-controls {
                grid-template-columns: 1fr;
            }
        }

        .equation-button {
            padding: 10px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
        }

        .equation-button:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--equation-red);
            transform: scale(1.05);
        }

        /* Applications */
        .applications-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--applications-orange);
        }

        .application-problem {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Comparison */
        .comparison-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--equation-red);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-card);
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 2px solid var(--equation-red);
            color: var(--equation-red);
        }

        .comparison-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
            font-family: 'Cambria Math', 'Times New Roman', serif;
        }

        .comparison-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--coordinate-blue), var(--gradient-green), var(--intercept-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--coordinate-blue), var(--gradient-green), var(--intercept-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--coordinate-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Graph Badge */
        .graph-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 8px;
            text-transform: uppercase;
        }

        .coordinates-badge {
            background: rgba(33, 150, 243, 0.2);
            color: var(--coordinate-blue);
        }

        .gradient-badge {
            background: rgba(76, 175, 80, 0.2);
            color: var(--gradient-green);
        }

        .intercept-badge {
            background: rgba(156, 39, 176, 0.2);
            color: var(--intercept-purple);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: rgba(33, 150, 243, 0.2); }
            100% { background-color: transparent; }
        }

        .highlight {
            animation: highlight 1s ease;
        }

        @keyframes pointGlow {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .point-glow {
            animation: pointGlow 1s ease;
        }

        /* Graph Grid */
        .grid-line {
            stroke: var(--grid-color);
            stroke-width: 1;
        }

        .axis-line {
            stroke: var(--axis-color);
            stroke-width: 2;
        }

        .point {
            fill: var(--coordinate-blue);
            stroke: white;
            stroke-width: 2;
        }

        .line {
            stroke: var(--gradient-green);
            stroke-width: 3;
            stroke-linecap: round;
        }

        .intercept-point {
            fill: var(--intercept-purple);
            stroke: white;
            stroke-width: 2;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .gradient-inputs,
            .equation-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 9 Mathematics: Coordinate Geometry</h1>
            <p class="welcome-subtitle">Master the art of plotting points, drawing lines, and understanding slopes! Learn how to work with Cartesian coordinates, calculate gradients, find intercepts, and create equations of straight lines.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìà (x,y) y=mx+c</span>
                <span class="topic-name">Coordinates, Gradient, Intercept, Straight Lines</span>
            </div>
            
            <div class="concepts-grid">
                <div class="concept-card coordinates" onclick="showConceptDetail('coordinates')">
                    <div class="concept-icon">(x,y)</div>
                    <h3 class="concept-title">Cartesian Coordinates</h3>
                    <p class="concept-description">The system for plotting points on a plane using (x, y) coordinates.</p>
                    <div class="concept-examples">
                        <h4>Examples:</h4>
                        <ul class="example-list">
                            <li>(2, 3) - 2 right, 3 up</li>
                            <li>(-1, 4) - 1 left, 4 up</li>
                            <li>(0, -2) - on y-axis at -2</li>
                        </ul>
                    </div>
                </div>
                
                <div class="concept-card gradient" onclick="showConceptDetail('gradient')">
                    <div class="concept-icon">m</div>
                    <h3 class="concept-title">Gradient (Slope)</h3>
                    <p class="concept-description">The steepness of a line, calculated as rise over run.</p>
                    <div class="concept-examples">
                        <h4>Examples:</h4>
                        <ul class="example-list">
                            <li>m = 2 (steep upward)</li>
                            <li>m = -¬Ω (gentle downward)</li>
                            <li>m = 0 (horizontal line)</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card intercept" onclick="showConceptDetail('intercept')">
                    <div class="concept-icon">c</div>
                    <h3 class="concept-title">Intercept</h3>
                    <p class="concept-description">Where a line crosses the y-axis (y-intercept) or x-axis (x-intercept).</p>
                    <div class="concept-examples">
                        <h4>Examples:</h4>
                        <ul class="example-list">
                            <li>y = 2x + 3 ‚Üí y-intercept = 3</li>
                            <li>y = -x + 5 ‚Üí y-intercept = 5</li>
                            <li>y = 4 ‚Üí y-intercept = 4</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card equation" onclick="showConceptDetail('equation')">
                    <div class="concept-icon">y=mx+c</div>
                    <h3 class="concept-title">Line Equation</h3>
                    <p class="concept-description">The formula y = mx + c, where m is gradient and c is y-intercept.</p>
                    <div class="concept-examples">
                        <h4>Examples:</h4>
                        <ul class="example-list">
                            <li>y = 2x + 1</li>
                            <li>y = -3x + 4</li>
                            <li>y = ¬Ωx - 2</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card graph" onclick="showConceptDetail('graph')">
                    <div class="concept-icon">üìà</div>
                    <h3 class="concept-title">Graph Plotting</h3>
                    <p class="concept-description">Drawing straight lines on coordinate planes using points and equations.</p>
                    <div class="concept-examples">
                        <h4>Examples:</h4>
                        <ul class="example-list">
                            <li>Plot (0,3) and (1,5)</li>
                            <li>Draw y = 2x + 1</li>
                            <li>Find where line crosses axes</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card applications" onclick="showConceptDetail('applications')">
                    <div class="concept-icon">‚ñ≥</div>
                    <h3 class="concept-title">Real Applications</h3>
                    <p class="concept-description">Using coordinate geometry in distance, speed, cost, and other real problems.</p>
                    <div class="concept-examples">
                        <h4>Examples:</h4>
                        <ul class="example-list">
                            <li>Speed-time graphs</li>
                            <li>Cost-quantity relationships</li>
                            <li>Distance between points</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üìà Begin Coordinate Geometry Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="mathTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Interactive Graph -->
                    <div class="graph-container">
                        <div class="graph-title">Interactive Graph Plotter</div>
                        <div class="graph-canvas-container">
                            <canvas id="graphCanvas" class="graph-canvas"></canvas>
                        </div>
                        
                        <div class="graph-controls">
                            <input type="text" id="equationInput" placeholder="Enter equation: y=2x+1" style="flex-grow: 1; padding: 10px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                            <button class="btn btn-small btn-primary" onclick="plotEquation()">Plot</button>
                            <button class="btn btn-small btn-outline" onclick="clearGraph()">Clear</button>
                        </div>
                        
                        <div id="graphInfo" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Enter equation in form y=mx+c
                        </div>
                    </div>
                    
                    <!-- Coordinate Practice -->
                    <div class="coordinate-section">
                        <div class="graph-title">Plot Coordinates</div>
                        <div class="coordinate-display" id="coordinateDisplay">
                            Plot point: (2, 3)
                        </div>
                        
                        <div class="graph-controls">
                            <button class="btn btn-small btn-primary" onclick="plotPoint()">Plot Point</button>
                            <button class="btn btn-small btn-outline" onclick="newCoordinate()">New Point</button>
                            <button class="btn btn-small btn-outline" onclick="findQuadrant()">Find Quadrant</button>
                        </div>
                        
                        <div id="coordinateFeedback" style="margin: 10px 0; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Click Plot Point to see it on the graph
                        </div>
                    </div>
                    
                    <!-- Gradient Practice -->
                    <div class="gradient-section">
                        <div class="graph-title">Calculate Gradient</div>
                        <div class="coordinate-display" id="gradientDisplay">
                            Points: (1, 2) and (3, 6)
                        </div>
                        
                        <div class="gradient-inputs">
                            <input type="text" id="point1x" placeholder="x1" class="coordinate-input" value="1">
                            <input type="text" id="point1y" placeholder="y1" class="coordinate-input" value="2">
                            <input type="text" id="point2x" placeholder="x2" class="coordinate-input" value="3">
                            <input type="text" id="point2y" placeholder="y2" class="coordinate-input" value="6">
                        </div>
                        
                        <div class="graph-controls">
                            <button class="btn btn-small btn-green" onclick="calculateGradient()">Calculate</button>
                            <button class="btn btn-small btn-outline" onclick="plotPointsForGradient()">Plot Points</button>
                            <button class="btn btn-small btn-outline" onclick="explainGradient()">Explain</button>
                        </div>
                        
                        <div id="gradientResult" style="margin: 10px 0; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Gradient = (y‚ÇÇ - y‚ÇÅ) √∑ (x‚ÇÇ - x‚ÇÅ)
                        </div>
                    </div>
                    
                    <!-- Intercept Practice -->
                    <div class="intercept-section">
                        <div class="graph-title">Find Intercepts</div>
                        <div style="margin-bottom: 10px; color: var(--text-secondary); text-align: center;">
                            Equation: <span id="interceptEquation" style="color: var(--intercept-purple); font-weight: bold; font-family: 'Cambria Math';">y = 2x + 4</span>
                        </div>
                        
                        <div class="graph-controls">
                            <button class="btn btn-small btn-purple" onclick="findYIntercept()">Find y-intercept</button>
                            <button class="btn btn-small btn-outline" onclick="findXIntercept()">Find x-intercept</button>
                            <button class="btn btn-small btn-outline" onclick="newInterceptEquation()">New Equation</button>
                        </div>
                        
                        <div id="interceptResult" style="margin: 10px 0; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            y-intercept: when x=0, x-intercept: when y=0
                        </div>
                    </div>
                    
                    <!-- Equation Practice -->
                    <div class="equation-section">
                        <div class="graph-title">Equation Forms</div>
                        
                        <div class="equation-controls">
                            <div class="equation-button" onclick="showEquationForm('slopeIntercept')">
                                <div style="font-size: 1.2rem; margin-bottom: 5px;">y=mx+c</div>
                                Slope-Intercept
                            </div>
                            <div class="equation-button" onclick="showEquationForm('pointSlope')">
                                <div style="font-size: 1.2rem; margin-bottom: 5px;">y-y‚ÇÅ=m(x-x‚ÇÅ)</div>
                                Point-Slope
                            </div>
                            <div class="equation-button" onclick="showEquationForm('twoPoint')">
                                <div style="font-size: 1.2rem; margin-bottom: 5px;">(y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)</div>
                                Two-Point Form
                            </div>
                            <div class="equation-button" onclick="showEquationForm('standard')">
                                <div style="font-size: 1.2rem; margin-bottom: 5px;">ax+by=c</div>
                                Standard Form
                            </div>
                        </div>
                        
                        <div id="equationExample" style="margin: 15px 0; padding: 10px; background: var(--dark-card); border-radius: 6px; text-align: center; font-size: 0.9rem; font-family: 'Cambria Math';">
                            Click an equation form to see examples
                        </div>
                        
                        <div class="graph-controls">
                            <button class="btn btn-small btn-outline" onclick="practiceEquation()">Practice</button>
                            <button class="btn btn-small btn-outline" onclick="explainAllForms()">All Forms</button>
                        </div>
                    </div>
                    
                    <!-- Applications -->
                    <div class="applications-section">
                        <div class="graph-title">Real-World Applications</div>
                        
                        <div class="application-problem" id="applicationProblem">
                            A taxi charges $3 base fare plus $2 per km. Write equation for total cost (y) vs distance (x).
                        </div>
                        
                        <div class="graph-controls">
                            <button class="btn btn-small btn-green" onclick="checkApplication('y=2x+3')">y=2x+3</button>
                            <button class="btn btn-small btn-outline" onclick="checkApplication('y=3x+2')">y=3x+2</button>
                            <button class="btn btn-small btn-outline" onclick="checkApplication('y=2x')">y=2x</button>
                            <button class="btn btn-small btn-outline" onclick="checkApplication('y=x+5')">y=x+5</button>
                        </div>
                        
                        <div id="applicationFeedback" style="margin: 10px 0; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Base fare = y-intercept, per km = gradient
                        </div>
                        
                        <div class="graph-controls">
                            <button class="btn btn-small btn-outline" onclick="newApplication()">New Problem</button>
                            <button class="btn btn-small btn-outline" onclick="showApplicationSolution()">Show Solution</button>
                        </div>
                    </div>
                    
                    <!-- Comparison Table -->
                    <div class="comparison-section">
                        <div class="graph-title">Comparing Line Types</div>
                        
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Line Type</th>
                                    <th>Gradient</th>
                                    <th>Equation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr onclick="explainLineType('positive')">
                                    <td>Positive Slope</td>
                                    <td>m > 0</td>
                                    <td>y = 2x + 1</td>
                                </tr>
                                <tr onclick="explainLineType('negative')">
                                    <td>Negative Slope</td>
                                    <td>m < 0</td>
                                    <td>y = -x + 3</td>
                                </tr>
                                <tr onclick="explainLineType('horizontal')">
                                    <td>Horizontal</td>
                                    <td>m = 0</td>
                                    <td>y = 4</td>
                                </tr>
                                <tr onclick="explainLineType('vertical')">
                                    <td>Vertical</td>
                                    <td>undefined</td>
                                    <td>x = 3</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div id="lineDetail" style="margin-top: 15px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.85rem; display: none;">
                            Click a line type for detailed explanation
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Coordinate Geometry Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="coordinatesScore">0</div>
                        <div class="stat-label">Coordinates</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="gradientScore">0</div>
                        <div class="stat-label">Gradient</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="interceptScore">0</div>
                        <div class="stat-label">Intercepts</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-green" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive questions array - 80+ questions on Coordinate Geometry
        const questions = [
            // Basic Coordinates (1-15)
            {
                question: "What are the coordinates of the origin?",
                options: ["(0, 0)", "(1, 1)", "(0, 1)", "(1, 0)"],
                answer: "A",
                explanation: "The origin is where x-axis and y-axis intersect, at point (0, 0).",
                type: "coordinates"
            },
            {
                question: "In point (3, 4), what does 3 represent?",
                options: ["x-coordinate (horizontal position)", "y-coordinate (vertical position)", "Distance from origin", "Gradient"],
                answer: "A",
                explanation: "In (x, y), x is the horizontal coordinate (distance from y-axis).",
                type: "coordinates"
            },
            {
                question: "In point (3, 4), what does 4 represent?",
                options: ["y-coordinate (vertical position)", "x-coordinate (horizontal position)", "Distance from origin", "Intercept"],
                answer: "A",
                explanation: "In (x, y), y is the vertical coordinate (distance from x-axis).",
                type: "coordinates"
            },
            {
                question: "Which quadrant is point (2, 3) in?",
                options: ["Quadrant I", "Quadrant II", "Quadrant III", "Quadrant IV"],
                answer: "A",
                explanation: "Quadrant I: x positive, y positive. (2, 3) has x>0 and y>0.",
                type: "coordinates"
            },
            {
                question: "Which quadrant is point (-2, 3) in?",
                options: ["Quadrant II", "Quadrant I", "Quadrant III", "Quadrant IV"],
                answer: "A",
                explanation: "Quadrant II: x negative, y positive. (-2, 3) has x<0 and y>0.",
                type: "coordinates"
            },
            {
                question: "Which quadrant is point (-3, -2) in?",
                options: ["Quadrant III", "Quadrant I", "Quadrant II", "Quadrant IV"],
                answer: "A",
                explanation: "Quadrant III: x negative, y negative. (-3, -2) has x<0 and y<0.",
                type: "coordinates"
            },
            {
                question: "Which quadrant is point (4, -1) in?",
                options: ["Quadrant IV", "Quadrant I", "Quadrant II", "Quadrant III"],
                answer: "A",
                explanation: "Quadrant IV: x positive, y negative. (4, -1) has x>0 and y<0.",
                type: "coordinates"
            },
            {
                question: "Where is point (0, 5) located?",
                options: ["On y-axis", "On x-axis", "In Quadrant I", "In Quadrant II"],
                answer: "A",
                explanation: "When x=0, point lies on y-axis. (0, 5) is on y-axis, 5 units up from origin.",
                type: "coordinates"
            },
            {
                question: "Where is point (3, 0) located?",
                options: ["On x-axis", "On y-axis", "In Quadrant I", "At origin"],
                answer: "A",
                explanation: "When y=0, point lies on x-axis. (3, 0) is on x-axis, 3 units right from origin.",
                type: "coordinates"
            },
            {
                question: "What is the distance from (0,0) to (3,4)?",
                options: ["5 units", "7 units", "1 unit", "25 units"],
                answer: "A",
                explanation: "Using distance formula: ‚àö(3¬≤ + 4¬≤) = ‚àö(9+16) = ‚àö25 = 5",
                type: "coordinates"
            },
            {
                question: "Plotting (2, -3): how do you move?",
                options: ["2 right, 3 down", "2 left, 3 down", "2 right, 3 up", "2 left, 3 up"],
                answer: "A",
                explanation: "Positive x: move right, Negative y: move down. So 2 right, 3 down.",
                type: "coordinates"
            },
            {
                question: "Plotting (-1, 4): how do you move?",
                options: ["1 left, 4 up", "1 right, 4 up", "1 left, 4 down", "1 right, 4 down"],
                answer: "A",
                explanation: "Negative x: move left, Positive y: move up. So 1 left, 4 up.",
                type: "coordinates"
            },
            {
                question: "What are coordinates of point 3 units right, 2 units up from origin?",
                options: ["(3, 2)", "(2, 3)", "(-3, 2)", "(3, -2)"],
                answer: "A",
                explanation: "Right = positive x, Up = positive y. So (3, 2).",
                type: "coordinates"
            },
            {
                question: "What are coordinates of point 4 units left, 1 unit down from origin?",
                options: ["(-4, -1)", "(4, -1)", "(-4, 1)", "(4, 1)"],
                answer: "A",
                explanation: "Left = negative x, Down = negative y. So (-4, -1).",
                type: "coordinates"
            },
            {
                question: "Which point is in Quadrant II?",
                options: ["(-2, 5)", "(2, 5)", "(-2, -5)", "(2, -5)"],
                answer: "A",
                explanation: "Quadrant II: x negative, y positive. (-2, 5) fits.",
                type: "coordinates"
            },

            // Gradient Questions (16-30)
            {
                question: "What is gradient?",
                options: ["Slope or steepness of a line", "Where line crosses y-axis", "Distance between points", "Midpoint of line"],
                answer: "A",
                explanation: "Gradient (slope) measures how steep a line is, calculated as rise/run.",
                type: "gradient"
            },
            {
                question: "Formula for gradient between (x‚ÇÅ,y‚ÇÅ) and (x‚ÇÇ,y‚ÇÇ)?",
                options: ["(y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)", "(x‚ÇÇ-x‚ÇÅ)/(y‚ÇÇ-y‚ÇÅ)", "y‚ÇÇ-y‚ÇÅ √ó x‚ÇÇ-x‚ÇÅ", "(y‚ÇÇ+y‚ÇÅ)/(x‚ÇÇ+x‚ÇÅ)"],
                answer: "A",
                explanation: "Gradient = change in y √∑ change in x = (y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)",
                type: "gradient"
            },
            {
                question: "Find gradient between (1,2) and (3,6)",
                options: ["2", "4", "¬Ω", "-2"],
                answer: "A",
                explanation: "m = (6-2)/(3-1) = 4/2 = 2",
                type: "gradient"
            },
            {
                question: "Find gradient between (2,5) and (4,9)",
                options: ["2", "4", "1", "-2"],
                answer: "A",
                explanation: "m = (9-5)/(4-2) = 4/2 = 2",
                type: "gradient"
            },
            {
                question: "Find gradient between (0,3) and (2,7)",
                options: ["2", "4", "¬Ω", "-2"],
                answer: "A",
                explanation: "m = (7-3)/(2-0) = 4/2 = 2",
                type: "gradient"
            },
            {
                question: "Find gradient between (-1,4) and (3,8)",
                options: ["1", "2", "4", "-1"],
                answer: "A",
                explanation: "m = (8-4)/(3-(-1)) = 4/4 = 1",
                type: "gradient"
            },
            {
                question: "What does positive gradient indicate?",
                options: ["Line slopes upward left to right", "Line slopes downward left to right", "Horizontal line", "Vertical line"],
                answer: "A",
                explanation: "Positive gradient means line rises as we move right.",
                type: "gradient"
            },
            {
                question: "What does negative gradient indicate?",
                options: ["Line slopes downward left to right", "Line slopes upward left to right", "Horizontal line", "Vertical line"],
                answer: "A",
                explanation: "Negative gradient means line falls as we move right.",
                type: "gradient"
            },
            {
                question: "Gradient of horizontal line?",
                options: ["0", "Undefined", "1", "-1"],
                answer: "A",
                explanation: "Horizontal line: no rise (y constant), so gradient = 0.",
                type: "gradient"
            },
            {
                question: "Gradient of vertical line?",
                options: ["Undefined", "0", "1", "-1"],
                answer: "A",
                explanation: "Vertical line: no run (x constant), division by zero ‚Üí undefined.",
                type: "gradient"
            },
            {
                question: "Find gradient of line through (2,3) and (2,7)",
                options: ["Undefined", "0", "2", "4"],
                answer: "A",
                explanation: "Same x-coordinates ‚Üí vertical line ‚Üí undefined gradient.",
                type: "gradient"
            },
            {
                question: "Find gradient of line through (3,4) and (5,4)",
                options: ["0", "Undefined", "2", "4"],
                answer: "A",
                explanation: "Same y-coordinates ‚Üí horizontal line ‚Üí gradient = 0.",
                type: "gradient"
            },
            {
                question: "If gradient = 2, what does it mean?",
                options: ["Rise 2 units for every 1 unit run", "Rise 1 unit for every 2 units run", "Fall 2 units for every 1 unit run", "Line is vertical"],
                answer: "A",
                explanation: "Gradient 2 means for every 1 unit right, go up 2 units.",
                type: "gradient"
            },
            {
                question: "If gradient = -¬Ω, what does it mean?",
                options: ["Fall ¬Ω unit for every 1 unit run", "Rise ¬Ω unit for every 1 unit run", "Fall 1 unit for every ¬Ω unit run", "Line is horizontal"],
                answer: "A",
                explanation: "Gradient -¬Ω means for every 1 unit right, go down ¬Ω unit.",
                type: "gradient"
            },
            {
                question: "Parallel lines have ___ gradients.",
                options: ["Equal", "Negative reciprocals", "Opposite signs", "No relation"],
                answer: "A",
                explanation: "Parallel lines have the same gradient (equal slopes).",
                type: "gradient"
            },

            // Intercept Questions (31-45)
            {
                question: "In y = mx + c, what is c?",
                options: ["y-intercept", "x-intercept", "Gradient", "Slope"],
                answer: "A",
                explanation: "In y = mx + c, c is the y-intercept (where line crosses y-axis).",
                type: "intercept"
            },
            {
                question: "What is y-intercept of y = 2x + 3?",
                options: ["3", "2", "2/3", "-3"],
                answer: "A",
                explanation: "In y = mx + c, c=3 is y-intercept (point (0,3)).",
                type: "intercept"
            },
            {
                question: "What is y-intercept of y = -x + 5?",
                options: ["5", "-1", "-5", "1"],
                answer: "A",
                explanation: "In y = -x + 5, c=5 is y-intercept (point (0,5)).",
                type: "intercept"
            },
            {
                question: "What is y-intercept of y = ¬Ωx - 2?",
                options: ["-2", "¬Ω", "2", "-¬Ω"],
                answer: "A",
                explanation: "In y = ¬Ωx - 2, c=-2 is y-intercept (point (0,-2)).",
                type: "intercept"
            },
            {
                question: "What is y-intercept of y = 4?",
                options: ["4", "0", "Undefined", "1"],
                answer: "A",
                explanation: "y = 4 is horizontal line crossing y-axis at 4. y-intercept = 4.",
                type: "intercept"
            },
            {
                question: "How to find y-intercept from equation?",
                options: ["Set x=0 and solve for y", "Set y=0 and solve for x", "Find gradient", "Use two points"],
                answer: "A",
                explanation: "y-intercept occurs where x=0. Substitute x=0 to find y.",
                type: "intercept"
            },
            {
                question: "How to find x-intercept from equation?",
                options: ["Set y=0 and solve for x", "Set x=0 and solve for y", "Find gradient", "Use y-intercept"],
                answer: "A",
                explanation: "x-intercept occurs where y=0. Substitute y=0 to find x.",
                type: "intercept"
            },
            {
                question: "Find x-intercept of y = 2x + 6",
                options: ["(-3, 0)", "(0, 6)", "(3, 0)", "(0, -3)"],
                answer: "A",
                explanation: "Set y=0: 0=2x+6 ‚Üí 2x=-6 ‚Üí x=-3. So (-3,0).",
                type: "intercept"
            },
            {
                question: "Find x-intercept of y = -3x + 9",
                options: ["(3, 0)", "(0, 9)", "(-3, 0)", "(0, -3)"],
                answer: "A",
                explanation: "Set y=0: 0=-3x+9 ‚Üí 3x=9 ‚Üí x=3. So (3,0).",
                type: "intercept"
            },
            {
                question: "Find y-intercept of y = 4x - 8",
                options: ["(0, -8)", "(2, 0)", "(0, 8)", "(-2, 0)"],
                answer: "A",
                explanation: "Set x=0: y=4(0)-8=-8. So (0,-8).",
                type: "intercept"
            },
            {
                question: "Line has y-intercept 2 and gradient 3. What is equation?",
                options: ["y = 3x + 2", "y = 2x + 3", "y = 3x - 2", "y = 2x - 3"],
                answer: "A",
                explanation: "y = mx + c, m=3 (gradient), c=2 (y-intercept). So y=3x+2.",
                type: "intercept"
            },
            {
                question: "Line has y-intercept -1 and gradient ¬Ω. What is equation?",
                options: ["y = ¬Ωx - 1", "y = -¬Ωx + 1", "y = ¬Ωx + 1", "y = -¬Ωx - 1"],
                answer: "A",
                explanation: "y = mx + c, m=¬Ω, c=-1. So y=¬Ωx-1.",
                type: "intercept"
            },
            {
                question: "What does y-intercept represent in real life?",
                options: ["Fixed cost/base value when x=0", "Rate of change", "Maximum value", "Minimum value"],
                answer: "A",
                explanation: "y-intercept is starting value when independent variable (x) is zero.",
                type: "intercept"
            },
            {
                question: "Line passes through (0,4). What is y-intercept?",
                options: ["4", "0", "Undefined", "Cannot determine"],
                answer: "A",
                explanation: "Point with x=0 lies on y-axis. y-coordinate is y-intercept = 4.",
                type: "intercept"
            },
            {
                question: "What is x-intercept of horizontal line y = 3?",
                options: ["No x-intercept", "(3,0)", "(0,0)", "(0,3)"],
                answer: "A",
                explanation: "Horizontal line y=3 never crosses x-axis (parallel to it). No x-intercept.",
                type: "intercept"
            },

            // Equation Questions (46-60)
            {
                question: "What is slope-intercept form?",
                options: ["y = mx + c", "ax + by = c", "y - y‚ÇÅ = m(x - x‚ÇÅ)", "y = c"],
                answer: "A",
                explanation: "y = mx + c is slope-intercept form, where m=gradient, c=y-intercept.",
                type: "equation"
            },
            {
                question: "Write equation for line with gradient 2, y-intercept 3",
                options: ["y = 2x + 3", "y = 3x + 2", "y = 2x - 3", "y = 3x - 2"],
                answer: "A",
                explanation: "y = mx + c, m=2, c=3 ‚Üí y = 2x + 3",
                type: "equation"
            },
            {
                question: "Write equation for line with gradient -1, y-intercept 4",
                options: ["y = -x + 4", "y = x + 4", "y = -x - 4", "y = x - 4"],
                answer: "A",
                explanation: "y = mx + c, m=-1, c=4 ‚Üí y = -x + 4",
                type: "equation"
            },
            {
                question: "What is gradient of y = 3x + 5?",
                options: ["3", "5", "3/5", "-3"],
                answer: "A",
                explanation: "In y = mx + c, coefficient of x is gradient. Here m=3.",
                type: "equation"
            },
            {
                question: "What is gradient of y = -2x + 7?",
                options: ["-2", "7", "2", "-7"],
                answer: "A",
                explanation: "In y = mx + c, m=-2 is gradient.",
                type: "equation"
            },
            {
                question: "What is gradient of y = 4?",
                options: ["0", "4", "Undefined", "1"],
                answer: "A",
                explanation: "y = 4 is y = 0x + 4, so gradient = 0 (horizontal line).",
                type: "equation"
            },
            {
                question: "What is equation of x-axis?",
                options: ["y = 0", "x = 0", "y = x", "y = 1"],
                answer: "A",
                explanation: "x-axis has all points with y=0, so equation is y=0.",
                type: "equation"
            },
            {
                question: "What is equation of y-axis?",
                options: ["x = 0", "y = 0", "y = x", "x = 1"],
                answer: "A",
                explanation: "y-axis has all points with x=0, so equation is x=0.",
                type: "equation"
            },
            {
                question: "Find equation of line through (0,3) with gradient 2",
                options: ["y = 2x + 3", "y = 3x + 2", "y = 2x", "y = 3x"],
                answer: "A",
                explanation: "y-intercept is 3 (since x=0), gradient=2 ‚Üí y=2x+3",
                type: "equation"
            },
            {
                question: "Find equation of line through (0,-2) with gradient ¬Ω",
                options: ["y = ¬Ωx - 2", "y = -¬Ωx + 2", "y = ¬Ωx + 2", "y = -¬Ωx - 2"],
                answer: "A",
                explanation: "y-intercept is -2, gradient=¬Ω ‚Üí y=¬Ωx-2",
                type: "equation"
            },
            {
                question: "Which line is steeper: y=3x+1 or y=2x+5?",
                options: ["y=3x+1", "y=2x+5", "Both equal", "Cannot compare"],
                answer: "A",
                explanation: "Higher gradient means steeper. 3 > 2, so y=3x+1 is steeper.",
                type: "equation"
            },
            {
                question: "Which line slopes downward: y=2x+3 or y=-x+4?",
                options: ["y=-x+4", "y=2x+3", "Both", "Neither"],
                answer: "A",
                explanation: "Negative gradient slopes downward. y=-x+4 has gradient -1.",
                type: "equation"
            },
            {
                question: "What is point-slope form?",
                options: ["y - y‚ÇÅ = m(x - x‚ÇÅ)", "y = mx + c", "ax + by = c", "y = c"],
                answer: "A",
                explanation: "y - y‚ÇÅ = m(x - x‚ÇÅ) is point-slope form, using point (x‚ÇÅ,y‚ÇÅ) and gradient m.",
                type: "equation"
            },
            {
                question: "Find equation through (2,3) with gradient 4",
                options: ["y-3=4(x-2)", "y-2=4(x-3)", "y=4x+3", "y=4x-2"],
                answer: "A",
                explanation: "Point-slope: y-3=4(x-2) using point (2,3) and m=4.",
                type: "equation"
            },
            {
                question: "Convert y-2=3(x-1) to slope-intercept form",
                options: ["y=3x-1", "y=3x+1", "y=2x+3", "y=x+5"],
                answer: "A",
                explanation: "y-2=3(x-1) ‚Üí y-2=3x-3 ‚Üí y=3x-1",
                type: "equation"
            },

            // Graph Plotting (61-75)
            {
                question: "To draw line y=2x+1, which two points are easiest?",
                options: ["(0,1) and (1,3)", "(0,0) and (1,1)", "(1,2) and (2,4)", "(0,2) and (1,2)"],
                answer: "A",
                explanation: "Use y-intercept (0,1) and another point like x=1: y=2(1)+1=3 ‚Üí (1,3).",
                type: "graph"
            },
            {
                question: "Line passes through (0,2) and (1,5). What is equation?",
                options: ["y=3x+2", "y=2x+5", "y=5x+2", "y=2x+3"],
                answer: "A",
                explanation: "Gradient=(5-2)/(1-0)=3, y-intercept=2 ‚Üí y=3x+2",
                type: "graph"
            },
            {
                question: "Line passes through (0,-3) and (2,1). What is equation?",
                options: ["y=2x-3", "y=2x+3", "y=-2x-3", "y=¬Ωx-3"],
                answer: "A",
                explanation: "Gradient=(1-(-3))/(2-0)=4/2=2, y-intercept=-3 ‚Üí y=2x-3",
                type: "graph"
            },
            {
                question: "Where does y=2x-4 cross x-axis?",
                options: ["(2,0)", "(0,-4)", "(4,0)", "(0,2)"],
                answer: "A",
                explanation: "Set y=0: 0=2x-4 ‚Üí 2x=4 ‚Üí x=2. So (2,0).",
                type: "graph"
            },
            {
                question: "Where does y=-x+3 cross y-axis?",
                options: ["(0,3)", "(3,0)", "(0,-3)", "(-3,0)"],
                answer: "A",
                explanation: "y-intercept: when x=0, y=3. So (0,3).",
                type: "graph"
            },
            {
                question: "What is midpoint of line segment from (2,3) to (4,7)?",
                options: ["(3,5)", "(6,10)", "(2,4)", "(1,2)"],
                answer: "A",
                explanation: "Midpoint = ((2+4)/2, (3+7)/2) = (6/2, 10/2) = (3,5)",
                type: "graph"
            },
            {
                question: "Distance between (1,2) and (4,6)?",
                options: ["5 units", "7 units", "‚àö13 units", "‚àö20 units"],
                answer: "A",
                explanation: "Distance = ‚àö((4-1)¬≤+(6-2)¬≤) = ‚àö(9+16) = ‚àö25 = 5",
                type: "graph"
            },
            {
                question: "Are lines y=2x+1 and y=2x-3 parallel?",
                options: ["Yes", "No", "Perpendicular", "Intersecting"],
                answer: "A",
                explanation: "Both have gradient 2, so they are parallel (same slope).",
                type: "graph"
            },
            {
                question: "Are lines y=3x+2 and y=-‚Öìx+1 perpendicular?",
                options: ["Yes", "No", "Parallel", "Same line"],
                answer: "A",
                explanation: "Gradients 3 and -‚Öì are negative reciprocals (3 √ó -‚Öì = -1), so perpendicular.",
                type: "graph"
            },
            {
                question: "What shape is formed by points (0,0), (3,0), (3,4), (0,4)?",
                options: ["Rectangle", "Square", "Triangle", "Line"],
                answer: "A",
                explanation: "Points form rectangle: (0,0) to (3,0) base=3, (0,0) to (0,4) height=4",
                type: "graph"
            },
            {
                question: "Line segment from (-2,1) to (4,1) is:",
                options: ["Horizontal", "Vertical", "Diagonal", "Curved"],
                answer: "A",
                explanation: "Same y-coordinates (y=1) ‚Üí horizontal line.",
                type: "graph"
            },
            {
                question: "Line segment from (3,2) to (3,5) is:",
                options: ["Vertical", "Horizontal", "Diagonal", "Curved"],
                answer: "A",
                explanation: "Same x-coordinates (x=3) ‚Üí vertical line.",
                type: "graph"
            },
            {
                question: "If gradient=0 and y-intercept=4, line is:",
                options: ["Horizontal through (0,4)", "Vertical through (4,0)", "Through origin", "y=x+4"],
                answer: "A",
                explanation: "Gradient 0 ‚Üí horizontal line. y-intercept 4 ‚Üí line is y=4.",
                type: "graph"
            },
            {
                question: "Equation of line parallel to y=2x+1 through (0,5):",
                options: ["y=2x+5", "y=5x+2", "y=¬Ωx+5", "y=2x-5"],
                answer: "A",
                explanation: "Parallel means same gradient (2). Through (0,5) means y-intercept=5 ‚Üí y=2x+5",
                type: "graph"
            },
            {
                question: "Equation of line perpendicular to y=3x-2 through (0,1):",
                options: ["y=-‚Öìx+1", "y=3x+1", "y=‚Öìx+1", "y=-3x+1"],
                answer: "A",
                explanation: "Perpendicular gradient = negative reciprocal = -‚Öì. y-intercept=1 ‚Üí y=-‚Öìx+1",
                type: "graph"
            },

            // Applications (76-90)
            {
                question: "Taxi: $3 base + $2/km. Equation for cost y vs distance x?",
                options: ["y=2x+3", "y=3x+2", "y=2x", "y=3x"],
                answer: "A",
                explanation: "Gradient=2 ($/km), y-intercept=3 (base fare) ‚Üí y=2x+3",
                type: "applications"
            },
            {
                question: "Car travels at 60 km/h. Distance y after x hours?",
                options: ["y=60x", "y=x+60", "y=60", "y=x/60"],
                answer: "A",
                explanation: "Speed = gradient = 60 km/h, starts at 0 ‚Üí y=60x",
                type: "applications"
            },
            {
                question: "Phone plan: $20 monthly + $0.10/MB. Cost for x MB?",
                options: ["y=0.10x+20", "y=20x+0.10", "y=0.10x", "y=20x"],
                answer: "A",
                explanation: "Gradient=0.10 ($/MB), y-intercept=20 (monthly fee) ‚Üí y=0.10x+20",
                type: "applications"
            },
            {
                question: "Temperature falls 2¬∞C per hour from 25¬∞C. Temp after x hours?",
                options: ["y=-2x+25", "y=2x+25", "y=-2x", "y=25x-2"],
                answer: "A",
                explanation: "Gradient=-2 (falling), y-intercept=25 (starting temp) ‚Üí y=-2x+25",
                type: "applications"
            },
            {
                question: "Savings: $500 start, save $50/week. Total after x weeks?",
                options: ["y=50x+500", "y=500x+50", "y=50x", "y=500x"],
                answer: "A",
                explanation: "Gradient=50 (weekly), y-intercept=500 (initial) ‚Üí y=50x+500",
                type: "applications"
            }
        ];

        // Additional questions beyond 90
        const additionalQuestions = [
            {
                question: "Find gradient between (1,1) and (4,13)",
                options: ["4", "3", "12", "‚Öì"],
                answer: "A",
                explanation: "m=(13-1)/(4-1)=12/3=4",
                type: "gradient"
            },
            {
                question: "Equation of line through (1,4) with gradient 2",
                options: ["y=2x+2", "y=2x+4", "y=4x+2", "y=2x"],
                answer: "A",
                explanation: "Using point-slope: y-4=2(x-1) ‚Üí y=2x+2",
                type: "equation"
            },
            {
                question: "What is x-intercept of y=4x-8?",
                options: ["(2,0)", "(0,-8)", "(-2,0)", "(0,8)"],
                answer: "A",
                explanation: "Set y=0: 0=4x-8 ‚Üí 4x=8 ‚Üí x=2 ‚Üí (2,0)",
                type: "intercept"
            },
            {
                question: "Line through (0,0) and (3,9). Gradient?",
                options: ["3", "9", "‚Öì", "6"],
                answer: "A",
                explanation: "m=(9-0)/(3-0)=9/3=3",
                type: "gradient"
            }
        ];

        // Combine all questions
        const allQuestions = [...questions, ...additionalQuestions];

        // Math tips
        const mathTips = [
            "Tip: Gradient = rise/run = (change in y)/(change in x)",
            "Tip: y-intercept: set x=0, x-intercept: set y=0",
            "Tip: Parallel lines have equal gradients",
            "Tip: Perpendicular lines: gradients multiply to -1",
            "Tip: y = mx + c ‚Üí m=gradient, c=y-intercept",
            "Tip: Horizontal line: y = constant, gradient = 0",
            "Tip: Vertical line: x = constant, gradient undefined",
            "Tip: Plot at least 2 points to draw a straight line"
        ];

        // Graph variables
        let canvas, ctx;
        let scale = 20; // pixels per unit
        let originX, originY;
        let currentPoints = [];
        let currentLines = [];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentCoordinate: {x: 2, y: 3},
            currentGradientPoints: [{x:1,y:2},{x:3,y:6}],
            currentInterceptEquation: "y = 2x + 4",
            currentApplication: 0,
            coordinatesScore: 0,
            gradientScore: 0,
            interceptScore: 0,
            equationScore: 0,
            graphScore: 0,
            applicationsScore: 0
        };

        // Application problems
        const applicationProblems = [
            {
                problem: "A taxi charges $3 base fare plus $2 per km. Write equation for total cost (y) vs distance (x).",
                answer: "y=2x+3",
                solution: "Base fare = y-intercept = 3, per km = gradient = 2"
            },
            {
                problem: "Car travels at 60 km/h. Write equation for distance (y) after x hours.",
                answer: "y=60x",
                solution: "Speed = gradient = 60, starts at 0 so y-intercept = 0"
            },
            {
                problem: "Temperature falls 2¬∞C per hour from 25¬∞C. Temp (y) after x hours?",
                answer: "y=-2x+25",
                solution: "Rate of change = -2 (falling), initial temp = 25"
            },
            {
                problem: "Phone plan: $20 monthly + $0.10 per MB. Cost (y) for x MB?",
                answer: "y=0.10x+20",
                solution: "Per MB cost = 0.10, monthly fee = 20"
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathTip = document.getElementById('mathTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const coordinatesScore = document.getElementById('coordinatesScore');
        const gradientScore = document.getElementById('gradientScore');
        const interceptScore = document.getElementById('interceptScore');
        const timeSpent = document.getElementById('timeSpent');
        const coordinateDisplay = document.getElementById('coordinateDisplay');
        const coordinateFeedback = document.getElementById('coordinateFeedback');
        const gradientDisplay = document.getElementById('gradientDisplay');
        const gradientResult = document.getElementById('gradientResult');
        const interceptEquation = document.getElementById('interceptEquation');
        const interceptResult = document.getElementById('interceptResult');
        const equationExample = document.getElementById('equationExample');
        const applicationProblem = document.getElementById('applicationProblem');
        const applicationFeedback = document.getElementById('applicationFeedback');
        const lineDetail = document.getElementById('lineDetail');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupGraph();
            setupVisualizationTools();
        }

        // Setup graph
        function setupGraph() {
            canvas = document.getElementById('graphCanvas');
            ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = 300;
            
            originX = canvas.width / 2;
            originY = canvas.height / 2;
            
            drawGrid();
        }

        // Draw coordinate grid
        function drawGrid() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid lines
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            
            // Vertical lines
            for (let x = originX % scale; x < canvas.width; x += scale) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // Horizontal lines
            for (let y = originY % scale; y < canvas.height; y += scale) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(0, originY);
            ctx.lineTo(canvas.width, originY);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(originX, 0);
            ctx.lineTo(originX, canvas.height);
            ctx.stroke();
            
            // Draw axis labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'top';
            
            // X-axis numbers
            for (let i = -Math.floor(canvas.width/(2*scale)); i <= Math.floor(canvas.width/(2*scale)); i++) {
                if (i !== 0) {
                    const x = originX + i * scale;
                    ctx.fillText(i.toString(), x, originY + 5);
                }
            }
            
            // Y-axis numbers
            ctx.textAlign = 'right';
            ctx.textBaseline = 'middle';
            for (let i = -Math.floor(canvas.height/(2*scale)); i <= Math.floor(canvas.height/(2*scale)); i++) {
                if (i !== 0) {
                    const y = originY - i * scale;
                    ctx.fillText(i.toString(), originX - 5, y);
                }
            }
            
            // Draw origin
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'top';
            ctx.fillText("O", originX - 10, originY + 5);
        }

        // Plot a point
        function plotPoint(x, y, color = '#2196F3', radius = 6) {
            const canvasX = originX + x * scale;
            const canvasY = originY - y * scale;
            
            ctx.beginPath();
            ctx.arc(canvasX, canvasY, radius, 0, Math.PI * 2);
            ctx.fillStyle = color;
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Add label
            ctx.fillStyle = color;
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'left';
            ctx.textBaseline = 'bottom';
            ctx.fillText(`(${x}, ${y})`, canvasX + 8, canvasY - 8);
            
            currentPoints.push({x, y, color});
        }

        // Draw a line
        function drawLine(m, c, color = '#4CAF50', width = 3) {
            // Calculate two points on the line
            const x1 = -10;
            const y1 = m * x1 + c;
            const x2 = 10;
            const y2 = m * x2 + c;
            
            const canvasX1 = originX + x1 * scale;
            const canvasY1 = originY - y1 * scale;
            const canvasX2 = originX + x2 * scale;
            const canvasY2 = originY - y2 * scale;
            
            ctx.beginPath();
            ctx.moveTo(canvasX1, canvasY1);
            ctx.lineTo(canvasX2, canvasY2);
            ctx.strokeStyle = color;
            ctx.lineWidth = width;
            ctx.stroke();
            
            currentLines.push({m, c, color});
            
            // Show equation
            ctx.fillStyle = color;
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'right';
            ctx.textBaseline = 'top';
            ctx.fillText(`y = ${m}x + ${c}`, canvas.width - 10, 10);
        }

        // Setup visualization tools
        function setupVisualizationTools() {
            newCoordinate();
            updateGradientDisplay();
            newApplication();
        }

        // Coordinate functions
        function newCoordinate() {
            const x = Math.floor(Math.random() * 7) - 3;
            const y = Math.floor(Math.random() * 7) - 3;
            appState.currentCoordinate = {x, y};
            coordinateDisplay.textContent = `Plot point: (${x}, ${y})`;
            coordinateFeedback.textContent = "Click Plot Point to see it on the graph";
            coordinateFeedback.style.color = "var(--text-secondary)";
        }

        function plotPointFromDisplay() {
            drawGrid();
            
            // Plot the current point
            const {x, y} = appState.currentCoordinate;
            plotPoint(x, y);
            
            // Highlight the point
            const pointElement = document.querySelector('.point');
            if (pointElement) {
                pointElement.classList.add('point-glow');
                setTimeout(() => pointElement.classList.remove('point-glow'), 1000);
            }
            
            coordinateFeedback.innerHTML = `<span style="color: var(--coordinate-blue)">Point (${x}, ${y}) plotted on graph</span>`;
        }

        function findQuadrant() {
            const {x, y} = appState.currentCoordinate;
            let quadrant = "";
            
            if (x > 0 && y > 0) quadrant = "Quadrant I";
            else if (x < 0 && y > 0) quadrant = "Quadrant II";
            else if (x < 0 && y < 0) quadrant = "Quadrant III";
            else if (x > 0 && y < 0) quadrant = "Quadrant IV";
            else if (x === 0 && y !== 0) quadrant = "on y-axis";
            else if (y === 0 && x !== 0) quadrant = "on x-axis";
            else quadrant = "at origin";
            
            coordinateFeedback.innerHTML = `<span style="color: var(--coordinate-blue)">Point (${x}, ${y}) is in ${quadrant}</span>`;
        }

        // Gradient functions
        function updateGradientDisplay() {
            const p1 = appState.currentGradientPoints[0];
            const p2 = appState.currentGradientPoints[1];
            gradientDisplay.textContent = `Points: (${p1.x}, ${p1.y}) and (${p2.x}, ${p2.y})`;
        }

        function calculateGradient() {
            const p1 = appState.currentGradientPoints[0];
            const p2 = appState.currentGradientPoints[1];
            
            const m = (p2.y - p1.y) / (p2.x - p1.x);
            
            gradientResult.innerHTML = `<span style="color: var(--gradient-green)">Gradient = (${p2.y} - ${p1.y}) √∑ (${p2.x} - ${p1.x}) = ${m}</span>`;
            
            // Also plot the points and line
            drawGrid();
            plotPoint(p1.x, p1.y, '#2196F3');
            plotPoint(p2.x, p2.y, '#2196F3');
            drawLine(m, p1.y - m * p1.x, '#4CAF50');
        }

        function plotPointsForGradient() {
            const p1 = appState.currentGradientPoints[0];
            const p2 = appState.currentGradientPoints[1];
            
            drawGrid();
            plotPoint(p1.x, p1.y, '#2196F3');
            plotPoint(p2.x, p2.y, '#2196F3');
            
            gradientResult.innerHTML = `<span style="color: var(--gradient-green)">Points plotted. Now calculate gradient!</span>`;
        }

        function explainGradient() {
            const p1 = appState.currentGradientPoints[0];
            const p2 = appState.currentGradientPoints[1];
            
            alert(`CALCULATING GRADIENT (SLOPE):

Formula: m = (y‚ÇÇ - y‚ÇÅ) √∑ (x‚ÇÇ - x‚ÇÅ)

For points (${p1.x}, ${p1.y}) and (${p2.x}, ${p2.y}):

1. Find change in y (rise):
   y‚ÇÇ - y‚ÇÅ = ${p2.y} - ${p1.y} = ${p2.y - p1.y}
   
2. Find change in x (run):
   x‚ÇÇ - x‚ÇÅ = ${p2.x} - ${p1.x} = ${p2.x - p1.x}
   
3. Divide rise by run:
   ${p2.y - p1.y} √∑ ${p2.x - p1.x} = ${(p2.y - p1.y)/(p2.x - p1.x)}
   
The gradient tells us:
‚Ä¢ Positive ‚Üí line slopes upward
‚Ä¢ Negative ‚Üí line slopes downward
‚Ä¢ Zero ‚Üí horizontal line
‚Ä¢ Undefined ‚Üí vertical line`);
        }

        // Intercept functions
        function findYIntercept() {
            const eq = appState.currentInterceptEquation;
            const match = eq.match(/y\s*=\s*(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)/);
            
            if (match) {
                const c = parseFloat(match[2].replace(/\s+/g, ''));
                interceptResult.innerHTML = `<span style="color: var(--intercept-purple)">y-intercept = ${c} (point (0, ${c}))</span>`;
                
                // Plot it
                drawGrid();
                plotPoint(0, c, '#9C27B0');
            }
        }

        function findXIntercept() {
            const eq = appState.currentInterceptEquation;
            const match = eq.match(/y\s*=\s*(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)/);
            
            if (match) {
                const m = parseFloat(match[1] || '1');
                const c = parseFloat(match[2].replace(/\s+/g, ''));
                
                // Solve for x when y=0: 0 = mx + c ‚Üí x = -c/m
                const xIntercept = -c / m;
                interceptResult.innerHTML = `<span style="color: var(--intercept-purple)">x-intercept = ${xIntercept} (point (${xIntercept}, 0))</span>`;
                
                // Plot it
                drawGrid();
                plotPoint(xIntercept, 0, '#9C27B0');
            }
        }

        function newInterceptEquation() {
            const m = Math.floor(Math.random() * 5) - 2; // -2 to 2
            const c = Math.floor(Math.random() * 9) - 4; // -4 to 4
            
            if (m === 0) m = 1; // Avoid horizontal lines for this exercise
            
            appState.currentInterceptEquation = `y = ${m}x ${c >= 0 ? '+' : ''}${c}`;
            interceptEquation.textContent = appState.currentInterceptEquation;
            interceptResult.textContent = "y-intercept: when x=0, x-intercept: when y=0";
            interceptResult.style.color = "var(--text-secondary)";
        }

        // Equation functions
        function showEquationForm(type) {
            let examples = "";
            switch(type) {
                case 'slopeIntercept':
                    examples = "y = mx + c\nm = gradient, c = y-intercept\n\nExamples:\ny = 2x + 3 (gradient=2, y-intercept=3)\ny = -¬Ωx - 4 (gradient=-¬Ω, y-intercept=-4)";
                    break;
                case 'pointSlope':
                    examples = "y - y‚ÇÅ = m(x - x‚ÇÅ)\nThrough point (x‚ÇÅ,y‚ÇÅ) with gradient m\n\nExamples:\ny - 2 = 3(x - 1) (through (1,2), gradient=3)\ny + 1 = -2(x - 4) (through (4,-1), gradient=-2)";
                    break;
                case 'twoPoint':
                    examples = "m = (y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)\nThen use point-slope form\n\nExample: Points (1,2) and (3,8)\nm = (8-2)/(3-1) = 6/2 = 3\ny - 2 = 3(x - 1)";
                    break;
                case 'standard':
                    examples = "ax + by = c\nEasy to find intercepts\n\nExamples:\n2x + 3y = 6\nx-intercept: set y=0 ‚Üí 2x=6 ‚Üí x=3\ny-intercept: set x=0 ‚Üí 3y=6 ‚Üí y=2";
                    break;
            }
            equationExample.innerHTML = `<span style="color: var(--equation-red); font-weight: bold;">EQUATION FORM:</span><br>${examples}`;
            equationExample.classList.add('highlight');
            setTimeout(() => equationExample.classList.remove('highlight'), 1000);
        }

        function practiceEquation() {
            const problems = [
                { problem: "Write equation with gradient 3, y-intercept -2", answer: "y=3x-2" },
                { problem: "Write equation through (0,4) with gradient ¬Ω", answer: "y=¬Ωx+4" },
                { problem: "Find gradient of y = -2x + 5", answer: "-2" },
                { problem: "Find y-intercept of y = 4x - 3", answer: "-3" }
            ];
            const problem = problems[Math.floor(Math.random() * problems.length)];
            
            const userAnswer = prompt(`${problem.problem}\n\nEnter your answer:`);
            if (userAnswer && userAnswer.replace(/\s+/g, '') === problem.answer.replace(/\s+/g, '')) {
                alert(`‚úì Correct!\n${problem.problem}\nAnswer: ${problem.answer}`);
            } else {
                alert(`‚úó The correct answer is:\n${problem.problem}\nAnswer: ${problem.answer}`);
            }
        }

        function explainAllForms() {
            alert(`ALL EQUATION FORMS FOR STRAIGHT LINES:

1. Slope-Intercept Form: y = mx + c
   ‚Ä¢ m = gradient
   ‚Ä¢ c = y-intercept
   ‚Ä¢ Best for graphing
   
2. Point-Slope Form: y - y‚ÇÅ = m(x - x‚ÇÅ)
   ‚Ä¢ Through point (x‚ÇÅ, y‚ÇÅ)
   ‚Ä¢ Gradient = m
   ‚Ä¢ Useful when point is known
   
3. Two-Point Form:
   ‚Ä¢ First find m = (y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)
   ‚Ä¢ Then use point-slope form
   
4. Standard Form: ax + by = c
   ‚Ä¢ Easy to find intercepts
   ‚Ä¢ x-intercept: set y=0, solve for x
   ‚Ä¢ y-intercept: set x=0, solve for y
   
5. Horizontal Line: y = c
   ‚Ä¢ Gradient = 0
   ‚Ä¢ Parallel to x-axis
   
6. Vertical Line: x = c
   ‚Ä¢ Gradient undefined
   ‚Ä¢ Parallel to y-axis
   
Conversion between forms is often necessary!`);
        }

        // Application functions
        function newApplication() {
            appState.currentApplication = (appState.currentApplication + 1) % applicationProblems.length;
            const problem = applicationProblems[appState.currentApplication];
            applicationProblem.textContent = problem.problem;
            applicationFeedback.textContent = "Base value = y-intercept, rate = gradient";
            applicationFeedback.style.color = "var(--text-secondary)";
        }

        function checkApplication(selectedAnswer) {
            const problem = applicationProblems[appState.currentApplication];
            
            if (selectedAnswer === problem.answer) {
                applicationFeedback.innerHTML = `<span style="color: var(--gradient-green)">Correct! ${problem.problem}\nEquation: ${problem.answer}</span>`;
                applicationFeedback.classList.add('highlight');
                setTimeout(() => applicationFeedback.classList.remove('highlight'), 1000);
                
                // Plot the line
                const match = problem.answer.match(/y\s*=\s*(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)/);
                if (match) {
                    const m = parseFloat(match[1] || '1');
                    const c = parseFloat(match[2].replace(/\s+/g, ''));
                    drawGrid();
                    drawLine(m, c, '#4CAF50');
                    plotPoint(0, c, '#9C27B0'); // y-intercept
                }
            } else {
                applicationFeedback.innerHTML = `<span style="color: var(--equation-red)">Incorrect. ${problem.problem}\nCorrect equation: ${problem.answer}</span>`;
            }
        }

        function showApplicationSolution() {
            const problem = applicationProblems[appState.currentApplication];
            alert(`SOLUTION:\n\n${problem.problem}\n\n${problem.solution}\n\nEquation: ${problem.answer}`);
        }

        // Graph plotting functions
        function plotEquation() {
            const input = document.getElementById('equationInput').value.trim();
            const graphInfo = document.getElementById('graphInfo');
            
            if (!input) {
                graphInfo.textContent = "Please enter an equation";
                graphInfo.style.color = "var(--equation-red)";
                return;
            }
            
            // Parse equation (simple parsing for y=mx+c format)
            const match = input.match(/y\s*=\s*(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)?/i);
            
            if (match) {
                const m = parseFloat(match[1] || '1');
                const c = parseFloat(match[2] ? match[2].replace(/\s+/g, '') : '0');
                
                drawGrid();
                drawLine(m, c, '#4CAF50');
                
                // Plot y-intercept
                plotPoint(0, c, '#9C27B0');
                
                graphInfo.innerHTML = `<span style="color: var(--gradient-green)">Plotted: y = ${m}x ${c >= 0 ? '+' : ''}${c}</span>`;
            } else {
                graphInfo.textContent = "Enter equation as y=mx+c (e.g., y=2x+1)";
                graphInfo.style.color = "var(--equation-red)";
            }
        }

        function clearGraph() {
            drawGrid();
            currentPoints = [];
            currentLines = [];
            document.getElementById('graphInfo').textContent = "Graph cleared. Enter new equation.";
            document.getElementById('graphInfo').style.color = "var(--text-secondary)";
        }

        // Comparison functions
        function explainLineType(type) {
            const explanations = {
                positive: {
                    name: "Positive Slope",
                    description: "Line slopes upward as we move from left to right.",
                    equation: "y = 2x + 1",
                    gradient: "m > 0",
                    examples: "y = 3x + 2, y = 0.5x - 1"
                },
                negative: {
                    name: "Negative Slope",
                    description: "Line slopes downward as we move from left to right.",
                    equation: "y = -x + 3",
                    gradient: "m < 0",
                    examples: "y = -2x + 4, y = -0.5x - 2"
                },
                horizontal: {
                    name: "Horizontal Line",
                    description: "Line is parallel to x-axis, constant y-value.",
                    equation: "y = 4",
                    gradient: "m = 0",
                    examples: "y = -2, y = 0, y = 5"
                },
                vertical: {
                    name: "Vertical Line",
                    description: "Line is parallel to y-axis, constant x-value.",
                    equation: "x = 3",
                    gradient: "undefined",
                    examples: "x = -1, x = 0, x = 4"
                }
            };
            
            const exp = explanations[type];
            lineDetail.innerHTML = `
                <strong style="color: var(--coordinate-blue)">${exp.name}</strong><br>
                <strong>Description:</strong> ${exp.description}<br>
                <strong>Example:</strong> ${exp.equation}<br>
                <strong>Gradient:</strong> ${exp.gradient}<br>
                <strong>Other Examples:</strong> ${exp.examples}
            `;
            lineDetail.style.display = 'block';
            
            // Also plot an example
            drawGrid();
            if (type === 'positive') drawLine(2, 1, '#4CAF50');
            else if (type === 'negative') drawLine(-1, 3, '#4CAF50');
            else if (type === 'horizontal') drawLine(0, 4, '#4CAF50');
            else {
                // Vertical line - special case
                ctx.beginPath();
                ctx.moveTo(originX + 3*scale, 0);
                ctx.lineTo(originX + 3*scale, canvas.height);
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 3;
                ctx.stroke();
                ctx.fillStyle = '#4CAF50';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'right';
                ctx.textBaseline = 'top';
                ctx.fillText('x = 3', canvas.width - 10, 10);
            }
        }

        // Concept detail
        window.showConceptDetail = function(concept) {
            let info = "";
            
            if (concept === 'coordinates') {
                info = `(x,y)‚ÄØ CARTESIAN COORDINATES‚ÄØ(x,y)

The Coordinate System:
‚Ä¢ X-axis: Horizontal number line
‚Ä¢ Y-axis: Vertical number line
‚Ä¢ Origin: (0,0) where axes intersect
‚Ä¢ Quadrants: Four regions divided by axes

Plotting Points:
(x, y) = (horizontal, vertical)
‚Ä¢ Positive x: move RIGHT from origin
‚Ä¢ Negative x: move LEFT from origin
‚Ä¢ Positive y: move UP from origin
‚Ä¢ Negative y: move DOWN from origin

Quadrants:
I: (+,+)   II: (-,+)
III: (-,-)  IV: (+,-)

Special Points:
‚Ä¢ On x-axis: y = 0 ‚Üí (x, 0)
‚Ä¢ On y-axis: x = 0 ‚Üí (0, y)
‚Ä¢ Origin: (0, 0)

Distance Between Points:
d = ‚àö[(x‚ÇÇ-x‚ÇÅ)¬≤ + (y‚ÇÇ-y‚ÇÅ)¬≤]

Midpoint Formula:
M = ((x‚ÇÅ+x‚ÇÇ)/2, (y‚ÇÅ+y‚ÇÇ)/2)

Examples:
‚Ä¢ (3,4): 3 right, 4 up ‚Üí Quadrant I
‚Ä¢ (-2,5): 2 left, 5 up ‚Üí Quadrant II
‚Ä¢ (-1,-3): 1 left, 3 down ‚Üí Quadrant III
‚Ä¢ (4,-2): 4 right, 2 down ‚Üí Quadrant IV`;
            } else if (concept === 'gradient') {
                info = `m‚ÄØ GRADIENT (SLOPE)‚ÄØ‚Üó

What is Gradient?
The steepness or slope of a line, measuring how much y changes for each unit change in x.

Formula:
m = (y‚ÇÇ - y‚ÇÅ) √∑ (x‚ÇÇ - x‚ÇÅ)
= Rise √∑ Run
= Change in y √∑ Change in x

Interpretation:
‚Ä¢ Positive m: Line slopes UPWARD left to right
‚Ä¢ Negative m: Line slopes DOWNWARD left to right
‚Ä¢ Zero m: Horizontal line (flat)
‚Ä¢ Undefined: Vertical line (straight up/down)

Special Cases:
‚Ä¢ m = 2: For every 1 unit right, go UP 2 units
‚Ä¢ m = -¬Ω: For every 1 unit right, go DOWN ¬Ω unit
‚Ä¢ m = 0: Horizontal line (y = constant)
‚Ä¢ m undefined: Vertical line (x = constant)

Parallel Lines:
Have EQUAL gradients: m‚ÇÅ = m‚ÇÇ

Perpendicular Lines:
Gradients multiply to -1: m‚ÇÅ √ó m‚ÇÇ = -1
(or m‚ÇÇ = -1/m‚ÇÅ)

Examples:
‚Ä¢ Between (1,2) and (3,6): m = (6-2)/(3-1) = 4/2 = 2
‚Ä¢ Between (0,5) and (4,1): m = (1-5)/(4-0) = -4/4 = -1
‚Ä¢ Horizontal line through (2,3): m = 0`;
            } else if (concept === 'intercept') {
                info = `c‚ÄØ INTERCEPTS‚ÄØ‚Üï

What are Intercepts?
Points where a line crosses the axes.

Y-intercept:
‚Ä¢ Where line crosses y-axis (x = 0)
‚Ä¢ Point: (0, c)
‚Ä¢ In y = mx + c, c is y-intercept
‚Ä¢ Found by setting x = 0

X-intercept:
‚Ä¢ Where line crosses x-axis (y = 0)
‚Ä¢ Point: (a, 0)
‚Ä¢ Found by setting y = 0 and solving for x

Finding Intercepts from y = mx + c:
1. y-intercept: Set x = 0 ‚Üí y = c
2. x-intercept: Set y = 0 ‚Üí 0 = mx + c ‚Üí x = -c/m

Examples:
‚Ä¢ y = 2x + 4:
  y-intercept: (0, 4) [set x=0]
  x-intercept: (-2, 0) [solve 0=2x+4 ‚Üí x=-2]
  
‚Ä¢ y = -3x + 6:
  y-intercept: (0, 6)
  x-intercept: (2, 0) [solve 0=-3x+6 ‚Üí x=2]

Special Cases:
‚Ä¢ Horizontal line y = k: Only y-intercept (0,k), no x-intercept (unless k=0)
‚Ä¢ Vertical line x = k: Only x-intercept (k,0), no y-intercept (unless k=0)
‚Ä¢ Line through origin: Both intercepts at (0,0)`;
            } else if (concept === 'equation') {
                info = `y=mx+c‚ÄØ EQUATIONS OF STRAIGHT LINES‚ÄØ=

Slope-Intercept Form:
y = mx + c
‚Ä¢ m = gradient (slope)
‚Ä¢ c = y-intercept
‚Ä¢ Most common form

Point-Slope Form:
y - y‚ÇÅ = m(x - x‚ÇÅ)
‚Ä¢ Through point (x‚ÇÅ, y‚ÇÅ) with gradient m
‚Ä¢ Useful when point is known

Two-Point Form:
1. Find m = (y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)
2. Use point-slope form with either point

Standard Form:
ax + by = c
‚Ä¢ Easy to find intercepts:
  x-intercept: set y=0 ‚Üí x = c/a
  y-intercept: set x=0 ‚Üí y = c/b

Horizontal Lines:
y = k (constant)
‚Ä¢ Gradient = 0
‚Ä¢ Parallel to x-axis

Vertical Lines:
x = k (constant)
‚Ä¢ Gradient undefined
‚Ä¢ Parallel to y-axis

Converting Between Forms:
Example: Find equation through (2,3) with gradient 4:
1. Point-slope: y-3=4(x-2)
2. Simplify: y-3=4x-8
3. Slope-intercept: y=4x-5

Finding Equation from Graph:
1. Find y-intercept (c)
2. Find gradient (m) using two points
3. Write y = mx + c`;
            } else if (concept === 'graph') {
                info = `üìà‚ÄØ GRAPH PLOTTING‚ÄØüìâ

How to Plot a Line from Equation y = mx + c:

Method 1: Using Intercepts
1. Find y-intercept: Plot (0, c)
2. Find x-intercept: Plot (-c/m, 0)
3. Draw line through both points

Method 2: Using Slope
1. Plot y-intercept (0, c)
2. From this point, use gradient m = rise/run
   ‚Ä¢ Positive m: move up
   ‚Ä¢ Negative m: move down
   ‚Ä¢ m = a/b: move a units vertically, b units horizontally
3. Plot second point
4. Draw line through both points

Method 3: Using Table of Values
1. Choose x values (e.g., -2, -1, 0, 1, 2)
2. Calculate corresponding y values
3. Plot (x,y) points
4. Draw line through points

Example: Plot y = 2x + 1
1. y-intercept: (0, 1)
2. Gradient 2 = 2/1: From (0,1), move up 2, right 1 ‚Üí (1,3)
3. Draw line through (0,1) and (1,3)

Checking Your Graph:
‚Ä¢ Line should be straight
‚Ä¢ Should pass through calculated points
‚Ä¢ Extend line across entire grid
‚Ä¢ Add arrows to show it continues

Special Lines:
‚Ä¢ Through origin: Both intercepts at (0,0)
‚Ä¢ Parallel to axes: Horizontal (y=k) or vertical (x=k)
‚Ä¢ 45¬∞ line: y = x (gradient = 1)`;
            } else {
                info = `‚ñ≥‚ÄØ REAL-WORLD APPLICATIONS‚ÄØ$

Where Coordinate Geometry is Used:

1. Travel & Navigation:
   ‚Ä¢ Distance-time graphs
   ‚Ä¢ Speed = gradient of distance-time graph
   ‚Ä¢ Position-time relationships

2. Economics & Business:
   ‚Ä¢ Cost-Revenue-Profit graphs
   ‚Ä¢ Supply-Demand curves
   ‚Ä¢ Break-even point (where lines intersect)

3. Science & Engineering:
   ‚Ä¢ Velocity-time graphs
   ‚Ä¢ Temperature changes over time
   ‚Ä¢ Growth/decay patterns

4. Everyday Life:
   ‚Ä¢ Taxi fares: y = mx + c
     (c = base fare, m = rate per km)
   ‚Ä¢ Phone bills
   ‚Ä¢ Salary with commission
   ‚Ä¢ Recipe scaling

Example Problems:

1. Taxi Fare:
   Base fare: $3, Rate: $2/km
   Equation: y = 2x + 3
   y = total cost, x = distance in km

2. Temperature Change:
   Starts at 25¬∞C, falls 2¬∞C/hour
   Equation: y = -2x + 25
   y = temperature, x = hours

3. Car Travel:
   Speed 60 km/h from start
   Equation: y = 60x
   y = distance, x = time

4. Savings:
   Start with $500, save $50/week
   Equation: y = 50x + 500
   y = total savings, x = weeks

Why Learn This?
‚Ä¢ Model real situations mathematically
‚Ä¢ Make predictions
‚Ä¢ Solve practical problems
‚Ä¢ Understand relationships between variables`;
            }
            
            alert(info);
        };

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other Math topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
            
            // Update graph on resize
            window.addEventListener('resize', function() {
                if (canvas) {
                    canvas.width = canvas.parentElement.clientWidth;
                    originX = canvas.width / 2;
                    drawGrid();
                    // Redraw any existing points/lines
                    currentPoints.forEach(p => plotPoint(p.x, p.y, p.color));
                    currentLines.forEach(l => drawLine(l.m, l.c, l.color));
                }
            });
        }

        // Create math tip display
        function createMathTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'math-tip';
            tipDiv.innerHTML = `<strong>Math Tip:</strong> ${mathTips[Math.floor(Math.random() * mathTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
            
            // Redraw graph
            setTimeout(() => {
                setupGraph();
                setupVisualizationTools();
            }, 100);
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / allQuestions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            coordinatesScore.textContent = appState.coordinatesScore;
            gradientScore.textContent = appState.gradientScore;
            interceptScore.textContent = appState.interceptScore;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You've mastered coordinate geometry!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Excellent work! Your graphing skills are impressive!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! You're developing strong analytical skills!";
            } else {
                scoreMessage.textContent = "Keep practicing! Graphs help visualize mathematical relationships!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = allQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${allQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / allQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathTip.appendChild(createMathTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = allQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                
                // Track scores by question type
                if (question.type === 'coordinates') appState.coordinatesScore++;
                if (question.type === 'gradient') appState.gradientScore++;
                if (question.type === 'intercept') appState.interceptScore++;
                if (question.type === 'equation') appState.equationScore++;
                if (question.type === 'graph') appState.graphScore++;
                if (question.type === 'applications') appState.applicationsScore++;
                
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.coordinatesScore = 0;
            appState.gradientScore = 0;
            appState.interceptScore = 0;
            appState.equationScore = 0;
            appState.graphScore = 0;
            appState.applicationsScore = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin coordinate geometry practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.coordinatesScore = 0;
            appState.gradientScore = 0;
            appState.interceptScore = 0;
            appState.equationScore = 0;
            appState.graphScore = 0;
            appState.applicationsScore = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);

        // Make functions available globally for buttons
        window.plotPoint = plotPointFromDisplay;
        window.newCoordinate = newCoordinate;
        window.findQuadrant = findQuadrant;
        window.calculateGradient = calculateGradient;
        window.plotPointsForGradient = plotPointsForGradient;
        window.explainGradient = explainGradient;
        window.findYIntercept = findYIntercept;
        window.findXIntercept = findXIntercept;
        window.newInterceptEquation = newInterceptEquation;
        window.practiceEquation = practiceEquation;
        window.explainAllForms = explainAllForms;
        window.checkApplication = checkApplication;
        window.newApplication = newApplication;
        window.showApplicationSolution = showApplicationSolution;
        window.plotEquation = plotEquation;
        window.clearGraph = clearGraph;
    </script>
</body>
</html>
