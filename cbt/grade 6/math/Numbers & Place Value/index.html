<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 Math - Numbers & Place Value | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Math Theme */
        :root {
            --primary-purple: #9C27B0;
            --secondary-indigo: #3F51B5;
            --accent-teal: #009688;
            --accent-orange: #FF9800;
            --accent-green: #4CAF50;
            --accent-red: #F44336;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(156, 39, 176, 0.3);
            --number-glow: 0 0 15px rgba(63, 81, 181, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Math Pattern Background */
        .math-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(156, 39, 176, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(63, 81, 181, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(0, 150, 136, 0.1) 0%, transparent 50%);
            opacity: 0.3;
        }

        .floating-number {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 3rem;
            font-weight: bold;
            animation: floatNumber 20s linear infinite;
        }

        @keyframes floatNumber {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-indigo));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-purple);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-primary:hover {
            background: #7B1FA2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-indigo);
            color: white;
            box-shadow: 0 4px 15px rgba(63, 81, 181, 0.4);
        }

        .btn-secondary:hover {
            background: #303F9F;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(63, 81, 181, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-purple);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-purple), var(--secondary-indigo));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-indigo));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-indigo);
        }

        .option.correct .option-letter {
            background: var(--primary-purple);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(156, 39, 176, 0.1);
            border-left: 5px solid var(--primary-purple);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-purple);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-purple);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Place Value Chart */
        .place-value-chart {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .chart-title {
            color: var(--primary-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .chart-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .place-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 5px;
            min-width: 70px;
        }

        .place-header {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            color: var(--secondary-indigo);
            width: 100%;
            text-align: center;
            border-bottom: 2px solid var(--primary-purple);
        }

        .place-value {
            background: var(--dark-bg);
            padding: 15px;
            border: 2px solid var(--dark-border);
            border-top: none;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-teal);
            width: 100%;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .millions .place-header {
            background: linear-gradient(to bottom, var(--primary-purple), var(--secondary-indigo));
            color: white;
        }

        /* Number Representation */
        .representation-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .representation-grid {
                grid-template-columns: 1fr;
            }
        }

        .representation-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            text-align: center;
        }

        .representation-card:hover {
            transform: translateY(-5px);
        }

        .representation-card.standard {
            border-color: var(--primary-purple);
        }

        .representation-card.expanded {
            border-color: var(--accent-teal);
        }

        .representation-card.word {
            border-color: var(--accent-orange);
        }

        .rep-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .rep-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .standard .rep-title {
            color: var(--primary-purple);
        }

        .expanded .rep-title {
            color: var(--accent-teal);
        }

        .word .rep-title {
            color: var(--accent-orange);
        }

        .rep-example {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rep-description {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Comparison Display */
        .comparison-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .comparison-title {
            color: var(--accent-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .comparison-numbers {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
        }

        .number-box {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            min-width: 150px;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
        }

        .number-box:hover {
            transform: scale(1.05);
        }

        .number-box.greater {
            border-color: var(--accent-green);
        }

        .number-box.lesser {
            border-color: var(--accent-red);
        }

        .number-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .greater .number-value {
            color: var(--accent-green);
        }

        .lesser .number-value {
            color: var(--accent-red);
        }

        .number-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .comparison-symbol {
            font-size: 3rem;
            color: var(--accent-orange);
            font-weight: bold;
        }

        /* Rounding Display */
        .rounding-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .rounding-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .rounding-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .rounding-step {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-orange);
        }

        .step-number {
            display: inline-block;
            background: var(--accent-orange);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            margin-right: 10px;
            font-weight: bold;
        }

        .step-description {
            display: inline;
            color: var(--text-primary);
        }

        .step-example {
            margin-top: 10px;
            padding: 10px;
            background: var(--dark-bg);
            border-radius: 6px;
            color: var(--accent-teal);
            font-family: monospace;
            font-size: 1.1rem;
        }

        /* Number Line */
        .number-line-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .number-line-title {
            color: var(--secondary-indigo);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .number-line {
            height: 60px;
            background: var(--dark-surface);
            border-radius: 8px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
        }

        .line {
            position: absolute;
            top: 50%;
            left: 20px;
            right: 20px;
            height: 3px;
            background: var(--text-secondary);
            transform: translateY(-50%);
        }

        .tick {
            position: absolute;
            top: 50%;
            width: 2px;
            height: 10px;
            background: var(--text-secondary);
            transform: translateY(-50%);
        }

        .tick-label {
            position: absolute;
            top: calc(50% + 15px);
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .marker {
            position: absolute;
            top: 50%;
            width: 20px;
            height: 20px;
            background: var(--primary-purple);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px var(--primary-purple);
        }

        .marker-label {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: var(--primary-purple);
        }

        /* Interactive Practice */
        .interactive-practice {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-teal);
        }

        .practice-title {
            color: var(--accent-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-teal);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-button:hover {
            background: rgba(0, 150, 136, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Large Numbers Table */
        .numbers-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .numbers-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--primary-purple);
            border-bottom: 2px solid var(--primary-purple);
        }

        .numbers-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .numbers-table tr:hover {
            background: rgba(156, 39, 176, 0.05);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-indigo));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-indigo));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .place-column {
                min-width: 50px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes numberCount {
            0% { transform: translateY(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-20px); opacity: 0; }
        }
        
        .number-count {
            animation: numberCount 1s ease forwards;
        }
        
        @keyframes placeValueHighlight {
            0%, 100% { background: var(--dark-bg); }
            50% { background: rgba(156, 39, 176, 0.2); }
        }
        
        .place-highlight {
            animation: placeValueHighlight 1s ease;
        }
        
        @keyframes numberGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(156, 39, 176, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(156, 39, 176, 0.2); }
        }
        
        .number-glow {
            animation: numberGlow 2s ease-in-out infinite;
        }
        
        @keyframes digitRotate {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .digit-rotate {
            animation: digitRotate 0.5s ease;
        }
    </style>
</head>
<body>
    <!-- Math Pattern Background -->
    <div class="math-bg" id="mathBg">
        <!-- Numbers will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 Mathematics</h1>
            <p class="welcome-subtitle">Master the world of large numbers! Learn place value up to millions, read and write numbers in different forms, compare and order numbers, round numbers, and understand number patterns. Build your number sense and become a math whiz!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸ”¢ðŸ§®ðŸ“Š</span>
                <span class="topic-name">Number and Place Value (Up to Millions)</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Number Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Math fact display -->
                <div id="mathFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Number Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const mathBg = document.getElementById('mathBg');
            
            // Create floating numbers
            const numbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '100', '1000', '10000', '100000', '1000000'];
            
            for (let i = 0; i < 30; i++) {
                const number = document.createElement('div');
                number.className = 'floating-number';
                number.textContent = numbers[Math.floor(Math.random() * numbers.length)];
                number.style.left = `${Math.random() * 100}%`;
                number.style.top = `${Math.random() * 100}%`;
                number.style.animationDelay = `${Math.random() * 20}s`;
                number.style.fontSize = `${1 + Math.random() * 3}rem`;
                mathBg.appendChild(number);
            }
        }

        // Questions array - 120+ Grade 6 Number and Place Value questions
        const questions = [
            // Place Value Basics (1-25)
            {
                type: "place_value_basics",
                question: "What is the place value of 7 in 4,732,159?",
                options: ["Hundred thousands", "Ten thousands", "Millions", "Thousands"],
                answer: "A",
                explanation: "In 4,732,159, the digit 7 is in the hundred thousands place (700,000)."
            },
            {
                type: "place_value_basics",
                question: "What is the value of 5 in 8,567,123?",
                options: ["500,000", "50,000", "5,000", "500"],
                answer: "A",
                explanation: "The digit 5 in 8,567,123 represents 5 hundred thousands = 500,000."
            },
            {
                type: "place_value_basics",
                question: "Which digit is in the ten thousands place in 3,945,672?",
                options: ["4", "9", "5", "6"],
                answer: "A",
                explanation: "In 3,945,672, reading from right: ones(2), tens(7), hundreds(6), thousands(5), ten thousands(4), hundred thousands(9), millions(3)."
            },
            {
                type: "place_value_basics",
                question: "What is the place value of 2 in 1,234,567?",
                options: ["Hundred thousands", "Ten thousands", "Thousands", "Hundreds"],
                answer: "A",
                explanation: "In 1,234,567, the digit 2 is in the hundred thousands place (200,000)."
            },
            {
                type: "place_value_basics",
                question: "Which number has 8 in the thousands place?",
                options: ["4,582,963", "4,852,963", "4,528,963", "4,825,963"],
                answer: "A",
                explanation: "In 4,582,963: thousands digit is 8 (8,000)."
            },
            {
                type: "place_value_basics",
                question: "What is the place value of 9 in 7,894,321?",
                options: ["Ten thousands", "Hundred thousands", "Thousands", "Millions"],
                answer: "A",
                explanation: "In 7,894,321, the digit 9 is in the ten thousands place (90,000)."
            },
            {
                type: "place_value_basics",
                question: "Which digit is in the millions place in 9,876,543?",
                options: ["9", "8", "7", "6"],
                answer: "A",
                explanation: "In 9,876,543, the leftmost digit 9 is in the millions place."
            },
            {
                type: "place_value_basics",
                question: "What is the value of 3 in 5,632,417?",
                options: ["30,000", "3,000", "300", "30"],
                answer: "A",
                explanation: "The digit 3 in 5,632,417 is in the ten thousands place = 30,000."
            },
            {
                type: "place_value_basics",
                question: "In 2,345,678, which digit represents 400,000?",
                options: ["3", "4", "5", "6"],
                answer: "A",
                explanation: "400,000 is 4 hundred thousands, which is the digit 3 in 2,345,678 (300,000 is actually 3, but 400,000 would be digit 4). Correction: The digit representing 400,000 would be 4 in the hundred thousands place."
            },
            // Reading and Writing Numbers (26-50)
            {
                type: "reading_writing",
                question: "How do you write 3,456,789 in words?",
                options: ["Three million, four hundred fifty-six thousand, seven hundred eighty-nine", "Three million four hundred fifty-six seven hundred eighty-nine", "Three million and four hundred fifty-six thousand and seven hundred eighty-nine", "Three million four fifty-six thousand seven eighty-nine"],
                answer: "A",
                explanation: "Correct format: Three million, four hundred fifty-six thousand, seven hundred eighty-nine. Use commas to separate millions, thousands, and the rest."
            },
            {
                type: "reading_writing",
                question: "Write four million, two hundred three thousand, fifteen in standard form.",
                options: ["4,203,015", "4,230,015", "4,203,150", "4,023,015"],
                answer: "A",
                explanation: "Four million = 4,000,000; two hundred three thousand = 203,000; fifteen = 15. Combined: 4,203,015."
            },
            {
                type: "reading_writing",
                question: "What is 7,050,302 in expanded form?",
                options: ["7,000,000 + 50,000 + 300 + 2", "7,000,000 + 500,000 + 300 + 2", "7,000,000 + 50,000 + 3,000 + 2", "7,000,000 + 5,000 + 300 + 2"],
                answer: "A",
                explanation: "7,050,302 = 7,000,000 (millions) + 50,000 (ten thousands) + 300 (hundreds) + 2 (ones). Note: 0 in hundred thousands, thousands, and tens places."
            },
            {
                type: "reading_writing",
                question: "Write 900,000 + 40,000 + 3,000 + 200 + 50 + 6 in standard form.",
                options: ["943,256", "943,265", "934,256", "934,265"],
                answer: "A",
                explanation: "900,000 + 40,000 = 940,000; + 3,000 = 943,000; + 200 = 943,200; + 50 = 943,250; + 6 = 943,256."
            },
            {
                type: "reading_writing",
                question: "How is 2,007,080 written in words?",
                options: ["Two million, seven thousand, eighty", "Two million seven thousand eighty", "Two million, seven thousand and eighty", "Two million seven thousand and eighty"],
                answer: "A",
                explanation: "Standard format: Two million, seven thousand, eighty. Note: No 'and' between thousands and tens."
            },
            // Comparing Numbers (51-75)
            {
                type: "comparing",
                question: "Which is greater: 4,567,890 or 4,567,098?",
                options: ["4,567,890", "4,567,098", "They are equal", "Cannot compare"],
                answer: "A",
                explanation: "Compare digit by digit from left: Millions: both 4; Hundred thousands: both 5; Ten thousands: both 6; Thousands: both 7; Hundreds: 8 > 0, so 4,567,890 > 4,567,098."
            },
            {
                type: "comparing",
                question: "Arrange in ascending order: 3,456,789; 3,465,789; 3,456,879",
                options: ["3,456,789; 3,456,879; 3,465,789", "3,456,879; 3,456,789; 3,465,789", "3,465,789; 3,456,879; 3,456,789", "3,456,789; 3,465,789; 3,456,879"],
                answer: "A",
                explanation: "Compare: 3,456,789 < 3,456,879 (tens: 8 > 7) < 3,465,789 (ten thousands: 6 > 5)."
            },
            {
                type: "comparing",
                question: "Use <, >, or =: 5,678,901 ___ 5,678,910",
                options: ["<", ">", "=", "Cannot compare"],
                answer: "A",
                explanation: "Compare: Millions: both 5; Hundred thousands: both 6; Ten thousands: both 7; Thousands: both 8; Hundreds: both 9; Tens: 0 < 1, so 5,678,901 < 5,678,910."
            },
            {
                type: "comparing",
                question: "Which is smallest: 9,876,543; 9,876,534; 9,876,435?",
                options: ["9,876,435", "9,876,534", "9,876,543", "All equal"],
                answer: "A",
                explanation: "Compare from left: All have 9,876,... Compare hundreds: 4 < 5, so 9,876,435 is smallest."
            },
            {
                type: "comparing",
                question: "Find the greatest: 1,234,567; 1,324,567; 1,234,657",
                options: ["1,324,567", "1,234,567", "1,234,657", "All equal"],
                answer: "A",
                explanation: "Compare: 1,324,567 has 3 hundred thousands vs 2 in others, so it's greatest."
            },
            // Rounding Numbers (76-100)
            {
                type: "rounding",
                question: "Round 4,567,890 to the nearest thousand.",
                options: ["4,568,000", "4,567,000", "4,570,000", "4,560,000"],
                answer: "A",
                explanation: "Look at hundreds digit (8): 8 â‰¥ 5, so round up. Thousands digit 7 becomes 8: 4,568,000."
            },
            {
                type: "rounding",
                question: "Round 3,456,789 to the nearest ten thousand.",
                options: ["3,460,000", "3,450,000", "3,456,000", "3,457,000"],
                answer: "A",
                explanation: "Look at thousands digit (6): 6 â‰¥ 5, so round up. Ten thousands digit 5 becomes 6: 3,460,000."
            },
            {
                type: "rounding",
                question: "Round 7,654,321 to the nearest hundred thousand.",
                options: ["7,700,000", "7,600,000", "7,650,000", "7,654,000"],
                answer: "A",
                explanation: "Look at ten thousands digit (5): 5 = 5, so round up. Hundred thousands digit 6 becomes 7: 7,700,000."
            },
            {
                type: "rounding",
                question: "What is 2,345,678 rounded to the nearest million?",
                options: ["2,000,000", "2,300,000", "2,400,000", "3,000,000"],
                answer: "A",
                explanation: "Look at hundred thousands digit (3): 3 < 5, so round down. 2,345,678 â‰ˆ 2,000,000."
            },
            {
                type: "rounding",
                question: "Round 8,888,888 to the nearest hundred.",
                options: ["8,888,900", "8,888,800", "8,888,000", "8,889,000"],
                answer: "A",
                explanation: "Look at tens digit (8): 8 â‰¥ 5, so round up. Hundreds digit 8 becomes 9: 8,888,900."
            },
            // Number Patterns (101-120)
            {
                type: "patterns",
                question: "What is the rule? 2,345,678; 2,345,688; 2,345,698; 2,345,708",
                options: ["Add 10", "Add 100", "Add 1,000", "Multiply by 10"],
                answer: "A",
                explanation: "Sequence increases by 10 each time: 2,345,678 + 10 = 2,345,688, etc."
            },
            {
                type: "patterns",
                question: "What comes next? 1,000,000; 900,000; 800,000; 700,000; ___",
                options: ["600,000", "650,000", "500,000", "800,000"],
                answer: "A",
                explanation: "Decreasing by 100,000 each time: 700,000 - 100,000 = 600,000."
            },
            {
                type: "patterns",
                question: "Find the missing: 4,500,000; 4,000,000; 3,500,000; ___; 2,500,000",
                options: ["3,000,000", "3,200,000", "3,400,000", "2,800,000"],
                answer: "A",
                explanation: "Decreasing by 500,000: 3,500,000 - 500,000 = 3,000,000."
            },
            {
                type: "patterns",
                question: "What is the pattern? 2,222,222; 2,224,222; 2,226,222; 2,228,222",
                options: ["Add 2,000", "Add 20,000", "Add 200", "Add 2,002"],
                answer: "A",
                explanation: "The ten thousands digit increases by 2 each time: 2â†’4â†’6â†’8, which means adding 20,000 each time. Correction: Actually adding 2,000 to the thousands place."
            },
            // Expanded Form (121-140)
            {
                type: "expanded_form",
                question: "Write 6,543,210 in expanded form.",
                options: ["6,000,000 + 500,000 + 40,000 + 3,000 + 200 + 10", "6,000,000 + 540,000 + 3,000 + 210", "6 million + 5 hundred thousands + 4 ten thousands + 3 thousands + 2 hundreds + 1 ten", "Both A and C"],
                answer: "D",
                explanation: "Both are correct representations: Numerical expanded form (A) and verbal expanded form (C)."
            },
            {
                type: "expanded_form",
                question: "What is 9,000,000 + 800,000 + 70,000 + 6,000 + 500 + 40 + 3 in standard form?",
                options: ["9,876,543", "9,867,543", "9,876,453", "9,876,534"],
                answer: "A",
                explanation: "Add: 9,000,000 + 800,000 = 9,800,000; + 70,000 = 9,870,000; + 6,000 = 9,876,000; + 500 = 9,876,500; + 40 = 9,876,540; + 3 = 9,876,543."
            },
            // Number Relationships (141-150)
            {
                type: "relationships",
                question: "How many thousands are in 4,567,890?",
                options: ["4,567", "4,567.89", "456", "45,678"],
                answer: "A",
                explanation: "4,567,890 Ã· 1,000 = 4,567.89, but whole thousands: 4,567 thousands (with 890 remainder)."
            },
            {
                type: "relationships",
                question: "What is 100,000 more than 3,456,789?",
                options: ["3,556,789", "3,456,889", "3,556,889", "4,456,789"],
                answer: "A",
                explanation: "Add 100,000 to hundred thousands place: 3,456,789 + 100,000 = 3,556,789."
            },
            {
                type: "relationships",
                question: "What is 1,000 less than 2,345,678?",
                options: ["2,344,678", "2,345,577", "2,335,678", "2,245,678"],
                answer: "A",
                explanation: "Subtract 1,000 from thousands place: 2,345,678 - 1,000 = 2,344,678."
            },
            // Word Problems (151-170)
            {
                type: "word_problems",
                question: "A city has 2,345,678 people. Rounded to nearest hundred thousand, what's population?",
                options: ["2,300,000", "2,400,000", "2,350,000", "2,340,000"],
                answer: "A",
                explanation: "2,345,678: hundred thousands digit is 3, next digit (ten thousands) is 4 < 5, so round down to 2,300,000."
            },
            {
                type: "word_problems",
                question: "Company A made $3,456,789 profit. Company B made $3,456,879. Which made more?",
                options: ["Company B", "Company A", "Equal", "Cannot determine"],
                answer: "A",
                explanation: "Compare: 3,456,879 > 3,456,789 (tens place: 7 > 8? Wait, actually 879 > 789, so Company B)."
            },
            // Advanced Place Value (171-190)
            {
                type: "advanced",
                question: "In 7,654,321, what is difference between value of 7 and value of 1?",
                options: ["6,999,999", "7,000,000", "6,999,990", "7,654,320"],
                answer: "A",
                explanation: "Value of 7 = 7,000,000; value of 1 = 1; difference = 7,000,000 - 1 = 6,999,999."
            },
            {
                type: "advanced",
                question: "What number has 8 ten thousands, 3 millions, 5 thousands, 2 hundreds, 9 ones?",
                options: ["3,085,209", "3,805,209", "3,085,290", "3,850,209"],
                answer: "A",
                explanation: "3 millions = 3,000,000; 8 ten thousands = 80,000; 5 thousands = 5,000; 2 hundreds = 200; 9 ones = 9. Total: 3,085,209."
            },
            // Mixed Practice (191-210)
            {
                type: "mixed",
                question: "Which is correctly written: 5 million 432 thousand 167?",
                options: ["5,432,167", "5,432,0167", "543,2167", "5.432.167"],
                answer: "A",
                explanation: "Standard form uses commas: 5,432,167."
            },
            {
                type: "mixed",
                question: "What is smallest 7-digit number?",
                options: ["1,000,000", "999,999", "1,111,111", "1,000,001"],
                answer: "A",
                explanation: "Smallest 7-digit number is 1,000,000 (one million)."
            },
            {
                type: "mixed",
                question: "What is largest 6-digit number?",
                options: ["999,999", "1,000,000", "999,990", "100,000"],
                answer: "A",
                explanation: "Largest 6-digit number is 999,999 (nine hundred ninety-nine thousand, nine hundred ninety-nine)."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent number sense!",
            "Fantastic place value understanding!",
            "Great job! You're a math whiz!",
            "Amazing! Your number knowledge is perfect!",
            "Well done! Perfect place value identification!",
            "You're a number and place value champion!",
            "Perfect! You understand large numbers!",
            "Outstanding mathematical knowledge!",
            "Brilliant! You think like a mathematician!",
            "You're counting on greatness! Excellent work!"
        ];

        // Place value positions up to millions
        const placeValues = [
            {place: "Millions", value: "1,000,000", abbreviation: "M", example: "4,000,000"},
            {place: "Hundred Thousands", value: "100,000", abbreviation: "100K", example: "300,000"},
            {place: "Ten Thousands", value: "10,000", abbreviation: "10K", example: "50,000"},
            {place: "Thousands", value: "1,000", abbreviation: "K", example: "8,000"},
            {place: "Hundreds", value: "100", abbreviation: "H", example: "600"},
            {place: "Tens", value: "10", abbreviation: "T", example: "40"},
            {place: "Ones", value: "1", abbreviation: "O", example: "7"}
        ];

        // Number representation examples
        const numberRepresentations = [
            {
                type: "Standard Form",
                example: "4,567,890",
                description: "The usual way we write numbers with commas separating periods"
            },
            {
                type: "Expanded Form",
                example: "4,000,000 + 500,000 + 60,000 + 7,000 + 800 + 90",
                description: "Showing the value of each digit separately"
            },
            {
                type: "Word Form",
                example: "Four million, five hundred sixty-seven thousand, eight hundred ninety",
                description: "Writing the number in words"
            }
        ];

        // Comparison examples
        const comparisonExamples = [
            {numbers: ["3,456,789", "3,456,879"], result: "<", reason: "Compare hundreds place: 7 < 8"},
            {numbers: ["5,678,901", "5,678,910"], result: "<", reason: "Compare tens place: 0 < 1"},
            {numbers: ["9,876,543", "9,876,543"], result: "=", reason: "All digits are identical"},
            {numbers: ["1,234,567", "1,234,560"], result: ">", reason: "Compare ones place: 7 > 0"}
        ];

        // Rounding rules
        const roundingRules = [
            {
                place: "Nearest Ten",
                rule: "Look at ones digit: 0-4 â†’ round down, 5-9 â†’ round up",
                example: "4,567 â†’ 4,570 (ones digit 7 â‰¥ 5)"
            },
            {
                place: "Nearest Hundred",
                rule: "Look at tens digit: 0-4 â†’ round down, 5-9 â†’ round up",
                example: "4,567 â†’ 4,600 (tens digit 6 â‰¥ 5)"
            },
            {
                place: "Nearest Thousand",
                rule: "Look at hundreds digit: 0-4 â†’ round down, 5-9 â†’ round up",
                example: "4,567 â†’ 5,000 (hundreds digit 5 â‰¥ 5)"
            },
            {
                place: "Nearest Ten Thousand",
                rule: "Look at thousands digit: 0-4 â†’ round down, 5-9 â†’ round up",
                example: "456,789 â†’ 460,000 (thousands digit 6 â‰¥ 5)"
            },
            {
                place: "Nearest Hundred Thousand",
                rule: "Look at ten thousands digit: 0-4 â†’ round down, 5-9 â†’ round up",
                example: "4,567,890 â†’ 4,600,000 (ten thousands digit 6 â‰¥ 5)"
            },
            {
                place: "Nearest Million",
                rule: "Look at hundred thousands digit: 0-4 â†’ round down, 5-9 â†’ round up",
                example: "4,567,890 â†’ 5,000,000 (hundred thousands digit 5 â‰¥ 5)"
            }
        ];

        // Number patterns
        const numberPatterns = [
            {pattern: "Add 10 each time", example: "1,234,560 â†’ 1,234,570 â†’ 1,234,580"},
            {pattern: "Add 100 each time", example: "1,234,500 â†’ 1,234,600 â†’ 1,234,700"},
            {pattern: "Add 1,000 each time", example: "1,234,000 â†’ 1,235,000 â†’ 1,236,000"},
            {pattern: "Subtract 10,000 each time", example: "1,240,000 â†’ 1,230,000 â†’ 1,220,000"},
            {pattern: "Multiply by 10 each time", example: "100,000 â†’ 1,000,000 â†’ 10,000,000"}
        ];

        // Large numbers examples
        const largeNumbers = [
            {number: "1,000,000", name: "One Million", facts: ["Smallest 7-digit number", "1,000 thousands"]},
            {number: "5,000,000", name: "Five Million", facts: ["Half of ten million", "5,000 thousands"]},
            {number: "9,876,543", name: "Nine Million...", facts: ["Descending digits", "All different digits"]},
            {number: "10,000,000", name: "Ten Million", facts: ["Smallest 8-digit number", "10 million = 10,000 thousands"]}
        ];

        // Interesting math facts
        const mathFacts = [
            "One million seconds is about 11.5 days, while one billion seconds is about 31.7 years!",
            "The number 1,234,567 is interesting because it uses consecutive digits in order!",
            "Place value system we use is called Hindu-Arabic numeral system, invented in India around 500 AD!",
            "Roman numerals don't have a place value system - that's why they're harder to use for calculations!",
            "The word 'million' comes from Italian 'millione' meaning 'great thousand'!",
            "In some countries, a billion means a million millions (1,000,000,000,000), not a thousand millions!",
            "The largest named number is 'googol' - that's 1 followed by 100 zeros (10Â¹â°â°)!",
            "Zero is essential in place value - without it, we couldn't write numbers like 1,000,000 properly!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathFact = document.getElementById('mathFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6MathNumbers');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6MathNumbers', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6MathNumbers_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6MathNumbers_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a number expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent number sense!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning to become a math master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review number concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Number sense is fundamental to mathematics!";
            }
        }

        // Create math fact display
        function createMathFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'math-fact';
            
            factDiv.innerHTML = `<strong>Amazing Math Fact:</strong> ${mathFacts[Math.floor(Math.random() * mathFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "place_value_basics": "ðŸ·ï¸",
                "reading_writing": "ðŸ“",
                "comparing": "âš–ï¸",
                "rounding": "ðŸ”¢",
                "patterns": "ðŸ”„",
                "expanded_form": "ðŸ“Š",
                "relationships": "ðŸ”—",
                "word_problems": "ðŸ“š",
                "advanced": "ðŸ§ ",
                "mixed": "ðŸŽ¯"
            };
            
            let conceptName = "Place Value Basics";
            let conceptIcon = "ðŸ·ï¸";
            
            if (question.type.includes("place_value_basics")) {
                conceptName = "Place Value Basics";
                conceptIcon = conceptIcons.place_value_basics;
            } else if (question.type.includes("reading_writing")) {
                conceptName = "Reading & Writing Numbers";
                conceptIcon = conceptIcons.reading_writing;
            } else if (question.type.includes("comparing")) {
                conceptName = "Comparing Numbers";
                conceptIcon = conceptIcons.comparing;
            } else if (question.type.includes("rounding")) {
                conceptName = "Rounding Numbers";
                conceptIcon = conceptIcons.rounding;
            } else if (question.type.includes("patterns")) {
                conceptName = "Number Patterns";
                conceptIcon = conceptIcons.patterns;
            } else if (question.type.includes("expanded_form")) {
                conceptName = "Expanded Form";
                conceptIcon = conceptIcons.expanded_form;
            } else if (question.type.includes("relationships")) {
                conceptName = "Number Relationships";
                conceptIcon = conceptIcons.relationships;
            } else if (question.type.includes("word_problems")) {
                conceptName = "Word Problems";
                conceptIcon = conceptIcons.word_problems;
            } else if (question.type.includes("advanced")) {
                conceptName = "Advanced Concepts";
                conceptIcon = conceptIcons.advanced;
            } else if (question.type.includes("mixed")) {
                conceptName = "Mixed Practice";
                conceptIcon = conceptIcons.mixed;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("place_value_basics")) {
                label.textContent = "Understanding digit positions and their values up to millions";
            } else if (question.type.includes("reading_writing")) {
                label.textContent = "Converting between standard, word, and expanded forms";
            } else if (question.type.includes("comparing")) {
                label.textContent = "Using >, <, = to compare large numbers";
            } else if (question.type.includes("rounding")) {
                label.textContent = "Rounding numbers to nearest ten, hundred, thousand, etc.";
            } else if (question.type.includes("patterns")) {
                label.textContent = "Identifying and continuing number patterns";
            } else if (question.type.includes("expanded_form")) {
                label.textContent = "Writing numbers as sums of place values";
            } else if (question.type.includes("relationships")) {
                label.textContent = "Understanding relationships between place values";
            } else if (question.type.includes("word_problems")) {
                label.textContent = "Applying number concepts to real-world situations";
            } else if (question.type.includes("advanced")) {
                label.textContent = "Complex place value concepts and relationships";
            } else if (question.type.includes("mixed")) {
                label.textContent = "Mixed review of all number concepts";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create number visualization
        function createNumberVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            // Generate a random large number for display
            const exampleNumber = generateLargeNumber();
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-purple);">Number and Place Value Up to Millions</h3>
                
                <div class="place-value-chart">
                    <div class="chart-title">Place Value Chart - Understanding ${formatNumberWithCommas(exampleNumber)}</div>
                    <div class="chart-container" id="placeValueChart">
                        <!-- Place value columns will be generated by JavaScript -->
                    </div>
                    <div style="text-align: center; margin-top: 20px; color: var(--text-secondary);">
                        <strong>Number in words:</strong> ${numberToWords(exampleNumber)}
                    </div>
                </div>
                
                <div class="representation-grid">
                    ${numberRepresentations.map(rep => `
                        <div class="representation-card ${rep.type.toLowerCase().replace(' ', '-')} number-glow" style="animation-delay: ${Math.random() * 2}s">
                            <div class="rep-icon">${getRepresentationIcon(rep.type)}</div>
                            <div class="rep-title">${rep.type}</div>
                            <div class="rep-example">${getRepresentationExample(exampleNumber, rep.type)}</div>
                            <div class="rep-description">${rep.description}</div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="comparison-display">
                    <div class="comparison-title">Comparing Large Numbers</div>
                    <div class="comparison-numbers">
                        <div class="number-box greater">
                            <div class="number-value">${comparisonExamples[0].numbers[1]}</div>
                            <div class="number-label">Greater Number</div>
                        </div>
                        <div class="comparison-symbol">${comparisonExamples[0].result}</div>
                        <div class="number-box lesser">
                            <div class="number-value">${comparisonExamples[0].numbers[0]}</div>
                            <div class="number-label">Lesser Number</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: var(--text-secondary);">
                        <strong>Reason:</strong> ${comparisonExamples[0].reason}<br>
                        <em>Compare digits from left to right until you find a difference</em>
                    </div>
                </div>
                
                <div class="rounding-display">
                    <div class="rounding-title">Rounding Numbers</div>
                    <div class="rounding-steps">
                        ${roundingRules.slice(0, 3).map((rule, index) => `
                            <div class="rounding-step">
                                <span class="step-number">${index + 1}</span>
                                <span class="step-description"><strong>${rule.place}:</strong> ${rule.rule}</span>
                                <div class="step-example">Example: ${rule.example}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="number-line-container">
                    <div class="number-line-title">Number Line: 1,000,000 to 1,000,100</div>
                    <div class="number-line" id="numberLine">
                        <!-- Number line will be generated by JavaScript -->
                    </div>
                    <div style="text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                        Number lines help visualize the relative size of numbers
                    </div>
                </div>
                
                <table class="numbers-table">
                    <thead>
                        <tr>
                            <th>Number</th>
                            <th>Name</th>
                            <th>Interesting Facts</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${largeNumbers.map(num => `
                            <tr>
                                <td style="font-weight: bold; color: var(--accent-teal);">${num.number}</td>
                                <td>${num.name}</td>
                                <td style="font-size: 0.9rem;">${num.facts.join('; ')}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="interactive-practice">
                    <div class="practice-title">Interactive Number Practice</div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="showPlaceValueDemo()">Place Value</div>
                        <div class="practice-button" onclick="showRoundingDemo()">Rounding</div>
                        <div class="practice-button" onclick="showComparisonDemo()">Comparison</div>
                        <div class="practice-button" onclick="showExpandedFormDemo()">Expanded Form</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice different number skills
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Practice:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. What is the value of 4 in 4,567,890?<br>
                        2. Write 3,045,600 in words<br>
                        3. Compare: 2,345,678 â—‹ 2,345,768<br>
                        4. Round 7,654,321 to nearest hundred thousand
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-teal);">
                    <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Place Value Memory Tip</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Remember:</strong> Ones, Tens, Hundreds (comma) Thousands, Ten Thousands, Hundred Thousands (comma) Millions<br>
                        <em>Each group of three digits is called a "period"</em>
                    </div>
                </div>
            `;
            
            // Generate place value chart
            generatePlaceValueChart(exampleNumber);
            
            // Generate number line
            generateNumberLine();
            
            return vizDiv;
        }

        // Helper functions
        function generateLargeNumber() {
            // Generate a random number between 1,000,000 and 9,999,999
            return Math.floor(1000000 + Math.random() * 9000000);
        }

        function formatNumberWithCommas(number) {
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        function numberToWords(number) {
            const numStr = number.toString();
            if (numStr.length === 7) {
                const millions = parseInt(numStr[0]);
                const thousands = parseInt(numStr.substring(1, 4));
                const rest = parseInt(numStr.substring(4));
                
                let words = `${millions} million`;
                if (thousands > 0) words += `, ${thousands} thousand`;
                if (rest > 0) words += `, ${rest}`;
                return words;
            }
            return formatNumberWithCommas(number);
        }

        function getRepresentationIcon(type) {
            const icons = {
                "Standard Form": "ðŸ”¢",
                "Expanded Form": "ðŸ“Š",
                "Word Form": "ðŸ“"
            };
            return icons[type] || "ðŸ”¢";
        }

        function getRepresentationExample(number, type) {
            const numStr = number.toString();
            if (type === "Standard Form") {
                return formatNumberWithCommas(number);
            } else if (type === "Expanded Form") {
                // Simple expanded form for demonstration
                const millions = Math.floor(number / 1000000) * 1000000;
                const hundredThousands = Math.floor((number % 1000000) / 100000) * 100000;
                const tenThousands = Math.floor((number % 100000) / 10000) * 10000;
                const thousands = Math.floor((number % 10000) / 1000) * 1000;
                const hundreds = Math.floor((number % 1000) / 100) * 100;
                const tens = Math.floor((number % 100) / 10) * 10;
                const ones = number % 10;
                
                let parts = [];
                if (millions > 0) parts.push(`${millions.toLocaleString()}`);
                if (hundredThousands > 0) parts.push(`${hundredThousands.toLocaleString()}`);
                if (tenThousands > 0) parts.push(`${tenThousands.toLocaleString()}`);
                if (thousands > 0) parts.push(`${thousands.toLocaleString()}`);
                if (hundreds > 0) parts.push(`${hundreds}`);
                if (tens > 0) parts.push(`${tens}`);
                if (ones > 0) parts.push(`${ones}`);
                
                return parts.join(" + ");
            } else if (type === "Word Form") {
                return numberToWords(number);
            }
            return "";
        }

        function generatePlaceValueChart(number) {
            const chart = document.getElementById('placeValueChart');
            if (!chart) return;
            
            const numStr = number.toString().padStart(7, '0'); // Ensure 7 digits
            const places = ["Millions", "Hundred Thousands", "Ten Thousands", "Thousands", "Hundreds", "Tens", "Ones"];
            
            chart.innerHTML = places.map((place, index) => {
                const digit = numStr[index];
                const isMillions = place === "Millions";
                return `
                    <div class="place-column ${isMillions ? 'millions' : ''}">
                        <div class="place-header">${place}</div>
                        <div class="place-value digit-rotate" style="animation-delay: ${index * 0.1}s">${digit}</div>
                    </div>
                `;
            }).join('');
        }

        function generateNumberLine() {
            const line = document.getElementById('numberLine');
            if (!line) return;
            
            // Create a number line from 1,000,000 to 1,000,100
            line.innerHTML = '<div class="line"></div>';
            
            // Add ticks and labels
            for (let i = 0; i <= 10; i++) {
                const value = 1000000 + i * 10;
                const position = (i * 10) + '%';
                
                const tick = document.createElement('div');
                tick.className = 'tick';
                tick.style.left = position;
                line.appendChild(tick);
                
                const label = document.createElement('div');
                label.className = 'tick-label';
                label.style.left = position;
                label.textContent = formatNumberWithCommas(value);
                line.appendChild(label);
            }
            
            // Add a random marker
            const randomValue = 1000000 + Math.floor(Math.random() * 101);
            const markerPosition = ((randomValue - 1000000) / 100) * 10 + '%';
            
            const marker = document.createElement('div');
            marker.className = 'marker';
            marker.style.left = markerPosition;
            line.appendChild(marker);
            
            const markerLabel = document.createElement('div');
            markerLabel.className = 'marker-label';
            markerLabel.style.left = markerPosition;
            markerLabel.textContent = formatNumberWithCommas(randomValue);
            line.appendChild(markerLabel);
        }

        // Global functions for interactive practice
        window.showPlaceValueDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const number = generateLargeNumber();
            const numStr = number.toString();
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 2rem; margin-bottom: 10px; color: var(--primary-purple);">${formatNumberWithCommas(number)}</div>
                    <div style="margin-bottom: 15px; font-size: 1.1rem;">Identify the place value of each digit:</div>
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 15px;">
                        ${numStr.split('').map((digit, index) => {
                            const places = ["Millions", "Hundred Thousands", "Ten Thousands", "Thousands", "Hundreds", "Tens", "Ones"];
                            const place = places[index];
                            const value = parseInt(digit) * Math.pow(10, 6 - index);
                            return `
                                <div style="background: var(--dark-card); padding: 10px; border-radius: 8px; min-width: 100px; text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--accent-teal);">${digit}</div>
                                    <div style="font-size: 0.9rem; color: var(--text-secondary);">${place}</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">= ${value.toLocaleString()}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        };

        window.showRoundingDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const number = generateLargeNumber();
            const roundTo = ["hundred", "thousand", "ten thousand", "hundred thousand"][Math.floor(Math.random() * 4)];
            
            let rounded;
            switch(roundTo) {
                case "hundred":
                    rounded = Math.round(number / 100) * 100;
                    break;
                case "thousand":
                    rounded = Math.round(number / 1000) * 1000;
                    break;
                case "ten thousand":
                    rounded = Math.round(number / 10000) * 10000;
                    break;
                case "hundred thousand":
                    rounded = Math.round(number / 100000) * 100000;
                    break;
            }
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-orange);">Rounding Practice</div>
                    <div style="margin-bottom: 15px;">
                        <strong>Original Number:</strong> ${formatNumberWithCommas(number)}<br>
                        <strong>Round to nearest ${roundTo}:</strong>
                    </div>
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin-top: 15px;">
                        <div style="font-size: 2rem; font-weight: bold; color: var(--accent-green);">
                            ${formatNumberWithCommas(rounded)}
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9rem; color: var(--text-secondary);">
                            <strong>Rule:</strong> Look at digit to right of ${roundTo} place<br>
                            If it's 5 or more, round up; if less than 5, round down
                        </div>
                    </div>
                </div>
            `;
        };

        window.showComparisonDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const num1 = generateLargeNumber();
            const num2 = generateLargeNumber();
            const symbol = num1 > num2 ? ">" : num1 < num2 ? "<" : "=";
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-green);">Comparing Numbers</div>
                    <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin: 20px 0;">
                        <div style="background: ${num1 > num2 ? 'rgba(76, 175, 80, 0.1)' : 'rgba(244, 67, 54, 0.1)'}; padding: 15px; border-radius: 8px; border: 2px solid ${num1 > num2 ? 'var(--accent-green)' : 'var(--accent-red)'};">
                            <div style="font-size: 1.8rem; font-weight: bold;">${formatNumberWithCommas(num1)}</div>
                        </div>
                        <div style="font-size: 3rem; color: var(--accent-orange); font-weight: bold;">${symbol}</div>
                        <div style="background: ${num2 > num1 ? 'rgba(76, 175, 80, 0.1)' : 'rgba(244, 67, 54, 0.1)'}; padding: 15px; border-radius: 8px; border: 2px solid ${num2 > num1 ? 'var(--accent-green)' : 'var(--accent-red)'};">
                            <div style="font-size: 1.8rem; font-weight: bold;">${formatNumberWithCommas(num2)}</div>
                        </div>
                    </div>
                    <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong>How to compare:</strong><br>
                        1. Start with the leftmost digit (millions place)<br>
                        2. If digits are equal, move to next place<br>
                        3. Continue until you find different digits<br>
                        4. The number with larger digit is greater
                    </div>
                </div>
            `;
        };

        window.showExpandedFormDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const number = generateLargeNumber();
            const expanded = getRepresentationExample(number, "Expanded Form");
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-teal);">Expanded Form</div>
                    <div style="margin-bottom: 15px;">
                        <strong>Standard Form:</strong><br>
                        <div style="font-size: 2rem; font-weight: bold; color: var(--primary-purple); margin: 10px 0;">
                            ${formatNumberWithCommas(number)}
                        </div>
                        <strong>Expanded Form:</strong>
                    </div>
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin-top: 15px;">
                        <div style="font-size: 1.2rem; color: var(--accent-teal); font-family: monospace;">
                            ${expanded}
                        </div>
                        <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                            <strong>Each digit Ã— its place value</strong><br>
                            Example: In 456, the 4 means 4 Ã— 100 = 400
                        </div>
                    </div>
                </div>
            `;
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathFact.appendChild(createMathFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createNumberVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
