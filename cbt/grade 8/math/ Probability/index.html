<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Math - Probability | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Probability Theme */
        :root {
            --primary-blue: #2196F3;
            --primary-red: #F44336;
            --primary-green: #4CAF50;
            --primary-purple: #9C27B0;
            --accent-yellow: #FFC107;
            --accent-teal: #009688;
            --accent-orange: #FF9800;
            --accent-pink: #E91E63;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --probability-glow: 0 0 20px rgba(156, 39, 176, 0.4);
            --experimental-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --theoretical-glow: 0 0 20px rgba(76, 175, 80, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(156, 39, 176, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-yellow), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-purple);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-primary:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-secondary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-secondary:hover {
            background: #0b7dda;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-success {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-success:hover {
            background: #3d8b40;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-purple);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Probability Types Grid */
        .probability-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .probability-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .probability-grid {
                grid-template-columns: 1fr;
            }
        }

        .type-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .type-card.simple {
            border-color: var(--primary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .type-card.experimental {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .type-card.theoretical {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .type-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .type-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .type-card.simple .type-title {
            color: var(--primary-purple);
        }

        .type-card.experimental .type-title {
            color: var(--primary-blue);
        }

        .type-card.theoretical .type-title {
            color: var(--primary-green);
        }

        .type-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .type-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-purple), var(--primary-blue), var(--primary-green));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .probability-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--accent-teal);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
        }

        .option.incorrect .option-letter {
            background: #F44336;
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Simple Events Visualizer */
        .simple-events-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .visualizer-title {
            color: var(--primary-purple);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .probability-display {
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }

        .probability-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        /* Coin and Dice Visualizers */
        .coin-container, .dice-container, .spinner-container {
            width: 100%;
            height: 150px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .coin {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(145deg, #FFC107, #FF9800);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.5s ease;
            box-shadow: 0 0 15px rgba(255, 193, 7, 0.3);
        }

        .coin.flipping {
            animation: flip 0.5s ease;
        }

        @keyframes flip {
            0% { transform: rotateY(0); }
            50% { transform: rotateY(180deg); }
            100% { transform: rotateY(0); }
        }

        .dice {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: black;
            cursor: pointer;
            transition: transform 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .dice.rolling {
            animation: roll 0.5s ease;
        }

        @keyframes roll {
            0% { transform: rotate(0); }
            50% { transform: rotate(180deg); }
            100% { transform: rotate(360deg); }
        }

        .spinner {
            width: 120px;
            height: 120px;
            position: relative;
        }

        .spinner-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary-purple) 0deg 60deg,
                var(--primary-blue) 60deg 120deg,
                var(--primary-green) 120deg 180deg,
                var(--accent-yellow) 180deg 240deg,
                var(--accent-orange) 240deg 300deg,
                var(--accent-pink) 300deg 360deg
            );
            transition: transform 2s ease-out;
        }

        .spinner-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 20px solid var(--accent-red);
        }

        /* Experimental Probability */
        .experimental-probability {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .experiment-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .trial {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            animation: float 2s ease;
        }

        @keyframes float {
            0% { transform: translateY(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }

        .results-display {
            background: var(--dark-surface);
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
        }

        /* Theoretical Probability */
        .theoretical-probability {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .outcomes-container {
            width: 100%;
            min-height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            padding: 10px;
        }

        .outcome {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            background: var(--dark-surface);
            border-radius: 4px;
            border: 1px solid var(--dark-border);
            font-size: 0.9rem;
        }

        .outcome.favorable {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--primary-green);
        }

        /* Comparison Tables */
        .comparison-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        .comparison-tables {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .comparison-tables {
                grid-template-columns: 1fr;
            }
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-card);
            padding: 10px;
            text-align: left;
            color: var(--accent-yellow);
            border-bottom: 2px solid var(--accent-yellow);
        }

        .comparison-table td {
            padding: 8px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        /* Sample Space */
        .sample-space {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-orange);
        }

        .space-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        /* Probability Calculator */
        .tools-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .tool-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        .formula-display {
            background: rgba(156, 39, 176, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-purple);
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            text-align: center;
        }

        /* Calculator Interface */
        .calculator-interface {
            background: var(--dark-surface);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .calc-input {
            width: 100%;
            padding: 10px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 5px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 10px;
        }

        .calc-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            margin-bottom: 5px;
        }

        .calc-btn {
            padding: 10px;
            background: var(--dark-card);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            color: var(--text-primary);
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
            font-weight: bold;
        }

        .calc-btn:hover {
            background: var(--primary-purple);
        }

        .calc-btn.operator {
            background: rgba(156, 39, 176, 0.2);
        }

        .calc-btn.equals {
            background: var(--primary-green);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-yellow), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-yellow), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .probability-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .comparison-tables {
                grid-template-columns: 1fr;
            }
            
            .tool-buttons {
                grid-template-columns: 1fr;
            }
            
            .calc-row {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Math: Probability</h1>
            <p class="welcome-subtitle">Discover the mathematics of chance! Learn how to calculate probabilities, understand the difference between experimental and theoretical probability, and apply probability to real-world situations from games to weather forecasting.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üé≤üìäüéØ</span>
                <span class="topic-name">Probability: Simple Events, Experimental vs Theoretical</span>
            </div>
            
            <div class="probability-grid">
                <div class="type-card simple" onclick="showProbabilityType('simple')">
                    <div class="type-icon">üéØ</div>
                    <h3 class="type-title">Simple Events</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Single outcomes in probability experiments</p>
                    <div class="type-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>P(event) = favorable/total</li>
                            <li>Sample space</li>
                            <li>0 ‚â§ P ‚â§ 1</li>
                            <li>Coin flips, dice rolls</li>
                        </ul>
                    </div>
                </div>
                
                <div class="type-card experimental" onclick="showProbabilityType('experimental')">
                    <div class="type-icon">üî¨</div>
                    <h3 class="type-title">Experimental Probability</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Probability based on actual trials</p>
                    <div class="type-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>P = successes/trials</li>
                            <li>Based on data</li>
                            <li>Law of Large Numbers</li>
                            <li>Real experiments</li>
                        </ul>
                    </div>
                </div>
                
                <div class="type-card theoretical" onclick="showProbabilityType('theoretical')">
                    <div class="type-icon">üìê</div>
                    <h3 class="type-title">Theoretical Probability</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Probability based on reasoning</p>
                    <div class="type-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>P = favorable/possible</li>
                            <li>Based on logic</li>
                            <li>Expected outcomes</li>
                            <li>Perfect conditions</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üé≤ Begin Probability Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="probabilityTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <div class="simple-events-visualizer">
                        <div class="visualizer-title">Simple Events Probability</div>
                        
                        <div class="coin-container">
                            <div class="coin" id="coin" onclick="flipCoin()">H</div>
                        </div>
                        <div style="text-align: center; margin: 10px 0;">
                            <button class="btn btn-small btn-secondary" onclick="flipCoin()">Flip Coin</button>
                            <button class="btn btn-small btn-secondary" onclick="simulateCoinFlips(10)">10 Flips</button>
                            <button class="btn btn-small btn-secondary" onclick="simulateCoinFlips(100)">100 Flips</button>
                        </div>
                        
                        <div class="dice-container">
                            <div class="dice" id="dice" onclick="rollDice()">1</div>
                        </div>
                        <div style="text-align: center; margin: 10px 0;">
                            <button class="btn btn-small btn-secondary" onclick="rollDice()">Roll Dice</button>
                            <button class="btn btn-small btn-secondary" onclick="simulateDiceRolls(10)">10 Rolls</button>
                            <button class="btn btn-small btn-secondary" onclick="showDiceProbability()">Dice Probabilities</button>
                        </div>
                        
                        <div class="spinner-container">
                            <div class="spinner">
                                <div class="spinner-wheel" id="spinnerWheel"></div>
                                <div class="spinner-pointer"></div>
                            </div>
                        </div>
                        <div style="text-align: center; margin: 10px 0;">
                            <button class="btn btn-small btn-secondary" onclick="spinWheel()">Spin Wheel</button>
                            <button class="btn btn-small btn-secondary" onclick="showSpinnerProbability()">Wheel Probabilities</button>
                        </div>
                    </div>
                    
                    <div class="experimental-probability">
                        <div class="visualizer-title">Experimental Probability</div>
                        <div class="experiment-container" id="experimentContainer">
                            <!-- Experimental trials will be generated here -->
                        </div>
                        <div class="results-display" id="experimentResults">
                            <div>Trials: 0</div>
                            <div>Heads: 0 (0%)</div>
                            <div>Tails: 0 (0%)</div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="runExperiment(10)">Run 10 Trials</button>
                            <button class="btn btn-small btn-secondary" onclick="runExperiment(50)">Run 50 Trials</button>
                            <button class="btn btn-small btn-secondary" onclick="clearExperiment()">Clear</button>
                        </div>
                    </div>
                    
                    <div class="theoretical-probability">
                        <div class="visualizer-title">Theoretical Probability</div>
                        <div class="outcomes-container" id="outcomesContainer">
                            <!-- Outcomes will be displayed here -->
                        </div>
                        <div class="probability-display" id="theoreticalDisplay">
                            P(event) = favorable outcomes √∑ total outcomes
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showTheoreticalExample('coin')">Coin Example</button>
                            <button class="btn btn-small btn-secondary" onclick="showTheoreticalExample('dice')">Dice Example</button>
                            <button class="btn btn-small btn-secondary" onclick="showTheoreticalExample('cards')">Cards Example</button>
                        </div>
                    </div>
                    
                    <div class="comparison-section">
                        <div class="visualizer-title">Experimental vs Theoretical</div>
                        <div class="comparison-tables">
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Experimental Probability</th>
                                        <th>Key Features</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showComparisonDetail('exp_based')" style="cursor: pointer;">
                                        <td>Based on</td>
                                        <td>Actual experiments/data</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('exp_formula')" style="cursor: pointer;">
                                        <td>Formula</td>
                                        <td>P = (successes) √∑ (trials)</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('exp_when')" style="cursor: pointer;">
                                        <td>When used</td>
                                        <td>Real-world, unknown probabilities</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Theoretical Probability</th>
                                        <th>Key Features</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showComparisonDetail('theo_based')" style="cursor: pointer;">
                                        <td>Based on</td>
                                        <td>Logic/mathematics</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('theo_formula')" style="cursor: pointer;">
                                        <td>Formula</td>
                                        <td>P = (favorable) √∑ (possible)</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('theo_when')" style="cursor: pointer;">
                                        <td>When used</td>
                                        <td>Fair objects, known outcomes</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Probability Scale</th>
                                        <th>Meaning</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showComparisonDetail('scale_0')" style="cursor: pointer;">
                                        <td>0</td>
                                        <td>Impossible event</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('scale_05')" style="cursor: pointer;">
                                        <td>0.5 or ¬Ω</td>
                                        <td>Even chance</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('scale_1')" style="cursor: pointer;">
                                        <td>1</td>
                                        <td>Certain event</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="sample-space">
                        <div class="visualizer-title">Sample Space Visualizer</div>
                        <div class="space-container" id="spaceContainer">
                            <!-- Sample space will be visualized here -->
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showSampleSpace('two_coins')">Two Coins</button>
                            <button class="btn btn-small btn-secondary" onclick="showSampleSpace('two_dice')">Two Dice</button>
                            <button class="btn btn-small btn-secondary" onclick="showSampleSpace('coin_dice')">Coin & Dice</button>
                        </div>
                    </div>
                    
                    <div class="tools-section">
                        <div class="visualizer-title">Probability Calculator</div>
                        <div class="calculator-interface">
                            <input type="text" class="calc-input" id="probabilityInput" placeholder="Enter probability (e.g., 3/6 or 0.5)" readonly>
                            <div class="calc-row">
                                <div class="calc-btn" onclick="addToCalc('7')">7</div>
                                <div class="calc-btn" onclick="addToCalc('8')">8</div>
                                <div class="calc-btn" onclick="addToCalc('9')">9</div>
                                <div class="calc-btn operator" onclick="addToCalc('+')">+</div>
                            </div>
                            <div class="calc-row">
                                <div class="calc-btn" onclick="addToCalc('4')">4</div>
                                <div class="calc-btn" onclick="addToCalc('5')">5</div>
                                <div class="calc-btn" onclick="addToCalc('6')">6</div>
                                <div class="calc-btn operator" onclick="addToCalc('/')">√∑</div>
                            </div>
                            <div class="calc-row">
                                <div class="calc-btn" onclick="addToCalc('1')">1</div>
                                <div class="calc-btn" onclick="addToCalc('2')">2</div>
                                <div class="calc-btn" onclick="addToCalc('3')">3</div>
                                <div class="calc-btn operator" onclick="addToCalc('(')">(</div>
                            </div>
                            <div class="calc-row">
                                <div class="calc-btn" onclick="addToCalc('0')">0</div>
                                <div class="calc-btn" onclick="addToCalc('.')">.</div>
                                <div class="calc-btn" onclick="addToCalc(')')">)</div>
                                <div class="calc-btn operator" onclick="addToCalc('%')">%</div>
                            </div>
                            <div class="calc-row">
                                <div class="calc-btn" onclick="clearCalc()">C</div>
                                <div class="calc-btn" onclick="addToCalc('f/')">f/</div>
                                <div class="calc-btn" onclick="addToCalc('t/')">t/</div>
                                <div class="calc-btn equals" onclick="calculateProbability()">=</div>
                            </div>
                        </div>
                        <div class="tool-buttons">
                            <button class="btn btn-small btn-secondary" onclick="showFormula('basic')">Basic Formulas</button>
                            <button class="btn btn-small btn-secondary" onclick="showFormula('scale')">Probability Scale</button>
                            <button class="btn btn-small btn-secondary" onclick="showFormula('conversions')">Conversions</button>
                            <button class="btn btn-small btn-secondary" onclick="showRealWorld()">Real World Uses</button>
                        </div>
                        <div id="formulaDisplay" class="formula-display" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Probability Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Probability
        const questions = [
            {
                question: "What is the probability of flipping a fair coin and getting heads?",
                options: ["¬Ω or 0.5", "¬º or 0.25", "1", "0"],
                answer: "A",
                explanation: "A fair coin has 2 equally likely outcomes: heads or tails. P(heads) = favorable outcomes √∑ total outcomes = 1 √∑ 2 = ¬Ω = 0.5"
            },
            {
                question: "What is the probability of rolling a 6 on a fair 6-sided die?",
                options: ["‚Öô or about 0.167", "¬Ω or 0.5", "1", "‚Öì or 0.333"],
                answer: "A",
                explanation: "A fair die has 6 equally likely outcomes. P(6) = favorable outcomes √∑ total outcomes = 1 √∑ 6 = ‚Öô ‚âà 0.167"
            },
            {
                question: "Which of these is an example of experimental probability?",
                options: ["Flipping a coin 100 times and counting 47 heads", "Calculating that a die should show 3 one-sixth of the time", "Knowing a coin has 2 sides", "Theoretically, a spinner has equal sections"],
                answer: "A",
                explanation: "Experimental probability is based on actual trials/experiments. Flipping a coin and recording results is experimental."
            },
            {
                question: "If you flip a coin 20 times and get 12 heads, what is the experimental probability of heads?",
                options: ["12/20 = 0.6", "¬Ω = 0.5", "8/20 = 0.4", "1"],
                answer: "A",
                explanation: "Experimental probability = successes √∑ trials = 12 heads √∑ 20 flips = 12/20 = 3/5 = 0.6"
            },
            {
                question: "What is the theoretical probability of drawing a heart from a standard deck of 52 cards?",
                options: ["13/52 = ¬º = 0.25", "1/52 ‚âà 0.019", "4/52 ‚âà 0.077", "26/52 = 0.5"],
                answer: "A",
                explanation: "A standard deck has 52 cards with 4 suits. Hearts = 13 cards. P(heart) = 13 √∑ 52 = ¬º = 0.25"
            },
            {
                question: "Which number represents a certain event?",
                options: ["1", "0", "0.5", "0.25"],
                answer: "A",
                explanation: "Probability ranges from 0 to 1. 0 = impossible, 1 = certain, 0.5 = even chance."
            },
            {
                question: "A spinner has 4 equal sections: red, blue, green, yellow. What is P(red)?",
                options: ["¬º = 0.25", "¬Ω = 0.5", "‚Öì ‚âà 0.333", "1"],
                answer: "A",
                explanation: "4 equal sections means each has probability 1 √∑ 4 = ¬º = 0.25"
            },
            {
                question: "What is the sample space when rolling a 6-sided die?",
                options: ["{1, 2, 3, 4, 5, 6}", "{heads, tails}", "{1, 2, 3, 4, 5}", "{even, odd}"],
                answer: "A",
                explanation: "Sample space is all possible outcomes. For a 6-sided die: {1, 2, 3, 4, 5, 6}"
            },
            {
                question: "If P(event) = 0, what does this mean?",
                options: ["The event is impossible", "The event is certain", "The event is likely", "The event is unlikely"],
                answer: "A",
                explanation: "Probability = 0 means the event cannot happen (impossible event)."
            },
            {
                question: "You roll a die 60 times and get 10 sixes. What is the experimental probability of rolling a six?",
                options: ["10/60 = ‚Öô ‚âà 0.167", "1/6 ‚âà 0.167", "50/60 ‚âà 0.833", "1"],
                answer: "A",
                explanation: "Experimental P(six) = number of sixes √∑ total rolls = 10 √∑ 60 = ‚Öô ‚âà 0.167"
            },
            {
                question: "What is the probability of rolling an even number on a fair 6-sided die?",
                options: ["3/6 = ¬Ω = 0.5", "2/6 = ‚Öì ‚âà 0.333", "1/6 ‚âà 0.167", "4/6 = ‚Öî ‚âà 0.667"],
                answer: "A",
                explanation: "Even numbers on a die: 2, 4, 6 (3 outcomes). P(even) = 3 √∑ 6 = ¬Ω = 0.5"
            },
            {
                question: "Which shows experimental probability getting closer to theoretical probability?",
                options: ["Law of Large Numbers", "Sample space", "Certainty", "Impossibility"],
                answer: "A",
                explanation: "Law of Large Numbers: As number of trials increases, experimental probability approaches theoretical probability."
            },
            {
                question: "What is the probability of flipping two coins and getting two heads?",
                options: ["¬º = 0.25", "¬Ω = 0.5", "‚Öì ‚âà 0.333", "1"],
                answer: "A",
                explanation: "Sample space for two coins: {HH, HT, TH, TT}. P(HH) = 1 favorable √∑ 4 total = ¬º = 0.25"
            },
            {
                question: "A bag has 3 red, 2 blue, and 5 green marbles. What is P(red)?",
                options: ["3/10 = 0.3", "2/10 = 0.2", "5/10 = 0.5", "3/5 = 0.6"],
                answer: "A",
                explanation: "Total marbles = 3+2+5 = 10. Red marbles = 3. P(red) = 3 √∑ 10 = 0.3"
            },
            {
                question: "What is the theoretical probability for a fair coin?",
                options: ["P(heads) = 0.5, P(tails) = 0.5", "P(heads) = 1, P(tails) = 0", "P(heads) = 0.25, P(tails) = 0.75", "It depends on the experiment"],
                answer: "A",
                explanation: "Theoretically, a fair coin has equal probability for heads and tails: 0.5 each."
            },
            {
                question: "If you draw a card from a deck, what is P(face card: Jack, Queen, King)?",
                options: ["12/52 = 3/13 ‚âà 0.231", "4/52 = 1/13 ‚âà 0.077", "16/52 = 4/13 ‚âà 0.308", "13/52 = ¬º = 0.25"],
                answer: "A",
                explanation: "Each suit has 3 face cards (J, Q, K) √ó 4 suits = 12 face cards. P(face) = 12 √∑ 52 = 3/13 ‚âà 0.231"
            },
            {
                question: "What does a probability of 0.75 mean?",
                options: ["75% chance, likely to happen", "25% chance, unlikely", "Certain to happen", "Impossible"],
                answer: "A",
                explanation: "0.75 = 75%. This means the event is likely to happen (3 out of 4 times on average)."
            },
            {
                question: "You spin a spinner 200 times. It lands on red 50 times. What is the experimental P(red)?",
                options: ["50/200 = ¬º = 0.25", "150/200 = ¬æ = 0.75", "1/200 = 0.005", "200/50 = 4"],
                answer: "A",
                explanation: "Experimental P(red) = red outcomes √∑ total spins = 50 √∑ 200 = ¬º = 0.25"
            },
            {
                question: "What is P(rolling a number > 4 on a 6-sided die)?",
                options: ["2/6 = ‚Öì ‚âà 0.333", "3/6 = ¬Ω = 0.5", "1/6 ‚âà 0.167", "4/6 = ‚Öî ‚âà 0.667"],
                answer: "A",
                explanation: "Numbers > 4: 5 and 6 (2 outcomes). P(>4) = 2 √∑ 6 = ‚Öì ‚âà 0.333"
            },
            {
                question: "Why might experimental and theoretical probability differ?",
                options: ["Random variation, bias, or small sample size", "Math is wrong", "Theoretical is always wrong", "They should always be equal"],
                answer: "A",
                explanation: "Differences occur due to: 1) Random chance/variation, 2) Bias in experiment, 3) Too few trials"
            },
            {
                question: "What is the probability of an event that always happens?",
                options: ["1", "0", "0.5", "Depends on the situation"],
                answer: "A",
                explanation: "Certain events have probability = 1 (100% chance of occurring)."
            },
            {
                question: "A spinner has 8 equal sections numbered 1-8. What is P(even number)?",
                options: ["4/8 = ¬Ω = 0.5", "3/8 = 0.375", "5/8 = 0.625", "1/8 = 0.125"],
                answer: "A",
                explanation: "Even numbers: 2, 4, 6, 8 (4 outcomes). P(even) = 4 √∑ 8 = ¬Ω = 0.5"
            },
            {
                question: "Convert ‚Öú to a percentage.",
                options: ["37.5%", "38%", "30%", "3.8%"],
                answer: "A",
                explanation: "‚Öú = 0.375 = 37.5%. To convert fraction to percentage: divide numerator by denominator √ó 100."
            },
            {
                question: "What is the sum of probabilities of all possible outcomes?",
                options: ["Always 1", "Always 0", "Depends on the situation", "Always 0.5"],
                answer: "A",
                explanation: "The sum of probabilities of all outcomes in a sample space always equals 1 (100%)."
            },
            {
                question: "Which is a simple event?",
                options: ["Rolling a 3 on a die", "Rolling an even number", "Rolling a number > 2", "Flipping two coins"],
                answer: "A",
                explanation: "Simple event: single outcome. Rolling a 3 is one specific outcome. The others are compound events (multiple outcomes)."
            }
        ];

        // Probability tips
        const probabilityTips = [
            "Remember: Probability = favorable outcomes √∑ total possible outcomes!",
            "Probability always ranges from 0 (impossible) to 1 (certain).",
            "Experimental probability is based on actual trials: P = successes √∑ trials",
            "Theoretical probability is based on reasoning: P = favorable √∑ possible",
            "Law of Large Numbers: More trials ‚Üí experimental P gets closer to theoretical P",
            "Sample space = all possible outcomes. List it carefully!",
            "Convert between fraction, decimal, and percentage: ¬Ω = 0.5 = 50%",
            "For equally likely outcomes, each outcome has probability 1 √∑ (number of outcomes)"
        ];

        // Probability formulas
        const formulas = {
            'basic': {
                title: "Basic Probability Formulas",
                list: [
                    "P(event) = favorable outcomes √∑ total outcomes",
                    "0 ‚â§ P(event) ‚â§ 1",
                    "P(certain) = 1",
                    "P(impossible) = 0",
                    "P(not A) = 1 - P(A)"
                ]
            },
            'scale': {
                title: "Probability Scale",
                list: [
                    "0 = impossible (0%)",
                    "0.25 = unlikely (25%)",
                    "0.5 = even chance (50%)",
                    "0.75 = likely (75%)",
                    "1 = certain (100%)",
                    "Fraction ‚Üî Decimal ‚Üî Percentage"
                ]
            },
            'conversions': {
                title: "Common Conversions",
                list: [
                    "¬Ω = 0.5 = 50%",
                    "‚Öì ‚âà 0.333 = 33.3%",
                    "¬º = 0.25 = 25%",
                    "‚Öï = 0.2 = 20%",
                    "‚Öô ‚âà 0.167 = 16.7%",
                    "‚Öõ = 0.125 = 12.5%",
                    "1/10 = 0.1 = 10%"
                ]
            }
        };

        // Comparison details
        const comparisonDetails = {
            'exp_based': {
                title: "Experimental: Based on Data",
                info: "Experimental probability comes from actually performing an experiment and collecting data. It's what actually happened in real trials."
            },
            'exp_formula': {
                title: "Experimental Formula",
                info: "P(event) = (number of times event occurred) √∑ (total number of trials). Example: Coin showed heads 47 times in 100 flips ‚Üí P(heads) = 47/100 = 0.47"
            },
            'exp_when': {
                title: "When to Use Experimental",
                info: "Use experimental probability when: 1) You don't know theoretical probabilities, 2) You suspect objects aren't fair, 3) For real-world predictions based on data"
            },
            'theo_based': {
                title: "Theoretical: Based on Logic",
                info: "Theoretical probability comes from mathematical reasoning about what should happen under ideal conditions with fair objects."
            },
            'theo_formula': {
                title: "Theoretical Formula",
                info: "P(event) = (number of favorable outcomes) √∑ (total possible outcomes). Example: Fair die ‚Üí P(3) = 1/6 ‚âà 0.167"
            },
            'theo_when': {
                title: "When to Use Theoretical",
                info: "Use theoretical probability when: 1) Objects are fair/balanced, 2) You know all possible outcomes, 3) For predictions before experiments"
            },
            'scale_0': {
                title: "Probability = 0",
                info: "Impossible event. Example: Rolling a 7 on a standard 6-sided die. Will never happen."
            },
            'scale_05': {
                title: "Probability = 0.5",
                info: "Even chance. Example: Heads on a fair coin. Equally likely to happen or not happen."
            },
            'scale_1': {
                title: "Probability = 1",
                info: "Certain event. Example: The sun will rise tomorrow (almost certain). Will always happen."
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            coinFlips: { heads: 0, tails: 0, total: 0 },
            diceRolls: {},
            experimentData: { trials: 0, heads: 0, tails: 0 }
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const probabilityTip = document.getElementById('probabilityTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const coinElement = document.getElementById('coin');
        const diceElement = document.getElementById('dice');
        const spinnerWheel = document.getElementById('spinnerWheel');
        const experimentContainer = document.getElementById('experimentContainer');
        const experimentResults = document.getElementById('experimentResults');
        const outcomesContainer = document.getElementById('outcomesContainer');
        const theoreticalDisplay = document.getElementById('theoreticalDisplay');
        const spaceContainer = document.getElementById('spaceContainer');
        const probabilityInput = document.getElementById('probabilityInput');
        const formulaDisplay = document.getElementById('formulaDisplay');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupProbabilityVisualizers();
            setupExperiment();
            setupTheoreticalExamples();
            setupCalculator();
        }

        // Setup probability visualizers
        function setupProbabilityVisualizers() {
            // Initialize dice rolls record
            for (let i = 1; i <= 6; i++) {
                appState.diceRolls[i] = 0;
            }
        }

        // Coin flip function
        window.flipCoin = function() {
            coinElement.classList.add('flipping');
            const isHeads = Math.random() < 0.5;
            
            setTimeout(() => {
                coinElement.textContent = isHeads ? 'H' : 'T';
                coinElement.classList.remove('flipping');
                
                appState.coinFlips.total++;
                if (isHeads) {
                    appState.coinFlips.heads++;
                    coinElement.style.background = 'linear-gradient(145deg, #FFC107, #FF9800)';
                } else {
                    appState.coinFlips.tails++;
                    coinElement.style.background = 'linear-gradient(145deg, #9E9E9E, #757575)';
                }
                
                updateCoinStats();
            }, 500);
        };

        // Simulate multiple coin flips
        window.simulateCoinFlips = function(numFlips) {
            let heads = 0, tails = 0;
            
            for (let i = 0; i < numFlips; i++) {
                if (Math.random() < 0.5) heads++;
                else tails++;
            }
            
            appState.coinFlips.heads += heads;
            appState.coinFlips.tails += tails;
            appState.coinFlips.total += numFlips;
            
            updateCoinStats();
            
            let info = `Simulated ${numFlips} coin flips:\n\n`;
            info += `Heads: ${heads} (${(heads/numFlips*100).toFixed(1)}%)\n`;
            info += `Tails: ${tails} (${(tails/numFlips*100).toFixed(1)}%)\n\n`;
            info += `Theoretical: 50% heads, 50% tails\n`;
            info += `Difference: ${Math.abs(50 - (heads/numFlips*100)).toFixed(1)}%`;
            
            alert(info);
        };

        function updateCoinStats() {
            const heads = appState.coinFlips.heads;
            const tails = appState.coinFlips.tails;
            const total = appState.coinFlips.total;
            
            if (total > 0) {
                const expHeads = (heads/total).toFixed(3);
                const expTails = (tails/total).toFixed(3);
                
                let info = `Coin Flip Statistics:\n\n`;
                info += `Total flips: ${total}\n`;
                info += `Heads: ${heads} (${expHeads} = ${(expHeads*100).toFixed(1)}%)\n`;
                info += `Tails: ${tails} (${expTails} = ${(expTails*100).toFixed(1)}%)\n\n`;
                info += `Theoretical: 0.5 each\n`;
                info += `Law of Large Numbers: More flips ‚Üí closer to 0.5`;
                
                // Show in tooltip or small display
                coinElement.title = info;
            }
        }

        // Dice roll function
        window.rollDice = function() {
            diceElement.classList.add('rolling');
            const roll = Math.floor(Math.random() * 6) + 1;
            
            setTimeout(() => {
                diceElement.textContent = roll;
                diceElement.classList.remove('rolling');
                appState.diceRolls[roll]++;
                updateDiceStats();
            }, 500);
        };

        // Simulate multiple dice rolls
        window.simulateDiceRolls = function(numRolls) {
            const results = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0};
            
            for (let i = 0; i < numRolls; i++) {
                const roll = Math.floor(Math.random() * 6) + 1;
                results[roll]++;
                appState.diceRolls[roll]++;
            }
            
            updateDiceStats();
            
            let info = `Simulated ${numRolls} dice rolls:\n\n`;
            for (let i = 1; i <= 6; i++) {
                const percentage = (results[i]/numRolls*100).toFixed(1);
                info += `${i}: ${results[i]} (${percentage}%)\n`;
            }
            info += `\nTheoretical: 16.7% each\n`;
            info += `Most rolled: ${Object.keys(results).reduce((a,b) => results[a] > results[b] ? a : b)}`;
            
            alert(info);
        };

        function updateDiceStats() {
            let total = 0;
            for (let i = 1; i <= 6; i++) {
                total += appState.diceRolls[i];
            }
            
            if (total > 0) {
                let info = `Dice Roll Statistics:\n\n`;
                info += `Total rolls: ${total}\n\n`;
                for (let i = 1; i <= 6; i++) {
                    const percentage = (appState.diceRolls[i]/total*100).toFixed(1);
                    info += `${i}: ${appState.diceRolls[i]} (${percentage}%)\n`;
                }
                info += `\nTheoretical: 16.7% each`;
                diceElement.title = info;
            }
        }

        // Show dice probability
        window.showDiceProbability = function() {
            let info = "Theoretical Dice Probabilities:\n\n";
            info += "Fair 6-sided die:\n";
            info += "‚Ä¢ P(1) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(2) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(3) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(4) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(5) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(6) = 1/6 ‚âà 0.167\n\n";
            
            info += "Compound Events:\n";
            info += "‚Ä¢ P(even) = 3/6 = 1/2 = 0.5\n";
            info += "‚Ä¢ P(odd) = 3/6 = 1/2 = 0.5\n";
            info += "‚Ä¢ P(>4) = 2/6 = 1/3 ‚âà 0.333\n";
            info += "‚Ä¢ P(<3) = 2/6 = 1/3 ‚âà 0.333\n";
            info += "‚Ä¢ P(prime) = 3/6 = 1/2 = 0.5\n";
            info += "  (primes: 2, 3, 5)";
            
            alert(info);
        };

        // Spinner functions
        window.spinWheel = function() {
            const sections = 6;
            const extraRotations = 5; // Make it spin multiple times
            const randomSection = Math.floor(Math.random() * sections);
            const degrees = (360 * extraRotations) + (randomSection * 60);
            
            spinnerWheel.style.transition = 'transform 3s ease-out';
            spinnerWheel.style.transform = `rotate(${degrees}deg)`;
            
            setTimeout(() => {
                const colors = ['purple', 'blue', 'green', 'yellow', 'orange', 'pink'];
                const result = colors[randomSection];
                
                let info = `Spinner Result: ${result.toUpperCase()}\n\n`;
                info += `Section ${randomSection + 1} of 6\n`;
                info += `Theoretical P(${result}) = 1/6 ‚âà 0.167\n`;
                info += `Percentage: 16.7%`;
                
                alert(info);
            }, 3000);
        };

        window.showSpinnerProbability = function() {
            let info = "Spinner with 6 equal sections:\n\n";
            info += "Colors: Purple, Blue, Green, Yellow, Orange, Pink\n\n";
            info += "Theoretical Probabilities:\n";
            info += "‚Ä¢ P(Purple) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(Blue) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(Green) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(Yellow) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(Orange) = 1/6 ‚âà 0.167\n";
            info += "‚Ä¢ P(Pink) = 1/6 ‚âà 0.167\n\n";
            
            info += "Compound Events:\n";
            info += "‚Ä¢ P(Primary color) = 3/6 = 0.5\n";
            info += "  (Purple, Blue, Green)\n";
            info += "‚Ä¢ P(Warm color) = 2/6 = 0.333\n";
            info += "  (Yellow, Orange)\n";
            info += "‚Ä¢ P(Not Pink) = 5/6 ‚âà 0.833";
            
            alert(info);
        };

        // Setup experiment
        function setupExperiment() {
            experimentContainer.innerHTML = '';
            updateExperimentResults();
        }

        // Run experiment
        window.runExperiment = function(numTrials) {
            experimentContainer.innerHTML = '';
            
            let heads = 0, tails = 0;
            
            // Run trials with visual animation
            for (let i = 0; i < numTrials; i++) {
                setTimeout(() => {
                    const isHeads = Math.random() < 0.5;
                    if (isHeads) heads++;
                    else tails++;
                    
                    // Create visual trial
                    const trial = document.createElement('div');
                    trial.className = 'trial';
                    trial.style.left = `${10 + Math.random() * 80}%`;
                    trial.style.background = isHeads ? 
                        'radial-gradient(circle, #FFC107, #FF9800)' : 
                        'radial-gradient(circle, #9E9E9E, #616161)';
                    trial.style.boxShadow = `0 0 10px ${isHeads ? '#FF9800' : '#616161'}`;
                    
                    experimentContainer.appendChild(trial);
                    
                    // Remove after animation
                    setTimeout(() => {
                        if (trial.parentNode) {
                            trial.parentNode.removeChild(trial);
                        }
                    }, 2000);
                    
                    // Update results every 10 trials
                    if ((i + 1) % 10 === 0 || i === numTrials - 1) {
                        appState.experimentData.trials += 10;
                        appState.experimentData.heads += heads;
                        appState.experimentData.tails += tails;
                        updateExperimentResults();
                        heads = 0;
                        tails = 0;
                    }
                }, i * 100); // Stagger the trials
            }
        };

        // Clear experiment
        window.clearExperiment = function() {
            appState.experimentData = { trials: 0, heads: 0, tails: 0 };
            experimentContainer.innerHTML = '';
            updateExperimentResults();
        };

        function updateExperimentResults() {
            const data = appState.experimentData;
            
            if (data.trials === 0) {
                experimentResults.innerHTML = `
                    <div>Trials: 0</div>
                    <div>Heads: 0 (0%)</div>
                    <div>Tails: 0 (0%)</div>
                `;
                return;
            }
            
            const pHeads = (data.heads / data.trials).toFixed(3);
            const pTails = (data.tails / data.trials).toFixed(3);
            const pctHeads = (pHeads * 100).toFixed(1);
            const pctTails = (pTails * 100).toFixed(1);
            
            experimentResults.innerHTML = `
                <div>Trials: ${data.trials}</div>
                <div>Heads: ${data.heads} (${pctHeads}%)</div>
                <div>Tails: ${data.tails} (${pctTails}%)</div>
                <div style="margin-top: 5px; color: var(--accent-teal); font-size: 0.9rem;">
                    Experimental P(Heads) = ${pHeads}<br>
                    Theoretical = 0.500<br>
                    Difference: ${Math.abs(0.5 - pHeads).toFixed(3)}
                </div>
            `;
        }

        // Theoretical examples
        function setupTheoreticalExamples() {
            showTheoreticalExample('coin');
        }

        window.showTheoreticalExample = function(type) {
            outcomesContainer.innerHTML = '';
            let info = '';
            
            if (type === 'coin') {
                info = "Coin Flip:\n\n";
                info += "Sample Space = {H, T}\n";
                info += "Total outcomes = 2\n\n";
                
                outcomesContainer.innerHTML = `
                    <div class="outcome favorable">H</div>
                    <div class="outcome">T</div>
                `;
                
                theoreticalDisplay.innerHTML = `
                    Example: P(Heads) = favorable √∑ total<br>
                    = 1 √∑ 2 = ¬Ω = 0.5 = 50%
                `;
                
            } else if (type === 'dice') {
                info = "Dice Roll:\n\n";
                info += "Sample Space = {1, 2, 3, 4, 5, 6}\n";
                info += "Total outcomes = 6\n\n";
                
                for (let i = 1; i <= 6; i++) {
                    const outcome = document.createElement('div');
                    outcome.className = i === 3 ? 'outcome favorable' : 'outcome';
                    outcome.textContent = i;
                    outcomesContainer.appendChild(outcome);
                }
                
                theoreticalDisplay.innerHTML = `
                    Example: P(rolling a 3) = favorable √∑ total<br>
                    = 1 √∑ 6 = ‚Öô ‚âà 0.167 ‚âà 16.7%
                `;
                
            } else if (type === 'cards') {
                info = "Drawing a Card:\n\n";
                info += "Standard deck = 52 cards\n";
                info += "4 suits: Hearts, Diamonds, Clubs, Spades\n";
                info += "Each suit: A, 2-10, J, Q, K\n\n";
                
                const hearts = ['A‚ô•', '2‚ô•', '3‚ô•', '4‚ô•', '5‚ô•', '6‚ô•', '7‚ô•', '8‚ô•', '9‚ô•', '10‚ô•', 'J‚ô•', 'Q‚ô•', 'K‚ô•'];
                
                hearts.forEach(card => {
                    const outcome = document.createElement('div');
                    outcome.className = 'outcome favorable';
                    outcome.textContent = card;
                    outcome.style.color = '#F44336';
                    outcomesContainer.appendChild(outcome);
                });
                
                theoreticalDisplay.innerHTML = `
                    Example: P(Heart) = favorable √∑ total<br>
                    = 13 √∑ 52 = ¬º = 0.25 = 25%
                `;
            }
            
            // Show info in alert
            setTimeout(() => {
                if (type === 'coin') info += "P(Heads) = 1/2 = 0.5";
                else if (type === 'dice') info += "P(3) = 1/6 ‚âà 0.167";
                else if (type === 'cards') info += "P(Heart) = 13/52 = 1/4 = 0.25";
                
                alert(info);
            }, 100);
        };

        // Sample space visualizer
        window.showSampleSpace = function(type) {
            spaceContainer.innerHTML = '';
            
            if (type === 'two_coins') {
                const outcomes = ['HH', 'HT', 'TH', 'TT'];
                
                outcomes.forEach((outcome, index) => {
                    const elem = document.createElement('div');
                    elem.className = 'outcome';
                    elem.textContent = outcome;
                    elem.style.position = 'absolute';
                    elem.style.left = `${25 + (index % 2) * 40}%`;
                    elem.style.top = `${30 + Math.floor(index / 2) * 40}%`;
                    spaceContainer.appendChild(elem);
                });
                
                let info = "Two Coin Sample Space:\n\n";
                info += "Possible outcomes:\n";
                info += "1. First H, Second H ‚Üí HH\n";
                info += "2. First H, Second T ‚Üí HT\n";
                info += "3. First T, Second H ‚Üí TH\n";
                info += "4. First T, Second T ‚Üí TT\n\n";
                info += "Total outcomes = 4\n\n";
                info += "Probabilities:\n";
                info += "‚Ä¢ P(HH) = ¬º = 0.25\n";
                info += "‚Ä¢ P(HT) = ¬º = 0.25\n";
                info += "‚Ä¢ P(TH) = ¬º = 0.25\n";
                info += "‚Ä¢ P(TT) = ¬º = 0.25\n";
                info += "‚Ä¢ P(at least one H) = ¬æ = 0.75";
                
                alert(info);
                
            } else if (type === 'two_dice') {
                // Show simplified version
                const elem = document.createElement('div');
                elem.innerHTML = `
                    <div style="color: var(--text-primary); text-align: center; padding: 20px;">
                        36 Possible Outcomes<br>
                        (1,1) (1,2) ... (6,6)
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        Click for details
                    </div>
                `;
                spaceContainer.appendChild(elem);
                
                let info = "Two Dice Sample Space:\n\n";
                info += "36 possible outcomes (6 √ó 6)\n\n";
                info += "Example probabilities:\n";
                info += "‚Ä¢ P(sum = 7) = 6/36 = 1/6 ‚âà 0.167\n";
                info += "  (1+6, 2+5, 3+4, 4+3, 5+2, 6+1)\n";
                info += "‚Ä¢ P(sum = 2) = 1/36 ‚âà 0.028\n";
                info += "  (only 1+1)\n";
                info += "‚Ä¢ P(doubles) = 6/36 = 1/6 ‚âà 0.167\n";
                info += "  (1+1, 2+2, 3+3, 4+4, 5+5, 6+6)\n";
                info += "‚Ä¢ P(sum > 9) = 6/36 = 1/6 ‚âà 0.167";
                
                alert(info);
                
            } else if (type === 'coin_dice') {
                const outcomes = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'T1', 'T2', 'T3', 'T4', 'T5', 'T6'];
                
                outcomes.forEach((outcome, index) => {
                    const elem = document.createElement('div');
                    elem.className = 'outcome';
                    elem.textContent = outcome;
                    elem.style.position = 'absolute';
                    elem.style.left = `${10 + (index % 6) * 15}%`;
                    elem.style.top = `${20 + Math.floor(index / 6) * 40}%`;
                    spaceContainer.appendChild(elem);
                });
                
                let info = "Coin & Dice Sample Space:\n\n";
                info += "Coin: {H, T}\n";
                info += "Die: {1, 2, 3, 4, 5, 6}\n\n";
                info += "Total outcomes = 2 √ó 6 = 12\n\n";
                info += "Example probabilities:\n";
                info += "‚Ä¢ P(H3) = 1/12 ‚âà 0.083\n";
                info += "‚Ä¢ P(T, even) = 3/12 = ¬º = 0.25\n";
                info += "‚Ä¢ P(heads and >4) = 2/12 = ‚Öô ‚âà 0.167";
                
                alert(info);
            }
        };

        // Calculator functions
        window.addToCalc = function(value) {
            if (value === 'f/') {
                probabilityInput.value += 'favorable/';
            } else if (value === 't/') {
                probabilityInput.value += 'total/';
            } else {
                probabilityInput.value += value;
            }
        };

        window.clearCalc = function() {
            probabilityInput.value = '';
        };

        window.calculateProbability = function() {
            const input = probabilityInput.value.trim();
            if (!input) {
                alert("Please enter a probability expression!");
                return;
            }
            
            try {
                // Handle special formats
                let expression = input;
                
                // Replace favorable/total format
                if (input.includes('favorable/total')) {
                    const parts = input.split('/');
                    if (parts.length >= 2 && parts[0].includes('favorable') && parts[1].includes('total')) {
                        const favorable = prompt("Enter number of favorable outcomes:");
                        const total = prompt("Enter total number of outcomes:");
                        
                        if (favorable && total) {
                            const f = parseFloat(favorable);
                            const t = parseFloat(total);
                            if (!isNaN(f) && !isNaN(t) && t !== 0) {
                                const result = f / t;
                                probabilityInput.value = `${f}/${t} = ${result.toFixed(3)}`;
                                
                                let info = `Calculation:\n\n`;
                                info += `P(event) = favorable √∑ total\n`;
                                info += `= ${f} √∑ ${t}\n`;
                                info += `= ${(f/t).toFixed(3)}\n`;
                                info += `= ${(f/t*100).toFixed(1)}%`;
                                
                                alert(info);
                                return;
                            }
                        }
                    }
                }
                
                // Handle fraction format
                if (expression.includes('/')) {
                    const parts = expression.split('/');
                    if (parts.length === 2) {
                        const num = parseFloat(parts[0]);
                        const den = parseFloat(parts[1]);
                        if (!isNaN(num) && !isNaN(den) && den !== 0) {
                            const result = num / den;
                            probabilityInput.value = `${num}/${den} = ${result.toFixed(3)}`;
                            
                            let info = `Calculation:\n\n`;
                            info += `${num}/${den} = ${num} √∑ ${den}\n`;
                            info += `= ${result.toFixed(3)}\n`;
                            info += `= ${(result*100).toFixed(1)}%`;
                            
                            alert(info);
                            return;
                        }
                    }
                }
                
                // Handle percentage
                if (expression.includes('%')) {
                    const value = parseFloat(expression.replace('%', ''));
                    if (!isNaN(value)) {
                        const decimal = value / 100;
                        probabilityInput.value = `${value}% = ${decimal.toFixed(3)}`;
                        
                        let info = `Conversion:\n\n`;
                        info += `${value}% = ${value} √∑ 100\n`;
                        info += `= ${decimal.toFixed(3)}\n`;
                        info += `= ${value/100} as fraction`;
                        
                        alert(info);
                        return;
                    }
                }
                
                // Try evaluating as math expression
                try {
                    // Replace √∑ with /
                    expression = expression.replace('√∑', '/');
                    // Evaluate safely
                    const result = eval(expression);
                    if (!isNaN(result)) {
                        probabilityInput.value = `${expression} = ${result.toFixed(3)}`;
                        
                        let info = `Result:\n\n`;
                        info += `${expression} = ${result.toFixed(3)}\n`;
                        if (result >= 0 && result <= 1) {
                            info += `= ${(result*100).toFixed(1)}%\n`;
                            if (result === 0) info += "Impossible event";
                            else if (result === 0.5) info += "Even chance";
                            else if (result === 1) info += "Certain event";
                            else if (result < 0.5) info += "Unlikely";
                            else info += "Likely";
                        }
                        
                        alert(info);
                        return;
                    }
                } catch (e) {
                    // Continue to error
                }
                
                throw new Error("Invalid probability expression");
                
            } catch (error) {
                alert(`Error: ${error.message}\n\nEnter in format: 3/6 or 0.5 or 50% or favorable/total`);
            }
        };

        // Show formulas
        window.showFormula = function(type) {
            const formulaInfo = formulas[type];
            if (!formulaInfo) return;
            
            formulaDisplay.innerHTML = `<strong>${formulaInfo.title}</strong><br>`;
            formulaInfo.list.forEach(item => {
                formulaDisplay.innerHTML += `‚Ä¢ ${item}<br>`;
            });
            formulaDisplay.style.display = 'block';
            formulaDisplay.classList.add('fade-in');
            
            setTimeout(() => {
                formulaDisplay.classList.remove('fade-in');
            }, 500);
        };

        // Show real world uses
        window.showRealWorld = function() {
            let info = "Real World Applications of Probability:\n\n";
            
            info += "Weather Forecasting:\n";
            info += "‚Ä¢ '30% chance of rain' means probability = 0.3\n";
            info += "‚Ä¢ Based on historical data and models\n\n";
            
            info += "Games & Sports:\n";
            info += "‚Ä¢ Card games: probability of getting specific cards\n";
            info += "‚Ä¢ Dice games: craps, board games\n";
            info += "‚Ä¢ Sports statistics: batting averages, win probabilities\n\n";
            
            info += "Medicine & Health:\n";
            info += "‚Ä¢ Drug effectiveness: '90% effective'\n";
            info += "‚Ä¢ Disease risk factors\n";
            info += "‚Ä¢ Genetic inheritance probabilities\n\n";
            
            info += "Business & Finance:\n";
            info += "‚Ä¢ Insurance: calculating premiums based on risk\n";
            info += "‚Ä¢ Investment risk assessment\n";
            info += "‚Ä¢ Quality control in manufacturing\n\n";
            
            info += "Everyday Decisions:\n";
            info += "‚Ä¢ Choosing routes based on traffic probability\n";
            info += "‚Ä¢ Planning outdoor events around weather\n";
            info += "‚Ä¢ Game strategies based on probabilities";
            
            alert(info);
        };

        // Show comparison detail
        window.showComparisonDetail = function(detail) {
            const detailInfo = comparisonDetails[detail];
            if (!detailInfo) return;
            
            let info = `${detailInfo.title}\n\n`;
            info += `${detailInfo.info}`;
            
            alert(info);
        };

        // Show probability type info
        window.showProbabilityType = function(type) {
            let info = '';
            if (type === 'simple') {
                info = "üéØ Simple Events üéØ\n\n";
                info += "‚Ä¢ Single outcome in a probability experiment\n";
                info += "‚Ä¢ Examples: rolling a 3, flipping heads, drawing an ace\n";
                info += "‚Ä¢ P(simple event) = 1 √∑ (total outcomes)\n";
                info += "‚Ä¢ For fair coin: P(heads) = ¬Ω = 0.5\n";
                info += "‚Ä¢ For fair die: P(4) = ‚Öô ‚âà 0.167\n";
                info += "‚Ä¢ Range: 0 ‚â§ P ‚â§ 1";
            } else if (type === 'experimental') {
                info = "üî¨ Experimental Probability üî¨\n\n";
                info += "‚Ä¢ Based on actual experiments/data collection\n";
                info += "‚Ä¢ Formula: P = (successes) √∑ (trials)\n";
                info += "‚Ä¢ Example: Flip coin 100 times, get 47 heads\n";
                info += "  Experimental P(heads) = 47/100 = 0.47\n";
                info += "‚Ä¢ Affected by: sample size, randomness, bias\n";
                info += "‚Ä¢ Law of Large Numbers: More trials ‚Üí closer to theoretical\n";
                info += "‚Ä¢ Used when theoretical probability unknown";
            } else {
                info = "üìê Theoretical Probability üìê\n\n";
                info += "‚Ä¢ Based on mathematical reasoning/logic\n";
                info += "‚Ä¢ Formula: P = (favorable outcomes) √∑ (total possible)\n";
                info += "‚Ä¢ Example: Fair die has 6 sides\n";
                info += "  Theoretical P(3) = 1/6 ‚âà 0.167\n";
                info += "‚Ä¢ Assumes: fair objects, equally likely outcomes\n";
                info += "‚Ä¢ Used for predictions before experiments\n";
                info += "‚Ä¢ Basis for probability calculations";
            }
            alert(info);
        };

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other math topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Create probability tip display
        function createProbabilityTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'probability-tip';
            tipDiv.innerHTML = `<strong>Probability Tip:</strong> ${probabilityTips[Math.floor(Math.random() * probabilityTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a probability master!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand probability well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of probability!";
            } else {
                scoreMessage.textContent = "Keep practicing! Probability is everywhere - try again!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            probabilityTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            probabilityTip.appendChild(createProbabilityTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin probability practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
