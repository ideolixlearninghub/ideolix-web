<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Science - Reproduction | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Biology Theme */
        :root {
            --primary-blue: #2196F3;
            --primary-green: #4CAF50;
            --primary-orange: #FF9800;
            --primary-purple: #9C27B0;
            --accent-red: #F44336;
            --accent-teal: #009688;
            --accent-yellow: #FFC107;
            --accent-pink: #E91E63;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --male-color: rgba(33, 150, 243, 0.3);
            --female-color: rgba(233, 30, 99, 0.3);
            --plant-color: rgba(76, 175, 80, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(233, 30, 99, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.05) 0%, transparent 70%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--accent-pink), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(233, 30, 99, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--accent-pink);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--accent-pink);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--accent-pink);
            box-shadow: 0 0 0 3px rgba(233, 30, 99, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--accent-pink);
            color: white;
            box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);
        }

        .btn-primary:hover {
            background: #c2185b;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(233, 30, 99, 0.4);
        }

        .btn-secondary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary:hover {
            background: #3d8b40;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-blue {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-blue:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-pink);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.human {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .topic-card.plant {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.human .topic-title {
            color: var(--primary-blue);
        }

        .topic-card.plant .topic-title {
            color: var(--primary-green);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--accent-pink), var(--primary-green));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(233, 30, 99, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-yellow);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--accent-pink);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Area */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Anatomy Visualizer */
        .anatomy-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .visualizer-title {
            color: var(--primary-blue);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .anatomy-canvas-container {
            width: 100%;
            height: 300px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .anatomy-canvas {
            width: 100%;
            height: 100%;
        }

        .anatomy-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .anatomy-controls {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .anatomy-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .anatomy-btn:hover {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
        }

        .anatomy-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        /* Plant Flower Visualizer */
        .plant-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .plant-canvas-container {
            width: 100%;
            height: 300px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .plant-canvas {
            width: 100%;
            height: 100%;
        }

        .plant-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .plant-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .plant-btn:hover {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
        }

        .plant-btn.active {
            background: var(--primary-green);
            color: white;
        }

        /* Process Diagrams */
        .process-diagram {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .diagram-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .diagram-canvas {
            width: 100%;
            height: 100%;
        }

        .process-controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .process-btn {
            padding: 6px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .process-btn.active {
            background: var(--accent-teal);
            color: white;
        }

        /* Comparison Table */
        .comparison-table {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        th {
            background: var(--dark-surface);
            padding: 10px;
            text-align: left;
            color: var(--accent-yellow);
            border-bottom: 2px solid var(--dark-border);
        }

        td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-secondary);
        }

        tr:hover {
            background: rgba(255, 193, 7, 0.05);
        }

        .male-cell {
            border-left: 3px solid var(--primary-blue);
        }

        .female-cell {
            border-left: 3px solid var(--accent-pink);
        }

        .plant-cell {
            border-left: 3px solid var(--primary-green);
        }

        /* Interactive Quiz */
        .interactive-quiz {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .quiz-question {
            margin: 10px 0;
            color: var(--text-primary);
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 5px;
            margin: 10px 0;
        }

        .quiz-option {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--primary-purple);
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* Life Cycle Display */
        .lifecycle-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .cycle-stages {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stage {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            min-width: 80px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .stage:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stage.active {
            background: var(--accent-red);
            color: white;
        }

        .stage-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .stage-name {
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes cellAnimation {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .cell-animate {
            animation: cellAnimation 0.5s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .anatomy-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .plant-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .cycle-stages {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Science: Reproduction</h1>
            <p class="welcome-subtitle">Explore the fascinating processes of how life continues through generations. Study human reproductive systems and flowering plant reproduction through interactive diagrams, animations, and comparative analysis.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üå±üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                <span class="topic-name">Human & Plant Reproductive Biology</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card human" onclick="showTopicInfo('human')">
                    <div class="topic-icon">üß¨</div>
                    <h3 class="topic-title">Human Reproduction</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Male & female reproductive systems, fertilization, pregnancy</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Male reproductive organs</li>
                            <li>Female reproductive system</li>
                            <li>Fertilization process</li>
                            <li>Embryonic development</li>
                            <li>Pregnancy stages</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card plant" onclick="showTopicInfo('plant')">
                    <div class="topic-icon">üå∏</div>
                    <h3 class="topic-title">Plant Reproduction</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Flower structure, pollination, fertilization, seed formation</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Flower anatomy</li>
                            <li>Pollination methods</li>
                            <li>Fertilization in plants</li>
                            <li>Seed & fruit formation</li>
                            <li>Seed dispersal</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üî¨ Begin Reproduction Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="scienceTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Human Anatomy Visualizer -->
                    <div class="anatomy-visualizer">
                        <div class="visualizer-title">Human Reproductive System</div>
                        <div class="anatomy-canvas-container">
                            <canvas class="anatomy-canvas" id="maleAnatomyCanvas"></canvas>
                        </div>
                        <div class="anatomy-controls">
                            <div class="anatomy-btn active" onclick="showAnatomy('male')">Male System</div>
                            <div class="anatomy-btn" onclick="showAnatomy('female')">Female System</div>
                            <div class="anatomy-btn" onclick="showAnatomy('fertilization')">Fertilization</div>
                            <div class="anatomy-btn" onclick="showAnatomy('embryo')">Embryo Development</div>
                            <div class="anatomy-btn" onclick="toggleLabels()">Labels: On</div>
                            <div class="anatomy-btn" onclick="zoomIn()">Zoom In</div>
                            <div class="anatomy-btn" onclick="zoomOut()">Zoom Out</div>
                            <div class="anatomy-btn" onclick="resetView()">Reset View</div>
                        </div>
                    </div>
                    
                    <!-- Process Diagrams -->
                    <div class="process-diagram">
                        <div class="visualizer-title">Reproductive Processes</div>
                        <div class="diagram-container">
                            <canvas class="diagram-canvas" id="processCanvas"></canvas>
                        </div>
                        <div class="process-controls">
                            <div class="process-btn active" onclick="showProcess('menstrual')">Menstrual Cycle</div>
                            <div class="process-btn" onclick="showProcess('fertilization')">Fertilization</div>
                            <div class="process-btn" onclick="showProcess('pregnancy')">Pregnancy Stages</div>
                            <div class="process-btn" onclick="showProcess('birth')">Birth Process</div>
                        </div>
                    </div>
                    
                    <!-- Interactive Quiz -->
                    <div class="interactive-quiz">
                        <div class="visualizer-title">Quick Knowledge Check</div>
                        <div class="quiz-question" id="quizQuestion">What is the male gamete called?</div>
                        <div class="quiz-options" id="quizOptions">
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'A')">A) Sperm</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'B')">B) Ovum</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'C')">C) Zygote</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'D')">D) Embryo</div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="nextQuizQuestion()">Next Question</button>
                        </div>
                    </div>
                    
                    <!-- Life Cycle Display -->
                    <div class="lifecycle-display">
                        <div class="visualizer-title">Human Life Cycle</div>
                        <div class="cycle-stages">
                            <div class="stage active" onclick="showStage('gamete')">
                                <div class="stage-icon">ü•ö</div>
                                <div class="stage-name">Gamete Formation</div>
                            </div>
                            <div class="stage" onclick="showStage('fertilization')">
                                <div class="stage-icon">‚ö°</div>
                                <div class="stage-name">Fertilization</div>
                            </div>
                            <div class="stage" onclick="showStage('embryo')">
                                <div class="stage-icon">üë∂</div>
                                <div class="stage-name">Embryo</div>
                            </div>
                            <div class="stage" onclick="showStage('fetus')">
                                <div class="stage-icon">üë∂</div>
                                <div class="stage-name">Fetus</div>
                            </div>
                            <div class="stage" onclick="showStage('birth')">
                                <div class="stage-icon">üë£</div>
                                <div class="stage-name">Birth</div>
                            </div>
                        </div>
                        <div id="stageDescription" style="padding: 10px; background: var(--dark-surface); border-radius: 6px; margin-top: 10px; min-height: 60px;">
                            Gamete Formation: Production of sperm and egg cells through meiosis.
                        </div>
                    </div>
                </div>
                
                <div class="visualization-container">
                    <!-- Plant Flower Visualizer -->
                    <div class="plant-visualizer">
                        <div class="visualizer-title">Flower Anatomy</div>
                        <div class="plant-canvas-container">
                            <canvas class="plant-canvas" id="flowerCanvas"></canvas>
                        </div>
                        <div class="plant-controls">
                            <div class="plant-btn active" onclick="showFlowerPart('all')">Complete Flower</div>
                            <div class="plant-btn" onclick="showFlowerPart('male')">Male Parts (Stamen)</div>
                            <div class="plant-btn" onclick="showFlowerPart('female')">Female Parts (Pistil)</div>
                            <div class="plant-btn" onclick="showFlowerPart('petals')">Petals & Sepals</div>
                            <div class="plant-btn" onclick="showPollination('wind')">Wind Pollination</div>
                            <div class="plant-btn" onclick="showPollination('insect')">Insect Pollination</div>
                        </div>
                    </div>
                    
                    <!-- Comparison Table -->
                    <div class="comparison-table">
                        <div class="visualizer-title">Comparison: Human vs Plant Reproduction</div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Human</th>
                                    <th>Flowering Plant</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Male Gamete</td>
                                    <td class="male-cell">Sperm</td>
                                    <td class="plant-cell">Pollen grain</td>
                                </tr>
                                <tr>
                                    <td>Female Gamete</td>
                                    <td class="female-cell">Egg/Ovum</td>
                                    <td class="plant-cell">Ovule</td>
                                </tr>
                                <tr>
                                    <td>Fertilization</td>
                                    <td>Internal</td>
                                    <td>In ovary</td>
                                </tr>
                                <tr>
                                    <td>Gamete Formation</td>
                                    <td>Testes/Ovaries</td>
                                    <td>Anther/Ovary</td>
                                </tr>
                                <tr>
                                    <td>Result</td>
                                    <td>Baby</td>
                                    <td>Seed & Fruit</td>
                                </tr>
                                <tr>
                                    <td>Time to Develop</td>
                                    <td>9 months</td>
                                    <td>Weeks to months</td>
                                </tr>
                            </tbody>
                        </table>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showMoreComparisons()">More Comparisons</button>
                        </div>
                    </div>
                    
                    <!-- Seed Dispersal Visualizer -->
                    <div class="process-diagram">
                        <div class="visualizer-title">Seed Dispersal Methods</div>
                        <div class="diagram-container">
                            <canvas class="diagram-canvas" id="seedCanvas"></canvas>
                        </div>
                        <div class="process-controls">
                            <div class="process-btn active" onclick="showDispersal('wind')">Wind</div>
                            <div class="process-btn" onclick="showDispersal('animal')">Animal</div>
                            <div class="process-btn" onclick="showDispersal('water')">Water</div>
                            <div class="process-btn" onclick="showDispersal('explosive')">Explosive</div>
                        </div>
                    </div>
                    
                    <!-- Plant Life Cycle -->
                    <div class="lifecycle-display">
                        <div class="visualizer-title">Plant Life Cycle</div>
                        <div class="cycle-stages">
                            <div class="stage active" onclick="showPlantStage('seed')">
                                <div class="stage-icon">üå∞</div>
                                <div class="stage-name">Seed</div>
                            </div>
                            <div class="stage" onclick="showPlantStage('germination')">
                                <div class="stage-icon">üå±</div>
                                <div class="stage-name">Germination</div>
                            </div>
                            <div class="stage" onclick="showPlantStage('growth')">
                                <div class="stage-icon">üåø</div>
                                <div class="stage-name">Growth</div>
                            </div>
                            <div class="stage" onclick="showPlantStage('flower')">
                                <div class="stage-icon">üå∏</div>
                                <div class="stage-name">Flowering</div>
                            </div>
                            <div class="stage" onclick="showPlantStage('pollination')">
                                <div class="stage-icon">üêù</div>
                                <div class="stage-name">Pollination</div>
                            </div>
                            <div class="stage" onclick="showPlantStage('fruit')">
                                <div class="stage-icon">üçé</div>
                                <div class="stage-name">Fruit Formation</div>
                            </div>
                        </div>
                        <div id="plantStageDescription" style="padding: 10px; background: var(--dark-surface); border-radius: 6px; margin-top: 10px; min-height: 60px;">
                            Seed: Contains embryo plant with stored food, protected by seed coat.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Reproduction Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                    <button class="btn btn-blue" id="printCertificate">Print Certificate</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Reproduction
        const questions = [
            {
                question: "What is the male gamete in humans called?",
                options: ["Sperm", "Ovum", "Zygote", "Embryo"],
                answer: "A",
                explanation: "The male gamete is called sperm, produced in the testes. The female gamete is called ovum or egg."
            },
            {
                question: "Which part of the flower produces pollen grains?",
                options: ["Anther", "Stigma", "Ovary", "Style"],
                answer: "A",
                explanation: "The anther, part of the stamen (male reproductive organ), produces pollen grains."
            },
            {
                question: "Where does fertilization typically occur in humans?",
                options: ["Fallopian tube", "Uterus", "Ovary", "Vagina"],
                answer: "A",
                explanation: "Fertilization usually occurs in the fallopian tube when sperm meets the egg."
            },
            {
                question: "What is pollination in flowering plants?",
                options: ["Transfer of pollen to stigma", "Fusion of gametes", "Seed dispersal", "Fruit formation"],
                answer: "A",
                explanation: "Pollination is the transfer of pollen grains from anther to stigma of a flower."
            },
            {
                question: "What structure connects the stigma to the ovary in a flower?",
                options: ["Style", "Filament", "Petal", "Sepal"],
                answer: "A",
                explanation: "The style is the stalk that connects the stigma to the ovary in the pistil."
            },
            {
                question: "How long is the average human pregnancy?",
                options: ["40 weeks", "30 weeks", "50 weeks", "36 weeks"],
                answer: "A",
                explanation: "Human pregnancy typically lasts about 40 weeks (9 months) from last menstrual period."
            },
            {
                question: "What is the function of petals in a flower?",
                options: ["Attract pollinators", "Produce pollen", "Protect bud", "Receive pollen"],
                answer: "A",
                explanation: "Petals are often brightly colored to attract pollinators like insects and birds."
            },
            {
                question: "Where are sperm produced in the male reproductive system?",
                options: ["Testes", "Epididymis", "Prostate gland", "Vas deferens"],
                answer: "A",
                explanation: "Sperm are produced in the seminiferous tubules of the testes."
            },
            {
                question: "What develops into a fruit after fertilization in plants?",
                options: ["Ovary", "Ovule", "Stigma", "Style"],
                answer: "A",
                explanation: "After fertilization, the ovary of the flower develops into a fruit."
            },
            {
                question: "What is the name of the process where the embryo attaches to the uterus wall?",
                options: ["Implantation", "Fertilization", "Ovulation", "Gestation"],
                answer: "A",
                explanation: "Implantation is when the embryo attaches to the uterine wall about 6-7 days after fertilization."
            },
            {
                question: "Which part of the flower becomes the seed after fertilization?",
                options: ["Ovule", "Ovary", "Stigma", "Anther"],
                answer: "A",
                explanation: "The ovule develops into a seed after fertilization."
            },
            {
                question: "What hormone stimulates sperm production in males?",
                options: ["Testosterone", "Estrogen", "Progesterone", "Insulin"],
                answer: "A",
                explanation: "Testosterone, produced in the testes, stimulates sperm production and development of male characteristics."
            },
            {
                question: "What type of pollination occurs when pollen from a flower lands on the stigma of the same flower?",
                options: ["Self-pollination", "Cross-pollination", "Wind pollination", "Insect pollination"],
                answer: "A",
                explanation: "Self-pollination occurs when pollen from a flower fertilizes the same flower or another flower on the same plant."
            },
            {
                question: "What is the fertilized egg called?",
                options: ["Zygote", "Embryo", "Fetus", "Gamete"],
                answer: "A",
                explanation: "A zygote is formed when sperm and egg fuse during fertilization."
            },
            {
                question: "What are the male reproductive parts of a flower called?",
                options: ["Stamen", "Pistil", "Sepal", "Petal"],
                answer: "A",
                explanation: "The stamen consists of anther and filament and is the male reproductive part of a flower."
            },
            {
                question: "What structure nourishes the developing embryo in plants?",
                options: ["Endosperm", "Seed coat", "Plumule", "Radicle"],
                answer: "A",
                explanation: "The endosperm provides nutrition to the developing embryo in seeds."
            },
            {
                question: "Which organ produces eggs in the female reproductive system?",
                options: ["Ovaries", "Fallopian tubes", "Uterus", "Cervix"],
                answer: "A",
                explanation: "Ovaries produce eggs (ova) and female hormones like estrogen and progesterone."
            },
            {
                question: "What is the colorful part of a flower that attracts pollinators?",
                options: ["Corolla (petals)", "Calyx (sepals)", "Androecium (stamen)", "Gynoecium (pistil)"],
                answer: "A",
                explanation: "The corolla, made of petals, is often brightly colored to attract pollinators."
            },
            {
                question: "What is the gestation period for humans?",
                options: ["9 months", "6 months", "12 months", "7 months"],
                answer: "A",
                explanation: "Human gestation period is approximately 9 months or 40 weeks."
            },
            {
                question: "What process involves the fusion of male and female gametes?",
                options: ["Fertilization", "Pollination", "Germination", "Ovulation"],
                answer: "A",
                explanation: "Fertilization is the fusion of male and female gametes to form a zygote."
            },
            {
                question: "Which structure protects the flower bud?",
                options: ["Sepals", "Petals", "Stamens", "Pistils"],
                answer: "A",
                explanation: "Sepals (collectively called calyx) protect the flower bud before it opens."
            },
            {
                question: "What is the function of the placenta during pregnancy?",
                options: ["Exchange nutrients/waste", "Produce hormones", "Protect embryo", "All of the above"],
                answer: "D",
                explanation: "The placenta exchanges nutrients and waste, produces hormones, and protects the embryo."
            },
            {
                question: "What are seeds dispersed by wind called?",
                options: ["Winged seeds", "Fleshy fruits", "Burrs", "Drupes"],
                answer: "A",
                explanation: "Winged seeds (like maple or ash) are adapted for wind dispersal."
            },
            {
                question: "What is the monthly release of an egg from the ovary called?",
                options: ["Ovulation", "Menstruation", "Fertilization", "Implantation"],
                answer: "A",
                explanation: "Ovulation is the release of a mature egg from the ovary, occurring about midway through the menstrual cycle."
            },
            {
                question: "What is the first stage of plant growth from a seed?",
                options: ["Germination", "Pollination", "Fertilization", "Dispersal"],
                answer: "A",
                explanation: "Germination is when a seed begins to grow into a new plant."
            }
        ];

        // Science tips and facts
        const scienceTips = [
            "Reproduction ensures continuity of species - without it, life would end in one generation!",
            "Human sperm are the smallest human cells, while egg cells are the largest.",
            "A single pollen grain contains two male gametes in flowering plants.",
            "Identical twins come from one fertilized egg splitting, while fraternal twins come from two separate eggs.",
            "Some plants can reproduce without fertilization through processes like budding or runners.",
            "The human embryo's heart begins beating just 3 weeks after fertilization!",
            "Bees are responsible for pollinating about 1/3 of all the food we eat.",
            "The largest seed in the world is the coco de mer, weighing up to 18kg!",
            "Human pregnancy is divided into three trimesters, each about 3 months long.",
            "Some flowers can self-pollinate, while others require cross-pollination for genetic diversity."
        ];

        // Anatomy data
        const anatomyData = {
            male: {
                title: "Male Reproductive System",
                parts: [
                    { name: "Testes", description: "Produce sperm and testosterone", x: 150, y: 100, color: "#2196F3" },
                    { name: "Epididymis", description: "Stores and matures sperm", x: 150, y: 140, color: "#2196F3" },
                    { name: "Vas Deferens", description: "Transports sperm from epididymis", x: 150, y: 180, color: "#2196F3" },
                    { name: "Prostate Gland", description: "Produces seminal fluid", x: 150, y: 220, color: "#2196F3" },
                    { name: "Urethra", description: "Carries semen and urine", x: 150, y: 260, color: "#2196F3" },
                    { name: "Penis", description: "Organ for sexual intercourse", x: 150, y: 300, color: "#2196F3" }
                ]
            },
            female: {
                title: "Female Reproductive System",
                parts: [
                    { name: "Ovaries", description: "Produce eggs and hormones", x: 150, y: 100, color: "#E91E63" },
                    { name: "Fallopian Tubes", description: "Site of fertilization", x: 150, y: 140, color: "#E91E63" },
                    { name: "Uterus", description: "Womb where embryo develops", x: 150, y: 180, color: "#E91E63" },
                    { name: "Cervix", description: "Opening to uterus", x: 150, y: 220, color: "#E91E63" },
                    { name: "Vagina", description: "Birth canal", x: 150, y: 260, color: "#E91E63" }
                ]
            }
        };

        // Flower anatomy data
        const flowerData = {
            parts: [
                { name: "Sepal", description: "Protects flower bud", type: "accessory", color: "#4CAF50", x: 150, y: 50 },
                { name: "Petal", description: "Attracts pollinators", type: "accessory", color: "#E91E63", x: 150, y: 90 },
                { name: "Stamen", description: "Male reproductive part", type: "male", color: "#2196F3", x: 150, y: 130 },
                { name: "Anther", description: "Produces pollen", type: "male", color: "#2196F3", x: 150, y: 170 },
                { name: "Filament", description: "Supports anther", type: "male", color: "#2196F3", x: 150, y: 210 },
                { name: "Pistil", description: "Female reproductive part", type: "female", color: "#9C27B0", x: 150, y: 250 },
                { name: "Stigma", description: "Receives pollen", type: "female", color: "#9C27B0", x: 150, y: 290 },
                { name: "Style", description: "Connects stigma to ovary", type: "female", color: "#9C27B0", x: 150, y: 330 },
                { name: "Ovary", description: "Contains ovules", type: "female", color: "#9C27B0", x: 150, y: 370 },
                { name: "Ovule", description: "Becomes seed after fertilization", type: "female", color: "#9C27B0", x: 150, y: 410 }
            ]
        };

        // Quiz questions
        const quizQuestions = [
            {
                question: "What is the male gamete called?",
                options: ["Sperm", "Ovum", "Zygote", "Embryo"],
                answer: "A"
            },
            {
                question: "Where does fertilization occur in humans?",
                options: ["Fallopian tube", "Uterus", "Ovary", "Vagina"],
                answer: "A"
            },
            {
                question: "Which part produces pollen in flowers?",
                options: ["Anther", "Stigma", "Ovary", "Style"],
                answer: "A"
            },
            {
                question: "What develops into a fruit after fertilization?",
                options: ["Ovary", "Ovule", "Stigma", "Anther"],
                answer: "A"
            },
            {
                question: "How long is human pregnancy?",
                options: ["40 weeks", "30 weeks", "50 weeks", "36 weeks"],
                answer: "A"
            }
        ];

        // Life cycle stages
        const humanStages = {
            gamete: {
                title: "Gamete Formation",
                description: "Production of sperm and egg cells through meiosis. Sperm are produced in testes, eggs in ovaries.",
                icon: "ü•ö"
            },
            fertilization: {
                title: "Fertilization",
                description: "Sperm penetrates egg in fallopian tube, forming a zygote with 46 chromosomes (23 from each parent).",
                icon: "‚ö°"
            },
            embryo: {
                title: "Embryonic Development",
                description: "First 8 weeks after fertilization. All major organs begin to form. Embryo implants in uterine wall.",
                icon: "üë∂"
            },
            fetus: {
                title: "Fetal Development",
                description: "Week 9 to birth. Organs mature and grow. Fetus moves and responds to stimuli.",
                icon: "üë∂"
            },
            birth: {
                title: "Birth",
                description: "After about 40 weeks, baby is born through vagina (or C-section). Lungs begin functioning.",
                icon: "üë£"
            }
        };

        const plantStages = {
            seed: {
                title: "Seed",
                description: "Contains embryo plant with stored food, protected by seed coat. Can remain dormant for long periods.",
                icon: "üå∞"
            },
            germination: {
                title: "Germination",
                description: "Seed absorbs water, swells, and embryo begins to grow. Radicle (root) emerges first.",
                icon: "üå±"
            },
            growth: {
                title: "Growth",
                description: "Seedling develops leaves for photosynthesis and roots for absorption. Becomes mature plant.",
                icon: "üåø"
            },
            flower: {
                title: "Flowering",
                description: "Mature plant produces flowers containing reproductive organs (stamens and pistils).",
                icon: "üå∏"
            },
            pollination: {
                title: "Pollination",
                description: "Transfer of pollen from anther to stigma. Can be by wind, insects, birds, or other animals.",
                icon: "üêù"
            },
            fruit: {
                title: "Fruit Formation",
                description: "After fertilization, ovary develops into fruit containing seeds. Fruit aids in seed dispersal.",
                icon: "üçé"
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentAnatomy: 'male',
            currentProcess: 'menstrual',
            currentFlowerPart: 'all',
            currentDispersal: 'wind',
            showLabels: true,
            zoomLevel: 1,
            quizIndex: 0,
            currentStage: 'gamete',
            currentPlantStage: 'seed',
            maleCanvas: null,
            maleCtx: null,
            flowerCanvas: null,
            flowerCtx: null,
            processCanvas: null,
            processCtx: null,
            seedCanvas: null,
            seedCtx: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceTip = document.getElementById('scienceTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const printCertificateBtn = document.getElementById('printCertificate');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');
        const stageDescription = document.getElementById('stageDescription');
        const plantStageDescription = document.getElementById('plantStageDescription');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            initializeCanvases();
            loadQuizQuestion();
            drawAnatomy();
            drawFlower();
            drawProcessDiagram();
            drawSeedDispersal();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            printCertificateBtn.addEventListener('click', printCertificate);
            viewTopicsBtn.addEventListener('click', () => alert("Other science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a reproduction biology expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand human and plant reproduction well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of reproductive biology!";
            } else {
                scoreMessage.textContent = "Keep learning! Reproduction is fascinating - review and try again!";
            }
        }

        // Create science tip display
        function createScienceTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'science-tip';
            tipDiv.innerHTML = `<strong>Biology Tip:</strong> ${scienceTips[Math.floor(Math.random() * scienceTips.length)]}`;
            return tipDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceTip.appendChild(createScienceTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Print certificate
        function printCertificate() {
            const percentage = Math.round((appState.score / questions.length) * 100);
            const certificateWindow = window.open('', '_blank');
            certificateWindow.document.write(`
                <html>
                <head>
                    <title>Certificate of Achievement</title>
                    <style>
                        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
                        .certificate { border: 20px solid #E91E63; padding: 50px; max-width: 800px; margin: 0 auto; }
                        h1 { color: #E91E63; }
                        .name { font-size: 2em; margin: 20px 0; }
                        .grade { font-size: 1.5em; margin: 20px 0; }
                        .score { font-size: 1.2em; margin: 20px 0; }
                        .date { margin-top: 50px; }
                    </style>
                </head>
                <body>
                    <div class="certificate">
                        <h1>Certificate of Achievement</h1>
                        <p>This certifies that</p>
                        <div class="name">${appState.studentName}</div>
                        <p>has successfully completed the Grade 8 Reproduction module</p>
                        <div class="grade">Grade 8 Science - Reproduction in Humans & Plants</div>
                        <div class="score">Score: ${appState.score}/${questions.length} (${percentage}%)</div>
                        <div class="date">Date: ${new Date().toLocaleDateString()}</div>
                        <p>Ideolix Learning Hub</p>
                    </div>
                </body>
                </html>
            `);
            certificateWindow.document.close();
            certificateWindow.print();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying reproduction!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize canvases
        function initializeCanvases() {
            // Male anatomy canvas
            const maleCanvas = document.getElementById('maleAnatomyCanvas');
            const maleContainer = document.querySelector('.anatomy-canvas-container');
            maleCanvas.width = maleContainer.clientWidth;
            maleCanvas.height = maleContainer.clientHeight;
            appState.maleCanvas = maleCanvas;
            appState.maleCtx = maleCanvas.getContext('2d');
            
            // Flower canvas
            const flowerCanvas = document.getElementById('flowerCanvas');
            const flowerContainer = document.querySelector('.plant-canvas-container');
            flowerCanvas.width = flowerContainer.clientWidth;
            flowerCanvas.height = flowerContainer.clientHeight;
            appState.flowerCanvas = flowerCanvas;
            appState.flowerCtx = flowerCanvas.getContext('2d');
            
            // Process canvas
            const processCanvas = document.getElementById('processCanvas');
            const processContainer = document.querySelector('.diagram-container');
            processCanvas.width = processContainer.clientWidth;
            processCanvas.height = processContainer.clientHeight;
            appState.processCanvas = processCanvas;
            appState.processCtx = processCanvas.getContext('2d');
            
            // Seed canvas
            const seedCanvas = document.getElementById('seedCanvas');
            const seedContainer = document.querySelectorAll('.diagram-container')[1];
            seedCanvas.width = seedContainer.clientWidth;
            seedCanvas.height = seedContainer.clientHeight;
            appState.seedCanvas = seedCanvas;
            appState.seedCtx = seedCanvas.getContext('2d');
        }

        // Show anatomy
        window.showAnatomy = function(type) {
            appState.currentAnatomy = type;
            
            // Update active button
            const anatomyBtns = document.querySelectorAll('.anatomy-btn');
            anatomyBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawAnatomy();
        };

        // Draw anatomy
        function drawAnatomy() {
            const ctx = appState.maleCtx;
            const canvas = appState.maleCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw based on current anatomy type
            ctx.save();
            ctx.translate(width/2 - 100, 50);
            ctx.scale(appState.zoomLevel, appState.zoomLevel);
            
            if (appState.currentAnatomy === 'male') {
                drawMaleAnatomy(ctx);
            } else if (appState.currentAnatomy === 'female') {
                drawFemaleAnatomy(ctx);
            } else if (appState.currentAnatomy === 'fertilization') {
                drawFertilizationProcess(ctx);
            } else {
                drawEmbryoDevelopment(ctx);
            }
            
            ctx.restore();
        }

        // Draw male anatomy
        function drawMaleAnatomy(ctx) {
            ctx.fillStyle = '#2196F3';
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            
            // Draw simplified male reproductive system
            // Testes
            ctx.beginPath();
            ctx.ellipse(50, 50, 20, 30, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            ctx.beginPath();
            ctx.ellipse(150, 50, 20, 30, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Vas deferens
            ctx.beginPath();
            ctx.moveTo(50, 80);
            ctx.lineTo(50, 120);
            ctx.lineTo(100, 120);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(150, 80);
            ctx.lineTo(150, 120);
            ctx.lineTo(100, 120);
            ctx.stroke();
            
            // Prostate
            ctx.beginPath();
            ctx.ellipse(100, 140, 15, 10, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Urethra
            ctx.beginPath();
            ctx.moveTo(100, 150);
            ctx.lineTo(100, 200);
            ctx.stroke();
            
            // Penis
            ctx.beginPath();
            ctx.rect(80, 200, 40, 60);
            ctx.fill();
            ctx.stroke();
            
            // Draw labels if enabled
            if (appState.showLabels) {
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Testes', 30, 40);
                ctx.fillText('Vas Deferens', 10, 110);
                ctx.fillText('Prostate', 85, 135);
                ctx.fillText('Urethra', 110, 180);
                ctx.fillText('Penis', 85, 250);
            }
        }

        // Draw female anatomy
        function drawFemaleAnatomy(ctx) {
            ctx.fillStyle = '#E91E63';
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            
            // Ovaries
            ctx.beginPath();
            ctx.ellipse(50, 50, 15, 25, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            ctx.beginPath();
            ctx.ellipse(150, 50, 15, 25, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Fallopian tubes
            ctx.beginPath();
            ctx.moveTo(65, 50);
            ctx.bezierCurveTo(85, 30, 115, 30, 135, 50);
            ctx.stroke();
            
            // Uterus
            ctx.beginPath();
            ctx.ellipse(100, 100, 30, 40, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Cervix and vagina
            ctx.beginPath();
            ctx.moveTo(100, 140);
            ctx.lineTo(100, 200);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.rect(80, 200, 40, 40);
            ctx.fill();
            ctx.stroke();
            
            // Draw labels if enabled
            if (appState.showLabels) {
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Ovary', 30, 40);
                ctx.fillText('Fallopian Tube', 60, 30);
                ctx.fillText('Uterus', 85, 100);
                ctx.fillText('Cervix', 85, 170);
                ctx.fillText('Vagina', 85, 230);
            }
        }

        // Draw fertilization process
        function drawFertilizationProcess(ctx) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Fertilization Process', 100, 20);
            
            // Draw egg
            ctx.fillStyle = '#E91E63';
            ctx.beginPath();
            ctx.arc(100, 80, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Draw sperm approaching
            for (let i = 0; i < 5; i++) {
                ctx.fillStyle = '#2196F3';
                ctx.beginPath();
                ctx.arc(50 + i * 10, 80 + i * 5, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw tail
                ctx.beginPath();
                ctx.moveTo(50 + i * 10 - 5, 80 + i * 5);
                ctx.lineTo(50 + i * 10 - 15, 80 + i * 5);
                ctx.stroke();
            }
            
            // Draw zygote
            ctx.fillStyle = '#9C27B0';
            ctx.beginPath();
            ctx.arc(180, 150, 25, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Egg', 100, 110);
            ctx.fillText('Sperm', 70, 120);
            ctx.fillText('Zygote', 180, 185);
            
            // Draw arrow
            ctx.beginPath();
            ctx.moveTo(120, 85);
            ctx.lineTo(155, 125);
            ctx.stroke();
        }

        // Draw embryo development
        function drawEmbryoDevelopment(ctx) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Embryonic Development', 100, 20);
            
            // Draw different stages
            const stages = [
                { week: 4, size: 5, label: '4 weeks' },
                { week: 8, size: 10, label: '8 weeks' },
                { week: 12, size: 15, label: '12 weeks' },
                { week: 20, size: 25, label: '20 weeks' }
            ];
            
            stages.forEach((stage, index) => {
                const x = 50 + index * 50;
                const y = 100;
                
                // Draw embryo
                ctx.fillStyle = '#FF9800';
                ctx.beginPath();
                ctx.arc(x, y, stage.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                // Draw label
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText(stage.label, x, y + stage.size + 15);
            });
            
            // Draw timeline
            ctx.beginPath();
            ctx.moveTo(30, 100);
            ctx.lineTo(220, 100);
            ctx.stroke();
        }

        // Toggle labels
        window.toggleLabels = function() {
            appState.showLabels = !appState.showLabels;
            event.target.textContent = `Labels: ${appState.showLabels ? 'On' : 'Off'}`;
            drawAnatomy();
            drawFlower();
        };

        // Zoom in
        window.zoomIn = function() {
            appState.zoomLevel = Math.min(appState.zoomLevel + 0.2, 2);
            drawAnatomy();
        };

        // Zoom out
        window.zoomOut = function() {
            appState.zoomLevel = Math.max(appState.zoomLevel - 0.2, 0.5);
            drawAnatomy();
        };

        // Reset view
        window.resetView = function() {
            appState.zoomLevel = 1;
            drawAnatomy();
        };

        // Show process
        window.showProcess = function(process) {
            appState.currentProcess = process;
            
            // Update active button
            const processBtns = document.querySelectorAll('.process-btn');
            processBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawProcessDiagram();
        };

        // Draw process diagram
        function drawProcessDiagram() {
            const ctx = appState.processCtx;
            const canvas = appState.processCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            
            if (appState.currentProcess === 'menstrual') {
                drawMenstrualCycle(ctx, width, height);
            } else if (appState.currentProcess === 'fertilization') {
                drawFertilizationDiagram(ctx, width, height);
            } else if (appState.currentProcess === 'pregnancy') {
                drawPregnancyStages(ctx, width, height);
            } else {
                drawBirthProcess(ctx, width, height);
            }
        }

        // Draw menstrual cycle
        function drawMenstrualCycle(ctx, width, height) {
            ctx.fillText('Menstrual Cycle (28 days)', width/2, 20);
            
            // Draw cycle phases
            const phases = [
                { name: 'Menstruation', days: '1-5', color: '#F44336' },
                { name: 'Follicular', days: '6-13', color: '#2196F3' },
                { name: 'Ovulation', days: '14', color: '#4CAF50' },
                { name: 'Luteal', days: '15-28', color: '#FF9800' }
            ];
            
            const phaseWidth = (width - 100) / 4;
            
            phases.forEach((phase, index) => {
                const x = 50 + index * phaseWidth;
                const phaseHeight = height - 100;
                
                // Draw phase box
                ctx.fillStyle = phase.color;
                ctx.fillRect(x, 50, phaseWidth - 20, phaseHeight);
                ctx.strokeStyle = '#FFFFFF';
                ctx.strokeRect(x, 50, phaseWidth - 20, phaseHeight);
                
                // Draw phase info
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText(phase.name, x + (phaseWidth - 20)/2, 70);
                ctx.fillText(phase.days, x + (phaseWidth - 20)/2, 85);
            });
        }

        // Draw fertilization diagram
        function drawFertilizationDiagram(ctx, width, height) {
            ctx.fillText('Fertilization Process', width/2, 20);
            
            // Draw egg
            ctx.fillStyle = '#E91E63';
            ctx.beginPath();
            ctx.arc(width/2, height/2, 30, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Draw sperm
            ctx.fillStyle = '#2196F3';
            for (let i = 0; i < 3; i++) {
                const angle = (i * 120) * Math.PI / 180;
                const x = width/2 + Math.cos(angle) * 60;
                const y = height/2 + Math.sin(angle) * 60;
                
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw tail
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x - Math.cos(angle) * 15, y - Math.sin(angle) * 15);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Egg', width/2, height/2 + 50);
            ctx.fillText('Sperm', width/2 - 60, height/2 - 60);
        }

        // Draw pregnancy stages
        function drawPregnancyStages(ctx, width, height) {
            ctx.fillText('Pregnancy Trimesters', width/2, 20);
            
            const trimesters = [
                { name: '1st Trimester', weeks: '1-12', features: 'Organs form' },
                { name: '2nd Trimester', weeks: '13-27', features: 'Rapid growth' },
                { name: '3rd Trimester', weeks: '28-40', features: 'Final development' }
            ];
            
            const trimesterWidth = (width - 100) / 3;
            
            trimesters.forEach((trimester, index) => {
                const x = 50 + index * trimesterWidth;
                const boxHeight = height - 100;
                
                // Draw box
                ctx.fillStyle = index === 0 ? '#E91E63' : index === 1 ? '#2196F3' : '#4CAF50';
                ctx.fillRect(x, 50, trimesterWidth - 20, boxHeight);
                ctx.strokeStyle = '#FFFFFF';
                ctx.strokeRect(x, 50, trimesterWidth - 20, boxHeight);
                
                // Draw info
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(trimester.name, x + (trimesterWidth - 20)/2, 70);
                ctx.fillText(`Weeks: ${trimester.weeks}`, x + (trimesterWidth - 20)/2, 90);
                ctx.fillText(trimester.features, x + (trimesterWidth - 20)/2, 110);
            });
        }

        // Draw birth process
        function drawBirthProcess(ctx, width, height) {
            ctx.fillText('Birth Process', width/2, 20);
            
            // Draw simplified birth diagram
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            
            // Draw uterus
            ctx.beginPath();
            ctx.ellipse(width/2, height/2, 80, 60, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw baby
            ctx.fillStyle = '#FF9800';
            ctx.beginPath();
            ctx.arc(width/2, height/2 - 20, 20, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw birth canal
            ctx.beginPath();
            ctx.moveTo(width/2, height/2 + 60);
            ctx.lineTo(width/2, height - 30);
            ctx.stroke();
            
            // Draw arrows
            ctx.beginPath();
            ctx.moveTo(width/2, height/2 + 10);
            ctx.lineTo(width/2, height/2 + 50);
            ctx.lineTo(width/2 - 10, height/2 + 40);
            ctx.moveTo(width/2, height/2 + 50);
            ctx.lineTo(width/2 + 10, height/2 + 40);
            ctx.stroke();
            
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Baby', width/2, height/2 - 30);
            ctx.fillText('Birth Canal', width/2 + 40, height/2 + 80);
        }

        // Show flower part
        window.showFlowerPart = function(part) {
            appState.currentFlowerPart = part;
            
            // Update active button
            const plantBtns = document.querySelectorAll('.plant-btn');
            plantBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawFlower();
        };

        // Show pollination
        window.showPollination = function(type) {
            // Update active button
            const plantBtns = document.querySelectorAll('.plant-btn');
            plantBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            alert(`${type === 'wind' ? 'Wind' : 'Insect'} Pollination:\n\n${
                type === 'wind' 
                ? '‚Ä¢ Pollen carried by wind\n‚Ä¢ Flowers small, not colorful\n‚Ä¢ Large amount of pollen\n‚Ä¢ Examples: grasses, trees'
                : '‚Ä¢ Pollen carried by insects\n‚Ä¢ Flowers colorful, scented\n‚Ä¢ Nectar rewards\n‚Ä¢ Examples: roses, sunflowers'
            }`);
        };

        // Draw flower
        function drawFlower() {
            const ctx = appState.flowerCtx;
            const canvas = appState.flowerCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            ctx.save();
            ctx.translate(width/2 - 100, 50);
            
            // Draw flower base
            if (appState.currentFlowerPart === 'all' || appState.currentFlowerPart === 'petals') {
                // Draw sepals (green)
                ctx.fillStyle = '#4CAF50';
                for (let i = 0; i < 5; i++) {
                    const angle = (i * 72) * Math.PI / 180;
                    ctx.beginPath();
                    ctx.ellipse(
                        100 + Math.cos(angle) * 40,
                        100 + Math.sin(angle) * 40,
                        15, 25, angle, 0, Math.PI * 2
                    );
                    ctx.fill();
                }
                
                // Draw petals (pink)
                ctx.fillStyle = '#E91E63';
                for (let i = 0; i < 5; i++) {
                    const angle = (i * 72) * Math.PI / 180;
                    ctx.beginPath();
                    ctx.ellipse(
                        100 + Math.cos(angle) * 60,
                        100 + Math.sin(angle) * 60,
                        25, 40, angle, 0, Math.PI * 2
                    );
                    ctx.fill();
                }
            }
            
            // Draw male parts (stamen)
            if (appState.currentFlowerPart === 'all' || appState.currentFlowerPart === 'male') {
                ctx.fillStyle = '#2196F3';
                for (let i = 0; i < 5; i++) {
                    const angle = (i * 72) * Math.PI / 180;
                    const x = 100 + Math.cos(angle) * 30;
                    const y = 100 + Math.sin(angle) * 30;
                    
                    // Draw filament
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                    ctx.lineTo(x + Math.cos(angle) * 20, y + Math.sin(angle) * 20);
                    ctx.stroke();
                    
                    // Draw anther
                    ctx.beginPath();
                    ctx.arc(x + Math.cos(angle) * 20, y + Math.sin(angle) * 20, 8, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Draw female parts (pistil)
            if (appState.currentFlowerPart === 'all' || appState.currentFlowerPart === 'female') {
                ctx.fillStyle = '#9C27B0';
                
                // Draw ovary
                ctx.beginPath();
                ctx.arc(100, 100, 15, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw style
                ctx.beginPath();
                ctx.moveTo(100, 100);
                ctx.lineTo(100, 60);
                ctx.stroke();
                
                // Draw stigma
                ctx.beginPath();
                ctx.arc(100, 60, 10, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw labels if enabled
            if (appState.showLabels) {
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                
                if (appState.currentFlowerPart === 'all' || appState.currentFlowerPart === 'petals') {
                    ctx.fillText('Petal', 160, 40);
                    ctx.fillText('Sepal', 160, 160);
                }
                
                if (appState.currentFlowerPart === 'all' || appState.currentFlowerPart === 'male') {
                    ctx.fillText('Anther', 40, 40);
                    ctx.fillText('Filament', 40, 160);
                }
                
                if (appState.currentFlowerPart === 'all' || appState.currentFlowerPart === 'female') {
                    ctx.fillText('Stigma', 110, 45);
                    ctx.fillText('Style', 120, 80);
                    ctx.fillText('Ovary', 120, 110);
                }
            }
            
            ctx.restore();
        }

        // Show dispersal method
        window.showDispersal = function(method) {
            appState.currentDispersal = method;
            
            // Update active button
            const processBtns = document.querySelectorAll('.process-btn');
            processBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawSeedDispersal();
        };

        // Draw seed dispersal
        function drawSeedDispersal() {
            const ctx = appState.seedCtx;
            const canvas = appState.seedCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Seed Dispersal: ' + appState.currentDispersal.charAt(0).toUpperCase() + appState.currentDispersal.slice(1), width/2, 20);
            
            if (appState.currentDispersal === 'wind') {
                drawWindDispersal(ctx, width, height);
            } else if (appState.currentDispersal === 'animal') {
                drawAnimalDispersal(ctx, width, height);
            } else if (appState.currentDispersal === 'water') {
                drawWaterDispersal(ctx, width, height);
            } else {
                drawExplosiveDispersal(ctx, width, height);
            }
        }

        // Draw wind dispersal
        function drawWindDispersal(ctx, width, height) {
            // Draw plant
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.moveTo(width/2, height - 50);
            ctx.lineTo(width/2, height/2);
            ctx.stroke();
            
            // Draw seeds with wings
            for (let i = 0; i < 5; i++) {
                const x = width/2 + (i - 2) * 20;
                const y = height/2 - i * 15;
                
                // Draw seed
                ctx.fillStyle = '#FF9800';
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw wing
                ctx.beginPath();
                ctx.ellipse(x, y, 15, 5, 0, 0, Math.PI * 2);
                ctx.stroke();
                
                // Draw wind lines
                ctx.beginPath();
                ctx.moveTo(x + 20, y);
                ctx.lineTo(x + 30, y);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Winged seeds catch wind', width/2, height - 20);
        }

        // Draw animal dispersal
        function drawAnimalDispersal(ctx, width, height) {
            // Draw animal (simplified)
            ctx.fillStyle = '#795548';
            ctx.beginPath();
            ctx.arc(width/2, height/2, 30, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw fruit
            ctx.fillStyle = '#F44336';
            ctx.beginPath();
            ctx.arc(width/2 + 40, height/2, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw seeds in droppings
            ctx.fillStyle = '#8D6E63';
            ctx.beginPath();
            ctx.ellipse(width/2 - 40, height/2 + 40, 20, 10, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw seeds
            ctx.fillStyle = '#FF9800';
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                ctx.arc(width/2 - 40 + i * 10 - 10, height/2 + 40, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Animals eat fruit, disperse seeds', width/2, height - 20);
        }

        // Draw water dispersal
        function drawWaterDispersal(ctx, width, height) {
            // Draw water
            ctx.fillStyle = '#2196F3';
            ctx.fillRect(0, height/2, width, height/2);
            
            // Draw floating seed
            ctx.fillStyle = '#8D6E63';
            ctx.beginPath();
            ctx.arc(width/2, height/2 + 20, 20, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw air pockets
            ctx.fillStyle = '#FFFFFF';
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                ctx.arc(width/2 + i * 10 - 10, height/2 + 10, 5, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw waves
            ctx.strokeStyle = '#FFFFFF';
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                ctx.moveTo(i * 40, height/2);
                ctx.bezierCurveTo(i * 40 + 10, height/2 - 10, i * 40 + 30, height/2 - 10, i * 40 + 40, height/2);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Floating seeds travel by water', width/2, height - 20);
        }

        // Draw explosive dispersal
        function drawExplosiveDispersal(ctx, width, height) {
            // Draw seed pod
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.ellipse(width/2, height/2, 30, 20, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw exploding seeds
            for (let i = 0; i < 6; i++) {
                const angle = (i * 60) * Math.PI / 180;
                const distance = 40;
                const x = width/2 + Math.cos(angle) * distance;
                const y = height/2 + Math.sin(angle) * distance;
                
                // Draw seed
                ctx.fillStyle = '#FF9800';
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw explosion line
                ctx.beginPath();
                ctx.moveTo(width/2, height/2);
                ctx.lineTo(x, y);
                ctx.stroke();
            }
            
            // Draw explosion lines
            ctx.strokeStyle = '#F44336';
            for (let i = 0; i < 8; i++) {
                const angle = (i * 45) * Math.PI / 180;
                const x1 = width/2 + Math.cos(angle) * 35;
                const y1 = height/2 + Math.sin(angle) * 35;
                const x2 = width/2 + Math.cos(angle) * 45;
                const y2 = height/2 + Math.sin(angle) * 45;
                
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Seed pod explodes to scatter seeds', width/2, height - 20);
        }

        // Load quiz question
        function loadQuizQuestion() {
            const quiz = quizQuestions[appState.quizIndex];
            quizQuestion.textContent = quiz.question;
            
            quizOptions.innerHTML = '';
            quiz.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                optionElement.onclick = () => checkQuizAnswer(optionElement, String.fromCharCode(65 + index));
                quizOptions.appendChild(optionElement);
            });
        }

        // Check quiz answer
        window.checkQuizAnswer = function(element, selectedAnswer) {
            const quiz = quizQuestions[appState.quizIndex];
            const options = quizOptions.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.textContent.startsWith(quiz.answer + ')')) {
                    opt.classList.add('correct');
                }
            });
            
            if (selectedAnswer === quiz.answer) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
            }
        };

        // Next quiz question
        window.nextQuizQuestion = function() {
            appState.quizIndex = (appState.quizIndex + 1) % quizQuestions.length;
            loadQuizQuestion();
        };

        // Show stage
        window.showStage = function(stage) {
            appState.currentStage = stage;
            
            // Update active stage
            const stages = document.querySelectorAll('.stage');
            stages.forEach(s => s.classList.remove('active'));
            event.target.closest('.stage').classList.add('active');
            
            // Update description
            const stageInfo = humanStages[stage];
            stageDescription.innerHTML = `<strong>${stageInfo.title}</strong><br>${stageInfo.description}`;
        };

        // Show plant stage
        window.showPlantStage = function(stage) {
            appState.currentPlantStage = stage;
            
            // Update active stage
            const stages = document.querySelectorAll('.stage');
            stages.forEach(s => s.classList.remove('active'));
            event.target.closest('.stage').classList.add('active');
            
            // Update description
            const stageInfo = plantStages[stage];
            plantStageDescription.innerHTML = `<strong>${stageInfo.title}</strong><br>${stageInfo.description}`;
        };

        // Show more comparisons
        window.showMoreComparisons = function() {
            let comparisons = "More Comparisons: Human vs Plant Reproduction\n\n";
            comparisons += "SIMILARITIES:\n";
            comparisons += "‚Ä¢ Both produce gametes (sex cells)\n";
            comparisons += "‚Ä¢ Both require fertilization\n";
            comparisons += "‚Ä¢ Both involve meiosis\n";
            comparisons += "‚Ä¢ Both ensure species continuation\n\n";
            
            comparisons += "DIFFERENCES:\n";
            comparisons += "‚Ä¢ Humans: Internal fertilization\n";
            comparisons += "‚Ä¢ Plants: Often external pollination\n";
            comparisons += "‚Ä¢ Humans: Fixed number of offspring\n";
            comparisons += "‚Ä¢ Plants: Many seeds produced\n";
            comparisons += "‚Ä¢ Humans: Long gestation period\n";
            comparisons += "‚Ä¢ Plants: Seeds can remain dormant\n\n";
            
            comparisons += "ADAPTATIONS:\n";
            comparisons += "Humans: Parental care, internal development\n";
            comparisons += "Plants: Pollination strategies, seed dispersal";
            
            alert(comparisons);
        };

        // Topic information display
        window.showTopicInfo = function(topic) {
            let info = '';
            if (topic === 'human') {
                info = "üß¨ Human Reproduction üß¨\n\n";
                info += "The biological process by which humans produce offspring.\n\n";
                info += "Key Concepts:\n";
                info += "‚Ä¢ Male reproductive system: testes, sperm production\n";
                info += "‚Ä¢ Female reproductive system: ovaries, menstrual cycle\n";
                info += "‚Ä¢ Fertilization: sperm meets egg in fallopian tube\n";
                info += "‚Ä¢ Pregnancy: embryo development over 9 months\n";
                info += "‚Ä¢ Birth: delivery of baby\n\n";
                info += "Important Terms:\n";
                info += "‚Ä¢ Gametes: sperm and egg cells\n";
                info += "‚Ä¢ Zygote: fertilized egg\n";
                info += "‚Ä¢ Embryo: weeks 1-8 after fertilization\n";
                info += "‚Ä¢ Fetus: week 9 to birth\n";
                info += "‚Ä¢ Placenta: nourishes developing baby";
            } else {
                info = "üå∏ Plant Reproduction üå∏\n\n";
                info += "How flowering plants produce seeds and continue their species.\n\n";
                info += "Key Concepts:\n";
                info += "‚Ä¢ Flower structure: petals, sepals, stamens, pistils\n";
                info += "‚Ä¢ Pollination: transfer of pollen to stigma\n";
                info += "‚Ä¢ Fertilization: pollen tube grows to ovule\n";
                info += "‚Ä¢ Seed formation: ovule develops into seed\n";
                info += "‚Ä¢ Fruit formation: ovary develops into fruit\n";
                info += "‚Ä¢ Seed dispersal: various methods to spread seeds\n\n";
                info += "Important Terms:\n";
                info += "‚Ä¢ Stamen: male part (anther + filament)\n";
                info += "‚Ä¢ Pistil: female part (stigma + style + ovary)\n";
                info += "‚Ä¢ Pollination: self vs cross, wind vs insect\n";
                info += "‚Ä¢ Germination: seed sprouting into seedling\n";
                info += "‚Ä¢ Dispersal: wind, water, animals, explosive";
            }
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
        
        // Handle window resize
        window.addEventListener('resize', function() {
            initializeCanvases();
            drawAnatomy();
            drawFlower();
            drawProcessDiagram();
            drawSeedDispersal();
        });
    </script>
</body>
</html>
