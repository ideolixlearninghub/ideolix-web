<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 Math - Decimals Operations | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Math Theme - Enhanced with decimal colors */
        :root {
            --primary-blue: #2196F3;
            --secondary-green: #4CAF50;
            --accent-purple: #9C27B0;
            --accent-orange: #FF9800;
            --accent-red: #F44336;
            --accent-yellow: #FFC107;
            --accent-teal: #009688;
            --accent-pink: #E91E63;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(33, 150, 243, 0.3);
            --addition-glow: 0 0 15px rgba(76, 175, 80, 0.4);
            --subtraction-glow: 0 0 15px rgba(244, 67, 54, 0.4);
            --multiplication-glow: 0 0 15px rgba(255, 193, 7, 0.4);
            --division-glow: 0 0 15px rgba(156, 39, 176, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Decimal Pattern Background */
        .math-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(76, 175, 80, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 152, 0, 0.1) 0%, transparent 50%);
            opacity: 0.3;
        }

        .floating-number {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 3rem;
            font-weight: bold;
            animation: floatNumber 20s linear infinite;
        }

        @keyframes floatNumber {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green), var(--accent-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-green);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-secondary:hover {
            background: #388E3C;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-green), var(--accent-orange));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green), var(--accent-orange));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-green);
        }

        .option.correct .option-letter {
            background: var(--primary-blue);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(33, 150, 243, 0.1);
            border-left: 5px solid var(--primary-blue);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-blue);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-blue);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Decimal Place Value Display */
        .decimal-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .decimal-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .decimal-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 80px;
            margin: 0 5px;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .decimal-box:hover {
            transform: scale(1.1);
        }

        .decimal-box.whole-part {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
        }

        .decimal-box.decimal-point {
            background: var(--dark-bg);
            border-color: var(--accent-orange);
            min-width: 30px;
        }

        .decimal-box.decimal-part {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--secondary-green);
        }

        .decimal-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .decimal-box.whole-part .decimal-value {
            color: var(--primary-blue);
        }

        .decimal-box.decimal-point .decimal-value {
            color: var(--accent-orange);
            font-size: 2rem;
        }

        .decimal-box.decimal-part .decimal-value {
            color: var(--secondary-green);
        }

        .decimal-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Operations Grid */
        .operations-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .operations-grid {
                grid-template-columns: 1fr;
            }
        }

        .operation-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
        }

        .operation-card:hover {
            transform: translateY(-5px);
        }

        .operation-card.addition {
            border-color: var(--secondary-green);
        }

        .operation-card.subtraction {
            border-color: var(--accent-red);
        }

        .operation-card.multiplication {
            border-color: var(--accent-yellow);
        }

        .operation-card.division {
            border-color: var(--accent-purple);
        }

        .operation-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .addition .operation-icon {
            color: var(--secondary-green);
        }

        .subtraction .operation-icon {
            color: var(--accent-red);
        }

        .multiplication .operation-icon {
            color: var(--accent-yellow);
        }

        .division .operation-icon {
            color: var(--accent-purple);
        }

        .operation-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .addition .operation-title {
            color: var(--secondary-green);
        }

        .subtraction .operation-title {
            color: var(--accent-red);
        }

        .multiplication .operation-title {
            color: var(--accent-yellow);
        }

        .division .operation-title {
            color: var(--accent-purple);
        }

        .operation-example {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: monospace;
        }

        .operation-description {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Step-by-Step Calculation */
        .calculation-steps {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-teal);
        }

        .steps-title {
            color: var(--accent-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .step-by-step {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .calculation-step {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-teal);
        }

        .step-number {
            display: inline-block;
            background: var(--accent-teal);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            margin-right: 10px;
            font-weight: bold;
        }

        .step-description {
            display: inline;
            color: var(--text-primary);
        }

        .step-example {
            margin-top: 10px;
            padding: 10px;
            background: var(--dark-bg);
            border-radius: 6px;
            color: var(--accent-teal);
            font-family: monospace;
            font-size: 1.1rem;
            overflow-x: auto;
        }

        /* Money and Measurement Applications */
        .applications-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-pink);
        }

        .applications-title {
            color: var(--accent-pink);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .applications-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .applications-grid {
                grid-template-columns: 1fr;
            }
        }

        .application-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .application-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-pink);
        }

        .application-name {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent-pink);
        }

        .application-example {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Decimal Number Line */
        .number-line-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .number-line-title {
            color: var(--secondary-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .decimal-line {
            height: 80px;
            background: var(--dark-surface);
            border-radius: 8px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
        }

        .line {
            position: absolute;
            top: 50%;
            left: 20px;
            right: 20px;
            height: 3px;
            background: var(--text-secondary);
            transform: translateY(-50%);
        }

        .tick {
            position: absolute;
            top: 50%;
            width: 2px;
            height: 10px;
            background: var(--text-secondary);
            transform: translateY(-50%);
        }

        .tick.major {
            height: 15px;
            width: 3px;
        }

        .tick-label {
            position: absolute;
            top: calc(50% + 20px);
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .marker {
            position: absolute;
            top: 50%;
            width: 20px;
            height: 20px;
            background: var(--primary-blue);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px var(--primary-blue);
        }

        .marker-label {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: var(--primary-blue);
        }

        /* Interactive Practice */
        .interactive-practice {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .practice-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-orange);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-button:hover {
            background: rgba(255, 152, 0, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Decimals Table */
        .decimals-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .decimals-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--primary-blue);
            border-bottom: 2px solid var(--primary-blue);
        }

        .decimals-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .decimals-table tr:hover {
            background: rgba(33, 150, 243, 0.05);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green), var(--accent-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green), var(--accent-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .decimal-box {
                min-width: 60px;
                padding: 10px;
                margin: 0 2px;
            }
            
            .operations-grid {
                grid-template-columns: 1fr;
            }
            
            .applications-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes numberCount {
            0% { transform: translateY(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-20px); opacity: 0; }
        }
        
        .number-count {
            animation: numberCount 1s ease forwards;
        }
        
        @keyframes decimalHighlight {
            0%, 100% { background: var(--dark-surface); }
            50% { background: rgba(33, 150, 243, 0.2); }
        }
        
        .decimal-highlight {
            animation: decimalHighlight 1s ease;
        }
        
        @keyframes additionGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(76, 175, 80, 0.2); }
        }
        
        .addition-glow {
            animation: additionGlow 2s ease-in-out infinite;
        }
        
        @keyframes subtractionGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(244, 67, 54, 0.2); }
        }
        
        .subtraction-glow {
            animation: subtractionGlow 2s ease-in-out infinite;
        }
        
        @keyframes multiplicationGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(255, 193, 7, 0.2); }
        }
        
        .multiplication-glow {
            animation: multiplicationGlow 2s ease-in-out infinite;
        }
        
        @keyframes divisionGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(156, 39, 176, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(156, 39, 176, 0.2); }
        }
        
        .division-glow {
            animation: divisionGlow 2s ease-in-out infinite;
        }
        
        @keyframes decimalReveal {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .decimal-reveal {
            animation: decimalReveal 0.3s ease forwards;
        }
        
        @keyframes placeValueSlide {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .place-value-slide {
            animation: placeValueSlide 0.5s ease forwards;
        }
        
        @keyframes calculationFlow {
            0% { transform: translateY(-10px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        
        .calculation-flow {
            animation: calculationFlow 0.3s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Math Pattern Background -->
    <div class="math-bg" id="mathBg">
        <!-- Numbers will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 Mathematics</h1>
            <p class="welcome-subtitle">Master decimal operations! Learn to add, subtract, multiply, and divide decimals with confidence. Understand decimal place value, work with money calculations, and solve real-world problems involving measurements. Become a decimal expert!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üî¢‚ûï‚ûñ‚úñÔ∏è‚ûó</span>
                <span class="topic-name">Decimals: Addition, Subtraction, Multiplication, Division</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Decimal Operations Journey</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Math fact display -->
                <div id="mathFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Decimal Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const mathBg = document.getElementById('mathBg');
            
            // Create floating decimal numbers
            const decimals = ['0.1', '0.25', '0.5', '0.75', '1.5', '2.3', '3.14', '4.2', '5.75', '6.8', '7.5', '8.25', '9.9', '10.1'];
            
            for (let i = 0; i < 25; i++) {
                const number = document.createElement('div');
                number.className = 'floating-number';
                number.textContent = decimals[Math.floor(Math.random() * decimals.length)];
                number.style.left = `${Math.random() * 100}%`;
                number.style.top = `${Math.random() * 100}%`;
                number.style.animationDelay = `${Math.random() * 20}s`;
                number.style.fontSize = `${1 + Math.random() * 3}rem`;
                
                // Color based on decimal value
                const numValue = parseFloat(number.textContent);
                if (numValue < 1) {
                    number.style.color = 'rgba(33, 150, 243, 0.1)';
                } else if (numValue < 5) {
                    number.style.color = 'rgba(76, 175, 80, 0.1)';
                } else {
                    number.style.color = 'rgba(255, 152, 0, 0.1)';
                }
                
                mathBg.appendChild(number);
            }
        }

        // Questions array - 120+ Grade 6 Decimal Operations questions
        const questions = [
            // Decimal Place Value Basics (1-20)
            {
                type: "decimal_basics",
                question: "What is the place value of 7 in 4.732?",
                options: ["Tenths", "Hundredths", "Thousandths", "Ones"],
                answer: "A",
                explanation: "In 4.732, after decimal point: first digit (7) = tenths place, second (3) = hundredths, third (2) = thousandths."
            },
            {
                type: "decimal_basics",
                question: "Write three and twenty-five hundredths as a decimal.",
                options: ["3.25", "3.025", "3.250", "325"],
                answer: "A",
                explanation: "Three = 3, twenty-five hundredths = 25/100 = 0.25. Combined: 3.25"
            },
            {
                type: "decimal_basics",
                question: "Which is equivalent to 0.6?",
                options: ["6/10", "6/100", "60/100", "Both A and C"],
                answer: "D",
                explanation: "0.6 = 6/10 = 60/100 (both simplify to 3/5)."
            },
            {
                type: "decimal_basics",
                question: "What is 4/10 as a decimal?",
                options: ["0.4", "0.04", "4.0", "0.004"],
                answer: "A",
                explanation: "4/10 = 0.4 (four tenths)."
            },
            {
                type: "decimal_basics",
                question: "Which decimal is greatest: 0.3, 0.03, 0.33, 0.303?",
                options: ["0.33", "0.3", "0.303", "0.03"],
                answer: "A",
                explanation: "Compare: 0.33 > 0.303 > 0.3 > 0.03."
            },
            // Decimal Addition (21-40)
            {
                type: "addition",
                question: "3.25 + 1.75 = ?",
                options: ["5.00", "4.00", "5.10", "4.90"],
                answer: "A",
                explanation: "Line up decimals: 3.25 + 1.75 = 5.00. 25+75=100 (carry 1)."
            },
            {
                type: "addition",
                question: "Add: 4.56 + 2.34",
                options: ["6.90", "6.80", "6.88", "6.98"],
                answer: "A",
                explanation: "4.56 + 2.34 = 6.90. Add hundredths: 6+4=10 (carry 1). Tenths: 5+3+1=9. Ones: 4+2=6."
            },
            {
                type: "addition",
                question: "What is 0.75 + 0.25?",
                options: ["1.00", "0.100", "1.10", "0.90"],
                answer: "A",
                explanation: "0.75 + 0.25 = 1.00. 75+25=100 (carry 1 to ones place)."
            },
            {
                type: "addition",
                question: "12.345 + 7.655 = ?",
                options: ["20.000", "20.100", "19.900", "20.010"],
                answer: "A",
                explanation: "Line up: 12.345 + 7.655 = 20.000. Thousandths: 5+5=10 (carry 1). Hundredths: 4+5+1=10 (carry 1). Tenths: 3+6+1=10 (carry 1). Ones: 2+7+1=10 (carry 1). Tens: 1+0+1=2."
            },
            {
                type: "addition",
                question: "Add: 5.6 + 3.4 + 2.5",
                options: ["11.5", "10.5", "11.0", "10.0"],
                answer: "A",
                explanation: "5.6 + 3.4 = 9.0, then + 2.5 = 11.5."
            },
            // Decimal Subtraction (41-60)
            {
                type: "subtraction",
                question: "5.75 - 2.25 = ?",
                options: ["3.50", "3.25", "3.75", "2.50"],
                answer: "A",
                explanation: "Line up decimals: 5.75 - 2.25 = 3.50."
            },
            {
                type: "subtraction",
                question: "Subtract: 8.4 - 3.7",
                options: ["4.7", "4.3", "5.3", "5.7"],
                answer: "A",
                explanation: "8.4 - 3.7 = 4.7. Borrow: 8.4 becomes 7.14, subtract: 14-7=7 (tenths), 7-3=4 (ones)."
            },
            {
                type: "subtraction",
                question: "What is 10.00 - 4.56?",
                options: ["5.44", "5.54", "6.44", "6.54"],
                answer: "A",
                explanation: "10.00 - 4.56 = 5.44. Borrow: 10.00 becomes 9.9(10), then 9.9(10) - 4.56 = 5.44."
            },
            {
                type: "subtraction",
                question: "15.25 - 7.80 = ?",
                options: ["7.45", "8.45", "7.55", "8.55"],
                answer: "A",
                explanation: "15.25 - 7.80 = 7.45. Hundredths: 5-0=5. Tenths: 2-8 (borrow) ‚Üí 12-8=4. Ones: 4-7 (borrow) ‚Üí 14-7=7."
            },
            {
                type: "subtraction",
                question: "Subtract: 6.0 - 2.75",
                options: ["3.25", "3.75", "4.25", "2.25"],
                answer: "A",
                explanation: "6.00 - 2.75 = 3.25. Borrow: 6.00 becomes 5.9(10), then 5.9(10) - 2.75 = 3.25."
            },
            // Decimal Multiplication (61-80)
            {
                type: "multiplication",
                question: "2.5 √ó 4 = ?",
                options: ["10.0", "8.0", "10.5", "9.0"],
                answer: "A",
                explanation: "2.5 √ó 4 = 10.0. Multiply: 25 √ó 4 = 100, then place decimal: one decimal place ‚Üí 10.0."
            },
            {
                type: "multiplication",
                question: "What is 3.2 √ó 1.5?",
                options: ["4.80", "4.50", "3.80", "4.00"],
                answer: "A",
                explanation: "32 √ó 15 = 480. Total decimal places: 1+1=2. So: 4.80."
            },
            {
                type: "multiplication",
                question: "Multiply: 0.4 √ó 0.3",
                options: ["0.12", "0.012", "0.07", "1.2"],
                answer: "A",
                explanation: "4 √ó 3 = 12. Decimal places: 1+1=2. So: 0.12."
            },
            {
                type: "multiplication",
                question: "1.25 √ó 8 = ?",
                options: ["10.00", "9.00", "10.50", "9.50"],
                answer: "A",
                explanation: "125 √ó 8 = 1000. Decimal places: 2+0=2. So: 10.00."
            },
            {
                type: "multiplication",
                question: "0.6 √ó 0.5 = ?",
                options: ["0.30", "0.03", "0.11", "0.35"],
                answer: "A",
                explanation: "6 √ó 5 = 30. Decimal places: 1+1=2. So: 0.30."
            },
            // Decimal Division (81-100)
            {
                type: "division",
                question: "3.6 √∑ 2 = ?",
                options: ["1.8", "1.6", "1.9", "1.7"],
                answer: "A",
                explanation: "3.6 √∑ 2 = 1.8. Divide: 3√∑2=1 remainder 1, bring down 6 ‚Üí 16√∑2=8."
            },
            {
                type: "division",
                question: "What is 4.8 √∑ 0.4?",
                options: ["12", "1.2", "120", "0.12"],
                answer: "A",
                explanation: "4.8 √∑ 0.4 = 12. Multiply both by 10: 48 √∑ 4 = 12."
            },
            {
                type: "division",
                question: "Divide: 0.45 √∑ 9",
                options: ["0.05", "0.5", "5", "0.005"],
                answer: "A",
                explanation: "0.45 √∑ 9 = 0.05. 45 √∑ 9 = 5, place decimal: two places left = 0.05."
            },
            {
                type: "division",
                question: "7.2 √∑ 0.6 = ?",
                options: ["12", "1.2", "120", "0.12"],
                answer: "A",
                explanation: "7.2 √∑ 0.6 = 12. Multiply both by 10: 72 √∑ 6 = 12."
            },
            {
                type: "division",
                question: "0.84 √∑ 0.2 = ?",
                options: ["4.2", "0.42", "42", "0.042"],
                answer: "A",
                explanation: "0.84 √∑ 0.2 = 4.2. Multiply both by 10: 8.4 √∑ 2 = 4.2."
            },
            // Mixed Operations (101-120)
            {
                type: "mixed_operations",
                question: "2.5 + 3.4 - 1.2 = ?",
                options: ["4.7", "4.5", "5.7", "5.5"],
                answer: "A",
                explanation: "2.5 + 3.4 = 5.9, then - 1.2 = 4.7."
            },
            {
                type: "mixed_operations",
                question: "(1.2 √ó 3) + 2.4 = ?",
                options: ["6.0", "5.6", "6.4", "5.2"],
                answer: "A",
                explanation: "1.2 √ó 3 = 3.6, then + 2.4 = 6.0."
            },
            {
                type: "mixed_operations",
                question: "4.8 √∑ 2 + 1.6 = ?",
                options: ["4.0", "3.2", "4.8", "3.6"],
                answer: "A",
                explanation: "4.8 √∑ 2 = 2.4, then + 1.6 = 4.0."
            },
            {
                type: "mixed_operations",
                question: "(5.6 - 2.3) √ó 2 = ?",
                options: ["6.6", "6.2", "7.2", "7.6"],
                answer: "A",
                explanation: "5.6 - 2.3 = 3.3, then √ó 2 = 6.6."
            },
            // Money Problems (121-140)
            {
                type: "money_problems",
                question: "John has $12.75. He buys a snack for $3.50. How much left?",
                options: ["$9.25", "$9.50", "$9.75", "$8.25"],
                answer: "A",
                explanation: "$12.75 - $3.50 = $9.25."
            },
            {
                type: "money_problems",
                question: "3 pens cost $1.20 each. Total cost?",
                options: ["$3.60", "$3.20", "$3.80", "$4.20"],
                answer: "A",
                explanation: "$1.20 √ó 3 = $3.60."
            },
            {
                type: "money_problems",
                question: "If 5kg apples cost $7.50, price per kg?",
                options: ["$1.50", "$1.75", "$1.25", "$1.30"],
                answer: "A",
                explanation: "$7.50 √∑ 5 = $1.50 per kg."
            },
            {
                type: "money_problems",
                question: "Taxi fare: $2.50 base + $1.75 per km. 3km trip cost?",
                options: ["$7.75", "$7.25", "$8.25", "$8.75"],
                answer: "A",
                explanation: "Base: $2.50. Distance: $1.75 √ó 3 = $5.25. Total: $2.50 + $5.25 = $7.75."
            },
            // Measurement Problems (141-160)
            {
                type: "measurement",
                question: "Add: 3.25m + 1.75m",
                options: ["5.00m", "4.00m", "5.50m", "4.50m"],
                answer: "A",
                explanation: "3.25 + 1.75 = 5.00 meters."
            },
            {
                type: "measurement",
                question: "2.5kg flour in 0.5kg bags. How many bags?",
                options: ["5", "4", "6", "3"],
                answer: "A",
                explanation: "2.5 √∑ 0.5 = 5 bags."
            },
            {
                type: "measurement",
                question: "Rope: 8.4m cut into 1.2m pieces. How many pieces?",
                options: ["7", "6", "8", "9"],
                answer: "A",
                explanation: "8.4 √∑ 1.2 = 7 pieces."
            },
            {
                type: "measurement",
                question: "3.6L juice shared equally among 4 cups. Each gets?",
                options: ["0.9L", "0.8L", "1.2L", "0.6L"],
                answer: "A",
                explanation: "3.6 √∑ 4 = 0.9L per cup."
            },
            // Comparing and Ordering Decimals (161-180)
            {
                type: "comparing",
                question: "Arrange: 0.3, 0.33, 0.03, 0.303 in ascending order",
                options: ["0.03, 0.3, 0.303, 0.33", "0.03, 0.303, 0.3, 0.33", "0.3, 0.03, 0.303, 0.33", "0.33, 0.303, 0.3, 0.03"],
                answer: "A",
                explanation: "0.03 < 0.3 (0.30) < 0.303 < 0.33."
            },
            {
                type: "comparing",
                question: "Which is greatest: 4.5, 4.05, 4.55, 4.505?",
                options: ["4.55", "4.5", "4.505", "4.05"],
                answer: "A",
                explanation: "4.55 > 4.505 > 4.5 (4.50) > 4.05."
            },
            // Word Problems with Decimals (181-200)
            {
                type: "word_problems",
                question: "Recipe needs 0.75kg sugar. Double recipe needs?",
                options: ["1.5kg", "1.25kg", "1.75kg", "2.0kg"],
                answer: "A",
                explanation: "0.75 √ó 2 = 1.50kg."
            },
            {
                type: "word_problems",
                question: "Car travels 12.5km on 1L petrol. How far on 3.5L?",
                options: ["43.75km", "42.5km", "44.0km", "43.0km"],
                answer: "A",
                explanation: "12.5 √ó 3.5 = 43.75km."
            },
            {
                type: "word_problems",
                question: "4.8m cloth, cut 0.6m pieces. How many pieces?",
                options: ["8", "7", "9", "6"],
                answer: "A",
                explanation: "4.8 √∑ 0.6 = 8 pieces."
            },
            {
                type: "word_problems",
                question: "Test scores: 8.5, 9.0, 7.5. Average?",
                options: ["8.33", "8.0", "8.5", "8.67"],
                answer: "A",
                explanation: "(8.5 + 9.0 + 7.5) √∑ 3 = 25 √∑ 3 = 8.33."
            },
            // Decimal and Fraction Conversion (201-220)
            {
                type: "conversion",
                question: "Convert 3/4 to decimal",
                options: ["0.75", "0.25", "0.5", "0.8"],
                answer: "A",
                explanation: "3 √∑ 4 = 0.75."
            },
            {
                type: "conversion",
                question: "What is 0.125 as fraction?",
                options: ["1/8", "1/4", "1/5", "1/6"],
                answer: "A",
                explanation: "0.125 = 125/1000 = 1/8."
            },
            {
                type: "conversion",
                question: "Convert 0.6 to fraction in simplest form",
                options: ["3/5", "6/10", "3/4", "2/3"],
                answer: "A",
                explanation: "0.6 = 6/10 = 3/5."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent decimal work!",
            "Perfect decimal place alignment!",
            "Great job carrying those decimal points!",
            "Amazing! You're a decimal operations expert!",
            "Perfect calculation with decimals!",
            "You're a decimal addition and subtraction champion!",
            "Outstanding decimal multiplication skills!",
            "Brilliant decimal division calculations!",
            "You think like a mathematician with decimals!",
            "Decimal mastery achieved!"
        ];

        // Decimal place values
        const decimalPlaceValues = [
            {place: "Ones", value: "1", example: "4"},
            {place: "Tenths", value: "0.1", example: "0.7"},
            {place: "Hundredths", value: "0.01", example: "0.05"},
            {place: "Thousandths", value: "0.001", example: "0.003"}
        ];

        // Decimal operations examples
        const decimalOperations = [
            {
                type: "Addition",
                example: "3.25 + 1.75 = 5.00",
                description: "Line up decimal points, add like whole numbers, bring decimal down",
                steps: ["Align decimal points", "Add each column from right", "Carry if needed", "Place decimal in answer"]
            },
            {
                type: "Subtraction",
                example: "5.75 - 2.25 = 3.50",
                description: "Line up decimals, subtract like whole numbers, borrow if needed",
                steps: ["Align decimal points", "Subtract each column from right", "Borrow if needed", "Place decimal in answer"]
            },
            {
                type: "Multiplication",
                example: "2.5 √ó 3 = 7.5",
                description: "Multiply as whole numbers, count total decimal places",
                steps: ["Multiply ignoring decimals", "Count total decimal places in factors", "Place decimal in product"]
            },
            {
                type: "Division",
                example: "4.8 √∑ 2 = 2.4",
                description: "Move decimal in divisor to make whole number, adjust dividend",
                steps: ["Make divisor whole number", "Move decimal in dividend", "Divide as whole numbers", "Place decimal in quotient"]
            }
        ];

        // Decimal rules
        const decimalRules = [
            {
                rule: "Adding/Subtracting Decimals",
                explanation: "ALWAYS line up the decimal points before adding or subtracting",
                example: "12.34 + 5.6 ‚Üí Write as 12.34 + 5.60"
            },
            {
                rule: "Multiplying Decimals",
                explanation: "Multiply as whole numbers, then count total decimal places",
                example: "1.2 √ó 0.3 ‚Üí 12 √ó 3 = 36 ‚Üí 2 decimal places ‚Üí 0.36"
            },
            {
                rule: "Dividing Decimals",
                explanation: "Move decimal in divisor to make whole number, move decimal in dividend same number of places",
                example: "4.8 √∑ 0.2 ‚Üí 48 √∑ 2 = 24"
            },
            {
                rule: "Decimal Point Movement",
                explanation: "Moving decimal right multiplies by 10, left divides by 10",
                example: "3.5 ‚Üí 35 (√ó10), 3.5 ‚Üí 0.35 (√∑10)"
            }
        ];

        // Money applications
        const moneyApplications = [
            {
                scenario: "Shopping",
                example: "$12.75 + $8.50 = $21.25",
                description: "Adding prices to find total cost"
            },
            {
                scenario: "Change Calculation",
                example: "$20.00 - $14.75 = $5.25",
                description: "Subtracting purchase from payment to find change"
            },
            {
                scenario: "Unit Price",
                example: "$7.50 √∑ 5 = $1.50 per item",
                description: "Dividing total cost by quantity"
            },
            {
                scenario: "Sales Tax",
                example: "$25.00 √ó 0.08 = $2.00 tax",
                description: "Multiplying price by tax rate (8% = 0.08)"
            }
        ];

        // Measurement applications
        const measurementApplications = [
            {
                scenario: "Length",
                example: "3.25m + 1.75m = 5.00m",
                description: "Adding measurements"
            },
            {
                scenario: "Weight",
                example: "2.5kg √∑ 0.5kg = 5 bags",
                description: "Dividing total weight by portion size"
            },
            {
                scenario: "Volume",
                example: "3.6L √∑ 4 = 0.9L per cup",
                description: "Dividing total volume equally"
            },
            {
                scenario: "Speed",
                example: "12.5km/L √ó 3.5L = 43.75km",
                description: "Multiplying rate by quantity"
            }
        ];

        // Decimal equivalents
        const decimalEquivalents = [
            {fraction: "1/2", decimal: "0.5", percent: "50%"},
            {fraction: "1/4", decimal: "0.25", percent: "25%"},
            {fraction: "3/4", decimal: "0.75", percent: "75%"},
            {fraction: "1/5", decimal: "0.2", percent: "20%"},
            {fraction: "1/8", decimal: "0.125", percent: "12.5%"},
            {fraction: "1/10", decimal: "0.1", percent: "10%"}
        ];

        // Interesting math facts
        const mathFacts = [
            "The decimal system is based on 10, probably because humans have 10 fingers!",
            "The dot used as decimal point is called an 'interpunct' or 'decimal point'.",
            "In many countries, a comma is used instead of a decimal point (3,14 instead of 3.14)!",
            "The concept of decimals was invented by Simon Stevin in the 16th century!",
            "œÄ (pi) = 3.1415926535... is a decimal that goes on forever without repeating!",
            "Some fractions create repeating decimals: 1/3 = 0.333..., 1/6 = 0.1666...",
            "The decimal system makes calculations easier than fractions for most people!",
            "Money is the most common real-world application of decimal arithmetic!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathFact = document.getElementById('mathFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6MathDecimals');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6MathDecimals', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6MathDecimals_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6MathDecimals_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a decimal operations expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent decimal skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a decimal master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review decimal concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Decimals are essential for real-world math!";
            }
        }

        // Create math fact display
        function createMathFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'math-fact';
            
            factDiv.innerHTML = `<strong>Amazing Math Fact:</strong> ${mathFacts[Math.floor(Math.random() * mathFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "decimal_basics": "üî¢",
                "addition": "‚ûï",
                "subtraction": "‚ûñ",
                "multiplication": "‚úñÔ∏è",
                "division": "‚ûó",
                "mixed_operations": "üîÄ",
                "money_problems": "üí∞",
                "measurement": "üìè",
                "comparing": "‚öñÔ∏è",
                "word_problems": "üìö",
                "conversion": "üîÑ"
            };
            
            let conceptName = "Decimal Basics";
            let conceptIcon = "üî¢";
            
            if (question.type.includes("decimal_basics")) {
                conceptName = "Decimal Basics";
                conceptIcon = conceptIcons.decimal_basics;
            } else if (question.type.includes("addition")) {
                conceptName = "Decimal Addition";
                conceptIcon = conceptIcons.addition;
            } else if (question.type.includes("subtraction")) {
                conceptName = "Decimal Subtraction";
                conceptIcon = conceptIcons.subtraction;
            } else if (question.type.includes("multiplication")) {
                conceptName = "Decimal Multiplication";
                conceptIcon = conceptIcons.multiplication;
            } else if (question.type.includes("division")) {
                conceptName = "Decimal Division";
                conceptIcon = conceptIcons.division;
            } else if (question.type.includes("mixed_operations")) {
                conceptName = "Mixed Operations";
                conceptIcon = conceptIcons.mixed_operations;
            } else if (question.type.includes("money_problems")) {
                conceptName = "Money Problems";
                conceptIcon = conceptIcons.money_problems;
            } else if (question.type.includes("measurement")) {
                conceptName = "Measurement";
                conceptIcon = conceptIcons.measurement;
            } else if (question.type.includes("comparing")) {
                conceptName = "Comparing Decimals";
                conceptIcon = conceptIcons.comparing;
            } else if (question.type.includes("word_problems")) {
                conceptName = "Word Problems";
                conceptIcon = conceptIcons.word_problems;
            } else if (question.type.includes("conversion")) {
                conceptName = "Decimal-Fraction Conversion";
                conceptIcon = conceptIcons.conversion;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("decimal_basics")) {
                label.textContent = "Understanding decimal place value and notation";
            } else if (question.type.includes("addition")) {
                label.textContent = "Adding decimals by aligning decimal points";
            } else if (question.type.includes("subtraction")) {
                label.textContent = "Subtracting decimals with borrowing";
            } else if (question.type.includes("multiplication")) {
                label.textContent = "Multiplying decimals and placing decimal point";
            } else if (question.type.includes("division")) {
                label.textContent = "Dividing decimals by moving decimal points";
            } else if (question.type.includes("mixed_operations")) {
                label.textContent = "Combining different decimal operations";
            } else if (question.type.includes("money_problems")) {
                label.textContent = "Applying decimals to money calculations";
            } else if (question.type.includes("measurement")) {
                label.textContent = "Using decimals in measurement contexts";
            } else if (question.type.includes("comparing")) {
                label.textContent = "Comparing and ordering decimal numbers";
            } else if (question.type.includes("word_problems")) {
                label.textContent = "Solving real-world problems with decimals";
            } else if (question.type.includes("conversion")) {
                label.textContent = "Converting between fractions and decimals";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create decimal visualization
        function createDecimalVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            // Generate a random decimal for display
            const exampleDecimal = generateRandomDecimal();
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">Decimal Operations Mastery</h3>
                
                <div class="decimal-display">
                    <div class="display-title">Decimal Place Value: ${exampleDecimal}</div>
                    <div class="decimal-container" id="decimalPlaceValue">
                        <!-- Decimal place value will be generated by JavaScript -->
                    </div>
                    <div style="text-align: center; margin-top: 20px; color: var(--text-secondary);">
                        <strong>In words:</strong> ${decimalToWords(exampleDecimal)}<br>
                        <strong>As fraction:</strong> ${decimalToFraction(exampleDecimal)}
                    </div>
                </div>
                
                <div class="operations-grid">
                    ${decimalOperations.map(op => `
                        <div class="operation-card ${op.type.toLowerCase()} ${op.type.toLowerCase()}-glow" style="animation-delay: ${Math.random() * 2}s">
                            <div class="operation-icon">${getOperationIcon(op.type)}</div>
                            <div class="operation-title">${op.type}</div>
                            <div class="operation-example">${op.example}</div>
                            <div class="operation-description">${op.description}</div>
                            <div style="margin-top: 10px; font-size: 0.8rem; color: var(--text-muted);">
                                ${op.steps.map((step, i) => `${i+1}. ${step}`).join('<br>')}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="calculation-steps">
                    <div class="steps-title">Step-by-Step: ${generateCalculationExample()}</div>
                    <div class="step-by-step" id="calculationSteps">
                        <!-- Calculation steps will be generated by JavaScript -->
                    </div>
                </div>
                
                <div class="applications-container">
                    <div class="applications-title">Real-World Applications</div>
                    
                    <div style="margin: 15px 0;">
                        <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 10px;">üí∞ Money Applications:</div>
                        <div class="applications-grid">
                            ${moneyApplications.map(app => `
                                <div class="application-card">
                                    <div class="application-icon">üí∞</div>
                                    <div class="application-name">${app.scenario}</div>
                                    <div class="application-example">${app.example}</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 5px;">${app.description}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 10px;">üìè Measurement Applications:</div>
                        <div class="applications-grid">
                            ${measurementApplications.map(app => `
                                <div class="application-card">
                                    <div class="application-icon">üìè</div>
                                    <div class="application-name">${app.scenario}</div>
                                    <div class="application-example">${app.example}</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 5px;">${app.description}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="number-line-container">
                    <div class="number-line-title">Decimal Number Line: ${exampleDecimal}</div>
                    <div class="decimal-line" id="decimalNumberLine">
                        <!-- Number line will be generated by JavaScript -->
                    </div>
                    <div style="text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                        Number lines help visualize decimal values between whole numbers
                    </div>
                </div>
                
                <table class="decimals-table">
                    <thead>
                        <tr>
                            <th>Fraction</th>
                            <th>Decimal</th>
                            <th>Percent</th>
                            <th>Common Use</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${decimalEquivalents.map(eq => `
                            <tr>
                                <td style="font-weight: bold; color: var(--accent-teal);">${eq.fraction}</td>
                                <td style="font-weight: bold; color: var(--primary-blue);">${eq.decimal}</td>
                                <td style="color: var(--secondary-green);">${eq.percent}</td>
                                <td style="font-size: 0.9rem;">${getCommonUse(eq.fraction)}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="interactive-practice">
                    <div class="practice-title">Interactive Decimal Practice</div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="showAdditionDemo()">Addition</div>
                        <div class="practice-button" onclick="showSubtractionDemo()">Subtraction</div>
                        <div class="practice-button" onclick="showMultiplicationDemo()">Multiplication</div>
                        <div class="practice-button" onclick="showDivisionDemo()">Division</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice different decimal operations
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Practice:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. 3.25 + 1.75 = ?<br>
                        2. 5.6 - 2.4 = ?<br>
                        3. 2.5 √ó 4 = ?<br>
                        4. 4.8 √∑ 2 = ?<br>
                        5. Convert 3/4 to decimal
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-teal);">
                    <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Decimal Rules Memory Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Addition/Subtraction:</strong> Line up the decimals!<br>
                        <strong>Multiplication:</strong> Multiply, then count decimal places!<br>
                        <strong>Division:</strong> Move decimal to make divisor whole!<br>
                        <em>When in doubt, convert to fractions to check!</em>
                    </div>
                </div>
            `;
            
            // Generate decimal place value display
            generateDecimalPlaceValue(exampleDecimal);
            
            // Generate calculation steps
            generateCalculationSteps();
            
            // Generate decimal number line
            generateDecimalNumberLine(exampleDecimal);
            
            return vizDiv;
        }

        // Helper functions
        function generateRandomDecimal() {
            // Generate a random decimal with 1-3 decimal places
            const whole = Math.floor(Math.random() * 10) + 1;
            const decimalPlaces = Math.floor(Math.random() * 3) + 1;
            let decimalPart = '';
            
            for (let i = 0; i < decimalPlaces; i++) {
                decimalPart += Math.floor(Math.random() * 10);
            }
            
            // Remove trailing zeros
            decimalPart = decimalPart.replace(/0+$/, '');
            if (decimalPart === '') decimalPart = '0';
            
            return parseFloat(`${whole}.${decimalPart}`).toFixed(decimalPlaces);
        }

        function decimalToWords(decimal) {
            const str = decimal.toString();
            const parts = str.split('.');
            
            if (parts.length === 1) {
                return `${parseInt(parts[0])} only`;
            }
            
            const whole = parseInt(parts[0]);
            const decimalPart = parts[1];
            
            let words = `${whole} and ${decimalPart}`;
            
            if (decimalPart.length === 1) {
                words += ' tenths';
            } else if (decimalPart.length === 2) {
                words += ' hundredths';
            } else if (decimalPart.length === 3) {
                words += ' thousandths';
            }
            
            return words;
        }

        function decimalToFraction(decimal) {
            const str = decimal.toString();
            const parts = str.split('.');
            
            if (parts.length === 1) {
                return `${parts[0]}/1`;
            }
            
            const denominator = Math.pow(10, parts[1].length);
            const numerator = parseInt(parts[0]) * denominator + parseInt(parts[1]);
            
            // Simplify fraction
            const gcd = findGCD(numerator, denominator);
            return `${numerator/gcd}/${denominator/gcd}`;
        }

        function findGCD(a, b) {
            if (b === 0) return a;
            return findGCD(b, a % b);
        }

        function getOperationIcon(type) {
            const icons = {
                "Addition": "‚ûï",
                "Subtraction": "‚ûñ",
                "Multiplication": "‚úñÔ∏è",
                "Division": "‚ûó"
            };
            return icons[type] || "üî¢";
        }

        function generateCalculationExample() {
            const operations = [
                "3.25 + 1.75 = 5.00",
                "5.6 - 2.4 = 3.2",
                "2.5 √ó 4 = 10.0",
                "4.8 √∑ 2 = 2.4"
            ];
            return operations[Math.floor(Math.random() * operations.length)];
        }

        function getCommonUse(fraction) {
            const uses = {
                "1/2": "Half (50-50 chance)",
                "1/4": "Quarter (25 cents)",
                "3/4": "Three-quarters",
                "1/5": "One-fifth (20%)",
                "1/8": "One-eighth (12.5%)",
                "1/10": "One-tenth (10%)"
            };
            return uses[fraction] || "Common fraction";
        }

        function generateDecimalPlaceValue(decimal) {
            const container = document.getElementById('decimalPlaceValue');
            if (!container) return;
            
            container.innerHTML = '';
            
            const str = decimal.toString();
            const parts = str.split('.');
            
            // Whole number part
            if (parts[0]) {
                const wholeDigits = parts[0].split('');
                wholeDigits.forEach((digit, index) => {
                    const placeIndex = wholeDigits.length - 1 - index;
                    const place = placeIndex === 0 ? "Ones" : 
                                 placeIndex === 1 ? "Tens" : 
                                 placeIndex === 2 ? "Hundreds" : "Thousands";
                    
                    const box = document.createElement('div');
                    box.className = 'decimal-box whole-part decimal-reveal place-value-slide';
                    box.style.animationDelay = `${index * 0.1}s`;
                    
                    box.innerHTML = `
                        <div class="decimal-value">${digit}</div>
                        <div class="decimal-label">${place}</div>
                    `;
                    
                    container.appendChild(box);
                });
            }
            
            // Decimal point
            const pointBox = document.createElement('div');
            pointBox.className = 'decimal-box decimal-point decimal-reveal';
            pointBox.style.animationDelay = `${parts[0].length * 0.1}s`;
            pointBox.innerHTML = '<div class="decimal-value">.</div>';
            container.appendChild(pointBox);
            
            // Decimal part
            if (parts[1]) {
                const decimalDigits = parts[1].split('');
                decimalDigits.forEach((digit, index) => {
                    const place = index === 0 ? "Tenths" : 
                                 index === 1 ? "Hundredths" : 
                                 index === 2 ? "Thousandths" : "Ten-thousandths";
                    
                    const box = document.createElement('div');
                    box.className = 'decimal-box decimal-part decimal-reveal place-value-slide';
                    box.style.animationDelay = `${(parts[0].length + 1 + index) * 0.1}s`;
                    
                    box.innerHTML = `
                        <div class="decimal-value">${digit}</div>
                        <div class="decimal-label">${place}</div>
                    `;
                    
                    container.appendChild(box);
                });
            }
        }

        function generateCalculationSteps() {
            const stepsContainer = document.getElementById('calculationSteps');
            if (!stepsContainer) return;
            
            // Example: 3.25 + 1.75
            stepsContainer.innerHTML = `
                <div class="calculation-step calculation-flow" style="animation-delay: 0.1s">
                    <span class="step-number">1</span>
                    <span class="step-description"><strong>Align decimals:</strong> Write numbers with decimal points lined up</span>
                    <div class="step-example">  3.25<br>+ 1.75<br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                </div>
                <div class="calculation-step calculation-flow" style="animation-delay: 0.2s">
                    <span class="step-number">2</span>
                    <span class="step-description"><strong>Add hundredths:</strong> 5 + 5 = 10, write 0, carry 1</span>
                    <div class="step-example">  3.2<strong>5</strong><br>+ 1.7<strong>5</strong><br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>    0 (carry 1)</div>
                </div>
                <div class="calculation-step calculation-flow" style="animation-delay: 0.3s">
                    <span class="step-number">3</span>
                    <span class="step-description"><strong>Add tenths:</strong> 2 + 7 + 1 = 10, write 0, carry 1</span>
                    <div class="step-example">  3.<strong>2</strong>5<br>+ 1.<strong>7</strong>5<br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>   .00 (carry 1)</div>
                </div>
                <div class="calculation-step calculation-flow" style="animation-delay: 0.4s">
                    <span class="step-number">4</span>
                    <span class="step-description"><strong>Add ones:</strong> 3 + 1 + 1 = 5</span>
                    <div class="step-example">  <strong>3</strong>.25<br>+ <strong>1</strong>.75<br>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<br>  5.00</div>
                </div>
                <div class="calculation-step calculation-flow" style="animation-delay: 0.5s">
                    <span class="step-number">5</span>
                    <span class="step-description"><strong>Place decimal:</strong> Bring decimal point straight down</span>
                    <div class="step-example"><strong>Final Answer: 5.00</strong></div>
                </div>
            `;
        }

        function generateDecimalNumberLine(decimal) {
            const lineContainer = document.getElementById('decimalNumberLine');
            if (!lineContainer) return;
            
            const num = parseFloat(decimal);
            const floor = Math.floor(num);
            const ceil = Math.ceil(num);
            
            lineContainer.innerHTML = '<div class="line"></div>';
            
            // Create major ticks at whole numbers
            for (let i = floor - 1; i <= ceil + 1; i++) {
                if (i < 0) continue;
                
                const position = ((i - (floor - 1)) / ((ceil + 1) - (floor - 1))) * 80 + 10;
                
                const tick = document.createElement('div');
                tick.className = 'tick major';
                tick.style.left = `${position}%`;
                lineContainer.appendChild(tick);
                
                const label = document.createElement('div');
                label.className = 'tick-label';
                label.style.left = `${position}%`;
                label.textContent = i.toString();
                lineContainer.appendChild(label);
            }
            
            // Create minor ticks for tenths
            for (let i = 0; i <= 10; i++) {
                const value = floor + i * 0.1;
                if (value < floor || value > ceil) continue;
                
                const position = ((value - floor) / (ceil - floor)) * 80 + 10;
                
                const tick = document.createElement('div');
                tick.className = 'tick';
                tick.style.left = `${position}%`;
                lineContainer.appendChild(tick);
                
                if (i % 2 === 0 && i !== 0 && i !== 10) {
                    const label = document.createElement('div');
                    label.className = 'tick-label';
                    label.style.left = `${position}%`;
                    label.style.top = 'calc(50% + 10px)';
                    label.style.fontSize = '0.7rem';
                    label.textContent = value.toFixed(1);
                    lineContainer.appendChild(label);
                }
            }
            
            // Add marker for our decimal
            const position = ((num - floor) / (ceil - floor)) * 80 + 10;
            
            const marker = document.createElement('div');
            marker.className = 'marker';
            marker.style.left = `${position}%`;
            lineContainer.appendChild(marker);
            
            const markerLabel = document.createElement('div');
            markerLabel.className = 'marker-label';
            markerLabel.style.left = `${position}%`;
            markerLabel.textContent = decimal;
            lineContainer.appendChild(markerLabel);
        }

        // Global functions for interactive practice
        window.showAdditionDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const num1 = generateRandomDecimal();
            const num2 = generateRandomDecimal();
            const result = (parseFloat(num1) + parseFloat(num2)).toFixed(2);
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-green);">Decimal Addition Practice</div>
                    <div style="margin-bottom: 15px;">
                        <strong>Rule:</strong> Line up decimal points, then add like whole numbers
                    </div>
                    
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0; font-family: monospace;">
                        <div style="text-align: right; margin-bottom: 10px; color: var(--text-primary);">${num1}</div>
                        <div style="text-align: right; margin-bottom: 10px; color: var(--text-primary);">+ ${num2}</div>
                        <div style="border-bottom: 2px solid var(--text-secondary); margin-bottom: 10px;"></div>
                        <div style="text-align: right; font-size: 1.3rem; font-weight: bold; color: var(--secondary-green);">${result}</div>
                    </div>
                    
                    <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong>Steps:</strong><br>
                        1. Write numbers with decimals aligned<br>
                        2. Add digits from right to left<br>
                        3. Carry when sum is 10 or more<br>
                        4. Bring decimal point straight down
                    </div>
                </div>
            `;
        };

        window.showSubtractionDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            // Ensure num1 > num2 for positive result
            const num1 = (parseFloat(generateRandomDecimal()) + 2).toFixed(2);
            const num2 = parseFloat(generateRandomDecimal()).toFixed(2);
            const result = (parseFloat(num1) - parseFloat(num2)).toFixed(2);
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-red);">Decimal Subtraction Practice</div>
                    <div style="margin-bottom: 15px;">
                        <strong>Rule:</strong> Line up decimals, subtract like whole numbers, borrow if needed
                    </div>
                    
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0; font-family: monospace;">
                        <div style="text-align: right; margin-bottom: 10px; color: var(--text-primary);">${num1}</div>
                        <div style="text-align: right; margin-bottom: 10px; color: var(--text-primary);">- ${num2}</div>
                        <div style="border-bottom: 2px solid var(--text-secondary); margin-bottom: 10px;"></div>
                        <div style="text-align: right; font-size: 1.3rem; font-weight: bold; color: var(--accent-red);">${result}</div>
                    </div>
                    
                    <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong>Steps:</strong><br>
                        1. Write numbers with decimals aligned<br>
                        2. Subtract digits from right to left<br>
                        3. Borrow from left if needed<br>
                        4. Bring decimal point straight down
                    </div>
                </div>
            `;
        };

        window.showMultiplicationDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const num1 = generateRandomDecimal();
            const num2 = generateRandomDecimal();
            const result = (parseFloat(num1) * parseFloat(num2)).toFixed(4);
            
            // Count decimal places
            const decimalPlaces1 = num1.split('.')[1]?.length || 0;
            const decimalPlaces2 = num2.split('.')[1]?.length || 0;
            const totalDecimalPlaces = decimalPlaces1 + decimalPlaces2;
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-yellow);">Decimal Multiplication Practice</div>
                    <div style="margin-bottom: 15px;">
                        <strong>Rule:</strong> Multiply as whole numbers, then count total decimal places
                    </div>
                    
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0;">
                        <div style="margin-bottom: 10px;">
                            <strong>Multiply:</strong> ${num1} √ó ${num2}
                        </div>
                        
                        <div style="font-family: monospace; background: var(--dark-bg); padding: 10px; border-radius: 6px; margin: 10px 0;">
                            Step 1: Multiply ignoring decimals: ${parseInt(num1.replace('.', ''))} √ó ${parseInt(num2.replace('.', ''))}<br>
                            Step 2: Count decimal places: ${decimalPlaces1} + ${decimalPlaces2} = ${totalDecimalPlaces}<br>
                            Step 3: Place decimal: ${result}
                        </div>
                        
                        <div style="font-size: 1.3rem; font-weight: bold; color: var(--accent-yellow); margin-top: 10px;">
                            ${num1} √ó ${num2} = ${result}
                        </div>
                    </div>
                    
                    <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong>Key Insight:</strong><br>
                        Each decimal place means "divided by 10"<br>
                        ${decimalPlaces1} places + ${decimalPlaces2} places = divide by 10${totalDecimalPlaces > 1 ? `<sup>${totalDecimalPlaces}</sup>` : ''}
                    </div>
                </div>
            `;
        };

        window.showDivisionDemo = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            // Ensure division works nicely
            const num1 = (parseFloat(generateRandomDecimal()) * 2).toFixed(2);
            const num2 = "2.5";
            const result = (parseFloat(num1) / parseFloat(num2)).toFixed(2);
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-purple);">Decimal Division Practice</div>
                    <div style="margin-bottom: 15px;">
                        <strong>Rule:</strong> Make divisor whole number by moving decimal, move dividend's decimal same
                    </div>
                    
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0;">
                        <div style="margin-bottom: 10px;">
                            <strong>Divide:</strong> ${num1} √∑ ${num2}
                        </div>
                        
                        <div style="font-family: monospace; background: var(--dark-bg); padding: 10px; border-radius: 6px; margin: 10px 0;">
                            Step 1: Make divisor whole: ${num2} ‚Üí 25 (move decimal 1 place right)<br>
                            Step 2: Move dividend same: ${num1} ‚Üí ${(parseFloat(num1) * 10).toFixed(1)} (move decimal 1 place right)<br>
                            Step 3: Divide: ${(parseFloat(num1) * 10).toFixed(1)} √∑ 25 = ${result}
                        </div>
                        
                        <div style="font-size: 1.3rem; font-weight: bold; color: var(--accent-purple); margin-top: 10px;">
                            ${num1} √∑ ${num2} = ${result}
                        </div>
                    </div>
                    
                    <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong>Memory Trick:</strong><br>
                        "What I do to the divisor, I must also do to the dividend"<br>
                        Move decimals until divisor is whole, then divide normally
                    </div>
                </div>
            `;
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathFact.appendChild(createMathFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createDecimalVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
