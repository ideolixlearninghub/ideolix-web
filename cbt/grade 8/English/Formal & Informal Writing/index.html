<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 English - Formal & Informal Writing | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for English Writing Theme */
        :root {
            --formal-blue: #2196F3;
            --informal-green: #4CAF50;
            --accent-purple: #9C27B0;
            --warning-orange: #FF9800;
            --error-red: #F44336;
            --success-teal: #009688;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --formal-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --informal-glow: 0 0 20px rgba(76, 175, 80, 0.4);
            --accent-glow: 0 0 20px rgba(156, 39, 176, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(156, 39, 176, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--formal-blue), var(--informal-green), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--formal-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--formal-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--formal-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Writing Style Grid */
        .writing-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin: 25px 0;
        }

        @media (max-width: 768px) {
            .writing-grid {
                grid-template-columns: 1fr;
            }
        }

        .writing-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .writing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .writing-card.formal {
            border-color: var(--formal-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .writing-card.informal {
            border-color: var(--informal-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .writing-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .writing-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .writing-card.formal .writing-title {
            color: var(--formal-blue);
        }

        .writing-card.informal .writing-title {
            color: var(--informal-green);
        }

        .writing-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
            flex-grow: 1;
        }

        .writing-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .writing-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--success-teal);
        }

        .writing-card.formal .feature-list li:before {
            color: var(--formal-blue);
        }

        .writing-card.informal .feature-list li:before {
            color: var(--informal-green);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--formal-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary {
            background: var(--informal-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-success {
            background: var(--success-teal);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 150, 136, 0.3);
        }

        .btn-success:hover {
            background: #00796B;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 150, 136, 0.4);
        }

        .btn-warning {
            background: var(--warning-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-warning:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--formal-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--formal-blue), var(--informal-green), var(--accent-purple));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .writing-tip {
            background: rgba(255, 193, 7, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--warning-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--formal-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--informal-green);
            color: var(--informal-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--accent-purple);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--informal-green);
        }

        .option.incorrect .option-letter {
            background: #F44336;
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--informal-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--informal-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--informal-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 800px;
        }

        /* Writing Visualizers */
        .writing-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid;
        }

        .formal-visualizer {
            border-color: var(--formal-blue);
        }

        .informal-visualizer {
            border-color: var(--informal-green);
        }

        .visualizer-title {
            color: inherit;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .writing-example {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .formal-example {
            border-left: 3px solid var(--formal-blue);
        }

        .informal-example {
            border-left: 3px solid var(--informal-green);
        }

        /* Writing Features Comparison */
        .comparison-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-purple);
        }

        .comparison-tables {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .comparison-tables {
                grid-template-columns: 1fr;
            }
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-card);
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 2px solid;
        }

        .formal-table th {
            color: var(--formal-blue);
            border-color: var(--formal-blue);
        }

        .informal-table th {
            color: var(--informal-green);
            border-color: var(--informal-green);
        }

        .comparison-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .comparison-table td:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Word Choice Visualizer */
        .word-choice-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--warning-orange);
        }

        .word-choice-pair {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .word-choice-pair {
                grid-template-columns: 1fr;
            }
        }

        .word-card {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .formal-word {
            border: 2px solid var(--formal-blue);
        }

        .informal-word {
            border: 2px solid var(--informal-green);
        }

        .word-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .word-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .word-text {
            font-size: 1.1rem;
            font-weight: bold;
        }

        .formal-word .word-text {
            color: var(--formal-blue);
        }

        .informal-word .word-text {
            color: var(--informal-green);
        }

        /* Sentence Transformation */
        .transformation-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--success-teal);
        }

        .sentence-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1rem;
            line-height: 1.6;
            border: 2px dashed var(--dark-border);
        }

        /* Interactive Editor */
        .editor-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-purple);
        }

        .text-editor {
            width: 100%;
            height: 150px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            padding: 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            line-height: 1.5;
            resize: vertical;
            margin: 10px 0;
        }

        .text-editor:focus {
            outline: none;
            border-color: var(--accent-purple);
        }

        .editor-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 10px 0;
        }

        /* Error Detection */
        .error-detection-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--error-red);
        }

        .error-text {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-size: 0.95rem;
            line-height: 1.6;
            position: relative;
        }

        .error-highlight {
            background: rgba(244, 67, 54, 0.2);
            padding: 2px 4px;
            border-radius: 3px;
            cursor: pointer;
        }

        /* Classification Quiz */
        .classification-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-purple);
        }

        .classification-items {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .classification-items {
                grid-template-columns: 1fr;
            }
        }

        .classification-item {
            padding: 10px;
            background: var(--dark-surface);
            border: 2px dashed var(--dark-border);
            border-radius: 6px;
            text-align: center;
            cursor: grab;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .classification-item:hover {
            border-color: var(--accent-purple);
        }

        .classification-zones {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .classification-zones {
                grid-template-columns: 1fr;
            }
        }

        .classification-zone {
            padding: 15px;
            border: 2px dashed var(--dark-border);
            border-radius: 8px;
            min-height: 100px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .classification-zone.active {
            border-color: var(--success-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--formal-blue), var(--informal-green), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--formal-blue), var(--informal-green), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--formal-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: rgba(33, 150, 243, 0.2); }
            100% { background-color: transparent; }
        }

        .highlight {
            animation: highlight 1s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 English: Formal & Informal Writing</h1>
            <p class="welcome-subtitle">Master the art of writing for different contexts! Learn when to use formal language for academic and professional settings, and when informal style is appropriate for personal communication.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìùü§ùüìßüí¨</span>
                <span class="topic-name">Formal Writing, Informal Writing, Tone, Audience</span>
            </div>
            
            <div class="writing-grid">
                <div class="writing-card formal" onclick="showWritingDetail('formal')">
                    <div class="writing-icon">üìù</div>
                    <h3 class="writing-title">Formal Writing</h3>
                    <p class="writing-description">Used in academic, business, and official contexts. Characterized by structured language, proper grammar, and objective tone.</p>
                    <div class="writing-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Complete sentences</li>
                            <li>No contractions</li>
                            <li>Third-person perspective</li>
                            <li>Professional vocabulary</li>
                            <li>Structured format</li>
                            <li>Objective tone</li>
                        </ul>
                    </div>
                </div>
                
                <div class="writing-card informal" onclick="showWritingDetail('informal')">
                    <div class="writing-icon">üí¨</div>
                    <h3 class="writing-title">Informal Writing</h3>
                    <p class="writing-description">Used in personal communication with friends, family, or in casual settings. Characterized by relaxed language and personal tone.</p>
                    <div class="writing-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Contractions used</li>
                            <li>First/second person</li>
                            <li>Conversational tone</li>
                            <li>Colloquial expressions</li>
                            <li>Simple vocabulary</li>
                            <li>Personal opinions</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üìö Begin Writing Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="writingTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Writing Examples -->
                    <div class="writing-visualizer formal-visualizer">
                        <div class="visualizer-title">Formal Writing Examples</div>
                        <div class="writing-example formal-example">
                            "The committee respectfully requests your presence at the quarterly review meeting scheduled for Friday, November 15th, at 2:00 PM in the main conference hall."
                        </div>
                        <div class="writing-example formal-example">
                            "In accordance with the company's policy regarding workplace conduct, employees are expected to maintain professional decorum at all times."
                        </div>
                    </div>
                    
                    <div class="writing-visualizer informal-visualizer">
                        <div class="visualizer-title">Informal Writing Examples</div>
                        <div class="writing-example informal-example">
                            "Hey, wanna grab coffee later? I've got some news to share about the weekend trip!"
                        </div>
                        <div class="writing-example informal-example">
                            "OMG, you won't believe what happened in class today! The teacher totally lost it when Jake showed up late again üòÇ"
                        </div>
                    </div>
                    
                    <!-- Comparison Section -->
                    <div class="comparison-section">
                        <div class="visualizer-title">Formal vs Informal Writing</div>
                        <div class="comparison-tables">
                            <table class="comparison-table formal-table">
                                <thead>
                                    <tr>
                                        <th>Formal Writing</th>
                                        <th>Characteristics</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showComparisonDetail('formal_structure')">
                                        <td>Structure</td>
                                        <td>Organized, logical flow</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('formal_vocabulary')">
                                        <td>Vocabulary</td>
                                        <td>Complex, technical terms</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('formal_grammar')">
                                        <td>Grammar</td>
                                        <td>Complete sentences, no slang</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('formal_tone')">
                                        <td>Tone</td>
                                        <td>Objective, impersonal</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="comparison-table informal-table">
                                <thead>
                                    <tr>
                                        <th>Informal Writing</th>
                                        <th>Characteristics</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showComparisonDetail('informal_structure')">
                                        <td>Structure</td>
                                        <td>Flexible, conversational</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('informal_vocabulary')">
                                        <td>Vocabulary</td>
                                        <td>Simple, everyday words</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('informal_grammar')">
                                        <td>Grammar</td>
                                        <td>Contractions, slang okay</td>
                                    </tr>
                                    <tr onclick="showComparisonDetail('informal_tone')">
                                        <td>Tone</td>
                                        <td>Personal, emotional</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Word Choice Pairs -->
                    <div class="word-choice-section">
                        <div class="visualizer-title">Formal vs Informal Word Choices</div>
                        <div id="wordChoiceInstruction" style="margin-bottom: 15px; color: var(--text-secondary); text-align: center; font-size: 0.9rem;">
                            Click on formal/informal word pairs
                        </div>
                        
                        <div class="word-choice-pair">
                            <div class="word-card formal-word" onclick="showWordDetail('assist')">
                                <div class="word-label">Formal</div>
                                <div class="word-text">Assist</div>
                            </div>
                            <div class="word-card informal-word" onclick="showWordDetail('help')">
                                <div class="word-label">Informal</div>
                                <div class="word-text">Help</div>
                            </div>
                        </div>
                        
                        <div class="word-choice-pair">
                            <div class="word-card formal-word" onclick="showWordDetail('request')">
                                <div class="word-label">Formal</div>
                                <div class="word-text">Request</div>
                            </div>
                            <div class="word-card informal-word" onclick="showWordDetail('ask')">
                                <div class="word-label">Informal</div>
                                <div class="word-text">Ask</div>
                            </div>
                        </div>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-secondary" onclick="newWordPair()">New Word Pair</button>
                            <button class="btn btn-small btn-secondary" onclick="showAllWordPairs()">Show All</button>
                        </div>
                    </div>
                    
                    <!-- Sentence Transformation -->
                    <div class="transformation-section">
                        <div class="visualizer-title">Sentence Transformation</div>
                        <div id="transformationInstruction" style="margin-bottom: 10px; color: var(--text-secondary); text-align: center;">
                            Convert between formal and informal styles
                        </div>
                        
                        <div class="sentence-display" id="originalSentence">
                            Click buttons to see examples
                        </div>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-primary" onclick="formalizeSentence()">Make Formal</button>
                            <button class="btn btn-small btn-secondary" onclick="informalizeSentence()">Make Informal</button>
                            <button class="btn btn-small btn-success" onclick="newSentence()">New Sentence</button>
                        </div>
                        
                        <div class="sentence-display" id="transformedSentence">
                            Transformation appears here
                        </div>
                    </div>
                    
                    <!-- Interactive Editor -->
                    <div class="editor-section">
                        <div class="visualizer-title">Practice Writing</div>
                        <textarea class="text-editor" id="writingEditor" placeholder="Type your text here..."></textarea>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-primary" onclick="checkFormal()">Check Formal</button>
                            <button class="btn btn-small btn-secondary" onclick="checkInformal()">Check Informal</button>
                            <button class="btn btn-small btn-success" onclick="suggestImprovements()">Improve</button>
                            <button class="btn btn-small btn-warning" onclick="clearEditor()">Clear</button>
                        </div>
                        
                        <div id="editorFeedback" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Write text and check its style
                        </div>
                    </div>
                    
                    <!-- Error Detection -->
                    <div class="error-detection-section">
                        <div class="visualizer-title">Style Error Detection</div>
                        <div class="error-text" id="errorText">
                            <span class="error-highlight" onclick="explainError('contraction')">I can't</span> attend the meeting because 
                            <span class="error-highlight" onclick="explainError('slang')">I gotta</span> finish my homework. 
                            <span class="error-highlight" onclick="explainError('casual')">It's super important</span> for my grade.
                        </div>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-warning" onclick="newErrorExample()">New Example</button>
                            <button class="btn btn-small btn-success" onclick="showCorrectedVersion()">Show Correction</button>
                            <button class="btn btn-small btn-primary" onclick="highlightErrors()">Find Errors</button>
                        </div>
                        
                        <div id="errorExplanation" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem;">
                            Click highlighted errors for explanations
                        </div>
                    </div>
                    
                    <!-- Classification Quiz -->
                    <div class="classification-section">
                        <div class="visualizer-title">Writing Context Classification</div>
                        <div id="classificationInstruction" style="margin-bottom: 10px; color: var(--text-primary); text-align: center;">
                            Drag contexts to correct writing style:
                        </div>
                        
                        <div class="classification-items" id="classificationItems">
                            <!-- Items will be populated by JavaScript -->
                        </div>
                        
                        <div class="classification-zones">
                            <div class="classification-zone" id="zoneFormal" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div style="color: var(--formal-blue); font-weight: bold;">Formal Writing</div>
                            </div>
                            <div class="classification-zone" id="zoneInformal" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div style="color: var(--informal-green); font-weight: bold;">Informal Writing</div>
                            </div>
                        </div>
                        
                        <div id="classificationFeedback" style="margin-top: 10px; color: var(--text-secondary); text-align: center; font-size: 0.9rem;"></div>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-secondary" onclick="newClassificationChallenge()">New Challenge</button>
                            <button class="btn btn-small btn-success" onclick="checkClassification()">Check Answers</button>
                            <button class="btn btn-small btn-warning" onclick="resetClassification()">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Writing Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive questions array - 80+ questions
        const questions = [
            // Basic Identification (1-20)
            {
                question: "Which writing style would you use for a school essay?",
                options: ["Formal", "Informal", "Both", "Neither"],
                answer: "A",
                explanation: "School essays require formal writing with proper structure, complete sentences, and academic vocabulary."
            },
            {
                question: "Which style is appropriate for a text message to a friend?",
                options: ["Informal", "Formal", "Academic", "Professional"],
                answer: "A",
                explanation: "Text messages to friends use informal writing with contractions, slang, and casual language."
            },
            {
                question: "What is the main purpose of formal writing?",
                options: ["To convey information objectively", "To express personal feelings", "To entertain readers", "To use creative language"],
                answer: "A",
                explanation: "Formal writing aims to convey information objectively, clearly, and professionally without personal bias."
            },
            {
                question: "Which of these is a characteristic of informal writing?",
                options: ["Use of contractions", "Complex sentence structure", "Technical vocabulary", "Third-person perspective"],
                answer: "A",
                explanation: "Informal writing commonly uses contractions (can't, won't, etc.) for a conversational tone."
            },
            {
                question: "What type of writing would you use for a job application?",
                options: ["Formal", "Informal", "Casual", "Conversational"],
                answer: "A",
                explanation: "Job applications require formal writing to demonstrate professionalism and respect for the potential employer."
            },
            {
                question: "Which writing style typically uses abbreviations like 'LOL' or 'BRB'?",
                options: ["Informal", "Formal", "Academic", "Technical"],
                answer: "A",
                explanation: "Abbreviations like LOL (laugh out loud) and BRB (be right back) are characteristic of informal digital communication."
            },
            {
                question: "What perspective is most common in formal writing?",
                options: ["Third person", "First person", "Second person", "Mixed perspectives"],
                answer: "A",
                explanation: "Formal writing typically uses third-person perspective to maintain objectivity and professionalism."
            },
            {
                question: "Which writing style would you use for a personal diary?",
                options: ["Informal", "Formal", "Academic", "Professional"],
                answer: "A",
                explanation: "Personal diaries use informal writing to express thoughts and feelings in a private, casual manner."
            },
            {
                question: "What is a key feature of formal vocabulary?",
                options: ["Precise and technical terms", "Slang expressions", "Colloquial phrases", "Abbreviations"],
                answer: "A",
                explanation: "Formal vocabulary uses precise, technical terms and avoids slang or colloquial expressions."
            },
            {
                question: "Which writing style is more likely to include emojis?",
                options: ["Informal", "Formal", "Academic", "Research"],
                answer: "A",
                explanation: "Emojis are characteristic of informal digital communication and are rarely used in formal writing."
            },
            {
                question: "What type of writing is required for a research paper?",
                options: ["Formal", "Informal", "Casual", "Personal"],
                answer: "A",
                explanation: "Research papers require formal writing with citations, objective tone, and academic vocabulary."
            },
            {
                question: "Which style would you use for social media posts with friends?",
                options: ["Informal", "Formal", "Academic", "Professional"],
                answer: "A",
                explanation: "Social media posts with friends typically use informal, casual language with personal expressions."
            },
            {
                question: "What is the typical tone of formal writing?",
                options: ["Objective and impersonal", "Emotional and personal", "Humorous and casual", "Conversational and friendly"],
                answer: "A",
                explanation: "Formal writing maintains an objective, impersonal tone to present information without personal bias."
            },
            {
                question: "Which writing style often uses incomplete sentences for effect?",
                options: ["Informal", "Formal", "Academic", "Technical"],
                answer: "A",
                explanation: "Informal writing may use sentence fragments for conversational effect, while formal writing requires complete sentences."
            },
            {
                question: "What type of writing is appropriate for a business email to a client?",
                options: ["Formal", "Informal", "Casual", "Personal"],
                answer: "A",
                explanation: "Business emails to clients require formal writing to maintain professionalism and respect."
            },
            {
                question: "Which style is more likely to include personal opinions?",
                options: ["Informal", "Formal", "Academic", "Scientific"],
                answer: "A",
                explanation: "Informal writing often includes personal opinions, while formal writing presents objective information."
            },
            {
                question: "What is a common feature of informal grammar?",
                options: ["Sentence fragments are acceptable", "Must use complete sentences", "Avoids contractions", "Uses complex structures"],
                answer: "A",
                explanation: "Informal writing may use sentence fragments to mimic natural speech patterns."
            },
            {
                question: "Which writing style would you use for a letter to a government official?",
                options: ["Formal", "Informal", "Casual", "Personal"],
                answer: "A",
                explanation: "Letters to government officials require formal writing to show respect and seriousness."
            },
            {
                question: "What type of vocabulary is common in informal writing?",
                options: ["Everyday, conversational words", "Technical jargon", "Academic terminology", "Formal expressions"],
                answer: "A",
                explanation: "Informal writing uses everyday, conversational vocabulary that people use in daily speech."
            },
            {
                question: "Which writing style requires careful proofreading?",
                options: ["Both formal and informal", "Only formal", "Only informal", "Neither"],
                answer: "A",
                explanation: "Both styles benefit from proofreading, but formal writing especially requires careful editing for errors."
            },

            // Word Choice (21-40)
            {
                question: "Which word is more formal: 'commence' or 'start'?",
                options: ["Commence", "Start", "Both are equally formal", "Neither is formal"],
                answer: "A",
                explanation: "'Commence' is more formal than 'start.' Formal writing often uses Latinate vocabulary."
            },
            {
                question: "Which is appropriate for formal writing: 'can't' or 'cannot'?",
                options: ["Cannot", "Can't", "Both are acceptable", "Neither should be used"],
                answer: "A",
                explanation: "Formal writing uses 'cannot' instead of the contraction 'can't.'"
            },
            {
                question: "Which phrase is informal: 'a lot of' or 'numerous'?",
                options: ["A lot of", "Numerous", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'A lot of' is informal; 'numerous' is the more formal alternative."
            },
            {
                question: "Which is formal: 'kids' or 'children'?",
                options: ["Children", "Kids", "Both are formal", "Both are informal"],
                answer: "A",
                explanation: "'Children' is formal; 'kids' is informal slang."
            },
            {
                question: "Which word is informal: 'awesome' or 'impressive'?",
                options: ["Awesome", "Impressive", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'Awesome' is informal slang; 'impressive' is more formal and precise."
            },
            {
                question: "Which is appropriate for academic writing: 'big' or 'significant'?",
                options: ["Significant", "Big", "Both are acceptable", "Neither should be used"],
                answer: "A",
                explanation: "'Significant' is more precise and formal than 'big' in academic writing."
            },
            {
                question: "Which word is formal: 'get' or 'obtain'?",
                options: ["Obtain", "Get", "Both are formal", "Both are informal"],
                answer: "A",
                explanation: "'Obtain' is formal; 'get' is informal and less precise."
            },
            {
                question: "Which is informal: 'cool' or 'acceptable'?",
                options: ["Cool", "Acceptable", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'Cool' is informal slang; 'acceptable' is standard formal vocabulary."
            },
            {
                question: "Which phrase is formal: 'in spite of' or 'even though'?",
                options: ["In spite of", "Even though", "Both are formal", "Both are informal"],
                answer: "A",
                explanation: "'In spite of' is more formal than 'even though.'"
            },
            {
                question: "Which word is informal: 'guy' or 'individual'?",
                options: ["Guy", "Individual", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'Guy' is informal; 'individual' is formal and gender-neutral."
            },
            {
                question: "Which is formal: 'help' or 'assist'?",
                options: ["Assist", "Help", "Both are formal", "Both are informal"],
                answer: "A",
                explanation: "'Assist' is more formal than 'help' in professional contexts."
            },
            {
                question: "Which word is informal: 'stuff' or 'materials'?",
                options: ["Stuff", "Materials", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'Stuff' is vague and informal; 'materials' is specific and formal."
            },
            {
                question: "Which is appropriate for business writing: 'buy' or 'purchase'?",
                options: ["Purchase", "Buy", "Both are acceptable", "Neither should be used"],
                answer: "A",
                explanation: "'Purchase' is more formal and appropriate for business writing than 'buy.'"
            },
            {
                question: "Which word is formal: 'ask' or 'inquire'?",
                options: ["Inquire", "Ask", "Both are formal", "Both are informal"],
                answer: "A",
                explanation: "'Inquire' is more formal than 'ask.'"
            },
            {
                question: "Which is informal: 'totally' or 'completely'?",
                options: ["Totally", "Completely", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'Totally' is informal slang; 'completely' is standard formal vocabulary."
            },
            {
                question: "Which phrase is formal: 'due to the fact that' or 'because'?",
                options: ["Due to the fact that", "Because", "Both are formal", "Both are informal"],
                answer: "A",
                explanation: "While both can be used formally, 'due to the fact that' is more characteristic of formal writing."
            },
            {
                question: "Which word is informal: 'awesome' or 'excellent'?",
                options: ["Awesome", "Excellent", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'Awesome' is informal; 'excellent' is appropriate for formal writing."
            },
            {
                question: "Which is formal: 'tell' or 'inform'?",
                options: ["Inform", "Tell", "Both are formal", "Both are informal"],
                answer: "A",
                explanation: "'Inform' is more formal than 'tell' in professional communication."
            },
            {
                question: "Which word is informal: 'gonna' or 'going to'?",
                options: ["Gonna", "Going to", "Both are informal", "Both are formal"],
                answer: "A",
                explanation: "'Gonna' is informal slang; 'going to' is standard English."
            },
            {
                question: "Which is appropriate for formal reports: 'maybe' or 'perhaps'?",
                options: ["Perhaps", "Maybe", "Both are acceptable", "Neither should be used"],
                answer: "A",
                explanation: "'Perhaps' is more formal than 'maybe' in written reports."
            },

            // Sentence Structure (41-60)
            {
                question: "Which sentence is formal?",
                options: ["The experiment was conducted according to established protocols.", "We did the experiment like we always do.", "The experiment turned out awesome!", "Experiment done, got good results."],
                answer: "A",
                explanation: "Sentence A uses formal vocabulary, complete structure, and passive voice appropriately."
            },
            {
                question: "Which sentence is informal?",
                options: ["Hey, wanna grab lunch later?", "Would you be interested in joining me for lunch?", "I would like to extend an invitation to lunch.", "Lunch availability is being queried."],
                answer: "A",
                explanation: "Sentence A uses contraction ('wanna'), casual phrasing, and conversational tone."
            },
            {
                question: "What makes a sentence formal?",
                options: ["Complete thoughts with proper grammar", "Sentence fragments for effect", "Use of slang terms", "Casual conversational style"],
                answer: "A",
                explanation: "Formal sentences express complete thoughts with proper grammar and structure."
            },
            {
                question: "Which sentence structure is common in informal writing?",
                options: ["Short, simple sentences", "Long, complex sentences", "Highly technical phrases", "Passive voice constructions"],
                answer: "A",
                explanation: "Informal writing often uses short, simple sentences like natural speech."
            },
            {
                question: "Which sentence would appear in a formal report?",
                options: ["The data indicates a significant correlation.", "The data looks really interesting!", "Data shows cool stuff happening.", "We think the data is pretty neat."],
                answer: "A",
                explanation: "Sentence A uses formal vocabulary ('indicates', 'significant correlation') and objective tone."
            },
            {
                question: "Which is an informal sentence?",
                options: ["OMG, that concert was lit!", "The musical performance was exceptional.", "The concert featured outstanding performances.", "Attendees praised the quality of the concert."],
                answer: "A",
                explanation: "Sentence A uses slang ('OMG', 'lit') characteristic of informal communication."
            },
            {
                question: "What should formal sentences avoid?",
                options: ["Sentence fragments and run-ons", "Proper subject-verb agreement", "Clear pronoun references", "Logical organization"],
                answer: "A",
                explanation: "Formal writing should avoid sentence fragments and run-on sentences."
            },
            {
                question: "Which sentence uses formal punctuation correctly?",
                options: ["The meeting, which was scheduled for 2:00 PM, has been postponed.", "The meeting that was at 2 is now later.", "Meeting at 2 - can't make it, sorry!", "2 PM meeting? Nope, not happening."],
                answer: "A",
                explanation: "Sentence A uses commas correctly to set off a non-essential clause, showing formal punctuation."
            },
            {
                question: "Which is an example of informal sentence structure?",
                options: ["So, anyway, I was thinking...", "Therefore, it can be concluded that...", "In conclusion, the evidence suggests...", "Based on the findings, we recommend..."],
                answer: "A",
                explanation: "Sentence A uses conversational fillers ('So, anyway') characteristic of informal speech patterns."
            },
            {
                question: "Which sentence would be appropriate in a business email?",
                options: ["Please find attached the requested documents.", "Hey, here are those files you wanted.", "Files attached, check them out.", "Got your request, sent the stuff."],
                answer: "A",
                explanation: "Sentence A uses formal phrasing ('Please find attached') appropriate for business communication."
            },
            {
                question: "What is a characteristic of formal sentence construction?",
                options: ["Use of subordinate clauses", "Frequent exclamation points", "Sentence fragments", "Conversational tone"],
                answer: "A",
                explanation: "Formal writing often uses complex sentences with subordinate clauses to show relationships between ideas."
            },
            {
                question: "Which sentence is too informal for academic writing?",
                options: ["The results were kinda surprising.", "The results were somewhat unexpected.", "The results deviated from predictions.", "Unexpected results were obtained."],
                answer: "A",
                explanation: "Sentence A uses informal word 'kinda' which is inappropriate for academic writing."
            },
            {
                question: "Which sentence demonstrates formal parallel structure?",
                options: ["The study examined reading habits, analyzed comprehension levels, and evaluated retention rates.", "The study looked at reading, how people understand, and if they remember.", "We studied reading, understanding stuff, and remembering things.", "Reading habits, understanding, remembering - all studied."],
                answer: "A",
                explanation: "Sentence A uses parallel verb structure ('examined... analyzed... evaluated') characteristic of formal writing."
            },
            {
                question: "Which sentence would appear in a text message?",
                options: ["BRB, need to take this call", "I will return shortly as I need to answer this telephone call.", "Please excuse me while I attend to an incoming call.", "I must temporarily depart to respond to a telephonic communication."],
                answer: "A",
                explanation: "Sentence A uses abbreviation ('BRB') and casual phrasing typical of text messages."
            },
            {
                question: "What should informal sentences maintain?",
                options: ["Clarity and natural flow", "Complex grammatical structures", "Technical precision", "Formal vocabulary"],
                answer: "A",
                explanation: "Even informal writing should maintain clarity and natural conversational flow."
            },
            {
                question: "Which sentence uses formal nominalization?",
                options: ["The implementation of the policy requires careful consideration.", "We need to think carefully about how to put the policy into practice.", "Putting the policy into action needs careful thought.", "Gotta think hard about how to do this policy thing."],
                answer: "A",
                explanation: "Sentence A uses nominalization ('implementation', 'consideration') characteristic of formal writing."
            },
            {
                question: "Which is an informal question structure?",
                options: ["What's up?", "How are you proceeding?", "What is the current status?", "Could you provide an update?"],
                answer: "A",
                explanation: "'What's up?' is an informal greeting, not a formal inquiry."
            },
            {
                question: "Which sentence would be in a formal invitation?",
                options: ["You are cordially invited to attend.", "Hey, come to my party!", "Party at my place - be there!", "Wanna come hang out?"],
                answer: "A",
                explanation: "Sentence A uses formal phrasing ('cordially invited') appropriate for formal invitations."
            },
            {
                question: "What makes sentence B informal: 'The project is going great!'?",
                options: ["Use of casual adverb 'great'", "Complete sentence structure", "Proper subject-verb agreement", "Clear meaning"],
                answer: "A",
                explanation: "While grammatically correct, 'great' is less formal than alternatives like 'well' or 'successfully.'"
            },
            {
                question: "Which sentence uses formal hedging language?",
                options: ["It appears that further investigation may be warranted.", "We probably should look into this more.", "Looks like we need to check this out.", "Gotta investigate this for sure."],
                answer: "A",
                explanation: "Sentence A uses formal hedging ('appears that', 'may be') to express cautious conclusions."
            },

            // Context and Audience (61-80)
            {
                question: "Which audience requires formal writing?",
                options: ["University admissions committee", "Close friends on social media", "Family group chat", "Text message to sibling"],
                answer: "A",
                explanation: "University admissions committees expect formal, professional writing in applications."
            },
            {
                question: "When is informal writing appropriate?",
                options: ["Personal blog about hobbies", "Scientific research paper", "Business proposal", "Legal document"],
                answer: "A",
                explanation: "Personal blogs allow informal writing to express personality and connect with readers."
            },
            {
                question: "What determines writing style choice?",
                options: ["Audience and purpose", "Only personal preference", "Time of day", "Word count requirement"],
                answer: "A",
                explanation: "Writing style should be chosen based on audience (who reads it) and purpose (why it's written)."
            },
            {
                question: "Which context requires formal writing?",
                options: ["Job interview follow-up email", "Text to a friend about plans", "Social media comment", "Personal journal entry"],
                answer: "A",
                explanation: "Job interview communications require formal writing to show professionalism."
            },
            {
                question: "When can informal writing be used professionally?",
                options: ["Internal team communication", "Client presentations", "Annual reports", "Company announcements"],
                answer: "A",
                explanation: "Internal team communication may use informal writing for efficiency and team bonding."
            },
            {
                question: "Which audience would expect informal writing?",
                options: ["Peers in casual setting", "Government officials", "Academic reviewers", "Business clients"],
                answer: "A",
                explanation: "Peers in casual settings expect informal, conversational communication."
            },
            {
                question: "What should you consider when choosing writing style?",
                options: ["Reader's expectations", "Only your personal comfort", "The weather", "Time of year"],
                answer: "A",
                explanation: "Effective writing considers the reader's expectations and needs."
            },
            {
                question: "Which purpose requires formal writing?",
                options: ["Persuading in academic debate", "Entertaining friends", "Sharing personal news", "Making casual plans"],
                answer: "A",
                explanation: "Academic persuasion requires formal evidence and logical structure."
            },
            {
                question: "When is mixed style acceptable?",
                options: ["Professional blogs with personal voice", "Legal contracts", "Scientific journals", "Official government documents"],
                answer: "A",
                explanation: "Professional blogs may mix formal information with informal personal voice."
            },
            {
                question: "Which context always requires formal writing?",
                options: ["Court documents", "Text messages", "Personal letters", "Diary entries"],
                answer: "A",
                explanation: "Court documents require precise, formal language for legal accuracy."
            },
            {
                question: "What audience allows most informal writing?",
                options: ["Close friends and family", "Strangers in professional setting", "Teachers and professors", "Employers and supervisors"],
                answer: "A",
                explanation: "Close friends and family allow the most informal, personal communication style."
            },
            {
                question: "Which purpose is best served by formal writing?",
                options: ["Documenting research findings", "Sharing vacation photos", "Planning weekend activities", "Telling funny stories"],
                answer: "A",
                explanation: "Research documentation requires formal writing for accuracy and credibility."
            },
            {
                question: "When should you avoid informal writing?",
                options: ["When credibility is crucial", "When texting close friends", "In personal narratives", "For creative writing"],
                answer: "A",
                explanation: "Informal writing can undermine credibility in professional or academic contexts."
            },
            {
                question: "Which audience might accept semi-formal writing?",
                options: ["Work colleagues you know well", "Unknown business clients", "University professors", "Government agencies"],
                answer: "A",
                explanation: "Familiar work colleagues may accept semi-formal communication."
            },
            {
                question: "What context requires most formal writing?",
                options: ["Academic publishing", "Social media posts", "Personal emails", "Text conversations"],
                answer: "A",
                explanation: "Academic publishing has the highest standards for formal writing style."
            },
            {
                question: "When can you use informal elements in formal writing?",
                options: ["Almost never", "Frequently", "In every paragraph", "Instead of formal elements"],
                answer: "A",
                explanation: "Formal writing should maintain consistent formality; informal elements undermine it."
            },
            {
                question: "Which audience determines formality level?",
                options: ["All of the above", "Only teachers", "Only friends", "Only employers"],
                answer: "A",
                explanation: "All audiences influence appropriate formality level based on relationship and context."
            },
            {
                question: "What should guide style choice in digital communication?",
                options: ["Platform and relationship", "Only platform type", "Only personal mood", "Time of day only"],
                answer: "A",
                explanation: "Digital style should consider both platform norms and relationship with audience."
            },
            {
                question: "Which context allows creative mixing of styles?",
                options: ["Personal creative writing", "Legal agreements", "Scientific reports", "Business contracts"],
                answer: "A",
                explanation: "Personal creative writing allows experimentation with style mixing."
            },
            {
                question: "What is the safest approach for unknown audience?",
                options: ["Start formal, adjust if needed", "Always use informal", "Use highly technical style", "Mix styles randomly"],
                answer: "A",
                explanation: "With unknown audiences, start with formal style and adjust based on their response."
            }
        ];

        // Additional questions beyond 80
        const additionalQuestions = [
            {
                question: "Which contraction should be avoided in formal writing?",
                options: ["All contractions", "Only 'can't'", "Only 'won't'", "No contractions need avoiding"],
                answer: "A",
                explanation: "Formal writing generally avoids all contractions for more precise language."
            },
            {
                question: "What is 'register' in writing?",
                options: ["Appropriateness for context", "Word count", "Font size", "Page layout"],
                answer: "A",
                explanation: "Register refers to language appropriateness for specific contexts or situations."
            },
            {
                question: "Which is a formal closing for a letter?",
                options: ["Sincerely", "Later!", "TTYL", "Bye"],
                answer: "A",
                explanation: "'Sincerely' is a standard formal closing for letters."
            }
        ];

        // Combine all questions
        const allQuestions = [...questions, ...additionalQuestions];

        // Writing tips
        const writingTips = [
            "Remember: Formal = for professional/academic contexts; Informal = for personal/casual contexts!",
            "Formal writing avoids contractions (use 'cannot' not 'can't'), while informal writing uses them naturally.",
            "Consider your audience: Who are you writing for? What do they expect?",
            "Formal writing uses third-person perspective; informal can use first or second person.",
            "When in doubt about formality level, it's safer to be slightly more formal than too casual.",
            "Proofread formal writing carefully - errors undermine credibility!",
            "Informal writing can include emotions and personal opinions; formal writing should be objective.",
            "Match your vocabulary to your context: technical terms for formal, everyday words for informal."
        ];

        // Classification items
        const classificationItems = [
            { name: "Research Paper", type: "formal", color: "#2196F3" },
            { name: "Text to Best Friend", type: "informal", color: "#4CAF50" },
            { name: "Job Application", type: "formal", color: "#2196F3" },
            { name: "Social Media Post", type: "informal", color: "#4CAF50" },
            { name: "Business Proposal", type: "formal", color: "#2196F3" },
            { name: "Personal Diary", type: "informal", color: "#4CAF50" },
            { name: "Legal Document", type: "formal", color: "#2196F3" },
            { name: "Casual Email", type: "informal", color: "#4CAF50" }
        ];

        // Word pairs for comparison
        const wordPairs = [
            { formal: "Assist", informal: "Help", detail: "'Assist' is formal; 'help' is everyday informal usage." },
            { formal: "Request", informal: "Ask", detail: "'Request' is formal/professional; 'ask' is casual." },
            { formal: "Purchase", informal: "Buy", detail: "'Purchase' is formal/business; 'buy' is common informal." },
            { formal: "Approximately", informal: "About", detail: "'Approximately' is precise/formal; 'about' is casual estimate." },
            { formal: "Therefore", informal: "So", detail: "'Therefore' is formal/logical; 'so' is casual/conversational." },
            { formal: "Commence", informal: "Start", detail: "'Commence' is formal/Latinate; 'start' is Germanic/common." },
            { formal: "Terminate", informal: "End", detail: "'Terminate' is formal/technical; 'end' is simple/common." },
            { formal: "Utilize", informal: "Use", detail: "'Utilize' is formal (specific use); 'use' is general/informal." },
            { formal: "Approach", informal: "Way", detail: "'Approach' is formal/methodical; 'way' is casual/simple." },
            { formal: "Approval", informal: "OK", detail: "'Approval' is formal/official; 'OK' is casual agreement." }
        ];

        // Sentence transformation examples
        const sentenceExamples = [
            {
                informal: "Hey, can you help me with this project? It's due tomorrow!",
                formal: "Could you please provide assistance with this project? The deadline is tomorrow."
            },
            {
                informal: "I think the meeting went really well!",
                formal: "The meeting appears to have been conducted successfully."
            },
            {
                informal: "This data shows some cool patterns we should check out.",
                formal: "The data reveals noteworthy patterns that warrant further investigation."
            },
            {
                informal: "Sorry, I can't make it to the party.",
                formal: "I regret that I will be unable to attend the social gathering."
            },
            {
                informal: "The new policy is kinda confusing, tbh.",
                formal: "The recently implemented policy appears to be somewhat unclear."
            }
        ];

        // Error examples for detection
        const errorExamples = [
            {
                text: "I can't attend the meeting because I gotta finish my homework. It's super important for my grade.",
                errors: [
                    { word: "can't", type: "contraction", fix: "cannot" },
                    { word: "gotta", type: "slang", fix: "must" },
                    { word: "super important", type: "casual", fix: "extremely important" }
                ],
                corrected: "I cannot attend the meeting because I must finish my homework. It is extremely important for my grade."
            },
            {
                text: "The experiment results were awesome! We totally nailed it!",
                errors: [
                    { word: "awesome", type: "slang", fix: "impressive" },
                    { word: "totally nailed it", type: "casual", fix: "were highly successful" }
                ],
                corrected: "The experiment results were impressive! They were highly successful."
            },
            {
                text: "Hey boss, wanna grab lunch and chat about the project?",
                errors: [
                    { word: "Hey boss", type: "casual greeting", fix: "Dear [Boss's Name]" },
                    { word: "wanna", type: "contraction", fix: "would you like to" },
                    { word: "grab lunch", type: "casual", fix: "have lunch" }
                ],
                corrected: "Dear [Boss's Name], would you like to have lunch and discuss the project?"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentClassification: [],
            draggedItem: null,
            currentWordPair: 0,
            currentSentence: 0,
            currentError: 0
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const writingTip = document.getElementById('writingTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const classificationItemsContainer = document.getElementById('classificationItems');
        const classificationFeedback = document.getElementById('classificationFeedback');
        const originalSentence = document.getElementById('originalSentence');
        const transformedSentence = document.getElementById('transformedSentence');
        const writingEditor = document.getElementById('writingEditor');
        const editorFeedback = document.getElementById('editorFeedback');
        const errorText = document.getElementById('errorText');
        const errorExplanation = document.getElementById('errorExplanation');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupClassification();
            setupWordPairs();
            setupSentences();
            setupErrorExample();
        }

        // Setup classification
        function setupClassification() {
            newClassificationChallenge();
        }

        function newClassificationChallenge() {
            // Shuffle and select items
            const shuffled = [...classificationItems].sort(() => Math.random() - 0.5);
            appState.currentClassification = shuffled;
            
            classificationItemsContainer.innerHTML = '';
            classificationFeedback.textContent = 'Drag contexts to correct writing style';
            classificationFeedback.style.color = 'var(--text-secondary)';
            
            // Clear zones
            document.getElementById('zoneFormal').innerHTML = '<div style="color: var(--formal-blue); font-weight: bold;">Formal Writing</div>';
            document.getElementById('zoneInformal').innerHTML = '<div style="color: var(--informal-green); font-weight: bold;">Informal Writing</div>';
            
            shuffled.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'classification-item';
                itemDiv.textContent = item.name;
                itemDiv.style.backgroundColor = item.color;
                itemDiv.style.color = 'white';
                itemDiv.draggable = true;
                itemDiv.id = `item-${index}`;
                itemDiv.dataset.type = item.type;
                
                itemDiv.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', index);
                    appState.draggedItem = item;
                    itemDiv.style.opacity = '0.5';
                });
                
                itemDiv.addEventListener('dragend', () => {
                    itemDiv.style.opacity = '1';
                });
                
                classificationItemsContainer.appendChild(itemDiv);
            });
        }

        function allowDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.add('active');
        }

        function drop(event) {
            event.preventDefault();
            const zone = event.currentTarget;
            zone.classList.remove('active');
            
            if (appState.draggedItem) {
                const itemDiv = document.createElement('div');
                itemDiv.textContent = appState.draggedItem.name;
                itemDiv.style.margin = '5px';
                itemDiv.style.padding = '5px';
                itemDiv.style.backgroundColor = appState.draggedItem.color;
                itemDiv.style.color = 'white';
                itemDiv.style.borderRadius = '4px';
                itemDiv.style.fontSize = '0.8rem';
                
                zone.appendChild(itemDiv);
                classificationFeedback.textContent = `Placed ${appState.draggedItem.name} in ${zone.id.replace('zone', '')} category`;
            }
        }

        function checkClassification() {
            let correct = 0;
            let total = appState.currentClassification.length;
            
            // Check each zone
            const zones = {
                zoneFormal: 'formal',
                zoneInformal: 'informal'
            };
            
            for (const [zoneId, correctType] of Object.entries(zones)) {
                const zone = document.getElementById(zoneId);
                const items = zone.querySelectorAll('div:not(:first-child)');
                
                items.forEach(item => {
                    const itemName = item.textContent;
                    const originalItem = appState.currentClassification.find(i => i.name === itemName);
                    
                    if (originalItem && originalItem.type === correctType) {
                        correct++;
                        item.style.border = '2px solid var(--success-teal)';
                    } else {
                        item.style.border = '2px solid var(--error-red)';
                    }
                });
            }
            
            const percentage = Math.round((correct / total) * 100);
            classificationFeedback.textContent = `Score: ${correct}/${total} (${percentage}%)`;
            classificationFeedback.style.color = percentage >= 80 ? 'var(--success-teal)' : 
                                               percentage >= 60 ? 'var(--warning-orange)' : 'var(--error-red)';
            
            if (percentage === 100) {
                classificationFeedback.textContent += ' - Perfect classification!';
            }
        }

        function resetClassification() {
            newClassificationChallenge();
        }

        // Word pair functions
        function setupWordPairs() {
            updateWordPairDisplay();
        }

        function newWordPair() {
            appState.currentWordPair = (appState.currentWordPair + 1) % wordPairs.length;
            updateWordPairDisplay();
        }

        function updateWordPairDisplay() {
            const pair = wordPairs[appState.currentWordPair];
            
            // Update word cards
            const formalCards = document.querySelectorAll('.formal-word .word-text');
            const informalCards = document.querySelectorAll('.informal-word .word-text');
            
            if (formalCards[0]) formalCards[0].textContent = pair.formal;
            if (formalCards[1]) formalCards[1].textContent = pair.formal;
            if (informalCards[0]) informalCards[0].textContent = pair.informal;
            if (informalCards[1]) informalCards[1].textContent = pair.informal;
        }

        function showWordDetail(word) {
            const pair = wordPairs[appState.currentWordPair];
            let detail = '';
            
            if (word === pair.formal.toLowerCase() || word === 'assist' || word === 'request') {
                detail = `Formal word: ${pair.formal}\n\nUsage: ${pair.detail}\n\nExample: "Please ${pair.formal.toLowerCase()} me with this task."`;
            } else {
                detail = `Informal word: ${pair.informal}\n\nUsage: ${pair.detail}\n\nExample: "Can you ${pair.informal} me with this?"`;
            }
            
            alert(detail);
        }

        function showAllWordPairs() {
            let allPairs = "Formal ‚Üî Informal Word Pairs:\n\n";
            wordPairs.forEach((pair, index) => {
                allPairs += `${pair.formal} ‚Üî ${pair.informal}\n`;
                allPairs += `(${pair.detail})\n\n`;
            });
            alert(allPairs);
        }

        // Sentence transformation functions
        function setupSentences() {
            newSentence();
        }

        function newSentence() {
            appState.currentSentence = (appState.currentSentence + 1) % sentenceExamples.length;
            const example = sentenceExamples[appState.currentSentence];
            originalSentence.textContent = `"${example.informal}"`;
            transformedSentence.textContent = "Transformation will appear here";
            transformedSentence.style.color = "var(--text-secondary)";
        }

        function formalizeSentence() {
            const example = sentenceExamples[appState.currentSentence];
            transformedSentence.textContent = `"${example.formal}"`;
            transformedSentence.style.color = "var(--formal-blue)";
            transformedSentence.classList.add('highlight');
            setTimeout(() => transformedSentence.classList.remove('highlight'), 1000);
        }

        function informalizeSentence() {
            const example = sentenceExamples[appState.currentSentence];
            transformedSentence.textContent = `"${example.informal}"`;
            transformedSentence.style.color = "var(--informal-green)";
            transformedSentence.classList.add('highlight');
            setTimeout(() => transformedSentence.classList.remove('highlight'), 1000);
        }

        // Editor functions
        function checkFormal() {
            const text = writingEditor.value.trim();
            if (!text) {
                editorFeedback.textContent = "Please enter some text first.";
                editorFeedback.style.color = "var(--warning-orange)";
                return;
            }
            
            let score = 0;
            let feedback = [];
            
            // Check for contractions
            const contractions = /\b(can't|won't|don't|isn't|aren't|wasn't|weren't|haven't|hasn't|hadn't|shouldn't|couldn't|wouldn't|mustn't|mightn't|needn't|shan't|it's|he's|she's|that's|there's|here's|who's|what's|where's|when's|why's|how's|I'm|you're|we're|they're|I've|you've|we've|they've|I'd|you'd|he'd|she'd|we'd|they'd|I'll|you'll|he'll|she'll|we'll|they'll|gonna|wanna|gotta)\b/gi;
            if (contractions.test(text)) {
                feedback.push("Avoid contractions (use 'cannot' instead of 'can't')");
                score--;
            } else {
                feedback.push("‚úì No contractions found (good for formal writing)");
                score++;
            }
            
            // Check for informal words
            const informalWords = /\b(awesome|cool|great|nice|stuff|things|guy|kid|lots of|a lot of|kinda|sorta|totally|really|super|pretty|maybe|okay|OK|yeah|yep|nope|uh|um|like)\b/gi;
            const informalMatches = text.match(informalWords);
            if (informalMatches) {
                feedback.push(`Avoid informal words: ${informalMatches.slice(0, 3).join(', ')}`);
                score--;
            } else {
                feedback.push("‚úì No obvious informal words found");
                score++;
            }
            
            // Check for first person in formal (can be okay sometimes)
            const firstPerson = /\b(I|me|my|mine|we|us|our|ours)\b/gi;
            if (firstPerson.test(text) && text.length < 100) {
                feedback.push("Consider using third person for more formal tone");
                score--;
            }
            
            // Check sentence structure
            const sentenceEnd = /[.!?]$/;
            if (sentenceEnd.test(text)) {
                feedback.push("‚úì Proper sentence endings");
                score++;
            }
            
            // Overall assessment
            let assessment = "";
            if (score >= 2) {
                assessment = "Text appears formal and appropriate for professional/academic contexts.";
                editorFeedback.style.color = "var(--success-teal)";
            } else if (score >= 0) {
                assessment = "Text is somewhat formal but could be improved.";
                editorFeedback.style.color = "var(--warning-orange)";
            } else {
                assessment = "Text is too informal for formal contexts.";
                editorFeedback.style.color = "var(--error-red)";
            }
            
            editorFeedback.innerHTML = `<strong>Formality Assessment:</strong> ${assessment}<br>${feedback.join('<br>')}`;
        }

        function checkInformal() {
            const text = writingEditor.value.trim();
            if (!text) {
                editorFeedback.textContent = "Please enter some text first.";
                editorFeedback.style.color = "var(--warning-orange)";
                return;
            }
            
            let feedback = [];
            
            // Check for contractions (good in informal)
            const contractions = /\b(can't|won't|don't|isn't|it's|I'm|you're)\b/i;
            if (contractions.test(text)) {
                feedback.push("‚úì Contractions used (appropriate for informal writing)");
            } else {
                feedback.push("Consider using contractions for more natural informal tone");
            }
            
            // Check for conversational elements
            const questions = /\?/g;
            const questionCount = (text.match(questions) || []).length;
            if (questionCount > 0) {
                feedback.push(`‚úì ${questionCount} question(s) (conversational)`);
            }
            
            const exclamations = /!/g;
            const exclamationCount = (text.match(exclamations) || []).length;
            if (exclamationCount > 0) {
                feedback.push(`‚úì ${exclamationCount} exclamation(s) (expressive)`);
            }
            
            // Check for personal pronouns
            const personalPronouns = /\b(I|me|my|mine|you|your|yours|we|us|our|ours)\b/gi;
            const pronounCount = (text.match(personalPronouns) || []).length;
            if (pronounCount > 0) {
                feedback.push(`‚úì Personal pronouns used (${pronounCount} times)`);
            }
            
            // Overall assessment
            let assessment = "";
            if (pronounCount > 0 || contractions.test(text) || questionCount > 0) {
                assessment = "Text has informal, conversational qualities.";
                editorFeedback.style.color = "var(--success-teal)";
            } else {
                assessment = "Text reads as fairly formal. Consider more personal elements for informal tone.";
                editorFeedback.style.color = "var(--warning-orange)";
            }
            
            editorFeedback.innerHTML = `<strong>Informal Assessment:</strong> ${assessment}<br>${feedback.join('<br>')}`;
        }

        function suggestImprovements() {
            const text = writingEditor.value.trim();
            if (!text) {
                editorFeedback.textContent = "Please enter some text first.";
                return;
            }
            
            let suggestions = [];
            
            // Suggest replacing contractions
            if (text.includes("can't")) suggestions.push("Replace 'can't' with 'cannot' for formal writing");
            if (text.includes("don't")) suggestions.push("Replace 'don't' with 'do not'");
            if (text.includes("won't")) suggestions.push("Replace 'won't' with 'will not'");
            if (text.includes("it's")) suggestions.push("Replace 'it's' with 'it is' (unless possessive)");
            
            // Suggest replacing informal words
            if (text.toLowerCase().includes("awesome")) suggestions.push("Replace 'awesome' with 'impressive' or 'remarkable'");
            if (text.toLowerCase().includes("cool")) suggestions.push("Replace 'cool' with 'interesting' or 'noteworthy'");
            if (text.toLowerCase().includes("stuff")) suggestions.push("Replace 'stuff' with specific items or 'materials'");
            if (text.toLowerCase().includes("guy")) suggestions.push("Replace 'guy' with 'person' or 'individual'");
            if (text.toLowerCase().includes("a lot of")) suggestions.push("Replace 'a lot of' with 'many' or 'numerous'");
            if (text.toLowerCase().includes("kinda")) suggestions.push("Replace 'kinda' with 'somewhat' or 'rather'");
            
            // Sentence structure suggestions
            if (text.endsWith("...")) suggestions.push("Complete sentences are better for formal writing");
            
            if (suggestions.length === 0) {
                editorFeedback.innerHTML = "<strong>Great job!</strong> Your text appears well-written. For formal writing, ensure you have: complete sentences, proper punctuation, and objective tone.";
                editorFeedback.style.color = "var(--success-teal)";
            } else {
                editorFeedback.innerHTML = `<strong>Suggestions for more formal writing:</strong><br>${suggestions.slice(0, 5).join('<br>')}`;
                editorFeedback.style.color = "var(--warning-orange)";
            }
        }

        function clearEditor() {
            writingEditor.value = '';
            editorFeedback.textContent = "Write text and check its style";
            editorFeedback.style.color = "var(--text-secondary)";
        }

        // Error detection functions
        function setupErrorExample() {
            updateErrorExample();
        }

        function newErrorExample() {
            appState.currentError = (appState.currentError + 1) % errorExamples.length;
            updateErrorExample();
        }

        function updateErrorExample() {
            const example = errorExamples[appState.currentError];
            let html = example.text;
            
            // Highlight errors
            example.errors.forEach(error => {
                const regex = new RegExp(`\\b${error.word}\\b`, 'gi');
                html = html.replace(regex, `<span class="error-highlight" onclick="explainError('${error.type}', '${error.fix}')">$&</span>`);
            });
            
            errorText.innerHTML = html;
            errorExplanation.textContent = "Click highlighted errors for explanations";
        }

        function explainError(type, fix) {
            let explanation = "";
            
            switch(type) {
                case 'contraction':
                    explanation = "Contractions like 'can't' are informal. Use 'cannot' in formal writing.";
                    break;
                case 'slang':
                    explanation = "Slang terms like 'gotta' are too casual for formal writing. Use standard English like 'must'.";
                    break;
                case 'casual':
                    explanation = "Casual expressions like 'super important' should be replaced with more formal alternatives like 'extremely important'.";
                    break;
                case 'casual greeting':
                    explanation = "Casual greetings are inappropriate in professional communication. Use formal salutations.";
                    break;
                default:
                    explanation = "This word/phrase is too informal for formal writing contexts.";
            }
            
            if (fix) {
                explanation += `\n\nSuggestion: Replace with '${fix}'`;
            }
            
            errorExplanation.innerHTML = `<strong>Style Error:</strong> ${explanation}`;
            errorExplanation.style.color = "var(--warning-orange)";
        }

        function showCorrectedVersion() {
            const example = errorExamples[appState.currentError];
            errorExplanation.innerHTML = `<strong>Corrected Version:</strong><br>"${example.corrected}"`;
            errorExplanation.style.color = "var(--success-teal)";
        }

        function highlightErrors() {
            const spans = errorText.querySelectorAll('.error-highlight');
            spans.forEach(span => {
                span.classList.add('highlight');
                setTimeout(() => span.classList.remove('highlight'), 2000);
            });
            errorExplanation.textContent = "Errors are highlighted in red. Click on them for explanations.";
        }

        // Comparison detail
        window.showComparisonDetail = function(detail) {
            let info = "";
            
            switch(detail) {
                case 'formal_structure':
                    info = "Formal Writing Structure:\n\n‚Ä¢ Logical organization with clear introduction, body, conclusion\n‚Ä¢ Paragraphs with topic sentences and supporting details\n‚Ä¢ Transitions between ideas and paragraphs\n‚Ä¢ Consistent formatting and headings\n‚Ä¢ Formal citations if referencing sources";
                    break;
                case 'formal_vocabulary':
                    info = "Formal Vocabulary:\n\n‚Ä¢ Technical and precise terminology\n‚Ä¢ Latinate words (commence, terminate, utilize)\n‚Ä¢ Avoids slang, colloquialisms, and contractions\n‚Ä¢ Third-person perspective\n‚Ä¢ Objective, impersonal language";
                    break;
                case 'formal_grammar':
                    info = "Formal Grammar:\n\n‚Ä¢ Complete sentences only (no fragments)\n‚Ä¢ Proper punctuation and capitalization\n‚Ä¢ Avoids run-on sentences\n‚Ä¢ Correct subject-verb agreement\n‚Ä¢ Formal sentence structures with subordination";
                    break;
                case 'formal_tone':
                    info = "Formal Tone:\n\n‚Ä¢ Objective and impersonal\n‚Ä¢ Professional and respectful\n‚Ä¢ Serious and authoritative\n‚Ä¢ Avoids emotional language\n‚Ä¢ Maintains appropriate distance";
                    break;
                case 'informal_structure':
                    info = "Informal Writing Structure:\n\n‚Ä¢ Flexible organization\n‚Ä¢ May use bullet points or lists\n‚Ä¢ Paragraphs may be shorter\n‚Ä¢ More conversational flow\n‚Ä¢ Less rigid formatting";
                    break;
                case 'informal_vocabulary':
                    info = "Informal Vocabulary:\n\n‚Ä¢ Everyday, conversational words\n‚Ä¢ Contractions (can't, won't, it's)\n‚Ä¢ Slang and colloquial expressions\n‚Ä¢ First or second person perspective\n‚Ä¢ Personal and expressive language";
                    break;
                case 'informal_grammar':
                    info = "Informal Grammar:\n\n‚Ä¢ Sentence fragments acceptable\n‚Ä¢ More flexible punctuation\n‚Ä¢ May use ellipses, dashes for effect\n‚Ä¢ Conversational sentence patterns\n‚Ä¢ Can mimic speech patterns";
                    break;
                case 'informal_tone':
                    info = "Informal Tone:\n\n‚Ä¢ Personal and subjective\n‚Ä¢ Friendly and casual\n‚Ä¢ Emotional and expressive\n‚Ä¢ Can include humor\n‚Ä¢ Creates connection with reader";
                    break;
                default:
                    info = "Select a specific aspect for detailed information.";
            }
            
            alert(info);
        };

        // Writing detail
        window.showWritingDetail = function(type) {
            let info = "";
            
            if (type === 'formal') {
                info = "üìù FORMAL WRITING üìù\n\n";
                info += "Purpose: Professional, academic, official communication\n\n";
                info += "Characteristics:\n";
                info += "‚Ä¢ Complete sentences with proper grammar\n";
                info += "‚Ä¢ No contractions (use 'cannot' not 'can't')\n";
                info += "‚Ä¢ Third-person perspective typically\n";
                info += "‚Ä¢ Technical and precise vocabulary\n";
                info += "‚Ä¢ Objective, impersonal tone\n";
                info += "‚Ä¢ Structured organization\n";
                info += "‚Ä¢ Formal citations when needed\n\n";
                info += "When to use:\n";
                info += "‚Ä¢ Academic essays and research papers\n";
                info += "‚Ä¢ Business reports and proposals\n";
                info += "‚Ä¢ Official letters and documents\n";
                info += "‚Ä¢ Job applications and resumes\n";
                info += "‚Ä¢ Legal and government documents\n\n";
                info += "Examples:\n";
                info += "‚Ä¢ 'The committee has reached a decision.'\n";
                info += "‚Ä¢ 'According to the data analysis...'\n";
                info += "‚Ä¢ 'It is recommended that...'";
            } else {
                info = "üí¨ INFORMAL WRITING üí¨\n\n";
                info += "Purpose: Personal, casual, conversational communication\n\n";
                info += "Characteristics:\n";
                info += "‚Ä¢ Contractions used naturally\n";
                info += "‚Ä¢ First or second person perspective\n";
                info += "‚Ä¢ Simple, everyday vocabulary\n";
                info += "‚Ä¢ Personal, emotional tone\n";
                info += "‚Ä¢ May include slang and colloquialisms\n";
                info += "‚Ä¢ Flexible organization\n";
                info += "‚Ä¢ Can use sentence fragments\n\n";
                info += "When to use:\n";
                info += "‚Ä¢ Text messages and chats\n";
                info += "‚Ä¢ Personal emails and letters\n";
                info += "‚Ä¢ Social media posts\n";
                info += "‚Ä¢ Personal blogs and diaries\n";
                info += "‚Ä¢ Casual notes and memos\n\n";
                info += "Examples:\n";
                info += "‚Ä¢ 'Hey, how's it going?'\n";
                info += "‚Ä¢ 'I can't believe it!'\n";
                info += "‚Ä¢ 'That's awesome!'";
            }
            
            alert(info);
        };

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other English topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Create writing tip display
        function createWritingTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'writing-tip';
            tipDiv.innerHTML = `<strong>Writing Tip:</strong> ${writingTips[Math.floor(Math.random() * writingTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / allQuestions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You've mastered formal and informal writing!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Excellent work! You understand writing styles very well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! You're developing strong writing skills!";
            } else {
                scoreMessage.textContent = "Keep practicing! Understanding writing styles is key to effective communication!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = allQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${allQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / allQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            writingTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            writingTip.appendChild(createWritingTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = allQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin writing practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
