<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 3 Science - Light & Shadows, Sound | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Dark Theme */
        :root {
            --primary-green: #00C853;
            --secondary-orange: #FF6D00;
            --accent-purple: #7C4DFF;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(0, 200, 83, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(0, 200, 83, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 200, 83, 0.4);
        }

        .btn-primary:hover {
            background: #00B248;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 200, 83, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-orange);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 109, 0, 0.4);
        }

        .btn-secondary:hover {
            background: #E65C00;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 109, 0, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-green);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Topic Selection Page */
        .topics-page {
            display: none;
        }

        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-green);
            box-shadow: var(--shadow), var(--glow);
        }

        .topic-icon {
            width: 60px;
            height: 60px;
            margin-bottom: 15px;
            border-radius: 12px;
            background: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .topic-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .topic-description {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Learning Content Page */
        .learning-page {
            display: none;
        }

        .content-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary-green);
            border-bottom: 2px solid var(--primary-green);
            padding-bottom: 10px;
        }

        .concept-explanation {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 4px solid var(--accent-purple);
        }

        .concept-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .concept-description {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .characteristics-list {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .characteristic-item {
            margin-bottom: 8px;
            padding-left: 10px;
            border-left: 2px solid var(--secondary-orange);
        }

        /* Light Properties */
        .light-properties {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .property-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .property-card:hover {
            transform: translateY(-3px);
            border-color: var(--primary-green);
            box-shadow: 0 5px 15px rgba(0, 200, 83, 0.3);
        }

        .property-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .property-icon {
            font-size: 2.5rem;
            margin-right: 15px;
        }

        .property-title {
            font-size: 1.3rem;
            color: var(--text-primary);
        }

        .property-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Sound Sources */
        .sound-sources {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .sound-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .sound-card:hover {
            transform: translateY(-3px);
            border-color: var(--primary-green);
            box-shadow: 0 5px 15px rgba(0, 200, 83, 0.3);
        }

        .sound-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .sound-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .sound-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Interactive Shadow Demo */
        .shadow-demo {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .demo-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            background: linear-gradient(to bottom, #2c3e50, #34495e);
            border-radius: 10px;
            overflow: hidden;
        }

        .light-source {
            position: absolute;
            top: 20px;
            width: 40px;
            height: 40px;
            background: yellow;
            border-radius: 50%;
            box-shadow: 0 0 30px yellow;
            cursor: pointer;
            z-index: 10;
        }

        .object {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 100px;
            background: #e74c3c;
            border-radius: 10px;
        }

        .shadow {
            position: absolute;
            bottom: 20px;
            width: 80px;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .demo-controls {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .slider-container {
            width: 100%;
            max-width: 400px;
        }

        .slider-container label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .slider {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: var(--dark-card);
            outline: none;
        }

        /* Classification Activity */
        .classification-activity {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .item-card {
            background: var(--dark-card);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: grab;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
        }

        .item-card:hover {
            border-color: var(--accent-purple);
            transform: translateY(-3px);
        }

        .item-card.dragging {
            opacity: 0.7;
        }

        .item-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .item-name {
            font-size: 1rem;
            font-weight: 500;
        }

        .classification-areas {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .classification-area {
            background: var(--dark-card);
            border-radius: 12px;
            padding: 20px;
            min-height: 200px;
            border: 2px dashed var(--dark-border);
            transition: all 0.3s ease;
        }

        .classification-area.active {
            border-color: var(--primary-green);
            background: rgba(0, 200, 83, 0.05);
        }

        .area-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            text-align: center;
            color: var(--text-primary);
        }

        .area-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 150px;
            align-items: flex-start;
        }

        /* Matching Activity */
        .matching-activity {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .matching-pairs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .matching-pairs {
                grid-template-columns: 1fr;
            }
        }

        .matching-item {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            text-align: center;
        }

        .matching-item:hover {
            border-color: var(--secondary-orange);
        }

        .matching-item.matched {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        /* Quiz Section */
        .quiz-section {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-green);
            background: rgba(0, 200, 83, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-bg);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 200, 83, 0.1);
            border-left: 5px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
        }

        /* Progress Tracking */
        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-green), var(--secondary-orange));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 200, 83, 0.5);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Science Facts */
        .science-facts {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }

        .facts-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-green);
        }

        .facts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .fact-card {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid var(--accent-purple);
        }

        .fact-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .fact-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .light-properties {
                grid-template-columns: 1fr;
            }
            
            .sound-sources {
                grid-template-columns: 1fr;
            }
            
            .items-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .classification-areas {
                grid-template-columns: 1fr;
            }
            
            .facts-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        .bounce {
            animation: bounce 1s;
        }

        /* Special styling for science content */
        .science-example {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-purple);
            line-height: 1.6;
        }

        .transparent-example {
            border-left-color: #FF4081;
        }

        .translucent-example {
            border-left-color: #00B0FF;
        }

        .opaque-example {
            border-left-color: #00C853;
        }

        .natural-sound-example {
            border-left-color: #FFC400;
        }

        .manmade-sound-example {
            border-left-color: #7C4DFF;
        }

        .highlight {
            background-color: rgba(255, 215, 0, 0.2);
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1518837695005-2083093ee35b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1497864149936-d3163f0c0f4b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 3 Science - Light & Shadows, Sound</h1>
            <p class="welcome-subtitle">Discover the amazing world of light and sound! Learn how light travels, how shadows are formed, and explore different sources of sound in our environment.</p>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startLearning">
                    <span>Start Exploring</span>
                </button>
            </div>
        </div>

        <!-- Topics Selection Page -->
        <div class="topics-page card fade-in" id="topicsPage">
            <h2 class="welcome-title">Science Learning Activities</h2>
            <p class="welcome-subtitle">Choose a topic to explore light, shadows, and sound.</p>
            
            <div class="topics-grid">
                <div class="topic-card" data-topic="light">
                    <div class="topic-icon">üí°</div>
                    <h3 class="topic-title">Light & Shadows</h3>
                    <p class="topic-description">Learn how light travels, how shadows are formed, and explore transparent, translucent, and opaque materials.</p>
                </div>
                
                <div class="topic-card" data-topic="sound">
                    <div class="topic-icon">üîä</div>
                    <h3 class="topic-title">Sources of Sound</h3>
                    <p class="topic-description">Discover different sources of sound, how sound travels, and explore natural and man-made sounds.</p>
                </div>
                
                <div class="topic-card" data-topic="quiz">
                    <div class="topic-icon">üß†</div>
                    <h3 class="topic-title">Knowledge Challenge</h3>
                    <p class="topic-description">Test your knowledge about light, shadows, and sound with fun interactive quizzes.</p>
                </div>
            </div>
        </div>

        <!-- Learning Content Page -->
        <div class="learning-page card fade-in" id="learningPage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Section 1 of 3</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 33%"></div>
                </div>
            </div>

            <!-- Light and Shadows Section -->
            <div class="content-section" id="lightShadows">
                <h2 class="section-title">Light & Shadows</h2>
                
                <div class="concept-explanation">
                    <h3 class="concept-title">What is Light?</h3>
                    <p class="concept-description">Light is a form of energy that our eyes can detect. It helps us see the world around us. Light travels in straight lines called rays.</p>
                    
                    <div class="science-example">
                        <p><strong>Natural Light Sources:</strong> Sun, stars, fireflies<br>
                        <strong>Artificial Light Sources:</strong> Light bulbs, flashlights, candles</p>
                    </div>
                </div>

                <div class="light-properties">
                    <!-- Transparent -->
                    <div class="property-card">
                        <div class="property-header">
                            <div class="property-icon">üîç</div>
                            <h3 class="property-title">Transparent</h3>
                        </div>
                        <p class="property-description">
                            <strong>Definition:</strong> Allows all light to pass through clearly
                            <br><strong>Examples:</strong> Glass windows, clear plastic, air, water
                            <br><strong>Shadow:</strong> No shadow or very faint shadow
                        </p>
                    </div>

                    <!-- Translucent -->
                    <div class="property-card">
                        <div class="property-header">
                            <div class="property-icon">üí†</div>
                            <h3 class="property-title">Translucent</h3>
                        </div>
                        <p class="property-description">
                            <strong>Definition:</strong> Allows some light to pass through but scatters it
                            <br><strong>Examples:</strong> Frosted glass, wax paper, thin fabrics
                            <br><strong>Shadow:</strong> Fuzzy, blurred shadow
                        </p>
                    </div>

                    <!-- Opaque -->
                    <div class="property-card">
                        <div class="property-header">
                            <div class="property-icon">üö´</div>
                            <h3 class="property-title">Opaque</h3>
                        </div>
                        <p class="property-description">
                            <strong>Definition:</strong> Does not allow any light to pass through
                            <br><strong>Examples:</strong> Wood, metal, bricks, books
                            <br><strong>Shadow:</strong> Clear, dark shadow
                        </p>
                    </div>
                </div>

                <div class="concept-explanation">
                    <h3 class="concept-title">How Shadows Are Formed</h3>
                    <p class="concept-description">Shadows are formed when an opaque object blocks light. The shadow shows the shape of the object that is blocking the light.</p>
                    
                    <div class="science-example">
                        <p><strong>Three things needed for a shadow:</strong><br>
                        1. A light source<br>
                        2. An opaque object<br>
                        3. A surface for the shadow to fall on</p>
                    </div>
                </div>

                <div class="shadow-demo">
                    <h3>Interactive Shadow Demonstration</h3>
                    <p>Move the light source to see how the shadow changes!</p>
                    
                    <div class="demo-container" id="shadowDemo">
                        <div class="light-source" id="lightSource" style="left: 50%;"></div>
                        <div class="object" id="demoObject"></div>
                        <div class="shadow" id="demoShadow" style="left: 50%; transform: translateX(-50%);"></div>
                    </div>
                    
                    <div class="demo-controls">
                        <div class="slider-container">
                            <label for="lightPosition">Light Position: <span id="lightPositionValue">Center</span></label>
                            <input type="range" id="lightPosition" class="slider" min="0" max="100" value="50">
                        </div>
                        
                        <div class="slider-container">
                            <label for="shadowSize">Object Size: <span id="objectSizeValue">Medium</span></label>
                            <input type="range" id="objectSize" class="slider" min="40" max="120" value="100">
                        </div>
                    </div>
                </div>

                <div class="classification-activity">
                    <h3>Material Classification Game</h3>
                    <p>Drag each material to its correct category (Transparent, Translucent, or Opaque)!</p>
                    
                    <div class="items-grid" id="materialItemsGrid">
                        <!-- Material items will be populated by JavaScript -->
                    </div>
                    
                    <div class="classification-areas" id="materialClassificationAreas">
                        <!-- Classification areas will be populated by JavaScript -->
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" id="nextToSound">Next: Sources of Sound</button>
                </div>
            </div>

            <!-- Sound Sources Section -->
            <div class="content-section" id="soundSources" style="display: none;">
                <h2 class="section-title">Sources of Sound</h2>
                
                <div class="concept-explanation">
                    <h3 class="concept-title">What is Sound?</h3>
                    <p class="concept-description">Sound is a form of energy that we hear with our ears. Sound is created when objects vibrate (move back and forth quickly).</p>
                </div>

                <div class="sound-sources">
                    <!-- Natural Sounds -->
                    <div class="sound-card">
                        <div class="sound-icon">üåä</div>
                        <h3 class="sound-title">Natural Sounds</h3>
                        <p class="sound-description">
                            <strong>Sources:</strong> Thunder, ocean waves, animal sounds, wind
                            <br><strong>Examples:</strong> Bird singing, rain falling, river flowing
                        </p>
                    </div>

                    <!-- Human Sounds -->
                    <div class="sound-card">
                        <div class="sound-icon">üó£Ô∏è</div>
                        <h3 class="sound-title">Human Sounds</h3>
                        <p class="sound-description">
                            <strong>Sources:</strong> Voices, clapping, footsteps, heartbeat
                            <br><strong>Examples:</strong> Talking, singing, laughing, coughing
                        </p>
                    </div>

                    <!-- Musical Sounds -->
                    <div class="sound-card">
                        <div class="sound-icon">üéµ</div>
                        <h3 class="sound-title">Musical Sounds</h3>
                        <p class="sound-description">
                            <strong>Sources:</strong> Musical instruments, singing
                            <br><strong>Examples:</strong> Guitar, piano, drums, flute, violin
                        </p>
                    </div>

                    <!-- Machine Sounds -->
                    <div class="sound-card">
                        <div class="sound-icon">üöó</div>
                        <h3 class="sound-title">Machine Sounds</h3>
                        <p class="sound-description">
                            <strong>Sources:</strong> Vehicles, appliances, tools
                            <br><strong>Examples:</strong> Car engine, washing machine, drill, phone ringing
                        </p>
                    </div>
                </div>

                <div class="concept-explanation">
                    <h3 class="concept-title">How Sound Travels</h3>
                    <p class="concept-description">Sound travels through different materials as vibrations. It can travel through solids, liquids, and gases.</p>
                    
                    <div class="science-example">
                        <p><strong>Sound travels fastest through:</strong> Solids (like metal)<br>
                        <strong>Sound travels slowest through:</strong> Gases (like air)<br>
                        <strong>Sound cannot travel through:</strong> Empty space (vacuum)</p>
                    </div>
                </div>

                <div class="matching-activity">
                    <h3>Match Sounds to Their Sources</h3>
                    <div class="matching-pairs" id="soundMatchingGame">
                        <!-- Matching pairs will be populated by JavaScript -->
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-outline" id="backToLight">Previous: Light & Shadows</button>
                    <button class="btn btn-primary" id="nextToQuiz">Next: Knowledge Challenge</button>
                </div>
            </div>

            <!-- Quiz Section -->
            <div class="content-section" id="quizSection" style="display: none;">
                <h2 class="section-title">Knowledge Challenge</h2>
                <p class="welcome-subtitle">Test your knowledge about light, shadows, and sound!</p>
                
                <div class="quiz-section">
                    <div class="question-container">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                        
                        <div class="navigation-buttons">
                            <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                            <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                        </div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-outline" id="backToSound">Previous: Sound</button>
                    <button class="btn btn-primary" id="completeLearning">Complete Learning</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Science Exploration Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="activitiesCompleted">0</div>
                        <div class="stat-label">Activities Completed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="itemsClassified">0</div>
                        <div class="stat-label">Items Classified</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>

            <div class="science-facts">
                <h3 class="facts-title">Amazing Light & Sound Facts</h3>
                <div class="facts-grid">
                    <div class="fact-card">
                        <h4 class="fact-title">Light Speed Champion</h4>
                        <p class="fact-description">Light travels incredibly fast - about 300,000 kilometers per second! At this speed, light could travel around the Earth 7.5 times in just one second!</p>
                    </div>
                    <div class="fact-card">
                        <h4 class="fact-title">Sound Underwater</h4>
                        <p class="fact-description">Sound travels about 4 times faster in water than in air! This is why whales can communicate with each other across huge distances in the ocean.</p>
                    </div>
                    <div class="fact-card">
                        <h4 class="fact-title">Rainbow Colors</h4>
                        <p class="fact-description">White light is actually made of all the colors of the rainbow! When light passes through a prism or raindrops, it separates into red, orange, yellow, green, blue, indigo, and violet.</p>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Explore Again</button>
                <button class="btn btn-secondary" id="viewTopics">View Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Science Content Data
        const scienceData = {
            materialTypes: [
                {
                    name: "Transparent",
                    icon: "üîç",
                    definition: "Allows all light to pass through clearly",
                    examples: "Glass windows, clear plastic, air, water",
                    shadow: "No shadow or very faint shadow"
                },
                {
                    name: "Translucent",
                    icon: "üí†",
                    definition: "Allows some light to pass through but scatters it",
                    examples: "Frosted glass, wax paper, thin fabrics",
                    shadow: "Fuzzy, blurred shadow"
                },
                {
                    name: "Opaque",
                    icon: "üö´",
                    definition: "Does not allow any light to pass through",
                    examples: "Wood, metal, bricks, books",
                    shadow: "Clear, dark shadow"
                }
            ],
            classificationMaterials: [
                { name: "Glass Window", type: "Transparent", icon: "ü™ü" },
                { name: "Clear Water", type: "Transparent", icon: "üíß" },
                { name: "Frosted Glass", type: "Translucent", icon: "‚ùÑÔ∏è" },
                { name: "Wax Paper", type: "Translucent", icon: "üìÑ" },
                { name: "Wooden Door", type: "Opaque", icon: "üö™" },
                { name: "Metal Can", type: "Opaque", icon: "ü•´" },
                { name: "Clear Plastic", type: "Transparent", icon: "üß¥" },
                { name: "Tissue Paper", type: "Translucent", icon: "üßª" },
                { name: "Brick Wall", type: "Opaque", icon: "üß±" }
            ],
            soundSources: [
                {
                    name: "Natural Sounds",
                    icon: "üåä",
                    sources: "Thunder, ocean waves, animal sounds, wind",
                    examples: "Bird singing, rain falling, river flowing"
                },
                {
                    name: "Human Sounds",
                    icon: "üó£Ô∏è",
                    sources: "Voices, clapping, footsteps, heartbeat",
                    examples: "Talking, singing, laughing, coughing"
                },
                {
                    name: "Musical Sounds",
                    icon: "üéµ",
                    sources: "Musical instruments, singing",
                    examples: "Guitar, piano, drums, flute, violin"
                },
                {
                    name: "Machine Sounds",
                    icon: "üöó",
                    sources: "Vehicles, appliances, tools",
                    examples: "Car engine, washing machine, drill, phone ringing"
                }
            ],
            quizQuestions: [
                {
                    question: "Which type of material allows all light to pass through clearly?",
                    options: ["Transparent", "Translucent", "Opaque", "Reflective"],
                    answer: "A",
                    explanation: "Transparent materials like glass or clear water allow all light to pass through clearly, so you can see objects clearly through them."
                },
                {
                    question: "What is needed to form a shadow?",
                    options: ["Light source, opaque object, surface", "Light source, transparent object, surface", "Just an opaque object", "Just a light source"],
                    answer: "A",
                    explanation: "To form a shadow, you need three things: a light source, an opaque object to block the light, and a surface for the shadow to fall on."
                },
                {
                    question: "How does sound travel?",
                    options: ["As vibrations through materials", "As light waves through space", "As electricity through wires", "As heat through air"],
                    answer: "A",
                    explanation: "Sound travels as vibrations through materials like air, water, or solids. When an object vibrates, it causes the particles around it to vibrate, carrying the sound."
                },
                {
                    question: "Which material would create the clearest shadow?",
                    options: ["Opaque material", "Transparent material", "Translucent material", "All materials create equal shadows"],
                    answer: "A",
                    explanation: "Opaque materials block all light, creating the clearest, darkest shadows. Transparent materials don't block light (no shadow), and translucent materials create fuzzy shadows."
                },
                {
                    question: "What is the source of all sounds?",
                    options: ["Vibrations", "Light", "Heat", "Electricity"],
                    answer: "A",
                    explanation: "All sounds are created by vibrations. When objects vibrate, they cause the air around them to vibrate, and these vibrations travel to our ears as sound."
                },
                {
                    question: "Which of these is a natural source of light?",
                    options: ["The Sun", "A light bulb", "A flashlight", "A computer screen"],
                    answer: "A",
                    explanation: "The Sun is a natural source of light. Light bulbs, flashlights, and computer screens are artificial (man-made) sources of light."
                },
                {
                    question: "Through which material does sound travel fastest?",
                    options: ["Solids", "Liquids", "Gases", "Sound travels at the same speed through all materials"],
                    answer: "A",
                    explanation: "Sound travels fastest through solids because the particles in solids are closer together, allowing vibrations to pass more quickly from one particle to the next."
                },
                {
                    question: "What happens to a shadow when you move the light source closer to the object?",
                    options: ["The shadow gets larger", "The shadow gets smaller", "The shadow disappears", "The shadow changes color"],
                    answer: "A",
                    explanation: "When you move the light source closer to the object, the shadow gets larger because the object blocks more of the spreading light rays."
                },
                {
                    question: "Which of these is an example of a translucent material?",
                    options: ["Frosted glass", "Clear window glass", "A wooden door", "A mirror"],
                    answer: "A",
                    explanation: "Frosted glass is translucent - it allows some light to pass through but scatters it, so you can't see objects clearly through it."
                },
                {
                    question: "Why can't sound travel in outer space?",
                    options: ["There is no air to carry the vibrations", "It's too cold in space", "There's too much light in space", "Sound travels too fast in space"],
                    answer: "A",
                    explanation: "Sound can't travel in outer space because space is mostly a vacuum (empty space) with no air or other material to carry the sound vibrations."
                }
            ]
        };

        // App state
        let appState = {
            studentName: "",
            currentSection: "light",
            quizScore: 0,
            quizAnswered: 0,
            itemsClassified: 0,
            activitiesCompleted: 0,
            currentQuestionIndex: 0
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent science skills!",
            "Fantastic knowledge!",
            "Great job!",
            "Amazing!",
            "Well done!",
            "You're a science expert!",
            "Perfect!",
            "Outstanding!",
            "Brilliant!",
            "You're on fire!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const topicsPage = document.getElementById('topicsPage');
        const learningPage = document.getElementById('learningPage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startLearningBtn = document.getElementById('startLearning');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const topicCards = document.querySelectorAll('.topic-card');

        // Section navigation
        const lightShadows = document.getElementById('lightShadows');
        const soundSources = document.getElementById('soundSources');
        const quizSection = document.getElementById('quizSection');
        const nextToSound = document.getElementById('nextToSound');
        const nextToQuiz = document.getElementById('nextToQuiz');
        const backToLight = document.getElementById('backToLight');
        const backToSound = document.getElementById('backToSound');
        const completeLearning = document.getElementById('completeLearning');

        // Shadow demo elements
        const lightSource = document.getElementById('lightSource');
        const demoObject = document.getElementById('demoObject');
        const demoShadow = document.getElementById('demoShadow');
        const lightPositionSlider = document.getElementById('lightPosition');
        const lightPositionValue = document.getElementById('lightPositionValue');
        const objectSizeSlider = document.getElementById('objectSize');
        const objectSizeValue = document.getElementById('objectSizeValue');

        // Quiz elements
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');

        // Results elements
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const activitiesCompleted = document.getElementById('activitiesCompleted');
        const itemsClassified = document.getElementById('itemsClassified');
        const highestScore = document.getElementById('highestScore');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            setupShadowDemo();
            
            // Show appropriate page based on state
            if (appState.studentName && appState.activitiesCompleted > 0) {
                showLearningPage();
                loadSection(appState.currentSection);
            } else if (appState.studentName) {
                showTopicsPage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade3ScienceLightSound');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentSection = parsed.currentSection || "light";
                appState.quizScore = parsed.quizScore || 0;
                appState.quizAnswered = parsed.quizAnswered || 0;
                appState.itemsClassified = parsed.itemsClassified || 0;
                appState.activitiesCompleted = parsed.activitiesCompleted || 0;
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade3ScienceLightSound', JSON.stringify(appState));
        }

        // Setup event listeners
        function setupEventListeners() {
            startLearningBtn.addEventListener('click', startLearning);
            
            // Add event listeners to topic cards
            topicCards.forEach(card => {
                card.addEventListener('click', () => selectTopic(card.dataset.topic));
            });
            
            // Section navigation
            nextToSound.addEventListener('click', () => navigateSection('next'));
            nextToQuiz.addEventListener('click', () => navigateSection('next'));
            backToLight.addEventListener('click', () => navigateSection('prev'));
            backToSound.addEventListener('click', () => navigateSection('prev'));
            completeLearning.addEventListener('click', showResultsPage);
            
            // Quiz navigation
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            
            // Results navigation
            retryTopicBtn.addEventListener('click', retryTopic);
            viewTopicsBtn.addEventListener('click', backToTopics);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            
            // Allow pressing Enter to start learning
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startLearning();
                }
            });
        }

        // Setup shadow demonstration
        function setupShadowDemo() {
            // Update shadow based on light position
            lightPositionSlider.addEventListener('input', function() {
                const position = this.value;
                const containerWidth = document.getElementById('shadowDemo').offsetWidth;
                const lightWidth = lightSource.offsetWidth;
                
                // Calculate position in pixels
                const pixelPosition = (position / 100) * (containerWidth - lightWidth);
                
                // Update light position
                lightSource.style.left = `${pixelPosition}px`;
                
                // Update shadow position and shape
                updateShadow(position);
                
                // Update position label
                if (position < 30) {
                    lightPositionValue.textContent = "Left";
                } else if (position > 70) {
                    lightPositionValue.textContent = "Right";
                } else {
                    lightPositionValue.textContent = "Center";
                }
            });
            
            // Update object size
            objectSizeSlider.addEventListener('input', function() {
                const size = this.value;
                
                // Update object size
                demoObject.style.width = `${size * 0.6}px`;
                demoObject.style.height = `${size}px`;
                
                // Update shadow size
                demoShadow.style.width = `${size * 0.8}px`;
                
                // Update size label
                if (size < 70) {
                    objectSizeValue.textContent = "Small";
                } else if (size > 90) {
                    objectSizeValue.textContent = "Large";
                } else {
                    objectSizeValue.textContent = "Medium";
                }
                
                // Update shadow based on new size
                updateShadow(lightPositionSlider.value);
            });
        }

        // Update shadow based on light position
        function updateShadow(lightPosition) {
            const objectCenter = 50; // Object is centered at 50%
            const shadowOffset = (lightPosition - objectCenter) / 10;
            
            // Calculate shadow position (opposite direction from light)
            const shadowPosition = objectCenter - shadowOffset;
            
            // Update shadow position
            demoShadow.style.left = `${shadowPosition}%`;
            demoShadow.style.transform = 'translateX(-50%)';
            
            // Update shadow shape based on light position
            if (lightPosition < 40) {
                demoShadow.style.width = `${parseInt(objectSizeSlider.value) * 0.9}px`;
                demoShadow.style.height = '25px';
            } else if (lightPosition > 60) {
                demoShadow.style.width = `${parseInt(objectSizeSlider.value) * 0.9}px`;
                demoShadow.style.height = '25px';
            } else {
                demoShadow.style.width = `${parseInt(objectSizeSlider.value) * 0.8}px`;
                demoShadow.style.height = '20px';
            }
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            topicsPage.style.display = 'none';
            learningPage.style.display = 'none';
            resultsPage.style.display = 'none';
            
            // Clear any previous input
            studentNameInput.value = appState.studentName || '';
        }

        // Show topics page
        function showTopicsPage() {
            welcomePage.style.display = 'none';
            topicsPage.style.display = 'block';
            learningPage.style.display = 'none';
            resultsPage.style.display = 'none';
        }

        // Show learning page
        function showLearningPage() {
            welcomePage.style.display = 'none';
            topicsPage.style.display = 'none';
            learningPage.style.display = 'block';
            resultsPage.style.display = 'none';
            
            // Display student name
            studentNameDisplay.textContent = appState.studentName;
            
            // Load the current section
            loadSection(appState.currentSection);
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            topicsPage.style.display = 'none';
            learningPage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            // Calculate and display results
            const percentage = Math.round((appState.quizScore / scienceData.quizQuestions.length) * 100);
            
            finalScore.textContent = appState.quizScore;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.quizScore;
            activitiesCompleted.textContent = appState.activitiesCompleted;
            itemsClassified.textContent = appState.itemsClassified;
            
            // Get highest score from localStorage
            const highest = localStorage.getItem('ideolixGrade3ScienceLightSound_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.quizScore);
            
            // Save new highest score if applicable
            if (appState.quizScore > highest) {
                localStorage.setItem('ideolixGrade3ScienceLightSound_highestScore', appState.quizScore);
            }
            
            // Set encouraging message
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a science expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You know a lot about light and sound!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! You understand these science concepts well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review the concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep exploring! Science is full of amazing discoveries!";
            }
            
            // Save state
            saveStateToStorage();
        }

        // Start learning - show topic selection
        function startLearning() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert('Please enter your name to continue.');
                return;
            }
            
            appState.studentName = name;
            saveStateToStorage();
            showTopicsPage();
        }

        // Select a topic and start learning
        function selectTopic(topic) {
            appState.currentSection = topic === 'quiz' ? 'quiz' : 'light';
            saveStateToStorage();
            showLearningPage();
        }

        // Load a specific section
        function loadSection(section) {
            // Hide all sections first
            lightShadows.style.display = 'none';
            soundSources.style.display = 'none';
            quizSection.style.display = 'none';
            
            // Update progress
            updateProgress(section);
            
            // Load the selected section
            switch(section) {
                case 'light':
                    lightShadows.style.display = 'block';
                    loadMaterialClassificationActivity();
                    break;
                case 'sound':
                    soundSources.style.display = 'block';
                    loadSoundMatchingActivity();
                    break;
                case 'quiz':
                    quizSection.style.display = 'block';
                    loadQuizQuestion();
                    break;
            }
        }

        // Update progress indicator
        function updateProgress(section) {
            let progress = 33;
            let sectionText = "Section 1 of 3";
            
            switch(section) {
                case 'sound':
                    progress = 66;
                    sectionText = "Section 2 of 3";
                    break;
                case 'quiz':
                    progress = 100;
                    sectionText = "Section 3 of 3";
                    break;
            }
            
            progressText.textContent = sectionText;
            progressFill.style.width = `${progress}%`;
        }

        // Navigate between sections
        function navigateSection(direction) {
            const sections = ['light', 'sound', 'quiz'];
            let currentIndex = sections.indexOf(appState.currentSection);
            
            if (direction === 'next' && currentIndex < sections.length - 1) {
                appState.currentSection = sections[currentIndex + 1];
            } else if (direction === 'prev' && currentIndex > 0) {
                appState.currentSection = sections[currentIndex - 1];
            }
            
            // Update activities completed
            if (direction === 'next' && currentIndex >= appState.activitiesCompleted) {
                appState.activitiesCompleted = currentIndex + 1;
            }
            
            saveStateToStorage();
            loadSection(appState.currentSection);
        }

        // Load material classification activity
        function loadMaterialClassificationActivity() {
            const itemsGrid = document.getElementById('materialItemsGrid');
            const classificationAreas = document.getElementById('materialClassificationAreas');
            
            itemsGrid.innerHTML = '';
            classificationAreas.innerHTML = '';
            
            // Shuffle materials
            const shuffledMaterials = [...scienceData.classificationMaterials]
                .sort(() => 0.5 - Math.random())
                .slice(0, 6); // Use 6 materials for the activity
            
            // Create material cards
            shuffledMaterials.forEach(material => {
                const itemCard = document.createElement('div');
                itemCard.className = 'item-card';
                itemCard.setAttribute('draggable', 'true');
                itemCard.setAttribute('data-type', material.type);
                itemCard.innerHTML = `
                    <div class="item-icon">${material.icon}</div>
                    <div class="item-name">${material.name}</div>
                `;
                
                // Add drag event listeners
                itemCard.addEventListener('dragstart', handleDragStart);
                itemCard.addEventListener('dragend', handleDragEnd);
                
                itemsGrid.appendChild(itemCard);
            });
            
            // Create classification areas for each material type
            scienceData.materialTypes.forEach(type => {
                const area = document.createElement('div');
                area.className = 'classification-area';
                area.setAttribute('data-type', type.name);
                area.innerHTML = `
                    <h3 class="area-title">${type.icon} ${type.name}</h3>
                    <div class="area-items"></div>
                `;
                
                area.addEventListener('dragover', handleDragOver);
                area.addEventListener('drop', (e) => handleMaterialDrop(e, type.name));
                
                classificationAreas.appendChild(area);
            });
            
            // Reset classified items count
            appState.itemsClassified = 0;
            saveStateToStorage();
        }

        // Load sound matching activity
        function loadSoundMatchingActivity() {
            const matchingGame = document.getElementById('soundMatchingGame');
            matchingGame.innerHTML = '';
            
            // Create sound source cards
            scienceData.soundSources.forEach(source => {
                const sourceCard = document.createElement('div');
                sourceCard.className = 'matching-item';
                sourceCard.setAttribute('data-source', source.name);
                sourceCard.innerHTML = `
                    <strong>${source.icon} ${source.name}</strong>
                `;
                matchingGame.appendChild(sourceCard);
            });
            
            // Create example cards (shuffled)
            const shuffledExamples = [...scienceData.soundSources]
                .sort(() => 0.5 - Math.random())
                .map(source => source.examples.split(', ')[0]); // Use the first example for simplicity
            
            shuffledExamples.forEach(example => {
                const exampleCard = document.createElement('div');
                exampleCard.className = 'matching-item';
                exampleCard.setAttribute('data-example', example);
                exampleCard.textContent = example;
                matchingGame.appendChild(exampleCard);
            });
            
            // Setup matching game
            setupSoundMatchingGame();
        }

        // Setup sound matching game
        function setupSoundMatchingGame() {
            let selectedSource = null;
            let selectedExample = null;
            
            document.querySelectorAll('#soundMatchingGame .matching-item').forEach(item => {
                item.addEventListener('click', function() {
                    if (this.getAttribute('data-source')) {
                        // This is a sound source
                        if (selectedSource) {
                            selectedSource.style.borderColor = 'transparent';
                        }
                        selectedSource = this;
                        this.style.borderColor = 'var(--secondary-orange)';
                    } else {
                        // This is an example
                        if (selectedExample) {
                            selectedExample.style.borderColor = 'transparent';
                        }
                        selectedExample = this;
                        this.style.borderColor = 'var(--secondary-orange)';
                    }
                    
                    // Check if we have a pair to match
                    if (selectedSource && selectedExample) {
                        checkSoundMatch(selectedSource, selectedExample);
                        selectedSource = null;
                        selectedExample = null;
                    }
                });
            });
        }

        // Check if sound source and example match
        function checkSoundMatch(sourceElement, exampleElement) {
            const sourceName = sourceElement.getAttribute('data-source');
            const exampleText = exampleElement.getAttribute('data-example');
            
            // Find the sound source that has this example
            const correctSource = scienceData.soundSources.find(source => 
                source.examples.includes(exampleText)
            );
            
            if (correctSource && correctSource.name === sourceName) {
                // Correct match
                sourceElement.classList.add('matched');
                exampleElement.classList.add('matched');
                sourceElement.style.borderColor = 'transparent';
                exampleElement.style.borderColor = 'transparent';
                
                // Show success feedback
                showClassificationFeedback(true, `Correct! ${exampleText} is an example of ${sourceElement.textContent.trim()}.`);
            } else {
                // Incorrect match - reset borders after a delay
                setTimeout(() => {
                    sourceElement.style.borderColor = 'transparent';
                    exampleElement.style.borderColor = 'transparent';
                }, 1000);
                
                // Show error feedback
                showClassificationFeedback(false, "Try again! That's not the right match.");
            }
        }

        // Drag and drop handlers for material classification
        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.getAttribute('data-type'));
            e.target.classList.add('dragging');
            
            // Add visual feedback to drop zones
            document.querySelectorAll('.classification-area').forEach(area => {
                area.classList.add('active');
            });
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            
            // Remove visual feedback from drop zones
            document.querySelectorAll('.classification-area').forEach(area => {
                area.classList.remove('active');
            });
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleMaterialDrop(e, expectedType) {
            e.preventDefault();
            const materialType = e.dataTransfer.getData('text/plain');
            const draggedElement = document.querySelector('.item-card.dragging');
            
            if (draggedElement && materialType === expectedType) {
                // Correct classification
                const areaItems = e.currentTarget.querySelector('.area-items');
                
                // Create a new card for the drop area
                const newCard = document.createElement('div');
                newCard.className = 'item-card';
                newCard.innerHTML = draggedElement.innerHTML;
                newCard.style.cursor = 'default';
                
                areaItems.appendChild(newCard);
                
                // Remove the original card
                draggedElement.remove();
                
                // Update classified items count
                appState.itemsClassified++;
                saveStateToStorage();
                
                // Show success feedback
                showClassificationFeedback(true, `Correct! ${draggedElement.querySelector('.item-name').textContent} is ${expectedType.toLowerCase()}.`);
            } else if (draggedElement) {
                // Incorrect classification
                showClassificationFeedback(false, `Try again! ${draggedElement.querySelector('.item-name').textContent} is not ${expectedType.toLowerCase()}.`);
            }
        }

        // Show classification feedback
        function showClassificationFeedback(isCorrect, message) {
            // Create a temporary feedback element
            const feedback = document.createElement('div');
            feedback.style.position = 'fixed';
            feedback.style.top = '50%';
            feedback.style.left = '50%';
            feedback.style.transform = 'translate(-50%, -50%)';
            feedback.style.padding = '20px 30px';
            feedback.style.borderRadius = '12px';
            feedback.style.fontWeight = 'bold';
            feedback.style.zIndex = '1000';
            feedback.style.boxShadow = '0 8px 32px rgba(0, 0, 0, 0.4)';
            feedback.textContent = message;
            
            if (isCorrect) {
                feedback.style.background = 'var(--primary-green)';
                feedback.style.color = 'white';
            } else {
                feedback.style.background = 'var(--secondary-orange)';
                feedback.style.color = 'white';
            }
            
            document.body.appendChild(feedback);
            
            // Remove after 2 seconds
            setTimeout(() => {
                document.body.removeChild(feedback);
            }, 2000);
        }

        // Load quiz question
        function loadQuizQuestion() {
            const question = scienceData.quizQuestions[appState.currentQuestionIndex];
            
            // Set question text
            questionText.textContent = question.question;
            
            // Clear previous options and feedback
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            // Create option elements
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectQuizOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle quiz option selection
        function selectQuizOption(optionElement, selectedIndex) {
            const question = scienceData.quizQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            // Disable all options
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            // Mark correct/incorrect
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                // Correct answer
                optionElement.classList.add('correct');
                appState.quizScore++;
                appState.quizAnswered++;
                
                // Show positive feedback
                showQuizFeedback(true, question.explanation);
            } else {
                // Incorrect answer
                optionElement.classList.add('incorrect');
                appState.quizAnswered++;
                
                // Show negative feedback
                showQuizFeedback(false, question.explanation, question.answer);
            }
            
            // Enable next question button
            nextQuestionBtn.disabled = false;
            
            // Save progress
            saveStateToStorage();
        }

        // Show quiz feedback
        function showQuizFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    feedbackMessage.textContent = `Correct answer: ${String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65))}`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
        }

        // Move to next quiz question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < scienceData.quizQuestions.length) {
                loadQuizQuestion();
            } else {
                // Quiz completed
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current quiz question
        function skipQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < scienceData.quizQuestions.length) {
                loadQuizQuestion();
            } else {
                // Quiz completed
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.quizScore = 0;
            appState.quizAnswered = 0;
            appState.itemsClassified = 0;
            appState.currentQuestionIndex = 0;
            appState.currentSection = "light";
            saveStateToStorage();
            showLearningPage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            showTopicsPage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
