<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 Science - States of Matter & Changes | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Science/Matter Theme */
        :root {
            --primary-blue: #2196F3;
            --secondary-teal: #009688;
            --accent-red: #F44336;
            --accent-green: #4CAF50;
            --accent-orange: #FF9800;
            --accent-purple: #9C27B0;
            --accent-yellow: #FFEB3B;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(33, 150, 243, 0.3);
            --solid-glow: 0 0 20px rgba(76, 175, 80, 0.3);
            --liquid-glow: 0 0 20px rgba(33, 150, 243, 0.3);
            --gas-glow: 0 0 20px rgba(255, 235, 59, 0.3);
            --plasma-glow: 0 0 20px rgba(156, 39, 176, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--accent-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--accent-purple);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-secondary {
            background: var(--accent-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-secondary:hover {
            background: #7B1FA2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--accent-purple));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--primary-blue);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(33, 150, 243, 0.1);
            border-left: 5px solid var(--primary-blue);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-blue);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-blue);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Matter States Display */
        .states-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .states-display {
                grid-template-columns: 1fr;
            }
        }

        .state-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 12px;
            border: 3px solid transparent;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .state-card:hover {
            transform: translateY(-5px);
        }

        .state-card.solid {
            border-color: var(--accent-green);
        }

        .state-card.liquid {
            border-color: var(--primary-blue);
        }

        .state-card.gas {
            border-color: var(--accent-yellow);
        }

        .state-card.plasma {
            border-color: var(--accent-purple);
        }

        .state-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 15px;
        }

        .state-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
        }

        .solid .state-title {
            color: var(--accent-green);
        }

        .liquid .state-title {
            color: var(--primary-blue);
        }

        .gas .state-title {
            color: var(--accent-yellow);
        }

        .plasma .state-title {
            color: var(--accent-purple);
        }

        .state-properties {
            list-style: none;
            padding: 0;
        }

        .state-properties li {
            padding: 8px 0;
            border-bottom: 1px solid var(--dark-border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .state-properties li:last-child {
            border-bottom: none;
        }

        .property-icon {
            font-size: 1.2rem;
            width: 24px;
        }

        /* Particle Motion Display */
        .particle-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            position: relative;
            min-height: 200px;
            overflow: hidden;
        }

        .particle-canvas {
            width: 100%;
            height: 150px;
            position: relative;
            margin: 20px 0;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            transition: all 0.5s ease;
        }

        .solid-particle {
            background-color: var(--accent-green);
            box-shadow: 0 0 10px var(--accent-green);
        }

        .liquid-particle {
            background-color: var(--primary-blue);
            box-shadow: 0 0 10px var(--primary-blue);
        }

        .gas-particle {
            background-color: var(--accent-yellow);
            box-shadow: 0 0 10px var(--accent-yellow);
        }

        /* Changes Display */
        .changes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .changes-grid {
                grid-template-columns: 1fr;
            }
        }

        .change-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--accent-orange);
        }

        .change-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .change-examples {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media (max-width: 480px) {
            .change-examples {
                grid-template-columns: 1fr;
            }
        }

        .example-item {
            background: rgba(255, 152, 0, 0.1);
            padding: 10px;
            border-radius: 6px;
            border-left: 3px solid var(--accent-orange);
        }

        .example-name {
            font-weight: bold;
            color: var(--accent-orange);
            margin-bottom: 5px;
        }

        .example-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Phase Change Diagram */
        .phase-diagram {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            position: relative;
        }

        .diagram-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            position: relative;
        }

        .phase-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin: 10px 0;
            position: relative;
        }

        .phase-arrow .arrow-icon {
            font-size: 2rem;
            color: var(--primary-blue);
            margin: 0 20px;
        }

        .phase-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-width: 120px;
            text-align: center;
            border: 2px solid;
        }

        .melting-box {
            border-color: var(--primary-blue);
        }

        .freezing-box {
            border-color: var(--accent-green);
        }

        .evaporation-box {
            border-color: var(--accent-yellow);
        }

        .condensation-box {
            border-color: var(--accent-purple);
        }

        .phase-label {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .melting-label {
            color: var(--primary-blue);
        }

        .freezing-label {
            color: var(--accent-green);
        }

        .evaporation-label {
            color: var(--accent-yellow);
        }

        .condensation-label {
            color: var(--accent-purple);
        }

        .phase-process {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Matter Comparison */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--primary-blue);
            border-bottom: 2px solid var(--primary-blue);
        }

        .comparison-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .comparison-table tr:hover {
            background: rgba(33, 150, 243, 0.05);
        }

        .solid-row td:first-child {
            border-left: 4px solid var(--accent-green);
        }

        .liquid-row td:first-child {
            border-left: 4px solid var(--primary-blue);
        }

        .gas-row td:first-child {
            border-left: 4px solid var(--accent-yellow);
        }

        /* Interactive Elements */
        .interactive-lab {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .lab-title {
            color: var(--accent-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .lab-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .lab-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-purple);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lab-button:hover {
            background: rgba(156, 39, 176, 0.1);
            transform: translateY(-2px);
        }

        .lab-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Everyday Examples */
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .examples-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .examples-grid {
                grid-template-columns: 1fr;
            }
        }

        .example-card {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
        }

        .example-card:hover {
            transform: translateY(-3px);
        }

        .example-icon {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 10px;
        }

        .example-title {
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 8px;
            text-align: center;
        }

        .example-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes particleVibrate {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }
        
        .particle-vibrate {
            animation: particleVibrate 0.3s ease infinite;
        }
        
        @keyframes particleFloat {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
        
        .particle-float {
            animation: particleFloat 2s ease-in-out infinite;
        }
        
        @keyframes particleFast {
            0% { transform: translateX(0); }
            100% { transform: translateX(100px); }
        }
        
        .particle-fast {
            animation: particleFast 1s linear infinite;
        }
        
        @keyframes stateGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(76, 175, 80, 0.1); }
        }
        
        .solid-glow {
            animation: stateGlow 3s ease-in-out infinite;
        }
        
        @keyframes liquidGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(33, 150, 243, 0.1); }
        }
        
        .liquid-glow {
            animation: liquidGlow 3s ease-in-out infinite;
        }
        
        @keyframes gasGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 235, 59, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(255, 235, 59, 0.1); }
        }
        
        .gas-glow {
            animation: gasGlow 3s ease-in-out infinite;
        }
        
        @keyframes phaseChange {
            0% { color: var(--accent-green); }
            33% { color: var(--primary-blue); }
            66% { color: var(--accent-yellow); }
            100% { color: var(--accent-purple); }
        }
        
        .phase-change {
            animation: phaseChange 4s linear infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
        
        .bounce {
            animation: bounce 2s infinite;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1532094349884-543bc11b234d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1518495978942-83cdb633d6d6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1563089145-599997674d42?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 Science</h1>
            <p class="welcome-subtitle">Explore the fascinating world of matter! Learn about solids, liquids, gases, and plasma. Discover how matter changes state through melting, freezing, evaporation, and condensation. Understand the difference between physical and chemical changes in this exciting scientific adventure!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üßäüíßüî•‚òÅÔ∏è</span>
                <span class="topic-name">States of Matter & Changes</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Matter Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 130</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Science fact display -->
                <div id="scienceFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Matter Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 130+ Grade 5 States of Matter questions
        const questions = [
            // Matter Basics (1-25)
            {
                type: "matter_basics",
                question: "What is matter?",
                options: ["Anything that has mass and takes up space", "Only solid things", "Only things we can see", "Only things that are heavy"],
                answer: "A",
                explanation: "Matter is anything that has mass and occupies space. Everything around us is matter."
            },
            {
                type: "matter_basics",
                question: "What are the three main states of matter?",
                options: ["Solid, liquid, gas", "Hard, soft, wet", "Big, small, medium", "Hot, cold, warm"],
                answer: "A",
                explanation: "The three main states of matter are solid, liquid, and gas."
            },
            {
                type: "matter_basics",
                question: "What is mass?",
                options: ["Amount of matter in an object", "How heavy something feels", "The size of an object", "The color of an object"],
                answer: "A",
                explanation: "Mass is the amount of matter in an object, measured in grams or kilograms."
            },
            {
                type: "matter_basics",
                question: "What is volume?",
                options: ["Amount of space an object takes up", "How loud something is", "The weight of an object", "The temperature of matter"],
                answer: "A",
                explanation: "Volume is the amount of three-dimensional space occupied by matter."
            },
            {
                type: "matter_basics",
                question: "Which property can be observed without changing the matter?",
                options: ["Physical property", "Chemical property", "State property", "Temperature property"],
                answer: "A",
                explanation: "Physical properties (color, texture, density) can be observed without changing the matter."
            },
            {
                type: "matter_basics",
                question: "What is density?",
                options: ["Mass per unit volume", "How heavy something is", "How much space it takes", "How hard something is"],
                answer: "A",
                explanation: "Density = Mass √∑ Volume. It tells how tightly packed the matter is."
            },
            {
                type: "matter_basics",
                question: "What is a property of matter?",
                options: ["Characteristic that can be observed or measured", "Only its color", "Only its weight", "Only its shape"],
                answer: "A",
                explanation: "Properties include color, texture, hardness, density, mass, volume, etc."
            },
            {
                type: "matter_basics",
                question: "Which is NOT matter?",
                options: ["Light", "Water", "Rock", "Air"],
                answer: "A",
                explanation: "Light is energy, not matter. It has no mass and doesn't take up space."
            },
            {
                type: "matter_basics",
                question: "What are atoms?",
                options: ["Tiny particles that make up all matter", "Only in solids", "Only in gases", "Only in liquids"],
                answer: "A",
                explanation: "Atoms are the basic building blocks of all matter."
            },
            {
                type: "matter_basics",
                question: "What are molecules?",
                options: ["Groups of atoms bonded together", "Single atoms", "Only in water", "Only in air"],
                answer: "A",
                explanation: "Molecules are two or more atoms joined together."
            },
            // Solids (26-45)
            {
                type: "solids",
                question: "Which describes a solid?",
                options: ["Definite shape and volume", "No definite shape, definite volume", "No definite shape or volume", "Definite shape, no volume"],
                answer: "A",
                explanation: "Solids have fixed shape and volume. Particles are tightly packed in regular patterns."
            },
            {
                type: "solids",
                question: "How do particles move in solids?",
                options: ["Vibrate in fixed positions", "Flow freely", "Move quickly in all directions", "Don't move at all"],
                answer: "A",
                explanation: "Solid particles vibrate but stay in fixed positions."
            },
            {
                type: "solids",
                question: "Which is an example of a solid?",
                options: ["Rock", "Water", "Air", "Steam"],
                answer: "A",
                explanation: "Rock is a solid with definite shape and volume."
            },
            {
                type: "solids",
                question: "What happens when you heat a solid?",
                options: ["Particles vibrate faster", "Particles stop moving", "Particles get smaller", "Particles change color"],
                answer: "A",
                explanation: "Heating gives particles more energy, making them vibrate faster."
            },
            {
                type: "solids",
                question: "Which solid has a regular pattern of particles?",
                options: ["Crystal", "Plastic", "Wood", "Rubber"],
                answer: "A",
                explanation: "Crystals have particles arranged in regular, repeating patterns."
            },
            {
                type: "solids",
                question: "What is hardness?",
                options: ["Resistance to scratching", "How heavy something is", "How much space it takes", "Its color"],
                answer: "A",
                explanation: "Hardness measures how resistant a solid is to scratching or denting."
            },
            {
                type: "solids",
                question: "Which property describes how light passes through a solid?",
                options: ["Transparency", "Hardness", "Density", "Texture"],
                answer: "A",
                explanation: "Transparency describes if light passes through (transparent), partially through (translucent), or not at all (opaque)."
            },
            {
                type: "solids",
                question: "What is elasticity?",
                options: ["Ability to return to original shape after stretching", "How hard something is", "How much it weighs", "Its melting point"],
                answer: "A",
                explanation: "Elastic materials can stretch and return to original shape (like rubber bands)."
            },
            {
                type: "solids",
                question: "Which is a brittle solid?",
                options: ["Glass", "Rubber", "Clay", "Plastic"],
                answer: "A",
                explanation: "Brittle solids break easily when force is applied (glass, ceramics)."
            },
            {
                type: "solids",
                question: "What is malleability?",
                options: ["Ability to be hammered into thin sheets", "Ability to stretch", "Ability to conduct heat", "Ability to float"],
                answer: "A",
                explanation: "Malleable materials can be flattened into sheets (like gold or aluminum foil)."
            },
            // Liquids (46-65)
            {
                type: "liquids",
                question: "Which describes a liquid?",
                options: ["No definite shape, definite volume", "Definite shape and volume", "No definite shape or volume", "Definite shape, no volume"],
                answer: "A",
                explanation: "Liquids take shape of container but have fixed volume."
            },
            {
                type: "liquids",
                question: "How do particles move in liquids?",
                options: ["Flow past each other", "Vibrate in fixed positions", "Move quickly in all directions", "Don't move"],
                answer: "A",
                explanation: "Liquid particles can slide past each other, allowing liquids to flow."
            },
            {
                type: "liquids",
                question: "Which is an example of a liquid?",
                options: ["Water", "Rock", "Air", "Ice"],
                answer: "A",
                explanation: "Water is a liquid at room temperature."
            },
            {
                type: "liquids",
                question: "What is viscosity?",
                options: ["Resistance to flowing", "How clear a liquid is", "How much it weighs", "Its boiling point"],
                answer: "A",
                explanation: "Viscosity measures how easily a liquid flows (honey = high viscosity, water = low viscosity)."
            },
            {
                type: "liquids",
                question: "Which liquid has high viscosity?",
                options: ["Honey", "Water", "Milk", "Juice"],
                answer: "A",
                explanation: "Honey flows slowly due to high viscosity."
            },
            {
                type: "liquids",
                question: "What causes surface tension?",
                options: ["Particles at surface pulling together", "Particles getting hot", "Particles changing color", "Particles evaporating"],
                answer: "A",
                explanation: "Surface tension is the 'skin' on liquids caused by particles pulling together."
            },
            {
                type: "liquids",
                question: "What is buoyancy?",
                options: ["Ability to float", "How thick a liquid is", "How fast it flows", "Its color"],
                answer: "A",
                explanation: "Buoyancy is the upward force that allows objects to float in liquids."
            },
            {
                type: "liquids",
                question: "Which describes a liquid taking shape of its container?",
                options: ["Conforms to container", "Stays same shape", "Expands to fill container", "Evaporates"],
                answer: "A",
                explanation: "Liquids flow and take the shape of whatever container they're in."
            },
            {
                type: "liquids",
                question: "What is meniscus?",
                options: ["Curved surface of liquid in container", "Bubbles in liquid", "Color change in liquid", "Evaporation of liquid"],
                answer: "A",
                explanation: "Meniscus is the curve at liquid's surface due to adhesion with container."
            },
            {
                type: "liquids",
                question: "Which property allows liquids to be poured?",
                options: ["Fluidity", "Density", "Transparency", "Temperature"],
                answer: "A",
                explanation: "Fluidity is the ability of liquids to flow and be poured."
            },
            // Gases (66-85)
            {
                type: "gases",
                question: "Which describes a gas?",
                options: ["No definite shape or volume", "Definite shape and volume", "No definite shape, definite volume", "Definite shape, no volume"],
                answer: "A",
                explanation: "Gases expand to fill any container and have no fixed shape or volume."
            },
            {
                type: "gases",
                question: "How do particles move in gases?",
                options: ["Move quickly in all directions", "Vibrate in fixed positions", "Flow past each other", "Don't move much"],
                answer: "A",
                explanation: "Gas particles move rapidly in random directions."
            },
            {
                type: "gases",
                question: "Which is an example of a gas?",
                options: ["Air", "Water", "Ice", "Rock"],
                answer: "A",
                explanation: "Air is a mixture of gases (mostly nitrogen and oxygen)."
            },
            {
                type: "gases",
                question: "What happens when you compress a gas?",
                options: ["Particles get closer together", "Particles disappear", "Particles get larger", "Particles change color"],
                answer: "A",
                explanation: "Compression reduces space between gas particles."
            },
            {
                type: "gases",
                question: "What is diffusion?",
                options: ["Mixing of gases", "Evaporation of liquids", "Freezing of water", "Melting of solids"],
                answer: "A",
                explanation: "Diffusion is when gas particles spread out and mix evenly."
            },
            {
                type: "gases",
                question: "What causes gas pressure?",
                options: ["Particles hitting container walls", "Particles sticking together", "Particles getting hot", "Particles changing size"],
                answer: "A",
                explanation: "Gas pressure comes from particles constantly colliding with container walls."
            },
            {
                type: "gases",
                question: "Which gas is most abundant in air?",
                options: ["Nitrogen", "Oxygen", "Carbon dioxide", "Helium"],
                answer: "A",
                explanation: "Air is about 78% nitrogen, 21% oxygen, and 1% other gases."
            },
            {
                type: "gases",
                question: "What happens when you heat a gas?",
                options: ["Particles move faster", "Particles get bigger", "Particles stick together", "Particles change color"],
                answer: "A",
                explanation: "Heating gives gas particles more energy, making them move faster."
            },
            {
                type: "gases",
                question: "Which describes gas expanding to fill container?",
                options: ["Expansion", "Compression", "Condensation", "Evaporation"],
                answer: "A",
                explanation: "Gases expand to completely fill whatever container they're in."
            },
            {
                type: "gases",
                question: "What is compressibility?",
                options: ["Ability to be squeezed into smaller volume", "Ability to flow", "Ability to conduct heat", "Ability to float"],
                answer: "A",
                explanation: "Gases are highly compressible because particles are far apart."
            },
            // Plasma & Other States (86-95)
            {
                type: "plasma",
                question: "What is plasma?",
                options: ["Hot, charged gas-like state", "Very cold solid", "Type of liquid", "Special kind of gas"],
                answer: "A",
                explanation: "Plasma is a hot, ionized gas with charged particles. Found in stars and lightning."
            },
            {
                type: "plasma",
                question: "Where is plasma commonly found?",
                options: ["Stars", "Oceans", "Rocks", "Ice"],
                answer: "A",
                explanation: "Plasma makes up stars like our Sun."
            },
            {
                type: "plasma",
                question: "What happens to matter in plasma state?",
                options: ["Atoms lose electrons", "Atoms get colder", "Atoms become solids", "Atoms disappear"],
                answer: "A",
                explanation: "In plasma, atoms are so hot that electrons are stripped away, creating ions."
            },
            {
                type: "plasma",
                question: "Which is NOT a common state of matter on Earth?",
                options: ["Plasma", "Solid", "Liquid", "Gas"],
                answer: "A",
                explanation: "Plasma is rare on Earth but common in the universe (stars, lightning)."
            },
            {
                type: "plasma",
                question: "What creates plasma on Earth?",
                options: ["Lightning", "Rain", "Snow", "Rivers"],
                answer: "A",
                explanation: "Lightning creates plasma by superheating air."
            },
            // Physical Changes (96-115)
            {
                type: "physical_changes",
                question: "What is a physical change?",
                options: ["Change in appearance without new substance", "Change creating new substance", "Change that can't be reversed", "Change with color change only"],
                answer: "A",
                explanation: "Physical changes alter form/appearance but not chemical composition."
            },
            {
                type: "physical_changes",
                question: "Which is a physical change?",
                options: ["Melting ice", "Burning wood", "Rusting iron", "Cooking food"],
                answer: "A",
                explanation: "Melting is physical - ice becomes water but both are H‚ÇÇO."
            },
            {
                type: "physical_changes",
                question: "What happens during melting?",
                options: ["Solid becomes liquid", "Liquid becomes gas", "Gas becomes liquid", "Liquid becomes solid"],
                answer: "A",
                explanation: "Melting is when a solid changes to liquid by adding heat."
            },
            {
                type: "physical_changes",
                question: "What happens during freezing?",
                options: ["Liquid becomes solid", "Solid becomes liquid", "Gas becomes liquid", "Liquid becomes gas"],
                answer: "A",
                explanation: "Freezing is when a liquid changes to solid by removing heat."
            },
            {
                type: "physical_changes",
                question: "What happens during evaporation?",
                options: ["Liquid becomes gas", "Gas becomes liquid", "Solid becomes liquid", "Liquid becomes solid"],
                answer: "A",
                explanation: "Evaporation is when a liquid changes to gas at surface, below boiling point."
            },
            {
                type: "physical_changes",
                question: "What happens during condensation?",
                options: ["Gas becomes liquid", "Liquid becomes gas", "Solid becomes gas", "Liquid becomes solid"],
                answer: "A",
                explanation: "Condensation is when gas changes to liquid by cooling."
            },
            {
                type: "physical_changes",
                question: "What is sublimation?",
                options: ["Solid becomes gas directly", "Gas becomes solid directly", "Liquid becomes gas", "Gas becomes liquid"],
                answer: "A",
                explanation: "Sublimation is solid to gas without becoming liquid (dry ice, mothballs)."
            },
            {
                type: "physical_changes",
                question: "What is deposition?",
                options: ["Gas becomes solid directly", "Solid becomes gas directly", "Liquid becomes solid", "Solid becomes liquid"],
                answer: "A",
                explanation: "Deposition is gas to solid without becoming liquid (frost formation)."
            },
            {
                type: "physical_changes",
                question: "Which change is reversible?",
                options: ["Physical change", "Chemical change", "Both changes", "Neither change"],
                answer: "A",
                explanation: "Most physical changes can be reversed (ice ‚Üî water ‚Üî steam)."
            },
            {
                type: "physical_changes",
                question: "What happens during boiling?",
                options: ["Liquid becomes gas throughout", "Only surface evaporation", "Gas becomes liquid", "Solid becomes liquid"],
                answer: "A",
                explanation: "Boiling is rapid vaporization throughout liquid at boiling point."
            },
            // Chemical Changes (116-135)
            {
                type: "chemical_changes",
                question: "What is a chemical change?",
                options: ["Change producing new substance", "Change in appearance only", "Change that's easily reversed", "Change in state only"],
                answer: "A",
                explanation: "Chemical changes create new substances with different properties."
            },
            {
                type: "chemical_changes",
                question: "Which is a chemical change?",
                options: ["Burning paper", "Melting butter", "Breaking glass", "Dissolving sugar"],
                answer: "A",
                explanation: "Burning produces new substances (ash, smoke, gases)."
            },
            {
                type: "chemical_changes",
                question: "What indicates chemical change?",
                options: ["Formation of new substance", "Change in state only", "Change in size only", "Change in temperature only"],
                answer: "A",
                explanation: "New substance formation is key indicator of chemical change."
            },
            {
                type: "chemical_changes",
                question: "Which shows chemical change occurred?",
                options: ["Color change with new substance", "Color change alone", "Size change alone", "Shape change alone"],
                answer: "A",
                explanation: "Color change indicates chemical change only if new substance forms."
            },
            {
                type: "chemical_changes",
                question: "What is rusting?",
                options: ["Chemical change of iron", "Physical change of iron", "Melting of iron", "Freezing of iron"],
                answer: "A",
                explanation: "Rusting is iron reacting with oxygen to form iron oxide (rust)."
            },
            {
                type: "chemical_changes",
                question: "What happens during cooking?",
                options: ["Chemical changes in food", "Only physical changes", "Only state changes", "No changes occur"],
                answer: "A",
                explanation: "Cooking causes chemical changes that alter food composition and create new substances."
            },
            {
                type: "chemical_changes",
                question: "Which indicates chemical change?",
                options: ["Gas production (bubbles)", "Melting", "Cutting", "Dissolving"],
                answer: "A",
                explanation: "Gas production (not from boiling) indicates chemical reaction."
            },
            {
                type: "chemical_changes",
                question: "What is oxidation?",
                options: ["Reaction with oxygen", "Reaction with water", "Reaction with heat", "Reaction with light"],
                answer: "A",
                explanation: "Oxidation is chemical reaction with oxygen (rusting, tarnishing, burning)."
            },
            {
                type: "chemical_changes",
                question: "Which change is difficult to reverse?",
                options: ["Chemical change", "Physical change", "Both equally", "Neither"],
                answer: "A",
                explanation: "Chemical changes are usually difficult or impossible to reverse."
            },
            {
                type: "chemical_changes",
                question: "What happens when vinegar reacts with baking soda?",
                options: ["Chemical change producing gas", "Physical change only", "No change", "Only color change"],
                answer: "A",
                explanation: "Vinegar (acid) + baking soda (base) ‚Üí carbon dioxide gas + new substances."
            },
            // Temperature & Energy (136-150)
            {
                type: "temperature",
                question: "What is temperature?",
                options: ["Measure of particle motion energy", "Measure of particle size", "Measure of particle color", "Measure of particle weight"],
                answer: "A",
                explanation: "Temperature measures average kinetic energy (motion energy) of particles."
            },
            {
                type: "temperature",
                question: "What happens when matter gains heat?",
                options: ["Particles move faster", "Particles get larger", "Particles change color", "Particles disappear"],
                answer: "A",
                explanation: "Adding heat increases particle motion (kinetic energy)."
            },
            {
                type: "temperature",
                question: "What is melting point?",
                options: ["Temperature when solid becomes liquid", "Temperature when liquid becomes gas", "Temperature when gas becomes liquid", "Temperature when liquid becomes solid"],
                answer: "A",
                explanation: "Melting point is specific temperature where solid changes to liquid."
            },
            {
                type: "temperature",
                question: "What is boiling point?",
                options: ["Temperature when liquid becomes gas", "Temperature when solid becomes liquid", "Temperature when gas becomes liquid", "Temperature when liquid becomes solid"],
                answer: "A",
                explanation: "Boiling point is temperature where liquid changes to gas throughout."
            },
            {
                type: "temperature",
                question: "What is freezing point?",
                options: ["Temperature when liquid becomes solid", "Temperature when solid becomes liquid", "Temperature when gas becomes liquid", "Temperature when liquid becomes gas"],
                answer: "A",
                explanation: "Freezing point is temperature where liquid changes to solid."
            },
            {
                type: "temperature",
                question: "What is condensation point?",
                options: ["Temperature when gas becomes liquid", "Temperature when liquid becomes gas", "Temperature when solid becomes liquid", "Temperature when liquid becomes solid"],
                answer: "A",
                explanation: "Condensation point is temperature where gas changes to liquid."
            },
            {
                type: "temperature",
                question: "At what temperature does water freeze?",
                options: ["0¬∞C (32¬∞F)", "100¬∞C (212¬∞F)", "50¬∞C (122¬∞F)", "-10¬∞C (14¬∞F)"],
                answer: "A",
                explanation: "Pure water freezes at 0¬∞C (32¬∞F) at sea level."
            },
            {
                type: "temperature",
                question: "At what temperature does water boil?",
                options: ["100¬∞C (212¬∞F)", "0¬∞C (32¬∞F)", "50¬∞C (122¬∞F)", "150¬∞C (302¬∞F)"],
                answer: "A",
                explanation: "Pure water boils at 100¬∞C (212¬∞F) at sea level."
            },
            {
                type: "temperature",
                question: "What is thermal expansion?",
                options: ["Matter expands when heated", "Matter shrinks when heated", "Matter stays same size", "Matter changes color when heated"],
                answer: "A",
                explanation: "Most matter expands when heated because particles move faster and spread out."
            },
            {
                type: "temperature",
                question: "What is absolute zero?",
                options: ["Coldest possible temperature", "Hottest possible temperature", "Room temperature", "Water freezing point"],
                answer: "A",
                explanation: "Absolute zero (-273¬∞C) is when particles have minimal motion."
            },
            // Advanced Concepts (151-155)
            {
                type: "advanced",
                question: "What is the fourth state of matter?",
                options: ["Plasma", "Bose-Einstein condensate", "Liquid crystal", "Superfluid"],
                answer: "A",
                explanation: "Plasma is often called the fourth state of matter."
            },
            {
                type: "advanced",
                question: "What happens during dissolving?",
                options: ["Physical change (solute in solvent)", "Chemical change creating new substance", "Both physical and chemical", "Neither physical nor chemical"],
                answer: "A",
                explanation: "Dissolving is usually physical - particles mix but don't form new substances."
            },
            {
                type: "advanced",
                question: "What is conservation of mass?",
                options: ["Mass stays same during physical/chemical changes", "Mass increases during changes", "Mass decreases during changes", "Mass disappears during changes"],
                answer: "A",
                explanation: "Mass is conserved - total mass stays the same in closed systems."
            },
            {
                type: "advanced",
                question: "What are mixtures?",
                options: ["Combinations that keep original properties", "New substances with different properties", "Only solids mixed together", "Only liquids mixed together"],
                answer: "A",
                explanation: "Mixtures contain two or more substances that keep their own properties."
            },
            {
                type: "advanced",
                question: "What are solutions?",
                options: ["Homogeneous mixtures", "Heterogeneous mixtures", "Chemical compounds", "Pure substances"],
                answer: "A",
                explanation: "Solutions are homogeneous mixtures where particles are evenly distributed."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent matter knowledge!",
            "Fantastic understanding of states!",
            "Great job! You're a matter expert!",
            "Amazing! Your science knowledge is perfect!",
            "Well done! Perfect state identification!",
            "You're a matter and changes champion!",
            "Perfect! You understand particle theory!",
            "Outstanding scientific knowledge!",
            "Brilliant! You think like a scientist!",
            "You're on fire! Great scientific insight!"
        ];

        // Matter information
        const matterStates = {
            solid: {
                name: "Solid",
                icon: "üßä",
                color: "var(--accent-green)",
                examples: ["Ice", "Rock", "Wood", "Metal", "Plastic"],
                properties: [
                    "Definite shape",
                    "Definite volume",
                    "Particles vibrate in place",
                    "Cannot be compressed",
                    "High density usually"
                ],
                particleMotion: "Vibrating in fixed positions"
            },
            liquid: {
                name: "Liquid",
                icon: "üíß",
                color: "var(--primary-blue)",
                examples: ["Water", "Milk", "Juice", "Oil", "Honey"],
                properties: [
                    "Takes container shape",
                    "Definite volume",
                    "Particles flow past each other",
                    "Nearly incompressible",
                    "Surface tension"
                ],
                particleMotion: "Sliding past each other"
            },
            gas: {
                name: "Gas",
                icon: "‚òÅÔ∏è",
                color: "var(--accent-yellow)",
                examples: ["Air", "Helium", "Oxygen", "Carbon dioxide", "Steam"],
                properties: [
                    "Fills container completely",
                    "No definite volume",
                    "Particles move rapidly",
                    "Highly compressible",
                    "Low density usually"
                ],
                particleMotion: "Moving rapidly in all directions"
            },
            plasma: {
                name: "Plasma",
                icon: "‚ö°",
                color: "var(--accent-purple)",
                examples: ["Lightning", "Stars", "Neon signs", "Auroras", "Flames"],
                properties: [
                    "Charged particles",
                    "Conducts electricity",
                    "Responds to magnetic fields",
                    "Very high temperature",
                    "Most common in universe"
                ],
                particleMotion: "Ions and electrons moving independently"
            }
        };

        // Phase changes
        const phaseChanges = {
            melting: {
                name: "Melting",
                from: "Solid",
                to: "Liquid",
                process: "Adding heat",
                example: "Ice ‚Üí Water",
                temperature: "Melting point",
                energy: "Absorbs heat"
            },
            freezing: {
                name: "Freezing",
                from: "Liquid",
                to: "Solid",
                process: "Removing heat",
                example: "Water ‚Üí Ice",
                temperature: "Freezing point",
                energy: "Releases heat"
            },
            evaporation: {
                name: "Evaporation",
                from: "Liquid",
                to: "Gas",
                process: "Adding heat (surface)",
                example: "Water ‚Üí Water vapor",
                temperature: "Below boiling point",
                energy: "Absorbs heat"
            },
            boiling: {
                name: "Boiling",
                from: "Liquid",
                to: "Gas",
                process: "Adding heat (throughout)",
                example: "Water ‚Üí Steam",
                temperature: "Boiling point",
                energy: "Absorbs heat"
            },
            condensation: {
                name: "Condensation",
                from: "Gas",
                to: "Liquid",
                process: "Removing heat",
                example: "Steam ‚Üí Water",
                temperature: "Condensation point",
                energy: "Releases heat"
            },
            sublimation: {
                name: "Sublimation",
                from: "Solid",
                to: "Gas",
                process: "Adding heat",
                example: "Dry ice ‚Üí Carbon dioxide gas",
                temperature: "Below melting point",
                energy: "Absorbs heat"
            },
            deposition: {
                name: "Deposition",
                from: "Gas",
                to: "Solid",
                process: "Removing heat",
                example: "Water vapor ‚Üí Frost",
                temperature: "Below freezing point",
                energy: "Releases heat"
            }
        };

        // Physical vs Chemical changes
        const changesComparison = {
            physical: {
                name: "Physical Changes",
                examples: [
                    {name: "Melting ice", description: "Solid to liquid"},
                    {name: "Breaking glass", description: "Changing shape"},
                    {name: "Dissolving sugar", description: "Mixing with water"},
                    {name: "Cutting paper", description: "Changing size"},
                    {name: "Boiling water", description: "Liquid to gas"},
                    {name: "Bending metal", description: "Changing shape"}
                ],
                characteristics: [
                    "No new substance forms",
                    "Usually reversible",
                    "Changes appearance only",
                    "Same molecules before/after"
                ]
            },
            chemical: {
                name: "Chemical Changes",
                examples: [
                    {name: "Burning wood", description: "Produces ash and gases"},
                    {name: "Rusting iron", description: "Iron + oxygen ‚Üí rust"},
                    {name: "Cooking food", description: "Changes composition"},
                    {name: "Digesting food", description: "Breaks down molecules"},
                    {name: "Photosynthesis", description: "Plants make food"},
                    {name: "Baking cake", description: "Ingredients transform"}
                ],
                characteristics: [
                    "New substances form",
                    "Usually irreversible",
                    "Properties change completely",
                    "Different molecules after"
                ]
            }
        };

        // Everyday examples
        const everydayExamples = [
            {icon: "‚ùÑÔ∏è", title: "Ice Melting", description: "Solid ice becomes liquid water when heated", type: "Physical"},
            {icon: "üî•", title: "Candle Burning", description: "Wax and oxygen produce water and carbon dioxide", type: "Chemical"},
            {icon: "ü•§", title: "Soda Fizz", description: "Carbon dioxide gas escapes when opened", type: "Physical"},
            {icon: "üçû", title: "Toasting Bread", description: "Heat causes chemical changes (Maillard reaction)", type: "Chemical"},
            {icon: "üßä", title: "Water Freezing", description: "Liquid water becomes solid ice when cooled", type: "Physical"},
            {icon: "üçé", title: "Apple Browning", description: "Enzymatic reaction with oxygen", type: "Chemical"},
            {icon: "üöó", title: "Fuel Burning", description: "Gasoline + oxygen ‚Üí energy + exhaust", type: "Chemical"},
            {icon: "‚òï", title: "Making Coffee", description: "Dissolving coffee in hot water", type: "Physical"},
            {icon: "üßΩ", title: "Cleaning with Soap", description: "Chemical reaction removing dirt", type: "Chemical"},
            {icon: "üßÇ", title: "Salt Dissolving", description: "Salt particles spreading in water", type: "Physical"}
        ];

        // Interesting science facts
        const scienceFacts = [
            "Water is the only substance that naturally exists in all three states on Earth!",
            "A gas has no definite shape or volume - it expands to fill whatever container it's in!",
            "Plasma makes up 99% of the visible universe - stars are giant balls of plasma!",
            "Dry ice doesn't melt - it sublimates directly from solid to gas at -78¬∞C!",
            "The particles in a solid are so close together that solids are almost impossible to compress!",
            "Glass is actually a supercooled liquid that flows very slowly over centuries!",
            "Absolute zero (-273¬∞C) is the coldest possible temperature where particles stop moving!",
            "Some substances like gallium melt in your hand (melting point 29.8¬∞C)!"
        ];

        // Particle arrangements for visualization
        const particleArrangements = {
            solid: [
                {x: 30, y: 30, size: 8},
                {x: 50, y: 30, size: 8},
                {x: 70, y: 30, size: 8},
                {x: 30, y: 50, size: 8},
                {x: 50, y: 50, size: 8},
                {x: 70, y: 50, size: 8},
                {x: 30, y: 70, size: 8},
                {x: 50, y: 70, size: 8},
                {x: 70, y: 70, size: 8}
            ],
            liquid: [
                {x: 25, y: 30, size: 8},
                {x: 45, y: 35, size: 8},
                {x: 65, y: 40, size: 8},
                {x: 35, y: 55, size: 8},
                {x: 55, y: 60, size: 8},
                {x: 75, y: 50, size: 8},
                {x: 40, y: 75, size: 8},
                {x: 60, y: 70, size: 8},
                {x: 80, y: 65, size: 8}
            ],
            gas: [
                {x: 20, y: 20, size: 6},
                {x: 60, y: 30, size: 6},
                {x: 40, y: 50, size: 6},
                {x: 80, y: 40, size: 6},
                {x: 30, y: 70, size: 6},
                {x: 70, y: 60, size: 6},
                {x: 50, y: 80, size: 6},
                {x: 90, y: 20, size: 6},
                {x: 10, y: 60, size: 6},
                {x: 85, y: 75, size: 6}
            ]
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceFact = document.getElementById('scienceFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5Matter');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5Matter', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5Matter_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5Matter_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a matter expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent science knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning to become a science master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review matter concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Science helps us understand our world!";
            }
        }

        // Create science fact display
        function createScienceFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'science-fact';
            
            factDiv.innerHTML = `<strong>Amazing Science Fact:</strong> ${scienceFacts[Math.floor(Math.random() * scienceFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "matter_basics": "üî¨",
                "solids": "üßä",
                "liquids": "üíß",
                "gases": "‚òÅÔ∏è",
                "plasma": "‚ö°",
                "physical_changes": "üîÑ",
                "chemical_changes": "üî•",
                "temperature": "üå°Ô∏è",
                "advanced": "üß†"
            };
            
            let conceptName = "Matter Basics";
            let conceptIcon = "üî¨";
            
            if (question.type.includes("matter_basics")) {
                conceptName = "Matter Basics";
                conceptIcon = conceptIcons.matter_basics;
            } else if (question.type.includes("solids")) {
                conceptName = "Solids";
                conceptIcon = conceptIcons.solids;
            } else if (question.type.includes("liquids")) {
                conceptName = "Liquids";
                conceptIcon = conceptIcons.liquids;
            } else if (question.type.includes("gases")) {
                conceptName = "Gases";
                conceptIcon = conceptIcons.gases;
            } else if (question.type.includes("plasma")) {
                conceptName = "Plasma";
                conceptIcon = conceptIcons.plasma;
            } else if (question.type.includes("physical_changes")) {
                conceptName = "Physical Changes";
                conceptIcon = conceptIcons.physical_changes;
            } else if (question.type.includes("chemical_changes")) {
                conceptName = "Chemical Changes";
                conceptIcon = conceptIcons.chemical_changes;
            } else if (question.type.includes("temperature")) {
                conceptName = "Temperature & Energy";
                conceptIcon = conceptIcons.temperature;
            } else if (question.type.includes("advanced")) {
                conceptName = "Advanced Concepts";
                conceptIcon = conceptIcons.advanced;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("matter_basics")) {
                label.textContent = "Understanding matter, mass, volume, and properties";
            } else if (question.type.includes("solids")) {
                label.textContent = "Properties and behavior of solids";
            } else if (question.type.includes("liquids")) {
                label.textContent = "Properties and behavior of liquids";
            } else if (question.type.includes("gases")) {
                label.textContent = "Properties and behavior of gases";
            } else if (question.type.includes("plasma")) {
                label.textContent = "The fourth state of matter";
            } else if (question.type.includes("physical_changes")) {
                label.textContent = "Changes in state and physical properties";
            } else if (question.type.includes("chemical_changes")) {
                label.textContent = "Formation of new substances";
            } else if (question.type.includes("temperature")) {
                label.textContent = "Temperature effects and phase change points";
            } else if (question.type.includes("advanced")) {
                label.textContent = "Deeper understanding of matter concepts";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create matter visualization
        function createMatterVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            // Randomly select states for display
            const states = ['solid', 'liquid', 'gas'];
            const selectedState = states[Math.floor(Math.random() * states.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">States of Matter & Changes</h3>
                
                <div class="states-display">
                    ${Object.values(matterStates).map(state => `
                        <div class="state-card ${state.name.toLowerCase()} ${state.name.toLowerCase()}-glow">
                            <div class="state-icon">${state.icon}</div>
                            <div class="state-title">${state.name}</div>
                            <ul class="state-properties">
                                ${state.properties.map(prop => `
                                    <li><span class="property-icon">‚úì</span> ${prop}</li>
                                `).join('')}
                            </ul>
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--dark-border);">
                                <strong>Examples:</strong> ${state.examples.slice(0, 3).join(', ')}
                            </div>
                            <div style="margin-top: 10px; font-size: 0.9rem; color: var(--text-secondary);">
                                <strong>Particle Motion:</strong> ${state.particleMotion}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="particle-display">
                    <h4 style="color: var(--accent-orange); margin-bottom: 15px; text-align: center;">Particle Arrangement in ${matterStates[selectedState].name}s</h4>
                    <div class="particle-canvas" id="particleCanvas">
                        <!-- Particles will be added by JavaScript -->
                    </div>
                    <div style="text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                        Particles in ${matterStates[selectedState].name.toLowerCase()}s ${matterStates[selectedState].particleMotion.toLowerCase()}
                    </div>
                </div>
                
                <div class="phase-diagram">
                    <h4 style="color: var(--accent-purple); margin-bottom: 15px; text-align: center;">Phase Changes of Water</h4>
                    <div class="diagram-container">
                        <div class="phase-box solid-box">
                            <div class="phase-label solid-label">Solid (Ice)</div>
                            <div class="phase-process">0¬∞C and below</div>
                        </div>
                        
                        <div class="phase-arrow">
                            <div class="arrow-icon phase-change">‚¨ÜÔ∏è</div>
                            <div style="text-align: center;">
                                <div style="color: var(--primary-blue); font-weight: bold;">Melting</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Add heat (0¬∞C)</div>
                            </div>
                            <div class="arrow-icon phase-change">‚¨áÔ∏è</div>
                            <div style="text-align: center;">
                                <div style="color: var(--accent-green); font-weight: bold;">Freezing</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Remove heat (0¬∞C)</div>
                            </div>
                        </div>
                        
                        <div class="phase-box liquid-box">
                            <div class="phase-label liquid-label">Liquid (Water)</div>
                            <div class="phase-process">0¬∞C to 100¬∞C</div>
                        </div>
                        
                        <div class="phase-arrow">
                            <div class="arrow-icon phase-change">‚¨ÜÔ∏è</div>
                            <div style="text-align: center;">
                                <div style="color: var(--accent-yellow); font-weight: bold;">Evaporation/Boiling</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Add heat (100¬∞C)</div>
                            </div>
                            <div class="arrow-icon phase-change">‚¨áÔ∏è</div>
                            <div style="text-align: center;">
                                <div style="color: var(--accent-purple); font-weight: bold;">Condensation</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Remove heat (100¬∞C)</div>
                            </div>
                        </div>
                        
                        <div class="phase-box gas-box">
                            <div class="phase-label gas-label">Gas (Steam)</div>
                            <div class="phase-process">100¬∞C and above</div>
                        </div>
                    </div>
                </div>
                
                <div class="changes-grid">
                    <div class="change-card">
                        <div class="change-title">Physical Changes</div>
                        <div class="change-examples">
                            ${changesComparison.physical.examples.slice(0, 4).map(example => `
                                <div class="example-item bounce" style="animation-delay: ${Math.random() * 0.5}s">
                                    <div class="example-name">${example.name}</div>
                                    <div class="example-desc">${example.description}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: rgba(33, 150, 243, 0.1); border-radius: 6px;">
                            <strong>Key Points:</strong><br>
                            ‚Ä¢ No new substances<br>
                            ‚Ä¢ Usually reversible<br>
                            ‚Ä¢ Changes form only
                        </div>
                    </div>
                    
                    <div class="change-card">
                        <div class="change-title">Chemical Changes</div>
                        <div class="change-examples">
                            ${changesComparison.chemical.examples.slice(0, 4).map(example => `
                                <div class="example-item bounce" style="animation-delay: ${Math.random() * 0.5}s">
                                    <div class="example-name">${example.name}</div>
                                    <div class="example-desc">${example.description}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: rgba(244, 67, 54, 0.1); border-radius: 6px;">
                            <strong>Key Points:</strong><br>
                            ‚Ä¢ New substances form<br>
                            ‚Ä¢ Usually irreversible<br>
                            ‚Ä¢ Properties change completely
                        </div>
                    </div>
                </div>
                
                <div class="examples-grid">
                    <div class="lab-title" style="grid-column: 1 / -1; margin-bottom: 0;">Everyday Examples of Matter Changes</div>
                    ${everydayExamples.map((example, index) => `
                        <div class="example-card particle-float" style="animation-delay: ${index * 0.1}s">
                            <div class="example-icon">${example.icon}</div>
                            <div class="example-title">${example.title}</div>
                            <div class="example-description">${example.description}</div>
                            <div style="margin-top: 10px; padding: 5px; background: ${example.type === 'Physical' ? 'rgba(33, 150, 243, 0.1)' : 'rgba(244, 67, 54, 0.1)'}; border-radius: 4px; text-align: center; font-size: 0.8rem;">
                                ${example.type} Change
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="interactive-lab">
                    <div class="lab-title">Interactive Matter Lab</div>
                    <div class="lab-controls">
                        <div class="lab-button" onclick="showParticles('solid')">Show Solid Particles</div>
                        <div class="lab-button" onclick="showParticles('liquid')">Show Liquid Particles</div>
                        <div class="lab-button" onclick="showParticles('gas')">Show Gas Particles</div>
                    </div>
                    <div class="lab-display" id="labDisplay">
                        Click buttons above to see particle arrangements
                    </div>
                </div>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Property</th>
                            <th>Solid</th>
                            <th>Liquid</th>
                            <th>Gas</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="solid-row">
                            <td>Shape</td>
                            <td>Definite</td>
                            <td>Takes container shape</td>
                            <td>No definite shape</td>
                        </tr>
                        <tr class="liquid-row">
                            <td>Volume</td>
                            <td>Definite</td>
                            <td>Definite</td>
                            <td>No definite volume</td>
                        </tr>
                        <tr class="gas-row">
                            <td>Particle Motion</td>
                            <td>Vibrate in place</td>
                            <td>Slide past each other</td>
                            <td>Move rapidly in all directions</td>
                        </tr>
                        <tr>
                            <td>Compressibility</td>
                            <td>Very low</td>
                            <td>Low</td>
                            <td>High</td>
                        </tr>
                        <tr>
                            <td>Examples</td>
                            <td>Ice, rock, wood</td>
                            <td>Water, milk, oil</td>
                            <td>Air, oxygen, steam</td>
                        </tr>
                    </tbody>
                </table>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Review Questions:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. What are the three main states of matter?<br>
                        2. How do particles move in each state?<br>
                        3. What's the difference between melting and freezing?<br>
                        4. Give an example of a chemical change.
                    </div>
                </div>
            `;
            
            // Add particles to the canvas
            setTimeout(() => {
                createParticles(selectedState);
            }, 100);
            
            return vizDiv;
        }

        // Create particles in the canvas
        function createParticles(state) {
            const canvas = document.getElementById('particleCanvas');
            if (!canvas) return;
            
            canvas.innerHTML = '';
            const particles = particleArrangements[state];
            
            particles.forEach((particle, index) => {
                const particleDiv = document.createElement('div');
                particleDiv.className = `particle ${state}-particle`;
                particleDiv.style.width = `${particle.size}px`;
                particleDiv.style.height = `${particle.size}px`;
                particleDiv.style.left = `${particle.x}%`;
                particleDiv.style.top = `${particle.y}px`;
                
                // Add animation based on state
                if (state === 'solid') {
                    particleDiv.classList.add('particle-vibrate');
                    particleDiv.style.animationDelay = `${index * 0.1}s`;
                } else if (state === 'liquid') {
                    particleDiv.classList.add('particle-float');
                    particleDiv.style.animationDelay = `${index * 0.2}s`;
                } else if (state === 'gas') {
                    particleDiv.classList.add('particle-fast');
                    particleDiv.style.animationDelay = `${index * 0.05}s`;
                    particleDiv.style.animationDuration = `${0.5 + Math.random() * 1}s`;
                }
                
                canvas.appendChild(particleDiv);
            });
        }

        // Global function for interactive lab
        window.showParticles = function(state) {
            const labDisplay = document.getElementById('labDisplay');
            if (!labDisplay) return;
            
            labDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; margin-bottom: 10px;">${matterStates[state].icon}</div>
                    <div style="font-weight: bold; color: ${matterStates[state].color}; margin-bottom: 10px;">${matterStates[state].name}</div>
                    <div>${matterStates[state].particleMotion}</div>
                    <div style="margin-top: 10px; font-size: 0.9rem;">
                        <strong>Examples:</strong> ${matterStates[state].examples.slice(0, 3).join(', ')}
                    </div>
                </div>
            `;
            
            createParticles(state);
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceFact.appendChild(createScienceFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createMatterVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
