<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Science - Body Systems | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Biology Theme */
        :root {
            --primary-red: #F44336;
            --primary-blue: #2196F3;
            --primary-green: #4CAF50;
            --primary-purple: #9C27B0;
            --accent-yellow: #FFC107;
            --accent-teal: #009688;
            --accent-orange: #FF9800;
            --accent-pink: #E91E63;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --digestive-glow: 0 0 20px rgba(244, 67, 54, 0.4);
            --respiratory-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --circulatory-glow: 0 0 20px rgba(76, 175, 80, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(244, 67, 54, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-red), var(--primary-blue), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(244, 67, 54, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-red);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-red);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-red);
            box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-red);
            color: white;
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
        }

        .btn-primary:hover {
            background: #d32f2f;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(244, 67, 54, 0.4);
        }

        .btn-secondary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-secondary:hover {
            background: #0b7dda;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-success {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-success:hover {
            background: #3d8b40;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-red);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Body Systems Grid */
        .systems-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .systems-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .systems-grid {
                grid-template-columns: 1fr;
            }
        }

        .system-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .system-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .system-card.digestive {
            border-color: var(--primary-red);
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.1), transparent);
        }

        .system-card.respiratory {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .system-card.circulatory {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .system-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .system-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .system-card.digestive .system-title {
            color: var(--primary-red);
        }

        .system-card.respiratory .system-title {
            color: var(--primary-blue);
        }

        .system-card.circulatory .system-title {
            color: var(--primary-green);
        }

        .system-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
            flex-grow: 1;
        }

        .system-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-red), var(--primary-blue), var(--primary-green));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(244, 67, 54, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .biology-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-red);
            background: rgba(244, 67, 54, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--accent-teal);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
        }

        .option.incorrect .option-letter {
            background: #F44336;
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 800px;
        }

        /* System Visualizers */
        .system-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid;
            position: relative;
        }

        .digestive-visualizer {
            border-color: var(--primary-red);
        }

        .respiratory-visualizer {
            border-color: var(--primary-blue);
        }

        .circulatory-visualizer {
            border-color: var(--primary-green);
        }

        .visualizer-title {
            color: inherit;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .system-canvas {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        /* Interactive Anatomy Models */
        .anatomy-model {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .organ {
            position: absolute;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            overflow: hidden;
        }

        .organ:hover {
            transform: scale(1.1);
            z-index: 100;
            box-shadow: 0 0 15px currentColor;
        }

        .organ-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.7rem;
            pointer-events: none;
            white-space: nowrap;
        }

        /* Process Visualizers */
        .process-visualizer {
            width: 100%;
            height: 150px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .process-step {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .process-step:hover {
            transform: scale(1.2);
        }

        .process-connection {
            position: absolute;
            height: 2px;
            background: rgba(255, 255, 255, 0.3);
        }

        /* Blood Flow Animation */
        .blood-flow {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #F44336;
            box-shadow: 0 0 10px #F44336;
            animation: flow 3s linear infinite;
        }

        @keyframes flow {
            0% { transform: translateY(-10px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(200px); opacity: 0; }
        }

        /* Air Flow Animation */
        .air-flow {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #2196F3;
            box-shadow: 0 0 10px #2196F3;
            animation: breathe 4s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(0.8); opacity: 0.3; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        /* Food Particle Animation */
        .food-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #FF9800;
            box-shadow: 0 0 10px #FF9800;
            animation: digest 5s linear infinite;
        }

        @keyframes digest {
            0% { left: 10%; top: 50%; }
            25% { left: 30%; top: 40%; }
            50% { left: 50%; top: 50%; }
            75% { left: 70%; top: 60%; }
            100% { left: 90%; top: 50%; }
        }

        /* Comparison Tables */
        .comparison-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        .comparison-tables {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .comparison-tables {
                grid-template-columns: 1fr;
            }
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-card);
            padding: 10px;
            text-align: left;
            color: var(--accent-yellow);
            border-bottom: 2px solid var(--accent-yellow);
        }

        .comparison-table td {
            padding: 8px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
            cursor: pointer;
        }

        .comparison-table td:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Health Data Panel */
        .health-panel {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .health-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        .metric {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-teal);
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Interactive Quiz Panel */
        .quiz-panel {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-pink);
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        .quiz-option {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.1);
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--primary-green);
        }

        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.2);
            border-color: #F44336;
        }

        /* Formula Display */
        .formula-display {
            background: rgba(244, 67, 54, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-red);
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            text-align: center;
        }

        /* Interactive Controls */
        .controls-panel {
            background: var(--dark-surface);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .control-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .control-slider {
            flex: 1;
            min-width: 200px;
        }

        .control-slider label {
            display: block;
            margin-bottom: 5px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .control-slider input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--dark-border);
            outline: none;
        }

        .control-slider input[type="range"]::-webkit-slider-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-blue);
            cursor: pointer;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-red), var(--primary-blue), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-red), var(--primary-blue), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-red);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .heartbeat {
            animation: heartbeat 1s ease infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .systems-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .comparison-tables {
                grid-template-columns: 1fr;
            }
            
            .health-metrics {
                grid-template-columns: 1fr;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
            
            .control-group {
                flex-direction: column;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Science: Body Systems</h1>
            <p class="welcome-subtitle">Explore the incredible systems that keep you alive! Discover how your body digests food, breathes air, and pumps blood through an intricate network of organs and tissues. Learn about their structures, functions, and amazing interconnections.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ü´Äü´ÅüçΩÔ∏è</span>
                <span class="topic-name">Digestive, Respiratory & Circulatory Systems</span>
            </div>
            
            <div class="systems-grid">
                <div class="system-card digestive" onclick="showSystemDetail('digestive')">
                    <div class="system-icon">üçΩÔ∏è</div>
                    <h3 class="system-title">Digestive System</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Breaks down food for energy and nutrients</p>
                    <div class="system-features">
                        <h4>Key Organs:</h4>
                        <ul class="feature-list">
                            <li>Mouth & Salivary Glands</li>
                            <li>Esophagus & Stomach</li>
                            <li>Small & Large Intestine</li>
                            <li>Liver & Pancreas</li>
                        </ul>
                    </div>
                </div>
                
                <div class="system-card respiratory" onclick="showSystemDetail('respiratory')">
                    <div class="system-icon">ü´Å</div>
                    <h3 class="system-title">Respiratory System</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Exchanges gases between body and environment</p>
                    <div class="system-features">
                        <h4>Key Organs:</h4>
                        <ul class="feature-list">
                            <li>Nose & Nasal Cavity</li>
                            <li>Trachea & Bronchi</li>
                            <li>Lungs & Bronchioles</li>
                            <li>Alveoli (air sacs)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="system-card circulatory" onclick="showSystemDetail('circulatory')">
                    <div class="system-icon">ü´Ä</div>
                    <h3 class="system-title">Circulatory System</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Transports substances throughout the body</p>
                    <div class="system-features">
                        <h4>Key Components:</h4>
                        <ul class="feature-list">
                            <li>Heart (4 chambers)</li>
                            <li>Arteries & Veins</li>
                            <li>Capillaries</li>
                            <li>Blood Components</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üî¨ Begin Biology Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="biologyTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Digestive System -->
                    <div class="system-visualizer digestive-visualizer">
                        <div class="visualizer-title">Digestive System Model</div>
                        <div class="anatomy-model" id="digestiveModel">
                            <!-- Interactive digestive organs will be added here -->
                        </div>
                        <div class="controls-panel">
                            <div class="control-group">
                                <button class="btn btn-small btn-secondary" onclick="showDigestiveProcess()">Show Digestion</button>
                                <button class="btn btn-small btn-secondary" onclick="highlightOrgan('stomach')">Focus: Stomach</button>
                                <button class="btn btn-small btn-secondary" onclick="showEnzymeAction()">Enzyme Action</button>
                            </div>
                            <div class="control-slider">
                                <label>Digestion Speed: <span id="digestionSpeedValue">Normal</span></label>
                                <input type="range" id="digestionSpeed" min="1" max="100" value="50" oninput="updateDigestionSpeed(this.value)">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Respiratory System -->
                    <div class="system-visualizer respiratory-visualizer">
                        <div class="visualizer-title">Respiratory System Model</div>
                        <div class="anatomy-model" id="respiratoryModel">
                            <!-- Interactive respiratory organs will be added here -->
                        </div>
                        <div class="controls-panel">
                            <div class="control-group">
                                <button class="btn btn-small btn-secondary" onclick="simulateBreathing()">Simulate Breathing</button>
                                <button class="btn btn-small btn-secondary" onclick="highlightOrgan('lungs')">Focus: Lungs</button>
                                <button class="btn btn-small btn-secondary" onclick="showGasExchange()">Gas Exchange</button>
                            </div>
                            <div class="control-slider">
                                <label>Breathing Rate: <span id="breathingRateValue">12/min</span></label>
                                <input type="range" id="breathingRate" min="1" max="40" value="12" oninput="updateBreathingRate(this.value)">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Circulatory System -->
                    <div class="system-visualizer circulatory-visualizer">
                        <div class="visualizer-title">Circulatory System Model</div>
                        <div class="anatomy-model" id="circulatoryModel">
                            <!-- Interactive circulatory components will be added here -->
                        </div>
                        <div class="controls-panel">
                            <div class="control-group">
                                <button class="btn btn-small btn-secondary" onclick="simulateBloodFlow()">Simulate Blood Flow</button>
                                <button class="btn btn-small btn-secondary" onclick="highlightOrgan('heart')">Focus: Heart</button>
                                <button class="btn btn-small btn-secondary" onclick="showBloodComponents()">Blood Components</button>
                            </div>
                            <div class="control-slider">
                                <label>Heart Rate: <span id="heartRateValue">72 bpm</span></label>
                                <input type="range" id="heartRate" min="40" max="120" value="72" oninput="updateHeartRate(this.value)">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Process Visualizers -->
                    <div class="comparison-section">
                        <div class="visualizer-title">System Processes Comparison</div>
                        <div class="comparison-tables">
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Digestive Process</th>
                                        <th>Function</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showProcessDetail('ingestion')">
                                        <td>Ingestion</td>
                                        <td>Taking in food</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('digestion')">
                                        <td>Digestion</td>
                                        <td>Breaking down food</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('absorption')">
                                        <td>Absorption</td>
                                        <td>Nutrients into blood</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('elimination')">
                                        <td>Elimination</td>
                                        <td>Removing waste</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Respiratory Process</th>
                                        <th>Function</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showProcessDetail('ventilation')">
                                        <td>Ventilation</td>
                                        <td>Breathing in/out</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('external_resp')">
                                        <td>External Respiration</td>
                                        <td>Gas exchange in lungs</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('internal_resp')">
                                        <td>Internal Respiration</td>
                                        <td>Gas exchange in tissues</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('cellular_resp')">
                                        <td>Cellular Respiration</td>
                                        <td>Using O‚ÇÇ to make ATP</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Circulatory Process</th>
                                        <th>Function</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showProcessDetail('pulmonary')">
                                        <td>Pulmonary Circuit</td>
                                        <td>Heart ‚Üí Lungs ‚Üí Heart</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('systemic')">
                                        <td>Systemic Circuit</td>
                                        <td>Heart ‚Üí Body ‚Üí Heart</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('oxygen_trans')">
                                        <td>O‚ÇÇ Transport</td>
                                        <td>Via hemoglobin</td>
                                    </tr>
                                    <tr onclick="showProcessDetail('co2_trans')">
                                        <td>CO‚ÇÇ Transport</td>
                                        <td>As bicarbonate</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Health Metrics Panel -->
                    <div class="health-panel">
                        <div class="visualizer-title">Body System Metrics</div>
                        <div class="health-metrics">
                            <div class="metric">
                                <div class="metric-value" id="heartRateDisplay">72</div>
                                <div class="metric-label">Heart Rate (bpm)</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value" id="breathRateDisplay">12</div>
                                <div class="metric-label">Breathing Rate (/min)</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value" id="oxygenLevel">98%</div>
                                <div class="metric-label">Oxygen Saturation</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value" id="digestionTime">4h</div>
                                <div class="metric-label">Digestion Time</div>
                            </div>
                        </div>
                        <div class="control-group" style="margin-top: 10px;">
                            <button class="btn btn-small btn-success" onclick="simulateExercise()">Simulate Exercise</button>
                            <button class="btn btn-small btn-secondary" onclick="simulateRest()">Simulate Rest</button>
                            <button class="btn btn-small btn-secondary" onclick="resetMetrics()">Reset Metrics</button>
                        </div>
                    </div>
                    
                    <!-- Interactive Quiz Panel -->
                    <div class="quiz-panel">
                        <div class="visualizer-title">Quick System Identification</div>
                        <div id="quizQuestion" style="margin-bottom: 10px; color: var(--text-primary);">
                            Which system is responsible for...
                        </div>
                        <div class="quiz-options" id="quizOptions">
                            <!-- Options will be populated by JavaScript -->
                        </div>
                        <div id="quizFeedback" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem;"></div>
                        <div class="control-group" style="margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="newQuizQuestion()">New Question</button>
                            <button class="btn btn-small btn-secondary" onclick="showQuizExplanation()">Explanation</button>
                        </div>
                    </div>
                    
                    <!-- System Interactions Panel -->
                    <div class="comparison-section" style="border-color: var(--accent-orange);">
                        <div class="visualizer-title">System Interactions</div>
                        <div class="process-visualizer" id="interactionModel">
                            <!-- System interaction visualization -->
                        </div>
                        <div class="control-group" style="margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showOxygenPath()">Oxygen Pathway</button>
                            <button class="btn btn-small btn-secondary" onclick="showNutrientPath()">Nutrient Pathway</button>
                            <button class="btn btn-small btn-secondary" onclick="showWastePath()">Waste Pathway</button>
                        </div>
                        <div id="interactionInfo" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Click buttons to trace substance pathways
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Biology Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 advanced questions on Body Systems
        const questions = [
            {
                question: "Where does chemical digestion of carbohydrates begin in the human body?",
                options: ["Mouth (with salivary amylase)", "Stomach (with gastric juices)", "Small intestine (with pancreatic amylase)", "Large intestine (with bacteria)"],
                answer: "A",
                explanation: "Chemical digestion of carbohydrates begins in the mouth where salivary amylase breaks down starch into maltose. The stomach has no carbohydrate-digesting enzymes."
            },
            {
                question: "What is the primary function of the alveoli in the respiratory system?",
                options: ["Gas exchange between air and blood", "Filtering incoming air", "Producing mucus to trap particles", "Warming incoming air"],
                answer: "A",
                explanation: "Alveoli are tiny air sacs where oxygen diffuses into the blood and carbon dioxide diffuses out. This is the site of external respiration."
            },
            {
                question: "Which chamber of the heart pumps oxygenated blood to the body?",
                options: ["Left ventricle", "Right ventricle", "Left atrium", "Right atrium"],
                answer: "A",
                explanation: "The left ventricle pumps oxygenated blood through the aorta to the entire body (systemic circulation). It has the thickest muscle wall."
            },
            {
                question: "What is the role of bile in digestion?",
                options: ["Emulsifies fats into smaller droplets", "Breaks down proteins into amino acids", "Neutralizes stomach acid", "Absorbs water from undigested food"],
                answer: "A",
                explanation: "Bile, produced by the liver and stored in the gallbladder, emulsifies fats (breaks large fat globules into smaller droplets) to increase surface area for enzyme action."
            },
            {
                question: "During inhalation, what happens to the diaphragm?",
                options: ["Contracts and moves downward", "Relaxes and moves upward", "Remains stationary", "Contracts and moves upward"],
                answer: "A",
                explanation: "During inhalation, the diaphragm contracts and flattens (moves downward), increasing thoracic volume and decreasing pressure, causing air to rush in."
            },
            {
                question: "What is the function of capillaries in the circulatory system?",
                options: ["Site of substance exchange between blood and tissues", "Carry oxygenated blood away from heart", "Carry deoxygenated blood toward heart", "Regulate blood pressure"],
                answer: "A",
                explanation: "Capillaries are the smallest blood vessels with thin walls that allow exchange of gases, nutrients, and wastes between blood and body tissues."
            },
            {
                question: "Where are nutrients from digested food absorbed into the bloodstream?",
                options: ["Small intestine (in villi and microvilli)", "Stomach lining", "Large intestine", "Esophagus"],
                answer: "A",
                explanation: "Most nutrient absorption occurs in the small intestine through finger-like projections called villi and microvilli that greatly increase surface area."
            },
            {
                question: "How is most carbon dioxide transported in the blood?",
                options: ["As bicarbonate ions (HCO‚ÇÉ‚Åª) in plasma", "Bound to hemoglobin", "Dissolved directly in plasma", "As carbonic acid"],
                answer: "A",
                explanation: "About 70% of CO‚ÇÇ is transported as bicarbonate ions. CO‚ÇÇ + H‚ÇÇO ‚Üî H‚ÇÇCO‚ÇÉ ‚Üî H‚Å∫ + HCO‚ÇÉ‚Åª. This occurs in red blood cells with carbonic anhydrase enzyme."
            },
            {
                question: "What is peristalsis in the digestive system?",
                options: ["Wave-like muscular contractions that move food", "Chemical breakdown of food by enzymes", "Absorption of nutrients through intestinal walls", "Production of digestive juices"],
                answer: "A",
                explanation: "Peristalsis is the involuntary wave-like muscular contractions that push food through the digestive tract, from esophagus to rectum."
            },
            {
                question: "Which blood vessels carry blood AWAY from the heart?",
                options: ["Arteries", "Veins", "Capillaries", "Venules"],
                answer: "A",
                explanation: "Arteries carry blood away from the heart (usually oxygenated except pulmonary artery). Veins carry blood toward the heart (usually deoxygenated except pulmonary vein)."
            },
            {
                question: "What is the epiglottis and what is its function?",
                options: ["Flap that prevents food from entering trachea", "Structure that produces vocal sounds", "Part of the nasal cavity that warms air", "Valve between stomach and small intestine"],
                answer: "A",
                explanation: "The epiglottis is a flap of cartilage that covers the trachea (windpipe) during swallowing to prevent food or liquid from entering the respiratory tract."
            },
            {
                question: "What is the difference between arteries and veins in terms of structure?",
                options: ["Arteries have thicker, more muscular walls", "Veins have thicker, more muscular walls", "Both have equally thick walls", "Only arteries have valves"],
                answer: "A",
                explanation: "Arteries have thicker, more muscular and elastic walls to withstand higher blood pressure from heart pumping. Veins have thinner walls and contain valves to prevent backflow."
            },
            {
                question: "Where does protein digestion begin?",
                options: ["Stomach (with pepsin and HCl)", "Mouth (with salivary enzymes)", "Small intestine (with trypsin)", "Esophagus (with peristalsis)"],
                answer: "A",
                explanation: "Protein digestion begins in the stomach where pepsin (activated by HCl) breaks proteins into smaller polypeptides. Further digestion occurs in small intestine."
            },
            {
                question: "What is the function of hemoglobin in red blood cells?",
                options: ["Binds and transports oxygen", "Fights infections", "Clots blood when injured", "Transports carbon dioxide only"],
                answer: "A",
                explanation: "Hemoglobin is an iron-containing protein that binds to oxygen in the lungs (forming oxyhemoglobin) and releases it in body tissues."
            },
            {
                question: "What is the purpose of mucus in the respiratory system?",
                options: ["Traps dust, bacteria, and other particles", "Produces sound for speech", "Increases oxygen absorption", "Regulates air temperature"],
                answer: "A",
                explanation: "Mucus in the respiratory tract traps foreign particles, microorganisms, and irritants. Cilia then move the mucus upward to be expelled or swallowed."
            },
            {
                question: "Which part of the digestive system absorbs water and forms feces?",
                options: ["Large intestine (colon)", "Small intestine", "Stomach", "Esophagus"],
                answer: "A",
                explanation: "The large intestine (colon) absorbs water, vitamins, and electrolytes from undigested material, forming solid feces for elimination."
            },
            {
                question: "What is the path of blood through the heart (starting with vena cava)?",
                options: ["Vena cava ‚Üí Right atrium ‚Üí Right ventricle ‚Üí Lungs ‚Üí Left atrium ‚Üí Left ventricle ‚Üí Aorta", "Vena cava ‚Üí Left atrium ‚Üí Left ventricle ‚Üí Lungs ‚Üí Right atrium ‚Üí Right ventricle ‚Üí Aorta", "Aorta ‚Üí Left ventricle ‚Üí Left atrium ‚Üí Lungs ‚Üí Right ventricle ‚Üí Right atrium ‚Üí Vena cava", "Lungs ‚Üí Left atrium ‚Üí Left ventricle ‚Üí Aorta ‚Üí Body ‚Üí Vena cava ‚Üí Right atrium ‚Üí Right ventricle"],
                answer: "A",
                explanation: "Deoxygenated blood: Body ‚Üí Vena cava ‚Üí Right atrium ‚Üí Right ventricle ‚Üí Pulmonary artery ‚Üí Lungs (oxygenation) ‚Üí Pulmonary vein ‚Üí Left atrium ‚Üí Left ventricle ‚Üí Aorta ‚Üí Body"
            },
            {
                question: "What enzyme in saliva begins carbohydrate digestion?",
                options: ["Salivary amylase (ptyalin)", "Pepsin", "Lipase", "Trypsin"],
                answer: "A",
                explanation: "Salivary amylase (ptyalin) begins breaking down starch into maltose in the mouth. Its action continues briefly in the stomach before being inactivated by acid."
            },
            {
                question: "How does exercise affect the respiratory system?",
                options: ["Increases breathing rate and depth", "Decreases oxygen demand", "Slows down gas exchange", "Reduces lung capacity"],
                answer: "A",
                explanation: "Exercise increases metabolic rate, requiring more oxygen and producing more CO‚ÇÇ. This increases breathing rate (tachypnea) and depth (hyperpnea) to meet demand."
            },
            {
                question: "What is the function of platelets in blood?",
                options: ["Blood clotting (form platelet plugs)", "Oxygen transport", "Immune defense", "Nutrient transport"],
                answer: "A",
                explanation: "Platelets (thrombocytes) are cell fragments that initiate blood clotting by forming platelet plugs and releasing clotting factors when vessels are damaged."
            },
            {
                question: "What is the role of the pancreas in digestion?",
                options: ["Produces digestive enzymes and bicarbonate", "Stores bile", "Absorbs nutrients", "Produces hydrochloric acid"],
                answer: "A",
                explanation: "The pancreas produces pancreatic juice containing digestive enzymes (amylase, lipase, proteases) and bicarbonate to neutralize stomach acid in duodenum."
            },
            {
                question: "What is tidal volume in respiration?",
                options: ["Amount of air inhaled/exhaled in normal breath", "Maximum air that can be inhaled after normal inhalation", "Air remaining in lungs after maximum exhalation", "Total lung capacity"],
                answer: "A",
                explanation: "Tidal volume is the volume of air moved in and out of lungs during normal, quiet breathing (about 500 mL in adults)."
            },
            {
                question: "Which blood type is the universal donor?",
                options: ["O negative", "AB positive", "A positive", "B negative"],
                answer: "A",
                explanation: "O negative blood lacks A, B, and Rh antigens, so it can be donated to anyone without triggering an immune reaction (universal donor)."
            },
            {
                question: "What is the function of the large surface area in the small intestine?",
                options: ["Increases nutrient absorption efficiency", "Speeds up peristalsis", "Produces more digestive enzymes", "Stores more digestive juices"],
                answer: "A",
                explanation: "The small intestine has folds, villi, and microvilli that increase surface area 600x, allowing for efficient absorption of nutrients into bloodstream."
            },
            {
                question: "How are the respiratory and circulatory systems interdependent?",
                options: ["Respiratory system provides oxygen that circulatory system transports; circulatory system brings CO‚ÇÇ to respiratory system for removal", "Respiratory system pumps blood; circulatory system breathes air", "Both systems digest food", "No interdependence - they work separately"],
                answer: "A",
                explanation: "The respiratory system oxygenates blood and removes CO‚ÇÇ, while the circulatory system transports these gases to/from tissues. They work together for gas exchange and cellular respiration."
            }
        ];

        // Biology tips
        const biologyTips = [
            "Remember: The digestive system breaks down food, respiratory system exchanges gases, and circulatory system transports substances!",
            "Digestion: Mouth (mechanical + carb chemical) ‚Üí Stomach (protein chemical) ‚Üí Small intestine (most absorption) ‚Üí Large intestine (water absorption)",
            "Respiration: Air ‚Üí Nose/mouth ‚Üí Trachea ‚Üí Bronchi ‚Üí Bronchioles ‚Üí Alveoli (gas exchange)",
            "Circulation: Heart ‚Üí Arteries ‚Üí Arterioles ‚Üí Capillaries (exchange) ‚Üí Venules ‚Üí Veins ‚Üí Heart",
            "The diaphragm is the main muscle for breathing: contracts (down) for inhalation, relaxes (up) for exhalation",
            "Blood components: Red cells (O‚ÇÇ transport), White cells (immunity), Platelets (clotting), Plasma (liquid matrix)",
            "Enzymes are biological catalysts that speed up digestion without being used up themselves",
            "The small intestine is about 6 meters long with villi and microvilli for maximum absorption!"
        ];

        // System organs data
        const systemData = {
            digestive: {
                title: "Digestive System",
                color: "#F44336",
                organs: [
                    { name: "Mouth", x: 10, y: 50, width: 60, height: 30, color: "#FF8A80", info: "Mechanical (chewing) and chemical (salivary amylase) digestion begins here." },
                    { name: "Esophagus", x: 30, y: 85, width: 15, height: 60, color: "#FF5252", info: "Muscular tube that moves food to stomach via peristalsis." },
                    { name: "Stomach", x: 20, y: 150, width: 80, height: 50, color: "#FF1744", info: "Mixes food with gastric juices (HCl and pepsin) for protein digestion." },
                    { name: "Small Intestine", x: 15, y: 210, width: 90, height: 70, color: "#D50000", info: "Most digestion and nutrient absorption occurs here through villi and microvilli." },
                    { name: "Large Intestine", x: 10, y: 290, width: 40, height: 40, color: "#B71C1C", info: "Absorbs water and electrolytes, forms and stores feces." },
                    { name: "Liver", x: 70, y: 120, width: 40, height: 40, color: "#EF5350", info: "Produces bile, processes nutrients, detoxifies blood." },
                    { name: "Pancreas", x: 60, y: 180, width: 30, height: 25, color: "#E53935", info: "Produces digestive enzymes and bicarbonate to neutralize stomach acid." }
                ]
            },
            respiratory: {
                title: "Respiratory System",
                color: "#2196F3",
                organs: [
                    { name: "Nasal Cavity", x: 40, y: 10, width: 40, height: 30, color: "#82B1FF", info: "Filters, warms, and humidifies incoming air. Contains olfactory receptors." },
                    { name: "Pharynx", x: 45, y: 45, width: 30, height: 20, color: "#448AFF", info: "Common passage for air and food. Contains tonsils for immune defense." },
                    { name: "Larynx", x: 47, y: 70, width: 26, height: 20, color: "#2979FF", info: "Voice box containing vocal cords. Prevents food entry into trachea." },
                    { name: "Trachea", x: 46, y: 95, width: 28, height: 80, color: "#2962FF", info: "Windpipe with C-shaped cartilage rings to keep airway open." },
                    { name: "Bronchi", x: 40, y: 180, width: 40, height: 20, color: "#304FFE", info: "Two main branches from trachea leading to each lung." },
                    { name: "Lungs", x: 10, y: 205, width: 80, height: 100, color: "#1565C0", info: "Paired organs containing bronchioles and alveoli for gas exchange." },
                    { name: "Diaphragm", x: 20, y: 310, width: 60, height: 20, color: "#0D47A1", info: "Main muscle for breathing. Contracts for inhalation, relaxes for exhalation." }
                ]
            },
            circulatory: {
                title: "Circulatory System",
                color: "#4CAF50",
                organs: [
                    { name: "Heart", x: 40, y: 50, width: 50, height: 60, color: "#81C784", info: "Four-chambered muscular pump: Right atrium/ventricle (deoxygenated), Left atrium/ventricle (oxygenated)" },
                    { name: "Arteries", x: 10, y: 120, width: 80, height: 40, color: "#66BB6A", info: "Carry oxygenated blood away from heart (except pulmonary artery). Thick, muscular walls." },
                    { name: "Veins", x: 10, y: 170, width: 80, height: 40, color: "#4CAF50", info: "Carry deoxygenated blood toward heart (except pulmonary vein). Thin walls with valves." },
                    { name: "Capillaries", x: 10, y: 220, width: 80, height: 40, color: "#43A047", info: "Microscopic vessels connecting arteries to veins. Site of gas/nutrient/waste exchange." },
                    { name: "Pulmonary Circuit", x: 60, y: 270, width: 30, height: 30, color: "#388E3C", info: "Heart ‚Üí Lungs ‚Üí Heart. Right ventricle to lungs via pulmonary arteries, back to left atrium via pulmonary veins." },
                    { name: "Systemic Circuit", x: 10, y: 270, width: 30, height: 30, color: "#2E7D32", info: "Heart ‚Üí Body ‚Üí Heart. Left ventricle to body via aorta, back to right atrium via vena cava." }
                ]
            }
        };

        // Process details
        const processDetails = {
            ingestion: {
                title: "Ingestion",
                system: "digestive",
                info: "The process of taking food into the mouth. Includes mechanical digestion (chewing/mastication) and mixing with saliva containing salivary amylase that begins carbohydrate digestion."
            },
            digestion: {
                title: "Digestion",
                system: "digestive",
                info: "Breakdown of large food molecules into smaller absorbable units. Includes: Mechanical (chewing, churning) and Chemical (enzymatic hydrolysis). Major enzymes: Amylase (carbs), Proteases (proteins), Lipases (fats)."
            },
            absorption: {
                title: "Absorption",
                system: "digestive",
                info: "Movement of digested nutrients from gastrointestinal tract into bloodstream or lymphatic system. Occurs mainly in small intestine through villi and microvilli. Water and electrolytes absorbed in large intestine."
            },
            elimination: {
                title: "Elimination",
                system: "digestive",
                info: "Removal of indigestible waste (feces) from body through rectum and anus. Includes undigested food, bacteria, cells sloughed from GI tract lining."
            },
            ventilation: {
                title: "Ventilation",
                system: "respiratory",
                info: "Mechanical process of breathing: Inhalation (active) - diaphragm contracts, ribs elevate, volume increases, pressure decreases, air rushes in. Exhalation (usually passive) - diaphragm relaxes, volume decreases, pressure increases, air moves out."
            },
            external_resp: {
                title: "External Respiration",
                system: "respiratory",
                info: "Gas exchange between alveoli and pulmonary capillaries. Oxygen diffuses from alveoli into blood (binds to hemoglobin). Carbon dioxide diffuses from blood into alveoli (from bicarbonate)."
            },
            internal_resp: {
                title: "Internal Respiration",
                system: "respiratory",
                info: "Gas exchange between systemic capillaries and body tissues. Oxygen diffuses from blood into tissues. Carbon dioxide diffuses from tissues into blood."
            },
            cellular_resp: {
                title: "Cellular Respiration",
                system: "respiratory",
                info: "Metabolic process in mitochondria: Glucose + O‚ÇÇ ‚Üí CO‚ÇÇ + H‚ÇÇO + ATP (energy). Requires oxygen delivered by respiratory/circulatory systems and produces CO‚ÇÇ for removal."
            },
            pulmonary: {
                title: "Pulmonary Circuit",
                system: "circulatory",
                info: "Blood flow from heart to lungs and back. Deoxygenated blood: Right ventricle ‚Üí Pulmonary arteries ‚Üí Lung capillaries (oxygenation) ‚Üí Pulmonary veins ‚Üí Left atrium. Short, low-pressure circuit."
            },
            systemic: {
                title: "Systemic Circuit",
                system: "circulatory",
                info: "Blood flow from heart to body tissues and back. Oxygenated blood: Left ventricle ‚Üí Aorta ‚Üí Arteries ‚Üí Arterioles ‚Üí Capillaries (tissue exchange) ‚Üí Venules ‚Üí Veins ‚Üí Vena cava ‚Üí Right atrium. Long, high-pressure circuit."
            },
            oxygen_trans: {
                title: "Oxygen Transport",
                system: "circulatory",
                info: "Oxygen carried in blood: 98.5% bound to hemoglobin in red blood cells (oxyhemoglobin), 1.5% dissolved in plasma. Each hemoglobin molecule can carry 4 O‚ÇÇ molecules. Binding affected by pH, temperature, CO‚ÇÇ."
            },
            co2_trans: {
                title: "Carbon Dioxide Transport",
                system: "circulatory",
                info: "CO‚ÇÇ carried in blood: 70% as bicarbonate ions (HCO‚ÇÉ‚Åª) in plasma, 23% bound to hemoglobin (carbaminohemoglobin), 7% dissolved in plasma. CO‚ÇÇ + H‚ÇÇO ‚Üî H‚ÇÇCO‚ÇÉ ‚Üî H‚Å∫ + HCO‚ÇÉ‚Åª (catalyzed by carbonic anhydrase)."
            }
        };

        // Quiz questions
        const quizQuestions = [
            {
                question: "Which system is responsible for breaking down food into nutrients?",
                options: ["Digestive System", "Respiratory System", "Circulatory System", "Nervous System"],
                answer: "A",
                explanation: "The digestive system breaks down food mechanically and chemically into nutrients that can be absorbed into the bloodstream."
            },
            {
                question: "Which system exchanges gases between the body and environment?",
                options: ["Respiratory System", "Digestive System", "Circulatory System", "Muscular System"],
                answer: "A",
                explanation: "The respiratory system brings in oxygen and removes carbon dioxide through the process of breathing and gas exchange in the lungs."
            },
            {
                question: "Which system transports oxygen, nutrients, and waste throughout the body?",
                options: ["Circulatory System", "Digestive System", "Respiratory System", "Skeletal System"],
                answer: "A",
                explanation: "The circulatory system (cardiovascular system) uses blood to transport oxygen, nutrients, hormones, and waste products throughout the body."
            },
            {
                question: "Where does nutrient absorption primarily occur?",
                options: ["Small Intestine", "Stomach", "Large Intestine", "Esophagus"],
                answer: "A",
                explanation: "The small intestine, with its villi and microvilli, is the primary site for nutrient absorption into the bloodstream."
            },
            {
                question: "What is the main muscle for breathing?",
                options: ["Diaphragm", "Heart", "Stomach", "Lungs"],
                answer: "A",
                explanation: "The diaphragm is a dome-shaped muscle that contracts during inhalation (flattens) and relaxes during exhalation (domes up)."
            },
            {
                question: "Which blood vessels carry blood away from the heart?",
                options: ["Arteries", "Veins", "Capillaries", "Venules"],
                answer: "A",
                explanation: "Arteries carry oxygenated blood away from the heart (except pulmonary artery). They have thick, muscular walls to withstand pressure."
            },
            {
                question: "What begins protein digestion in the stomach?",
                options: ["Pepsin and HCl", "Salivary amylase", "Bile", "Pancreatic lipase"],
                answer: "A",
                explanation: "In the stomach, pepsin (activated by HCl) begins breaking down proteins into smaller polypeptides."
            },
            {
                question: "Where does gas exchange occur in the lungs?",
                options: ["Alveoli", "Bronchi", "Trachea", "Bronchioles"],
                answer: "A",
                explanation: "Alveoli are tiny air sacs surrounded by capillaries where oxygen and carbon dioxide are exchanged between air and blood."
            },
            {
                question: "Which chamber pumps blood to the entire body?",
                options: ["Left Ventricle", "Right Ventricle", "Left Atrium", "Right Atrium"],
                answer: "A",
                explanation: "The left ventricle has the thickest muscle wall and pumps oxygenated blood through the aorta to the entire body."
            },
            {
                question: "What emulsifies fats in the small intestine?",
                options: ["Bile", "Pancreatic amylase", "Pepsin", "Hydrochloric acid"],
                answer: "A",
                explanation: "Bile, produced by the liver and stored in the gallbladder, emulsifies fats (breaks them into smaller droplets) for better enzyme action."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentMetrics: {
                heartRate: 72,
                breathingRate: 12,
                oxygenLevel: 98,
                digestionTime: 4
            },
            currentQuiz: null,
            activeAnimations: []
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const biologyTip = document.getElementById('biologyTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const digestiveModel = document.getElementById('digestiveModel');
        const respiratoryModel = document.getElementById('respiratoryModel');
        const circulatoryModel = document.getElementById('circulatoryModel');
        const interactionModel = document.getElementById('interactionModel');
        const quizQuestionElement = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');
        const quizFeedback = document.getElementById('quizFeedback');
        const heartRateDisplay = document.getElementById('heartRateDisplay');
        const breathRateDisplay = document.getElementById('breathRateDisplay');
        const oxygenLevel = document.getElementById('oxygenLevel');
        const digestionTime = document.getElementById('digestionTime');
        const digestionSpeedValue = document.getElementById('digestionSpeedValue');
        const breathingRateValue = document.getElementById('breathingRateValue');
        const heartRateValue = document.getElementById('heartRateValue');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            createAnatomyModels();
            setupQuiz();
            setupInteractionModel();
            updateHealthMetrics();
        }

        // Create anatomy models
        function createAnatomyModels() {
            createDigestiveModel();
            createRespiratoryModel();
            createCirculatoryModel();
        }

        function createDigestiveModel() {
            digestiveModel.innerHTML = '';
            const organs = systemData.digestive.organs;
            
            organs.forEach(organ => {
                const organDiv = document.createElement('div');
                organDiv.className = 'organ';
                organDiv.style.left = `${organ.x}%`;
                organDiv.style.top = `${organ.y}px`;
                organDiv.style.width = `${organ.width}%`;
                organDiv.style.height = `${organ.height}px`;
                organDiv.style.backgroundColor = organ.color;
                organDiv.style.color = 'white';
                organDiv.textContent = organ.name;
                organDiv.title = organ.info;
                
                // Add label
                const label = document.createElement('div');
                label.className = 'organ-label';
                label.textContent = organ.name;
                label.style.left = `${organ.x + organ.width/2}%`;
                label.style.top = `${organ.y + organ.height + 5}px`;
                label.style.transform = 'translateX(-50%)';
                
                organDiv.addEventListener('click', () => showOrganDetail(organ, 'digestive'));
                
                digestiveModel.appendChild(organDiv);
                digestiveModel.appendChild(label);
            });
            
            // Add food particles animation
            createFoodParticles();
        }

        function createRespiratoryModel() {
            respiratoryModel.innerHTML = '';
            const organs = systemData.respiratory.organs;
            
            organs.forEach(organ => {
                const organDiv = document.createElement('div');
                organDiv.className = 'organ';
                organDiv.style.left = `${organ.x}%`;
                organDiv.style.top = `${organ.y}px`;
                organDiv.style.width = `${organ.width}%`;
                organDiv.style.height = `${organ.height}px`;
                organDiv.style.backgroundColor = organ.color;
                organDiv.style.color = 'white';
                organDiv.textContent = organ.name;
                organDiv.title = organ.info;
                
                // Add label
                const label = document.createElement('div');
                label.className = 'organ-label';
                label.textContent = organ.name;
                label.style.left = `${organ.x + organ.width/2}%`;
                label.style.top = `${organ.y + organ.height + 5}px`;
                label.style.transform = 'translateX(-50%)';
                
                organDiv.addEventListener('click', () => showOrganDetail(organ, 'respiratory'));
                
                respiratoryModel.appendChild(organDiv);
                respiratoryModel.appendChild(label);
            });
            
            // Add air flow animation
            createAirFlow();
        }

        function createCirculatoryModel() {
            circulatoryModel.innerHTML = '';
            const organs = systemData.circulatory.organs;
            
            organs.forEach(organ => {
                const organDiv = document.createElement('div');
                organDiv.className = 'organ';
                organDiv.style.left = `${organ.x}%`;
                organDiv.style.top = `${organ.y}px`;
                organDiv.style.width = `${organ.width}%`;
                organDiv.style.height = `${organ.height}px`;
                organDiv.style.backgroundColor = organ.color;
                organDiv.style.color = 'white';
                organDiv.textContent = organ.name;
                organDiv.title = organ.info;
                
                // Add label
                const label = document.createElement('div');
                label.className = 'organ-label';
                label.textContent = organ.name;
                label.style.left = `${organ.x + organ.width/2}%`;
                label.style.top = `${organ.y + organ.height + 5}px`;
                label.style.transform = 'translateX(-50%)';
                
                organDiv.addEventListener('click', () => showOrganDetail(organ, 'circulatory'));
                
                circulatoryModel.appendChild(organDiv);
                circulatoryModel.appendChild(label);
            });
            
            // Add heart beat animation
            const heart = document.querySelector('#circulatoryModel .organ:nth-child(1)');
            if (heart) {
                heart.classList.add('heartbeat');
            }
            
            // Add blood flow animation
            createBloodFlow();
        }

        function createFoodParticles() {
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.className = 'food-particle';
                particle.style.left = `${10 + i * 5}%`;
                particle.style.animationDelay = `${i * 0.5}s`;
                digestiveModel.appendChild(particle);
                appState.activeAnimations.push(particle);
            }
        }

        function createAirFlow() {
            for (let i = 0; i < 3; i++) {
                const flow = document.createElement('div');
                flow.className = 'air-flow';
                flow.style.left = `${40 + i * 10}%`;
                flow.style.top = `${20 + i * 20}px`;
                flow.style.animationDelay = `${i * 0.5}s`;
                respiratoryModel.appendChild(flow);
                appState.activeAnimations.push(flow);
            }
        }

        function createBloodFlow() {
            for (let i = 0; i < 8; i++) {
                const flow = document.createElement('div');
                flow.className = 'blood-flow';
                flow.style.left = `${20 + i * 8}%`;
                flow.style.animationDelay = `${i * 0.2}s`;
                circulatoryModel.appendChild(flow);
                appState.activeAnimations.push(flow);
            }
        }

        // Show organ detail
        function showOrganDetail(organ, system) {
            let info = `${organ.name}\n\n`;
            info += `${organ.info}\n\n`;
            
            if (system === 'digestive') {
                info += "Digestive System Functions:\n";
                info += "‚Ä¢ Ingestion: Taking in food\n";
                info += "‚Ä¢ Digestion: Breaking down food\n";
                info += "‚Ä¢ Absorption: Nutrients into blood\n";
                info += "‚Ä¢ Elimination: Removing waste";
            } else if (system === 'respiratory') {
                info += "Respiratory System Functions:\n";
                info += "‚Ä¢ Ventilation: Breathing\n";
                info += "‚Ä¢ Gas Exchange: O‚ÇÇ in, CO‚ÇÇ out\n";
                info += "‚Ä¢ Regulation of Blood pH\n";
                info += "‚Ä¢ Voice Production";
            } else {
                info += "Circulatory System Functions:\n";
                info += "‚Ä¢ Transport: O‚ÇÇ, nutrients, wastes\n";
                info += "‚Ä¢ Regulation: Temperature, pH\n";
                info += "‚Ä¢ Protection: Immunity, clotting\n";
                info += "‚Ä¢ Communication: Hormones";
            }
            
            alert(info);
        }

        // Setup quiz
        function setupQuiz() {
            newQuizQuestion();
        }

        function newQuizQuestion() {
            const quiz = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
            appState.currentQuiz = quiz;
            
            quizQuestionElement.textContent = quiz.question;
            quizOptions.innerHTML = '';
            quizFeedback.textContent = '';
            
            quiz.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = option;
                optionDiv.dataset.answer = String.fromCharCode(65 + index);
                
                optionDiv.addEventListener('click', () => {
                    const allOptions = quizOptions.querySelectorAll('.quiz-option');
                    allOptions.forEach(opt => opt.classList.remove('correct', 'incorrect'));
                    
                    if (optionDiv.dataset.answer === quiz.answer) {
                        optionDiv.classList.add('correct');
                        quizFeedback.textContent = "Correct! " + quiz.explanation;
                        quizFeedback.style.color = "var(--primary-green)";
                    } else {
                        optionDiv.classList.add('incorrect');
                        // Highlight correct answer
                        const correctOption = quizOptions.querySelector(`[data-answer="${quiz.answer}"]`);
                        if (correctOption) correctOption.classList.add('correct');
                        quizFeedback.textContent = "Incorrect. " + quiz.explanation;
                        quizFeedback.style.color = "var(--primary-red)";
                    }
                });
                
                quizOptions.appendChild(optionDiv);
            });
        }

        function showQuizExplanation() {
            if (appState.currentQuiz) {
                alert(`Question: ${appState.currentQuiz.question}\n\nCorrect Answer: ${appState.currentQuiz.options[appState.currentQuiz.answer.charCodeAt(0) - 65]}\n\nExplanation: ${appState.currentQuiz.explanation}`);
            }
        }

        // Setup interaction model
        function setupInteractionModel() {
            interactionModel.innerHTML = `
                <div style="position: absolute; left: 20%; top: 30%; color: var(--primary-red); font-weight: bold;">Digestive</div>
                <div style="position: absolute; left: 50%; top: 30%; color: var(--primary-blue); font-weight: bold;">Respiratory</div>
                <div style="position: absolute; left: 80%; top: 30%; color: var(--primary-green); font-weight: bold;">Circulatory</div>
                <div style="position: absolute; left: 35%; top: 60%; width: 30%; height: 2px; background: var(--accent-orange); transform: rotate(30deg);"></div>
                <div style="position: absolute; left: 65%; top: 60%; width: 30%; height: 2px; background: var(--accent-orange); transform: rotate(-30deg);"></div>
                <div id="interactionPath" style="position: absolute; left: 20%; top: 60%; width: 60%; height: 2px; background: transparent;"></div>
            `;
        }

        // Control functions
        window.showDigestiveProcess = function() {
            let info = "Digestive Process:\n\n";
            info += "1. Ingestion: Food enters mouth\n";
            info += "2. Mechanical Digestion: Chewing\n";
            info += "3. Chemical Digestion: Enzymes break down food\n";
            info += "4. Absorption: Nutrients into bloodstream\n";
            info += "5. Elimination: Waste removal\n\n";
            info += "Key Enzymes:\n";
            info += "‚Ä¢ Mouth: Salivary amylase (carbs)\n";
            info += "‚Ä¢ Stomach: Pepsin (proteins)\n";
            info += "‚Ä¢ Small Intestine: Pancreatic enzymes, bile\n";
            
            alert(info);
        };

        window.highlightOrgan = function(organName) {
            // Remove all highlights
            document.querySelectorAll('.organ').forEach(organ => {
                organ.style.boxShadow = 'none';
                organ.style.zIndex = '1';
            });
            
            // Find and highlight the organ
            let organElement = null;
            const systems = ['digestiveModel', 'respiratoryModel', 'circulatoryModel'];
            
            systems.forEach(system => {
                const model = document.getElementById(system);
                if (model) {
                    const organs = model.querySelectorAll('.organ');
                    organs.forEach(organ => {
                        if (organ.textContent.toLowerCase().includes(organName.toLowerCase())) {
                            organElement = organ;
                        }
                    });
                }
            });
            
            if (organElement) {
                organElement.style.boxShadow = '0 0 20px gold';
                organElement.style.zIndex = '100';
                
                // Scroll to the organ
                organElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Remove highlight after 3 seconds
                setTimeout(() => {
                    if (organElement) {
                        organElement.style.boxShadow = 'none';
                        organElement.style.zIndex = '1';
                    }
                }, 3000);
            }
        };

        window.showEnzymeAction = function() {
            let info = "Enzyme Action in Digestion:\n\n";
            info += "Enzymes = Biological catalysts that speed up digestion\n\n";
            info += "1. Carbohydrate Digestion:\n";
            info += "   ‚Ä¢ Salivary amylase (mouth): Starch ‚Üí Maltose\n";
            info += "   ‚Ä¢ Pancreatic amylase (SI): Starch ‚Üí Maltose\n";
            info += "   ‚Ä¢ Maltase (SI): Maltose ‚Üí Glucose\n\n";
            info += "2. Protein Digestion:\n";
            info += "   ‚Ä¢ Pepsin (stomach): Proteins ‚Üí Peptides\n";
            info += "   ‚Ä¢ Trypsin (SI): Proteins ‚Üí Peptides\n";
            info += "   ‚Ä¢ Peptidases (SI): Peptides ‚Üí Amino acids\n\n";
            info += "3. Fat Digestion:\n";
            info += "   ‚Ä¢ Lipase (SI): Fats ‚Üí Fatty acids + Glycerol\n";
            info += "   ‚Ä¢ Bile (emulsifies fats, no enzyme action)";
            
            alert(info);
        };

        window.updateDigestionSpeed = function(value) {
            const speed = Math.round(value / 10);
            digestionSpeedValue.textContent = speed === 5 ? 'Normal' : speed < 5 ? 'Slow' : 'Fast';
            
            // Update animation speeds
            const particles = digestiveModel.querySelectorAll('.food-particle');
            particles.forEach(particle => {
                particle.style.animationDuration = `${6 - speed}s`;
            });
            
            // Update digestion time metric
            appState.currentMetrics.digestionTime = 6 - speed;
            digestionTime.textContent = `${appState.currentMetrics.digestionTime}h`;
        };

        window.simulateBreathing = function() {
            let info = "Breathing Simulation:\n\n";
            info += "Inhalation (Active Process):\n";
            info += "1. Diaphragm contracts ‚Üí moves downward\n";
            info += "2. Intercostal muscles contract ‚Üí ribs lift\n";
            info += "3. Thoracic volume increases\n";
            info += "4. Pressure decreases (below atmospheric)\n";
            info += "5. Air rushes into lungs\n\n";
            info += "Exhalation (Usually Passive):\n";
            info += "1. Diaphragm relaxes ‚Üí moves upward\n";
            info += "2. Intercostal muscles relax ‚Üí ribs lower\n";
            info += "3. Thoracic volume decreases\n";
            info += "4. Pressure increases (above atmospheric)\n";
            info += "5. Air moves out of lungs\n\n";
            info += "Tidal Volume: 500 mL normal breath\n";
            info += "Breathing Rate: 12-20 breaths/min at rest";
            
            alert(info);
            
            // Visual feedback
            const lungs = respiratoryModel.querySelector('.organ:nth-child(6)');
            if (lungs) {
                lungs.style.animation = 'breathe 3s ease-in-out';
                setTimeout(() => {
                    lungs.style.animation = '';
                }, 3000);
            }
        };

        window.showGasExchange = function() {
            let info = "Gas Exchange in Alveoli:\n\n";
            info += "External Respiration (Lungs):\n";
            info += "‚Ä¢ O‚ÇÇ diffuses from alveoli ‚Üí blood\n";
            info += "‚Ä¢ CO‚ÇÇ diffuses from blood ‚Üí alveoli\n";
            info += "‚Ä¢ Driven by concentration gradients\n\n";
            info += "Internal Respiration (Tissues):\n";
            info += "‚Ä¢ O‚ÇÇ diffuses from blood ‚Üí tissues\n";
            info += "‚Ä¢ CO‚ÇÇ diffuses from tissues ‚Üí blood\n\n";
            info += "Key Factors:\n";
            info += "‚Ä¢ Partial pressure gradients\n";
            info += "‚Ä¢ Surface area (70 m¬≤ in lungs)\n";
            info += "‚Ä¢ Diffusion distance (<0.5 Œºm)\n";
            info += "‚Ä¢ Blood flow and ventilation matching";
            
            alert(info);
        };

        window.updateBreathingRate = function(value) {
            breathingRateValue.textContent = `${value}/min`;
            appState.currentMetrics.breathingRate = parseInt(value);
            breathRateDisplay.textContent = value;
            
            // Update animation speeds
            const flows = respiratoryModel.querySelectorAll('.air-flow');
            flows.forEach(flow => {
                flow.style.animationDuration = `${60 / value}s`;
            });
        };

        window.simulateBloodFlow = function() {
            let info = "Blood Flow Through Heart:\n\n";
            info += "1. Deoxygenated blood enters Right Atrium\n   (from superior/inferior vena cava)\n";
            info += "2. Right Atrium ‚Üí Right Ventricle\n   (through tricuspid valve)\n";
            info += "3. Right Ventricle ‚Üí Lungs\n   (through pulmonary artery)\n";
            info += "4. Oxygenation in lung capillaries\n";
            info += "5. Oxygenated blood enters Left Atrium\n   (from pulmonary veins)\n";
            info += "6. Left Atrium ‚Üí Left Ventricle\n   (through bicuspid/mitral valve)\n";
            info += "7. Left Ventricle ‚Üí Body\n   (through aorta)\n\n";
            info += "Cardiac Cycle:\n";
            info += "‚Ä¢ Systole: Ventricular contraction\n";
            info += "‚Ä¢ Diastole: Ventricular relaxation\n";
            info += "‚Ä¢ Heart Sounds: Lub (AV valves close), Dub (semilunar valves close)";
            
            alert(info);
        };

        window.showBloodComponents = function() {
            let info = "Blood Components:\n\n";
            info += "1. Plasma (55%):\n";
            info += "   ‚Ä¢ Water (92%), proteins, nutrients, wastes\n";
            info += "   ‚Ä¢ Functions: Transport medium, pH buffer\n\n";
            info += "2. Red Blood Cells (Erythrocytes, 45%):\n";
            info += "   ‚Ä¢ Contain hemoglobin for O‚ÇÇ transport\n";
            info += "   ‚Ä¢ No nucleus, biconcave shape\n";
            info += "   ‚Ä¢ Life span: ~120 days\n\n";
            info += "3. White Blood Cells (Leukocytes, <1%):\n";
            info += "   ‚Ä¢ Immune defense\n";
            info += "   ‚Ä¢ Types: Neutrophils, lymphocytes, monocytes, eosinophils, basophils\n\n";
            info += "4. Platelets (Thrombocytes, <1%):\n";
            info += "   ‚Ä¢ Blood clotting\n";
            info += "   ‚Ä¢ Form platelet plugs, release clotting factors";
            
            alert(info);
        };

        window.updateHeartRate = function(value) {
            heartRateValue.textContent = `${value} bpm`;
            appState.currentMetrics.heartRate = parseInt(value);
            heartRateDisplay.textContent = value;
            
            // Update heart beat animation
            const heart = circulatoryModel.querySelector('.organ:nth-child(1)');
            if (heart) {
                heart.style.animationDuration = `${60 / value}s`;
            }
            
            // Update blood flow animation
            const flows = circulatoryModel.querySelectorAll('.blood-flow');
            flows.forEach(flow => {
                flow.style.animationDuration = `${3 * (72 / value)}s`;
            });
        };

        window.showProcessDetail = function(process) {
            const detail = processDetails[process];
            if (!detail) return;
            
            let info = `${detail.title}\n\n`;
            info += `${detail.info}\n\n`;
            info += `System: ${detail.system.charAt(0).toUpperCase() + detail.system.slice(1)} System`;
            
            alert(info);
        };

        window.showOxygenPath = function() {
            const path = document.getElementById('interactionPath');
            path.style.background = 'linear-gradient(to right, var(--primary-blue), var(--primary-green))';
            path.style.height = '4px';
            path.style.boxShadow = '0 0 10px var(--primary-blue)';
            
            let info = "Oxygen Pathway Through Body Systems:\n\n";
            info += "1. Respiratory System:\n";
            info += "   ‚Ä¢ Air inhaled ‚Üí Trachea ‚Üí Bronchi ‚Üí Alveoli\n";
            info += "   ‚Ä¢ O‚ÇÇ diffuses into pulmonary capillaries\n\n";
            info += "2. Circulatory System:\n";
            info += "   ‚Ä¢ O‚ÇÇ binds to hemoglobin in RBCs\n";
            info += "   ‚Ä¢ Heart pumps oxygenated blood to body\n";
            info += "   ‚Ä¢ Arteries ‚Üí Arterioles ‚Üí Capillaries\n\n";
            info += "3. Body Tissues:\n";
            info += "   ‚Ä¢ O‚ÇÇ diffuses from blood into cells\n";
            info += "   ‚Ä¢ Used in cellular respiration to make ATP\n\n";
            info += "4. Return Trip (CO‚ÇÇ):\n";
            info += "   ‚Ä¢ CO‚ÇÇ diffuses from cells into blood\n";
            info += "   ‚Ä¢ Transported as bicarbonate (70%)\n";
            info += "   ‚Ä¢ Heart ‚Üí Lungs ‚Üí Exhaled";
            
            setTimeout(() => {
                alert(info);
                path.style.background = 'transparent';
                path.style.boxShadow = 'none';
            }, 500);
        };

        window.showNutrientPath = function() {
            const path = document.getElementById('interactionPath');
            path.style.background = 'linear-gradient(to right, var(--primary-red), var(--primary-green))';
            path.style.height = '4px';
            path.style.boxShadow = '0 0 10px var(--primary-red)';
            
            let info = "Nutrient Pathway Through Body Systems:\n\n";
            info += "1. Digestive System:\n";
            info += "   ‚Ä¢ Food ingested ‚Üí Digested (mechanical + chemical)\n";
            info += "   ‚Ä¢ Nutrients absorbed in small intestine\n";
            info += "   ‚Ä¢ Water/electrolytes absorbed in large intestine\n\n";
            info += "2. Circulatory System:\n";
            info += "   ‚Ä¢ Nutrients enter hepatic portal vein\n";
            info += "   ‚Ä¢ Liver processes nutrients (glycogen storage, detox)\n";
            info += "   ‚Ä¢ Heart pumps nutrient-rich blood to body\n\n";
            info += "3. Body Tissues:\n";
            info += "   ‚Ä¢ Nutrients diffuse from blood into cells\n";
            info += "   ‚Ä¢ Used for energy, growth, repair\n\n";
            info += "4. Waste Products:\n";
            info += "   ‚Ä¢ Metabolic wastes (urea, CO‚ÇÇ) removed\n";
            info += "   ‚Ä¢ Circulatory ‚Üí Respiratory/Excretory systems";
            
            setTimeout(() => {
                alert(info);
                path.style.background = 'transparent';
                path.style.boxShadow = 'none';
            }, 500);
        };

        window.showWastePath = function() {
            const path = document.getElementById('interactionPath');
            path.style.background = 'linear-gradient(to right, var(--primary-green), var(--primary-purple))';
            path.style.height = '4px';
            path.style.boxShadow = '0 0 10px var(--primary-purple)';
            
            let info = "Waste Removal Pathway:\n\n";
            info += "1. Carbon Dioxide (Respiratory Waste):\n";
            info += "   ‚Ä¢ Produced in cellular respiration\n";
            info += "   ‚Ä¢ Transported as bicarbonate in blood\n";
            info += "   ‚Ä¢ Diffuses into alveoli ‚Üí Exhaled\n\n";
            info += "2. Nitrogenous Wastes (Digestive/Excretory):\n";
            info += "   ‚Ä¢ Urea from protein metabolism\n";
            info += "   ‚Ä¢ Liver converts ammonia ‚Üí urea\n";
            info += "   ‚Ä¢ Kidneys filter blood ‚Üí urine\n\n";
            info += "3. Other Wastes:\n";
            info += "   ‚Ä¢ Bile pigments (from RBC breakdown)\n";
            info += "   ‚Ä¢ Excess salts, water\n";
            info += "   ‚Ä¢ Undigested food (feces)\n\n";
            info += "Systems Working Together:\n";
            info += "‚Ä¢ Circulatory: Transports wastes\n";
            info += "‚Ä¢ Respiratory: Removes CO‚ÇÇ\n";
            info += "‚Ä¢ Excretory: Removes nitrogenous wastes\n";
            info += "‚Ä¢ Digestive: Eliminates solid wastes";
            
            setTimeout(() => {
                alert(info);
                path.style.background = 'transparent';
                path.style.boxShadow = 'none';
            }, 500);
        };

        window.simulateExercise = function() {
            appState.currentMetrics.heartRate = 120;
            appState.currentMetrics.breathingRate = 24;
            appState.currentMetrics.oxygenLevel = 95;
            appState.currentMetrics.digestionTime = 6;
            
            updateHealthMetrics();
            updateHeartRate(120);
            updateBreathingRate(24);
            
            let info = "Exercise Simulation Activated!\n\n";
            info += "During exercise:\n";
            info += "‚Ä¢ Heart rate increases (120 bpm)\n";
            info += "‚Ä¢ Breathing rate increases (24/min)\n";
            info += "‚Ä¢ Oxygen demand increases\n";
            info += "‚Ä¢ Blood flow redirects to muscles\n";
            info += "‚Ä¢ Digestion slows\n";
            info += "‚Ä¢ Body temperature increases\n\n";
            info += "These changes deliver more O‚ÇÇ and nutrients to working muscles and remove waste products faster.";
            
            alert(info);
        };

        window.simulateRest = function() {
            appState.currentMetrics.heartRate = 60;
            appState.currentMetrics.breathingRate = 10;
            appState.currentMetrics.oxygenLevel = 99;
            appState.currentMetrics.digestionTime = 3;
            
            updateHealthMetrics();
            updateHeartRate(60);
            updateBreathingRate(10);
            
            let info = "Rest Simulation Activated!\n\n";
            info += "During rest:\n";
            info += "‚Ä¢ Heart rate decreases (60 bpm)\n";
            info += "‚Ä¢ Breathing rate decreases (10/min)\n";
            info += "‚Ä¢ Oxygen demand decreases\n";
            info += "‚Ä¢ Blood flow prioritizes digestion\n";
            info += "‚Ä¢ Energy conservation mode\n";
            info += "‚Ä¢ Body repairs and regenerates\n\n";
            info += "These changes conserve energy and allow for digestion, growth, and tissue repair.";
            
            alert(info);
        };

        window.resetMetrics = function() {
            appState.currentMetrics = {
                heartRate: 72,
                breathingRate: 12,
                oxygenLevel: 98,
                digestionTime: 4
            };
            
            updateHealthMetrics();
            updateHeartRate(72);
            updateBreathingRate(12);
            updateDigestionSpeed(50);
            
            alert("Metrics reset to normal resting values.");
        };

        function updateHealthMetrics() {
            heartRateDisplay.textContent = appState.currentMetrics.heartRate;
            breathRateDisplay.textContent = appState.currentMetrics.breathingRate;
            oxygenLevel.textContent = `${appState.currentMetrics.oxygenLevel}%`;
            digestionTime.textContent = `${appState.currentMetrics.digestionTime}h`;
        }

        // System detail
        window.showSystemDetail = function(system) {
            let info = '';
            if (system === 'digestive') {
                info = "üçΩÔ∏è Digestive System üçΩÔ∏è\n\n";
                info += "Function: Breaks down food into nutrients the body can use.\n\n";
                info += "Major Organs:\n";
                info += "‚Ä¢ Mouth: Mechanical and chemical digestion begins\n";
                info += "‚Ä¢ Esophagus: Transports food to stomach\n";
                info += "‚Ä¢ Stomach: Mixes food with gastric juices\n";
                info += "‚Ä¢ Small Intestine: Most digestion and absorption\n";
                info += "‚Ä¢ Large Intestine: Water absorption, feces formation\n";
                info += "‚Ä¢ Liver: Produces bile, processes nutrients\n";
                info += "‚Ä¢ Pancreas: Produces digestive enzymes\n\n";
                info += "Key Processes:\n";
                info += "1. Ingestion: Taking in food\n";
                info += "2. Digestion: Breaking down food\n";
                info += "3. Absorption: Nutrients into blood\n";
                info += "4. Elimination: Removing waste";
            } else if (system === 'respiratory') {
                info = "ü´Å Respiratory System ü´Å\n\n";
                info += "Function: Exchanges gases (O‚ÇÇ in, CO‚ÇÇ out) between body and environment.\n\n";
                info += "Major Organs:\n";
                info += "‚Ä¢ Nasal Cavity: Filters, warms, humidifies air\n";
                info += "‚Ä¢ Pharynx: Common passage for air/food\n";
                info += "‚Ä¢ Larynx: Voice box, prevents food entry\n";
                info += "‚Ä¢ Trachea: Windpipe to lungs\n";
                info += "‚Ä¢ Bronchi: Branch to each lung\n";
                info += "‚Ä¢ Lungs: Contain alveoli for gas exchange\n";
                info += "‚Ä¢ Diaphragm: Main breathing muscle\n\n";
                info += "Key Processes:\n";
                info += "1. Ventilation: Breathing in/out\n";
                info += "2. External Respiration: Gas exchange in lungs\n";
                info += "3. Internal Respiration: Gas exchange in tissues\n";
                info += "4. Cellular Respiration: Using O‚ÇÇ to make energy";
            } else {
                info = "ü´Ä Circulatory System ü´Ä\n\n";
                info += "Function: Transports substances throughout the body.\n\n";
                info += "Major Components:\n";
                info += "‚Ä¢ Heart: Four-chambered muscular pump\n";
                info += "‚Ä¢ Arteries: Carry blood away from heart\n";
                info += "‚Ä¢ Veins: Carry blood toward heart\n";
                info += "‚Ä¢ Capillaries: Site of substance exchange\n";
                info += "‚Ä¢ Blood: Transport medium with cells and plasma\n\n";
                info += "Key Circuits:\n";
                info += "1. Pulmonary Circuit: Heart ‚Üí Lungs ‚Üí Heart\n";
                info += "2. Systemic Circuit: Heart ‚Üí Body ‚Üí Heart\n\n";
                info += "Blood Functions:\n";
                info += "‚Ä¢ Transport: O‚ÇÇ, nutrients, wastes, hormones\n";
                info += "‚Ä¢ Regulation: Temperature, pH, fluid balance\n";
                info += "‚Ä¢ Protection: Immunity, clotting";
            }
            alert(info);
        };

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Create biology tip display
        function createBiologyTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'biology-tip';
            tipDiv.innerHTML = `<strong>Biology Tip:</strong> ${biologyTips[Math.floor(Math.random() * biologyTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a biology systems expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand body systems well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of human biology!";
            } else {
                scoreMessage.textContent = "Keep practicing! The human body is amazing - try again!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            biologyTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            biologyTip.appendChild(createBiologyTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin biology practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
