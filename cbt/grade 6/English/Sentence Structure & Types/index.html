<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 English - Sentence Structure & Types | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Language Arts Theme */
        :root {
            --primary-teal: #009688;
            --secondary-amber: #FFC107;
            --accent-deep-purple: #673AB7;
            --accent-pink: #E91E63;
            --accent-blue: #2196F3;
            --accent-green: #4CAF50;
            --accent-orange: #FF9800;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --sentence-glow: 0 0 20px rgba(0, 150, 136, 0.4);
            --type-glow: 0 0 20px rgba(255, 193, 7, 0.4);
            --structure-glow: 0 0 20px rgba(103, 58, 183, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Language Arts Pattern Background */
        .language-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 150, 136, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 193, 7, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(103, 58, 183, 0.1) 0%, transparent 50%);
            opacity: 0.3;
        }

        .floating-element {
            position: absolute;
            font-size: 3rem;
            font-weight: bold;
            animation: floatElement 25s linear infinite;
        }

        @keyframes floatElement {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-150px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-150px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(150px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--sentence-glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 150, 136, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-teal);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-teal);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-teal);
            box-shadow: 0 0 0 3px rgba(0, 150, 136, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
        }

        .btn-primary:hover {
            background: #00796B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-amber);
            color: #212121;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }

        .btn-secondary:hover {
            background: #FFA000;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-teal);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-teal), var(--secondary-amber));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 150, 136, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .language-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-pink);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 150, 136, 0.1);
            border-color: var(--primary-teal);
            color: var(--primary-teal);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-amber);
            color: #212121;
        }

        .option.correct .option-letter {
            background: var(--primary-teal);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 150, 136, 0.1);
            border-left: 5px solid var(--primary-teal);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-teal);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-teal);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Sentence Display */
        .sentence-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-pink);
            text-align: center;
        }

        .display-title {
            color: var(--primary-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        /* Sentence Types Comparison */
        .comparison-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }

        .comparison-box {
            background: var(--dark-card);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            min-width: 200px;
            transition: transform 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .comparison-box.declarative {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        .comparison-box.interrogative {
            border-color: var(--secondary-amber);
            background: rgba(255, 193, 7, 0.1);
        }

        .comparison-box.imperative {
            border-color: var(--accent-deep-purple);
            background: rgba(103, 58, 183, 0.1);
        }

        .comparison-box.exclamatory {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.1);
        }

        .comparison-box:hover {
            transform: scale(1.05);
        }

        .comparison-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .comparison-box.declarative .comparison-name {
            color: var(--primary-teal);
        }

        .comparison-box.interrogative .comparison-name {
            color: var(--secondary-amber);
        }

        .comparison-box.imperative .comparison-name {
            color: var(--accent-deep-purple);
        }

        .comparison-box.exclamatory .comparison-name {
            color: var(--accent-pink);
        }

        .comparison-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        /* Sentence Structure */
        .structure-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-blue);
        }

        .sentence-diagram {
            position: relative;
            width: 100%;
            height: 200px;
            margin: 20px auto;
            background: linear-gradient(90deg, rgba(33, 150, 243, 0.1), transparent 70%);
            border-radius: 8px;
            padding: 20px;
        }

        .sentence-part {
            position: absolute;
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid var(--accent-blue);
            border-radius: 4px;
            padding: 8px;
            font-size: 0.9rem;
            text-align: center;
            min-width: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sentence-part:hover {
            background: rgba(33, 150, 243, 0.4);
            transform: scale(1.1);
        }

        /* Parts of Speech */
        .parts-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .parts-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .parts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .part-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .part-box:hover {
            transform: translateY(-3px);
        }

        .part-box.noun {
            border-color: var(--accent-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .part-box.verb {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .part-box.adjective {
            border-color: var(--accent-orange);
            background: rgba(255, 152, 0, 0.1);
        }

        .part-box.adverb {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.1);
        }

        .part-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .part-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .part-box.noun .part-name {
            color: var(--accent-blue);
        }

        .part-box.verb .part-name {
            color: var(--accent-green);
        }

        .part-box.adjective .part-name {
            color: var(--accent-orange);
        }

        .part-box.adverb .part-name {
            color: var(--accent-pink);
        }

        /* Sentence Patterns */
        .pattern-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-deep-purple);
        }

        .pattern-methods {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }

        .pattern-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 120px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .pattern-box:hover {
            transform: scale(1.05);
            border-color: var(--accent-deep-purple);
        }

        .pattern-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .pattern-name {
            font-weight: bold;
            color: var(--accent-deep-purple);
            margin-bottom: 5px;
        }

        /* Clauses and Phrases */
        .clause-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .clause-types {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .clause-types {
                grid-template-columns: 1fr;
            }
        }

        .clause-box {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .clause-box:hover {
            transform: translateY(-3px);
        }

        .clause-box.independent {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .clause-box.dependent {
            border-color: var(--accent-orange);
            background: rgba(255, 152, 0, 0.1);
        }

        .clause-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .clause-name {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .clause-box.independent .clause-name {
            color: var(--accent-green);
        }

        .clause-box.dependent .clause-name {
            color: var(--accent-orange);
        }

        /* Grammar Table */
        .grammar-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .grammar-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-pink);
            border-bottom: 2px solid var(--accent-pink);
        }

        .grammar-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .grammar-table tr:hover {
            background: rgba(233, 30, 99, 0.05);
        }

        /* Interactive Practice */
        .interactive-practice {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-deep-purple);
        }

        .practice-title {
            color: var(--accent-deep-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-deep-purple);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-button:hover {
            background: rgba(103, 58, 183, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-teal);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .clause-types {
                grid-template-columns: 1fr;
            }
            
            .parts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes sentenceBuild {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .sentence-build {
            animation: sentenceBuild 1s ease forwards;
        }
        
        @keyframes wordFlow {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }
        
        .word-flow {
            animation: wordFlow 3s linear infinite;
        }
        
        @keyframes grammarGlow {
            0% { background-color: rgba(0, 150, 136, 0.1); }
            33% { background-color: rgba(255, 193, 7, 0.1); }
            66% { background-color: rgba(103, 58, 183, 0.1); }
            100% { background-color: rgba(0, 150, 136, 0.1); }
        }
        
        .grammar-glow {
            animation: grammarGlow 5s linear infinite;
        }
        
        @keyframes punctuationBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .punctuation-bounce {
            animation: punctuationBounce 1s ease-in-out infinite;
        }
        
        @keyframes clauseConnect {
            0% { transform: scale(1); border-color: var(--accent-green); }
            50% { transform: scale(1.05); border-color: var(--accent-orange); }
            100% { transform: scale(1); border-color: var(--accent-green); }
        }
        
        .clause-connect {
            animation: clauseConnect 2s ease-in-out infinite;
        }
        
        @keyframes sentenceTransform {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(180deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .sentence-transform {
            animation: sentenceTransform 3s linear infinite;
        }
    </style>
</head>
<body>
    <!-- Language Arts Pattern Background -->
    <div class="language-bg" id="languageBg">
        <!-- Elements will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 English</h1>
            <p class="welcome-subtitle">Master the building blocks of language! Explore sentence structure and types - learn about declarative, interrogative, imperative, and exclamatory sentences. Discover subjects, predicates, clauses, and phrases. Build your grammar skills to create clear, effective, and engaging sentences!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìùüî§‚ú®</span>
                <span class="topic-name">Sentence Structure & Types</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Grammar Journey</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Language fact display -->
                <div id="languageFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Grammar Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const languageBg = document.getElementById('languageBg');
            
            // Create floating language symbols
            const elements = ['üìù', 'üìö', '‚úèÔ∏è', 'üìñ', 'üî§', 'üî†', 'üìÑ', 'üìä', '‚ú®', 'üåü', 'üí≠', 'üó£Ô∏è', 'üìù', 'üìã'];
            
            for (let i = 0; i < 25; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = elements[Math.floor(Math.random() * elements.length)];
                element.style.left = `${Math.random() * 100}%`;
                element.style.top = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 20}s`;
                element.style.fontSize = `${2 + Math.random() * 3}rem`;
                
                // Color different types
                if (['üìù', '‚úèÔ∏è', 'üìÑ', 'üìã'].includes(element.textContent)) {
                    element.style.color = 'rgba(0, 150, 136, 0.1)'; // Teal for writing
                } else if (['üìö', 'üìñ', 'üî§', 'üî†'].includes(element.textContent)) {
                    element.style.color = 'rgba(255, 193, 7, 0.1)'; // Amber for language
                } else if (['‚ú®', 'üåü', 'üí≠', 'üó£Ô∏è'].includes(element.textContent)) {
                    element.style.color = 'rgba(103, 58, 183, 0.1)'; // Purple for communication
                } else {
                    element.style.color = 'rgba(0, 150, 136, 0.1)'; // Default teal
                }
                
                languageBg.appendChild(element);
            }
        }

        // Questions array - 120+ Grade 6 Sentence Structure and Types questions
        const questions = [
            // Basic Sentence Concepts (1-20)
            {
                type: "basic_concepts",
                question: "What is a sentence?",
                options: ["Complete thought with subject and predicate", "Group of words", "Single word", "Paragraph"],
                answer: "A",
                explanation: "A sentence expresses a complete thought and contains a subject (who/what) and a predicate (what's happening)."
            },
            {
                type: "basic_concepts",
                question: "What does every sentence need?",
                options: ["Subject and predicate", "Capital letter only", "Period only", "At least 5 words"],
                answer: "A",
                explanation: "Subject (noun/pronoun) + predicate (verb) = complete sentence."
            },
            {
                type: "basic_concepts",
                question: "What is the subject of a sentence?",
                options: ["Who or what the sentence is about", "The action", "The describing words", "The ending punctuation"],
                answer: "A",
                explanation: "The subject is the person, place, thing, or idea that performs the action or is described."
            },
            {
                type: "basic_concepts",
                question: "What is the predicate of a sentence?",
                options: ["What the subject does or is", "The topic", "The beginning word", "The punctuation"],
                answer: "A",
                explanation: "The predicate contains the verb and tells what the subject is doing or what is happening to the subject."
            },
            {
                type: "basic_concepts",
                question: "Example of complete sentence:",
                options: ["The cat sleeps.", "Running quickly", "Under the table", "Beautiful sunset"],
                answer: "A",
                explanation: "'The cat sleeps' has subject (cat) and predicate (sleeps) = complete sentence."
            },
            // Sentence Types (21-40)
            {
                type: "sentence_types",
                question: "What is a declarative sentence?",
                options: ["Makes a statement", "Asks a question", "Gives a command", "Shows strong emotion"],
                answer: "A",
                explanation: "Declarative sentences make statements and end with a period. Example: 'I love reading books.'"
            },
            {
                type: "sentence_types",
                question: "What is an interrogative sentence?",
                options: ["Asks a question", "Makes a statement", "Gives a command", "Shows emotion"],
                answer: "A",
                explanation: "Interrogative sentences ask questions and end with a question mark. Example: 'Do you like pizza?'"
            },
            {
                type: "sentence_types",
                question: "What is an imperative sentence?",
                options: ["Gives a command or request", "Asks a question", "Makes a statement", "Shows excitement"],
                answer: "A",
                explanation: "Imperative sentences give commands or requests. They often have an implied subject 'you'. Example: 'Please close the door.'"
            },
            {
                type: "sentence_types",
                question: "What is an exclamatory sentence?",
                options: ["Shows strong emotion", "Asks a question", "Makes a statement", "Gives a command"],
                answer: "A",
                explanation: "Exclamatory sentences show strong emotion and end with an exclamation point. Example: 'What a beautiful day!'"
            },
            {
                type: "sentence_types",
                question: "Which sentence type ends with a period?",
                options: ["Declarative", "Interrogative", "Exclamatory", "All sentences"],
                answer: "A",
                explanation: "Declarative sentences (statements) and imperative sentences (commands) end with periods."
            },
            // Subjects and Predicates (41-60)
            {
                type: "subjects_predicates",
                question: "Find the subject: 'The quick brown fox jumps over the lazy dog.'",
                options: ["fox", "jumps", "dog", "quick brown"],
                answer: "A",
                explanation: "'fox' is who/what is doing the action (jumping)."
            },
            {
                type: "subjects_predicates",
                question: "Find the predicate: 'My favorite teacher gives interesting homework.'",
                options: ["gives interesting homework", "My favorite teacher", "teacher gives", "interesting homework"],
                answer: "A",
                explanation: "The predicate tells what the subject (teacher) does: 'gives interesting homework'."
            },
            {
                type: "subjects_predicates",
                question: "What is a simple subject?",
                options: ["Main noun/pronoun without modifiers", "Complete noun phrase", "The verb only", "All words before the verb"],
                answer: "A",
                explanation: "Simple subject = main noun/pronoun. Complete subject includes all modifiers."
            },
            {
                type: "subjects_predicates",
                question: "What is a simple predicate?",
                options: ["Main verb/verb phrase", "All words after the subject", "Complete action", "Subject and verb"],
                answer: "A",
                explanation: "Simple predicate = main verb. Complete predicate includes verb + all modifiers/complements."
            },
            // Parts of Speech in Sentences (61-80)
            {
                type: "parts_of_speech",
                question: "What part of speech is always in the predicate?",
                options: ["Verb", "Noun", "Adjective", "Preposition"],
                answer: "A",
                explanation: "Every sentence must have a verb in the predicate to show action or state of being."
            },
            {
                type: "parts_of_speech",
                question: "What is a noun?",
                options: ["Person, place, thing, or idea", "Action word", "Describing word", "Connecting word"],
                answer: "A",
                explanation: "Nouns name people (teacher), places (school), things (book), or ideas (happiness)."
            },
            {
                type: "parts_of_speech",
                question: "What is a verb?",
                options: ["Action or state of being", "Person, place, thing", "Describing word", "Replaces a noun"],
                answer: "A",
                explanation: "Verbs show action (run, think) or state of being (is, seem, become)."
            },
            {
                type: "parts_of_speech",
                question: "What is an adjective?",
                options: ["Describes a noun", "Action word", "Replaces a noun", "Shows relationship"],
                answer: "A",
                explanation: "Adjectives modify nouns: 'red' apple, 'happy' child, 'three' books."
            },
            {
                type: "parts_of_speech",
                question: "What is an adverb?",
                options: ["Describes a verb, adjective, or adverb", "Describes a noun", "Action word", "Person, place"],
                answer: "A",
                explanation: "Adverbs modify verbs (run quickly), adjectives (very tall), or other adverbs (quite slowly)."
            },
            // Sentence Structure (81-100)
            {
                type: "sentence_structure",
                question: "What is a simple sentence?",
                options: ["One independent clause", "Two independent clauses", "One dependent clause", "No clauses"],
                answer: "A",
                explanation: "Simple sentence = one independent clause (subject + predicate) expressing one complete thought."
            },
            {
                type: "sentence_structure",
                question: "What is a compound sentence?",
                options: ["Two independent clauses joined", "One independent clause", "One dependent clause", "No verbs"],
                answer: "A",
                explanation: "Compound sentence = two or more independent clauses joined by conjunctions (and, but, or) or semicolons."
            },
            {
                type: "sentence_structure",
                question: "What is a complex sentence?",
                options: ["One independent + one dependent clause", "Two independent clauses", "Simple sentence", "No subject"],
                answer: "A",
                explanation: "Complex sentence = one independent clause + one or more dependent clauses."
            },
            {
                type: "sentence_structure",
                question: "What is a compound-complex sentence?",
                options: ["Two independent + one dependent clause", "Three simple sentences", "Only dependent clauses", "No predicates"],
                answer: "A",
                explanation: "Compound-complex = at least two independent clauses + at least one dependent clause."
            },
            // Clauses and Phrases (101-120)
            {
                type: "clauses_phrases",
                question: "What is an independent clause?",
                options: ["Can stand alone as a sentence", "Cannot stand alone", "Has no subject", "Has no verb"],
                answer: "A",
                explanation: "Independent clause = complete thought with subject + predicate. Can be a sentence by itself."
            },
            {
                type: "clauses_phrases",
                question: "What is a dependent clause?",
                options: ["Cannot stand alone as a sentence", "Can stand alone", "Has two subjects", "Has no punctuation"],
                answer: "A",
                explanation: "Dependent clause = has subject + verb but doesn't express complete thought. Begins with subordinating conjunction (because, although, when)."
            },
            {
                type: "clauses_phrases",
                question: "What is a phrase?",
                options: ["Group of words without subject-verb", "Complete sentence", "Independent clause", "Two clauses"],
                answer: "A",
                explanation: "Phrase = group of related words without subject-verb combination. Example: 'under the table', 'running quickly'."
            },
            // Punctuation and Capitalization (121-140)
            {
                type: "punctuation",
                question: "What punctuation ends a declarative sentence?",
                options: ["Period", "Question mark", "Exclamation point", "Comma"],
                answer: "A",
                explanation: "Declarative sentences (statements) end with periods."
            },
            {
                type: "punctuation",
                question: "What punctuation ends an interrogative sentence?",
                options: ["Question mark", "Period", "Exclamation point", "Colon"],
                answer: "A",
                explanation: "Interrogative sentences (questions) end with question marks."
            },
            {
                type: "punctuation",
                question: "What punctuation ends an exclamatory sentence?",
                options: ["Exclamation point", "Period", "Question mark", "Semicolon"],
                answer: "A",
                explanation: "Exclamatory sentences (showing strong emotion) end with exclamation points."
            },
            // Common Errors (141-160)
            {
                type: "common_errors",
                question: "What is a run-on sentence?",
                options: ["Two sentences joined without proper punctuation", "Sentence without subject", "Sentence without verb", "Very short sentence"],
                answer: "A",
                explanation: "Run-on = two independent clauses incorrectly joined without conjunction or proper punctuation."
            },
            {
                type: "common_errors",
                question: "What is a sentence fragment?",
                options: ["Incomplete sentence missing subject or verb", "Very long sentence", "Question without question mark", "Sentence with too many commas"],
                answer: "A",
                explanation: "Fragment = incomplete thought lacking subject or verb. Cannot stand alone as sentence."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent grammar skills!",
            "Perfect sentence analysis!",
            "Great understanding of sentence structure!",
            "You're a grammar expert!",
            "Perfect punctuation knowledge!",
            "You're a sentence structure champion!",
            "Outstanding language skills!",
            "Brilliant understanding of clauses!",
            "You think like an editor!",
            "Grammar mastery achieved!"
        ];

        // Language terms and definitions
        const languageTerms = [
            {
                term: "Declarative",
                definition: "Makes a statement",
                example: "The sky is blue."
            },
            {
                term: "Interrogative",
                definition: "Asks a question",
                example: "Is the sky blue?"
            },
            {
                term: "Imperative",
                definition: "Gives a command",
                example: "Look at the sky."
            },
            {
                term: "Exclamatory",
                definition: "Shows strong emotion",
                example: "What a blue sky!"
            },
            {
                term: "Independent Clause",
                definition: "Can stand alone as sentence",
                example: "I read books."
            },
            {
                term: "Dependent Clause",
                definition: "Cannot stand alone",
                example: "because I enjoy reading"
            }
        ];

        // Sentence types and examples
        const sentenceTypes = [
            {
                type: "Declarative",
                function: "Makes a statement",
                punctuation: "Period (.)",
                examples: ["I enjoy reading books.", "The sun rises in the east.", "She plays the piano beautifully."],
                icon: "üìù"
            },
            {
                type: "Interrogative",
                function: "Asks a question",
                punctuation: "Question mark (?)",
                examples: ["Do you like pizza?", "Where is the library?", "How are you feeling today?"],
                icon: "‚ùì"
            },
            {
                type: "Imperative",
                function: "Gives command/request",
                punctuation: "Period (.) or exclamation (!)",
                examples: ["Please close the door.", "Do your homework.", "Be careful!"],
                icon: "üëâ"
            },
            {
                type: "Exclamatory",
                function: "Shows strong emotion",
                punctuation: "Exclamation point (!)",
                examples: ["What a beautiful day!", "I can't believe we won!", "Watch out!"],
                icon: "‚ùó"
            }
        ];

        // Parts of speech
        const partsOfSpeech = [
            {
                part: "Noun",
                function: "Names person, place, thing, idea",
                examples: "teacher, school, book, happiness",
                icon: "üìõ"
            },
            {
                part: "Verb",
                function: "Shows action or state of being",
                examples: "run, think, is, seem",
                icon: "üèÉ"
            },
            {
                part: "Adjective",
                function: "Describes/modifies nouns",
                examples: "red, happy, three, beautiful",
                icon: "üé®"
            },
            {
                part: "Adverb",
                function: "Describes verbs, adjectives, adverbs",
                examples: "quickly, very, quite, well",
                icon: "‚ö°"
            },
            {
                part: "Pronoun",
                function: "Replaces nouns",
                examples: "he, she, it, they, we",
                icon: "üîÑ"
            },
            {
                part: "Preposition",
                function: "Shows relationship",
                examples: "in, on, under, between",
                icon: "üìç"
            },
            {
                part: "Conjunction",
                function: "Connects words/phrases",
                examples: "and, but, or, because",
                icon: "üîó"
            },
            {
                part: "Interjection",
                function: "Expresses emotion",
                examples: "Wow! Ouch! Hey!",
                icon: "üò≤"
            }
        ];

        // Sentence structures
        const sentenceStructures = [
            {
                structure: "Simple Sentence",
                composition: "One independent clause",
                example: "The dog barked.",
                icon: "1Ô∏è‚É£"
            },
            {
                structure: "Compound Sentence",
                composition: "Two independent clauses joined",
                example: "The dog barked, and the cat ran.",
                icon: "2Ô∏è‚É£"
            },
            {
                structure: "Complex Sentence",
                composition: "One independent + one dependent clause",
                example: "When the dog barked, the cat ran.",
                icon: "üîÄ"
            },
            {
                structure: "Compound-Complex",
                composition: "Two independent + one dependent clause",
                example: "When the dog barked, the cat ran, and the bird flew away.",
                icon: "üî£"
            }
        ];

        // Clause types
        const clauseTypes = [
            {
                type: "Independent Clause",
                definition: "Expresses complete thought",
                characteristics: "Can stand alone as sentence",
                examples: "I read books. She sings beautifully.",
                icon: "üí™"
            },
            {
                type: "Dependent Clause",
                definition: "Doesn't express complete thought",
                characteristics: "Cannot stand alone",
                examples: "because I enjoy reading, when she sings",
                icon: "ü§ù"
            }
        ];

        // Sentence patterns
        const sentencePatterns = [
            {
                pattern: "Subject + Verb",
                example: "Birds fly.",
                explanation: "Most basic sentence pattern",
                icon: "üë§‚û°Ô∏èüèÉ"
            },
            {
                pattern: "Subject + Verb + Object",
                example: "She reads books.",
                explanation: "Action affects something",
                icon: "üë§‚û°Ô∏èüèÉ‚û°Ô∏èüìö"
            },
            {
                pattern: "Subject + Verb + Adjective",
                example: "The sky is blue.",
                explanation: "Describes the subject",
                icon: "üë§‚û°Ô∏èüèÉ‚û°Ô∏èüé®"
            },
            {
                pattern: "Subject + Verb + Adverb",
                example: "He runs quickly.",
                explanation: "Describes the action",
                icon: "üë§‚û°Ô∏èüèÉ‚û°Ô∏è‚ö°"
            }
        ];

        // Interesting language facts
        const languageFacts = [
            "The shortest complete sentence in English is 'I am.' or 'Go.'!",
            "English has only 3 sentence types that always need a subject: declarative, interrogative, exclamatory!",
            "The word 'set' has the most definitions of any English word - over 430!",
            "Some sentences can be read backward and forward the same way - they're called palindromes!",
            "The longest English sentence ever published has 13,955 words!",
            "Imperative sentences often have an invisible 'you' as the subject!",
            "The most common letter in English sentences is 'e'!",
            "A sentence without any vowels? Try: 'Rhythms' or 'Crypts'!"
        ];

        // Common sentence examples
        const commonSentences = [
            {
                category: "School",
                declarative: "We learn many subjects in school.",
                interrogative: "Do you enjoy mathematics?",
                imperative: "Please complete your homework.",
                exclamatory: "What a great test score!"
            },
            {
                category: "Home",
                declarative: "My family eats dinner together.",
                interrogative: "Did you clean your room?",
                imperative: "Set the table for dinner.",
                exclamatory: "What a delicious meal!"
            },
            {
                category: "Nature",
                declarative: "The sun provides light and heat.",
                interrogative: "Have you seen the rainbow?",
                imperative: "Look at the beautiful flowers.",
                exclamatory: "What a stunning sunset!"
            },
            {
                category: "Sports",
                declarative: "Soccer is a popular sport.",
                interrogative: "Do you play basketball?",
                imperative: "Pass me the ball.",
                exclamatory: "What an amazing goal!"
            }
        ];

        // Punctuation rules
        const punctuationRules = [
            {
                mark: "Period (.)",
                use: "Ends declarative/imperative sentences",
                example: "I love reading."
            },
            {
                mark: "Question Mark (?)",
                use: "Ends interrogative sentences",
                example: "Where are you going?"
            },
            {
                mark: "Exclamation Point (!)",
                use: "Ends exclamatory sentences",
                example: "What a surprise!"
            },
            {
                mark: "Comma (,)",
                use: "Separates items, clauses, phrases",
                example: "I like apples, oranges, and bananas."
            },
            {
                mark: "Semicolon (;)",
                use: "Connects related independent clauses",
                example: "I read books; my brother watches movies."
            },
            {
                mark: "Colon (:)",
                use: "Introduces lists or explanations",
                example: "I need three things: pencil, paper, and eraser."
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const languageFact = document.getElementById('languageFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6EnglishGrammar');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6EnglishGrammar', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6EnglishGrammar_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6EnglishGrammar_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a grammar expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent sentence structure knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning about sentence types and structures!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review sentence types, clauses, and punctuation!";
            } else {
                scoreMessage.textContent = "Keep exploring! Grammar is the foundation of clear communication!";
            }
        }

        // Create language fact display
        function createLanguageFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'language-fact';
            
            factDiv.innerHTML = `<strong>Amazing Language Fact:</strong> ${languageFacts[Math.floor(Math.random() * languageFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "basic_concepts": "üìù",
                "sentence_types": "üî§",
                "subjects_predicates": "üë§",
                "parts_of_speech": "üó£Ô∏è",
                "sentence_structure": "üèóÔ∏è",
                "clauses_phrases": "üîó",
                "punctuation": "‚ùó",
                "common_errors": "‚ö†Ô∏è"
            };
            
            let conceptName = "Basic Concepts";
            let conceptIcon = "üìù";
            
            if (question.type.includes("basic_concepts")) {
                conceptName = "Basic Concepts";
                conceptIcon = conceptIcons.basic_concepts;
            } else if (question.type.includes("sentence_types")) {
                conceptName = "Sentence Types";
                conceptIcon = conceptIcons.sentence_types;
            } else if (question.type.includes("subjects_predicates")) {
                conceptName = "Subjects & Predicates";
                conceptIcon = conceptIcons.subjects_predicates;
            } else if (question.type.includes("parts_of_speech")) {
                conceptName = "Parts of Speech";
                conceptIcon = conceptIcons.parts_of_speech;
            } else if (question.type.includes("sentence_structure")) {
                conceptName = "Sentence Structure";
                conceptIcon = conceptIcons.sentence_structure;
            } else if (question.type.includes("clauses_phrases")) {
                conceptName = "Clauses & Phrases";
                conceptIcon = conceptIcons.clauses_phrases;
            } else if (question.type.includes("punctuation")) {
                conceptName = "Punctuation";
                conceptIcon = conceptIcons.punctuation;
            } else if (question.type.includes("common_errors")) {
                conceptName = "Common Errors";
                conceptIcon = conceptIcons.common_errors;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("basic_concepts")) {
                label.textContent = "Understanding what makes a complete sentence";
            } else if (question.type.includes("sentence_types")) {
                label.textContent = "Declarative, interrogative, imperative, exclamatory";
            } else if (question.type.includes("subjects_predicates")) {
                label.textContent = "Identifying who/what and what's happening";
            } else if (question.type.includes("parts_of_speech")) {
                label.textContent = "Nouns, verbs, adjectives, adverbs, and more";
            } else if (question.type.includes("sentence_structure")) {
                label.textContent = "Simple, compound, complex, compound-complex";
            } else if (question.type.includes("clauses_phrases")) {
                label.textContent = "Independent vs dependent clauses, phrases";
            } else if (question.type.includes("punctuation")) {
                label.textContent = "Periods, question marks, exclamation points";
            } else if (question.type.includes("common_errors")) {
                label.textContent = "Run-ons, fragments, and other mistakes";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create grammar visualization
        function createGrammarVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const commonSentence = commonSentences[Math.floor(Math.random() * commonSentences.length)];
            const sentenceType = sentenceTypes[Math.floor(Math.random() * sentenceTypes.length)];
            const sentenceStructure = sentenceStructures[Math.floor(Math.random() * sentenceStructures.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-pink);">Sentence Structure & Types Explorer</h3>
                
                <div class="comparison-container">
                    <div class="comparison-box declarative" onclick="showSentenceTypeDetails('Declarative')">
                        <div class="comparison-icon">üìù</div>
                        <div class="comparison-name">Declarative</div>
                        <div class="comparison-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                            Makes statements
                        </div>
                    </div>
                    <div class="comparison-box interrogative" onclick="showSentenceTypeDetails('Interrogative')">
                        <div class="comparison-icon">‚ùì</div>
                        <div class="comparison-name">Interrogative</div>
                        <div class="comparison-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                            Asks questions
                        </div>
                    </div>
                    <div class="comparison-box imperative" onclick="showSentenceTypeDetails('Imperative')">
                        <div class="comparison-icon">üëâ</div>
                        <div class="comparison-name">Imperative</div>
                        <div class="comparison-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                            Gives commands
                        </div>
                    </div>
                    <div class="comparison-box exclamatory" onclick="showSentenceTypeDetails('Exclamatory')">
                        <div class="comparison-icon">‚ùó</div>
                        <div class="comparison-name">Exclamatory</div>
                        <div class="comparison-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                            Shows emotion
                        </div>
                    </div>
                </div>
                
                <div class="sentence-display">
                    <div style="font-size: 1.5rem; margin-bottom: 15px;">
                        Category: <span style="color: var(--primary-teal); font-weight: bold;">${commonSentence.category}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; color: var(--primary-teal); margin-bottom: 10px;">Declarative</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${commonSentence.declarative}</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; color: var(--secondary-amber); margin-bottom: 10px;">Interrogative</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${commonSentence.interrogative}</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; color: var(--accent-deep-purple); margin-bottom: 10px;">Imperative</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${commonSentence.imperative}</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; color: var(--accent-pink); margin-bottom: 10px;">Exclamatory</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${commonSentence.exclamatory}</div>
                        </div>
                    </div>
                </div>
                
                <div class="structure-container grammar-glow">
                    <div class="display-title">Sentence Structure - How Sentences Are Built</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        ${sentenceStructure.structure}: ${sentenceStructure.composition}
                    </div>
                    
                    <div class="sentence-diagram sentence-build">
                        <div class="sentence-part" style="top: 20%; left: 20%;" onclick="showSentencePart('Subject')">
                            Subject
                        </div>
                        <div class="sentence-part" style="top: 20%; right: 20%;" onclick="showSentencePart('Predicate')">
                            Predicate
                        </div>
                        <div class="sentence-part" style="bottom: 30%; left: 30%;" onclick="showSentencePart('Object')">
                            Object
                        </div>
                        <div class="sentence-part" style="bottom: 30%; right: 30%;" onclick="showSentencePart('Complement')">
                            Complement
                        </div>
                        <div class="sentence-part" style="top: 50%; left: 50%; transform: translate(-50%, -50%);" onclick="showSentencePart('Verb')">
                            Verb
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <div style="font-weight: bold; color: var(--accent-blue);">Example:</div>
                        <div style="font-style: italic; color: var(--text-secondary); margin-top: 5px;">${sentenceStructure.example}</div>
                    </div>
                </div>
                
                <div class="parts-container">
                    <div class="display-title">Parts of Speech - Building Blocks of Sentences</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Click on parts to learn their functions
                    </div>
                    
                    <div class="parts-grid">
                        ${partsOfSpeech.slice(0, 8).map((part, idx) => `
                            <div class="part-box ${part.part.toLowerCase()}" onclick="showPartOfSpeech('${part.part}')">
                                <div class="part-icon">${part.icon}</div>
                                <div class="part-name">${part.part}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">${part.function.split(' ')[0]}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="pattern-container">
                    <div class="display-title">Sentence Patterns - Common Structures</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        How words are arranged in sentences
                    </div>
                    
                    <div class="pattern-methods">
                        ${sentencePatterns.map((pattern, idx) => `
                            <div class="pattern-box" onclick="showSentencePattern('${pattern.pattern}')">
                                <div class="pattern-icon">${pattern.icon}</div>
                                <div class="pattern-name">${pattern.pattern}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">${pattern.example}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="clause-container clause-connect">
                    <div class="display-title">Clauses - Independent vs Dependent</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Building blocks of complex sentences
                    </div>
                    
                    <div class="clause-types">
                        ${clauseTypes.map((clause, idx) => `
                            <div class="clause-box ${clause.type.includes('Independent') ? 'independent' : 'dependent'}" onclick="showClauseType('${clause.type}')">
                                <div class="clause-icon">${clause.icon}</div>
                                <div class="clause-name">${clause.type}</div>
                                <div style="font-size: 0.9rem; margin: 10px 0;">${clause.definition}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">${clause.characteristics}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="structure-container">
                    <div class="display-title">Sentence Structures - Four Types</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        From simple to complex sentences
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
                        ${sentenceStructures.map((structure, idx) => `
                            <div class="type-box ${structure.structure.includes('Simple') ? 'declarative' : structure.structure.includes('Compound') ? 'interrogative' : structure.structure.includes('Complex') ? 'imperative' : 'exclamatory'}" onclick="showSentenceStructure('${structure.structure}')">
                                <div class="type-icon">${structure.icon}</div>
                                <div class="type-name">${structure.structure}</div>
                                <div style="font-size: 0.9rem; margin: 10px 0;">${structure.composition}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Example: ${structure.example}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <table class="grammar-table">
                    <thead>
                        <tr>
                            <th>Sentence Type</th>
                            <th>Function</th>
                            <th>Punctuation</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${sentenceTypes.map((type, idx) => `
                            <tr>
                                <td style="font-weight: bold; color: ${type.type === 'Declarative' ? 'var(--primary-teal)' : type.type === 'Interrogative' ? 'var(--secondary-amber)' : type.type === 'Imperative' ? 'var(--accent-deep-purple)' : 'var(--accent-pink)'};">${type.type}</td>
                                <td>${type.function}</td>
                                <td>${type.punctuation}</td>
                                <td style="font-style: italic;">${type.examples[0]}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="real-world-example" style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid var(--accent-orange); font-style: italic; color: var(--text-secondary);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Real-World Sentence Building:</div>
                    "In a story: 'The curious cat (subject) climbed (verb) the tall tree (object).' This is a simple declarative sentence. If we ask: 'Did the cat climb the tree?' it becomes interrogative. Command: 'Watch the cat climb!' is imperative. Emotion: 'What an amazing climber!' is exclamatory. Combining: 'Although it was risky, the cat climbed the tree, and the birds flew away.' creates a complex sentence."
                    <div style="margin-top: 10px;">
                        <strong>Key concepts:</strong> Every sentence needs subject + verb. Different types serve different purposes. Structure determines complexity.
                    </div>
                </div>
                
                <div class="interactive-practice">
                    <div class="practice-title">Interactive Grammar Practice</div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="identifySentenceType()">Identify Sentence Type</div>
                        <div class="practice-button" onclick="buildSentence()">Build a Sentence</div>
                        <div class="practice-button" onclick="findSubjectsPredicates()">Find Subjects & Predicates</div>
                        <div class="practice-button" onclick="grammarChallenge()">Grammar Challenge</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice grammar concepts
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-pink);">
                    <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 10px;">Quick Practice:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Identify these sentence types: "Close the door." "Where are you going?"<br>
                        2. Find subject and predicate: "The diligent student completed all assignments."<br>
                        3. What's the difference between simple and compound sentences?<br>
                        4. Give an example of an exclamatory sentence.<br>
                        5. What punctuation ends an interrogative sentence?
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--primary-teal);">
                    <div style="color: var(--primary-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Grammar Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Every sentence:</strong> Subject + Predicate<br>
                        <strong>4 Types:</strong> Declarative, Interrogative, Imperative, Exclamatory<br>
                        <strong>4 Structures:</strong> Simple, Compound, Complex, Compound-Complex<br>
                        <strong>Check:</strong> Complete thought? Proper punctuation?
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper functions
        function getIconForPart(partName) {
            const iconMap = {
                "Noun": "üìõ",
                "Verb": "üèÉ",
                "Adjective": "üé®",
                "Adverb": "‚ö°",
                "Pronoun": "üîÑ",
                "Preposition": "üìç",
                "Conjunction": "üîó",
                "Interjection": "üò≤"
            };
            return iconMap[partName] || "üìù";
        }

        // Global functions for interactive practice
        window.showSentenceTypeDetails = function(typeName) {
            const type = sentenceTypes.find(t => t.type === typeName);
            if (!type) return;
            
            alert(`${type.type} Sentence\n\nFunction: ${type.function}\n\nPunctuation: ${type.punctuation}\n\nExamples:\n${type.examples.join('\n')}`);
        };

        window.showSentencePart = function(partName) {
            const parts = {
                "Subject": "Who or what the sentence is about\n\n‚Ä¢ Usually a noun or pronoun\n‚Ä¢ Performs the action\n‚Ä¢ Examples: 'The cat', 'She', 'My friend'",
                "Predicate": "What the subject does or is\n\n‚Ä¢ Contains the verb\n‚Ä¢ Tells the action or state\n‚Ä¢ Examples: 'runs quickly', 'is happy', 'reads books'",
                "Object": "Receives the action\n\n‚Ä¢ Usually follows the verb\n‚Ä¢ Answers 'what?' or 'whom?'\n‚Ä¢ Examples: 'the ball', 'a story', 'her friend'",
                "Complement": "Completes the meaning\n\n‚Ä¢ Follows linking verbs\n‚Ä¢ Describes the subject\n‚Ä¢ Examples: 'is tall', 'became a doctor', 'seems happy'",
                "Verb": "Action or state of being\n\n‚Ä¢ Shows what happens\n‚Ä¢ Can be action (run) or linking (is)\n‚Ä¢ Essential for every sentence"
            };
            
            alert(`${partName}\n\n${parts[partName]}`);
        };

        window.showPartOfSpeech = function(partName) {
            const part = partsOfSpeech.find(p => p.part === partName);
            if (!part) return;
            
            alert(`${part.part}\n\nFunction: ${part.function}\n\nExamples: ${part.examples}\n\nKey Point: ${getPartKeyPoint(partName)}`);
        };

        function getPartKeyPoint(partName) {
            const keyPoints = {
                "Noun": "Names people, places, things, or ideas",
                "Verb": "Shows action or state of being - essential for sentences",
                "Adjective": "Describes or modifies nouns",
                "Adverb": "Describes verbs, adjectives, or other adverbs",
                "Pronoun": "Replaces nouns to avoid repetition",
                "Preposition": "Shows relationship between words",
                "Conjunction": "Connects words, phrases, or clauses",
                "Interjection": "Expresses strong emotion - often stands alone"
            };
            return keyPoints[partName] || "Important part of speech";
        }

        window.showSentencePattern = function(patternName) {
            const pattern = sentencePatterns.find(p => p.pattern === patternName);
            if (!pattern) return;
            
            alert(`${pattern.pattern}\n\nExample: ${pattern.example}\n\nExplanation: ${pattern.explanation}\n\nThis is one of the basic building blocks of English sentences.`);
        };

        window.showClauseType = function(clauseName) {
            const clause = clauseTypes.find(c => c.type === clauseName);
            if (!clause) return;
            
            alert(`${clause.type}\n\nDefinition: ${clause.definition}\n\nCharacteristics: ${clause.characteristics}\n\nExamples: ${clause.examples}`);
        };

        window.showSentenceStructure = function(structureName) {
            const structure = sentenceStructures.find(s => s.structure === structureName);
            if (!structure) return;
            
            alert(`${structure.structure}\n\nComposition: ${structure.composition}\n\nExample: ${structure.example}\n\nThis structure creates ${structure.structure.includes('Simple') ? 'basic' : structure.structure.includes('Compound') ? 'connected' : structure.structure.includes('Complex') ? 'layered' : 'advanced'} sentences.`);
        };

        window.identifySentenceType = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const sentences = [
                {
                    sentence: "Please pass the salt.",
                    type: "Imperative",
                    explanation: "Gives a command/request"
                },
                {
                    sentence: "What time is the movie?",
                    type: "Interrogative",
                    explanation: "Asks a question"
                },
                {
                    sentence: "I enjoy reading mystery novels.",
                    type: "Declarative",
                    explanation: "Makes a statement"
                },
                {
                    sentence: "What a fantastic performance!",
                    type: "Exclamatory",
                    explanation: "Shows strong emotion"
                }
            ];
            
            const currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--primary-teal);">Identify Sentence Type</div>
                    <div style="font-size: 1.3rem; margin-bottom: 15px; font-style: italic; color: var(--text-primary);">
                        "${currentSentence.sentence}"
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${["Declarative", "Interrogative", "Imperative", "Exclamatory"].map((type, idx) => `
                            <div class="option" onclick="checkSentenceType(this, '${type}', '${currentSentence.type}')">
                                <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                <div class="option-text">${type}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div id="sentenceTypeResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Hint:</strong> Look at the punctuation and purpose of the sentence.
                    </div>
                </div>
            `;
            
            window.currentSentenceExplanation = currentSentence.explanation;
        };

        window.checkSentenceType = function(element, selectedType, correctType) {
            const resultDiv = document.getElementById('sentenceTypeResult');
            if (!resultDiv) return;
            
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            if (selectedType === correctType) {
                element.classList.add('correct');
                resultDiv.textContent = `Correct! This is a ${correctType} sentence. ${window.currentSentenceExplanation}`;
                resultDiv.style.color = 'var(--primary-teal)';
            } else {
                element.classList.add('incorrect');
                // Find and highlight correct option
                options.forEach(opt => {
                    if (opt.querySelector('.option-text').textContent === correctType) {
                        opt.classList.add('correct');
                    }
                });
                resultDiv.textContent = `Incorrect. This is a ${correctType} sentence. ${window.currentSentenceExplanation}`;
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.buildSentence = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const wordBanks = [
                {
                    subject: ["The cat", "My friend", "The teacher", "Our team"],
                    verb: ["runs", "reads", "teaches", "plays"],
                    object: ["quickly", "books", "students", "soccer"]
                },
                {
                    subject: ["I", "She", "We", "They"],
                    verb: ["enjoy", "loves", "need", "are"],
                    object: ["music", "pizza", "help", "happy"]
                }
            ];
            
            const wordBank = wordBanks[Math.floor(Math.random() * wordBanks.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-amber);">Build a Sentence</div>
                    <div style="margin-bottom: 15px;">
                        Drag words to create a complete sentence:
                    </div>
                    
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; min-height: 100px; display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap;" 
                         id="sentenceBuilder" ondrop="dropSentenceWord(event)" ondragover="allowDrop(event)">
                        <div style="color: var(--text-secondary);">Drop words here to build sentence</div>
                    </div>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin: 20px 0;">
                        ${[...wordBank.subject, ...wordBank.verb, ...wordBank.object].map((word, idx) => `
                            <div class="draggable-item" draggable="true" ondragstart="dragSentenceWord(event, '${word}')" 
                                 style="cursor: move; padding: 10px 15px; background: var(--dark-surface); border-radius: 6px;">
                                ${word}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <button class="btn btn-small btn-secondary" onclick="checkSentence()">Check Sentence</button>
                        <button class="btn btn-small btn-outline" onclick="clearSentenceBuilder()">Clear</button>
                    </div>
                    
                    <div id="sentenceResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Remember:</strong> Complete sentences need subject + verb + proper capitalization/punctuation.
                    </div>
                </div>
            `;
        };

        window.dragSentenceWord = function(ev, word) {
            ev.dataTransfer.setData("text/plain", word);
        };

        window.dropSentenceWord = function(ev) {
            ev.preventDefault();
            const word = ev.dataTransfer.getData("text/plain");
            const builder = document.getElementById('sentenceBuilder');
            
            if (builder) {
                // Remove the placeholder text if it's there
                if (builder.querySelector('div') && builder.querySelector('div').textContent.includes('Drop words')) {
                    builder.innerHTML = '';
                }
                
                const wordElement = document.createElement('div');
                wordElement.textContent = word;
                wordElement.style.padding = '5px 10px';
                wordElement.style.background = 'rgba(0, 150, 136, 0.2)';
                wordElement.style.borderRadius = '4px';
                wordElement.style.cursor = 'move';
                wordElement.draggable = true;
                wordElement.ondragstart = (e) => dragSentenceWord(e, word);
                
                builder.appendChild(wordElement);
            }
        };

        window.checkSentence = function() {
            const builder = document.getElementById('sentenceBuilder');
            const resultDiv = document.getElementById('sentenceResult');
            
            if (!builder || !resultDiv) return;
            
            const words = Array.from(builder.children).map(child => child.textContent);
            const sentence = words.join(' ');
            
            // Basic validation
            if (words.length < 2) {
                resultDiv.textContent = "Sentence too short! Add more words.";
                resultDiv.style.color = 'var(--accent-orange)';
            } else if (!sentence.match(/[A-Z]/)) {
                resultDiv.textContent = "Remember to capitalize the first word!";
                resultDiv.style.color = 'var(--accent-orange)';
            } else if (!sentence.match(/[.!?]$/)) {
                resultDiv.textContent = "Good start! Don't forget ending punctuation!";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else {
                resultDiv.textContent = "Great sentence! ‚úì";
                resultDiv.style.color = 'var(--primary-teal)';
                
                // Add a period if missing
                if (!sentence.match(/[.!?]$/)) {
                    const period = document.createElement('div');
                    period.textContent = '.';
                    period.style.padding = '5px';
                    period.style.fontSize = '1.2rem';
                    builder.appendChild(period);
                }
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.clearSentenceBuilder = function() {
            const builder = document.getElementById('sentenceBuilder');
            if (builder) {
                builder.innerHTML = '<div style="color: var(--text-secondary);">Drop words here to build sentence</div>';
            }
            
            const resultDiv = document.getElementById('sentenceResult');
            if (resultDiv) {
                resultDiv.textContent = '';
            }
        };

        window.findSubjectsPredicates = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const sentences = [
                {
                    sentence: "The quick brown fox jumps over the lazy dog.",
                    subject: "The quick brown fox",
                    predicate: "jumps over the lazy dog"
                },
                {
                    sentence: "My favorite teacher gives interesting assignments.",
                    subject: "My favorite teacher",
                    predicate: "gives interesting assignments"
                },
                {
                    sentence: "Beautiful flowers bloom in the spring.",
                    subject: "Beautiful flowers",
                    predicate: "bloom in the spring"
                }
            ];
            
            const currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-deep-purple);">Find Subject & Predicate</div>
                    <div style="font-size: 1.2rem; margin-bottom: 15px; font-style: italic; color: var(--text-primary);">
                        "${currentSentence.sentence}"
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="margin-bottom: 15px;">
                            <div style="font-weight: bold; margin-bottom: 10px; color: var(--accent-blue);">Subject:</div>
                            <input type="text" id="subjectInput" placeholder="Who or what the sentence is about" style="width: 100%; padding: 10px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                        </div>
                        
                        <div>
                            <div style="font-weight: bold; margin-bottom: 10px; color: var(--accent-green);">Predicate:</div>
                            <input type="text" id="predicateInput" placeholder="What the subject does or is" style="width: 100%; padding: 10px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                        </div>
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkSubjectPredicate('${currentSentence.subject}', '${currentSentence.predicate}')">Check Answers</button>
                        <button class="btn btn-small btn-outline" onclick="showSubjectPredicateAnswer('${currentSentence.subject}', '${currentSentence.predicate}')">Show Answer</button>
                    </div>
                    
                    <div id="subjectPredicateResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        window.checkSubjectPredicate = function(correctSubject, correctPredicate) {
            const subjectInput = document.getElementById('subjectInput');
            const predicateInput = document.getElementById('predicateInput');
            const resultDiv = document.getElementById('subjectPredicateResult');
            
            if (!subjectInput || !predicateInput || !resultDiv) return;
            
            const userSubject = subjectInput.value.trim();
            const userPredicate = predicateInput.value.trim();
            
            let correctCount = 0;
            if (userSubject.toLowerCase() === correctSubject.toLowerCase()) correctCount++;
            if (userPredicate.toLowerCase() === correctPredicate.toLowerCase()) correctCount++;
            
            if (correctCount === 2) {
                resultDiv.textContent = "Perfect! You correctly identified both subject and predicate!";
                resultDiv.style.color = 'var(--primary-teal)';
            } else if (correctCount === 1) {
                resultDiv.textContent = "One correct! Check both answers carefully.";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else {
                resultDiv.textContent = "Try again! Remember: subject = who/what, predicate = what's happening.";
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showSubjectPredicateAnswer = function(correctSubject, correctPredicate) {
            const resultDiv = document.getElementById('subjectPredicateResult');
            if (resultDiv) {
                resultDiv.innerHTML = `
                    <div>
                        <div style="color: var(--accent-blue); margin-bottom: 5px;"><strong>Subject:</strong> ${correctSubject}</div>
                        <div style="color: var(--accent-green);"><strong>Predicate:</strong> ${correctPredicate}</div>
                    </div>
                `;
                resultDiv.style.color = 'var(--text-secondary)';
            }
        };

        window.grammarChallenge = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const challenges = [
                {
                    type: "Error Correction",
                    challenge: "Fix this run-on sentence: 'I like pizza my friend prefers pasta we eat together.'",
                    answer: "I like pizza, but my friend prefers pasta. We eat together."
                },
                {
                    type: "Sentence Creation",
                    challenge: "Create a complex sentence using 'although'.",
                    answer: "Although it was raining, we went for a walk."
                },
                {
                    type: "Type Identification",
                    challenge: "What type of sentence is this: 'Please submit your assignments by Friday.'",
                    answer: "Imperative - it gives a command/request."
                }
            ];
            
            const currentChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-pink);">Grammar Challenge: ${currentChallenge.type}</div>
                    <div style="font-size: 1.2rem; margin-bottom: 15px; font-style: italic;">
                        "${currentChallenge.challenge}"
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <textarea id="challengeAnswer" placeholder="Type your answer here..." style="width: 100%; min-height: 100px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; resize: vertical;"></textarea>
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkGrammarChallenge()">Check Answer</button>
                        <button class="btn btn-small btn-outline" onclick="showGrammarChallengeAnswer()">Show Answer</button>
                    </div>
                    
                    <div id="grammarChallengeResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
            
            window.currentGrammarAnswer = currentChallenge.answer;
        };

        window.checkGrammarChallenge = function() {
            const answerInput = document.getElementById('challengeAnswer');
            const resultDiv = document.getElementById('grammarChallengeResult');
            
            if (!answerInput || !resultDiv) return;
            
            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswer = window.currentGrammarAnswer.toLowerCase();
            
            // Simple keyword checking
            const keywords = correctAnswer.split(' ').filter(word => word.length > 3);
            let matchCount = 0;
            
            keywords.forEach(keyword => {
                if (userAnswer.includes(keyword.toLowerCase())) {
                    matchCount++;
                }
            });
            
            const matchPercentage = (matchCount / keywords.length) * 100;
            
            if (matchPercentage > 60) {
                resultDiv.textContent = "Good answer! You understand the concept!";
                resultDiv.style.color = 'var(--primary-teal)';
            } else if (matchPercentage > 30) {
                resultDiv.textContent = "Close! Check the answer for comparison.";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else {
                resultDiv.textContent = "Try again! Review the grammar concept.";
                resultDiv.style.color = 'var(--accent-orange)';
            }
        };

        window.showGrammarChallengeAnswer = function() {
            const resultDiv = document.getElementById('grammarChallengeResult');
            if (resultDiv && window.currentGrammarAnswer) {
                resultDiv.textContent = `Suggested answer: ${window.currentGrammarAnswer}`;
                resultDiv.style.color = 'var(--accent-deep-purple)';
            }
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            languageFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            languageFact.appendChild(createLanguageFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createGrammarVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
