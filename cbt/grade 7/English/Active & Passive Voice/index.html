<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 English - Active & Passive Voice | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Voice Theme */
        :root {
            --primary-blue: #2196F3;
            --secondary-purple: #9C27B0;
            --accent-orange: #FF9800;
            --accent-green: #4CAF50;
            --accent-red: #F44336;
            --accent-teal: #009688;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --active-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --passive-glow: 0 0 20px rgba(156, 39, 176, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-blue);
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--secondary-purple);
            color: white;
        }

        .btn-secondary:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Voice Comparison Cards */
        .voice-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 768px) {
            .voice-comparison {
                grid-template-columns: 1fr;
            }
        }

        .voice-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
        }

        .voice-card.active {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .voice-card.passive {
            border-color: var(--secondary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .voice-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .voice-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .voice-card.active .voice-title {
            color: var(--primary-blue);
        }

        .voice-card.passive .voice-title {
            color: var(--secondary-purple);
        }

        .voice-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-purple));
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .voice-examples {
            margin-bottom: 20px;
        }

        .example-box {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid var(--accent-teal);
        }

        .example-title {
            color: var(--accent-teal);
            font-weight: bold;
            margin-bottom: 8px;
        }

        /* Conversion Practice */
        .conversion-practice {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .practice-title {
            color: var(--accent-orange);
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .conversion-input {
            width: 100%;
            padding: 12px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 8px;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        /* Quick Reference */
        .quick-reference {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border: 2px solid var(--accent-green);
        }

        .reference-title {
            color: var(--accent-green);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .reference-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .reference-item {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .voice-comparison {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .reference-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 7 English: Active & Passive Voice</h1>
            <p class="welcome-subtitle">Learn when to use active voice (clear, direct sentences) and passive voice (when focus is on the action, not who did it). Master this essential grammar skill for better writing!</p>
            
            <div class="topic-badge">
                <span class="topic-name">Active & Passive Voice</span>
            </div>
            
            <div class="voice-comparison">
                <div class="voice-card active">
                    <div class="voice-icon">âš¡</div>
                    <h3 class="voice-title">Active Voice</h3>
                    <p class="voice-description">Subject performs the action</p>
                    <div class="example-box">
                        <div class="example-title">Example:</div>
                        <div>"The cat chased the mouse."</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">(Cat = subject, performs chasing)</div>
                    </div>
                </div>
                
                <div class="voice-card passive">
                    <div class="voice-icon">ðŸ”„</div>
                    <h3 class="voice-title">Passive Voice</h3>
                    <p class="voice-description">Subject receives the action</p>
                    <div class="example-box">
                        <div class="example-title">Example:</div>
                        <div>"The mouse was chased by the cat."</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">(Mouse = subject, receives chasing)</div>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    Start Learning
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 20</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 5%"></div>
                </div>
            </div>

            <div class="question-container">
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="visualization-container">
                <div class="voice-examples">
                    <div class="example-box">
                        <div class="example-title">Active Voice Formula:</div>
                        <div>Subject + Verb + Object</div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">"The teacher (subject) graded (verb) the papers (object)."</div>
                    </div>
                    
                    <div class="example-box">
                        <div class="example-title">Passive Voice Formula:</div>
                        <div>Object + "to be" verb + Past Participle + (by + subject)</div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">"The papers (object) were graded (to be + past participle) by the teacher (subject)."</div>
                    </div>
                </div>
                
                <div class="conversion-practice">
                    <div class="practice-title">Quick Practice</div>
                    <input type="text" class="conversion-input" id="activeInput" placeholder="Enter active sentence">
                    <button class="btn btn-secondary" style="width: 100%;" onclick="convertToPassive()">Convert to Passive</button>
                    <div id="conversionResult" style="margin-top: 10px; min-height: 20px;"></div>
                </div>
                
                <div class="quick-reference">
                    <div class="reference-title">When to Use Each</div>
                    <div class="reference-grid">
                        <div class="reference-item">
                            <strong>Use Active Voice:</strong><br>
                            â€¢ Most writing<br>
                            â€¢ Clear, direct sentences<br>
                            â€¢ Emphasizing doer
                        </div>
                        <div class="reference-item">
                            <strong>Use Passive Voice:</strong><br>
                            â€¢ Unknown doer<br>
                            â€¢ Unimportant doer<br>
                            â€¢ Scientific/formal writing
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Voice Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" id="retryTopic">Practice Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 20 focused questions
        const questions = [
            {
                question: "Which sentence is in active voice?",
                options: [
                    "The boy kicked the ball.",
                    "The ball was kicked by the boy.",
                    "The ball has been kicked.",
                    "By the boy, the ball was kicked."
                ],
                answer: "A",
                explanation: "Active voice: Subject (boy) performs action (kicked). Structure: Subject + Verb + Object."
            },
            {
                question: "Which sentence is in passive voice?",
                options: [
                    "Sarah wrote the letter.",
                    "The letter was written by Sarah.",
                    "Sarah is writing the letter.",
                    "Sarah will write the letter."
                ],
                answer: "B",
                explanation: "Passive voice: Subject (letter) receives action. Structure: Object + to be + past participle + by + doer."
            },
            {
                question: "Convert to passive: 'The chef cooks the meal.'",
                options: [
                    "The meal is cooked by the chef.",
                    "The chef is cooking the meal.",
                    "The meal cooks the chef.",
                    "The chef cooked the meal."
                ],
                answer: "A",
                explanation: "Passive form: Object (meal) + is/are + past participle (cooked) + by + doer (chef)."
            },
            {
                question: "Convert to active: 'The car was washed by John.'",
                options: [
                    "John washes the car.",
                    "John washed the car.",
                    "The car washes John.",
                    "John is washing the car."
                ],
                answer: "B",
                explanation: "Active form: Doer (John) + past tense verb (washed) + object (car)."
            },
            {
                question: "When should you use passive voice?",
                options: [
                    "When you don't know who did the action",
                    "Always in formal writing",
                    "To make sentences shorter",
                    "When you want to emphasize the doer"
                ],
                answer: "A",
                explanation: "Use passive voice when the doer is unknown, unimportant, or obvious from context."
            },
            {
                question: "Identify the voice: 'The window was broken during the storm.'",
                options: [
                    "Active voice",
                    "Passive voice",
                    "Both active and passive",
                    "Neither"
                ],
                answer: "B",
                explanation: "Passive voice: Subject (window) receives action, doer (storm) is mentioned but not the main focus."
            },
            {
                question: "Which 'to be' verb completes this passive sentence? 'The books _____ returned to the library.'",
                options: [
                    "were",
                    "have",
                    "did",
                    "are"
                ],
                answer: "A",
                explanation: "Passive voice requires a form of 'to be' (is, am, are, was, were, be, being, been) + past participle."
            },
            {
                question: "What is the past participle in this passive sentence? 'The report was written by the committee.'",
                options: [
                    "written",
                    "was",
                    "report",
                    "committee"
                ],
                answer: "A",
                explanation: "In passive voice, the main verb becomes a past participle (usually -ed form or irregular past participle)."
            },
            {
                question: "Why is active voice usually preferred?",
                options: [
                    "It's more direct and clear",
                    "It's always shorter",
                    "It sounds more formal",
                    "It's easier to write"
                ],
                answer: "A",
                explanation: "Active voice is usually clearer and more direct because it shows who is doing what."
            },
            {
                question: "In scientific writing, why might passive voice be used?",
                options: [
                    "To focus on the process, not the researcher",
                    "To make sentences longer",
                    "To confuse readers",
                    "To emphasize the scientist"
                ],
                answer: "A",
                explanation: "Scientific writing often uses passive voice to emphasize the research process rather than the researcher."
            },
            {
                question: "Which is correct passive form? 'They built this house in 1990.'",
                options: [
                    "This house was built in 1990.",
                    "This house is built in 1990.",
                    "This house built in 1990.",
                    "In 1990, this house built."
                ],
                answer: "A",
                explanation: "Correct passive: Object (house) + was/were + past participle (built) + time phrase."
            },
            {
                question: "What's wrong with this sentence? 'The cake was eaten.'",
                options: [
                    "Nothing - it's fine if doer is unknown",
                    "Missing subject",
                    "Wrong verb tense",
                    "Should be active voice"
                ],
                answer: "A",
                explanation: "This passive sentence is fine if we don't know or care who ate the cake."
            },
            {
                question: "Change to active: 'The song is being sung by the choir.'",
                options: [
                    "The choir is singing the song.",
                    "The choir sings the song.",
                    "The song sings the choir.",
                    "The choir sang the song."
                ],
                answer: "A",
                explanation: "Present continuous passive becomes present continuous active: Doer + is/are + verb-ing + object."
            },
            {
                question: "Which sentence emphasizes the receiver of action?",
                options: [
                    "The package was delivered this morning.",
                    "The mail carrier delivered the package.",
                    "Someone delivered the package.",
                    "The package arrived this morning."
                ],
                answer: "A",
                explanation: "Passive voice emphasizes the receiver (package), not the doer (mail carrier)."
            },
            {
                question: "What's the active version? 'A new law was passed by Congress.'",
                options: [
                    "Congress passed a new law.",
                    "Congress passes a new law.",
                    "A new law passed Congress.",
                    "Congress is passing a new law."
                ],
                answer: "A",
                explanation: "Simple past passive becomes simple past active: Doer + past tense verb + object."
            },
            {
                question: "When converting active to passive, what happens to the subject?",
                options: [
                    "It becomes the object of 'by'",
                    "It disappears",
                    "It stays the subject",
                    "It becomes a verb"
                ],
                answer: "A",
                explanation: "In activeâ†’passive conversion, the subject becomes the object of preposition 'by' (if mentioned)."
            },
            {
                question: "Identify: 'The team won the championship.'",
                options: [
                    "Active voice",
                    "Passive voice",
                    "Could be either",
                    "Incorrect grammar"
                ],
                answer: "A",
                explanation: "Active: Subject (team) performs action (won)."
            },
            {
                question: "Which is better for most everyday writing?",
                options: [
                    "Active voice",
                    "Passive voice",
                    "Mix of both",
                    "Doesn't matter"
                ],
                answer: "A",
                explanation: "Active voice is usually better for clear, direct communication in everyday writing."
            },
            {
                question: "What's missing? 'The report _____ submitted yesterday.'",
                options: [
                    "was",
                    "is",
                    "has",
                    "did"
                ],
                answer: "A",
                explanation: "Passive voice requires a form of 'to be' + past participle. 'Was' fits with 'yesterday' (past)."
            },
            {
                question: "Why might instructions use passive voice?",
                options: [
                    "To focus on steps, not who does them",
                    "To sound more official",
                    "To be confusing",
                    "To save space"
                ],
                answer: "A",
                explanation: "Instructions often use passive voice to focus on what should be done, not who should do it."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: ""
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            viewTopicsBtn.addEventListener('click', () => alert("Other topics would be available in the full application."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You've mastered active and passive voice!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good job! You understand active and passive voice well!";
            } else if (percentage >= 50) {
                scoreMessage.textContent = "Keep practicing! You're getting there!";
            } else {
                scoreMessage.textContent = "Review the concepts and try again!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Conversion practice function
        window.convertToPassive = function() {
            const activeInput = document.getElementById('activeInput').value.trim();
            const resultDiv = document.getElementById('conversionResult');
            
            if (!activeInput) {
                resultDiv.innerHTML = '<span style="color: var(--accent-orange);">Enter a sentence first!</span>';
                return;
            }
            
            // Simple conversion logic (for demonstration)
            const sentence = activeInput.toLowerCase();
            let result = '';
            
            if (sentence.includes(' cooks ') || sentence.includes(' cooked ') || sentence.includes(' will cook ')) {
                result = sentence.replace(/(\w+) (cooks|cooked|will cook) (the \w+)/, '$3 is/was/will be cooked by $1');
            } else if (sentence.includes(' writes ') || sentence.includes(' wrote ') || sentence.includes(' will write ')) {
                result = sentence.replace(/(\w+) (writes|wrote|will write) (the \w+)/, '$3 is/was/will be written by $1');
            } else if (sentence.includes(' builds ') || sentence.includes(' built ') || sentence.includes(' will build ')) {
                result = sentence.replace(/(\w+) (builds|built|will build) (the \w+)/, '$3 is/was/will be built by $1');
            } else {
                // Generic conversion
                const words = sentence.split(' ');
                if (words.length >= 3) {
                    const subject = words[0];
                    const verb = words[1];
                    const object = words.slice(2).join(' ');
                    
                    // Simple past participle conversion
                    let pastParticiple = verb;
                    if (verb.endsWith('s')) pastParticiple = verb.slice(0, -1) + 'ed';
                    else if (verb.endsWith('ed')) pastParticiple = verb;
                    else pastParticiple = verb + 'ed';
                    
                    result = `${object} is ${pastParticiple} by ${subject}`;
                } else {
                    result = "Please enter a complete sentence (subject + verb + object).";
                }
            }
            
            resultDiv.innerHTML = `<span style="color: var(--accent-teal);">Passive: "${result.charAt(0).toUpperCase() + result.slice(1)}"</span>`;
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
