<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 Science - Environment & Conservation | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Environment Theme */
        :root {
            --primary-green: #4CAF50;
            --secondary-teal: #009688;
            --accent-blue: #2196F3;
            --accent-yellow: #FFC107;
            --accent-orange: #FF9800;
            --accent-brown: #795548;
            --accent-purple: #9C27B0;
            --accent-red: #F44336;
            --dark-bg: #0A2F21;
            --dark-surface: #1A3F31;
            --dark-card: #234F41;
            --dark-border: #336655;
            --text-primary: #FFFFFF;
            --text-secondary: #B8D4C8;
            --text-muted: #7AA898;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(76, 175, 80, 0.3);
            --ecosystem-glow: 0 0 15px rgba(0, 150, 136, 0.4);
            --conservation-glow: 0 0 15px rgba(255, 193, 7, 0.4);
            --sustainability-glow: 0 0 15px rgba(33, 150, 243, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Environment Pattern Background */
        .environment-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(76, 175, 80, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 150, 136, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(33, 150, 243, 0.1) 0%, transparent 50%);
            opacity: 0.3;
        }

        .floating-nature {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 3rem;
            font-weight: bold;
            animation: floatNature 20s linear infinite;
        }

        @keyframes floatNature {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 47, 33, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-teal), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(76, 175, 80, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-green);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-green);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-primary:hover {
            background: #388E3C;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
        }

        .btn-secondary:hover {
            background: #00796B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.5);
        }

        .btn-blue {
            background: var(--accent-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-blue:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-green);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-green), var(--secondary-teal), var(--accent-blue));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .environment-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-teal), var(--accent-blue));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-green);
            background: rgba(76, 175, 80, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--primary-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 5px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Environment Display */
        .environment-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .environment-container {
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-orange);
        }

        .environment-scenario {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .environment-highlight {
            background: rgba(255, 152, 0, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid var(--accent-orange);
        }

        .highlight-text {
            color: var(--accent-orange);
            font-weight: bold;
        }

        /* Ecosystem Diagram */
        .ecosystem-diagram {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #0A2F21, #1A3F31);
            border-radius: 12px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--primary-green);
        }

        .ecosystem-element {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.5rem;
            box-shadow: 0 0 10px currentColor;
        }

        .ecosystem-connection {
            position: absolute;
            background: var(--primary-green);
            border-radius: 2px;
            opacity: 0.6;
        }

        /* Ecosystem Types Grid */
        .ecosystems-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .ecosystems-grid {
                grid-template-columns: 1fr;
            }
        }

        .ecosystem-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .ecosystem-card:hover {
            transform: translateY(-5px);
        }

        .ecosystem-card.forest {
            border-color: var(--primary-green);
        }

        .ecosystem-card.aquatic {
            border-color: var(--accent-blue);
        }

        .ecosystem-card.desert {
            border-color: var(--accent-yellow);
        }

        .ecosystem-card.grassland {
            border-color: var(--accent-brown);
        }

        .ecosystem-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .forest .ecosystem-icon {
            color: var(--primary-green);
        }

        .aquatic .ecosystem-icon {
            color: var(--accent-blue);
        }

        .desert .ecosystem-icon {
            color: var(--accent-yellow);
        }

        .grassland .ecosystem-icon {
            color: var(--accent-brown);
        }

        .ecosystem-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .forest .ecosystem-title {
            color: var(--primary-green);
        }

        .aquatic .ecosystem-title {
            color: var(--accent-blue);
        }

        .desert .ecosystem-title {
            color: var(--accent-yellow);
        }

        .grassland .ecosystem-title {
            color: var(--accent-brown);
        }

        .ecosystem-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .ecosystem-examples {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 10px;
        }

        /* Food Chain/Web Table */
        .foodchain-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .foodchain-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-orange);
            border-bottom: 2px solid var(--accent-orange);
        }

        .foodchain-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .foodchain-table tr:hover {
            background: rgba(255, 152, 0, 0.05);
        }

        /* Conservation Methods Display */
        .conservation-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-yellow);
        }

        .conservation-title {
            color: var(--accent-yellow);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .conservation-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .conservation-grid {
                grid-template-columns: 1fr;
            }
        }

        .conservation-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .conservation-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-yellow);
        }

        .conservation-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-yellow);
        }

        .conservation-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Pollution Types Display */
        .pollution-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-red);
        }

        .pollution-title {
            color: var(--accent-red);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .pollution-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .pollution-grid {
                grid-template-columns: 1fr;
            }
        }

        .pollution-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--accent-red);
        }

        .pollution-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-red);
        }

        .pollution-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-red);
        }

        .pollution-effects {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Interactive Carbon Footprint Calculator */
        .footprint-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-blue);
        }

        .footprint-title {
            color: var(--accent-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .footprint-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .footprint-select {
            padding: 10px 15px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-blue);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .footprint-btn {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-blue);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .footprint-btn:hover {
            background: rgba(33, 150, 243, 0.1);
            transform: translateY(-2px);
        }

        .footprint-display {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Sustainable Practices */
        .sustainability-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .sustainability-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .sustainability-grid {
                grid-template-columns: 1fr;
            }
        }

        .sustainability-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--primary-green);
        }

        .sustainability-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary-green);
        }

        .sustainability-name {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-green);
        }

        .sustainability-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-teal), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-teal), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .ecosystems-grid {
                grid-template-columns: 1fr;
            }
            
            .conservation-grid {
                grid-template-columns: 1fr;
            }
            
            .pollution-grid {
                grid-template-columns: 1fr;
            }
            
            .sustainability-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes environmentReveal {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .environment-reveal {
            animation: environmentReveal 0.5s ease forwards;
        }
        
        @keyframes ecosystemFlow {
            0% { transform: translateX(-100px) scale(0.8); opacity: 0; }
            50% { transform: translateX(0) scale(1.1); opacity: 1; }
            100% { transform: translateX(100px) scale(0.8); opacity: 0; }
        }
        
        .ecosystem-flow {
            animation: ecosystemFlow 3s linear infinite;
        }
        
        @keyframes waterFlow {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
        
        .water-flow {
            animation: waterFlow 2s ease-in-out infinite;
        }
        
        @keyframes ecosystemGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 150, 136, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(0, 150, 136, 0.2); }
        }
        
        .ecosystem-glow {
            animation: ecosystemGlow 2s ease-in-out infinite;
        }
        
        @keyframes conservationGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(255, 193, 7, 0.2); }
        }
        
        .conservation-glow {
            animation: conservationGlow 2s ease-in-out infinite;
        }
        
        @keyframes sustainabilityGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(33, 150, 243, 0.2); }
        }
        
        .sustainability-glow {
            animation: sustainabilityGlow 2s ease-in-out infinite;
        }
        
        @keyframes floatSymbol {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .float-symbol {
            animation: floatSymbol 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Environment Pattern Background -->
    <div class="environment-bg" id="environmentBg">
        <!-- Nature symbols will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 Science - Environment & Conservation</h1>
            <p class="welcome-subtitle">Become an Earth protector! Explore ecosystems, understand environmental challenges, and learn how to conserve our planet's precious resources. Discover your role in creating a sustainable future through interactive activities and real-world conservation examples!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üå≥üåäü¶Å‚ôªÔ∏èüåç</span>
                <span class="topic-name">Ecosystems, Conservation & Sustainability</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Environmental Journey</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Environment fact display -->
                <div id="environmentFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Environmental Stewardship Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Explore Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other Science Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const environmentBg = document.getElementById('environmentBg');
            
            // Create floating nature symbols
            const symbols = ['üå≥', 'üåä', 'ü¶Å', '‚ôªÔ∏è', 'üåç', 'üå±', 'üê†', 'ü¶ã', 'üê¶', 'üåª', 'üå≤', 'üíß'];
            
            for (let i = 0; i < 20; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'floating-nature float-symbol';
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.left = `${Math.random() * 100}%`;
                symbol.style.top = `${Math.random() * 100}%`;
                symbol.style.animationDelay = `${Math.random() * 5}s`;
                symbol.style.fontSize = `${2 + Math.random() * 4}rem`;
                
                // Color based on symbol type
                if (symbol.textContent === 'üå≥' || symbol.textContent === 'üå≤' || symbol.textContent === 'üå±') {
                    symbol.style.color = 'rgba(76, 175, 80, 0.1)';
                } else if (symbol.textContent === 'üåä' || symbol.textContent === 'üíß') {
                    symbol.style.color = 'rgba(33, 150, 243, 0.1)';
                } else if (symbol.textContent === '‚ôªÔ∏è' || symbol.textContent === 'üåç') {
                    symbol.style.color = 'rgba(0, 150, 136, 0.1)';
                } else {
                    symbol.style.color = 'rgba(255, 193, 7, 0.1)';
                }
                
                environmentBg.appendChild(symbol);
            }
        }

        // Questions array - 80+ Grade 6 Environment & Conservation Questions
        const questions = [
            // Ecosystems Basics (1-20)
            {
                type: "ecosystems_basics",
                question: "What is an ecosystem?",
                options: ["A community of living organisms interacting with their physical environment", "Only the plants in an area", "Only the animals in an area", "The weather in a particular place"],
                answer: "A",
                explanation: "An ecosystem includes all living organisms (biotic factors) and their physical environment (abiotic factors) interacting as a system."
            },
            {
                type: "ecosystems_basics",
                question: "What are the living components of an ecosystem called?",
                options: ["Biotic factors", "Abiotic factors", "Climate factors", "Geological factors"],
                answer: "A",
                explanation: "Biotic factors are the living components of an ecosystem, including plants, animals, and microorganisms."
            },
            {
                type: "ecosystems_basics",
                question: "What are the non-living components of an ecosystem called?",
                options: ["Abiotic factors", "Biotic factors", "Organic factors", "Biological factors"],
                answer: "A",
                explanation: "Abiotic factors are the non-living components like water, air, soil, sunlight, and temperature."
            },
            {
                type: "ecosystems_basics",
                question: "Which of these is an example of a biotic factor?",
                options: ["Tree", "Rock", "Water", "Sunlight"],
                answer: "A",
                explanation: "A tree is a living organism, making it a biotic factor in an ecosystem."
            },
            {
                type: "ecosystems_basics",
                question: "Which of these is an example of an abiotic factor?",
                options: ["Soil", "Bird", "Insect", "Plant"],
                answer: "A",
                explanation: "Soil is a non-living component, making it an abiotic factor in an ecosystem."
            },
            // Food Chains and Webs (21-40)
            {
                type: "food_chains",
                question: "What is a food chain?",
                options: ["A sequence showing how energy is transferred from one organism to another", "A list of all animals in an ecosystem", "The water cycle in nature", "How plants make food"],
                answer: "A",
                explanation: "A food chain shows the linear sequence of who eats whom in an ecosystem, representing energy flow."
            },
            {
                type: "food_chains",
                question: "What organisms start every food chain?",
                options: ["Producers (plants)", "Herbivores", "Carnivores", "Decomposers"],
                answer: "A",
                explanation: "Producers (usually plants) start food chains because they can make their own food through photosynthesis."
            },
            {
                type: "food_chains",
                question: "What do you call animals that eat only plants?",
                options: ["Herbivores", "Carnivores", "Omnivores", "Decomposers"],
                answer: "A",
                explanation: "Herbivores are animals that eat only plants, like rabbits, deer, and caterpillars."
            },
            {
                type: "food_chains",
                question: "What do you call animals that eat only other animals?",
                options: ["Carnivores", "Herbivores", "Omnivores", "Producers"],
                answer: "A",
                explanation: "Carnivores are animals that eat only other animals, like lions, hawks, and sharks."
            },
            {
                type: "food_chains",
                question: "What organisms break down dead plants and animals?",
                options: ["Decomposers", "Producers", "Herbivores", "Carnivores"],
                answer: "A",
                explanation: "Decomposers like bacteria and fungi break down dead organisms, returning nutrients to the soil."
            },
            // Types of Ecosystems (41-60)
            {
                type: "ecosystem_types",
                question: "Which ecosystem is characterized by trees and high rainfall?",
                options: ["Forest", "Desert", "Grassland", "Tundra"],
                answer: "A",
                explanation: "Forests have many trees and typically receive high amounts of rainfall throughout the year."
            },
            {
                type: "ecosystem_types",
                question: "Which ecosystem has very little rainfall and extreme temperatures?",
                options: ["Desert", "Rainforest", "Wetland", "Coral reef"],
                answer: "A",
                explanation: "Deserts receive less than 250mm of rainfall per year and have extreme temperature variations."
            },
            {
                type: "ecosystem_types",
                question: "Which ecosystem is dominated by grasses rather than trees?",
                options: ["Grassland", "Forest", "Aquatic", "Tundra"],
                answer: "A",
                explanation: "Grasslands are dominated by grasses with few trees, like prairies and savannas."
            },
            {
                type: "ecosystem_types",
                question: "What type of ecosystem includes oceans, rivers, and lakes?",
                options: ["Aquatic", "Terrestrial", "Desert", "Forest"],
                answer: "A",
                explanation: "Aquatic ecosystems are water-based, including oceans, rivers, lakes, and wetlands."
            },
            // Conservation Basics (61-80)
            {
                type: "conservation_basics",
                question: "What is conservation?",
                options: ["Protecting and preserving natural resources", "Using all resources quickly", "Building more factories", "Cutting down forests"],
                answer: "A",
                explanation: "Conservation means protecting and preserving natural resources and ecosystems for future generations."
            },
            {
                type: "conservation_basics",
                question: "Why is biodiversity important?",
                options: ["It makes ecosystems more resilient and provides many benefits", "It's only important for scientists", "It makes forests look pretty", "It doesn't really matter"],
                answer: "A",
                explanation: "Biodiversity (variety of life) makes ecosystems more resilient to changes and provides many ecosystem services."
            },
            {
                type: "conservation_basics",
                question: "What does the 3R's stand for in conservation?",
                options: ["Reduce, Reuse, Recycle", "Read, Remember, Repeat", "Run, Rest, Relax", "Rain, River, Reservoir"],
                answer: "A",
                explanation: "The 3R's of conservation are Reduce (use less), Reuse (use again), Recycle (process materials for new use)."
            },
            {
                type: "conservation_basics",
                question: "What is sustainable development?",
                options: ["Meeting current needs without compromising future generations", "Developing as fast as possible", "Using all resources now", "Ignoring environmental concerns"],
                answer: "A",
                explanation: "Sustainable development meets current needs without compromising the ability of future generations to meet theirs."
            },
            // Pollution and Environmental Issues (81-100)
            {
                type: "pollution_issues",
                question: "What is air pollution?",
                options: ["Harmful substances in the air", "Clean air in cities", "Natural air in forests", "Oxygen in the atmosphere"],
                answer: "A",
                explanation: "Air pollution occurs when harmful substances like smoke, dust, and chemicals contaminate the air."
            },
            {
                type: "pollution_issues",
                question: "What causes water pollution?",
                options: ["Harmful substances entering water bodies", "Clean water flowing in rivers", "Natural minerals in water", "Fish living in water"],
                answer: "A",
                explanation: "Water pollution happens when harmful substances like chemicals, waste, or plastics enter rivers, lakes, or oceans."
            },
            {
                type: "pollution_issues",
                question: "What is deforestation?",
                options: ["Clearing of forests for other uses", "Planting new trees", "Natural forest growth", "Studying forests"],
                answer: "A",
                explanation: "Deforestation is the clearing or thinning of forests by humans for agriculture, logging, or development."
            },
            {
                type: "pollution_issues",
                question: "What is climate change?",
                options: ["Long-term changes in temperature and weather patterns", "Daily weather changes", "Seasonal changes", "Morning temperature"],
                answer: "A",
                explanation: "Climate change refers to long-term shifts in temperatures and weather patterns, often caused by human activities."
            },
            // Conservation Methods (101-120)
            {
                type: "conservation_methods",
                question: "What is a national park?",
                options: ["Protected area for conservation of nature", "City park for playing", "Farm for growing crops", "Factory area"],
                answer: "A",
                explanation: "National parks are protected areas established to conserve natural environments and wildlife."
            },
            {
                type: "conservation_methods",
                question: "What is composting?",
                options: ["Recycling organic waste into nutrient-rich soil", "Burning waste", "Throwing away food", "Buying new soil"],
                answer: "A",
                explanation: "Composting is the natural process of recycling organic material like food scraps into nutrient-rich soil conditioner."
            },
            {
                type: "conservation_methods",
                question: "What does renewable energy mean?",
                options: ["Energy from sources that can be replenished", "Energy that runs out quickly", "Energy from fossil fuels", "Energy that causes pollution"],
                answer: "A",
                explanation: "Renewable energy comes from sources that can be replenished naturally, like solar, wind, and hydro power."
            },
            {
                type: "conservation_methods",
                question: "What is the purpose of wildlife corridors?",
                options: ["Connect habitats for animal movement", "Build roads for cars", "Create shopping areas", "Divide ecosystems"],
                answer: "A",
                explanation: "Wildlife corridors connect fragmented habitats, allowing animals to move safely between areas."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent environmental knowledge!",
            "Perfect understanding of ecosystems!",
            "Great job identifying conservation methods!",
            "Amazing! You're an environmental champion!",
            "Perfect recall of ecological concepts!",
            "You're a future conservationist in the making!",
            "Outstanding environmental comprehension!",
            "Brilliant ecosystem identification!",
            "You think like an ecologist!",
            "Environmental stewardship achieved!"
        ];

        // Environment concepts
        const environmentConcepts = [
            {
                name: "Ecosystem Basics",
                description: "Understanding ecosystems and their components",
                icon: "üå≥"
            },
            {
                name: "Food Chains & Webs",
                description: "Energy flow through ecosystems",
                icon: "üîÑ"
            },
            {
                name: "Ecosystem Types",
                description: "Different habitats around the world",
                icon: "üåç"
            },
            {
                name: "Conservation",
                description: "Protecting and preserving nature",
                icon: "üõ°Ô∏è"
            },
            {
                name: "Pollution & Issues",
                description: "Environmental challenges we face",
                icon: "‚ö†Ô∏è"
            }
        ];

        // Ecosystem types
        const ecosystemTypes = [
            {
                name: "Forest Ecosystem",
                description: "Dominated by trees and diverse wildlife",
                examples: "Tropical rainforests, temperate forests, boreal forests",
                characteristics: "High biodiversity, layered structure, important for oxygen production",
                icon: "üå≤",
                color: "#4CAF50"
            },
            {
                name: "Aquatic Ecosystem",
                description: "Water-based environments",
                examples: "Oceans, rivers, lakes, wetlands, coral reefs",
                characteristics: "Water-dependent life, salinity variations, important for water cycle",
                icon: "üåä",
                color: "#2196F3"
            },
            {
                name: "Desert Ecosystem",
                description: "Dry areas with little rainfall",
                examples: "Sahara, Arabian, Mojave deserts",
                characteristics: "Extreme temperatures, specialized plants/animals, low precipitation",
                icon: "üèúÔ∏è",
                color: "#FFC107"
            },
            {
                name: "Grassland Ecosystem",
                description: "Dominance of grasses rather than trees",
                examples: "Prairies, savannas, steppes",
                characteristics: "Seasonal rainfall, grazing animals, fire-adapted plants",
                icon: "üåæ",
                color: "#795548"
            }
        ];

        // Food chain components
        const foodChainComponents = [
            {
                level: "Producers",
                examples: "Plants, algae, phytoplankton",
                role: "Make food through photosynthesis",
                energy: "Capture energy from the sun"
            },
            {
                level: "Primary Consumers",
                examples: "Herbivores - rabbits, deer, caterpillars",
                role: "Eat producers",
                energy: "Get energy from plants"
            },
            {
                level: "Secondary Consumers",
                examples: "Carnivores - snakes, foxes, small fish",
                role: "Eat primary consumers",
                energy: "Get energy from herbivores"
            },
            {
                level: "Tertiary Consumers",
                examples: "Top predators - eagles, lions, sharks",
                role: "Eat secondary consumers",
                energy: "Get energy from other carnivores"
            },
            {
                level: "Decomposers",
                examples: "Bacteria, fungi, worms",
                role: "Break down dead organisms",
                energy: "Recycle nutrients back to soil"
            }
        ];

        // Conservation methods
        const conservationMethods = [
            {
                name: "Reduce, Reuse, Recycle",
                description: "Minimize waste and conserve resources",
                example: "Using reusable bags, recycling paper/plastic",
                icon: "‚ôªÔ∏è"
            },
            {
                name: "Water Conservation",
                description: "Saving and protecting water resources",
                example: "Fixing leaks, using low-flow fixtures",
                icon: "üíß"
            },
            {
                name: "Energy Efficiency",
                description: "Using less energy for the same tasks",
                example: "LED bulbs, energy-efficient appliances",
                icon: "üí°"
            },
            {
                name: "Habitat Protection",
                description: "Preserving natural environments",
                example: "National parks, wildlife reserves",
                icon: "üõ°Ô∏è"
            },
            {
                name: "Sustainable Agriculture",
                description: "Farming that protects the environment",
                example: "Crop rotation, organic farming",
                icon: "üå±"
            },
            {
                name: "Renewable Energy",
                description: "Energy from sustainable sources",
                example: "Solar panels, wind turbines",
                icon: "‚òÄÔ∏è"
            }
        ];

        // Pollution types
        const pollutionTypes = [
            {
                name: "Air Pollution",
                sources: "Vehicle emissions, factories, burning fossil fuels",
                effects: "Respiratory problems, acid rain, climate change",
                icon: "üí®",
                color: "#F44336"
            },
            {
                name: "Water Pollution",
                sources: "Industrial waste, agricultural runoff, plastic",
                effects: "Harm to aquatic life, unsafe drinking water",
                icon: "üíß",
                color: "#2196F3"
            },
            {
                name: "Soil Pollution",
                sources: "Chemicals, pesticides, waste dumping",
                effects: "Reduced soil fertility, contaminated food",
                icon: "üå±",
                color: "#795548"
            },
            {
                name: "Noise Pollution",
                sources: "Traffic, construction, industrial noise",
                effects: "Hearing loss, stress, wildlife disturbance",
                icon: "üîä",
                color: "#9C27B0"
            }
        ];

        // Sustainable practices
        const sustainablePractices = [
            {
                name: "Composting",
                description: "Turning food waste into nutrient-rich soil",
                benefit: "Reduces landfill waste, enriches soil",
                icon: "üçÇ"
            },
            {
                name: "Rainwater Harvesting",
                description: "Collecting and storing rainwater for use",
                benefit: "Conserves water, reduces runoff",
                icon: "üåßÔ∏è"
            },
            {
                name: "Public Transportation",
                description: "Using buses, trains instead of personal vehicles",
                benefit: "Reduces air pollution, saves energy",
                icon: "üöå"
            },
            {
                name: "Local Food",
                description: "Eating food grown nearby",
                benefit: "Reduces transportation emissions, supports local farmers",
                icon: "üçé"
            }
        ];

        // Environment facts
        const environmentFacts = [
            "One tree can absorb up to 48 pounds of carbon dioxide per year!",
            "The Amazon rainforest produces 20% of the world's oxygen!",
            "Recycling one aluminum can saves enough energy to run a TV for 3 hours!",
            "Over 8 million tons of plastic enter our oceans every year!",
            "A single rainstorm can wash thousands of liters of polluted water into rivers!",
            "The Great Barrier Reef is the largest living structure on Earth!",
            "Every minute, forests the size of 20 football fields are cut down!",
            "Bees pollinate about one-third of the food we eat!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const environmentFact = document.getElementById('environmentFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6Environment');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6Environment', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6Environment_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6Environment_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're an environmental champion!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent ecological knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning about our precious planet!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review environmental concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Understanding our environment is key to protecting it!";
            }
        }

        // Create environment fact display
        function createEnvironmentFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'environment-fact';
            
            factDiv.innerHTML = `<strong>Amazing Environment Fact:</strong> ${environmentFacts[Math.floor(Math.random() * environmentFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "ecosystems_basics": "üå≥",
                "food_chains": "üîÑ",
                "ecosystem_types": "üåç",
                "conservation_basics": "üõ°Ô∏è",
                "pollution_issues": "‚ö†Ô∏è",
                "conservation_methods": "‚ôªÔ∏è"
            };
            
            let conceptName = "Ecosystem Basics";
            let conceptIcon = "üå≥";
            
            if (question.type.includes("ecosystems_basics")) {
                conceptName = "Ecosystem Basics";
                conceptIcon = conceptIcons.ecosystems_basics;
            } else if (question.type.includes("food_chains")) {
                conceptName = "Food Chains & Webs";
                conceptIcon = conceptIcons.food_chains;
            } else if (question.type.includes("ecosystem_types")) {
                conceptName = "Ecosystem Types";
                conceptIcon = conceptIcons.ecosystem_types;
            } else if (question.type.includes("conservation_basics")) {
                conceptName = "Conservation Basics";
                conceptIcon = conceptIcons.conservation_basics;
            } else if (question.type.includes("pollution_issues")) {
                conceptName = "Pollution & Issues";
                conceptIcon = conceptIcons.pollution_issues;
            } else if (question.type.includes("conservation_methods")) {
                conceptName = "Conservation Methods";
                conceptIcon = conceptIcons.conservation_methods;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("ecosystems_basics")) {
                label.textContent = "Understanding ecosystems and their components";
            } else if (question.type.includes("food_chains")) {
                label.textContent = "Energy flow through ecosystems and food relationships";
            } else if (question.type.includes("ecosystem_types")) {
                label.textContent = "Different habitats and their characteristics";
            } else if (question.type.includes("conservation_basics")) {
                label.textContent = "Principles of protecting and preserving nature";
            } else if (question.type.includes("pollution_issues")) {
                label.textContent = "Environmental challenges and their impacts";
            } else if (question.type.includes("conservation_methods")) {
                label.textContent = "Practical ways to protect the environment";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create environment visualization
        function createEnvironmentVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-green);">Environment & Conservation Explorer</h3>
                
                <div class="environment-display">
                    <div class="display-title">Current Environmental Concept</div>
                    <div class="environment-container">
                        <div class="environment-scenario">${currentQuestion.question}</div>
                        <div class="environment-highlight">
                            <strong>Key Concept:</strong> <span class="highlight-text">${getEnvironmentConcept(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Ecosystem Diagram -->
                <div class="ecosystem-diagram" id="ecosystemDiagram">
                    <!-- Ecosystem diagram will be animated by JavaScript -->
                </div>
                <div style="text-align: center; margin-bottom: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                    Interactive Ecosystem Model - Showing energy flow and relationships
                </div>
                
                <div class="ecosystems-grid">
                    ${ecosystemTypes.map(ecosystem => `
                        <div class="ecosystem-card ${ecosystem.name.toLowerCase().split(' ')[0]}" style="border-color: ${ecosystem.color}" onclick="showEcosystemDemo('${ecosystem.name}')">
                            <div class="ecosystem-icon" style="color: ${ecosystem.color}">${ecosystem.icon}</div>
                            <div class="ecosystem-title" style="color: ${ecosystem.color}">${ecosystem.name}</div>
                            <div class="ecosystem-description">${ecosystem.description}</div>
                            <div class="ecosystem-examples">
                                <strong>Examples:</strong> ${ecosystem.examples}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <table class="foodchain-table">
                    <thead>
                        <tr>
                            <th>Trophic Level</th>
                            <th>Examples</th>
                            <th>Role</th>
                            <th>Energy Source</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${foodChainComponents.map(component => `
                            <tr>
                                <td style="font-weight: bold; color: var(--accent-orange);">${component.level}</td>
                                <td style="color: var(--primary-green);">${component.examples}</td>
                                <td style="font-size: 0.9rem;">${component.role}</td>
                                <td style="font-size: 0.8rem; color: var(--text-muted);">${component.energy}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="conservation-container conservation-glow">
                    <div class="conservation-title">Conservation Methods</div>
                    <div class="conservation-grid">
                        ${conservationMethods.map(method => `
                            <div class="conservation-card">
                                <div class="conservation-icon">${method.icon}</div>
                                <div class="conservation-name">${method.name}</div>
                                <div class="conservation-description">
                                    ${method.description}<br>
                                    <strong>Example:</strong> ${method.example}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="pollution-container">
                    <div class="pollution-title">Types of Pollution</div>
                    <div class="pollution-grid">
                        ${pollutionTypes.map(pollution => `
                            <div class="pollution-card">
                                <div class="pollution-icon">${pollution.icon}</div>
                                <div class="pollution-name">${pollution.name}</div>
                                <div class="pollution-effects">
                                    <strong>Sources:</strong> ${pollution.sources}<br>
                                    <strong>Effects:</strong> ${pollution.effects}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="footprint-container sustainability-glow">
                    <div class="footprint-title">Interactive Carbon Footprint Calculator</div>
                    <div class="footprint-controls">
                        <select class="footprint-select" id="activityType">
                            <option value="">Select Activity</option>
                            <option value="transportation">Transportation</option>
                            <option value="energy">Energy Use</option>
                            <option value="food">Food Choices</option>
                            <option value="waste">Waste Production</option>
                        </select>
                        <button class="footprint-btn" onclick="calculateFootprint()">Calculate Impact</button>
                    </div>
                    <div class="footprint-display" id="footprintDisplay">
                        Select an activity type to calculate its environmental impact
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Environmental Guide:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Ecosystems = Biotic + Abiotic components<br>
                        2. Food chains show energy transfer<br>
                        3. Conservation protects for future generations<br>
                        4. Pollution harms ecosystems and health<br>
                        5. Sustainable practices help our planet
                    </div>
                </div>
                
                <div class="sustainability-container">
                    <div class="display-title">Sustainable Daily Practices</div>
                    <div class="sustainability-grid">
                        ${sustainablePractices.map(practice => `
                            <div class="sustainability-card">
                                <div class="sustainability-icon">${practice.icon}</div>
                                <div class="sustainability-name">${practice.name}</div>
                                <div class="sustainability-description">
                                    ${practice.description}<br>
                                    <strong>Benefit:</strong> ${practice.benefit}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="solution-container">
                    <div class="solution-title">Step-by-Step Learning Path</div>
                    <div class="solution-steps" id="solutionSteps">
                        ${generateLearningPath(currentQuestion)}
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-teal);">
                    <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Environmental Stewardship Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Observe:</strong> Notice nature around you and how it works<br>
                        <strong>Reduce:</strong> Use less of everything - water, energy, materials<br>
                        <strong>Reuse:</strong> Find new uses for items instead of throwing away<br>
                        <strong>Recycle:</strong> Properly process materials for new products<br>
                        <strong>Educate:</strong> Share environmental knowledge with others<br>
                        <em>Every small action counts - together we can make a big difference!</em>
                    </div>
                </div>
            `;
            
            // Initialize ecosystem diagram
            initializeEcosystemDiagram();
            
            return vizDiv;
        }

        // Helper functions
        function getEnvironmentConcept(typeString) {
            const conceptMap = {
                "ecosystems_basics": "Ecosystem components and interactions",
                "food_chains": "Energy flow through food relationships",
                "ecosystem_types": "Different habitats and their characteristics",
                "conservation_basics": "Principles of protecting nature",
                "pollution_issues": "Environmental challenges and impacts",
                "conservation_methods": "Practical conservation approaches"
            };
            
            return conceptMap[typeString] || "Environmental Science";
        }

        function generateLearningPath(question) {
            let steps = [];
            
            if (question.type.includes("ecosystems_basics")) {
                steps = [
                    "Step 1: Identify if the question is about biotic or abiotic factors",
                    "Step 2: Recall definitions of ecosystem components",
                    "Step 3: Apply knowledge to specific examples",
                    "Step 4: Eliminate incorrect options",
                    "Step 5: Select the most accurate answer"
                ];
            } else if (question.type.includes("food_chains")) {
                steps = [
                    "Step 1: Identify the trophic level or relationship",
                    "Step 2: Recall food chain terminology and order",
                    "Step 3: Consider energy flow direction",
                    "Step 4: Eliminate incorrect options",
                    "Step 5: Select the correct food chain concept"
                ];
            } else if (question.type.includes("conservation_basics")) {
                steps = [
                    "Step 1: Identify the conservation principle involved",
                    "Step 2: Recall key conservation concepts and methods",
                    "Step 3: Consider sustainability and future impacts",
                    "Step 4: Eliminate incorrect options",
                    "Step 5: Select the best conservation approach"
                ];
            } else {
                steps = [
                    "Step 1: Read the question carefully",
                    "Step 2: Identify key environmental concepts",
                    "Step 3: Recall relevant ecological principles",
                    "Step 4: Apply scientific reasoning",
                    "Step 5: Select the most accurate answer"
                ];
            }
            
            return steps.map((step, index) => `
                <div class="solution-step environment-reveal" style="animation-delay: ${index * 0.1}s">
                    <span class="step-number">${index + 1}</span>
                    <span class="step-description">${step}</span>
                    ${index === steps.length - 1 ? `
                        <div class="step-calculation">
                            <strong>Correct Answer:</strong> ${question.options[question.answer.charCodeAt(0) - 65]}
                        </div>
                        <div class="step-explanation">
                            ${question.explanation}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Global functions for interactive features
        window.showEcosystemDemo = function(ecosystemName) {
            const ecosystemDiagram = document.getElementById('ecosystemDiagram');
            if (!ecosystemDiagram) return;
            
            const ecosystem = ecosystemTypes.find(e => e.name === ecosystemName);
            if (!ecosystem) return;
            
            // Clear and show the selected ecosystem
            ecosystemDiagram.innerHTML = '';
            
            // Create ecosystem representation based on type
            if (ecosystemName === "Forest Ecosystem") {
                ecosystemDiagram.innerHTML = `
                    <!-- Sun -->
                    <div class="ecosystem-element" style="background-color: #FFC107; width: 40px; height: 40px; top: 20px; right: 20px;">
                        ‚òÄÔ∏è
                    </div>
                    
                    <!-- Trees -->
                    <div class="ecosystem-element" style="background-color: #4CAF50; width: 60px; height: 80px; bottom: 40px; left: 20px; border-radius: 30px 30px 0 0;">
                        üå≤
                    </div>
                    <div class="ecosystem-element" style="background-color: #4CAF50; width: 70px; height: 100px; bottom: 30px; left: 100px; border-radius: 35px 35px 0 0;">
                        üå≥
                    </div>
                    <div class="ecosystem-element" style="background-color: #4CAF50; width: 50px; height: 70px; bottom: 50px; right: 60px; border-radius: 25px 25px 0 0;">
                        üå¥
                    </div>
                    
                    <!-- Animals -->
                    <div class="ecosystem-element" style="background-color: #795548; width: 30px; height: 30px; bottom: 80px; left: 40px;">
                        üê¶
                    </div>
                    <div class="ecosystem-element" style="background-color: #795548; width: 30px; height: 30px; bottom: 100px; right: 100px;">
                        üêøÔ∏è
                    </div>
                    
                    <!-- Soil -->
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 30px; background: #795548; border-radius: 15px 15px 0 0;"></div>
                    
                    <!-- Title -->
                    <div style="position: absolute; top: 10px; left: 10px; color: ${ecosystem.color}; font-weight: bold; font-size: 0.9rem;">
                        ${ecosystem.name}
                    </div>
                `;
            } else if (ecosystemName === "Aquatic Ecosystem") {
                ecosystemDiagram.innerHTML = `
                    <!-- Water surface -->
                    <div style="position: absolute; top: 0; left: 0; right: 0; height: 60px; background: linear-gradient(to bottom, rgba(33, 150, 243, 0.8), rgba(33, 150, 243, 0.4));"></div>
                    
                    <!-- Fish -->
                    <div class="ecosystem-element" style="background-color: #2196F3; width: 40px; height: 20px; top: 80px; left: 40px; border-radius: 10px;">
                        üê†
                    </div>
                    <div class="ecosystem-element" style="background-color: #2196F3; width: 50px; height: 25px; top: 120px; right: 60px; border-radius: 12px;">
                        üêü
                    </div>
                    
                    <!-- Plants -->
                    <div class="ecosystem-element" style="background-color: #4CAF50; width: 30px; height: 60px; bottom: 40px; left: 80px; border-radius: 15px;">
                        üåø
                    </div>
                    <div class="ecosystem-element" style="background-color: #4CAF50; width: 40px; height: 80px; bottom: 30px; right: 100px; border-radius: 20px;">
                        üå±
                    </div>
                    
                    <!-- Water floor -->
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 40px; background: #795548; border-radius: 20px 20px 0 0;"></div>
                    
                    <!-- Title -->
                    <div style="position: absolute; top: 10px; left: 10px; color: ${ecosystem.color}; font-weight: bold; font-size: 0.9rem;">
                        ${ecosystem.name}
                    </div>
                `;
            }
        };

        window.calculateFootprint = function() {
            const activitySelect = document.getElementById('activityType');
            const footprintDisplay = document.getElementById('footprintDisplay');
            
            if (!activitySelect || !footprintDisplay) return;
            
            const activity = activitySelect.value;
            
            if (!activity) {
                footprintDisplay.innerHTML = "Please select an activity type.";
                return;
            }
            
            const impactData = {
                transportation: {
                    title: "Transportation Impact",
                    examples: "Car: 2.3 kg CO‚ÇÇ per liter of gasoline, Bus: 0.1 kg CO‚ÇÇ per km per person, Bicycle: 0 kg CO‚ÇÇ",
                    reduction: "Walk, bike, use public transport, carpool",
                    icon: "üöó"
                },
                energy: {
                    title: "Energy Use Impact",
                    examples: "Electricity: 0.5 kg CO‚ÇÇ per kWh, Natural gas: 2 kg CO‚ÇÇ per m¬≥",
                    reduction: "Use LED bulbs, turn off unused devices, use renewable energy",
                    icon: "üí°"
                },
                food: {
                    title: "Food Choices Impact",
                    examples: "Beef: 27 kg CO‚ÇÇ per kg, Vegetables: 2 kg CO‚ÇÇ per kg, Local food: 90% less transport emissions",
                    reduction: "Eat more plants, choose local/seasonal food, reduce waste",
                    icon: "üçé"
                },
                waste: {
                    title: "Waste Production Impact",
                    examples: "Landfill waste: produces methane (25x worse than CO‚ÇÇ), Recycled materials: 50-95% less energy to process",
                    reduction: "Reduce, reuse, recycle, compost organic waste",
                    icon: "üóëÔ∏è"
                }
            };
            
            const data = impactData[activity];
            
            footprintDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; margin-bottom: 10px; color: var(--accent-blue);">
                        ${data.icon} ${data.title}
                    </div>
                    
                    <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <strong>Carbon Footprint Examples:</strong><br>
                        ${data.examples}
                    </div>
                    
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 8px; margin: 10px 0; border: 1px solid var(--primary-green);">
                        <strong style="color: var(--primary-green);">Reduction Strategies:</strong><br>
                        ${data.reduction}
                    </div>
                    
                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 15px;">
                        <strong>Remember:</strong> Every small change adds up to make a big difference for our planet!
                    </div>
                </div>
            `;
        };

        function initializeEcosystemDiagram() {
            const ecosystemDiagram = document.getElementById('ecosystemDiagram');
            if (!ecosystemDiagram) return;
            
            // Create a simple food chain diagram
            ecosystemDiagram.innerHTML = `
                <!-- Sun -->
                <div class="ecosystem-element" style="background-color: #FFC107; width: 40px; height: 40px; top: 20px; right: 20px; animation: pulse 2s infinite;">
                    ‚òÄÔ∏è
                </div>
                
                <!-- Grass (Producer) -->
                <div class="ecosystem-element" style="background-color: #4CAF50; width: 50px; height: 30px; bottom: 100px; left: 50px; border-radius: 25px;">
                    üå±
                </div>
                
                <!-- Rabbit (Primary Consumer) -->
                <div class="ecosystem-element" style="background-color: #795548; width: 40px; height: 40px; bottom: 60px; left: 150px;">
                    üêá
                </div>
                
                <!-- Fox (Secondary Consumer) -->
                <div class="ecosystem-element" style="background-color: #FF9800; width: 50px; height: 40px; bottom: 120px; right: 100px;">
                    ü¶ä
                </div>
                
                <!-- Decomposer -->
                <div class="ecosystem-element" style="background-color: #9C27B0; width: 35px; height: 35px; bottom: 30px; right: 50px;">
                    üçÑ
                </div>
                
                <!-- Connections -->
                <div class="ecosystem-connection" style="width: 80px; height: 3px; top: 125px; left: 70px; transform: rotate(15deg);"></div>
                <div class="ecosystem-connection" style="width: 70px; height: 3px; top: 110px; left: 160px; transform: rotate(-30deg);"></div>
                <div class="ecosystem-connection" style="width: 60px; height: 3px; top: 140px; left: 180px; transform: rotate(45deg);"></div>
                
                <!-- Labels -->
                <div style="position: absolute; top: 40px; right: 15px; color: #FFC107; font-size: 0.8rem; font-weight: bold;">Sun</div>
                <div style="position: absolute; bottom: 130px; left: 45px; color: #4CAF50; font-size: 0.8rem; font-weight: bold;">Producer</div>
                <div style="position: absolute; bottom: 70px; left: 145px; color: #795548; font-size: 0.8rem; font-weight: bold;">Primary Consumer</div>
                <div style="position: absolute; bottom: 130px; right: 95px; color: #FF9800; font-size: 0.8rem; font-weight: bold;">Secondary Consumer</div>
                <div style="position: absolute; bottom: 40px; right: 45px; color: #9C27B0; font-size: 0.8rem; font-weight: bold;">Decomposer</div>
                
                <!-- Title -->
                <div style="position: absolute; bottom: 10px; left: 0; right: 0; text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                    Simple Food Chain Example
                </div>
            `;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            environmentFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            environmentFact.appendChild(createEnvironmentFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createEnvironmentVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin your environmental journey!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
