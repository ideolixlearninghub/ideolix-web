<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Science - Cell Structure & Functions | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Biology Theme */
        :root {
            --primary-green: #4CAF50;      /* Plant cells */
            --primary-blue: #2196F3;       /* Animal cells */
            --primary-purple: #9C27B0;     /* Cell organelles */
            --primary-orange: #FF9800;     /* Cell functions */
            --accent-yellow: #FFC107;      /* Nucleus */
            --accent-red: #F44336;         /* Mitochondria */
            --accent-teal: #009688;        /* Chloroplasts */
            --accent-pink: #E91E63;        /* Cell membrane */
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --plant-cell: rgba(76, 175, 80, 0.8);
            --animal-cell: rgba(33, 150, 243, 0.8);
            --organelle: rgba(156, 39, 176, 0.8);
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(156, 39, 176, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(76, 175, 80, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-green);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-green);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-primary:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-secondary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-secondary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-accent {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-accent:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-orange {
            background: var(--primary-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-orange:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Biology Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .topics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.cell-types {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .topic-card.organelles {
            border-color: var(--primary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .topic-card.functions {
            border-color: var(--primary-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.cell-types .topic-title {
            color: var(--primary-green);
        }

        .topic-card.organelles .topic-title {
            color: var(--primary-purple);
        }

        .topic-card.functions .topic-title {
            color: var(--primary-orange);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-green), var(--primary-blue), var(--primary-purple));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
        }

        .science-fact {
            background: rgba(156, 39, 176, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-purple);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            font-family: 'Courier New', monospace;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-green);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: #4CAF50;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: #4CAF50;
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: #4CAF50;
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
            font-family: 'Courier New', monospace;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Cell Explorer */
        .cell-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
            position: relative;
        }

        .diagram-title {
            color: var(--accent-teal);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .cell-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        /* Plant Cell Explorer */
        .plant-cell-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .plant-cell-container {
            width: 100%;
            height: 300px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .cell-wall {
            position: absolute;
            border: 3px solid var(--primary-green);
            border-radius: 50%;
            width: 90%;
            height: 90%;
            top: 5%;
            left: 5%;
        }

        .cell-membrane {
            position: absolute;
            border: 2px solid var(--accent-pink);
            border-radius: 50%;
            width: 85%;
            height: 85%;
            top: 7.5%;
            left: 7.5%;
        }

        .nucleus {
            position: absolute;
            background: var(--accent-yellow);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            top: 40%;
            left: 40%;
            cursor: pointer;
        }

        .chloroplast {
            position: absolute;
            background: var(--accent-teal);
            border-radius: 50%;
            width: 30px;
            height: 30px;
        }

        .mitochondria {
            position: absolute;
            background: var(--accent-red);
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            width: 35px;
            height: 20px;
        }

        .vacuole {
            position: absolute;
            border: 2px solid var(--primary-blue);
            border-radius: 50%;
            width: 70px;
            height: 70px;
        }

        .organelle-label {
            position: absolute;
            color: white;
            font-size: 0.7rem;
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 5px;
            border-radius: 3px;
            pointer-events: none;
        }

        .cell-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        /* Animal Cell Explorer */
        .animal-cell-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .animal-cell-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        /* Organelles Explorer */
        .organelles-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .organelles-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .organelles-container {
                grid-template-columns: 1fr;
            }
        }

        .organelle-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-top: 4px solid transparent;
        }

        .organelle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .organelle-card.nucleus {
            border-top-color: var(--accent-yellow);
        }

        .organelle-card.mitochondria {
            border-top-color: var(--accent-red);
        }

        .organelle-card.chloroplast {
            border-top-color: var(--accent-teal);
        }

        .organelle-card.ribosome {
            border-top-color: var(--primary-orange);
        }

        .organelle-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .organelle-card.nucleus .organelle-title {
            color: var(--accent-yellow);
        }

        .organelle-card.mitochondria .organelle-title {
            color: var(--accent-red);
        }

        .organelle-card.chloroplast .organelle-title {
            color: var(--accent-teal);
        }

        .organelle-card.ribosome .organelle-title {
            color: var(--primary-orange);
        }

        .organelle-function {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px;
            border-radius: 5px;
        }

        .organelle-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Cell Comparison */
        .comparison-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: rgba(255, 193, 7, 0.2);
            color: var(--accent-yellow);
            padding: 10px;
            text-align: left;
            font-weight: bold;
        }

        .comparison-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-secondary);
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .feature-present {
            color: #4CAF50;
            font-weight: bold;
        }

        .feature-absent {
            color: #F44336;
            font-weight: bold;
        }

        /* Microscope Simulator */
        .microscope-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .microscope-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .microscope-slide {
            position: absolute;
            width: 80%;
            height: 60%;
            background: #2a2a2a;
            border-radius: 5px;
            overflow: hidden;
        }

        .cell-view {
            position: absolute;
            transition: transform 0.5s ease;
        }

        .magnification-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }

        /* Cell Functions */
        .functions-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-orange);
        }

        .functions-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .functions-container {
                grid-template-columns: 1fr;
            }
        }

        .function-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .function-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 152, 0, 0.1);
        }

        .function-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-orange);
            font-size: 1.1rem;
        }

        .function-process {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .function-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Cell Division Simulator */
        .division-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-pink);
        }

        .division-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .division-stage {
            position: absolute;
            text-align: center;
            color: var(--text-primary);
            font-weight: bold;
            display: none;
        }

        /* Practice Problems */
        .practice-problems {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .problem-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .problem-list {
                grid-template-columns: 1fr;
            }
        }

        .problem-item {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .problem-item:hover {
            background: rgba(244, 67, 54, 0.1);
            transform: translateX(5px);
        }

        .problem-number {
            font-weight: bold;
            color: var(--accent-red);
            min-width: 25px;
        }

        .problem-text {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes organelleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .floating {
            animation: organelleFloat 3s ease-in-out infinite;
        }

        @keyframes cellPulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .cell-pulse {
            animation: cellPulse 2s ease-in-out infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .organelles-container {
                grid-template-columns: 1fr;
            }
            
            .functions-container {
                grid-template-columns: 1fr;
            }
            
            .problem-list {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        /* Biology Notation */
        .organelle-name {
            font-family: 'Courier New', monospace;
            color: var(--primary-purple);
            font-weight: bold;
        }

        .cell-type {
            color: var(--primary-green);
            font-weight: bold;
        }

        .function-term {
            color: var(--primary-orange);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Science: Cell Structure & Functions</h1>
            <p class="welcome-subtitle">Explore the fascinating microscopic world of cells! Discover the building blocks of life, understand cell organelles, and learn how cells carry out essential functions for all living organisms.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üî¨üß¨</span>
                <span class="topic-name">Cell Biology: The Foundation of Life</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card cell-types" onclick="showTopicDetails('cell-types')">
                    <div class="topic-icon">üå±</div>
                    <h3 class="topic-title">Cell Types</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Understanding plant, animal, and bacterial cells</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Plant vs Animal cells</li>
                            <li>Prokaryotic vs Eukaryotic</li>
                            <li>Cell specialization</li>
                            <li>Unicellular vs Multicellular</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card organelles" onclick="showTopicDetails('organelles')">
                    <div class="topic-icon">‚öôÔ∏è</div>
                    <h3 class="topic-title">Cell Organelles</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Structures that perform specific functions within cells</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Nucleus: Control center</li>
                            <li>Mitochondria: Powerhouse</li>
                            <li>Chloroplasts: Photosynthesis</li>
                            <li>Ribosomes: Protein synthesis</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card functions" onclick="showTopicDetails('functions')">
                    <div class="topic-icon">üîÑ</div>
                    <h3 class="topic-title">Cell Functions</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Essential processes that keep cells alive</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Respiration</li>
                            <li>Photosynthesis</li>
                            <li>Cell division</li>
                            <li>Transport mechanisms</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üî¨ Begin Cell Biology Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="scienceFact"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="optionsContainer" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <div class="plant-cell-explorer">
                        <div class="diagram-title">Plant Cell Explorer</div>
                        <div class="plant-cell-container" id="plantCellContainer">
                            <!-- Plant cell organelles will be added by JavaScript -->
                        </div>
                        <div class="cell-controls">
                            <button class="btn btn-small btn-primary" onclick="showPlantCell()">Show Plant Cell</button>
                            <button class="btn btn-small btn-secondary" onclick="highlightNucleus()">Highlight Nucleus</button>
                            <button class="btn btn-small btn-accent" onclick="showChloroplasts()">Show Chloroplasts</button>
                            <button class="btn btn-small btn-orange" onclick="explainCellWall()">Explain Cell Wall</button>
                        </div>
                    </div>
                    
                    <div class="animal-cell-explorer">
                        <div class="diagram-title">Animal Cell Explorer</div>
                        <div class="animal-cell-container" id="animalCellContainer">
                            <!-- Animal cell organelles will be added by JavaScript -->
                        </div>
                        <div class="cell-controls">
                            <button class="btn btn-small btn-secondary" onclick="showAnimalCell()">Show Animal Cell</button>
                            <button class="btn btn-small btn-primary" onclick="highlightMitochondria()">Highlight Mitochondria</button>
                            <button class="btn btn-small btn-accent" onclick="showRibosomes()">Show Ribosomes</button>
                            <button class="btn btn-small btn-orange" onclick="explainCellMembrane()">Explain Membrane</button>
                        </div>
                    </div>
                    
                    <div class="organelles-explorer">
                        <div class="diagram-title">Cell Organelles & Functions</div>
                        <div class="organelles-container">
                            <div class="organelle-card nucleus" onclick="showOrganelleDetail('nucleus')">
                                <div class="organelle-title">Nucleus</div>
                                <div class="organelle-function">Control Center of Cell</div>
                                <div class="organelle-description">Contains DNA, controls cell activities, and regulates gene expression.</div>
                            </div>
                            <div class="organelle-card mitochondria" onclick="showOrganelleDetail('mitochondria')">
                                <div class="organelle-title">Mitochondria</div>
                                <div class="organelle-function">Powerhouse of Cell</div>
                                <div class="organelle-description">Produces ATP through cellular respiration, providing energy for cell functions.</div>
                            </div>
                            <div class="organelle-card chloroplast" onclick="showOrganelleDetail('chloroplast')">
                                <div class="organelle-title">Chloroplast</div>
                                <div class="organelle-function">Site of Photosynthesis</div>
                                <div class="organelle-description">Contains chlorophyll, converts sunlight into chemical energy (plant cells only).</div>
                            </div>
                            <div class="organelle-card ribosome" onclick="showOrganelleDetail('ribosome')">
                                <div class="organelle-title">Ribosome</div>
                                <div class="organelle-function">Protein Synthesis</div>
                                <div class="organelle-description">Reads RNA instructions to assemble amino acids into proteins.</div>
                            </div>
                        </div>
                        <div class="cell-controls">
                            <button class="btn btn-small btn-accent" onclick="showAllOrganelles()">Show All Organelles</button>
                            <button class="btn btn-small btn-outline" onclick="hideOrganelles()">Hide Labels</button>
                        </div>
                    </div>
                    
                    <div class="comparison-explorer">
                        <div class="diagram-title">Plant vs Animal Cell Comparison</div>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Plant Cell</th>
                                    <th>Animal Cell</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Cell Wall</td>
                                    <td class="feature-present">Present</td>
                                    <td class="feature-absent">Absent</td>
                                </tr>
                                <tr>
                                    <td>Chloroplasts</td>
                                    <td class="feature-present">Present</td>
                                    <td class="feature-absent">Absent</td>
                                </tr>
                                <tr>
                                    <td>Vacuole Size</td>
                                    <td>Large central vacuole</td>
                                    <td>Small vacuoles</td>
                                </tr>
                                <tr>
                                    <td>Shape</td>
                                    <td>Rectangular/rigid</td>
                                    <td>Round/flexible</td>
                                </tr>
                                <tr>
                                    <td>Lysosomes</td>
                                    <td class="feature-absent">Rare</td>
                                    <td class="feature-present">Common</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="cell-controls">
                            <button class="btn btn-small" style="background: var(--accent-yellow);" onclick="showSimilarities()">Show Similarities</button>
                            <button class="btn btn-small" style="background: var(--accent-teal);" onclick="showDifferences()">Show Differences</button>
                        </div>
                    </div>
                    
                    <div class="microscope-explorer">
                        <div class="diagram-title">Virtual Microscope</div>
                        <div class="microscope-container" id="microscopeContainer">
                            <div class="microscope-slide">
                                <div class="cell-view" id="cellView"></div>
                            </div>
                        </div>
                        <div class="magnification-control">
                            <span style="color: var(--text-secondary);">Magnification:</span>
                            <button class="btn btn-small btn-outline" onclick="changeMagnification(40)">40x</button>
                            <button class="btn btn-small btn-outline" onclick="changeMagnification(100)">100x</button>
                            <button class="btn btn-small btn-outline" onclick="changeMagnification(400)">400x</button>
                            <button class="btn btn-small btn-primary" onclick="changeSlide()">Change Slide</button>
                        </div>
                    </div>
                    
                    <div class="functions-explorer">
                        <div class="diagram-title">Essential Cell Functions</div>
                        <div class="functions-container">
                            <div class="function-card" onclick="showFunctionDetail('photosynthesis')">
                                <div class="function-title">Photosynthesis</div>
                                <div class="function-process">6CO‚ÇÇ + 6H‚ÇÇO + Light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ</div>
                                <div class="function-description">Process by which plants convert light energy into chemical energy (glucose).</div>
                            </div>
                            <div class="function-card" onclick="showFunctionDetail('respiration')">
                                <div class="function-title">Cellular Respiration</div>
                                <div class="function-process">C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ ‚Üí 6CO‚ÇÇ + 6H‚ÇÇO + ATP</div>
                                <div class="function-description">Process that releases energy from glucose to produce ATP for cell activities.</div>
                            </div>
                            <div class="function-card" onclick="showFunctionDetail('division')">
                                <div class="function-title">Cell Division</div>
                                <div class="function-process">Mitosis: 1 cell ‚Üí 2 identical cells</div>
                                <div class="function-description">Process by which cells multiply, essential for growth and repair.</div>
                            </div>
                            <div class="function-card" onclick="showFunctionDetail('transport')">
                                <div class="function-title">Cellular Transport</div>
                                <div class="function-process">Diffusion, Osmosis, Active Transport</div>
                                <div class="function-description">Movement of substances across cell membrane, maintaining homeostasis.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="division-explorer">
                        <div class="diagram-title">Cell Division Simulator</div>
                        <div class="division-container" id="divisionContainer">
                            <div class="division-stage" id="interphase">Interphase: Cell grows and DNA replicates</div>
                            <div class="division-stage" id="prophase">Prophase: Chromosomes condense</div>
                            <div class="division-stage" id="metaphase">Metaphase: Chromosomes align</div>
                            <div class="division-stage" id="anaphase">Anaphase: Chromosomes separate</div>
                            <div class="division-stage" id="telophase">Telophase: New nuclei form</div>
                            <div class="division-stage" id="cytokinesis">Cytokinesis: Cell divides</div>
                        </div>
                        <div class="cell-controls">
                            <button class="btn btn-small" style="background: var(--accent-pink);" onclick="startMitosis()">Start Mitosis</button>
                            <button class="btn btn-small btn-outline" onclick="resetDivision()">Reset</button>
                            <button class="btn btn-small btn-primary" onclick="explainMitosis()">Explain Steps</button>
                        </div>
                    </div>
                    
                    <div class="practice-problems">
                        <div class="diagram-title">Cell Biology Practice Problems</div>
                        <div class="problem-list">
                            <div class="problem-item" onclick="solveProblem(1)">
                                <div class="problem-number">1</div>
                                <div class="problem-text">Identify organelle: "Powerhouse of the cell"</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(2)">
                                <div class="problem-number">2</div>
                                <div class="problem-text">Which cell has chloroplasts: Plant or Animal?</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(3)">
                                <div class="problem-number">3</div>
                                <div class="problem-text">Write photosynthesis equation</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(4)">
                                <div class="problem-number">4</div>
                                <div class="problem-text">Function of ribosomes</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Cell Biology Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent Learning</div>
                    </div>
                </div>
                
                <div style="margin: 25px 0; padding: 15px; background: rgba(76, 175, 80, 0.1); border-radius: 10px;">
                    <h3 style="color: var(--primary-green); margin-bottom: 10px;">Cell Biology Skills Mastered</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem;">
                        You've built strong foundations in cell structure, organelle functions, and cellular processes. 
                        These concepts are fundamental to understanding all biological systems and living organisms!
                    </p>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Study Again</button>
                    <button class="btn btn-accent" id="viewTopics">Other Topics</button>
                    <button class="btn btn-secondary" onclick="showCellBiologyChallenge()">Cell Challenge</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Cell Biology
        const questions = [
            {
                question: "What is the basic structural and functional unit of all living organisms?",
                options: ["Cell", "Tissue", "Organ", "Molecule"],
                answer: "A",
                explanation: "The cell is the smallest unit of life that can carry out all life processes."
            },
            {
                question: "Which organelle is known as the 'powerhouse of the cell'?",
                options: ["Mitochondria", "Nucleus", "Ribosome", "Chloroplast"],
                answer: "A",
                explanation: "Mitochondria produce ATP through cellular respiration, providing energy for the cell."
            },
            {
                question: "Which structure is found in plant cells but not in animal cells?",
                options: ["Cell wall", "Cell membrane", "Mitochondria", "Nucleus"],
                answer: "A",
                explanation: "Plant cells have a rigid cell wall made of cellulose, while animal cells do not."
            },
            {
                question: "What is the function of the nucleus?",
                options: ["Control center of the cell", "Protein synthesis", "Energy production", "Storage of water"],
                answer: "A",
                explanation: "The nucleus contains DNA and controls all cell activities by regulating gene expression."
            },
            {
                question: "Which organelle is the site of photosynthesis in plant cells?",
                options: ["Chloroplast", "Mitochondria", "Vacuole", "Ribosome"],
                answer: "A",
                explanation: "Chloroplasts contain chlorophyll and convert light energy into chemical energy (glucose)."
            },
            {
                question: "What is the function of ribosomes?",
                options: ["Protein synthesis", "Energy production", "Cellular digestion", "DNA storage"],
                answer: "A",
                explanation: "Ribosomes read mRNA instructions and assemble amino acids into proteins."
            },
            {
                question: "Which term describes cells without a nucleus?",
                options: ["Prokaryotic", "Eukaryotic", "Multicellular", "Specialized"],
                answer: "A",
                explanation: "Prokaryotic cells (like bacteria) lack a nucleus, while eukaryotic cells have one."
            },
            {
                question: "What is the process by which cells divide to form two identical daughter cells?",
                options: ["Mitosis", "Meiosis", "Photosynthesis", "Respiration"],
                answer: "A",
                explanation: "Mitosis is cell division that results in two genetically identical daughter cells."
            },
            {
                question: "What is the function of the cell membrane?",
                options: ["Regulates what enters and leaves the cell", "Provides structural support", "Stores genetic material", "Produces proteins"],
                answer: "A",
                explanation: "The cell membrane is selectively permeable and controls the movement of substances."
            },
            {
                question: "Which organelle stores water, nutrients, and waste products?",
                options: ["Vacuole", "Nucleus", "Mitochondria", "Ribosome"],
                answer: "A",
                explanation: "Vacuoles are storage sacs within cells, especially large in plant cells."
            },
            {
                question: "What is the green pigment in chloroplasts that captures light energy?",
                options: ["Chlorophyll", "Carotene", "Xanthophyll", "Hemoglobin"],
                answer: "A",
                explanation: "Chlorophyll absorbs light energy for photosynthesis and gives plants their green color."
            },
            {
                question: "Which process converts glucose into ATP energy?",
                options: ["Cellular respiration", "Photosynthesis", "Mitosis", "Diffusion"],
                answer: "A",
                explanation: "Cellular respiration breaks down glucose to release energy stored as ATP."
            },
            {
                question: "What is diffusion?",
                options: ["Movement of molecules from high to low concentration", "Energy production in cells", "Cell division process", "Protein synthesis"],
                answer: "A",
                explanation: "Diffusion is the passive movement of particles from an area of high concentration to low concentration."
            },
            {
                question: "Which organelle contains digestive enzymes?",
                options: ["Lysosome", "Ribosome", "Chloroplast", "Vacuole"],
                answer: "A",
                explanation: "Lysosomes contain enzymes that break down waste materials and cellular debris."
            },
            {
                question: "What is osmosis?",
                options: ["Diffusion of water across a membrane", "Movement of ions", "Active transport", "Cell division"],
                answer: "A",
                explanation: "Osmosis is the diffusion of water molecules through a selectively permeable membrane."
            },
            {
                question: "Which cell structure is responsible for packaging and distributing proteins?",
                options: ["Golgi apparatus", "Nucleus", "Mitochondria", "Chloroplast"],
                answer: "A",
                explanation: "The Golgi apparatus modifies, sorts, and packages proteins for secretion."
            },
            {
                question: "What is the chemical equation for photosynthesis?",
                options: ["6CO‚ÇÇ + 6H‚ÇÇO + light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ", "C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ ‚Üí 6CO‚ÇÇ + 6H‚ÇÇO + ATP", "2H‚ÇÇO ‚Üí 2H‚ÇÇ + O‚ÇÇ", "CO‚ÇÇ + H‚ÇÇO ‚Üí H‚ÇÇCO‚ÇÉ"],
                answer: "A",
                explanation: "Photosynthesis converts carbon dioxide and water into glucose and oxygen using light energy."
            },
            {
                question: "Which type of cell has a cell wall?",
                options: ["Plant cell", "Animal cell", "Both plant and animal", "Neither"],
                answer: "A",
                explanation: "Only plant cells have a rigid cell wall made of cellulose."
            },
            {
                question: "What is the function of the endoplasmic reticulum?",
                options: ["Transport system within the cell", "Energy production", "Protein synthesis", "Cell division"],
                answer: "A",
                explanation: "The ER is a network of membranes that transports materials throughout the cell."
            },
            {
                question: "Which process requires energy to move molecules against concentration gradient?",
                options: ["Active transport", "Diffusion", "Osmosis", "Facilitated diffusion"],
                answer: "A",
                explanation: "Active transport uses energy (ATP) to move molecules from low to high concentration."
            },
            {
                question: "What is the function of chlorophyll?",
                options: ["Absorb light energy for photosynthesis", "Store genetic information", "Produce ATP", "Synthesize proteins"],
                answer: "A",
                explanation: "Chlorophyll absorbs light energy, which is converted to chemical energy during photosynthesis."
            },
            {
                question: "Which organelle is involved in lipid synthesis?",
                options: ["Smooth endoplasmic reticulum", "Rough endoplasmic reticulum", "Ribosome", "Nucleus"],
                answer: "A",
                explanation: "Smooth ER synthesizes lipids, while rough ER (with ribosomes) synthesizes proteins."
            },
            {
                question: "What is a tissue?",
                options: ["Group of similar cells working together", "Single cell", "Organ system", "Whole organism"],
                answer: "A",
                explanation: "Tissues are groups of similar cells that perform a specific function together."
            },
            {
                question: "Which process produces identical cells for growth and repair?",
                options: ["Mitosis", "Meiosis", "Photosynthesis", "Respiration"],
                answer: "A",
                explanation: "Mitosis produces genetically identical cells for growth, repair, and asexual reproduction."
            },
            {
                question: "What is biology?",
                options: ["Study of living organisms", "Study of chemicals", "Study of the earth", "Study of space"],
                answer: "A",
                explanation: "Biology is the scientific study of life and living organisms."
            }
        ];

        // Science facts
        const scienceFacts = [
            "The human body contains approximately 37.2 trillion cells.",
            "Robert Hooke discovered cells in 1665 when he looked at cork under a microscope.",
            "Mitochondria have their own DNA and were likely independent bacteria that formed symbiotic relationships with early cells.",
            "The largest cell in the world is the ostrich egg, which can weigh up to 1.5 kg.",
            "Nerve cells can be over 1 meter long, extending from the spinal cord to the toes.",
            "Red blood cells lack a nucleus, allowing more space to carry oxygen.",
            "Plant cells can communicate with each other through microscopic channels called plasmodesmata.",
            "The lifespan of cells varies: skin cells live about 2-3 weeks, while some nerve cells last a lifetime."
        ];

        // Topic details
        const topicDetails = {
            'cell-types': {
                title: "Cell Types",
                info: "Cells come in different types with specialized structures and functions."
            },
            'organelles': {
                title: "Cell Organelles",
                info: "Organelles are specialized structures within cells that perform specific functions."
            },
            'functions': {
                title: "Cell Functions",
                info: "Cells carry out essential processes that maintain life."
            }
        };

        // Organelles details
        const organellesDetails = {
            'nucleus': {
                title: "Nucleus",
                function: "Control center of the cell",
                description: "The nucleus contains the cell's genetic material (DNA) and controls all cellular activities by regulating gene expression. It's surrounded by a nuclear envelope with pores that allow materials to pass in and out.",
                analogy: "Like the brain of the cell",
                foundIn: "All eukaryotic cells (plant, animal, fungi)"
            },
            'mitochondria': {
                title: "Mitochondria",
                function: "Powerhouse of the cell",
                description: "Mitochondria produce ATP (adenosine triphosphate) through cellular respiration. They have their own DNA and were likely independent bacteria that became part of cells through endosymbiosis.",
                analogy: "Like the power plant of the cell",
                foundIn: "All eukaryotic cells"
            },
            'chloroplast': {
                title: "Chloroplast",
                function: "Site of photosynthesis",
                description: "Chloroplasts contain chlorophyll and convert light energy into chemical energy (glucose) through photosynthesis. Like mitochondria, they have their own DNA and originated through endosymbiosis.",
                analogy: "Like solar panels of plant cells",
                foundIn: "Plant cells and some algae"
            },
            'ribosome': {
                title: "Ribosome",
                function: "Protein synthesis",
                description: "Ribosomes read mRNA instructions and assemble amino acids into proteins. They can be free in the cytoplasm or attached to the rough endoplasmic reticulum.",
                analogy: "Like protein factories",
                foundIn: "All cells (prokaryotic and eukaryotic)"
            }
        };

        // Functions details
        const functionsDetails = {
            'photosynthesis': {
                title: "Photosynthesis",
                equation: "6CO‚ÇÇ + 6H‚ÇÇO + Light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ",
                description: "Process by which plants, algae, and some bacteria convert light energy into chemical energy stored in glucose. Occurs in chloroplasts.",
                steps: ["Light absorption by chlorophyll", "Water splitting (photolysis)", "Carbon dioxide fixation", "Glucose production"]
            },
            'respiration': {
                title: "Cellular Respiration",
                equation: "C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ ‚Üí 6CO‚ÇÇ + 6H‚ÇÇO + ATP",
                description: "Process that releases energy from glucose to produce ATP. Occurs in mitochondria.",
                steps: ["Glycolysis (cytoplasm)", "Krebs cycle (mitochondria)", "Electron transport chain (mitochondria)"]
            },
            'division': {
                title: "Cell Division (Mitosis)",
                process: "1 cell ‚Üí 2 identical daughter cells",
                description: "Essential for growth, repair, and asexual reproduction. Produces genetically identical cells.",
                stages: ["Interphase", "Prophase", "Metaphase", "Anaphase", "Telophase", "Cytokinesis"]
            },
            'transport': {
                title: "Cellular Transport",
                types: "Diffusion, Osmosis, Active Transport",
                description: "Movement of substances across cell membrane to maintain homeostasis.",
                examples: ["Oxygen entering cells (diffusion)", "Water balance (osmosis)", "Nutrient uptake (active transport)"]
            }
        };

        // Practice problems with solutions
        const practiceProblems = {
            1: {
                problem: "Identify organelle: 'Powerhouse of the cell'",
                solution: "Mitochondria - produces ATP through cellular respiration"
            },
            2: {
                problem: "Which cell has chloroplasts: Plant or Animal?",
                solution: "Plant cells - chloroplasts are only found in plant cells and some algae"
            },
            3: {
                problem: "Write photosynthesis equation",
                solution: "6CO‚ÇÇ + 6H‚ÇÇO + Light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ"
            },
            4: {
                problem: "Function of ribosomes",
                solution: "Protein synthesis - ribosomes assemble amino acids into proteins"
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentMagnification: 100,
            currentSlide: 'plant',
            mitosisStage: 0
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceFact = document.getElementById('scienceFact');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const plantCellContainer = document.getElementById('plantCellContainer');
        const animalCellContainer = document.getElementById('animalCellContainer');
        const microscopeContainer = document.getElementById('microscopeContainer');
        const cellView = document.getElementById('cellView');
        const divisionContainer = document.getElementById('divisionContainer');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            createPlantCell();
            createAnimalCell();
            setupMicroscope();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a cell biology expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand cell structure and functions well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of cell biology!";
            } else {
                scoreMessage.textContent = "Keep practicing! Biology takes visualization - try again!";
            }
        }

        // Create science fact display
        function createScienceFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'science-fact';
            factDiv.innerHTML = `<strong>Biology Fact:</strong> ${scienceFacts[Math.floor(Math.random() * scienceFacts.length)]}`;
            return factDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceFact.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceFact.appendChild(createScienceFact());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying cell biology!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Interactive functions
        window.showTopicDetails = function(topic) {
            const topicInfo = topicDetails[topic];
            if (!topicInfo) return;
            
            let info = `${topicInfo.title}\n\n`;
            info += `${topicInfo.info}\n\n`;
            
            if (topic === 'cell-types') {
                info += "Main Cell Types:\n";
                info += "1. Plant Cells:\n";
                info += "   ‚Ä¢ Have cell wall and chloroplasts\n";
                info += "   ‚Ä¢ Large central vacuole\n";
                info += "   ‚Ä¢ Rectangular shape\n\n";
                info += "2. Animal Cells:\n";
                info += "   ‚Ä¢ No cell wall or chloroplasts\n";
                info += "   ‚Ä¢ Small vacuoles\n";
                info += "   ‚Ä¢ Round/irregular shape\n\n";
                info += "3. Prokaryotic Cells (Bacteria):\n";
                info += "   ‚Ä¢ No nucleus\n";
                info += "   ‚Ä¢ Simpler structure\n";
                info += "   ‚Ä¢ Smaller size";
            } else if (topic === 'organelles') {
                info += "Key Organelles:\n";
                info += "‚Ä¢ Nucleus: Control center, contains DNA\n";
                info += "‚Ä¢ Mitochondria: Energy production (ATP)\n";
                info += "‚Ä¢ Chloroplasts: Photosynthesis (plants only)\n";
                info += "‚Ä¢ Ribosomes: Protein synthesis\n";
                info += "‚Ä¢ Endoplasmic Reticulum: Transport system\n";
                info += "‚Ä¢ Golgi Apparatus: Protein packaging\n";
                info += "‚Ä¢ Lysosomes: Cellular digestion\n";
                info += "‚Ä¢ Vacuoles: Storage\n";
                info += "‚Ä¢ Cell Membrane: Boundary control";
            } else if (topic === 'functions') {
                info += "Essential Cell Functions:\n";
                info += "1. Photosynthesis:\n";
                info += "   Plants: Light ‚Üí Chemical energy\n";
                info += "   Equation: 6CO‚ÇÇ + 6H‚ÇÇO ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ\n\n";
                info += "2. Cellular Respiration:\n";
                info += "   All cells: Glucose ‚Üí ATP energy\n";
                info += "   Equation: C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ ‚Üí 6CO‚ÇÇ + 6H‚ÇÇO + ATP\n\n";
                info += "3. Cell Division:\n";
                info += "   Mitosis: Growth and repair\n";
                info += "   Meiosis: Sexual reproduction\n\n";
                info += "4. Cellular Transport:\n";
                info += "   Diffusion, Osmosis, Active transport";
            }
            
            alert(info);
        };

        // Plant cell functions
        function createPlantCell() {
            plantCellContainer.innerHTML = '';
            
            // Create cell wall
            const cellWall = document.createElement('div');
            cellWall.className = 'cell-wall';
            plantCellContainer.appendChild(cellWall);
            
            // Create cell membrane
            const cellMembrane = document.createElement('div');
            cellMembrane.className = 'cell-membrane';
            plantCellContainer.appendChild(cellMembrane);
            
            // Create nucleus
            const nucleus = document.createElement('div');
            nucleus.className = 'nucleus floating';
            nucleus.style.top = '40%';
            nucleus.style.left = '40%';
            nucleus.addEventListener('click', () => showOrganelleDetail('nucleus'));
            plantCellContainer.appendChild(nucleus);
            
            // Add nucleus label
            const nucleusLabel = document.createElement('div');
            nucleusLabel.className = 'organelle-label';
            nucleusLabel.textContent = 'Nucleus';
            nucleusLabel.style.top = '35%';
            nucleusLabel.style.left = '45%';
            plantCellContainer.appendChild(nucleusLabel);
            
            // Create chloroplasts (3)
            for (let i = 0; i < 3; i++) {
                const chloroplast = document.createElement('div');
                chloroplast.className = 'chloroplast floating';
                chloroplast.style.top = `${20 + i * 20}%`;
                chloroplast.style.left = `${60 + i * 5}%`;
                chloroplast.addEventListener('click', () => showOrganelleDetail('chloroplast'));
                plantCellContainer.appendChild(chloroplast);
                
                if (i === 1) {
                    const chloroplastLabel = document.createElement('div');
                    chloroplastLabel.className = 'organelle-label';
                    chloroplastLabel.textContent = 'Chloroplast';
                    chloroplastLabel.style.top = '15%';
                    chloroplastLabel.style.left = '70%';
                    plantCellContainer.appendChild(chloroplastLabel);
                }
            }
            
            // Create mitochondria (2)
            for (let i = 0; i < 2; i++) {
                const mitochondria = document.createElement('div');
                mitochondria.className = 'mitochondria floating';
                mitochondria.style.top = `${60 + i * 10}%`;
                mitochondria.style.left = `${20 + i * 15}%`;
                mitochondria.addEventListener('click', () => showOrganelleDetail('mitochondria'));
                plantCellContainer.appendChild(mitochondria);
                
                if (i === 0) {
                    const mitochondriaLabel = document.createElement('div');
                    mitochondriaLabel.className = 'organelle-label';
                    mitochondriaLabel.textContent = 'Mitochondria';
                    mitochondriaLabel.style.top = '55%';
                    mitochondriaLabel.style.left = '25%';
                    plantCellContainer.appendChild(mitochondriaLabel);
                }
            }
            
            // Create large central vacuole
            const vacuole = document.createElement('div');
            vacuole.className = 'vacuole';
            vacuole.style.top = '25%';
            vacuole.style.left = '25%';
            plantCellContainer.appendChild(vacuole);
            
            const vacuoleLabel = document.createElement('div');
            vacuoleLabel.className = 'organelle-label';
            vacuoleLabel.textContent = 'Vacuole';
            vacuoleLabel.style.top = '30%';
            vacuoleLabel.style.left = '30%';
            plantCellContainer.appendChild(vacuoleLabel);
        }

        // Animal cell functions
        function createAnimalCell() {
            animalCellContainer.innerHTML = '';
            
            // Create cell membrane (no cell wall)
            const cellMembrane = document.createElement('div');
            cellMembrane.className = 'cell-membrane cell-pulse';
            cellMembrane.style.width = '90%';
            cellMembrane.style.height = '90%';
            cellMembrane.style.top = '5%';
            cellMembrane.style.left = '5%';
            animalCellContainer.appendChild(cellMembrane);
            
            // Create nucleus
            const nucleus = document.createElement('div');
            nucleus.className = 'nucleus floating';
            nucleus.style.top = '45%';
            nucleus.style.left = '45%';
            nucleus.addEventListener('click', () => showOrganelleDetail('nucleus'));
            animalCellContainer.appendChild(nucleus);
            
            const nucleusLabel = document.createElement('div');
            nucleusLabel.className = 'organelle-label';
            nucleusLabel.textContent = 'Nucleus';
            nucleusLabel.style.top = '40%';
            nucleusLabel.style.left = '50%';
            animalCellContainer.appendChild(nucleusLabel);
            
            // Create mitochondria (3)
            for (let i = 0; i < 3; i++) {
                const mitochondria = document.createElement('div');
                mitochondria.className = 'mitochondria floating';
                mitochondria.style.top = `${30 + i * 20}%`;
                mitochondria.style.left = `${20 + i * 15}%`;
                mitochondria.addEventListener('click', () => showOrganelleDetail('mitochondria'));
                animalCellContainer.appendChild(mitochondria);
            }
            
            // Add mitochondria label
            const mitochondriaLabel = document.createElement('div');
            mitochondriaLabel.className = 'organelle-label';
            mitochondriaLabel.textContent = 'Mitochondria';
            mitochondriaLabel.style.top = '25%';
            mitochondriaLabel.style.left = '30%';
            animalCellContainer.appendChild(mitochondriaLabel);
            
            // Create small vacuoles (2)
            for (let i = 0; i < 2; i++) {
                const vacuole = document.createElement('div');
                vacuole.className = 'vacuole';
                vacuole.style.width = '40px';
                vacuole.style.height = '40px';
                vacuole.style.top = `${60 + i * 10}%`;
                vacuole.style.left = `${60 + i * 5}%`;
                animalCellContainer.appendChild(vacuole);
            }
            
            const vacuoleLabel = document.createElement('div');
            vacuoleLabel.className = 'organelle-label';
            vacuoleLabel.textContent = 'Vacuoles';
            vacuoleLabel.style.top = '65%';
            vacuoleLabel.style.left = '65%';
            animalCellContainer.appendChild(vacuoleLabel);
            
            // Create lysosomes (2)
            for (let i = 0; i < 2; i++) {
                const lysosome = document.createElement('div');
                lysosome.className = 'chloroplast'; // Reusing style
                lysosome.style.background = '#FF5722';
                lysosome.style.width = '20px';
                lysosome.style.height = '20px';
                lysosome.style.top = `${40 + i * 15}%`;
                lysosome.style.left = `${70 + i * 5}%`;
                animalCellContainer.appendChild(lysosome);
            }
            
            const lysosomeLabel = document.createElement('div');
            lysosomeLabel.className = 'organelle-label';
            lysosomeLabel.textContent = 'Lysosomes';
            lysosomeLabel.style.top = '45%';
            lysosomeLabel.style.left = '75%';
            animalCellContainer.appendChild(lysosomeLabel);
        }

        // Cell display functions
        window.showPlantCell = function() {
            createPlantCell();
            alert("Plant Cell Structure:\n\n‚Ä¢ Cell Wall: Rigid outer layer (cellulose)\n‚Ä¢ Chloroplasts: Green organelles for photosynthesis\n‚Ä¢ Large Central Vacuole: Stores water and nutrients\n‚Ä¢ Rectangular Shape: Due to cell wall");
        };

        window.showAnimalCell = function() {
            createAnimalCell();
            alert("Animal Cell Structure:\n\n‚Ä¢ No Cell Wall: Flexible shape\n‚Ä¢ Many Mitochondria: High energy needs\n‚Ä¢ Small Vacuoles: Multiple small storage sacs\n‚Ä¢ Lysosomes: Contain digestive enzymes\n‚Ä¢ Round/Irregular Shape: Flexible membrane");
        };

        window.highlightNucleus = function() {
            const nuclei = document.querySelectorAll('.nucleus');
            nuclei.forEach(nucleus => {
                nucleus.style.boxShadow = '0 0 20px 5px var(--accent-yellow)';
                nucleus.style.transition = 'box-shadow 0.5s ease';
            });
            
            setTimeout(() => {
                nuclei.forEach(nucleus => {
                    nucleus.style.boxShadow = 'none';
                });
            }, 2000);
            
            showOrganelleDetail('nucleus');
        };

        window.highlightMitochondria = function() {
            const mitochondria = document.querySelectorAll('.mitochondria');
            mitochondria.forEach(mito => {
                mito.style.boxShadow = '0 0 15px 5px var(--accent-red)';
                mito.style.transition = 'box-shadow 0.5s ease';
            });
            
            setTimeout(() => {
                mitochondria.forEach(mito => {
                    mito.style.boxShadow = 'none';
                });
            }, 2000);
            
            showOrganelleDetail('mitochondria');
        };

        window.showChloroplasts = function() {
            const chloroplasts = document.querySelectorAll('.chloroplast');
            chloroplasts.forEach(chloro => {
                chloro.style.boxShadow = '0 0 15px 5px var(--accent-teal)';
                chloro.style.transition = 'box-shadow 0.5s ease';
            });
            
            setTimeout(() => {
                chloroplasts.forEach(chloro => {
                    chloro.style.boxShadow = 'none';
                });
            }, 2000);
            
            showOrganelleDetail('chloroplast');
        };

        window.showRibosomes = function() {
            // Add ribosomes to cells
            const plantRibosomes = [
                {top: '50%', left: '30%'},
                {top: '70%', left: '50%'},
                {top: '30%', left: '20%'}
            ];
            
            const animalRibosomes = [
                {top: '35%', left: '40%'},
                {top: '55%', left: '35%'},
                {top: '45%', left: '60%'}
            ];
            
            // Add to plant cell
            plantRibosomes.forEach(pos => {
                const ribosome = document.createElement('div');
                ribosome.className = 'chloroplast'; // Reusing style
                ribosome.style.background = 'var(--primary-orange)';
                ribosome.style.width = '15px';
                ribosome.style.height = '15px';
                ribosome.style.top = pos.top;
                ribosome.style.left = pos.left;
                plantCellContainer.appendChild(ribosome);
            });
            
            // Add to animal cell
            animalRibosomes.forEach(pos => {
                const ribosome = document.createElement('div');
                ribosome.className = 'chloroplast'; // Reusing style
                ribosome.style.background = 'var(--primary-orange)';
                ribosome.style.width = '15px';
                ribosome.style.height = '15px';
                ribosome.style.top = pos.top;
                ribosome.style.left = pos.left;
                animalCellContainer.appendChild(ribosome);
            });
            
            // Add label
            const ribosomeLabel = document.createElement('div');
            ribosomeLabel.className = 'organelle-label';
            ribosomeLabel.textContent = 'Ribosomes';
            ribosomeLabel.style.top = '75%';
            ribosomeLabel.style.left = '40%';
            plantCellContainer.appendChild(ribosomeLabel);
            
            animalCellContainer.appendChild(ribosomeLabel.cloneNode(true));
            
            alert("Ribosomes:\n\n‚Ä¢ Function: Protein synthesis\n‚Ä¢ Location: Free in cytoplasm or attached to rough ER\n‚Ä¢ Structure: Made of RNA and proteins\n‚Ä¢ Size: Very small (20-30 nm)\n‚Ä¢ Found in: All cells (prokaryotic and eukaryotic)");
        };

        window.explainCellWall = function() {
            alert("Cell Wall (Plant Cells):\n\n‚Ä¢ Function: Provides structural support and protection\n‚Ä¢ Composition: Made of cellulose (a carbohydrate)\n‚Ä¢ Permeability: Fully permeable\n‚Ä¢ Additional layers: Middle lamella (between cells) and secondary wall (in some cells)\n‚Ä¢ Difference from membrane: Rigid vs flexible");
        };

        window.explainCellMembrane = function() {
            alert("Cell Membrane (All Cells):\n\n‚Ä¢ Function: Regulates what enters and leaves the cell (selectively permeable)\n‚Ä¢ Structure: Phospholipid bilayer with proteins\n‚Ä¢ Components: Lipids (phospholipids), proteins, carbohydrates\n‚Ä¢ Model: Fluid mosaic model\n‚Ä¢ Transport: Diffusion, osmosis, active transport, facilitated diffusion");
        };

        // Organelles details
        window.showOrganelleDetail = function(organelle) {
            const organelleInfo = organellesDetails[organelle];
            if (!organelleInfo) return;
            
            let info = `${organelleInfo.title}\n\n`;
            info += `Function: ${organelleInfo.function}\n\n`;
            info += `Description: ${organelleInfo.description}\n\n`;
            info += `Analogy: ${organelleInfo.analogy}\n\n`;
            info += `Found in: ${organelleInfo.foundIn}`;
            
            alert(info);
        };

        window.showAllOrganelles = function() {
            let info = "Major Cell Organelles:\n\n";
            
            Object.values(organellesDetails).forEach(organelle => {
                info += `${organelle.title}: ${organelle.function}\n`;
            });
            
            info += "\nAdditional Organelles:\n";
            info += "‚Ä¢ Endoplasmic Reticulum: Transport system\n";
            info += "‚Ä¢ Golgi Apparatus: Protein packaging\n";
            info += "‚Ä¢ Lysosomes: Cellular digestion\n";
            info += "‚Ä¢ Vacuoles: Storage\n";
            info += "‚Ä¢ Cytoskeleton: Cell shape and movement\n";
            info += "‚Ä¢ Centrioles: Cell division (animal cells)";
            
            alert(info);
        };

        window.hideOrganelles = function() {
            const labels = document.querySelectorAll('.organelle-label');
            labels.forEach(label => {
                label.style.display = label.style.display === 'none' ? 'block' : 'none';
            });
            
            alert(labels[0].style.display === 'none' ? 
                  "Organelle labels hidden. Click again to show." : 
                  "Organelle labels shown.");
        };

        // Comparison functions
        window.showSimilarities = function() {
            alert("Plant & Animal Cell Similarities:\n\n‚Ä¢ Both are eukaryotic (have nucleus)\n‚Ä¢ Both have cell membrane\n‚Ä¢ Both have mitochondria\n‚Ä¢ Both have endoplasmic reticulum\n‚Ä¢ Both have Golgi apparatus\n‚Ä¢ Both have ribosomes\n‚Ä¢ Both have cytoplasm\n‚Ä¢ Both have nucleus with DNA\n‚Ä¢ Both carry out cellular respiration");
        };

        window.showDifferences = function() {
            alert("Plant vs Animal Cell Differences:\n\nPLANT CELLS:\n‚Ä¢ Have cell wall (cellulose)\n‚Ä¢ Have chloroplasts (photosynthesis)\n‚Ä¢ Large central vacuole\n‚Ä¢ Rectangular/rigid shape\n‚Ä¢ Store starch\n‚Ä¢ No centrioles (usually)\n\nANIMAL CELLS:\n‚Ä¢ No cell wall\n‚Ä¢ No chloroplasts\n‚Ä¢ Many small vacuoles\n‚Ä¢ Round/flexible shape\n‚Ä¢ Store glycogen\n‚Ä¢ Have centrioles (cell division)");
        };

        // Microscope functions
        function setupMicroscope() {
            changeMagnification(100);
        }

        window.changeMagnification = function(magnification) {
            appState.currentMagnification = magnification;
            
            cellView.innerHTML = '';
            cellView.style.transform = `scale(${magnification / 100})`;
            
            if (appState.currentSlide === 'plant') {
                // Show plant cell
                cellView.innerHTML = `
                    <div style="position: absolute; width: 80px; height: 80px; border: 2px solid #4CAF50; border-radius: 50%; top: 50px; left: 50px;"></div>
                    <div style="position: absolute; width: 20px; height: 20px; background: #FFC107; border-radius: 50%; top: 70px; left: 80px;"></div>
                    <div style="position: absolute; width: 15px; height: 15px; background: #009688; border-radius: 50%; top: 40px; left: 60px;"></div>
                    <div style="position: absolute; width: 10px; height: 10px; background: #F44336; border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; top: 60px; left: 100px;"></div>
                `;
                
                if (magnification >= 400) {
                    cellView.innerHTML += `
                        <div style="position: absolute; color: white; font-size: 8px; top: 30px; left: 50px;">Cell Wall</div>
                        <div style="position: absolute; color: white; font-size: 8px; top: 65px; left: 85px;">Nucleus</div>
                        <div style="position: absolute; color: white; font-size: 8px; top: 35px; left: 65px;">Chloroplast</div>
                    `;
                }
            } else {
                // Show animal cell
                cellView.innerHTML = `
                    <div style="position: absolute; width: 80px; height: 80px; border: 2px solid #E91E63; border-radius: 50%; top: 50px; left: 50px;"></div>
                    <div style="position: absolute; width: 20px; height: 20px; background: #FFC107; border-radius: 50%; top: 70px; left: 80px;"></div>
                    <div style="position: absolute; width: 10px; height: 10px; background: #F44336; border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; top: 50px; left: 60px;"></div>
                    <div style="position: absolute; width: 10px; height: 10px; background: #F44336; border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; top: 80px; left: 100px;"></div>
                    <div style="position: absolute; width: 15px; height: 15px; background: #FF5722; border-radius: 50%; top: 40px; left: 100px;"></div>
                `;
                
                if (magnification >= 400) {
                    cellView.innerHTML += `
                        <div style="position: absolute; color: white; font-size: 8px; top: 30px; left: 50px;">Cell Membrane</div>
                        <div style="position: absolute; color: white; font-size: 8px; top: 65px; left: 85px;">Nucleus</div>
                        <div style="position: absolute; color: white; font-size: 8px; top: 45px; left: 65px;">Mitochondria</div>
                        <div style="position: absolute; color: white; font-size: 8px; top: 35px; left: 105px;">Lysosome</div>
                    `;
                }
            }
            
            alert(`Microscope set to ${magnification}x magnification.\n\n${appState.currentSlide === 'plant' ? 'Viewing plant cell slide' : 'Viewing animal cell slide'}`);
        };

        window.changeSlide = function() {
            appState.currentSlide = appState.currentSlide === 'plant' ? 'animal' : 'plant';
            changeMagnification(appState.currentMagnification);
        };

        // Functions details
        window.showFunctionDetail = function(func) {
            const funcInfo = functionsDetails[func];
            if (!funcInfo) return;
            
            let info = `${funcInfo.title}\n\n`;
            
            if (funcInfo.equation) {
                info += `Equation: ${funcInfo.equation}\n\n`;
            } else if (funcInfo.process) {
                info += `Process: ${funcInfo.process}\n\n`;
            } else if (funcInfo.types) {
                info += `Types: ${funcInfo.types}\n\n`;
            }
            
            info += `Description: ${funcInfo.description}\n\n`;
            
            if (funcInfo.steps || funcInfo.examples) {
                const steps = funcInfo.steps || funcInfo.examples;
                info += `${funcInfo.steps ? 'Steps:' : 'Examples:'}\n`;
                steps.forEach((step, index) => {
                    info += `${index + 1}. ${step}\n`;
                });
            }
            
            alert(info);
        };

        // Cell division functions
        window.startMitosis = function() {
            const stages = ['interphase', 'prophase', 'metaphase', 'anaphase', 'telophase', 'cytokinesis'];
            appState.mitosisStage = 0;
            
            divisionContainer.innerHTML = '';
            
            function showNextStage() {
                if (appState.mitosisStage >= stages.length) {
                    divisionContainer.innerHTML = '<div style="color: white; text-align: center; margin-top: 80px;">Mitosis Complete!<br>2 identical daughter cells formed</div>';
                    return;
                }
                
                const stage = stages[appState.mitosisStage];
                const stageDiv = document.createElement('div');
                stageDiv.className = 'division-stage';
                stageDiv.id = stage;
                stageDiv.style.display = 'block';
                stageDiv.style.color = 'white';
                stageDiv.style.fontWeight = 'bold';
                stageDiv.style.textAlign = 'center';
                stageDiv.style.marginTop = '80px';
                
                let content = '';
                switch(stage) {
                    case 'interphase':
                        content = 'Interphase: Cell grows and DNA replicates';
                        stageDiv.style.color = '#4CAF50';
                        break;
                    case 'prophase':
                        content = 'Prophase: Chromosomes condense and become visible';
                        stageDiv.style.color = '#2196F3';
                        break;
                    case 'metaphase':
                        content = 'Metaphase: Chromosomes align at cell equator';
                        stageDiv.style.color = '#9C27B0';
                        break;
                    case 'anaphase':
                        content = 'Anaphase: Sister chromatids separate and move to poles';
                        stageDiv.style.color = '#FF9800';
                        break;
                    case 'telophase':
                        content = 'Telophase: New nuclear membranes form';
                        stageDiv.style.color = '#E91E63';
                        break;
                    case 'cytokinesis':
                        content = 'Cytokinesis: Cytoplasm divides, forming two cells';
                        stageDiv.style.color = '#00BCD4';
                        break;
                }
                
                stageDiv.textContent = content;
                divisionContainer.appendChild(stageDiv);
                
                appState.mitosisStage++;
                setTimeout(showNextStage, 2000);
            }
            
            showNextStage();
        };

        window.resetDivision = function() {
            divisionContainer.innerHTML = '<div style="color: var(--text-secondary); text-align: center; margin-top: 80px;">Click "Start Mitosis" to begin cell division simulation</div>';
            appState.mitosisStage = 0;
        };

        window.explainMitosis = function() {
            alert("Mitosis: Cell Division for Growth & Repair\n\nStages:\n\n1. Interphase: Cell grows, DNA replicates (not part of mitosis but prepares for it)\n2. Prophase: Chromosomes condense, nuclear envelope breaks down\n3. Metaphase: Chromosomes line up at cell's equator\n4. Anaphase: Sister chromatids separate and move to opposite poles\n5. Telophase: New nuclear envelopes form around chromosomes\n6. Cytokinesis: Cytoplasm divides, forming two identical daughter cells\n\nResult: 2 genetically identical cells from 1 parent cell");
        };

        // Practice problems
        window.solveProblem = function(problemNum) {
            const problem = practiceProblems[problemNum];
            if (!problem) return;
            
            const answer = prompt(`Solve: ${problem.problem}\n\nEnter your answer:`);
            if (answer) {
                let correct = false;
                
                if (problemNum === 1 && answer.toLowerCase().includes("mitochondria")) {
                    correct = true;
                } else if (problemNum === 2 && answer.toLowerCase().includes("plant")) {
                    correct = true;
                } else if (problemNum === 3 && (answer.includes("6CO‚ÇÇ") || answer.includes("C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ") || answer.toLowerCase().includes("photosynthesis"))) {
                    correct = true;
                } else if (problemNum === 4 && answer.toLowerCase().includes("protein")) {
                    correct = true;
                }
                
                if (correct) {
                    alert(`‚úÖ Correct!\n\n${problem.solution}`);
                } else {
                    alert(`‚ùå Not quite right.\n\nCorrect solution:\n${problem.solution}`);
                }
            }
        };

        // Cell biology challenge
        window.showCellBiologyChallenge = function() {
            const challenges = [
                "Challenge 1: Compare and contrast plant and animal cells (3 similarities, 3 differences).",
                "Challenge 2: Trace the path of a protein from DNA instruction to export from cell.",
                "Challenge 3: Explain how photosynthesis and cellular respiration are interconnected.",
                "Challenge 4: Describe what would happen to a plant cell and an animal cell if placed in pure water."
            ];
            
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            let info = "üî¨ Cell Biology Challenge üî¨\n\n";
            info += randomChallenge + "\n\n";
            info += "Use your cell biology knowledge to solve it!\n\n";
            info += "Sample Answers:\n";
            info += "1. Similar: nucleus, mitochondria, cell membrane. Different: plant has cell wall, chloroplasts, large vacuole\n";
            info += "2. DNA ‚Üí transcription ‚Üí mRNA ‚Üí ribosome ‚Üí protein ‚Üí ER ‚Üí Golgi ‚Üí vesicle ‚Üí export\n";
            info += "3. Photosynthesis makes glucose and O‚ÇÇ, respiration uses them to make ATP, CO‚ÇÇ, H‚ÇÇO\n";
            info += "4. Plant: becomes turgid (normal). Animal: may burst (cytolysis)";
            
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
