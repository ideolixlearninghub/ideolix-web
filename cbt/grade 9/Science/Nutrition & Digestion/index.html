<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 9 Science - Nutrition & Digestion | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Nutrition Theme */
        :root {
            --nutrition-blue: #2196F3;
            --digestion-green: #4CAF50;
            --enzymes-purple: #9C27B0;
            --health-orange: #FF9800;
            --systems-red: #F44336;
            --applications-teal: #009688;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --nutrition-glow: 0 0 20px rgba(33, 150, 243, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(156, 39, 176, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--nutrition-blue), var(--digestion-green), var(--enzymes-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--nutrition-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--nutrition-blue);
        }

        /* Nutrition Symbols */
        .nutrition-symbol {
            font-family: 'Cambria Math', 'Times New Roman', serif;
            font-weight: bold;
        }

        .nutrient {
            color: var(--digestion-green);
            font-weight: bold;
        }

        .enzyme {
            color: var(--enzymes-purple);
            font-style: italic;
        }

        /* Concepts Grid */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin: 25px 0;
        }

        @media (max-width: 768px) {
            .concepts-grid {
                grid-template-columns: 1fr;
            }
        }

        .concept-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .concept-card.nutrients {
            border-color: var(--nutrition-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .concept-card.digestion {
            border-color: var(--digestion-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .concept-card.enzymes {
            border-color: var(--enzymes-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .concept-card.health {
            border-color: var(--health-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .concept-card.systems {
            border-color: var(--systems-red);
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.1), transparent);
        }

        .concept-card.applications {
            border-color: var(--applications-teal);
            background: linear-gradient(135deg, rgba(0, 150, 136, 0.1), transparent);
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .concept-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .concept-card.nutrients .concept-title {
            color: var(--nutrition-blue);
        }

        .concept-card.digestion .concept-title {
            color: var(--digestion-green);
        }

        .concept-card.enzymes .concept-title {
            color: var(--enzymes-purple);
        }

        .concept-card.health .concept-title {
            color: var(--health-orange);
        }

        .concept-card.systems .concept-title {
            color: var(--systems-red);
        }

        .concept-card.applications .concept-title {
            color: var(--applications-teal);
        }

        .concept-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
            flex-grow: 1;
        }

        .concept-examples {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .concept-examples h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-list {
            list-style-type: none;
        }

        .example-list li {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
        }

        .example-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--nutrition-blue);
            font-weight: bold;
        }

        /* Input Group */
        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--nutrition-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--nutrition-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-green {
            background: var(--digestion-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-green:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-purple {
            background: var(--enzymes-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-purple:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--nutrition-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--nutrition-blue), var(--digestion-green), var(--enzymes-purple));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .nutrition-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--health-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--nutrition-blue);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--digestion-green);
            color: var(--digestion-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--systems-red);
            color: var(--systems-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--nutrition-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--digestion-green);
        }

        .option.incorrect .option-letter {
            background: var(--systems-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--digestion-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--systems-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--digestion-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--systems-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--digestion-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--systems-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 800px;
        }

        /* Nutrition Visualizers */
        .nutrition-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid;
        }

        .visualizer-title {
            color: inherit;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .nutrition-example {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-size: 1rem;
            line-height: 1.5;
            text-align: center;
        }

        .highlight-nutrition {
            background: rgba(255, 193, 7, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Digestive System Diagram */
        .digestive-container {
            width: 100%;
            height: 300px;
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
            border: 1px solid var(--dark-border);
            overflow: hidden;
        }

        .organ-label {
            position: absolute;
            padding: 4px 8px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 4px;
            font-size: 0.8rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .organ-label:hover {
            background: var(--digestion-green);
            transform: scale(1.1);
        }

        .mouth {
            position: absolute;
            width: 40px;
            height: 30px;
            background: var(--nutrition-blue);
            border-radius: 20px 20px 0 0;
            top: 20%;
            left: 10%;
            cursor: pointer;
        }

        .esophagus {
            position: absolute;
            width: 20px;
            height: 80px;
            background: var(--health-orange);
            top: calc(20% + 30px);
            left: 15%;
            cursor: pointer;
        }

        .stomach {
            position: absolute;
            width: 60px;
            height: 40px;
            background: var(--digestion-green);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            top: 35%;
            left: 25%;
            cursor: pointer;
        }

        .small-intestine {
            position: absolute;
            width: 120px;
            height: 20px;
            background: var(--enzymes-purple);
            border-radius: 10px;
            top: 50%;
            left: 40%;
            cursor: pointer;
        }

        .large-intestine {
            position: absolute;
            width: 80px;
            height: 60px;
            background: var(--systems-red);
            border: 8px solid transparent;
            border-top: 8px solid var(--systems-red);
            border-right: 8px solid var(--systems-red);
            border-radius: 0 30px 30px 0;
            top: 45%;
            left: 60%;
            cursor: pointer;
        }

        .liver {
            position: absolute;
            width: 40px;
            height: 30px;
            background: var(--applications-teal);
            border-radius: 10px;
            top: 25%;
            left: 35%;
            cursor: pointer;
        }

        .pancreas {
            position: absolute;
            width: 25px;
            height: 15px;
            background: #FF9800;
            border-radius: 5px;
            top: 40%;
            left: 35%;
            cursor: pointer;
        }

        /* Nutrition Wheel */
        .nutrition-wheel {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
        }

        .wheel-segment {
            position: absolute;
            width: 100%;
            height: 100%;
            clip-path: polygon(50% 50%, 100% 0, 100% 100%);
            transform-origin: 50% 50%;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .wheel-segment:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .wheel-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background: var(--dark-surface);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--text-primary);
            z-index: 10;
        }

        /* Enzyme Action Simulator */
        .enzyme-simulator {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--enzymes-purple);
        }

        .simulator-area {
            width: 100%;
            height: 150px;
            background: var(--dark-surface);
            border-radius: 6px;
            margin: 10px 0;
            position: relative;
            border: 2px solid var(--dark-border);
            overflow: hidden;
        }

        .molecule {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            transition: all 0.5s ease;
        }

        /* Food Pyramid */
        .pyramid-container {
            width: 100%;
            height: 200px;
            margin: 20px 0;
            position: relative;
        }

        .pyramid-level {
            position: absolute;
            left: 0;
            right: 0;
            margin: 0 auto;
            background: var(--dark-surface);
            border: 2px solid;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pyramid-level:hover {
            transform: scale(1.05);
        }

        /* Nutrient Calculator */
        .calculator-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--nutrition-blue);
        }

        .calculator-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-size: 1rem;
            line-height: 1.6;
            min-height: 100px;
        }

        /* Comparison Table */
        .comparison-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--systems-red);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-card);
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 2px solid var(--systems-red);
            color: var(--systems-red);
        }

        .comparison-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        .comparison-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Health Assessment */
        .assessment-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--health-orange);
        }

        .assessment-question {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-size: 1rem;
            line-height: 1.5;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--nutrition-blue), var(--digestion-green), var(--enzymes-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--nutrition-blue), var(--digestion-green), var(--enzymes-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--nutrition-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Nutrition Badge */
        .nutrition-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 8px;
            text-transform: uppercase;
        }

        .nutrients-badge {
            background: rgba(33, 150, 243, 0.2);
            color: var(--nutrition-blue);
        }

        .digestion-badge {
            background: rgba(76, 175, 80, 0.2);
            color: var(--digestion-green);
        }

        .enzymes-badge {
            background: rgba(156, 39, 176, 0.2);
            color: var(--enzymes-purple);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: rgba(33, 150, 243, 0.2); }
            100% { background-color: transparent; }
        }

        .highlight {
            animation: highlight 1s ease;
        }

        @keyframes digest {
            0% { transform: scale(1); }
            50% { transform: scale(0.8); }
            100% { transform: scale(1); }
        }

        .digest-animation {
            animation: digest 1.5s ease;
        }

        @keyframes nutritionGlow {
            0% { box-shadow: 0 0 5px currentColor; }
            50% { box-shadow: 0 0 20px currentColor; }
            100% { box-shadow: 0 0 5px currentColor; }
        }

        .nutrition-glow {
            animation: nutritionGlow 2s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .digestive-container {
                height: 250px;
            }
            
            .nutrition-wheel {
                width: 150px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 9 Science: Nutrition & Digestion</h1>
            <p class="welcome-subtitle">Explore how your body processes food! Learn about nutrients, digestive system anatomy, enzyme functions, and how to maintain optimal health through proper nutrition.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üçéü•¶üí™</span>
                <span class="topic-name">Nutrients, Digestion, Enzymes, Health</span>
            </div>
            
            <div class="concepts-grid">
                <div class="concept-card nutrients" onclick="showConceptDetail('nutrients')">
                    <div class="concept-icon">üçé</div>
                    <h3 class="concept-title">Nutrients & Food Groups</h3>
                    <p class="concept-description">Essential substances our bodies need for growth, energy, and maintenance. Learn about carbohydrates, proteins, fats, vitamins, and minerals.</p>
                    <div class="concept-examples">
                        <h4>Key Nutrients:</h4>
                        <ul class="example-list">
                            <li>Carbohydrates - Energy source</li>
                            <li>Proteins - Growth & repair</li>
                            <li>Fats - Energy storage</li>
                            <li>Vitamins - Metabolic functions</li>
                        </ul>
                    </div>
                </div>
                
                <div class="concept-card digestion" onclick="showConceptDetail('digestion')">
                    <div class="concept-icon">üî¨</div>
                    <h3 class="concept-title">Digestive System</h3>
                    <p class="concept-description">The complete pathway food takes through your body, from ingestion to excretion. Learn about each organ's role in breaking down food.</p>
                    <div class="concept-examples">
                        <h4>Main Organs:</h4>
                        <ul class="example-list">
                            <li>Mouth & Esophagus</li>
                            <li>Stomach - Acid digestion</li>
                            <li>Small Intestine - Absorption</li>
                            <li>Large Intestine - Water absorption</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card enzymes" onclick="showConceptDetail('enzymes')">
                    <div class="concept-icon">‚öóÔ∏è</div>
                    <h3 class="concept-title">Enzymes & Chemical Digestion</h3>
                    <p class="concept-description">Biological catalysts that speed up chemical reactions in digestion. Each enzyme has specific substrates and optimal conditions.</p>
                    <div class="concept-examples">
                        <h4>Key Enzymes:</h4>
                        <ul class="example-list">
                            <li>Amylase - Starch digestion</li>
                            <li>Protease - Protein digestion</li>
                            <li>Lipase - Fat digestion</li>
                            <li>Pepsin - Stomach protein digestion</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card health" onclick="showConceptDetail('health')">
                    <div class="concept-icon">üí™</div>
                    <h3 class="concept-title">Health & Nutrition</h3>
                    <p class="concept-description">Understanding balanced diets, nutritional requirements, and how nutrition affects overall health and prevents diseases.</p>
                    <div class="concept-examples">
                        <h4>Health Factors:</h4>
                        <ul class="example-list">
                            <li>Balanced Diet Principles</li>
                            <li>Caloric Requirements</li>
                            <li>Nutritional Deficiencies</li>
                            <li>Diet-related Diseases</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card systems" onclick="showConceptDetail('systems')">
                    <div class="concept-icon">üîÑ</div>
                    <h3 class="concept-title">Body Systems Interaction</h3>
                    <p class="concept-description">How the digestive system works with circulatory, nervous, and endocrine systems to process and distribute nutrients throughout the body.</p>
                    <div class="concept-examples">
                        <h4>System Interactions:</h4>
                        <ul class="example-list">
                            <li>Circulatory - Nutrient transport</li>
                            <li>Nervous - Digestion control</li>
                            <li>Endocrine - Hormone regulation</li>
                            <li>Excretory - Waste removal</li>
                        </ul>
                    </div>
                </div>

                <div class="concept-card applications" onclick="showConceptDetail('applications')">
                    <div class="concept-icon">üè•</div>
                    <h3 class="concept-title">Real Applications</h3>
                    <p class="concept-description">Practical applications in medicine, food science, public health, and sports nutrition. Understanding modern dietary challenges.</p>
                    <div class="concept-examples">
                        <h4>Applications:</h4>
                        <ul class="example-list">
                            <li>Medical Nutrition Therapy</li>
                            <li>Food Technology</li>
                            <li>Public Health Nutrition</li>
                            <li>Sports & Performance Nutrition</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üçé Begin Nutrition Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="nutritionTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Digestive System Diagram -->
                    <div class="nutrition-visualizer" style="border-color: var(--digestion-green)">
                        <div class="visualizer-title">Interactive Digestive System</div>
                        
                        <div class="digestive-container" id="digestiveSystem">
                            <!-- Digestive organs will be generated by JavaScript -->
                        </div>
                        
                        <div id="organInfo" class="nutrition-example" style="min-height: 60px;">
                            Click on any organ to learn about its function
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-small btn-green" onclick="explainDigestiveProcess()">Digestion Process</button>
                            <button class="btn btn-small btn-outline" onclick="showAccessoryOrgans()">Accessory Organs</button>
                            <button class="btn btn-small btn-outline" onclick="resetDigestiveSystem()">Reset View</button>
                        </div>
                    </div>
                    
                    <!-- Nutrition Wheel -->
                    <div class="nutrition-visualizer" style="border-color: var(--nutrition-blue)">
                        <div class="visualizer-title">Nutrition Wheel - Food Groups</div>
                        
                        <div class="nutrition-wheel" id="nutritionWheel">
                            <!-- Wheel segments will be generated by JavaScript -->
                            <div class="wheel-center">FOOD</div>
                        </div>
                        
                        <div id="foodGroupInfo" class="nutrition-example" style="min-height: 60px; margin-top: 10px;">
                            Click on a food group for details
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-small btn-primary" onclick="createNutritionWheel()">New Foods</button>
                            <button class="btn btn-small btn-outline" onclick="showRecommendedServings()">Daily Servings</button>
                        </div>
                    </div>
                    
                    <!-- Enzyme Action Simulator -->
                    <div class="enzyme-simulator">
                        <div class="visualizer-title">Enzyme Action Simulator</div>
                        
                        <div class="simulator-area" id="enzymeSimulator">
                            <!-- Molecules will be generated by JavaScript -->
                        </div>
                        
                        <div style="text-align: center; margin: 10px 0; color: var(--text-secondary); font-size: 0.9rem;">
                            Enzyme: <span id="currentEnzyme" style="color: var(--enzymes-purple); font-weight: bold;">Amylase</span>
                            | Substrate: <span id="currentSubstrate" style="color: var(--digestion-green); font-weight: bold;">Starch</span>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-small btn-purple" onclick="startEnzymeAction()">Start Digestion</button>
                            <button class="btn btn-small btn-outline" onclick="changeEnzyme('protease')">Protease</button>
                            <button class="btn btn-small btn-outline" onclick="changeEnzyme('lipase')">Lipase</button>
                            <button class="btn btn-small btn-outline" onclick="changeEnzyme('amylase')">Amylase</button>
                        </div>
                        
                        <div id="enzymeInfo" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.85rem; text-align: center;">
                            Enzymes are biological catalysts that speed up digestion
                        </div>
                    </div>
                    
                    <!-- Food Pyramid -->
                    <div class="nutrition-visualizer" style="border-color: var(--health-orange)">
                        <div class="visualizer-title">Healthy Eating Pyramid</div>
                        
                        <div class="pyramid-container" id="foodPyramid">
                            <!-- Pyramid levels will be generated by JavaScript -->
                        </div>
                        
                        <div id="pyramidInfo" class="nutrition-example" style="min-height: 60px; margin-top: 10px;">
                            Click on pyramid levels for dietary recommendations
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-small btn-orange" onclick="explainPyramid()">Pyramid Guide</button>
                            <button class="btn btn-small btn-outline" onclick="showPortionSizes()">Portion Sizes</button>
                        </div>
                    </div>
                    
                    <!-- Nutrient Calculator -->
                    <div class="calculator-section">
                        <div class="visualizer-title">Daily Nutrient Calculator</div>
                        
                        <div class="calculator-display" id="calculatorDisplay">
                            Enter your details to calculate daily requirements
                        </div>
                        
                        <div style="margin: 15px 0;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                <input type="number" id="ageInput" placeholder="Age (years)" min="1" max="120" style="padding: 8px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                                <select id="genderInput" style="padding: 8px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <input type="number" id="weightInput" placeholder="Weight (kg)" min="20" max="200" style="padding: 8px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                                <select id="activityInput" style="padding: 8px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                                    <option value="sedentary">Sedentary</option>
                                    <option value="light">Light Activity</option>
                                    <option value="moderate">Moderate Activity</option>
                                    <option value="active">Active</option>
                                    <option value="very_active">Very Active</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-small btn-primary" onclick="calculateNutrition()">Calculate</button>
                            <button class="btn btn-small btn-green" onclick="calculateCalories()">Calories Only</button>
                            <button class="btn btn-small btn-outline" onclick="clearCalculator()">Clear</button>
                        </div>
                        
                        <div id="calculatorResult" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Enter your details above
                        </div>
                    </div>
                    
                    <!-- Comparison Table: Mechanical vs Chemical Digestion -->
                    <div class="comparison-section">
                        <div class="visualizer-title">Mechanical vs Chemical Digestion</div>
                        
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Aspect</th>
                                    <th>Mechanical Digestion</th>
                                    <th>Chemical Digestion</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr onclick="explainDigestionType('purpose')">
                                    <td>Purpose</td>
                                    <td>Physical breakdown of food</td>
                                    <td>Chemical breakdown of food</td>
                                </tr>
                                <tr onclick="explainDigestionType('process')">
                                    <td>Process</td>
                                    <td>Chewing, churning, segmentation</td>
                                    <td>Enzyme action, hydrolysis</td>
                                </tr>
                                <tr onclick="explainDigestionType('location')">
                                    <td>Main Locations</td>
                                    <td>Mouth, stomach, small intestine</td>
                                    <td>Mouth, stomach, small intestine</td>
                                </tr>
                                <tr onclick="explainDigestionType('result')">
                                    <td>Result</td>
                                    <td>Smaller food pieces</td>
                                    <td>Simple absorbable molecules</td>
                                </tr>
                                <tr onclick="explainDigestionType('examples')">
                                    <td>Examples</td>
                                    <td>Chewing, stomach contractions</td>
                                    <td>Amylase on starch, pepsin on protein</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div id="digestionDetail" style="margin-top: 15px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.85rem; display: none;">
                            Click a row for detailed explanation
                        </div>
                    </div>
                    
                    <!-- Health Assessment -->
                    <div class="assessment-section">
                        <div class="visualizer-title">Nutritional Health Assessment</div>
                        
                        <div class="assessment-question" id="assessmentQuestion">
                            How many servings of fruits and vegetables do you typically eat daily?
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin: 10px 0;">
                            <button class="btn btn-small btn-outline" onclick="answerAssessment(1)">0-2 servings</button>
                            <button class="btn btn-small btn-outline" onclick="answerAssessment(3)">3-4 servings</button>
                            <button class="btn btn-small btn-green" onclick="answerAssessment(5)">5+ servings</button>
                        </div>
                        
                        <div id="assessmentFeedback" style="margin: 10px 0; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Recommended: 5+ servings of fruits & vegetables daily
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-small btn-orange" onclick="nextAssessmentQuestion()">Next Question</button>
                            <button class="btn btn-small btn-outline" onclick="showAssessmentResults()">View Results</button>
                        </div>
                    </div>
                    
                    <!-- Nutrient Absorption Process -->
                    <div class="nutrition-visualizer" style="border-color: var(--applications-teal)">
                        <div class="visualizer-title">Nutrient Absorption in Small Intestine</div>
                        
                        <div style="text-align: center; margin: 15px 0;">
                            <div style="display: inline-block; text-align: left;">
                                <div style="margin: 5px 0; padding: 8px 15px; background: var(--dark-surface); border-radius: 5px; border-left: 4px solid var(--digestion-green);">
                                    <strong>1. Carbohydrates</strong> ‚Üí Glucose ‚Üí Bloodstream ‚Üí Energy
                                </div>
                                <div style="margin: 5px 0; padding: 8px 15px; background: var(--dark-surface); border-radius: 5px; border-left: 4px solid var(--nutrition-blue);">
                                    <strong>2. Proteins</strong> ‚Üí Amino Acids ‚Üí Bloodstream ‚Üí Tissue building
                                </div>
                                <div style="margin: 5px 0; padding: 8px 15px; background: var(--dark-surface); border-radius: 5px; border-left: 4px solid var(--enzymes-purple);">
                                    <strong>3. Fats</strong> ‚Üí Fatty Acids + Glycerol ‚Üí Lymphatic system ‚Üí Storage/Energy
                                </div>
                                <div style="margin: 5px 0; padding: 8px 15px; background: var(--dark-surface); border-radius: 5px; border-left: 4px solid var(--health-orange);">
                                    <strong>4. Vitamins/Minerals</strong> ‚Üí Various pathways ‚Üí Body functions
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-small btn-teal" onclick="explainAbsorption()">Absorption Process</button>
                            <button class="btn btn-small btn-outline" onclick="showVilliDiagram()">Villi Structure</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Nutrition Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="nutrientsScore">0</div>
                        <div class="stat-label">Nutrients</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="digestionScore">0</div>
                        <div class="stat-label">Digestion</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="enzymesScore">0</div>
                        <div class="stat-label">Enzymes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-green" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive questions array - 80+ questions on Nutrition & Digestion
        const questions = [
            // Nutrients & Food Groups (1-20)
            {
                question: "What are the three main macronutrients?",
                options: ["Carbohydrates, Proteins, Fats", "Vitamins, Minerals, Water", "Sugar, Salt, Fiber", "Calcium, Iron, Vitamin C"],
                answer: "A",
                explanation: "Macronutrients are needed in large amounts: carbohydrates (energy), proteins (growth/repair), fats (energy storage).",
                type: "nutrients"
            },
            {
                question: "Which nutrient is the body's main energy source?",
                options: ["Carbohydrates", "Proteins", "Fats", "Vitamins"],
                answer: "A",
                explanation: "Carbohydrates are broken down into glucose, which is the primary energy source for cells.",
                type: "nutrients"
            },
            {
                question: "What are proteins broken down into during digestion?",
                options: ["Amino acids", "Fatty acids", "Glucose", "Vitamins"],
                answer: "A",
                explanation: "Proteins are digested into amino acids, which are used to build and repair tissues.",
                type: "nutrients"
            },
            {
                question: "Which vitamin deficiency causes scurvy?",
                options: ["Vitamin C", "Vitamin D", "Vitamin A", "Vitamin B12"],
                answer: "A",
                explanation: "Scurvy is caused by vitamin C deficiency, leading to bleeding gums and poor wound healing.",
                type: "nutrients"
            },
            {
                question: "What mineral is essential for strong bones and teeth?",
                options: ["Calcium", "Iron", "Potassium", "Sodium"],
                answer: "A",
                explanation: "Calcium is crucial for bone and tooth structure, nerve function, and muscle contraction.",
                type: "nutrients"
            },
            {
                question: "Which nutrient helps absorb fat-soluble vitamins?",
                options: ["Fats", "Proteins", "Carbohydrates", "Water"],
                answer: "A",
                explanation: "Fats help absorb vitamins A, D, E, and K, which are fat-soluble.",
                type: "nutrients"
            },
            {
                question: "What is the main function of dietary fiber?",
                options: ["Promote digestive health", "Provide energy", "Build muscle", "Store energy"],
                answer: "A",
                explanation: "Fiber adds bulk to stool, prevents constipation, and may lower cholesterol.",
                type: "nutrients"
            },
            {
                question: "Which vitamin is produced when skin is exposed to sunlight?",
                options: ["Vitamin D", "Vitamin C", "Vitamin A", "Vitamin K"],
                answer: "A",
                explanation: "Vitamin D is synthesized in skin exposed to UVB sunlight and helps calcium absorption.",
                type: "nutrients"
            },
            {
                question: "What is the energy value of 1 gram of carbohydrates?",
                options: ["4 calories", "9 calories", "7 calories", "2 calories"],
                answer: "A",
                explanation: "Carbohydrates provide 4 calories per gram, proteins 4 cal/g, fats 9 cal/g.",
                type: "nutrients"
            },
            {
                question: "Which mineral is essential for oxygen transport in blood?",
                options: ["Iron", "Calcium", "Zinc", "Magnesium"],
                answer: "A",
                explanation: "Iron is part of hemoglobin, which carries oxygen in red blood cells.",
                type: "nutrients"
            },
            {
                question: "What are simple carbohydrates?",
                options: ["Sugars that are quickly digested", "Complex starches", "Dietary fiber", "Proteins"],
                answer: "A",
                explanation: "Simple carbs (sugars) provide quick energy but lack other nutrients.",
                type: "nutrients"
            },
            {
                question: "What are complex carbohydrates?",
                options: ["Starches and fiber that digest slowly", "Simple sugars", "Proteins", "Fats"],
                answer: "A",
                explanation: "Complex carbs (starches, fiber) provide sustained energy and nutrients.",
                type: "nutrients"
            },
            {
                question: "Which vitamin is an antioxidant?",
                options: ["Vitamin C", "Vitamin D", "Vitamin K", "Vitamin B12"],
                answer: "A",
                explanation: "Vitamin C is an antioxidant that protects cells from damage.",
                type: "nutrients"
            },
            {
                question: "What is dehydration?",
                options: ["Excessive water loss from body", "Too much water intake", "Lack of vitamins", "Excess minerals"],
                answer: "A",
                explanation: "Dehydration occurs when water loss exceeds intake, affecting body functions.",
                type: "nutrients"
            },
            {
                question: "Which food group provides calcium?",
                options: ["Dairy products", "Fruits", "Grains", "Meat"],
                answer: "A",
                explanation: "Dairy products (milk, cheese, yogurt) are rich sources of calcium.",
                type: "nutrients"
            },
            {
                question: "What is the main function of B vitamins?",
                options: ["Energy metabolism", "Bone health", "Blood clotting", "Antioxidant"],
                answer: "A",
                explanation: "B vitamins help convert food into energy and support nervous system.",
                type: "nutrients"
            },
            {
                question: "Which nutrient is NOT a source of energy?",
                options: ["Vitamins", "Carbohydrates", "Proteins", "Fats"],
                answer: "A",
                explanation: "Vitamins are micronutrients needed in small amounts for various functions, not energy.",
                type: "nutrients"
            },
            {
                question: "What is a complete protein?",
                options: ["Contains all essential amino acids", "Only plant-based", "Only animal-based", "Low in amino acids"],
                answer: "A",
                explanation: "Complete proteins contain all 9 essential amino acids (animal products, soy, quinoa).",
                type: "nutrients"
            },
            {
                question: "Which vitamin deficiency causes rickets?",
                options: ["Vitamin D", "Vitamin C", "Vitamin A", "Vitamin K"],
                answer: "A",
                explanation: "Rickets (soft, weak bones in children) is caused by vitamin D deficiency.",
                type: "nutrients"
            },
            {
                question: "What is the function of potassium?",
                options: ["Nerve function and fluid balance", "Bone formation", "Oxygen transport", "Antioxidant"],
                answer: "A",
                explanation: "Potassium helps nerve impulses, muscle contractions, and fluid balance.",
                type: "nutrients"
            },

            // Digestive System (21-40)
            {
                question: "Where does digestion begin?",
                options: ["Mouth", "Stomach", "Small intestine", "Esophagus"],
                answer: "A",
                explanation: "Digestion begins in mouth with mechanical (chewing) and chemical (amylase) breakdown.",
                type: "digestion"
            },
            {
                question: "What is the function of saliva?",
                options: ["Moisten food and begin starch digestion", "Kill bacteria", "Digest proteins", "Absorb nutrients"],
                answer: "A",
                explanation: "Saliva contains amylase to start starch digestion and mucin to lubricate food.",
                type: "digestion"
            },
            {
                question: "What moves food through the esophagus?",
                options: ["Peristalsis", "Gravity", "Muscle contractions only", "Cilia movement"],
                answer: "A",
                explanation: "Peristalsis - wave-like muscle contractions - moves food through digestive tract.",
                type: "digestion"
            },
            {
                question: "What is the main function of the stomach?",
                options: ["Protein digestion and food storage", "Carbohydrate digestion", "Nutrient absorption", "Water absorption"],
                answer: "A",
                explanation: "Stomach stores food, mixes it with gastric juices, and begins protein digestion.",
                type: "digestion"
            },
            {
                question: "What is gastric juice composed of?",
                options: ["Hydrochloric acid and enzymes", "Bile and enzymes", "Saliva and mucus", "Water and salts"],
                answer: "A",
                explanation: "Gastric juice contains HCl (kills bacteria, activates pepsin) and pepsin (digests proteins).",
                type: "digestion"
            },
            {
                question: "Where does most nutrient absorption occur?",
                options: ["Small intestine", "Stomach", "Large intestine", "Mouth"],
                answer: "A",
                explanation: "Small intestine has villi and microvilli that greatly increase surface area for absorption.",
                type: "digestion"
            },
            {
                question: "What are villi?",
                options: ["Finger-like projections in small intestine", "Stomach folds", "Large intestine pouches", "Esophageal rings"],
                answer: "A",
                explanation: "Villi increase surface area for nutrient absorption in small intestine.",
                type: "digestion"
            },
            {
                question: "What is the main function of the large intestine?",
                options: ["Water absorption and feces formation", "Nutrient absorption", "Protein digestion", "Starch digestion"],
                answer: "A",
                explanation: "Large intestine absorbs water, electrolytes, and forms feces for elimination.",
                type: "digestion"
            },
            {
                question: "What is the function of the liver in digestion?",
                options: ["Produces bile", "Produces insulin", "Absorbs nutrients", "Stores food"],
                answer: "A",
                explanation: "Liver produces bile, which emulsifies fats for digestion.",
                type: "digestion"
            },
            {
                question: "What is the function of bile?",
                options: ["Emulsify fats", "Digest proteins", "Digest carbohydrates", "Absorb vitamins"],
                answer: "A",
                explanation: "Bile breaks large fat droplets into smaller ones (emulsification) for enzyme action.",
                type: "digestion"
            },
            {
                question: "Where is bile stored?",
                options: ["Gallbladder", "Liver", "Pancreas", "Stomach"],
                answer: "A",
                explanation: "Liver produces bile, gallbladder stores and concentrates it, releasing it when needed.",
                type: "digestion"
            },
            {
                question: "What does the pancreas produce for digestion?",
                options: ["Digestive enzymes and bicarbonate", "Bile only", "Insulin only", "Mucus only"],
                answer: "A",
                explanation: "Pancreas produces enzymes (amylase, lipase, protease) and bicarbonate to neutralize stomach acid.",
                type: "digestion"
            },
            {
                question: "What is mechanical digestion?",
                options: ["Physical breakdown of food", "Chemical breakdown", "Nutrient absorption", "Enzyme action"],
                answer: "A",
                explanation: "Mechanical digestion: chewing, stomach churning, segmentation in intestines.",
                type: "digestion"
            },
            {
                question: "What is chemical digestion?",
                options: ["Enzyme breakdown of food", "Physical breakdown", "Absorption process", "Peristalsis"],
                answer: "A",
                explanation: "Chemical digestion uses enzymes to break large molecules into absorbable units.",
                type: "digestion"
            },
            {
                question: "What is the epiglottis?",
                options: ["Flap that prevents food entering trachea", "Part of stomach", "Intestinal valve", "Salivary gland"],
                answer: "A",
                explanation: "Epiglottis covers trachea during swallowing to prevent choking.",
                type: "digestion"
            },
            {
                question: "What are sphincters?",
                options: ["Ring-like muscles that control passage", "Digestive enzymes", "Absorptive structures", "Hormones"],
                answer: "A",
                explanation: "Sphincters (e.g., cardiac, pyloric) control movement between digestive organs.",
                type: "digestion"
            },
            {
                question: "What is the function of mucus in stomach?",
                options: ["Protect stomach lining from acid", "Digest proteins", "Absorb nutrients", "Kill bacteria"],
                answer: "A",
                explanation: "Mucus forms protective layer preventing stomach acid from damaging stomach wall.",
                type: "digestion"
            },
            {
                question: "What is chyme?",
                options: ["Partially digested food in stomach", "Bile mixture", "Enzyme solution", "Waste material"],
                answer: "A",
                explanation: "Chyme is semi-liquid mixture of food and gastric juices leaving stomach.",
                type: "digestion"
            },
            {
                question: "What are probiotics?",
                options: ["Beneficial bacteria in digestive system", "Digestive enzymes", "Stomach acids", "Absorptive cells"],
                answer: "A",
                explanation: "Probiotics are beneficial bacteria that aid digestion and support gut health.",
                type: "digestion"
            },
            {
                question: "What is peristalsis?",
                options: ["Wave-like muscle contractions moving food", "Enzyme action", "Nutrient absorption", "Bile production"],
                answer: "A",
                explanation: "Peristalsis moves food through entire digestive tract via coordinated muscle contractions.",
                type: "digestion"
            },

            // Enzymes (41-60)
            {
                question: "What are enzymes?",
                options: ["Biological catalysts that speed up reactions", "Nutrients", "Hormones", "Waste products"],
                answer: "A",
                explanation: "Enzymes are proteins that speed up chemical reactions without being consumed.",
                type: "enzymes"
            },
            {
                question: "Which enzyme digests starch in mouth?",
                options: ["Salivary amylase", "Pepsin", "Lipase", "Protease"],
                answer: "A",
                explanation: "Salivary amylase begins starch digestion in mouth (starch ‚Üí maltose).",
                type: "enzymes"
            },
            {
                question: "Which enzyme digests proteins in stomach?",
                options: ["Pepsin", "Amylase", "Lipase", "Trypsin"],
                answer: "A",
                explanation: "Pepsin digests proteins in stomach (proteins ‚Üí peptides).",
                type: "enzymes"
            },
            {
                question: "What activates pepsin in stomach?",
                options: ["Hydrochloric acid (HCl)", "Bile", "Saliva", "Bicarbonate"],
                answer: "A",
                explanation: "HCl activates pepsinogen to pepsin and provides optimal pH for pepsin activity.",
                type: "enzymes"
            },
            {
                question: "Which enzyme digests fats?",
                options: ["Lipase", "Amylase", "Protease", "Pepsin"],
                answer: "A",
                explanation: "Lipase breaks down fats into fatty acids and glycerol.",
                type: "enzymes"
            },
            {
                question: "Where is pancreatic amylase produced?",
                options: ["Pancreas", "Stomach", "Liver", "Salivary glands"],
                answer: "A",
                explanation: "Pancreas produces amylase that continues starch digestion in small intestine.",
                type: "enzymes"
            },
            {
                question: "What is substrate specificity?",
                options: ["Each enzyme works on specific substrate", "Enzymes work on all substrates", "Enzymes are not specific", "Random enzyme action"],
                answer: "A",
                explanation: "Enzymes have specific active sites that fit only particular substrates (lock-and-key).",
                type: "enzymes"
            },
            {
                question: "What affects enzyme activity?",
                options: ["Temperature and pH", "Only temperature", "Only pH", "Neither temperature nor pH"],
                answer: "A",
                explanation: "Enzymes have optimal temperature and pH; extremes denature them (change shape).",
                type: "enzymes"
            },
            {
                question: "What is the optimal pH for pepsin?",
                options: ["Acidic (pH 2)", "Neutral (pH 7)", "Basic (pH 8)", "Any pH"],
                answer: "A",
                explanation: "Pepsin works best in acidic environment of stomach (pH 1.5-2).",
                type: "enzymes"
            },
            {
                question: "What is the optimal pH for pancreatic enzymes?",
                options: ["Slightly basic (pH 8)", "Acidic (pH 2)", "Neutral (pH 7)", "Any pH"],
                answer: "A",
                explanation: "Pancreatic enzymes work best in slightly basic environment of small intestine.",
                type: "enzymes"
            },
            {
                question: "What denatures enzymes?",
                options: ["Extreme temperature or pH", "Optimal conditions", "Presence of substrate", "Water"],
                answer: "A",
                explanation: "High temperature or extreme pH changes enzyme shape, destroying its function.",
                type: "enzymes"
            },
            {
                question: "Which enzyme breaks down maltose to glucose?",
                options: ["Maltase", "Amylase", "Sucrase", "Lactase"],
                answer: "A",
                explanation: "Maltase (on brush border of small intestine) breaks maltose into glucose.",
                type: "enzymes"
            },
            {
                question: "Which enzyme breaks down lactose?",
                options: ["Lactase", "Maltase", "Sucrase", "Amylase"],
                answer: "A",
                explanation: "Lactase breaks lactose (milk sugar) into glucose and galactose.",
                type: "enzymes"
            },
            {
                question: "What is lactase deficiency?",
                options: ["Lactose intolerance", "Protein intolerance", "Fat intolerance", "Starch intolerance"],
                answer: "A",
                explanation: "Lactase deficiency causes lactose intolerance (inability to digest milk sugar).",
                type: "enzymes"
            },
            {
                question: "What are brush border enzymes?",
                options: ["Enzymes on surface of intestinal cells", "Stomach enzymes", "Pancreatic enzymes", "Salivary enzymes"],
                answer: "A",
                explanation: "Brush border enzymes on microvilli complete digestion of carbohydrates and proteins.",
                type: "enzymes"
            },
            {
                question: "Which enzyme begins protein digestion?",
                options: ["Pepsin", "Trypsin", "Amylase", "Lipase"],
                answer: "A",
                explanation: "Pepsin begins protein digestion in stomach; trypsin continues it in small intestine.",
                type: "enzymes"
            },
            {
                question: "What is trypsin?",
                options: ["Pancreatic enzyme that digests proteins", "Stomach enzyme", "Enzyme that digests fats", "Enzyme that digests starch"],
                answer: "A",
                explanation: "Trypsin continues protein digestion in small intestine (proteins/peptides ‚Üí smaller peptides).",
                type: "enzymes"
            },
            {
                question: "What is bile's role in fat digestion?",
                options: ["Emulsification (physical breakdown)", "Chemical digestion", "Enzyme production", "Nutrient absorption"],
                answer: "A",
                explanation: "Bile emulsifies fats (breaks into smaller droplets) but doesn't chemically digest them.",
                type: "enzymes"
            },
            {
                question: "What happens to enzyme activity at optimal temperature?",
                options: ["Maximum reaction rate", "No activity", "Minimum activity", "Denaturation"],
                answer: "A",
                explanation: "Enzymes work fastest at optimal temperature (around 37¬∞C for human enzymes).",
                type: "enzymes"
            },
            {
                question: "What are digestive enzymes secreted as?",
                options: ["Inactive precursors (zymogens)", "Active enzymes", "Hormones", "Waste products"],
                answer: "A",
                explanation: "Many digestive enzymes are secreted as inactive zymogens to prevent self-digestion.",
                type: "enzymes"
            },

            // Health & Nutrition (61-80)
            {
                question: "What is a balanced diet?",
                options: ["Contains all nutrients in proper proportions", "Only fruits and vegetables", "High protein only", "Low carb only"],
                answer: "A",
                explanation: "Balanced diet provides all nutrients (macro and micro) in right amounts for health.",
                type: "health"
            },
            {
                question: "What is BMI (Body Mass Index)?",
                options: ["Weight to height ratio indicating body fat", "Muscle mass measurement", "Bone density test", "Metabolic rate"],
                answer: "A",
                explanation: "BMI = weight(kg)/height(m)¬≤. Categories: Underweight <18.5, Normal 18.5-24.9, Overweight 25-29.9, Obese ‚â•30.",
                type: "health"
            },
            {
                question: "What is malnutrition?",
                options: ["Poor nutrition from deficiency or excess", "Only starvation", "Only obesity", "Vitamin deficiency only"],
                answer: "A",
                explanation: "Malnutrition includes undernutrition (deficiency) and overnutrition (excess).",
                type: "health"
            },
            {
                question: "What is obesity?",
                options: ["Excessive body fat accumulation", "Lack of vitamins", "Low body weight", "Muscle loss"],
                answer: "A",
                explanation: "Obesity is excess body fat increasing health risks (heart disease, diabetes, etc.).",
                type: "health"
            },
            {
                question: "What is diabetes?",
                options: ["Body cannot regulate blood sugar properly", "Blood pressure disorder", "Cholesterol disorder", "Digestive disorder"],
                answer: "A",
                explanation: "Diabetes: Type 1 (no insulin production), Type 2 (insulin resistance), Gestational (pregnancy).",
                type: "health"
            },
            {
                question: "What are empty calories?",
                options: ["Foods with calories but few nutrients", "Zero calorie foods", "High protein foods", "High fiber foods"],
                answer: "A",
                explanation: "Empty calories provide energy but minimal vitamins/minerals (sugary drinks, junk food).",
                type: "health"
            },
            {
                question: "What is the food pyramid?",
                options: ["Visual guide to balanced diet", "List of foods", "Calorie counter", "Recipe book"],
                answer: "A",
                explanation: "Food pyramid shows proportions of different food groups for healthy eating.",
                type: "health"
            },
            {
                question: "What is a calorie?",
                options: ["Unit of energy from food", "Unit of weight", "Vitamin measurement", "Mineral measurement"],
                answer: "A",
                explanation: "Calorie measures energy food provides when metabolized. 1 Calorie = 1 kilocalorie = 1000 calories.",
                type: "health"
            },
            {
                question: "What is metabolism?",
                options: ["All chemical reactions in body", "Only digestion", "Only breathing", "Only exercise"],
                answer: "A",
                explanation: "Metabolism includes catabolism (breaking down) and anabolism (building up).",
                type: "health"
            },
            {
                question: "What is basal metabolic rate (BMR)?",
                options: ["Energy needed at rest for basic functions", "Energy during exercise", "Energy from food", "Total daily energy"],
                answer: "A",
                explanation: "BMR is energy needed for breathing, circulation, cell production at rest.",
                type: "health"
            },
            {
                question: "What are antioxidants?",
                options: ["Compounds that prevent cell damage", "Energy sources", "Digestive enzymes", "Hormones"],
                answer: "A",
                explanation: "Antioxidants (vitamins C, E, beta-carotene) neutralize free radicals that damage cells.",
                type: "health"
            },
            {
                question: "What is dietary cholesterol?",
                options: ["Cholesterol from food (animal products)", "Cholesterol made by body", "Plant cholesterol", "Fiber"],
                answer: "A",
                explanation: "Dietary cholesterol comes from animal foods; body also makes cholesterol.",
                type: "health"
            },
            {
                question: "What are trans fats?",
                options: ["Unhealthy fats from hydrogenation", "Healthy plant fats", "Animal fats", "Essential fats"],
                answer: "A",
                explanation: "Trans fats raise bad cholesterol (LDL), lower good cholesterol (HDL), increase heart disease risk.",
                type: "health"
            },
            {
                question: "What are whole grains?",
                options: ["Grains with all parts (bran, germ, endosperm)", "Refined grains", "Processed grains", "White flour"],
                answer: "A",
                explanation: "Whole grains contain fiber, vitamins, minerals; refined grains have bran/germ removed.",
                type: "health"
            },
            {
                question: "What is hydration?",
                options: ["Maintaining adequate body water", "Eating food", "Breathing", "Exercising"],
                answer: "A",
                explanation: "Hydration: drinking enough water for bodily functions (temperature regulation, digestion, etc.).",
                type: "health"
            },
            {
                question: "What is food labeling?",
                options: ["Nutrition information on food packages", "Food advertising", "Food recipes", "Food storage"],
                answer: "A",
                explanation: "Food labels show nutrients, ingredients, serving sizes to help make healthy choices.",
                type: "health"
            },
            {
                question: "What is portion control?",
                options: ["Eating appropriate amounts of food", "Eating only one food", "Skipping meals", "Fasting"],
                answer: "A",
                explanation: "Portion control helps manage calorie intake and maintain healthy weight.",
                type: "health"
            },
            {
                question: "What are food allergies?",
                options: ["Immune reactions to specific foods", "Food dislikes", "Food preferences", "Cultural food habits"],
                answer: "A",
                explanation: "Food allergies involve immune system reacting to proteins in certain foods.",
                type: "health"
            },
            {
                question: "What is food intolerance?",
                options: ["Difficulty digesting certain foods", "Immune reaction", "Food poisoning", "Food preference"],
                answer: "A",
                explanation: "Food intolerance (e.g., lactose intolerance) involves digestive system, not immune system.",
                type: "health"
            },
            {
                question: "What is food preservation?",
                options: ["Methods to prevent food spoilage", "Cooking methods", "Eating methods", "Shopping methods"],
                answer: "A",
                explanation: "Preservation methods: refrigeration, freezing, canning, drying, pickling, pasteurization.",
                type: "health"
            }
        ];

        // Additional questions
        const additionalQuestions = [
            {
                question: "What is the function of hydrochloric acid in stomach?",
                options: ["Kill bacteria and activate pepsin", "Digest carbohydrates", "Absorb nutrients", "Produce bile"],
                answer: "A",
                explanation: "HCl creates acidic environment killing bacteria and converting pepsinogen to active pepsin.",
                type: "digestion"
            },
            {
                question: "What are prebiotics?",
                options: ["Food for beneficial gut bacteria", "Digestive enzymes", "Stomach acids", "Nutrients"],
                answer: "A",
                explanation: "Prebiotics are non-digestible fibers that feed probiotics (beneficial gut bacteria).",
                type: "digestion"
            },
            {
                question: "What is celiac disease?",
                options: ["Autoimmune reaction to gluten", "Lactose intolerance", "Food allergy", "Stomach ulcer"],
                answer: "A",
                explanation: "Celiac disease: immune reaction to gluten damages small intestine lining, impairing absorption.",
                type: "health"
            },
            {
                question: "What is the glycemic index?",
                options: ["Measures how food affects blood sugar", "Calorie content", "Fat content", "Protein quality"],
                answer: "A",
                explanation: "Glycemic index ranks carbs by how quickly they raise blood glucose levels.",
                type: "health"
            },
            {
                question: "What are essential amino acids?",
                options: ["Amino acids body cannot make", "All amino acids", "Non-essential amino acids", "Protein enzymes"],
                answer: "A",
                explanation: "9 essential amino acids must come from diet; body can make the other 11.",
                type: "nutrients"
            }
        ];

        // Combine all questions
        const allQuestions = [...questions, ...additionalQuestions];

        // Nutrition tips
        const nutritionTips = [
            "Tip: Drink water before meals to help control appetite and aid digestion.",
            "Tip: Chew food thoroughly - digestion begins in the mouth with salivary amylase.",
            "Tip: Include fiber in your diet to promote digestive health and prevent constipation.",
            "Tip: Eat a rainbow of fruits and vegetables for a variety of vitamins and antioxidants.",
            "Tip: Probiotic foods (yogurt, kefir) support healthy gut bacteria for better digestion.",
            "Tip: Don't skip breakfast - it kickstarts your metabolism after overnight fasting.",
            "Tip: Combine protein with carbohydrates for sustained energy and better nutrient absorption.",
            "Tip: Listen to your body's hunger and fullness cues for mindful eating."
        ];

        // Digestive system organs data
        const digestiveOrgans = {
            mouth: {
                name: "Mouth",
                function: "Mechanical digestion (chewing) and chemical digestion (salivary amylase begins starch breakdown).",
                color: "#2196F3",
                enzymes: "Salivary amylase"
            },
            esophagus: {
                name: "Esophagus",
                function: "Transports food from mouth to stomach via peristalsis (wave-like muscle contractions).",
                color: "#FF9800",
                enzymes: "None - transport only"
            },
            stomach: {
                name: "Stomach",
                function: "Stores food, mixes with gastric juices (HCl and pepsin), begins protein digestion.",
                color: "#4CAF50",
                enzymes: "Pepsin (proteins), gastric lipase (fats)"
            },
            smallIntestine: {
                name: "Small Intestine",
                function: "Most digestion and nutrient absorption occurs here via villi and microvilli.",
                color: "#9C27B0",
                enzymes: "Brush border enzymes (maltase, lactase, sucrase, peptidases)"
            },
            largeIntestine: {
                name: "Large Intestine",
                function: "Absorbs water and electrolytes, forms and stores feces, houses beneficial bacteria.",
                color: "#F44336",
                enzymes: "None - absorption only"
            },
            liver: {
                name: "Liver",
                function: "Produces bile for fat emulsification, processes nutrients, detoxifies substances.",
                color: "#009688",
                enzymes: "None (produces bile)"
            },
            gallbladder: {
                name: "Gallbladder",
                function: "Stores and concentrates bile from liver, releases it into small intestine when needed.",
                color: "#FFC107",
                enzymes: "None (stores bile)"
            },
            pancreas: {
                name: "Pancreas",
                function: "Produces digestive enzymes (amylase, lipase, protease) and bicarbonate to neutralize stomach acid.",
                color: "#E91E63",
                enzymes: "Pancreatic amylase, lipase, trypsin, chymotrypsin"
            }
        };

        // Food groups for nutrition wheel
        const foodGroups = [
            {
                name: "Fruits",
                color: "#FF5252",
                examples: ["Apples", "Bananas", "Oranges", "Berries"],
                nutrients: "Vitamin C, fiber, antioxidants",
                servings: "2-4 servings daily"
            },
            {
                name: "Vegetables",
                color: "#4CAF50",
                examples: ["Broccoli", "Carrots", "Spinach", "Peppers"],
                nutrients: "Vitamins A, C, K, fiber, minerals",
                servings: "3-5 servings daily"
            },
            {
                name: "Grains",
                color: "#FF9800",
                examples: ["Rice", "Bread", "Pasta", "Oats"],
                nutrients: "Carbohydrates, B vitamins, fiber",
                servings: "6-11 servings daily (mostly whole grains)"
            },
            {
                name: "Proteins",
                color: "#2196F3",
                examples: ["Meat", "Fish", "Eggs", "Beans", "Nuts"],
                nutrients: "Protein, iron, zinc, B vitamins",
                servings: "2-3 servings daily"
            },
            {
                name: "Dairy",
                color: "#E1BEE7",
                examples: ["Milk", "Cheese", "Yogurt"],
                nutrients: "Calcium, vitamin D, protein",
                servings: "2-3 servings daily"
            },
            {
                name: "Fats & Oils",
                color: "#FFEB3B",
                examples: ["Olive oil", "Avocado", "Nuts", "Butter"],
                nutrients: "Essential fatty acids, vitamin E",
                servings: "Use sparingly"
            }
        ];

        // Enzyme data
        const enzymes = {
            amylase: {
                name: "Amylase",
                substrate: "Starch",
                products: "Maltose",
                location: "Mouth (salivary), pancreas (pancreatic)",
                optimalPH: "6.7-7.0",
                color: "#4CAF50"
            },
            protease: {
                name: "Protease",
                substrate: "Proteins",
                products: "Peptides ‚Üí Amino acids",
                location: "Stomach (pepsin), pancreas (trypsin)",
                optimalPH: "2.0 (pepsin), 7.8 (trypsin)",
                color: "#2196F3"
            },
            lipase: {
                name: "Lipase",
                substrate: "Fats (triglycerides)",
                products: "Fatty acids + Glycerol",
                location: "Pancreas, stomach (gastric lipase)",
                optimalPH: "7.0-8.0",
                color: "#9C27B0"
            }
        };

        // Food pyramid levels
        const pyramidLevels = [
            {
                level: 1,
                name: "Fats, Oils, Sweets",
                color: "#F44336",
                recommendation: "Use sparingly",
                foods: "Butter, oil, candy, soda"
            },
            {
                level: 2,
                name: "Dairy, Protein",
                color: "#2196F3",
                recommendation: "2-3 servings each",
                foods: "Milk, cheese, meat, beans, nuts"
            },
            {
                level: 3,
                name: "Vegetables, Fruits",
                color: "#4CAF50",
                recommendation: "3-5 vegetables, 2-4 fruits",
                foods: "Broccoli, carrots, apples, oranges"
            },
            {
                level: 4,
                name: "Grains",
                color: "#FF9800",
                recommendation: "6-11 servings",
                foods: "Bread, rice, pasta, cereal"
            }
        ];

        // Assessment questions
        const assessmentQuestions = [
            {
                question: "How many servings of fruits and vegetables do you typically eat daily?",
                options: ["0-2 servings", "3-4 servings", "5+ servings"],
                recommendation: "5+ servings for optimal health"
            },
            {
                question: "How much water do you drink daily?",
                options: ["Less than 4 glasses", "4-6 glasses", "8+ glasses"],
                recommendation: "8 glasses (2 liters) minimum for proper hydration"
            },
            {
                question: "How often do you eat whole grains vs refined grains?",
                options: ["Mostly refined", "Half and half", "Mostly whole grains"],
                recommendation: "Choose whole grains for fiber and nutrients"
            },
            {
                question: "How frequently do you consume sugary drinks or snacks?",
                options: ["Daily", "Several times a week", "Rarely or never"],
                recommendation: "Limit added sugars for better health"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentEnzyme: "amylase",
            assessmentScore: 0,
            currentAssessment: 0,
            nutrientsScore: 0,
            digestionScore: 0,
            enzymesScore: 0,
            healthScore: 0,
            systemsScore: 0,
            applicationsScore: 0
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const nutritionTip = document.getElementById('nutritionTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const nutrientsScore = document.getElementById('nutrientsScore');
        const digestionScore = document.getElementById('digestionScore');
        const enzymesScore = document.getElementById('enzymesScore');
        const timeSpent = document.getElementById('timeSpent');
        const digestiveSystem = document.getElementById('digestiveSystem');
        const organInfo = document.getElementById('organInfo');
        const nutritionWheel = document.getElementById('nutritionWheel');
        const foodGroupInfo = document.getElementById('foodGroupInfo');
        const enzymeSimulator = document.getElementById('enzymeSimulator');
        const currentEnzymeDisplay = document.getElementById('currentEnzyme');
        const currentSubstrateDisplay = document.getElementById('currentSubstrate');
        const enzymeInfo = document.getElementById('enzymeInfo');
        const foodPyramid = document.getElementById('foodPyramid');
        const pyramidInfo = document.getElementById('pyramidInfo');
        const calculatorDisplay = document.getElementById('calculatorDisplay');
        const calculatorResult = document.getElementById('calculatorResult');
        const ageInput = document.getElementById('ageInput');
        const genderInput = document.getElementById('genderInput');
        const weightInput = document.getElementById('weightInput');
        const activityInput = document.getElementById('activityInput');
        const digestionDetail = document.getElementById('digestionDetail');
        const assessmentQuestion = document.getElementById('assessmentQuestion');
        const assessmentFeedback = document.getElementById('assessmentFeedback');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupVisualizationTools();
        }

        // Setup visualization tools
        function setupVisualizationTools() {
            createDigestiveSystem();
            createNutritionWheel();
            setupEnzymeSimulator();
            createFoodPyramid();
            setupAssessment();
        }

        // Digestive system diagram
        function createDigestiveSystem() {
            digestiveSystem.innerHTML = '';
            
            // Create organs
            const organs = [
                { type: 'mouth', top: '20%', left: '10%', width: '40px', height: '30px' },
                { type: 'esophagus', top: 'calc(20% + 30px)', left: '15%', width: '20px', height: '80px' },
                { type: 'stomach', top: '35%', left: '25%', width: '60px', height: '40px' },
                { type: 'smallIntestine', top: '50%', left: '40%', width: '120px', height: '20px' },
                { type: 'largeIntestine', top: '45%', left: '60%', width: '80px', height: '60px' },
                { type: 'liver', top: '25%', left: '35%', width: '40px', height: '30px' },
                { type: 'pancreas', top: '40%', left: '35%', width: '25px', height: '15px' }
            ];
            
            organs.forEach(organ => {
                const div = document.createElement('div');
                div.className = organ.type;
                div.style.top = organ.top;
                div.style.left = organ.left;
                div.style.width = organ.width;
                div.style.height = organ.height;
                div.title = `${digestiveOrgans[organ.type].name}: ${digestiveOrgans[organ.type].function.substring(0, 100)}...`;
                div.onclick = () => showOrganInfo(organ.type);
                digestiveSystem.appendChild(div);
                
                // Add label
                const label = document.createElement('div');
                label.className = 'organ-label';
                label.textContent = digestiveOrgans[organ.type].name;
                label.style.top = `calc(${organ.top} - 25px)`;
                label.style.left = organ.left;
                label.onclick = () => showOrganInfo(organ.type);
                digestiveSystem.appendChild(label);
            });
            
            // Add gallbladder (smaller, near liver)
            const gallbladder = document.createElement('div');
            gallbladder.className = 'mouth'; // Reusing style
            gallbladder.style.top = '30%';
            gallbladder.style.left = '40%';
            gallbladder.style.width = '20px';
            gallbladder.style.height = '15px';
            gallbladder.style.background = digestiveOrgans.gallbladder.color;
            gallbladder.title = `${digestiveOrgans.gallbladder.name}: ${digestiveOrgans.gallbladder.function}`;
            gallbladder.onclick = () => showOrganInfo('gallbladder');
            digestiveSystem.appendChild(gallbladder);
            
            const gbLabel = document.createElement('div');
            gbLabel.className = 'organ-label';
            gbLabel.textContent = 'Gallbladder';
            gbLabel.style.top = '25%';
            gbLabel.style.left = '40%';
            gbLabel.onclick = () => showOrganInfo('gallbladder');
            digestiveSystem.appendChild(gbLabel);
            
            // Add title
            const title = document.createElement('div');
            title.textContent = "Human Digestive System";
            title.style.position = 'absolute';
            title.style.top = '10px';
            title.style.left = '50%';
            title.style.transform = 'translateX(-50%)';
            title.style.color = 'var(--text-primary)';
            title.style.fontWeight = 'bold';
            digestiveSystem.appendChild(title);
            
            // Add pathway arrows
            addPathwayArrows();
        }

        function addPathwayArrows() {
            // Simple pathway visualization
            const path = document.createElement('div');
            path.style.position = 'absolute';
            path.style.top = '30%';
            path.style.left = '12%';
            path.style.width = '80%';
            path.style.height = '40%';
            path.style.borderTop = '2px dashed var(--digestion-green)';
            path.style.borderRight = '2px dashed var(--digestion-green)';
            path.style.borderRadius = '0 20px 0 0';
            path.style.pointerEvents = 'none';
            digestiveSystem.appendChild(path);
            
            // Add direction indicators
            for (let i = 1; i <= 5; i++) {
                const arrow = document.createElement('div');
                arrow.style.position = 'absolute';
                arrow.style.top = '30%';
                arrow.style.left = `${10 + i * 15}%`;
                arrow.style.width = '0';
                arrow.style.height = '0';
                arrow.style.borderLeft = '6px solid transparent';
                arrow.style.borderRight = '6px solid transparent';
                arrow.style.borderTop = `10px solid var(--digestion-green)`;
                arrow.style.transform = 'rotate(90deg)';
                arrow.style.pointerEvents = 'none';
                digestiveSystem.appendChild(arrow);
            }
        }

        function showOrganInfo(organ) {
            const info = digestiveOrgans[organ];
            organInfo.innerHTML = `
                <strong style="color: ${info.color}">${info.name}</strong><br>
                <span style="color: var(--text-secondary)">Function:</span> ${info.function}<br>
                <span style="color: var(--enzymes-purple)">Enzymes:</span> ${info.enzymes}
            `;
            organInfo.classList.add('highlight');
            setTimeout(() => organInfo.classList.remove('highlight'), 1000);
        }

        function explainDigestiveProcess() {
            alert(`DIGESTIVE PROCESS - STEP BY STEP:

1. MOUTH (Ingestion & Mechanical Digestion)
   ‚Ä¢ Teeth chew food (mechanical)
   ‚Ä¢ Saliva moistens food, amylase begins starch digestion
   ‚Ä¢ Tongue forms bolus for swallowing

2. ESOPHAGUS (Transport)
   ‚Ä¢ Peristalsis moves bolus to stomach
   ‚Ä¢ Takes about 4-8 seconds

3. STOMACH (Storage & Protein Digestion)
   ‚Ä¢ Stores food 2-4 hours
   ‚Ä¢ Gastric juices (HCl + pepsin) begin protein digestion
   ‚Ä¢ Churns food into chyme (semi-liquid)

4. SMALL INTESTINE (Major Digestion & Absorption)
   ‚Ä¢ 6 meters long, most absorption here
   ‚Ä¢ Receives pancreatic enzymes and bile
   ‚Ä¢ Villi and microvilli increase surface area
   ‚Ä¢ Nutrients absorbed into bloodstream

5. LARGE INTESTINE (Water Absorption & Elimination)
   ‚Ä¢ Absorbs water, electrolytes
   ‚Ä¢ Forms feces
   ‚Ä¢ Houses beneficial bacteria (microbiome)
   ‚Ä¢ Stores feces until elimination

ACCESSORY ORGANS:
‚Ä¢ Liver: Produces bile, processes nutrients
‚Ä¢ Gallbladder: Stores and concentrates bile
‚Ä¢ Pancreas: Produces digestive enzymes and bicarbonate

Total transit time: 24-72 hours from mouth to elimination.`);
        }

        function showAccessoryOrgans() {
            alert(`ACCESSORY DIGESTIVE ORGANS:

1. LIVER (Largest internal organ)
   ‚Ä¢ Produces bile (1 liter/day)
   ‚Ä¢ Bile emulsifies fats (breaks into droplets)
   ‚Ä¢ Processes nutrients from digestion
   ‚Ä¢ Detoxifies harmful substances
   ‚Ä¢ Stores glycogen (energy reserve)

2. GALLBLADDER (Pear-shaped sac)
   ‚Ä¢ Stores and concentrates bile
   ‚Ä¢ Releases bile when fatty food enters duodenum
   ‚Ä¢ Can develop gallstones if bile hardens

3. PANCREAS (Dual function)
   ‚Ä¢ ENDOCRINE: Produces insulin and glucagon (blood sugar regulation)
   ‚Ä¢ EXOCRINE: Produces pancreatic juice containing:
     - Bicarbonate (neutralizes stomach acid)
     - Amylase (digests carbohydrates)
     - Lipase (digests fats)
     - Proteases (digest proteins: trypsin, chymotrypsin)

These organs are "accessory" because food doesn't pass through them, but they are essential for proper digestion.`);
        }

        function resetDigestiveSystem() {
            createDigestiveSystem();
            organInfo.textContent = "Click on any organ to learn about its function";
        }

        // Nutrition wheel
        function createNutritionWheel() {
            nutritionWheel.innerHTML = '';
            
            // Create center
            const center = document.createElement('div');
            center.className = 'wheel-center';
            center.textContent = "FOOD";
            nutritionWheel.appendChild(center);
            
            // Create segments
            const segmentCount = foodGroups.length;
            const angle = 360 / segmentCount;
            
            foodGroups.forEach((group, index) => {
                const segment = document.createElement('div');
                segment.className = 'wheel-segment';
                segment.style.background = group.color;
                segment.style.transform = `rotate(${index * angle}deg)`;
                segment.title = `${group.name}: ${group.nutrients}`;
                segment.onclick = () => showFoodGroupInfo(index);
                nutritionWheel.appendChild(segment);
                
                // Add label
                const label = document.createElement('div');
                label.textContent = group.name;
                label.style.position = 'absolute';
                label.style.top = '50%';
                label.style.left = '50%';
                label.style.transform = `rotate(${index * angle + angle/2}deg) translate(70px) rotate(${-index * angle - angle/2}deg)`;
                label.style.color = 'white';
                label.style.fontWeight = 'bold';
                label.style.fontSize = '0.8rem';
                label.style.textShadow = '1px 1px 2px black';
                label.style.cursor = 'pointer';
                label.onclick = () => showFoodGroupInfo(index);
                nutritionWheel.appendChild(label);
            });
        }

        function showFoodGroupInfo(index) {
            const group = foodGroups[index];
            foodGroupInfo.innerHTML = `
                <strong style="color: ${group.color}">${group.name}</strong><br>
                <span style="color: var(--text-secondary)">Examples:</span> ${group.examples.join(', ')}<br>
                <span style="color: var(--nutrition-blue)">Key Nutrients:</span> ${group.nutrients}<br>
                <span style="color: var(--digestion-green)">Daily Servings:</span> ${group.servings}
            `;
            foodGroupInfo.classList.add('highlight');
            setTimeout(() => foodGroupInfo.classList.remove('highlight'), 1000);
        }

        function showRecommendedServings() {
            let servings = "RECOMMENDED DAILY SERVINGS:\n\n";
            
            foodGroups.forEach(group => {
                servings += `${group.name}: ${group.servings}\n`;
                servings += `Examples: ${group.examples.slice(0, 3).join(', ')}\n\n`;
            });
            
            servings += "Serving Size Examples:\n";
            servings += "‚Ä¢ Fruits/Vegetables: 1 medium piece or ¬Ω cup cooked\n";
            servings += "‚Ä¢ Grains: 1 slice bread or ¬Ω cup rice/pasta\n";
            servings += "‚Ä¢ Protein: 3 oz meat or ¬Ω cup beans\n";
            servings += "‚Ä¢ Dairy: 1 cup milk or 1.5 oz cheese\n";
            
            alert(servings);
        }

        // Enzyme simulator
        function setupEnzymeSimulator() {
            changeEnzyme('amylase');
        }

        function changeEnzyme(enzymeType) {
            appState.currentEnzyme = enzymeType;
            const enzyme = enzymes[enzymeType];
            
            currentEnzymeDisplay.textContent = enzyme.name;
            currentSubstrateDisplay.textContent = enzyme.substrate;
            
            enzymeSimulator.innerHTML = '';
            enzymeInfo.textContent = `${enzyme.name} breaks down ${enzyme.substrate} into ${enzyme.products} at pH ${enzyme.optimalPH}`;
            
            // Create substrate molecules
            const substrateCount = enzymeType === 'lipase' ? 8 : enzymeType === 'protease' ? 12 : 15;
            
            for (let i = 0; i < substrateCount; i++) {
                const molecule = document.createElement('div');
                molecule.className = 'molecule';
                molecule.style.width = enzymeType === 'lipase' ? '20px' : '15px';
                molecule.style.height = enzymeType === 'lipase' ? '20px' : '15px';
                molecule.style.background = enzyme.color;
                molecule.style.left = `${10 + Math.random() * 80}%`;
                molecule.style.top = `${10 + Math.random() * 80}%`;
                molecule.textContent = enzymeType === 'amylase' ? 'S' : enzymeType === 'protease' ? 'P' : 'F';
                molecule.dataset.type = 'substrate';
                enzymeSimulator.appendChild(molecule);
            }
            
            // Create enzyme molecules (fewer)
            for (let i = 0; i < 3; i++) {
                const enzymeMolecule = document.createElement('div');
                enzymeMolecule.className = 'molecule';
                enzymeMolecule.style.width = '25px';
                enzymeMolecule.style.height = '25px';
                enzymeMolecule.style.background = '#FF9800';
                enzymeMolecule.style.left = `${20 + i * 20}%`;
                enzymeMolecule.style.top = '50%';
                enzymeMolecule.textContent = 'E';
                enzymeMolecule.dataset.type = 'enzyme';
                enzymeSimulator.appendChild(enzymeMolecule);
            }
        }

        function startEnzymeAction() {
            const enzyme = enzymes[appState.currentEnzyme];
            const substrates = enzymeSimulator.querySelectorAll('[data-type="substrate"]');
            const enzymes = enzymeSimulator.querySelectorAll('[data-type="enzyme"]');
            
            enzymeInfo.textContent = `${enzyme.name} is breaking down ${enzyme.substrate} into ${enzyme.products}...`;
            
            // Animate digestion
            substrates.forEach((substrate, index) => {
                setTimeout(() => {
                    substrate.classList.add('digest-animation');
                    substrate.style.background = '#4CAF50'; // Product color
                    substrate.textContent = appState.currentEnzyme === 'amylase' ? 'M' : 
                                          appState.currentEnzyme === 'protease' ? 'AA' : 'FA';
                    
                    // Move toward nearest enzyme
                    const enzymeRect = enzymes[0].getBoundingClientRect();
                    const substrateRect = substrate.getBoundingClientRect();
                    
                    setTimeout(() => {
                        substrate.style.opacity = '0.5';
                        substrate.style.transform = 'scale(0.7)';
                    }, 500);
                    
                }, index * 200);
            });
            
            setTimeout(() => {
                enzymeInfo.innerHTML = `<span style="color: var(--digestion-green)">Digestion Complete!</span> ${enzyme.substrate} ‚Üí ${enzyme.products}`;
                // Reset after 3 seconds
                setTimeout(() => changeEnzyme(appState.currentEnzyme), 3000);
            }, substrates.length * 200 + 1000);
        }

        // Food pyramid
        function createFoodPyramid() {
            foodPyramid.innerHTML = '';
            
            pyramidLevels.forEach((level, index) => {
                const levelDiv = document.createElement('div');
                levelDiv.className = 'pyramid-level';
                levelDiv.style.background = level.color;
                levelDiv.style.bottom = `${(index) * 40}px`;
                levelDiv.style.width = `${100 - (index * 20)}%`;
                levelDiv.style.height = '40px';
                levelDiv.textContent = level.name;
                levelDiv.title = `${level.name}: ${level.recommendation}`;
                levelDiv.onclick = () => showPyramidLevelInfo(index);
                foodPyramid.appendChild(levelDiv);
            });
            
            // Add tip
            const tip = document.createElement('div');
            tip.textContent = "‚ñ≤ Eat More ‚ñ≤";
            tip.style.position = 'absolute';
            tip.style.bottom = '170px';
            tip.style.left = '50%';
            tip.style.transform = 'translateX(-50%)';
            tip.style.color = 'var(--text-secondary)';
            tip.style.fontSize = '0.8rem';
            tip.style.fontWeight = 'bold';
            foodPyramid.appendChild(tip);
        }

        function showPyramidLevelInfo(index) {
            const level = pyramidLevels[index];
            pyramidInfo.innerHTML = `
                <strong style="color: ${level.color}">${level.name}</strong><br>
                <span style="color: var(--text-secondary)">Recommendation:</span> ${level.recommendation}<br>
                <span style="color: var(--nutrition-blue)">Examples:</span> ${level.foods}
            `;
            pyramidInfo.classList.add('highlight');
            setTimeout(() => pyramidInfo.classList.remove('highlight'), 1000);
        }

        function explainPyramid() {
            alert(`HEALTHY EATING PYRAMID GUIDE:

BASE (Eat Most):
‚Ä¢ Grains (6-11 servings)
  - Whole grains: brown rice, whole wheat bread, oats
  - Provide energy, fiber, B vitamins

SECOND LEVEL (Eat Plenty):
‚Ä¢ Vegetables (3-5 servings)
  - All colors: leafy greens, carrots, peppers
  - Provide vitamins, minerals, fiber
  
‚Ä¢ Fruits (2-4 servings)
  - Fresh, frozen, or canned (in juice)
  - Provide vitamins, antioxidants, fiber

THIRD LEVEL (Eat Moderately):
‚Ä¢ Dairy (2-3 servings)
  - Milk, yogurt, cheese
  - Provide calcium, vitamin D, protein
  
‚Ä¢ Protein (2-3 servings)
  - Meat, fish, eggs, beans, nuts
  - Provide protein, iron, zinc

TOP (Eat Sparingly):
‚Ä¢ Fats, Oils, Sweets
  - Use healthy oils (olive, canola)
  - Limit saturated and trans fats
  - Limit added sugars

Key Principles:
‚Ä¢ Variety: Eat different foods from each group
‚Ä¢ Moderation: Control portion sizes
‚Ä¢ Balance: Include all food groups
‚Ä¢ Nutrient Density: Choose foods rich in nutrients`);
        }

        function showPortionSizes() {
            alert(`TYPICAL PORTION SIZES:

Grains:
‚Ä¢ 1 slice bread
‚Ä¢ ¬Ω cup cooked rice/pasta
‚Ä¢ 1 oz dry cereal
‚Ä¢ ¬Ω bagel or English muffin

Vegetables:
‚Ä¢ 1 cup raw leafy vegetables
‚Ä¢ ¬Ω cup cooked or chopped raw vegetables
‚Ä¢ ¬Ω cup vegetable juice

Fruits:
‚Ä¢ 1 medium fruit (apple, banana, orange)
‚Ä¢ ¬Ω cup chopped, cooked, or canned fruit
‚Ä¢ ¬Ω cup fruit juice

Dairy:
‚Ä¢ 1 cup milk or yogurt
‚Ä¢ 1.5 oz natural cheese
‚Ä¢ 2 oz processed cheese

Protein:
‚Ä¢ 2-3 oz cooked meat, poultry, fish
‚Ä¢ ¬Ω cup cooked beans
‚Ä¢ 1 egg
‚Ä¢ 2 tablespoons peanut butter
‚Ä¢ ¬Ω oz nuts or seeds

Fats/Oils:
‚Ä¢ 1 teaspoon oil or butter
‚Ä¢ 1 tablespoon salad dressing
‚Ä¢ 1 slice bacon

Handy Visual Guides:
‚Ä¢ Meat: Deck of cards
‚Ä¢ Cheese: 4 dice
‚Ä¢ Pasta: Tennis ball
‚Ä¢ Peanut butter: Ping pong ball
‚Ä¢ Oil: Tip of thumb`);
        }

        // Nutrient calculator
        function calculateNutrition() {
            const age = parseInt(ageInput.value);
            const gender = genderInput.value;
            const weight = parseFloat(weightInput.value);
            const activity = activityInput.value;
            
            if (!age || !weight || age < 1 || weight < 20) {
                calculatorResult.textContent = "Please enter valid age and weight";
                calculatorResult.style.color = "var(--systems-red)";
                return;
            }
            
            // Calculate BMR using Mifflin-St Jeor Equation
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * (age * 6 + 120) - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * (age * 6 + 120) - 5 * age - 161;
            }
            
            // Activity multipliers
            const activityMultipliers = {
                'sedentary': 1.2,
                'light': 1.375,
                'moderate': 1.55,
                'active': 1.725,
                'very_active': 1.9
            };
            
            const tdee = bmr * activityMultipliers[activity];
            
            // Macronutrient breakdown (percentage of calories)
            const proteinPercent = 0.15; // 15%
            const fatPercent = 0.25;    // 25%
            const carbPercent = 0.60;   // 60%
            
            // Calculate grams (4 cal/g protein & carbs, 9 cal/g fat)
            const proteinGrams = Math.round((tdee * proteinPercent) / 4);
            const fatGrams = Math.round((tdee * fatPercent) / 9);
            const carbGrams = Math.round((tdee * carbPercent) / 4);
            
            // Calculate recommended water intake (ml)
            const waterMl = Math.round(weight * 30); // 30 ml per kg
            
            calculatorDisplay.innerHTML = `
                <div style="margin-bottom: 10px; color: var(--digestion-green); font-weight: bold;">Daily Nutritional Requirements:</div>
                <div>‚Ä¢ Total Calories: <strong>${Math.round(tdee)}</strong> kcal/day</div>
                <div>‚Ä¢ Protein: <strong>${proteinGrams}g</strong> (${Math.round(tdee * proteinPercent)} kcal)</div>
                <div>‚Ä¢ Carbohydrates: <strong>${carbGrams}g</strong> (${Math.round(tdee * carbPercent)} kcal)</div>
                <div>‚Ä¢ Fats: <strong>${fatGrams}g</strong> (${Math.round(tdee * fatPercent)} kcal)</div>
                <div>‚Ä¢ Water: <strong>${waterMl}ml</strong> (‚âà ${Math.round(waterMl/250)} glasses)</div>
            `;
            
            calculatorResult.innerHTML = `<strong>Summary:</strong> For a ${age}-year-old ${gender} (${weight}kg, ${activity} activity)`;
            calculatorResult.style.color = "var(--digestion-green)";
        }

        function calculateCalories() {
            const age = parseInt(ageInput.value);
            const gender = genderInput.value;
            const weight = parseFloat(weightInput.value);
            const activity = activityInput.value;
            
            if (!age || !weight) {
                alert("Please enter age and weight first");
                return;
            }
            
            // Simple calorie calculation
            let baseCalories = gender === 'male' ? 2500 : 2000;
            baseCalories += (weight - 70) * 10; // Adjust for weight
            
            const activityMultipliers = {
                'sedentary': 1.0,
                'light': 1.2,
                'moderate': 1.4,
                'active': 1.6,
                'very_active': 1.8
            };
            
            const calories = Math.round(baseCalories * activityMultipliers[activity]);
            
            calculatorDisplay.innerHTML = `
                <div style="color: var(--nutrition-blue); font-weight: bold;">Calorie Calculation:</div>
                <div>Base metabolism: ${gender === 'male' ? 2500 : 2000} kcal</div>
                <div>Weight adjustment: +${Math.round((weight - 70) * 10)} kcal</div>
                <div>Activity multiplier: √ó${activityMultipliers[activity]}</div>
                <div style="margin-top: 10px; font-size: 1.2rem; color: var(--digestion-green);">
                    <strong>Total: ${calories} kcal/day</strong>
                </div>
            `;
            
            calculatorResult.innerHTML = `<strong>Daily Calorie Needs:</strong> ${calories} kcal`;
            calculatorResult.style.color = "var(--digestion-green)";
        }

        function clearCalculator() {
            ageInput.value = '';
            genderInput.value = 'male';
            weightInput.value = '';
            activityInput.value = 'sedentary';
            calculatorDisplay.textContent = "Enter your details to calculate daily requirements";
            calculatorResult.textContent = "Enter your details above";
            calculatorResult.style.color = "var(--text-secondary)";
        }

        // Comparison table explanations
        function explainDigestionType(type) {
            const explanations = {
                'purpose': {
                    title: "Purpose of Digestion Types",
                    explanation: "Mechanical digestion physically breaks food into smaller pieces (increasing surface area for enzymes). Chemical digestion uses enzymes to break chemical bonds, converting complex molecules into absorbable units."
                },
                'process': {
                    title: "Digestion Processes",
                    explanation: "Mechanical: Chewing (mouth), churning (stomach), segmentation (small intestine). Chemical: Enzyme action throughout digestive tract - amylase (carbs), protease (proteins), lipase (fats)."
                },
                'location': {
                    title: "Locations of Digestion",
                    explanation: "Both occur throughout digestive system: Mouth (mechanical: chewing; chemical: salivary amylase). Stomach (mechanical: churning; chemical: pepsin). Small intestine (mechanical: segmentation; chemical: pancreatic and brush border enzymes)."
                },
                'result': {
                    title: "Results of Digestion",
                    explanation: "Mechanical digestion results in smaller food particles. Chemical digestion results in simple molecules: carbohydrates ‚Üí monosaccharides, proteins ‚Üí amino acids, fats ‚Üí fatty acids + glycerol."
                },
                'examples': {
                    title: "Examples",
                    explanation: "Mechanical: Teeth cutting/grinding, stomach muscles mixing food. Chemical: Amylase breaking starch into maltose, pepsin breaking proteins into peptides, lipase breaking fats into fatty acids."
                }
            };
            
            const exp = explanations[type];
            digestionDetail.innerHTML = `
                <strong style="color: var(--systems-red)">${exp.title}</strong><br>
                ${exp.explanation}
            `;
            digestionDetail.style.display = 'block';
        }

        // Health assessment
        function setupAssessment() {
            updateAssessmentQuestion();
        }

        function updateAssessmentQuestion() {
            const question = assessmentQuestions[appState.currentAssessment];
            assessmentQuestion.textContent = question.question;
            assessmentFeedback.textContent = `Recommendation: ${question.recommendation}`;
        }

        function answerAssessment(points) {
            appState.assessmentScore += points;
            assessmentFeedback.innerHTML = `<span style="color: ${points >= 4 ? 'var(--digestion-green)' : 'var(--health-orange)'}">Score: ${points}/5 points</span><br>${assessmentQuestions[appState.currentAssessment].recommendation}`;
            assessmentFeedback.classList.add('highlight');
            setTimeout(() => assessmentFeedback.classList.remove('highlight'), 1000);
        }

        function nextAssessmentQuestion() {
            appState.currentAssessment = (appState.currentAssessment + 1) % assessmentQuestions.length;
            updateAssessmentQuestion();
        }

        function showAssessmentResults() {
            const maxScore = assessmentQuestions.length * 5;
            const percentage = Math.round((appState.assessmentScore / maxScore) * 100);
            
            let message;
            if (percentage >= 80) {
                message = "Excellent! You have very healthy eating habits!";
            } else if (percentage >= 60) {
                message = "Good! You have mostly healthy habits with some room for improvement.";
            } else {
                message = "There's room for improvement. Consider adjusting your eating habits for better health.";
            }
            
            alert(`NUTRITION ASSESSMENT RESULTS:

Your Score: ${appState.assessmentScore}/${maxScore} (${percentage}%)

${message}

Recommendations:
1. Eat 5+ servings of fruits/vegetables daily
2. Drink 8+ glasses of water daily
3. Choose whole grains over refined grains
4. Limit added sugars and processed foods
5. Include protein with each meal
6. Practice mindful eating

Remember: Small, consistent changes lead to big health improvements!`);
        }

        // Additional visualization functions
        function explainAbsorption() {
            alert(`NUTRIENT ABSORPTION IN SMALL INTESTINE:

The small intestine is where MOST nutrient absorption occurs, thanks to:
‚Ä¢ Huge surface area (200-300 m¬≤ - size of tennis court!)
‚Ä¢ Villi: Finger-like projections
‚Ä¢ Microvilli: Even smaller projections on villi

ABSORPTION MECHANISMS:

1. SIMPLE DIFFUSION
   ‚Ä¢ Small nutrients (water, vitamins)
   ‚Ä¢ High ‚Üí Low concentration
   ‚Ä¢ No energy needed

2. FACILITATED DIFFUSION
   ‚Ä¢ Larger molecules (fructose)
   ‚Ä¢ Uses carrier proteins
   ‚Ä¢ No energy needed

3. ACTIVE TRANSPORT
   ‚Ä¢ Against concentration gradient
   ‚Ä¢ Uses carrier proteins + ATP energy
   ‚Ä¢ Examples: Glucose, amino acids

4. ENDOCYTOSIS
   ‚Ä¢ Large particles engulfed
   ‚Ä¢ Cell membrane forms vesicle

WHAT GETS ABSORBED WHERE?
‚Ä¢ Duodenum: Iron, calcium, magnesium
‚Ä¢ Jejunum: Carbohydrates, proteins, fats, vitamins
‚Ä¢ Ileum: Bile salts, vitamin B12

After absorption, nutrients enter bloodstream ‚Üí liver ‚Üí distributed to body cells.`);
        }

        function showVilliDiagram() {
            alert(`VILLI STRUCTURE - Maximizing Absorption

Villi are tiny finger-like projections lining small intestine:

STRUCTURE:
‚Ä¢ Height: 0.5-1.5 mm
‚Ä¢ Density: 10-40 villi/mm¬≤
‚Ä¢ Each villus contains:
  - Blood capillaries (absorb monosaccharides, amino acids)
  - Lacteal (lymphatic vessel for fat absorption)
  - Goblet cells (produce mucus)
  - Enterocytes (absorptive cells with microvilli)

MICROVILLI (Brush Border):
‚Ä¢ Even smaller projections on villi
‚Ä¢ Contain digestive enzymes
‚Ä¢ Increase surface area 20x more

SURFACE AREA AMPLIFICATION:
1. Folds of Kerckring: 3x increase
2. Villi: 10x increase
3. Microvilli: 20x increase
TOTAL: 600x increase in surface area!

This enormous surface area (200-300 m¬≤) allows efficient nutrient absorption.

FUN FACT: If small intestine were smooth, it would need to be 600 meters long to absorb the same amount of nutrients!`);
        }

        // Concept detail
        window.showConceptDetail = function(concept) {
            let info = "";
            
            if (concept === 'nutrients') {
                info = `üçé NUTRIENTS & FOOD GROUPS

Nutrients = Substances in food that body needs for:
‚Ä¢ Growth
‚Ä¢ Energy
‚Ä¢ Repair
‚Ä¢ Maintenance

MACRONUTRIENTS (Needed in large amounts):

1. CARBOHYDRATES (4 cal/g)
   ‚Ä¢ Main energy source
   ‚Ä¢ Types: Simple (sugars), Complex (starches, fiber)
   ‚Ä¢ Sources: Grains, fruits, vegetables, legumes
   ‚Ä¢ Digestion: Starch ‚Üí Disaccharides ‚Üí Monosaccharides

2. PROTEINS (4 cal/g)
   ‚Ä¢ Growth, repair, enzymes, hormones
   ‚Ä¢ Made of amino acids (9 essential)
   ‚Ä¢ Sources: Meat, fish, eggs, dairy, beans, nuts
   ‚Ä¢ Digestion: Proteins ‚Üí Peptides ‚Üí Amino acids

3. FATS (9 cal/g)
   ‚Ä¢ Energy storage, insulation, vitamin absorption
   ‚Ä¢ Types: Saturated, Unsaturated, Trans
   ‚Ä¢ Sources: Oils, butter, nuts, avocados, fatty fish
   ‚Ä¢ Digestion: Fats ‚Üí Fatty acids + Glycerol

MICRONUTRIENTS (Needed in small amounts):

4. VITAMINS
   ‚Ä¢ Fat-soluble: A, D, E, K (stored in body)
   ‚Ä¢ Water-soluble: B complex, C (not stored)
   ‚Ä¢ Functions: Coenzymes, antioxidants, bone health

5. MINERALS
   ‚Ä¢ Major: Calcium, Phosphorus, Potassium, Sodium
   ‚Ä¢ Trace: Iron, Zinc, Iodine, Selenium
   ‚Ä¢ Functions: Bone structure, nerve function, oxygen transport

6. WATER
   ‚Ä¢ Most essential nutrient
   ‚Ä¢ 60% of body weight
   ‚Ä¢ Functions: Solvent, temperature regulation, transport

FOOD GROUPS:
‚Ä¢ Fruits: Vitamins, fiber
‚Ä¢ Vegetables: Vitamins, minerals, fiber
‚Ä¢ Grains: Energy, B vitamins, fiber
‚Ä¢ Protein foods: Amino acids, minerals
‚Ä¢ Dairy: Calcium, vitamin D, protein`;
            } else if (concept === 'digestion') {
                info = `üî¨ DIGESTIVE SYSTEM

The digestive system processes food:
Ingestion ‚Üí Digestion ‚Üí Absorption ‚Üí Elimination

ORGANS & FUNCTIONS:

1. MOUTH
   ‚Ä¢ Mechanical: Chewing (mastication)
   ‚Ä¢ Chemical: Salivary amylase (starch ‚Üí maltose)
   ‚Ä¢ Forms bolus for swallowing

2. ESOPHAGUS
   ‚Ä¢ Transports bolus to stomach via peristalsis
   ‚Ä¢ No digestion occurs here

3. STOMACH
   ‚Ä¢ Storage (can hold 1-1.5 liters)
   ‚Ä¢ Mechanical: Churning (forms chyme)
   ‚Ä¢ Chemical: Gastric juice (HCl + pepsin)
   ‚Ä¢ Pepsin: Proteins ‚Üí Peptides
   ‚Ä¢ Mucus protects stomach lining

4. SMALL INTESTINE (6-7 meters)
   ‚Ä¢ Duodenum: Receives pancreatic enzymes & bile
   ‚Ä¢ Jejunum: Most digestion & absorption
   ‚Ä¢ Ileum: Final absorption
   ‚Ä¢ Villi & microvilli increase surface area 600x!

5. LARGE INTESTINE (1.5 meters)
   ‚Ä¢ Cecum, colon, rectum
   ‚Ä¢ Absorbs water, electrolytes
   ‚Ä¢ Houses beneficial bacteria (microbiome)
   ‚Ä¢ Forms and stores feces

ACCESSORY ORGANS:

6. LIVER
   ‚Ä¢ Largest internal organ
   ‚Ä¢ Produces bile (emulsifies fats)
   ‚Ä¢ Processes nutrients
   ‚Ä¢ Detoxification

7. GALLBLADDER
   ‚Ä¢ Stores and concentrates bile
   ‚Ä¢ Releases bile when fatty food enters duodenum

8. PANCREAS
   ‚Ä¢ Exocrine: Produces digestive enzymes
   ‚Ä¢ Endocrine: Produces insulin & glucagon

DIGESTIVE PROCESS TIME:
‚Ä¢ Mouth to stomach: 4-8 seconds
‚Ä¢ Stomach emptying: 2-4 hours
‚Ä¢ Small intestine: 3-5 hours
‚Ä¢ Large intestine: 10 hours - several days
‚Ä¢ Total: 24-72 hours`;
            } else if (concept === 'enzymes') {
                info = `‚öóÔ∏è ENZYMES & CHEMICAL DIGESTION

Enzymes = Biological catalysts
‚Ä¢ Proteins that speed up reactions
‚Ä¢ Not consumed in reaction
‚Ä¢ Specific to substrates (lock-and-key model)

KEY DIGESTIVE ENZYMES:

1. CARBOHYDRASE ENZYMES
   ‚Ä¢ Salivary Amylase
     - Source: Salivary glands
     - Site: Mouth
     - Action: Starch ‚Üí Maltose
     - Optimal pH: 6.7-7.0
   
   ‚Ä¢ Pancreatic Amylase
     - Source: Pancreas
     - Site: Small intestine
     - Action: Starch ‚Üí Maltose
   
   ‚Ä¢ Brush Border Enzymes
     - Maltase: Maltose ‚Üí Glucose
     - Sucrase: Sucrose ‚Üí Glucose + Fructose
     - Lactase: Lactose ‚Üí Glucose + Galactose

2. PROTEASE ENZYMES
   ‚Ä¢ Pepsin
     - Source: Stomach (as pepsinogen)
     - Site: Stomach
     - Action: Proteins ‚Üí Peptides
     - Optimal pH: 1.5-2.0 (acidic)
   
   ‚Ä¢ Trypsin & Chymotrypsin
     - Source: Pancreas (as trypsinogen)
     - Site: Small intestine
     - Action: Proteins/Peptides ‚Üí Smaller peptides
   
   ‚Ä¢ Peptidases
     - Source: Brush border
     - Action: Peptides ‚Üí Amino acids

3. LIPASE ENZYMES
   ‚Ä¢ Gastric Lipase
     - Source: Stomach
     - Action: Fats (limited action)
   
   ‚Ä¢ Pancreatic Lipase
     - Source: Pancreas
     - Site: Small intestine
     - Action: Fats ‚Üí Fatty acids + Glycerol
     - Needs bile for emulsification first

ENZYME CHARACTERISTICS:
‚Ä¢ Temperature sensitive: Optimal 37¬∞C
‚Ä¢ pH sensitive: Each has optimal pH
‚Ä¢ Substrate specific: One enzyme, one reaction
‚Ä¢ Can be denatured by extremes

BILE (Not an enzyme):
‚Ä¢ Produced by liver, stored in gallbladder
‚Ä¢ Emulsifies fats (physical breakdown)
‚Ä¢ Increases surface area for lipase action`;
            } else if (concept === 'health') {
                info = `üí™ HEALTH & NUTRITION

BALANCED DIET PRINCIPLES:

1. ADEQUACY
   ‚Ä¢ Provides all essential nutrients
   ‚Ä¢ Meets energy needs

2. MODERATION
   ‚Ä¢ Avoid excess of any nutrient
   ‚Ä¢ Control portion sizes

3. VARIETY
   ‚Ä¢ Eat different foods
   ‚Ä¢ Ensures all nutrients

4. NUTRIENT DENSITY
   ‚Ä¢ More nutrients, fewer calories
   ‚Ä¢ Choose whole foods over processed

NUTRITIONAL GUIDELINES:

DAILY SERVINGS (Adult):
‚Ä¢ Fruits: 2-4 servings
‚Ä¢ Vegetables: 3-5 servings
‚Ä¢ Grains: 6-11 servings (mostly whole)
‚Ä¢ Protein: 2-3 servings
‚Ä¢ Dairy: 2-3 servings
‚Ä¢ Fats/Oils: Use sparingly

CALORIE NEEDS (Average):
‚Ä¢ Sedentary women: 1,600-2,000 kcal
‚Ä¢ Active women: 2,000-2,400 kcal
‚Ä¢ Sedentary men: 2,000-2,400 kcal
‚Ä¢ Active men: 2,400-3,000 kcal

HEALTH INDICATORS:

1. BMI (Body Mass Index)
   ‚Ä¢ Underweight: <18.5
   ‚Ä¢ Normal: 18.5-24.9
   ‚Ä¢ Overweight: 25-29.9
   ‚Ä¢ Obese: ‚â•30

2. Waist Circumference
   ‚Ä¢ Men: <102 cm (40 in)
   ‚Ä¢ Women: <88 cm (35 in)

NUTRITION-RELATED DISEASES:

1. DEFICIENCY DISEASES
   ‚Ä¢ Scurvy: Vitamin C deficiency
   ‚Ä¢ Rickets: Vitamin D deficiency
   ‚Ä¢ Anemia: Iron deficiency
   ‚Ä¢ Goiter: Iodine deficiency

2. EXCESS-RELATED DISEASES
   ‚Ä¢ Obesity: Excess calories
   ‚Ä¢ Type 2 Diabetes: High sugar intake
   ‚Ä¢ Heart Disease: High saturated/trans fats
   ‚Ä¢ Hypertension: High sodium

HEALTHY EATING TIPS:
‚Ä¢ Eat breakfast daily
‚Ä¢ Drink water instead of sugary drinks
‚Ä¢ Include protein with each meal
‚Ä¢ Eat slowly, mindfully
‚Ä¢ Cook at home more often
‚Ä¢ Read food labels
‚Ä¢ Plan meals ahead`;
            } else if (concept === 'systems') {
                info = `üîÑ BODY SYSTEMS INTERACTION

Digestive system doesn't work alone - it interacts with:

1. CIRCULATORY SYSTEM
   ‚Ä¢ Transports absorbed nutrients
   ‚Ä¢ Delivers oxygen to digestive organs
   ‚Ä¢ Removes carbon dioxide and wastes
   ‚Ä¢ Portal vein carries nutrients to liver first

2. NERVOUS SYSTEM
   ‚Ä¢ Controls digestive processes
   ‚Ä¢ Autonomic nervous system:
     - Parasympathetic: "Rest and digest"
     - Sympathetic: Inhibits digestion during stress
   ‚Ä¢ Enteric nervous system: "Second brain" in gut

3. ENDOCRINE SYSTEM
   ‚Ä¢ Hormones regulate digestion:
     - Gastrin: Stimulates gastric juice
     - Secretin: Stimulates pancreatic bicarbonate
     - CCK (Cholecystokinin): Stimulates bile release
     - Insulin/Glucagon: Regulate blood glucose

4. LYMPHATIC SYSTEM
   ‚Ä¢ Absorbs fats via lacteals in villi
   ‚Ä¢ Transports fat-soluble vitamins
   ‚Ä¢ Immune function in gut-associated lymphoid tissue (GALT)

5. MUSCULAR SYSTEM
   ‚Ä¢ Skeletal muscles: Chewing, swallowing
   ‚Ä¢ Smooth muscles: Peristalsis, segmentation
   ‚Ä¢ Sphincter control

6. EXCRETORY SYSTEM
   ‚Ä¢ Kidneys filter wastes from blood
   ‚Ä¢ Regulate water and electrolyte balance
   ‚Ä¢ Excrete metabolic wastes

7. RESPIRATORY SYSTEM
   ‚Ä¢ Provides oxygen for cellular respiration
   ‚Ä¢ Removes carbon dioxide produced by metabolism

8. INTEGUMENTARY SYSTEM
   ‚Ä¢ Vitamin D synthesis in skin (with sunlight)
   ‚Ä¢ Temperature regulation

INTERCONNECTED PROCESS EXAMPLE:
Eating a sandwich ‚Üí Nervous system signals saliva production ‚Üí Circulatory system delivers nutrients ‚Üí Endocrine system releases insulin ‚Üí Cells use glucose for energy with oxygen from respiratory system ‚Üí Wastes removed by excretory system.`;
            } else {
                info = `üè• REAL APPLICATIONS OF NUTRITION SCIENCE

1. CLINICAL NUTRITION
   ‚Ä¢ Medical Nutrition Therapy
     - Diabetes management
     - Cardiovascular disease prevention
     - Renal (kidney) diets
     - Oncology (cancer) nutrition support
   
   ‚Ä¢ Enteral & Parenteral Nutrition
     - Tube feeding for patients who can't swallow
     - Intravenous nutrition for non-functioning GI tract

2. PUBLIC HEALTH NUTRITION
   ‚Ä¢ School lunch programs
   ‚Ä¢ Food fortification (adding nutrients)
   ‚Ä¢ Nutrition education campaigns
   ‚Ä¢ Food safety regulations

3. SPORTS NUTRITION
   ‚Ä¢ Pre-competition meals
   ‚Ä¢ Hydration strategies
   ‚Ä¢ Recovery nutrition
   ‚Ä¢ Supplement use (evidence-based)

4. FOOD SCIENCE & TECHNOLOGY
   ‚Ä¢ Food preservation methods
   - Pasteurization, canning, freezing, drying
   ‚Ä¢ Functional foods
   - Probiotics, prebiotics, fortified foods
   ‚Ä¢ Food safety
   - HACCP (Hazard Analysis Critical Control Points)

5. NUTRITIONAL EPIDEMIOLOGY
   ‚Ä¢ Studying diet-disease relationships
   ‚Ä¢ Large population studies
   ‚Ä¢ Identifying risk factors

6. NUTRITIONAL GENOMICS
   ‚Ä¢ Personalized nutrition based on genetics
   ‚Ä¢ Nutrigenetics: How genes affect nutrient metabolism
   ‚Ä¢ Nutrigenomics: How nutrients affect gene expression

7. SUSTAINABLE NUTRITION
   ‚Ä¢ Environmental impact of food choices
   ‚Ä¢ Plant-based diets
   ‚Ä¢ Local and seasonal eating
   ‚Ä¢ Food waste reduction

8. GLOBAL NUTRITION
   ‚Ä¢ Addressing malnutrition worldwide
   ‚Ä¢ Food security initiatives
   ‚Ä¢ Micronutrient deficiency programs
   ‚Ä¢ Emergency nutrition in disasters

CAREERS IN NUTRITION:
‚Ä¢ Registered Dietitian/Nutritionist
‚Ä¢ Food Scientist
‚Ä¢ Public Health Nutritionist
‚Ä¢ Sports Nutritionist
‚Ä¢ Food Service Manager
‚Ä¢ Nutrition Researcher
‚Ä¢ Food Policy Analyst

ETHICAL CONSIDERATIONS:
‚Ä¢ Food advertising to children
‚Ä¢ Supplement industry regulation
‚Ä¢ Genetic testing privacy
‚Ä¢ Food access equity
‚Ä¢ Cultural food practices`;
            }
            
            alert(info);
        };

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other Science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Create nutrition tip display
        function createNutritionTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'nutrition-tip';
            tipDiv.innerHTML = `<strong>Nutrition Tip:</strong> ${nutritionTips[Math.floor(Math.random() * nutritionTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / allQuestions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            nutrientsScore.textContent = appState.nutrientsScore;
            digestionScore.textContent = appState.digestionScore;
            enzymesScore.textContent = appState.enzymesScore;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You've mastered nutrition and digestion!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Excellent work! Your understanding of nutrition is impressive!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! You're developing strong nutrition knowledge!";
            } else {
                scoreMessage.textContent = "Keep practicing! Good nutrition is key to health!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = allQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${allQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / allQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            nutritionTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            nutritionTip.appendChild(createNutritionTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = allQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                
                // Track scores by question type
                if (question.type === 'nutrients') appState.nutrientsScore++;
                if (question.type === 'digestion') appState.digestionScore++;
                if (question.type === 'enzymes') appState.enzymesScore++;
                if (question.type === 'health') appState.healthScore++;
                if (question.type === 'systems') appState.systemsScore++;
                if (question.type === 'applications') appState.applicationsScore++;
                
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.nutrientsScore = 0;
            appState.digestionScore = 0;
            appState.enzymesScore = 0;
            appState.healthScore = 0;
            appState.systemsScore = 0;
            appState.applicationsScore = 0;
            appState.assessmentScore = 0;
            appState.currentAssessment = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin nutrition practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.nutrientsScore = 0;
            appState.digestionScore = 0;
            appState.enzymesScore = 0;
            appState.healthScore = 0;
            appState.systemsScore = 0;
            appState.applicationsScore = 0;
            appState.assessmentScore = 0;
            appState.currentAssessment = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
