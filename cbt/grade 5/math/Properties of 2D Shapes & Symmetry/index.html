<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 Math - Properties of 2D Shapes & Symmetry | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Math Theme */
        :root {
            --primary-purple: #9C27B0;
            --secondary-pink: #E91E63;
            --accent-teal: #00BCD4;
            --accent-amber: #FFC107;
            --accent-lime: #CDDC39;
            --accent-green: #4CAF50;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(156, 39, 176, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-purple);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-primary:hover {
            background: #7B1FA2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-pink);
            color: white;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }

        .btn-secondary:hover {
            background: #C2185B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-purple);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-purple), var(--secondary-pink));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* New Compact Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-teal));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-pink);
        }

        .option.correct .option-letter {
            background: var(--primary-purple);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(156, 39, 176, 0.1);
            border-left: 5px solid var(--primary-purple);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-purple);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-purple);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Shape Visualization */
        .shape-visualization {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .shape-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
            width: 100%;
        }

        @media (max-width: 768px) {
            .shape-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .shape-item {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .shape-item.active {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.1);
        }

        .shape-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .shape-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-purple);
        }

        .shape-properties {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Symmetry Line Display */
        .symmetry-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .symmetry-canvas {
            width: 250px;
            height: 250px;
            position: relative;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 10px;
            border: 2px solid var(--dark-border);
        }

        .shape-inside {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            color: var(--accent-teal);
        }

        .symmetry-line {
            position: absolute;
            background: var(--secondary-pink);
            opacity: 0.8;
        }

        .symmetry-line.vertical {
            width: 2px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }

        .symmetry-line.horizontal {
            height: 2px;
            width: 100%;
            top: 50%;
            transform: translateY(-50%);
        }

        .symmetry-line.diagonal1 {
            width: 2px;
            height: 140%;
            left: 50%;
            top: -20%;
            transform: translateX(-50%) rotate(45deg);
        }

        .symmetry-line.diagonal2 {
            width: 2px;
            height: 140%;
            left: 50%;
            top: -20%;
            transform: translateX(-50%) rotate(-45deg);
        }

        /* Symmetry Type Display */
        .symmetry-types {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .symmetry-types {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .symmetry-type {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
        }

        .symmetry-type.active {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .symmetry-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .symmetry-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-green);
        }

        .symmetry-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Reflection Display */
        .reflection-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .reflection-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .reflection-box {
            width: 100px;
            height: 100px;
            background: var(--dark-card);
            border: 2px solid var(--accent-teal);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .reflection-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .mirror-line {
            width: 5px;
            height: 120px;
            background: var(--secondary-pink);
            border-radius: 3px;
            position: relative;
        }

        .mirror-line:before {
            content: "";
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            border: 3px solid var(--secondary-pink);
            border-radius: 50%;
        }

        /* Rotational Symmetry Display */
        .rotational-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .rotation-wheel {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 3px solid var(--dark-border);
            position: relative;
            margin: 20px 0;
            overflow: hidden;
        }

        .rotation-segment {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            clip-path: polygon(50% 50%, 50% 0%, 100% 0%);
            transform-origin: center;
            background: rgba(156, 39, 176, 0.2);
        }

        .rotation-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: var(--secondary-pink);
            border-radius: 50%;
        }

        .rotation-angle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-purple);
        }

        .order-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .order-item {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid transparent;
        }

        .order-item.active {
            background: var(--primary-purple);
            color: white;
        }

        /* Property Display */
        .property-display {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-amber);
        }

        .property-title {
            font-weight: bold;
            color: var(--accent-amber);
            margin-bottom: 10px;
        }

        .property-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .property-item {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .property-item:before {
            content: "✓";
            color: var(--accent-green);
            margin-right: 10px;
            font-weight: bold;
        }

        /* Classification Display */
        .classification-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .classification-display {
                grid-template-columns: 1fr;
            }
        }

        .classification-group {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid var(--dark-border);
        }

        .group-title {
            font-weight: bold;
            color: var(--accent-teal);
            margin-bottom: 15px;
            text-align: center;
        }

        .group-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .group-item {
            padding: 8px 15px;
            background: var(--dark-surface);
            border-radius: 6px;
            font-size: 0.9rem;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Process Display */
        .process-display {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }

        .process-step {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 10px;
            min-width: 200px;
            text-align: center;
            border: 2px solid transparent;
        }

        .process-step.active {
            border-color: var(--primary-purple);
        }

        .step-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .step-title {
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 10px;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes symmetryGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(76, 175, 80, 0.3); }
            50% { box-shadow: 0 0 20px rgba(76, 175, 80, 0.6); }
        }
        
        .symmetry-glow {
            animation: symmetryGlow 2s ease-in-out infinite;
        }
        
        @keyframes lineDraw {
            from { width: 0; height: 0; }
            to { width: 100%; height: 100%; }
        }
        
        .line-draw {
            animation: lineDraw 1s ease forwards;
        }
        
        @keyframes rotateSymmetry {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .rotate-symmetry {
            animation: rotateSymmetry 3s linear infinite;
        }
        
        @keyframes reflectAnimation {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .reflect-animation {
            animation: reflectAnimation 2s ease-in-out infinite;
        }
        
        @keyframes shapeBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .shape-bounce {
            animation: shapeBounce 1s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1550684376-efcbd6e3f031?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1532094349884-543bc11b234d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1546484475-7f7bd55792da?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1534447677768-be436bb09401?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 Mathematics</h1>
            <p class="welcome-subtitle">Explore the fascinating world of 2D shapes and symmetry! Learn to identify shapes, understand their properties, find lines of symmetry, discover rotational symmetry, and recognize symmetrical patterns in everyday objects!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">⭐</span>
                <span class="topic-name">Properties of 2D Shapes & Symmetry</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Symmetry Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Math fact display -->
                <div id="mathFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Symmetry Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 100+ Grade 5 Geometry questions focused on 2D Shapes and Symmetry
        const questions = [
            // Basic Shape Identification (1-15)
            {
                type: "shapes_basic",
                question: "How many sides does a triangle have?",
                options: ["3", "4", "5", "6"],
                answer: "A",
                explanation: "A triangle has 3 sides and 3 angles"
            },
            {
                type: "shapes_basic",
                question: "A shape with 4 equal sides and 4 right angles is called a:",
                options: ["Square", "Rectangle", "Rhombus", "Parallelogram"],
                answer: "A",
                explanation: "A square has 4 equal sides and 4 right angles"
            },
            {
                type: "shapes_basic",
                question: "What shape has 5 sides?",
                options: ["Pentagon", "Hexagon", "Octagon", "Quadrilateral"],
                answer: "A",
                explanation: "Pentagon = 5 sides, hexagon = 6, octagon = 8"
            },
            {
                type: "shapes_basic",
                question: "A circle is different from polygons because it:",
                options: ["Has no sides or vertices", "Has 4 sides", "Has right angles", "Has parallel sides"],
                answer: "A",
                explanation: "A circle has no straight sides or vertices"
            },
            {
                type: "shapes_basic",
                question: "What shape has exactly 6 sides?",
                options: ["Hexagon", "Pentagon", "Octagon", "Decagon"],
                answer: "A",
                explanation: "Hexagon = 6 sides (think of honeycomb cells)"
            },
            {
                type: "shapes_basic",
                question: "Which shape has opposite sides parallel and equal?",
                options: ["Parallelogram", "Triangle", "Circle", "Pentagon"],
                answer: "A",
                explanation: "Parallelograms have opposite sides parallel and equal"
            },
            {
                type: "shapes_basic",
                question: "What is a quadrilateral with only one pair of parallel sides called?",
                options: ["Trapezoid", "Rectangle", "Square", "Rhombus"],
                answer: "A",
                explanation: "A trapezoid has exactly one pair of parallel sides"
            },
            {
                type: "shapes_basic",
                question: "How many vertices does a rectangle have?",
                options: ["4", "3", "5", "6"],
                answer: "A",
                explanation: "A rectangle has 4 corners (vertices)"
            },
            {
                type: "shapes_basic",
                question: "What shape has 8 sides?",
                options: ["Octagon", "Hexagon", "Pentagon", "Decagon"],
                answer: "A",
                explanation: "Octagon = 8 sides (think of stop signs)"
            },
            {
                type: "shapes_basic",
                question: "A rhombus is a parallelogram with:",
                options: ["All sides equal", "All right angles", "No parallel sides", "6 sides"],
                answer: "A",
                explanation: "A rhombus has all sides equal but not necessarily right angles"
            },

            // Lines of Symmetry (16-35)
            {
                type: "symmetry_lines",
                question: "How many lines of symmetry does a square have?",
                options: ["4", "2", "1", "0"],
                answer: "A",
                explanation: "Square has 4 lines of symmetry: vertical, horizontal, and two diagonals"
            },
            {
                type: "symmetry_lines",
                question: "A regular hexagon has how many lines of symmetry?",
                options: ["6", "3", "2", "1"],
                answer: "A",
                explanation: "Regular hexagon has 6 lines of symmetry (through opposite vertices and midpoints)"
            },
            {
                type: "symmetry_lines",
                question: "How many lines of symmetry does an equilateral triangle have?",
                options: ["3", "1", "2", "0"],
                answer: "A",
                explanation: "Equilateral triangle has 3 lines of symmetry (through each vertex to opposite side midpoint)"
            },
            {
                type: "symmetry_lines",
                question: "Which shape has exactly one line of symmetry?",
                options: ["Isosceles triangle", "Square", "Circle", "Regular pentagon"],
                answer: "A",
                explanation: "Isosceles triangle has exactly 1 line of symmetry (down the middle)"
            },
            {
                type: "symmetry_lines",
                question: "A rectangle (not square) has how many lines of symmetry?",
                options: ["2", "4", "1", "0"],
                answer: "A",
                explanation: "Rectangle has 2 lines of symmetry (vertical and horizontal through center)"
            },
            {
                type: "symmetry_lines",
                question: "How many lines of symmetry does a circle have?",
                options: ["Infinite", "4", "0", "1"],
                answer: "A",
                explanation: "Circle has infinite lines of symmetry - any line through the center"
            },
            {
                type: "symmetry_lines",
                question: "Which letter has a vertical line of symmetry?",
                options: ["A", "F", "R", "J"],
                answer: "A",
                explanation: "Letter A has vertical symmetry (left and right halves match)"
            },
            {
                type: "symmetry_lines",
                question: "A regular pentagon has how many lines of symmetry?",
                options: ["5", "3", "2", "1"],
                answer: "A",
                explanation: "Regular pentagon has 5 lines of symmetry"
            },
            {
                type: "symmetry_lines",
                question: "Which shape has no lines of symmetry?",
                options: ["Scalene triangle", "Square", "Circle", "Regular hexagon"],
                answer: "A",
                explanation: "Scalene triangle (all sides different) has no lines of symmetry"
            },
            {
                type: "symmetry_lines",
                question: "How many lines of symmetry does the letter H have?",
                options: ["2", "1", "0", "4"],
                answer: "A",
                explanation: "Letter H has both vertical and horizontal symmetry"
            },

            // Rotational Symmetry (36-55)
            {
                type: "symmetry_rotational",
                question: "What is rotational symmetry?",
                options: ["Shape looks same after rotation", "Shape has mirror halves", "Shape has equal sides", "Shape has parallel sides"],
                answer: "A",
                explanation: "Rotational symmetry means shape looks same when rotated less than 360°"
            },
            {
                type: "symmetry_rotational",
                question: "A square has rotational symmetry of order:",
                options: ["4", "2", "1", "3"],
                answer: "A",
                explanation: "Square looks same after 90°, 180°, 270°, and 360° rotations (order 4)"
            },
            {
                type: "symmetry_rotational",
                question: "What is the order of rotational symmetry for an equilateral triangle?",
                options: ["3", "1", "2", "4"],
                answer: "A",
                explanation: "Equilateral triangle looks same after 120°, 240°, and 360° rotations"
            },
            {
                type: "symmetry_rotational",
                question: "A rectangle (not square) has rotational symmetry of order:",
                options: ["2", "1", "4", "0"],
                answer: "A",
                explanation: "Rectangle looks same after 180° and 360° rotations only"
            },
            {
                type: "symmetry_rotational",
                question: "Which shape has rotational symmetry of order infinite?",
                options: ["Circle", "Square", "Triangle", "Pentagon"],
                answer: "A",
                explanation: "Circle looks same at every rotation angle"
            },
            {
                type: "symmetry_rotational",
                question: "A regular hexagon has rotational symmetry of order:",
                options: ["6", "3", "2", "1"],
                answer: "A",
                explanation: "Regular hexagon looks same every 60° rotation"
            },
            {
                type: "symmetry_rotational",
                question: "Which letter has rotational symmetry of order 2?",
                options: ["S", "A", "B", "C"],
                answer: "A",
                explanation: "Letter S looks same when rotated 180°"
            },
            {
                type: "symmetry_rotational",
                question: "What is the order of rotational symmetry for a parallelogram?",
                options: ["2", "1", "4", "0"],
                answer: "A",
                explanation: "Parallelogram looks same after 180° rotation"
            },
            {
                type: "symmetry_rotational",
                question: "A shape with rotational symmetry order 1 has:",
                options: ["No rotational symmetry", "Infinite symmetry", "Order 2 symmetry", "Mirror symmetry only"],
                answer: "A",
                explanation: "Order 1 means only looks same after 360° rotation (full circle)"
            },
            {
                type: "symmetry_rotational",
                question: "Which shape has the highest order of rotational symmetry?",
                options: ["Circle", "Square", "Hexagon", "Octagon"],
                answer: "A",
                explanation: "Circle has infinite rotational symmetry"
            },

            // Symmetry in Real Objects (56-75)
            {
                type: "symmetry_real",
                question: "Which everyday object typically has vertical symmetry?",
                options: ["Human face", "Tree", "Cloud", "Mountain"],
                answer: "A",
                explanation: "Human faces have approximate vertical symmetry (left and right sides)"
            },
            {
                type: "symmetry_real",
                question: "A butterfly's wings show what type of symmetry?",
                options: ["Bilateral symmetry", "Rotational symmetry", "No symmetry", "Diagonal symmetry"],
                answer: "A",
                explanation: "Butterfly has bilateral symmetry (mirror image left and right)"
            },
            {
                type: "symmetry_real",
                question: "Which vehicle wheel has rotational symmetry?",
                options: ["All wheels", "Only car wheels", "Only bicycle wheels", "No wheels"],
                answer: "A",
                explanation: "All circular wheels have rotational symmetry"
            },
            {
                type: "symmetry_real",
                question: "A snowflake typically has how many lines of symmetry?",
                options: ["6", "4", "8", "2"],
                answer: "A",
                explanation: "Snowflakes usually have 6-fold symmetry"
            },
            {
                type: "symmetry_real",
                question: "Which letter in the alphabet has both vertical and horizontal symmetry?",
                options: ["O", "A", "B", "C"],
                answer: "A",
                explanation: "Letter O has both vertical and horizontal symmetry"
            },
            {
                type: "symmetry_real",
                question: "A starfish typically has rotational symmetry of order:",
                options: ["5", "4", "6", "3"],
                answer: "A",
                explanation: "Most starfish have 5 arms (order 5 rotational symmetry)"
            },
            {
                type: "symmetry_real",
                question: "Which traffic sign has octagonal shape?",
                options: ["Stop sign", "Yield sign", "Speed limit", "School crossing"],
                answer: "A",
                explanation: "Stop signs are octagons (8 sides)"
            },
            {
                type: "symmetry_real",
                question: "A honeycomb cell has what shape?",
                options: ["Hexagon", "Pentagon", "Square", "Triangle"],
                answer: "A",
                explanation: "Honeycomb cells are hexagonal (6 sides)"
            },
            {
                type: "symmetry_real",
                question: "Which number has vertical symmetry?",
                options: ["8", "7", "2", "5"],
                answer: "A",
                explanation: "Number 8 has vertical symmetry"
            },
            {
                type: "symmetry_real",
                question: "A pizza slice represents what shape?",
                options: ["Triangle", "Circle", "Square", "Rectangle"],
                answer: "A",
                explanation: "A slice of pizza is triangular"
            },

            // Shape Properties (76-95)
            {
                type: "properties_shapes",
                question: "What is true about all squares?",
                options: ["All sides equal", "No right angles", "5 sides", "No parallel sides"],
                answer: "A",
                explanation: "All squares have 4 equal sides and 4 right angles"
            },
            {
                type: "properties_shapes",
                question: "How are a square and rhombus similar?",
                options: ["All sides equal", "All angles 90°", "No parallel sides", "5 sides"],
                answer: "A",
                explanation: "Both have all sides equal, but only square has all 90° angles"
            },
            {
                type: "properties_shapes",
                question: "What do rectangles and parallelograms have in common?",
                options: ["Opposite sides parallel", "All sides equal", "All angles 90°", "6 sides"],
                answer: "A",
                explanation: "Both have opposite sides parallel and equal"
            },
            {
                type: "properties_shapes",
                question: "A trapezoid always has:",
                options: ["One pair of parallel sides", "All sides equal", "Four right angles", "Six sides"],
                answer: "A",
                explanation: "A trapezoid has exactly one pair of parallel sides"
            },
            {
                type: "properties_shapes",
                question: "What is different between a rectangle and a square?",
                options: ["All sides equal in square", "Right angles", "Four sides", "Parallel sides"],
                answer: "A",
                explanation: "Square has all sides equal; rectangle has opposite sides equal"
            },
            {
                type: "properties_shapes",
                question: "All quadrilaterals have:",
                options: ["4 sides", "Right angles", "Equal sides", "Parallel sides"],
                answer: "A",
                explanation: "Quadrilateral means 4-sided shape (any 4-sided shape)"
            },
            {
                type: "properties_shapes",
                question: "What is true about a regular polygon?",
                options: ["All sides and angles equal", "No symmetry", "Curved sides", "Infinite sides"],
                answer: "A",
                explanation: "Regular polygon has all equal sides and equal angles"
            },
            {
                type: "properties_shapes",
                question: "A circle has:",
                options: ["No vertices", "4 vertices", "Infinite vertices", "1 vertex"],
                answer: "A",
                explanation: "Circle has no corners or vertices"
            },
            {
                type: "properties_shapes",
                question: "What makes an isosceles triangle special?",
                options: ["Two equal sides", "All sides different", "No equal sides", "All sides equal"],
                answer: "A",
                explanation: "Isosceles triangle has 2 equal sides and 2 equal angles"
            },
            {
                type: "properties_shapes",
                question: "A polygon with all interior angles less than 180° is called:",
                options: ["Convex", "Concave", "Regular", "Irregular"],
                answer: "A",
                explanation: "Convex polygon has all interior angles less than 180°"
            },

            // Combined Symmetry Concepts (96-115)
            {
                type: "symmetry_combined",
                question: "Which shape has both line and rotational symmetry?",
                options: ["Square", "Scalene triangle", "Irregular pentagon", "Random shape"],
                answer: "A",
                explanation: "Square has 4 lines of symmetry and order 4 rotational symmetry"
            },
            {
                type: "symmetry_combined",
                question: "A shape with rotational symmetry order 2 must have:",
                options: ["180° symmetry", "90° symmetry", "60° symmetry", "45° symmetry"],
                answer: "A",
                explanation: "Order 2 means looks same after 180° rotation"
            },
            {
                type: "symmetry_combined",
                question: "If a shape has 5 lines of symmetry, what could it be?",
                options: ["Regular pentagon", "Square", "Rectangle", "Circle"],
                answer: "A",
                explanation: "Regular pentagon has 5 lines of symmetry"
            },
            {
                type: "symmetry_combined",
                question: "Which has more lines of symmetry: circle or square?",
                options: ["Circle", "Square", "Same", "Depends on size"],
                answer: "A",
                explanation: "Circle has infinite lines; square has 4"
            },
            {
                type: "symmetry_combined",
                question: "A shape with no lines of symmetry but order 2 rotational symmetry:",
                options: ["Parallelogram (not rectangle)", "Square", "Circle", "Regular triangle"],
                answer: "A",
                explanation: "Some parallelograms have rotational but not line symmetry"
            },
            {
                type: "symmetry_combined",
                question: "Which regular polygon has the most lines of symmetry?",
                options: ["Circle", "Hexagon", "Octagon", "Decagon"],
                answer: "A",
                explanation: "Circle is not a polygon but has infinite symmetry lines"
            },
            {
                type: "symmetry_combined",
                question: "All regular polygons have:",
                options: ["Both line and rotational symmetry", "Only line symmetry", "Only rotational symmetry", "No symmetry"],
                answer: "A",
                explanation: "All regular polygons have both types of symmetry"
            },
            {
                type: "symmetry_combined",
                question: "If a shape has 3 lines of symmetry, its rotational symmetry order is:",
                options: ["3", "2", "1", "6"],
                answer: "A",
                explanation: "Lines of symmetry usually equals rotational symmetry order in regular polygons"
            },
            {
                type: "symmetry_combined",
                question: "A shape with infinite rotational symmetry must have:",
                options: ["Circular shape", "Square shape", "Triangular shape", "Rectangular shape"],
                answer: "A",
                explanation: "Only circles have infinite rotational symmetry"
            },
            {
                type: "symmetry_combined",
                question: "Which statement is always true?",
                options: ["All squares are rectangles", "All rectangles are squares", "All rhombuses are squares", "All trapezoids are parallelograms"],
                answer: "A",
                explanation: "Squares are special rectangles with all sides equal"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent symmetry detection!",
            "Fantastic shape recognition!",
            "Great job! You're a symmetry expert!",
            "Amazing! Your spatial reasoning is impressive!",
            "Well done! Perfect symmetry analysis!",
            "You're a 2D shapes champion!",
            "Perfect! You understand symmetry beautifully!",
            "Outstanding geometric thinking!",
            "Brilliant! You see patterns like a mathematician!",
            "You're on fire! Great symmetry insight!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathFact = document.getElementById('mathFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Generate random shape for visualization
        function getRandomShape() {
            const shapes = [
                { name: "Square", icon: "⬛", sides: 4, symmetry: 4, rotational: 4 },
                { name: "Triangle", icon: "▲", sides: 3, symmetry: 3, rotational: 3 },
                { name: "Circle", icon: "●", sides: 0, symmetry: "infinite", rotational: "infinite" },
                { name: "Rectangle", icon: "▭", sides: 4, symmetry: 2, rotational: 2 },
                { name: "Hexagon", icon: "⬢", sides: 6, symmetry: 6, rotational: 6 },
                { name: "Pentagon", icon: "⬟", sides: 5, symmetry: 5, rotational: 5 },
                { name: "Octagon", icon: "⯃", sides: 8, symmetry: 8, rotational: 8 },
                { name: "Rhombus", icon: "◇", sides: 4, symmetry: 2, rotational: 2 }
            ];
            return shapes[Math.floor(Math.random() * shapes.length)];
        }

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5ShapesSymmetry');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5ShapesSymmetry', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5ShapesSymmetry_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5ShapesSymmetry_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a symmetry and shapes expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent pattern recognition skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a geometry master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review symmetry concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Symmetry skills grow with observation!";
            }
        }

        // Create math fact display
        function createMathFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'math-fact';
            
            const facts = [
                "The word 'symmetry' comes from Greek words meaning 'same measure'! Ancient Greeks considered symmetry the highest form of beauty!",
                "Humans are naturally drawn to symmetrical faces! Studies show we find symmetrical faces more attractive!",
                "Snowflakes always have 6-fold symmetry because of how water molecules arrange in ice crystals!",
                "The Parthenon in Athens was built with perfect symmetry in mind! Ancient architects believed symmetry represented divine harmony!",
                "Butterfly wings are never perfectly symmetrical! Each wing has unique patterns, just like human fingerprints!",
                "Honeybees build hexagonal honeycomb cells because hexagons use the least wax to store the most honey!",
                "Many fruits and vegetables show symmetry! Cut an apple horizontally to see a perfect 5-point star!",
                "Rotational symmetry is found in many logos! The Mercedes-Benz logo has 3-fold rotational symmetry!",
                "The human body shows bilateral symmetry! Our left and right sides are approximate mirror images!",
                "Islamic art uses complex geometric patterns with symmetry because depicting living things was traditionally avoided!"
            ];
            
            factDiv.innerHTML = `<strong>Symmetry Fact:</strong> ${facts[Math.floor(Math.random() * facts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "shapes_basic": "⬛",
                "symmetry_lines": "↔️",
                "symmetry_rotational": "↻",
                "symmetry_real": "🏠",
                "properties_shapes": "📐",
                "symmetry_combined": "⭐"
            };
            
            let conceptName = "2D Shapes & Symmetry";
            let conceptIcon = "⭐";
            
            if (question.type.includes("shapes_basic")) {
                conceptName = "Basic Shapes";
                conceptIcon = conceptIcons.shapes_basic;
            } else if (question.type.includes("symmetry_lines")) {
                conceptName = "Lines of Symmetry";
                conceptIcon = conceptIcons.symmetry_lines;
            } else if (question.type.includes("symmetry_rotational")) {
                conceptName = "Rotational Symmetry";
                conceptIcon = conceptIcons.symmetry_rotational;
            } else if (question.type.includes("symmetry_real")) {
                conceptName = "Symmetry in Real Life";
                conceptIcon = conceptIcons.symmetry_real;
            } else if (question.type.includes("properties_shapes")) {
                conceptName = "Shape Properties";
                conceptIcon = conceptIcons.properties_shapes;
            } else if (question.type.includes("symmetry_combined")) {
                conceptName = "Combined Symmetry";
                conceptIcon = conceptIcons.symmetry_combined;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("shapes_basic")) {
                label.textContent = "Identifying different 2D shapes";
            } else if (question.type.includes("symmetry_lines")) {
                label.textContent = "Finding mirror lines in shapes";
            } else if (question.type.includes("symmetry_rotational")) {
                label.textContent = "Shapes that look same when rotated";
            } else if (question.type.includes("symmetry_real")) {
                label.textContent = "Symmetry in nature and everyday objects";
            } else if (question.type.includes("properties_shapes")) {
                label.textContent = "Characteristics of different shapes";
            } else if (question.type.includes("symmetry_combined")) {
                label.textContent = "Both line and rotational symmetry";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create symmetry visualization
        function createSymmetryVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const shape = getRandomShape();
            
            if (question.type.includes("shapes_basic")) {
                // Basic shapes display
                const shapes = [
                    { name: "Triangle", icon: "▲", sides: "3 sides, 3 vertices" },
                    { name: "Square", icon: "⬛", sides: "4 equal sides, 4 right angles" },
                    { name: "Rectangle", icon: "▭", sides: "4 sides, opposite sides equal" },
                    { name: "Pentagon", icon: "⬟", sides: "5 sides, 5 vertices" },
                    { name: "Hexagon", icon: "⬢", sides: "6 sides, 6 vertices" },
                    { name: "Octagon", icon: "⯃", sides: "8 sides, 8 vertices" },
                    { name: "Circle", icon: "●", sides: "No sides, no vertices" },
                    { name: "Rhombus", icon: "◇", sides: "4 equal sides, opposite angles equal" }
                ];
                
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-purple);">Common 2D Shapes</h3>
                    
                    <div class="shape-grid">
                        ${shapes.map((s, index) => `
                            <div class="shape-item shape-bounce" style="animation-delay: ${index * 0.1}s">
                                <div class="shape-icon">${s.icon}</div>
                                <div class="shape-name">${s.name}</div>
                                <div class="shape-properties">${s.sides}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="classification-display">
                        <div class="classification-group">
                            <div class="group-title">Polygons</div>
                            <div class="group-items">
                                <div class="group-item">Triangle</div>
                                <div class="group-item">Square</div>
                                <div class="group-item">Pentagon</div>
                                <div class="group-item">Hexagon</div>
                                <div class="group-item">Octagon</div>
                            </div>
                        </div>
                        
                        <div class="classification-group">
                            <div class="group-title">Quadrilaterals</div>
                            <div class="group-items">
                                <div class="group-item">Square</div>
                                <div class="group-item">Rectangle</div>
                                <div class="group-item">Rhombus</div>
                                <div class="group-item">Trapezoid</div>
                                <div class="group-item">Parallelogram</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="property-display">
                        <div class="property-title">Shape Properties:</div>
                        <ul class="property-list">
                            <li class="property-item">Polygons have straight sides</li>
                            <li class="property-item">Quadrilaterals have 4 sides</li>
                            <li class="property-item">Regular shapes have equal sides and angles</li>
                            <li class="property-item">Circles have no corners or vertices</li>
                        </ul>
                    </div>
                `;
                
            } else if (question.type.includes("symmetry_lines")) {
                // Lines of symmetry display
                const selectedShape = shape.name === "Circle" ? 
                    { ...shape, icon: "⭕", symmetry: "infinite" } : shape;
                
                const symmetryCount = selectedShape.symmetry === "infinite" ? "∞" : selectedShape.symmetry;
                
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-green);">Lines of Symmetry</h3>
                    
                    <div class="symmetry-display">
                        <div class="symmetry-canvas">
                            <div class="shape-inside">${selectedShape.icon}</div>
                            
                            ${selectedShape.name === "Square" ? `
                                <div class="symmetry-line vertical line-draw" style="animation-delay: 0.2s"></div>
                                <div class="symmetry-line horizontal line-draw" style="animation-delay: 0.4s"></div>
                                <div class="symmetry-line diagonal1 line-draw" style="animation-delay: 0.6s"></div>
                                <div class="symmetry-line diagonal2 line-draw" style="animation-delay: 0.8s"></div>
                            ` : selectedShape.name === "Circle" ? `
                                <div class="symmetry-line vertical line-draw" style="animation-delay: 0.2s"></div>
                                <div class="symmetry-line horizontal line-draw" style="animation-delay: 0.4s"></div>
                                <div class="symmetry-line diagonal1 line-draw" style="animation-delay: 0.6s"></div>
                                <div class="symmetry-line diagonal2 line-draw" style="animation-delay: 0.8s; transform: translateX(-50%) rotate(22.5deg);"></div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--text-secondary); font-size: 0.9rem;">
                                    And infinite more...
                                </div>
                            ` : selectedShape.name === "Triangle" ? `
                                <div class="symmetry-line vertical line-draw" style="animation-delay: 0.2s; transform: translateX(-50%) rotate(0deg); width: 2px; height: 100%; left: 50%;"></div>
                                <div class="symmetry-line vertical line-draw" style="animation-delay: 0.4s; transform: translateX(-50%) rotate(120deg); width: 2px; height: 100%; left: 50%;"></div>
                                <div class="symmetry-line vertical line-draw" style="animation-delay: 0.6s; transform: translateX(-50%) rotate(240deg); width: 2px; height: 100%; left: 50%;"></div>
                            ` : selectedShape.name === "Rectangle" ? `
                                <div class="symmetry-line vertical line-draw" style="animation-delay: 0.2s"></div>
                                <div class="symmetry-line horizontal line-draw" style="animation-delay: 0.4s"></div>
                            ` : ''}
                        </div>
                    </div>
                    
                    <div class="symmetry-types">
                        <div class="symmetry-type symmetry-glow">
                            <div class="symmetry-icon">${selectedShape.icon}</div>
                            <div class="symmetry-name">${selectedShape.name}</div>
                            <div class="symmetry-description">Lines of symmetry: ${symmetryCount}</div>
                        </div>
                        
                        <div class="symmetry-type">
                            <div class="symmetry-icon">↔️</div>
                            <div class="symmetry-name">Line Symmetry</div>
                            <div class="symmetry-description">Mirror halves match</div>
                        </div>
                        
                        <div class="symmetry-type">
                            <div class="symmetry-icon">📐</div>
                            <div class="symmetry-name">Shapes</div>
                            <div class="symmetry-description">Different symmetries</div>
                        </div>
                    </div>
                    
                    <div class="property-display">
                        <div class="property-title">Key Points:</div>
                        <ul class="property-list">
                            <li class="property-item">Line of symmetry divides shape into identical mirror halves</li>
                            <li class="property-item">Regular polygons have same number of symmetry lines as sides</li>
                            <li class="property-item">Circle has infinite lines of symmetry</li>
                            <li class="property-item">Some shapes have no lines of symmetry</li>
                        </ul>
                    </div>
                `;
                
            } else if (question.type.includes("symmetry_rotational")) {
                // Rotational symmetry display
                const rotationOrder = shape.rotational === "infinite" ? "∞" : shape.rotational;
                
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-teal);">Rotational Symmetry</h3>
                    
                    <div class="rotational-display">
                        <div class="rotation-wheel rotate-symmetry">
                            ${shape.name === "Square" ? `
                                <div class="rotation-segment" style="transform: rotate(0deg); background: rgba(156, 39, 176, 0.2);"></div>
                                <div class="rotation-segment" style="transform: rotate(90deg); background: rgba(156, 39, 176, 0.3);"></div>
                                <div class="rotation-segment" style="transform: rotate(180deg); background: rgba(156, 39, 176, 0.4);"></div>
                                <div class="rotation-segment" style="transform: rotate(270deg); background: rgba(156, 39, 176, 0.5);"></div>
                                <div class="rotation-angle">90°</div>
                            ` : shape.name === "Triangle" ? `
                                <div class="rotation-segment" style="transform: rotate(0deg); background: rgba(0, 188, 212, 0.2);"></div>
                                <div class="rotation-segment" style="transform: rotate(120deg); background: rgba(0, 188, 212, 0.3);"></div>
                                <div class="rotation-segment" style="transform: rotate(240deg); background: rgba(0, 188, 212, 0.4);"></div>
                                <div class="rotation-angle">120°</div>
                            ` : shape.name === "Circle" ? `
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--text-primary);">
                                    ●
                                </div>
                                <div class="rotation-angle">Any angle</div>
                            ` : ''}
                            <div class="rotation-center"></div>
                        </div>
                        
                        <div class="order-display">
                            <div class="order-item ${rotationOrder >= 1 ? 'active' : ''}">1</div>
                            <div class="order-item ${rotationOrder >= 2 ? 'active' : ''}">2</div>
                            <div class="order-item ${rotationOrder >= 3 ? 'active' : ''}">3</div>
                            <div class="order-item ${rotationOrder >= 4 ? 'active' : ''}">4</div>
                            <div class="order-item ${rotationOrder >= 5 ? 'active' : ''}">5</div>
                            <div class="order-item ${rotationOrder >= 6 ? 'active' : ''}">6</div>
                            ${rotationOrder === "∞" ? '<div class="order-item active">∞</div>' : ''}
                        </div>
                    </div>
                    
                    <div class="symmetry-types">
                        <div class="symmetry-type symmetry-glow">
                            <div class="symmetry-icon">${shape.icon}</div>
                            <div class="symmetry-name">${shape.name}</div>
                            <div class="symmetry-description">Order: ${rotationOrder}</div>
                        </div>
                        
                        <div class="symmetry-type">
                            <div class="symmetry-icon">↻</div>
                            <div class="symmetry-name">Rotational Symmetry</div>
                            <div class="symmetry-description">Looks same when rotated</div>
                        </div>
                        
                        <div class="symmetry-type">
                            <div class="symmetry-icon">#️⃣</div>
                            <div class="symmetry-name">Order</div>
                            <div class="symmetry-description">Number of matching positions</div>
                        </div>
                    </div>
                    
                    <div class="property-display">
                        <div class="property-title">Key Points:</div>
                        <ul class="property-list">
                            <li class="property-item">Order tells how many times shape matches during 360° rotation</li>
                            <li class="property-item">Angle = 360° ÷ order</li>
                            <li class="property-item">Order 1 means no rotational symmetry</li>
                            <li class="property-item">Circle has infinite rotational symmetry</li>
                        </ul>
                    </div>
                `;
                
            } else if (question.type.includes("symmetry_real")) {
                // Real-world symmetry examples
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-amber);">Symmetry in Real Life</h3>
                    
                    <div class="reflection-display">
                        <div class="reflection-item">
                            <div class="reflection-box">🦋</div>
                            <div class="reflection-label">Butterfly</div>
                            <div style="margin-top: 10px; font-size: 0.9rem; color: var(--accent-green);">Bilateral Symmetry</div>
                        </div>
                        
                        <div class="mirror-line"></div>
                        
                        <div class="reflection-item reflect-animation">
                            <div class="reflection-box">🦋</div>
                            <div class="reflection-label">Mirror Image</div>
                            <div style="margin-top: 10px; font-size: 0.9rem; color: var(--accent-green);">Mirror Image</div>
                        </div>
                    </div>
                    
                    <div class="shape-grid" style="grid-template-columns: repeat(4, 1fr); margin-top: 30px;">
                        <div class="shape-item">
                            <div class="shape-icon">❄️</div>
                            <div class="shape-name">Snowflake</div>
                            <div class="shape-properties">6-fold symmetry</div>
                        </div>
                        
                        <div class="shape-item">
                            <div class="shape-icon">🐝</div>
                            <div class="shape-name">Honeycomb</div>
                            <div class="shape-properties">Hexagonal</div>
                        </div>
                        
                        <div class="shape-item">
                            <div class="shape-icon">⭐</div>
                            <div class="shape-name">Starfish</div>
                            <div class="shape-properties">5-fold symmetry</div>
                        </div>
                        
                        <div class="shape-item">
                            <div class="shape-icon">🛑</div>
                            <div class="shape-name">Stop Sign</div>
                            <div class="shape-properties">Octagon</div>
                        </div>
                    </div>
                    
                    <div class="property-display">
                        <div class="property-title">Everyday Symmetry Examples:</div>
                        <ul class="property-list">
                            <li class="property-item">Human face: Approximate bilateral symmetry</li>
                            <li class="property-item">Flowers: Often radial symmetry</li>
                            <li class="property-item">Wheels: Circular symmetry</li>
                            <li class="property-item">Buildings: Architectural symmetry</li>
                            <li class="property-item">Logos: Designed with symmetry</li>
                        </ul>
                    </div>
                `;
                
            } else {
                // Properties and combined concepts
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-purple);">Shape Properties & Symmetry</h3>
                    
                    <div class="shape-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div class="shape-item symmetry-glow">
                            <div class="shape-icon">⬛</div>
                            <div class="shape-name">Square</div>
                            <div class="shape-properties">4 lines, order 4</div>
                        </div>
                        
                        <div class="shape-item">
                            <div class="shape-icon">▭</div>
                            <div class="shape-name">Rectangle</div>
                            <div class="shape-properties">2 lines, order 2</div>
                        </div>
                        
                        <div class="shape-item">
                            <div class="shape-icon">▲</div>
                            <div class="shape-name">Triangle</div>
                            <div class="shape-properties">3 lines, order 3</div>
                        </div>
                    </div>
                    
                    <div class="classification-display" style="margin-top: 20px;">
                        <div class="classification-group">
                            <div class="group-title">Regular Polygons</div>
                            <div class="group-items">
                                <div class="group-item">Equal sides</div>
                                <div class="group-item">Equal angles</div>
                                <div class="group-item">Maximum symmetry</div>
                                <div class="group-item">Both symmetries</div>
                            </div>
                        </div>
                        
                        <div class="classification-group">
                            <div class="group-title">Irregular Shapes</div>
                            <div class="group-items">
                                <div class="group-item">Unequal sides</div>
                                <div class="group-item">Unequal angles</div>
                                <div class="group-item">Less symmetry</div>
                                <div class="group-item">May have none</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="property-display">
                        <div class="property-title">Symmetry Relationships:</div>
                        <ul class="property-list">
                            <li class="property-item">Regular polygon: lines = rotational order = number of sides</li>
                            <li class="property-item">Shapes can have line symmetry, rotational symmetry, both, or neither</li>
                            <li class="property-item">Circle has infinite both types of symmetry</li>
                            <li class="property-item">Some shapes (like parallelogram) have rotational but not line symmetry</li>
                        </ul>
                    </div>
                `;
            }
            
            return vizDiv;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathFact.appendChild(createMathFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createSymmetryVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '✓';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '✗';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
