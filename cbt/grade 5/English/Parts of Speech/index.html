<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 English - Parts of Speech | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for English/Language Arts Theme */
        :root {
            --primary-blue: #2196F3;
            --secondary-green: #4CAF50;
            --accent-orange: #FF9800;
            --accent-pink: #E91E63;
            --accent-purple: #9C27B0;
            --accent-cyan: #00BCD4;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(33, 150, 243, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-green);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-secondary:hover {
            background: #388E3C;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-green));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .english-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-cyan));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-green);
        }

        .option.correct .option-letter {
            background: var(--primary-blue);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(33, 150, 243, 0.1);
            border-left: 5px solid var(--primary-blue);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-blue);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-blue);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Sentence Analysis Display */
        .sentence-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid var(--secondary-green);
            line-height: 1.6;
            font-size: 1.2rem;
        }

        .sentence-text {
            color: var(--text-primary);
            margin-bottom: 15px;
            text-align: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
        }

        .word-analysis {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }

        .word-item {
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
        }

        .word-text {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .word-type {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 4px;
            color: white;
        }

        /* Parts of Speech Grid */
        .parts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .parts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .part-card {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
        }

        .part-card:hover {
            transform: translateY(-5px);
        }

        .part-card.active {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .part-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .part-name {
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .part-function {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .part-examples {
            font-size: 0.9rem;
            color: var(--accent-orange);
            font-style: italic;
        }

        /* Color Coding for Parts */
        .noun { background: rgba(33, 150, 243, 0.2); border-color: var(--primary-blue); }
        .verb { background: rgba(76, 175, 80, 0.2); border-color: var(--secondary-green); }
        .adjective { background: rgba(255, 152, 0, 0.2); border-color: var(--accent-orange); }
        .adverb { background: rgba(233, 30, 99, 0.2); border-color: var(--accent-pink); }
        .pronoun { background: rgba(156, 39, 176, 0.2); border-color: var(--accent-purple); }
        .preposition { background: rgba(0, 188, 212, 0.2); border-color: var(--accent-cyan); }
        .conjunction { background: rgba(255, 193, 7, 0.2); border-color: #FFC107; }

        .noun .word-type { background: var(--primary-blue); }
        .verb .word-type { background: var(--secondary-green); }
        .adjective .word-type { background: var(--accent-orange); }
        .adverb .word-type { background: var(--accent-pink); }
        .pronoun .word-type { background: var(--accent-purple); }
        .preposition .word-type { background: var(--accent-cyan); }
        .conjunction .word-type { background: #FFC107; color: #000; }

        /* Sentence Building */
        .sentence-builder {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .builder-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }

        .bank-word {
            padding: 8px 12px;
            background: var(--dark-surface);
            border-radius: 6px;
            cursor: move;
            border: 2px solid transparent;
        }

        .bank-word:hover {
            border-color: var(--primary-blue);
        }

        .sentence-area {
            min-height: 60px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed var(--dark-border);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            align-items: center;
        }

        /* Quick Reference */
        .reference-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .reference-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--primary-blue);
            border-bottom: 2px solid var(--primary-blue);
        }

        .reference-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .reference-table tr:hover {
            background: rgba(33, 150, 243, 0.05);
        }

        /* Examples Display */
        .examples-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .examples-display {
                grid-template-columns: 1fr;
            }
        }

        .example-card {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
        }

        .example-title {
            font-weight: bold;
            color: var(--secondary-green);
            margin-bottom: 10px;
        }

        .example-list {
            list-style-type: none;
        }

        .example-item {
            padding: 5px 0;
            color: var(--text-secondary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Analysis Steps */
        .analysis-steps {
            margin: 20px 0;
        }

        .analysis-step {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent-orange);
        }

        .step-number {
            display: inline-block;
            width: 25px;
            height: 25px;
            background: var(--accent-orange);
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            margin-right: 10px;
            font-weight: bold;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .parts-grid {
                grid-template-columns: 1fr;
            }
            
            .examples-display {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes highlightWord {
            0%, 100% { background-color: transparent; }
            50% { background-color: rgba(33, 150, 243, 0.3); }
        }
        
        .word-highlight {
            animation: highlightWord 1s ease-in-out infinite;
        }
        
        @keyframes partGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(33, 150, 243, 0.3); }
            50% { box-shadow: 0 0 20px rgba(33, 150, 243, 0.6); }
        }
        
        .part-glow {
            animation: partGlow 2s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1456513080510-34499c43696c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1524578271613-d550eacf6090?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 English</h1>
            <p class="welcome-subtitle">Master the building blocks of language! Learn to identify nouns, verbs, adjectives, adverbs, pronouns, prepositions, and conjunctions. Understand how each part of speech works in sentences to create clear, effective communication!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìùüî§</span>
                <span class="topic-name">Parts of Speech</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Grammar Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- English fact display -->
                <div id="englishFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Grammar Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 100 Grade 5 Parts of Speech questions
        const questions = [
            // Nouns (1-15)
            {
                type: "nouns",
                question: "What is a noun?",
                options: ["A person, place, thing, or idea", "An action word", "A describing word", "A word that shows position"],
                answer: "A",
                explanation: "Nouns name people (teacher), places (school), things (book), or ideas (happiness)"
            },
            {
                type: "nouns",
                question: "Identify the noun in: 'The dog barked loudly.'",
                options: ["dog", "barked", "loudly", "the"],
                answer: "A",
                explanation: "'Dog' is a noun - it names an animal (thing)"
            },
            {
                type: "nouns",
                question: "Which word is NOT a noun?",
                options: ["run", "city", "teacher", "book"],
                answer: "A",
                explanation: "'Run' is a verb (action), while others are nouns"
            },
            {
                type: "nouns",
                question: "Find the noun in: 'Happiness is important.'",
                options: ["Happiness", "is", "important", "No noun"],
                answer: "A",
                explanation: "'Happiness' is an abstract noun (idea)"
            },
            {
                type: "nouns",
                question: "What type of noun is 'New York City'?",
                options: ["Proper noun", "Common noun", "Verb", "Adjective"],
                answer: "A",
                explanation: "Specific names of places are proper nouns (capitalized)"
            },

            // Verbs (16-30)
            {
                type: "verbs",
                question: "What is a verb?",
                options: ["An action or state of being", "A person or place", "A describing word", "A connecting word"],
                answer: "A",
                explanation: "Verbs show actions (run, jump) or states of being (is, seem)"
            },
            {
                type: "verbs",
                question: "Identify the verb in: 'She reads books every day.'",
                options: ["reads", "she", "books", "day"],
                answer: "A",
                explanation: "'Reads' shows the action"
            },
            {
                type: "verbs",
                question: "Which is a verb?",
                options: ["think", "thought", "thinker", "All of them"],
                answer: "A",
                explanation: "'Think' is a verb; 'thought' can be noun/verb; 'thinker' is noun"
            },
            {
                type: "verbs",
                question: "Find the helping verb in: 'They are playing outside.'",
                options: ["are", "playing", "they", "outside"],
                answer: "A",
                explanation: "'Are' helps the main verb 'playing'"
            },
            {
                type: "verbs",
                question: "Which sentence has an action verb?",
                options: ["The cat jumped.", "The cat is sleepy.", "The cat seems tired.", "The cat was here."],
                answer: "A",
                explanation: "'Jumped' shows physical action"
            },

            // Adjectives (31-45)
            {
                type: "adjectives",
                question: "What is an adjective?",
                options: ["A word that describes a noun", "An action word", "A person, place, or thing", "A connecting word"],
                answer: "A",
                explanation: "Adjectives describe nouns (big house, red apple, happy child)"
            },
            {
                type: "adjectives",
                question: "Find the adjective in: 'The tall building reached the sky.'",
                options: ["tall", "building", "reached", "sky"],
                answer: "A",
                explanation: "'Tall' describes the building"
            },
            {
                type: "adjectives",
                question: "Which word is an adjective?",
                options: ["beautiful", "beauty", "beautify", "beautifully"],
                answer: "A",
                explanation: "'Beautiful' describes nouns; others are noun, verb, adverb"
            },
            {
                type: "adjectives",
                question: "How many adjectives in: 'The quick brown fox jumped over the lazy dog.'",
                options: ["3 (quick, brown, lazy)", "2 (quick, brown)", "4 (quick, brown, lazy, dog)", "1 (brown)"],
                answer: "A",
                explanation: "Quick, brown, lazy are adjectives describing nouns"
            },
            {
                type: "adjectives",
                question: "Which adjective compares two things?",
                options: ["bigger", "biggest", "big", "All compare"],
                answer: "A",
                explanation: "'Bigger' compares two things; 'biggest' compares three or more"
            },

            // Adverbs (46-60)
            {
                type: "adverbs",
                question: "What is an adverb?",
                options: ["A word that describes a verb, adjective, or other adverb", "A describing word for nouns", "An action word", "A connecting word"],
                answer: "A",
                explanation: "Adverbs describe verbs (run quickly), adjectives (very tall), or other adverbs (quite slowly)"
            },
            {
                type: "adverbs",
                question: "Find the adverb in: 'She sings beautifully.'",
                options: ["beautifully", "sings", "she", "No adverb"],
                answer: "A",
                explanation: "'Beautifully' describes how she sings (verb)"
            },
            {
                type: "adverbs",
                question: "Which word is an adverb?",
                options: ["quickly", "quick", "quicken", "quickness"],
                answer: "A",
                explanation: "'Quickly' ends in -ly and describes actions"
            },
            {
                type: "adverbs",
                question: "What does the adverb modify in: 'The very tall tree fell.'",
                options: ["tall (adjective)", "tree (noun)", "fell (verb)", "the (article)"],
                answer: "A",
                explanation: "'Very' modifies the adjective 'tall'"
            },
            {
                type: "adverbs",
                question: "Which adverb tells when?",
                options: ["tomorrow", "here", "quickly", "very"],
                answer: "A",
                explanation: "'Tomorrow' tells when; 'here' tells where; others tell how or to what degree"
            },

            // Pronouns (61-75)
            {
                type: "pronouns",
                question: "What is a pronoun?",
                options: ["A word that takes the place of a noun", "A describing word", "An action word", "A connecting word"],
                answer: "A",
                explanation: "Pronouns replace nouns (he, she, it, they, we, you)"
            },
            {
                type: "pronouns",
                question: "Identify the pronoun in: 'They went to the park.'",
                options: ["They", "went", "park", "the"],
                answer: "A",
                explanation: "'They' replaces specific people's names"
            },
            {
                type: "pronouns",
                question: "Which is a possessive pronoun?",
                options: ["my", "me", "I", "myself"],
                answer: "A",
                explanation: "'My' shows ownership; others are subject/object/reflexive pronouns"
            },
            {
                type: "pronouns",
                question: "What pronoun would replace 'Maria and I'?",
                options: ["We", "They", "Us", "Our"],
                answer: "A",
                explanation: "'We' is the subject pronoun for 'Maria and I'"
            },
            {
                type: "pronouns",
                question: "Which is a reflexive pronoun?",
                options: ["herself", "her", "she", "hers"],
                answer: "A",
                explanation: "'Herself' refers back to the subject; others are different pronoun types"
            },

            // Prepositions (76-90)
            {
                type: "prepositions",
                question: "What is a preposition?",
                options: ["A word that shows relationship between nouns/pronouns and other words", "An action word", "A describing word", "A word that connects clauses"],
                answer: "A",
                explanation: "Prepositions show position (in, on, under), time (during, after), or direction (to, from)"
            },
            {
                type: "prepositions",
                question: "Find the preposition in: 'The book is on the table.'",
                options: ["on", "book", "is", "table"],
                answer: "A",
                explanation: "'On' shows the position of the book relative to the table"
            },
            {
                type: "prepositions",
                question: "Which is a preposition?",
                options: ["between", "run", "happy", "quickly"],
                answer: "A",
                explanation: "'Between' shows relationship; others are verb, adjective, adverb"
            },
            {
                type: "prepositions",
                question: "What does the prepositional phrase start with?",
                options: ["A preposition", "A noun", "A verb", "An adjective"],
                answer: "A",
                explanation: "Prepositional phrases begin with a preposition and end with a noun/pronoun"
            },
            {
                type: "prepositions",
                question: "Identify the prepositional phrase: 'She walked through the forest.'",
                options: ["through the forest", "she walked", "walked through", "the forest"],
                answer: "A",
                explanation: "'Through' (preposition) + 'the forest' (object) = prepositional phrase"
            },

            // Conjunctions (91-100)
            {
                type: "conjunctions",
                question: "What is a conjunction?",
                options: ["A word that connects words or groups of words", "A describing word", "An action word", "A word that replaces nouns"],
                answer: "A",
                explanation: "Conjunctions join words, phrases, or clauses (and, but, or, because)"
            },
            {
                type: "conjunctions",
                question: "Find the conjunction in: 'I like apples and oranges.'",
                options: ["and", "like", "apples", "oranges"],
                answer: "A",
                explanation: "'And' connects two nouns"
            },
            {
                type: "conjunctions",
                question: "Which is a coordinating conjunction?",
                options: ["but", "because", "although", "since"],
                answer: "A",
                explanation: "'But' is FANBOYS (for, and, nor, but, or, yet, so); others are subordinating"
            },
            {
                type: "conjunctions",
                question: "What does 'because' show?",
                options: ["Cause and effect", "Contrast", "Addition", "Choice"],
                answer: "A",
                explanation: "'Because' introduces a reason or cause"
            },
            {
                type: "conjunctions",
                question: "Which conjunction would join these sentences: 'It was raining. We stayed inside.'",
                options: ["so", "but", "or", "and"],
                answer: "A",
                explanation: "'So' shows result: It was raining, so we stayed inside"
            },

            // Mixed Practice (101-110)
            {
                type: "mixed",
                question: "Identify ALL nouns in: 'The clever fox quickly jumped over the fence.'",
                options: ["fox, fence", "clever, quickly", "jumped, over", "the, the"],
                answer: "A",
                explanation: "'Fox' and 'fence' are nouns; others are adjective, adverb, verb, preposition, articles"
            },
            {
                type: "mixed",
                question: "What part of speech is 'happily' in: 'The children played happily.'",
                options: ["Adverb", "Adjective", "Noun", "Verb"],
                answer: "A",
                explanation: "'Happily' describes how they played (verb)"
            },
            {
                type: "mixed",
                question: "Which word is a preposition?",
                options: ["under", "understand", "underneath", "All are prepositions"],
                answer: "A",
                explanation: "'Under' shows position; 'understand' is verb; 'underneath' can be preposition/adverb"
            },
            {
                type: "mixed",
                question: "What part of speech connects independent clauses?",
                options: ["Conjunction", "Preposition", "Adverb", "Pronoun"],
                answer: "A",
                explanation: "Conjunctions like 'and, but, or' connect independent clauses"
            },
            {
                type: "mixed",
                question: "Which sentence has all parts of speech correct?",
                options: ["She quickly ran to the store and bought milk.", "She quick ran to the store and bought milk.", "She quickly run to the store and bought milk.", "She quickly ran at the store and bought milk."],
                answer: "A",
                explanation: "Pronoun (She), adverb (quickly), verb (ran), preposition (to), article (the), noun (store), conjunction (and), verb (bought), noun (milk)"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent grammar skills!",
            "Fantastic parts of speech knowledge!",
            "Great job! You're a grammar expert!",
            "Amazing! Your language understanding is impressive!",
            "Well done! Perfect identification!",
            "You're a parts of speech champion!",
            "Perfect! You understand sentence structure!",
            "Outstanding analytical thinking!",
            "Brilliant! You think like a linguist!",
            "You're on fire! Great grammar insight!"
        ];

        // Sample sentences for visualization
        const sampleSentences = [
            {
                sentence: "The quick brown fox jumps over the lazy dog.",
                analysis: [
                    {word: "The", type: "article", part: "determiner"},
                    {word: "quick", type: "adjective", part: "adjective"},
                    {word: "brown", type: "adjective", part: "adjective"},
                    {word: "fox", type: "noun", part: "noun"},
                    {word: "jumps", type: "verb", part: "verb"},
                    {word: "over", type: "preposition", part: "preposition"},
                    {word: "the", type: "article", part: "determiner"},
                    {word: "lazy", type: "adjective", part: "adjective"},
                    {word: "dog", type: "noun", part: "noun"}
                ]
            },
            {
                sentence: "She beautifully sings very sweet songs.",
                analysis: [
                    {word: "She", type: "pronoun", part: "pronoun"},
                    {word: "beautifully", type: "adverb", part: "adverb"},
                    {word: "sings", type: "verb", part: "verb"},
                    {word: "very", type: "adverb", part: "adverb"},
                    {word: "sweet", type: "adjective", part: "adjective"},
                    {word: "songs", type: "noun", part: "noun"}
                ]
            },
            {
                sentence: "My friend and I walked to school but missed the bus.",
                analysis: [
                    {word: "My", type: "pronoun", part: "pronoun"},
                    {word: "friend", type: "noun", part: "noun"},
                    {word: "and", type: "conjunction", part: "conjunction"},
                    {word: "I", type: "pronoun", part: "pronoun"},
                    {word: "walked", type: "verb", part: "verb"},
                    {word: "to", type: "preposition", part: "preposition"},
                    {word: "school", type: "noun", part: "noun"},
                    {word: "but", type: "conjunction", part: "conjunction"},
                    {word: "missed", type: "verb", part: "verb"},
                    {word: "the", type: "article", part: "determiner"},
                    {word: "bus", type: "noun", part: "noun"}
                ]
            }
        ];

        // Parts of speech definitions and examples
        const partsOfSpeech = [
            {
                name: "Noun",
                icon: "üè†",
                definition: "Names a person, place, thing, or idea",
                function: "Subject or object of a sentence",
                examples: ["dog", "city", "teacher", "happiness"],
                color: "noun"
            },
            {
                name: "Verb",
                icon: "üèÉ",
                definition: "Shows action or state of being",
                function: "Tells what the subject does/is",
                examples: ["run", "is", "think", "become"],
                color: "verb"
            },
            {
                name: "Adjective",
                icon: "üé®",
                definition: "Describes or modifies a noun",
                function: "Adds details about nouns",
                examples: ["big", "red", "happy", "three"],
                color: "adjective"
            },
            {
                name: "Adverb",
                icon: "‚ö°",
                definition: "Describes a verb, adjective, or other adverb",
                function: "Tells how, when, where, or to what degree",
                examples: ["quickly", "very", "here", "yesterday"],
                color: "adverb"
            },
            {
                name: "Pronoun",
                icon: "üë§",
                definition: "Takes the place of a noun",
                function: "Avoids repeating nouns",
                examples: ["he", "she", "they", "it", "we"],
                color: "pronoun"
            },
            {
                name: "Preposition",
                icon: "üìç",
                definition: "Shows relationship between words",
                function: "Shows position, time, or direction",
                examples: ["in", "on", "at", "with", "between"],
                color: "preposition"
            },
            {
                name: "Conjunction",
                icon: "üîó",
                definition: "Connects words or groups of words",
                function: "Joins ideas together",
                examples: ["and", "but", "or", "because", "so"],
                color: "conjunction"
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const englishFact = document.getElementById('englishFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5PartsOfSpeech');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5PartsOfSpeech', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5PartsOfSpeech_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5PartsOfSpeech_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a grammar expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent language skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a grammar master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review parts of speech and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Grammar skills grow with practice!";
            }
        }

        // Create English fact display
        function createEnglishFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'english-fact';
            
            const facts = [
                "The eight parts of speech have been studied for over 2,000 years, since ancient Greek times!",
                "English has approximately 170,000 words in current use, each belonging to one or more parts of speech!",
                "The word 'the' is the most common word in English and is called a 'definite article'!",
                "Some words can be multiple parts of speech - 'run' can be a verb (I run) or a noun (a good run)!",
                "The shortest complete sentence in English is 'I am.' - containing a pronoun and verb!",
                "The word 'set' has the most definitions in English (over 430!) and can be many parts of speech!",
                "Prepositions are among the oldest words in English, with some dating back over 1,000 years!",
                "The study of parts of speech is called 'morphology' - from Greek words meaning 'study of form'!"
            ];
            
            factDiv.innerHTML = `<strong>Grammar Fact:</strong> ${facts[Math.floor(Math.random() * facts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "nouns": "üè†",
                "verbs": "üèÉ",
                "adjectives": "üé®",
                "adverbs": "‚ö°",
                "pronouns": "üë§",
                "prepositions": "üìç",
                "conjunctions": "üîó",
                "mixed": "üß©"
            };
            
            let conceptName = "Parts of Speech";
            let conceptIcon = "üìù";
            
            if (question.type.includes("nouns")) {
                conceptName = "Nouns";
                conceptIcon = conceptIcons.nouns;
            } else if (question.type.includes("verbs")) {
                conceptName = "Verbs";
                conceptIcon = conceptIcons.verbs;
            } else if (question.type.includes("adjectives")) {
                conceptName = "Adjectives";
                conceptIcon = conceptIcons.adjectives;
            } else if (question.type.includes("adverbs")) {
                conceptName = "Adverbs";
                conceptIcon = conceptIcons.adverbs;
            } else if (question.type.includes("pronouns")) {
                conceptName = "Pronouns";
                conceptIcon = conceptIcons.pronouns;
            } else if (question.type.includes("prepositions")) {
                conceptName = "Prepositions";
                conceptIcon = conceptIcons.prepositions;
            } else if (question.type.includes("conjunctions")) {
                conceptName = "Conjunctions";
                conceptIcon = conceptIcons.conjunctions;
            } else if (question.type.includes("mixed")) {
                conceptName = "Mixed Practice";
                conceptIcon = conceptIcons.mixed;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("nouns")) {
                label.textContent = "People, places, things, and ideas";
            } else if (question.type.includes("verbs")) {
                label.textContent = "Actions and states of being";
            } else if (question.type.includes("adjectives")) {
                label.textContent = "Words that describe nouns";
            } else if (question.type.includes("adverbs")) {
                label.textContent = "Words that describe verbs, adjectives, or other adverbs";
            } else if (question.type.includes("pronouns")) {
                label.textContent = "Words that replace nouns";
            } else if (question.type.includes("prepositions")) {
                label.textContent = "Words that show relationships";
            } else if (question.type.includes("conjunctions")) {
                label.textContent = "Words that connect ideas";
            } else if (question.type.includes("mixed")) {
                label.textContent = "Identifying all parts of speech";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create grammar visualization
        function createGrammarVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const sentence = sampleSentences[Math.floor(Math.random() * sampleSentences.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">Parts of Speech Guide</h3>
                
                <div class="sentence-display">
                    <div class="sentence-text">"${sentence.sentence}"</div>
                    <div class="word-analysis">
                        ${sentence.analysis.map((word, index) => `
                            <div class="word-item ${word.part} word-highlight" style="animation-delay: ${index * 0.1}s">
                                <div class="word-text">${word.word}</div>
                                <div class="word-type">${word.type}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="parts-grid">
                    ${partsOfSpeech.map((part, index) => `
                        <div class="part-card ${part.color} ${question.type.includes(part.name.toLowerCase()) ? 'active part-glow' : ''}" 
                             style="animation-delay: ${index * 0.1}s">
                            <div class="part-icon">${part.icon}</div>
                            <div class="part-name">${part.name}</div>
                            <div class="part-function">${part.function}</div>
                            <div class="part-examples">${part.examples.slice(0, 2).join(', ')}...</div>
                        </div>
                    `).join('')}
                </div>
                
                <table class="reference-table">
                    <thead>
                        <tr>
                            <th>Part of Speech</th>
                            <th>Function</th>
                            <th>Questions It Answers</th>
                            <th>Examples</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Noun</strong></td>
                            <td>Names something</td>
                            <td>Who? What?</td>
                            <td>dog, city, love</td>
                        </tr>
                        <tr>
                            <td><strong>Verb</strong></td>
                            <td>Shows action/state</td>
                            <td>What is happening?</td>
                            <td>run, is, think</td>
                        </tr>
                        <tr>
                            <td><strong>Adjective</strong></td>
                            <td>Describes nouns</td>
                            <td>What kind? How many?</td>
                            <td>big, red, three</td>
                        </tr>
                        <tr>
                            <td><strong>Adverb</strong></td>
                            <td>Describes verbs/adjectives</td>
                            <td>How? When? Where?</td>
                            <td>quickly, here, very</td>
                        </tr>
                        <tr>
                            <td><strong>Pronoun</strong></td>
                            <td>Replaces nouns</td>
                            <td>Who? What? (again)</td>
                            <td>he, she, they, it</td>
                        </tr>
                        <tr>
                            <td><strong>Preposition</strong></td>
                            <td>Shows relationships</td>
                            <td>Where? When? How?</td>
                            <td>in, on, at, with</td>
                        </tr>
                        <tr>
                            <td><strong>Conjunction</strong></td>
                            <td>Connects words/ideas</td>
                            <td>How are ideas related?</td>
                            <td>and, but, because</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="examples-display">
                    <div class="example-card">
                        <div class="example-title">Quick Identification Tips</div>
                        <ul class="example-list">
                            <li class="example-item">Nouns: Can you have a/an/the before it?</li>
                            <li class="example-item">Verbs: Can you add -ed or -ing?</li>
                            <li class="example-item">Adjectives: Can it come before a noun?</li>
                            <li class="example-item">Adverbs: Often end in -ly</li>
                            <li class="example-item">Pronouns: Replace specific names</li>
                        </ul>
                    </div>
                    <div class="example-card">
                        <div class="example-title">Common Patterns</div>
                        <ul class="example-list">
                            <li class="example-item">Article + Adjective + Noun</li>
                            <li class="example-item">Subject + Verb + Object</li>
                            <li class="example-item">Verb + Adverb</li>
                            <li class="example-item">Preposition + Noun</li>
                            <li class="example-item">Independent Clause + Conjunction + Independent Clause</li>
                        </ul>
                    </div>
                </div>
                
                <div class="analysis-steps">
                    <div class="analysis-step">
                        <span class="step-number">1</span> Find the subject (usually a noun or pronoun)
                    </div>
                    <div class="analysis-step">
                        <span class="step-number">2</span> Find the verb (what the subject does/is)
                    </div>
                    <div class="analysis-step">
                        <span class="step-number">3</span> Look for words that describe the subject (adjectives)
                    </div>
                    <div class="analysis-step">
                        <span class="step-number">4</span> Find words that describe the verb (adverbs)
                    </div>
                    <div class="analysis-step">
                        <span class="step-number">5</span> Identify connecting words (prepositions, conjunctions)
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            englishFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            englishFact.appendChild(createEnglishFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createGrammarVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
