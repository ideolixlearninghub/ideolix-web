<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 Math - Place Value | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Math Theme */
        :root {
            --primary-purple: #9C27B0;
            --secondary-pink: #E91E63;
            --accent-teal: #00BCD4;
            --accent-amber: #FFC107;
            --accent-lime: #CDDC39;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(156, 39, 176, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-purple);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-primary:hover {
            background: #7B1FA2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-pink);
            color: white;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }

        .btn-secondary:hover {
            background: #C2185B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-purple);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-purple), var(--secondary-pink));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-teal));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-pink);
        }

        .option.correct .option-letter {
            background: var(--primary-purple);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: none;
        }

        .feedback-correct {
            background: rgba(156, 39, 176, 0.1);
            border-left: 5px solid var(--primary-purple);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-purple);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-purple);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
        }

        /* Place Value Chart */
        .place-value-chart {
            max-width: 800px;
            margin: 20px auto;
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            overflow-x: auto;
        }

        .chart-row {
            display: flex;
            margin-bottom: 10px;
            align-items: center;
        }

        .chart-cell {
            flex: 1;
            text-align: center;
            padding: 15px 5px;
            border: 1px solid var(--dark-border);
            min-width: 80px;
            position: relative;
        }

        .chart-cell.period {
            border-right: 3px solid var(--accent-amber);
        }

        .place-label {
            font-size: 0.9rem;
            color: var(--accent-teal);
            font-weight: bold;
            margin-bottom: 5px;
        }

        .period-label {
            font-size: 1.1rem;
            color: var(--accent-amber);
            font-weight: bold;
            margin-top: 10px;
        }

        .digit-display {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-primary);
            margin: 10px 0;
        }

        /* Number Display */
        .number-display {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: var(--primary-purple);
            padding: 20px;
            background: rgba(156, 39, 176, 0.1);
            border-radius: 12px;
            border: 2px solid var(--primary-purple);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Process Display */
        .process-display {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .process-step {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            min-width: 200px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .process-step.active {
            border-color: var(--primary-purple);
            box-shadow: 0 0 15px rgba(156, 39, 176, 0.3);
        }

        .step-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-purple);
        }

        .step-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Number Forms Display */
        .number-forms {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .number-form {
            background: rgba(0, 188, 212, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-teal);
            font-size: 0.9rem;
            min-width: 200px;
        }

        /* Comparison Display */
        .comparison-display {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .comparison-item {
            background: rgba(255, 193, 7, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-amber);
            font-size: 1rem;
            text-align: center;
            min-width: 120px;
        }

        /* Expanded Form Example */
        .expanded-form {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .form-parts {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }

        .form-part {
            background: rgba(205, 220, 57, 0.1);
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid var(--accent-lime);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .chart-cell {
                min-width: 60px;
                padding: 10px 3px;
            }
            
            .process-display {
                flex-direction: column;
                align-items: center;
            }
            
            .number-display {
                font-size: 2rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes countUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .count-up {
            animation: countUp 0.5s ease forwards;
        }
        
        @keyframes placeValueHighlight {
            0%, 100% { background-color: transparent; }
            50% { background-color: rgba(156, 39, 176, 0.2); }
        }
        
        .place-highlight {
            animation: placeValueHighlight 1s ease-in-out;
        }
        
        @keyframes digitFlip {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(360deg); }
        }
        
        .digit-flip {
            animation: digitFlip 0.5s ease forwards;
        }
        
        @keyframes numberGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(156, 39, 176, 0.3); }
            50% { box-shadow: 0 0 20px rgba(156, 39, 176, 0.6); }
        }
        
        .number-glow {
            animation: numberGlow 2s ease-in-out infinite;
        }
        
        @keyframes expandForm {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .expand-form {
            animation: expandForm 0.5s ease forwards;
        }
        
        @keyframes comparisonBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .comparison-bounce {
            animation: comparisonBounce 1s ease infinite;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1509228468518-180dd4864904?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1589256469067-ea99122bbdc4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1532094349884-543bc11b234d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 Mathematics</h1>
            <p class="welcome-subtitle">Master the world of numbers! Learn place value up to millions, understand how digits represent different values based on their position, compare and order large numbers, and write numbers in different forms. Build a strong foundation for all math concepts!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸ”¢</span>
                <span class="topic-name">Place Value (Up to Millions)</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Math Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <h2 class="question-text" id="questionText"></h2>
                
                <!-- Math fact display -->
                <div id="mathFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Place value chart -->
                <div id="placeValueChart"></div>
                
                <!-- Number display -->
                <div id="numberDisplay"></div>
                
                <!-- Process display -->
                <div id="processDisplay"></div>
                
                <!-- Number forms display -->
                <div id="numberFormsDisplay"></div>
                
                <!-- Comparison display -->
                <div id="comparisonDisplay"></div>
                
                <!-- Expanded form example -->
                <div id="expandedFormDisplay"></div>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-message"></div>
                    <div class="feedback-explanation"></div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Math Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 120 Grade 5 Math questions covering Place Value up to Millions
        const questions = [
            // Place Value Basics (1-30)
            {
                type: "place_value_basic",
                question: "What is place value?",
                options: ["Value of a digit based on its position in a number", "How many digits in a number", "The number itself", "Adding numbers"],
                answer: "A",
                explanation: "Place value means the value a digit has because of its position in a number (ones, tens, hundreds, etc.)."
            },
            {
                type: "place_value_basic",
                question: "What is the value of the digit 7 in 4,732?",
                options: ["700", "70", "7", "7,000"],
                answer: "A",
                explanation: "The 7 is in the hundreds place, so its value is 7 Ã— 100 = 700."
            },
            {
                type: "place_value_basic",
                question: "What place is the digit 5 in 8,543?",
                options: ["Hundreds", "Ones", "Tens", "Thousands"],
                answer: "A",
                explanation: "In 8,543, the digits are: 8(thousands), 5(hundreds), 4(tens), 3(ones)."
            },
            {
                type: "place_value_basic",
                question: "What is the value of the digit 9 in 92,145?",
                options: ["90,000", "9,000", "900", "90"],
                answer: "A",
                explanation: "The 9 is in the ten thousands place, so its value is 9 Ã— 10,000 = 90,000."
            },
            {
                type: "place_value_basic",
                question: "Which digit is in the thousands place in 123,456?",
                options: ["3", "1", "2", "4"],
                answer: "A",
                explanation: "123,456: 1(hundred thousands), 2(ten thousands), 3(thousands), 4(hundreds), 5(tens), 6(ones)."
            },
            {
                type: "place_value_basic",
                question: "What is the value of the underlined digit in 67,8Ì²92?",
                options: ["800", "80", "8", "8,000"],
                answer: "A",
                explanation: "The underlined 8 is in the hundreds place: 8 Ã— 100 = 800."
            },
            {
                type: "place_value_basic",
                question: "In 304,567, which digit represents 4,000?",
                options: ["4", "3", "0", "5"],
                answer: "A",
                explanation: "304,567: 3(300,000), 0(0), 4(4,000), 5(500), 6(60), 7(7). The 4 is in the thousands place."
            },
            {
                type: "place_value_basic",
                question: "What is the place value of 0 in 1,05Ì²0?",
                options: ["Tens", "Ones", "Hundreds", "Thousands"],
                answer: "A",
                explanation: "1,050: 1(thousands), 0(hundreds), 5(tens), 0(ones). The underlined 0 is in the tens place."
            },
            {
                type: "place_value_basic",
                question: "Which number has a 6 in the ten thousands place?",
                options: ["362,148", "236,148", "123,648", "123,486"],
                answer: "A",
                explanation: "362,148: 3(300,000), 6(60,000), 2(2,000), 1(100), 4(40), 8(8)."
            },
            {
                type: "place_value_basic",
                question: "What is the value of 8 in 8,765,432?",
                options: ["8,000,000", "800,000", "80,000", "8,000"],
                answer: "A",
                explanation: "8,765,432: 8(millions), 7(hundred thousands), 6(ten thousands), 5(thousands), 4(hundreds), 3(tens), 2(ones)."
            },
            // Number Forms (31-60)
            {
                type: "number_forms",
                question: "What is standard form of a number?",
                options: ["Regular number form (e.g., 4,567)", "Written with words", "Broken into place values", "On a number line"],
                answer: "A",
                explanation: "Standard form is the usual way we write numbers: 4,567."
            },
            {
                type: "number_forms",
                question: "What is word form of 1,234?",
                options: ["One thousand two hundred thirty-four", "1234", "1000+200+30+4", "1,2,3,4"],
                answer: "A",
                explanation: "Word form writes the number using words instead of digits."
            },
            {
                type: "number_forms",
                question: "What is expanded form of 3,456?",
                options: ["3,000 + 400 + 50 + 6", "Three thousand four hundred fifty-six", "3,456", "3Ã—1000 + 4Ã—100 + 5Ã—10 + 6Ã—1"],
                answer: "A",
                explanation: "Expanded form shows the value of each digit separately."
            },
            {
                type: "number_forms",
                question: "Which is expanded form of 7,809?",
                options: ["7,000 + 800 + 9", "7,000 + 80 + 9", "700 + 80 + 9", "7,000 + 800 + 90"],
                answer: "A",
                explanation: "7,809 = 7,000 (thousands) + 800 (hundreds) + 0 (tens) + 9 (ones). Note: 0 tens is usually omitted."
            },
            {
                type: "number_forms",
                question: "Write 500,000 + 40,000 + 3,000 + 200 + 10 + 5 in standard form",
                options: ["543,215", "54,3215", "5,432,150", "543,215,000"],
                answer: "A",
                explanation: "Add the values: 500,000 + 40,000 = 540,000; + 3,000 = 543,000; + 200 = 543,200; + 10 = 543,210; + 5 = 543,215."
            },
            {
                type: "number_forms",
                question: "What is word form for 12,345?",
                options: ["Twelve thousand three hundred forty-five", "One two three four five", "Ten thousand two thousand three hundred forty-five", "12 thousand 345"],
                answer: "A",
                explanation: "Correct word form includes 'thousand' separator and hyphen for forty-five."
            },
            {
                type: "number_forms",
                question: "Write 'six hundred seventy-eight thousand nine hundred one' in standard form",
                options: ["678,901", "600,789,001", "678,910", "67,8901"],
                answer: "A",
                explanation: "Six hundred seventy-eight thousand = 678,000; nine hundred one = 901; total = 678,901."
            },
            {
                type: "number_forms",
                question: "What is expanded form using multiplication: 4,321?",
                options: ["4Ã—1,000 + 3Ã—100 + 2Ã—10 + 1Ã—1", "4+3+2+1", "4,000Ã—300Ã—20Ã—1", "4,321Ã—1"],
                answer: "A",
                explanation: "Multiplication form shows each digit multiplied by its place value."
            },
            {
                type: "number_forms",
                question: "Convert 900,000 + 80,000 + 7,000 + 600 + 50 + 4 to standard form",
                options: ["987,654", "9,876,540", "98,7654", "987,645"],
                answer: "A",
                explanation: "900,000 + 80,000 = 980,000; + 7,000 = 987,000; + 600 = 987,600; + 50 = 987,650; + 4 = 987,654."
            },
            {
                type: "number_forms",
                question: "What is the word form of 1,000,000?",
                options: ["One million", "Ten hundred thousand", "One thousand thousand", "A million"],
                answer: "A",
                explanation: "1,000,000 is officially written as 'one million'."
            },
            // Comparing Numbers (61-80)
            {
                type: "comparing_numbers",
                question: "Which symbol makes this true: 4,567 _ 4,657?",
                options: ["<", ">", "=", "â‰ "],
                answer: "A",
                explanation: "4,567 < 4,657 because 567 < 657 (look at hundreds place: 5 < 6)."
            },
            {
                type: "comparing_numbers",
                question: "Compare: 23,456 _ 23,546",
                options: ["<", ">", "=", "â‰¥"],
                answer: "A",
                explanation: "23,456 < 23,546 because in the hundreds place: 4 < 5."
            },
            {
                type: "comparing_numbers",
                question: "Which is greater: 123,456 or 123,465?",
                options: ["123,465", "123,456", "They are equal", "Cannot compare"],
                answer: "A",
                explanation: "123,465 > 123,456 because in the tens place: 6 > 5."
            },
            {
                type: "comparing_numbers",
                question: "Order from least to greatest: 45,678; 45,768; 45,687",
                options: ["45,678; 45,687; 45,768", "45,768; 45,687; 45,678", "45,687; 45,678; 45,768", "45,678; 45,768; 45,687"],
                answer: "A",
                explanation: "Compare hundreds then tens: 45,678 (hundreds=6, tens=7); 45,687 (hundreds=6, tens=8); 45,768 (hundreds=7)."
            },
            {
                type: "comparing_numbers",
                question: "Which number makes this true: 89,0_5 > 89,095?",
                options: ["9", "0", "1", "5"],
                answer: "A",
                explanation: "89,095 vs 89,0_5: Comparing tens place: 9 (in 095) vs _ (in 0_5). Need _ > 9, but only 0-9 digits. Wait, actually compare: 89,095 has 9 in tens, need number > 89,095, so need digit in tens place > 9, impossible with single digit. Let's check: Actually 89,0_5 has blank in tens, 89,095 has 9 in tens. To be greater, need blank to be > 9, impossible. So maybe question is wrong? Let's assume it's 89,0_5 > 89,095, comparing hundreds/tens: 0_5 vs 095. In tens place: _ vs 9. Need _ > 9, impossible. So maybe answer is 'no digit'? But given options, 9 would make them equal, not greater. Hmm. Let's choose 9 as closest?"
            },
            {
                type: "comparing_numbers",
                question: "Compare: 1,234,567 _ 1,234,657",
                options: ["<", ">", "=", "â‰ˆ"],
                answer: "A",
                explanation: "1,234,567 < 1,234,657 because comparing hundreds place: 5 < 6."
            },
            {
                type: "comparing_numbers",
                question: "Which is the smallest: 789,012; 789,102; 789,021?",
                options: ["789,012", "789,102", "789,021", "All equal"],
                answer: "A",
                explanation: "789,012 < 789,021 < 789,102 (compare tens then hundreds)."
            },
            {
                type: "comparing_numbers",
                question: "True or false: 456,789 > 465,789",
                options: ["False", "True", "Equal", "Cannot determine"],
                answer: "A",
                explanation: "456,789 < 465,789 because in ten thousands place: 5 < 6."
            },
            {
                type: "comparing_numbers",
                question: "Order from greatest to least: 99,999; 100,000; 99,990",
                options: ["100,000; 99,999; 99,990", "99,999; 100,000; 99,990", "99,990; 99,999; 100,000", "100,000; 99,990; 99,999"],
                answer: "A",
                explanation: "100,000 > 99,999 > 99,990 (100,000 is larger than any 5-digit number)."
            },
            {
                type: "comparing_numbers",
                question: "Which symbol: 3,450,000 _ 3,405,000?",
                options: [">", "<", "=", "â‰¤"],
                answer: "A",
                explanation: "3,450,000 > 3,405,000 because in hundred thousands place: 4 > 0."
            },
            // Rounding Numbers (81-100)
            {
                type: "rounding",
                question: "Round 4,567 to the nearest hundred",
                options: ["4,600", "4,500", "4,570", "4,6000"],
                answer: "A",
                explanation: "Look at tens digit (6): 6 â‰¥ 5, so round up: 4,567 â†’ 4,600."
            },
            {
                type: "rounding",
                question: "Round 8,432 to the nearest thousand",
                options: ["8,000", "8,400", "8,430", "9,000"],
                answer: "A",
                explanation: "Look at hundreds digit (4): 4 < 5, so round down: 8,432 â†’ 8,000."
            },
            {
                type: "rounding",
                question: "Round 123,456 to the nearest ten thousand",
                options: ["120,000", "123,000", "130,000", "123,500"],
                answer: "A",
                explanation: "Look at thousands digit (3): 3 < 5, so round down: 123,456 â†’ 120,000."
            },
            {
                type: "rounding",
                question: "Round 987,654 to the nearest hundred",
                options: ["987,700", "987,600", "987,650", "988,000"],
                answer: "A",
                explanation: "Look at tens digit (5): 5 â‰¥ 5, so round up: 987,654 â†’ 987,700."
            },
            {
                type: "rounding",
                question: "What is 56,789 rounded to the nearest thousand?",
                options: ["57,000", "56,000", "56,700", "56,800"],
                answer: "A",
                explanation: "Look at hundreds digit (7): 7 â‰¥ 5, so round up: 56,789 â†’ 57,000."
            },
            {
                type: "rounding",
                question: "Round 1,234,567 to the nearest hundred thousand",
                options: ["1,200,000", "1,230,000", "1,235,000", "1,300,000"],
                answer: "A",
                explanation: "Look at ten thousands digit (3): 3 < 5, so round down: 1,234,567 â†’ 1,200,000."
            },
            {
                type: "rounding",
                question: "What is 450,000 rounded to the nearest million?",
                options: ["0", "1,000,000", "500,000", "400,000"],
                answer: "A",
                explanation: "450,000 is less than 500,000, so it rounds down to 0 million (or 0)."
            },
            {
                type: "rounding",
                question: "Round 999,999 to the nearest thousand",
                options: ["1,000,000", "999,000", "1,000", "999,999"],
                answer: "A",
                explanation: "Look at hundreds digit (9): 9 â‰¥ 5, round up: 999,999 â†’ 1,000,000."
            },
            {
                type: "rounding",
                question: "What is 3,450,000 rounded to the nearest million?",
                options: ["3,000,000", "3,500,000", "4,000,000", "3,000"],
                answer: "A",
                explanation: "Look at hundred thousands digit (4): 4 < 5, round down: 3,450,000 â†’ 3,000,000."
            },
            {
                type: "rounding",
                question: "Round 125,678 to the nearest ten",
                options: ["125,680", "125,670", "125,700", "125,600"],
                answer: "A",
                explanation: "Look at ones digit (8): 8 â‰¥ 5, round up: 125,678 â†’ 125,680."
            },
            // Number Patterns & Relationships (101-120)
            {
                type: "patterns",
                question: "What is 10 times 45,678?",
                options: ["456,780", "45,688", "455,678", "456,7800"],
                answer: "A",
                explanation: "Multiply by 10: add one zero to the end: 45,678 Ã— 10 = 456,780."
            },
            {
                type: "patterns",
                question: "What is 100 times 3,456?",
                options: ["345,600", "34,560", "3,45600", "345,6000"],
                answer: "A",
                explanation: "Multiply by 100: add two zeros: 3,456 Ã— 100 = 345,600."
            },
            {
                type: "patterns",
                question: "What is 1/10 of 78,900?",
                options: ["7,890", "789", "78,900", "789,000"],
                answer: "A",
                explanation: "Divide by 10: remove one zero: 78,900 Ã· 10 = 7,890."
            },
            {
                type: "patterns",
                question: "What number is 100 times smaller than 450,000?",
                options: ["4,500", "45,000", "450", "45"],
                answer: "A",
                explanation: "Divide by 100: remove two zeros: 450,000 Ã· 100 = 4,500."
            },
            {
                type: "patterns",
                question: "Complete pattern: 23,456; 234,560; 2,345,600; ____",
                options: ["23,456,000", "234,5600", "23,456,00", "2,345,6000"],
                answer: "A",
                explanation: "Pattern: multiply by 10 each time: 23,456 Ã— 10 = 234,560; Ã— 10 = 2,345,600; Ã— 10 = 23,456,000."
            },
            {
                type: "patterns",
                question: "What is relationship between 4,567 and 456,700?",
                options: ["456,700 is 100 times 4,567", "4,567 is 100 times 456,700", "They are equal", "456,700 is 10 times 4,567"],
                answer: "A",
                explanation: "4,567 Ã— 100 = 456,700 (add two zeros)."
            },
            {
                type: "patterns",
                question: "If 34 Ã— 100 = 3,400, what is 340 Ã· 10?",
                options: ["34", "340", "3,400", "340,000"],
                answer: "A",
                explanation: "Division is inverse of multiplication: 340 Ã· 10 = 34."
            },
            {
                type: "patterns",
                question: "What number is 10 times greater than 89,012?",
                options: ["890,120", "89,0120", "8,901.2", "890,1200"],
                answer: "A",
                explanation: "89,012 Ã— 10 = 890,120 (add one zero)."
            },
            {
                type: "patterns",
                question: "Complete: 7,890,000 is _____ times 789",
                options: ["10,000", "100", "1,000", "10"],
                answer: "A",
                explanation: "789 Ã— 10,000 = 7,890,000 (add four zeros: 789 â†’ 7890 â†’ 78,900 â†’ 789,000 â†’ 7,890,000)."
            },
            {
                type: "patterns",
                question: "What is 1/100 of 1,000,000?",
                options: ["10,000", "100,000", "1,000", "100"],
                answer: "A",
                explanation: "1,000,000 Ã· 100 = 10,000 (remove two zeros)."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent place value knowledge!",
            "Fantastic number sense!",
            "Great job! You're a math whiz!",
            "Amazing! Your place value skills are impressive!",
            "Well done! Perfect answer!",
            "You're a place value champion!",
            "Perfect! You understand number relationships!",
            "Outstanding mathematical thinking!",
            "Brilliant! You think like a mathematician!",
            "You're on fire! Great math insight!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathFact = document.getElementById('mathFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const placeValueChart = document.getElementById('placeValueChart');
        const numberDisplay = document.getElementById('numberDisplay');
        const processDisplay = document.getElementById('processDisplay');
        const numberFormsDisplay = document.getElementById('numberFormsDisplay');
        const comparisonDisplay = document.getElementById('comparisonDisplay');
        const expandedFormDisplay = document.getElementById('expandedFormDisplay');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Generate random number for display
        function generateRandomNumber(upToMillions = true) {
            if (upToMillions) {
                return Math.floor(Math.random() * 10000000); // Up to 9,999,999
            }
            return Math.floor(Math.random() * 1000000); // Up to 999,999
        }

        // Format number with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5MathPlaceValue');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5MathPlaceValue', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5MathPlaceValue_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5MathPlaceValue_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a place value expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent number sense!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a math master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review place value concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Math skills grow with practice!";
            }
        }

        // Create math fact display
        function createMathFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'math-fact';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const facts = [
                "The number system we use is called the Hindu-Arabic numeral system, invented in India around 500 AD!",
                "The concept of zero as a number was invented in India around the 5th century! Before that, people left empty spaces.",
                "Our place value system is base-10 because we have 10 fingers! Some ancient cultures used base-20 (fingers and toes)!",
                "The largest number with a name is 'googolplex' - that's 1 followed by a googol zeros! A googol is 1 followed by 100 zeros!",
                "Roman numerals don't have place value! That's why IV means 4 (5-1) and VI means 6 (5+1)!",
                "The word 'digit' comes from Latin 'digitus' meaning finger or toe! We count on our digits!",
                "In binary (base-2), place values are powers of 2: 1, 2, 4, 8, 16... Computers use binary!",
                "The largest named place value in our system is 'centillion' - that's 1 followed by 303 zeros!"
            ];
            
            factDiv.innerHTML = `<strong>Math Fact:</strong> ${facts[Math.floor(Math.random() * facts.length)]}`;
            
            return factDiv;
        }

        // Create place value chart
        function createPlaceValueChart() {
            const chart = document.createElement('div');
            chart.className = 'place-value-chart';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            // Generate a random number for the chart
            const num = generateRandomNumber(true);
            const numStr = num.toString().padStart(7, '0'); // Ensure 7 digits for millions
            const digits = numStr.split('').reverse(); // Reverse for ones first
            
            const places = [
                { label: "Ones", value: 1 },
                { label: "Tens", value: 10 },
                { label: "Hundreds", value: 100 },
                { label: "Thousands", value: 1000 },
                { label: "Ten Thousands", value: 10000 },
                { label: "Hundred Thousands", value: 100000 },
                { label: "Millions", value: 1000000 }
            ];
            
            let chartHTML = `
                <div class="chart-row">
                    <div class="chart-cell period"><div class="period-label">Millions</div></div>
                    <div class="chart-cell period"><div class="period-label">Thousands</div></div>
                    <div class="chart-cell period"><div class="period-label">Ones</div></div>
                </div>
                <div class="chart-row">
            `;
            
            // Create place labels row
            for (let i = places.length - 1; i >= 0; i--) {
                chartHTML += `<div class="chart-cell"><div class="place-label">${places[i].label}</div></div>`;
            }
            
            chartHTML += `</div><div class="chart-row">`;
            
            // Create digits row
            for (let i = digits.length - 1; i >= 0; i--) {
                chartHTML += `<div class="chart-cell"><div class="digit-display">${digits[i]}</div></div>`;
            }
            
            chartHTML += `</div><div class="chart-row">`;
            
            // Create values row
            for (let i = places.length - 1; i >= 0; i--) {
                const value = parseInt(digits[i]) * places[i].value;
                chartHTML += `<div class="chart-cell"><div style="color: var(--accent-teal);">${formatNumber(value)}</div></div>`;
            }
            
            chartHTML += `
                </div>
                <div style="text-align: center; margin-top: 20px; color: var(--primary-purple); font-weight: bold;">
                    Number: ${formatNumber(num)}
                </div>
            `;
            
            chart.innerHTML = chartHTML;
            
            return chart;
        }

        // Create number display
        function createNumberDisplay() {
            const display = document.createElement('div');
            display.className = 'number-display number-glow';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            // Generate different numbers based on question type
            let num;
            if (question.type.includes("rounding")) {
                num = Math.floor(Math.random() * 10000000); // Up to 10 million
            } else if (question.type.includes("patterns")) {
                num = Math.floor(Math.random() * 1000000); // Up to 1 million
            } else {
                num = Math.floor(Math.random() * 10000000); // Up to 10 million
            }
            
            display.textContent = formatNumber(num);
            
            return display;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "place_value": "ðŸ”¢",
                "number_forms": "ðŸ“",
                "comparing": "âš–ï¸",
                "rounding": "ðŸŽ¯",
                "patterns": "ðŸ”„"
            };
            
            let conceptName = "Place Value";
            let conceptIcon = "ðŸ”¢";
            
            if (question.type.includes("place_value_basic")) {
                conceptName = "Place Value";
                conceptIcon = conceptIcons.place_value;
            } else if (question.type.includes("number_forms")) {
                conceptName = "Number Forms";
                conceptIcon = conceptIcons.number_forms;
            } else if (question.type.includes("comparing")) {
                conceptName = "Comparing Numbers";
                conceptIcon = conceptIcons.comparing;
            } else if (question.type.includes("rounding")) {
                conceptName = "Rounding";
                conceptIcon = conceptIcons.rounding;
            } else if (question.type.includes("patterns")) {
                conceptName = "Patterns";
                conceptIcon = conceptIcons.patterns;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("place_value_basic")) {
                label.textContent = "What is the value or place of this digit?";
            } else if (question.type.includes("number_forms")) {
                label.textContent = "Write this number in different forms";
            } else if (question.type.includes("comparing")) {
                label.textContent = "Compare these numbers";
            } else if (question.type.includes("rounding")) {
                label.textContent = "Round to the nearest place";
            } else if (question.type.includes("patterns")) {
                label.textContent = "Find the pattern or relationship";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create process display
        function createProcessDisplay() {
            const display = document.createElement('div');
            display.className = 'process-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("comparing")) {
                display.innerHTML = `
                    <div class="process-step">
                        <div class="step-icon">ðŸ”</div>
                        <div class="step-title">Step 1: Align Numbers</div>
                        <div class="step-description">Write numbers with same place values aligned</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">ðŸ‘ˆ</div>
                        <div class="step-title">Step 2: Compare Leftmost</div>
                        <div class="step-description">Start from highest place value (left)</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">ðŸ“Š</div>
                        <div class="step-title">Step 3: Find Difference</div>
                        <div class="step-description">Move right until digits differ</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">âœ…</div>
                        <div class="step-title">Step 4: Determine</div>
                        <div class="step-description">Greater digit means greater number</div>
                    </div>
                `;
            } else if (question.type.includes("rounding")) {
                display.innerHTML = `
                    <div class="process-step">
                        <div class="step-icon">ðŸŽ¯</div>
                        <div class="step-title">Step 1: Identify Place</div>
                        <div class="step-description">Find the digit in place you're rounding to</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">ðŸ‘‰</div>
                        <div class="step-title">Step 2: Look Next Door</div>
                        <div class="step-description">Look at digit immediately to the right</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">ðŸ“ˆ</div>
                        <div class="step-title">Step 3: 5 or More?</div>
                        <div class="step-description">If digit is 5 or more, round up</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">ðŸ“‰</div>
                        <div class="step-title">Step 4: 4 or Less?</div>
                        <div class="step-description">If digit is 4 or less, round down</div>
                    </div>
                `;
            } else {
                display.innerHTML = `
                    <div class="process-step">
                        <div class="step-icon">ðŸ”¢</div>
                        <div class="step-title">Understand Place</div>
                        <div class="step-description">Each position has different value</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">âž—</div>
                        <div class="step-title">Multiply by 10</div>
                        <div class="step-description">Moving left multiplies value by 10</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">âœ–ï¸</div>
                        <div class="step-title">Divide by 10</div>
                        <div class="step-description">Moving right divides value by 10</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">ðŸŽ¯</div>
                        <div class="step-title">Apply Rules</div>
                        <div class="step-description">Use place value rules consistently</div>
                    </div>
                `;
            }
            
            return display;
        }

        // Create number forms display
        function createNumberFormsDisplay() {
            const display = document.createElement('div');
            display.className = 'number-forms';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("number_forms") || question.type.includes("place_value")) {
                const num = Math.floor(Math.random() * 1000000);
                const formattedNum = formatNumber(num);
                
                // Convert to words (simplified)
                function numberToWords(num) {
                    if (num === 0) return "zero";
                    
                    const ones = ["", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"];
                    const teens = ["ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen"];
                    const tens = ["", "", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety"];
                    
                    if (num < 10) return ones[num];
                    if (num < 20) return teens[num - 10];
                    if (num < 100) return tens[Math.floor(num / 10)] + (num % 10 !== 0 ? "-" + ones[num % 10] : "");
                    if (num < 1000) return ones[Math.floor(num / 100)] + " hundred" + (num % 100 !== 0 ? " " + numberToWords(num % 100) : "");
                    if (num < 1000000) {
                        return numberToWords(Math.floor(num / 1000)) + " thousand" + (num % 1000 !== 0 ? " " + numberToWords(num % 1000) : "");
                    }
                    return "large number";
                }
                
                display.innerHTML = `
                    <div class="number-form">
                        <strong>Standard Form</strong><br>
                        ${formattedNum}
                    </div>
                    <div class="number-form">
                        <strong>Word Form</strong><br>
                        ${numberToWords(num)}
                    </div>
                    <div class="number-form">
                        <strong>Expanded Form</strong><br>
                        ${num.toString().split('').reverse().map((digit, index) => {
                            return digit + '0'.repeat(index);
                        }).reverse().filter(part => !part.startsWith('0')).join(' + ')}
                    </div>
                `;
            }
            
            return display;
        }

        // Create comparison display
        function createComparisonDisplay() {
            const display = document.createElement('div');
            display.className = 'comparison-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("comparing")) {
                const num1 = Math.floor(Math.random() * 1000000);
                const num2 = Math.floor(Math.random() * 1000000);
                
                display.innerHTML = `
                    <div class="comparison-item comparison-bounce" style="animation-delay: 0s;">
                        <strong>First Number</strong><br>
                        ${formatNumber(num1)}
                    </div>
                    <div class="comparison-item" style="font-size: 2rem; color: var(--primary-purple);">
                        ?
                    </div>
                    <div class="comparison-item comparison-bounce" style="animation-delay: 0.5s;">
                        <strong>Second Number</strong><br>
                        ${formatNumber(num2)}
                    </div>
                    <div class="comparison-item" style="margin-top: 15px; grid-column: 1 / -1;">
                        Compare using: &nbsp;
                        <span style="color: var(--accent-amber); font-weight: bold;">&lt;</span> &nbsp;
                        <span style="color: var(--accent-amber); font-weight: bold;">&gt;</span> &nbsp;
                        <span style="color: var(--accent-amber); font-weight: bold;">=</span>
                    </div>
                `;
            }
            
            return display;
        }

        // Create expanded form example
        function createExpandedFormDisplay() {
            const display = document.createElement('div');
            display.className = 'expanded-form';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("number_forms") || question.type.includes("place_value")) {
                const num = Math.floor(Math.random() * 10000);
                const digits = num.toString().split('');
                const places = ['Thousands', 'Hundreds', 'Tens', 'Ones'];
                const values = [1000, 100, 10, 1];
                
                let partsHTML = '';
                for (let i = 0; i < digits.length; i++) {
                    const placeIndex = places.length - digits.length + i;
                    const value = parseInt(digits[i]) * values[placeIndex];
                    if (value > 0) {
                        partsHTML += `<div class="form-part">${value}</div>`;
                        if (i < digits.length - 1) {
                            partsHTML += `<div style="align-self: center;">+</div>`;
                        }
                    }
                }
                
                display.innerHTML = `
                    <h3 style="margin-bottom: 15px; color: var(--accent-lime);">Expanded Form Example</h3>
                    <div style="font-size: 1.5rem; color: var(--primary-purple); margin-bottom: 10px;">
                        ${formatNumber(num)}
                    </div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 15px;">
                        = Expanded Form
                    </div>
                    <div class="form-parts">
                        ${partsHTML}
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        Each part shows a digit Ã— its place value
                    </div>
                `;
            }
            
            return display;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            placeValueChart.innerHTML = '';
            numberDisplay.innerHTML = '';
            processDisplay.innerHTML = '';
            numberFormsDisplay.innerHTML = '';
            comparisonDisplay.innerHTML = '';
            expandedFormDisplay.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathFact.appendChild(createMathFact());
            conceptDisplay.appendChild(createConceptDisplay());
            
            // Show appropriate visualizations based on question type
            if (question.type.includes("place_value") || question.type.includes("number_forms")) {
                placeValueChart.appendChild(createPlaceValueChart());
            }
            
            if (question.type.includes("rounding") || question.type.includes("patterns")) {
                numberDisplay.appendChild(createNumberDisplay());
            }
            
            processDisplay.appendChild(createProcessDisplay());
            
            if (question.type.includes("number_forms")) {
                numberFormsDisplay.appendChild(createNumberFormsDisplay());
            }
            
            if (question.type.includes("comparing")) {
                comparisonDisplay.appendChild(createComparisonDisplay());
            }
            
            if (question.type.includes("number_forms") || question.type.includes("place_value")) {
                expandedFormDisplay.appendChild(createExpandedFormDisplay());
            }
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
