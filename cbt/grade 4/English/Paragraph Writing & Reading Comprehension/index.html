<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 4 English - Paragraph Writing & Reading Comprehension | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Dark Theme with Green and Dark Orange */
        :root {
            --primary-green: #00C853;
            --secondary-orange: #FF5722;
            --accent-purple: #7C4DFF;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(0, 200, 83, 0.3);
            --orange-glow: 0 0 20px rgba(255, 87, 34, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(0, 200, 83, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 200, 83, 0.4);
        }

        .btn-primary:hover {
            background: #00B248;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 200, 83, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-orange);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 87, 34, 0.4);
        }

        .btn-secondary:hover {
            background: #E64A19;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 87, 34, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-green);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-green), var(--secondary-orange));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 200, 83, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .passage-display {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            position: relative;
            font-size: 1.1rem;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }

        .paragraph-display {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            position: relative;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .highlighted-sentence {
            background: rgba(0, 200, 83, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            color: var(--primary-green);
            border: 1px solid var(--primary-green);
            margin: 10px 0;
        }

        .writing-guide {
            background: rgba(124, 77, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 5px solid var(--accent-purple);
        }

        .guide-title {
            color: var(--accent-purple);
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .parts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .part-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--dark-border);
        }

        .part-name {
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .part-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .parts-grid {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: flex-start;
        }

        .option:hover {
            border-color: var(--primary-green);
            background: rgba(0, 200, 83, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .option-text {
            flex: 1;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 200, 83, 0.1);
            border-left: 5px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .part-details {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .detail-item {
            margin-bottom: 8px;
            padding-left: 15px;
            position: relative;
        }

        .detail-item:before {
            content: "•";
            color: var(--primary-green);
            position: absolute;
            left: 0;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .passage-display, .paragraph-display {
                font-size: 1rem;
                padding: 20px;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1503676260728-1c00da094a0b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1450101499163-c8848c66ca85?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 4 English – Paragraph Writing & Reading Comprehension</h1>
            <p class="welcome-subtitle">Master the art of writing strong paragraphs and develop your reading comprehension skills! Learn to identify topic sentences, supporting details, and make inferences from texts.</p>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Practice Mode</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <h2 class="question-text" id="questionText">Read the passage and answer the question:</h2>
                
                <div class="passage-display" id="passageDisplay"></div>
                <div class="paragraph-display" id="paragraphDisplay"></div>
                
                <div class="writing-guide">
                    <div class="guide-title">Reading & Writing Guide</div>
                    <div class="parts-grid">
                        <div class="part-item">
                            <div class="part-name">Topic Sentence</div>
                            <div class="part-description">The main idea of a paragraph that tells what it will be about</div>
                        </div>
                        <div class="part-item">
                            <div class="part-name">Supporting Details</div>
                            <div class="part-description">Facts, examples, and information that explain the topic sentence</div>
                        </div>
                        <div class="part-item">
                            <div class="part-name">Inference</div>
                            <div class="part-description">Using clues from the text to understand what isn't directly stated</div>
                        </div>
                        <div class="part-item">
                            <div class="part-name">Main Idea</div>
                            <div class="part-description">The most important point the author wants to communicate</div>
                        </div>
                    </div>
                </div>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-message"></div>
                    <div class="feedback-explanation"></div>
                    <div class="part-details" id="partDetails"></div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Retry Topic</button>
                <button class="btn btn-secondary" id="viewTopics">View Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 100+ Paragraph Writing & Reading Comprehension questions for Grade 4
        const questions = [
            // Paragraph Writing - Topic Sentences (25 questions)
            {
                type: "paragraph",
                paragraph: `Dogs make wonderful pets for many reasons. First, they are very loyal and will always be happy to see you. Second, dogs can be trained to do many helpful things. Finally, having a dog encourages you to be more active because they need regular walks.`,
                question: "What is the topic sentence of this paragraph?",
                options: [
                    "First, they are very loyal and will always be happy to see you.",
                    "Dogs make wonderful pets for many reasons.",
                    "Finally, having a dog encourages you to be more active because they need regular walks.",
                    "Second, dogs can be trained to do many helpful things."
                ],
                answer: "B",
                explanation: "The topic sentence is 'Dogs make wonderful pets for many reasons' because it states the main idea that the rest of the paragraph supports.",
                details: [
                    "The topic sentence introduces the main idea of the paragraph",
                    "It usually comes at the beginning of the paragraph",
                    "All other sentences should support or explain the topic sentence",
                    "A good topic sentence tells the reader what the paragraph will be about"
                ]
            },
            {
                type: "paragraph",
                paragraph: `Reading every day has many benefits for children. It helps improve their vocabulary as they learn new words. Reading also strengthens comprehension skills, allowing children to understand stories better. Additionally, regular reading can spark creativity and imagination.`,
                question: "Which sentence is the topic sentence?",
                options: [
                    "It helps improve their vocabulary as they learn new words.",
                    "Reading every day has many benefits for children.",
                    "Reading also strengthens comprehension skills, allowing children to understand stories better.",
                    "Additionally, regular reading can spark creativity and imagination."
                ],
                answer: "B",
                explanation: "'Reading every day has many benefits for children' is the topic sentence because it states the main idea that the paragraph will explain.",
                details: [
                    "The topic sentence makes a claim that the rest of the paragraph supports",
                    "In this case, the claim is that reading has benefits",
                    "The other sentences list specific benefits that support the main idea"
                ]
            },
            {
                type: "paragraph",
                paragraph: `My grandmother's garden is my favorite place in the world. The colorful flowers bloom in beautiful patterns throughout the spring and summer. Butterflies and bees visit the garden daily, adding to its magical feeling. The sweet smell of roses fills the air, making it a peaceful retreat.`,
                question: "Identify the topic sentence in this paragraph.",
                options: [
                    "The colorful flowers bloom in beautiful patterns throughout the spring and summer.",
                    "My grandmother's garden is my favorite place in the world.",
                    "Butterflies and bees visit the garden daily, adding to its magical feeling.",
                    "The sweet smell of roses fills the air, making it a peaceful retreat."
                ],
                answer: "B",
                explanation: "The topic sentence is 'My grandmother's garden is my favorite place in the world' because it introduces the main idea that the paragraph will describe.",
                details: [
                    "The topic sentence often expresses an opinion or feeling",
                    "Here, it states that the garden is the writer's favorite place",
                    "The other sentences provide details that explain why it's the favorite place"
                ]
            },
            {
                type: "paragraph",
                paragraph: `There are several steps to planting a successful vegetable garden. First, you need to choose a sunny spot with good soil. Next, prepare the soil by removing weeds and adding compost. Then, plant the seeds or seedlings according to the package directions. Finally, water regularly and watch your plants grow.`,
                question: "What is the topic sentence of this paragraph?",
                options: [
                    "First, you need to choose a sunny spot with good soil.",
                    "Next, prepare the soil by removing weeds and adding compost.",
                    "There are several steps to planting a successful vegetable garden.",
                    "Finally, water regularly and watch your plants grow."
                ],
                answer: "C",
                explanation: "The topic sentence is 'There are several steps to planting a successful vegetable garden' because it introduces the process that the paragraph will explain.",
                details: [
                    "The topic sentence introduces a process or sequence",
                    "It tells the reader that steps will follow",
                    "The other sentences provide the specific steps in order"
                ]
            },
            {
                type: "paragraph",
                paragraph: `The school library offers many valuable resources for students. There are thousands of books on every subject imaginable. Students can also use the computers for research projects. The quiet study areas provide a perfect place to concentrate on homework.`,
                question: "Which sentence is the topic sentence?",
                options: [
                    "There are thousands of books on every subject imaginable.",
                    "The school library offers many valuable resources for students.",
                    "Students can also use the computers for research projects.",
                    "The quiet study areas provide a perfect place to concentrate on homework."
                ],
                answer: "B",
                explanation: "'The school library offers many valuable resources for students' is the topic sentence because it states the main idea that the paragraph supports with examples.",
                details: [
                    "The topic sentence makes a general statement about resources",
                    "The other sentences provide specific examples of those resources",
                    "Each example sentence supports the main idea"
                ]
            },
            // 20 more topic sentence questions...
            {
                type: "paragraph",
                paragraph: `Exercise is important for maintaining good health. It helps strengthen your heart and lungs. Regular physical activity can improve your mood and energy levels. Exercise also helps you maintain a healthy weight.`,
                question: "What is the topic sentence of this paragraph?",
                options: [
                    "It helps strengthen your heart and lungs.",
                    "Exercise is important for maintaining good health.",
                    "Regular physical activity can improve your mood and energy levels.",
                    "Exercise also helps you maintain a healthy weight."
                ],
                answer: "B",
                explanation: "The topic sentence introduces the main idea about exercise and health.",
                details: ["Topic sentences state the main idea that the paragraph develops"]
            },
            {
                type: "paragraph",
                paragraph: `My favorite season is autumn for several reasons. The weather becomes cooler and more comfortable. The trees display beautiful colors as their leaves change. I enjoy celebrating Halloween and Thanksgiving during this season.`,
                question: "Identify the topic sentence.",
                options: [
                    "The weather becomes cooler and more comfortable.",
                    "My favorite season is autumn for several reasons.",
                    "The trees display beautiful colors as their leaves change.",
                    "I enjoy celebrating Halloween and Thanksgiving during this season."
                ],
                answer: "B",
                explanation: "This sentence states the main idea about autumn being the favorite season.",
                details: ["Topic sentences often include phrases like 'for several reasons'"]
            },
            {
                type: "paragraph",
                paragraph: `Learning to play a musical instrument has many benefits. It can improve memory and concentration skills. Playing music helps develop coordination between hands and eyes. Music also provides a creative outlet for self-expression.`,
                question: "Which sentence is the topic sentence?",
                options: [
                    "It can improve memory and concentration skills.",
                    "Learning to play a musical instrument has many benefits.",
                    "Playing music helps develop coordination between hands and eyes.",
                    "Music also provides a creative outlet for self-expression."
                ],
                answer: "B",
                explanation: "This sentence introduces the main idea about benefits of music.",
                details: ["Topic sentences make a claim that supporting sentences prove"]
            },
            {
                type: "paragraph",
                paragraph: `Our class field trip to the science museum was educational and fun. We saw amazing exhibits about space exploration. The dinosaur skeletons were enormous and fascinating. I especially enjoyed the hands-on experiments in the physics lab.`,
                question: "What is the topic sentence?",
                options: [
                    "We saw amazing exhibits about space exploration.",
                    "Our class field trip to the science museum was educational and fun.",
                    "The dinosaur skeletons were enormous and fascinating.",
                    "I especially enjoyed the hands-on experiments in the physics lab."
                ],
                answer: "B",
                explanation: "This sentence introduces the main idea about the field trip experience.",
                details: ["Topic sentences often come first in descriptive paragraphs"]
            },
            {
                type: "paragraph",
                paragraph: `Proper nutrition is essential for growing children. Eating a balanced diet helps support physical development. Healthy foods provide energy for learning and playing. Good nutrition also strengthens the immune system to fight off illnesses.`,
                question: "Identify the topic sentence.",
                options: [
                    "Eating a balanced diet helps support physical development.",
                    "Proper nutrition is essential for growing children.",
                    "Healthy foods provide energy for learning and playing.",
                    "Good nutrition also strengthens the immune system to fight off illnesses."
                ],
                answer: "B",
                explanation: "This sentence states the main idea about nutrition for children.",
                details: ["Topic sentences make general statements that details support"]
            },
            {
                type: "paragraph",
                paragraph: `The ocean is home to many fascinating creatures. Colorful coral reefs provide habitat for thousands of fish species. Giant whales migrate through ocean waters each year. mysterious creatures live in the deepest, darkest parts of the sea.`,
                question: "Which sentence is the topic sentence?",
                options: [
                    "Colorful coral reefs provide habitat for thousands of fish species.",
                    "The ocean is home to many fascinating creatures.",
                    "Giant whales migrate through ocean waters each year.",
                    "Mysterious creatures live in the deepest, darkest parts of the sea."
                ],
                answer: "B",
                explanation: "This sentence introduces the main idea about ocean creatures.",
                details: ["Topic sentences provide the overall focus for the paragraph"]
            },
            {
                type: "paragraph",
                paragraph: `Volunteering in the community has many rewards. It feels good to help others who are in need. Volunteering can teach valuable skills and build confidence. Many volunteers make new friends and become part of a community.`,
                question: "What is the topic sentence?",
                options: [
                    "It feels good to help others who are in need.",
                    "Volunteering in the community has many rewards.",
                    "Volunteering can teach valuable skills and build confidence.",
                    "Many volunteers make new friends and become part of a community."
                ],
                answer: "B",
                explanation: "This sentence states the main idea about volunteering rewards.",
                details: ["Topic sentences often include the key concept that details explain"]
            },
            {
                type: "paragraph",
                paragraph: `My little brother has some annoying habits. He always leaves his toys scattered around the house. He interrupts when I'm talking to my friends. Worst of all, he borrows my things without asking permission.`,
                question: "Identify the topic sentence.",
                options: [
                    "He always leaves his toys scattered around the house.",
                    "My little brother has some annoying habits.",
                    "He interrupts when I'm talking to my friends.",
                    "Worst of all, he borrows my things without asking permission."
                ],
                answer: "B",
                explanation: "This sentence introduces the main idea about annoying habits.",
                details: ["Topic sentences can express personal opinions or observations"]
            },
            {
                type: "paragraph",
                paragraph: `Planning ahead is important for doing well on tests. Start studying several days before the test date. Make sure you understand all the main concepts. Get a good night's sleep before the test day.`,
                question: "Which sentence is the topic sentence?",
                options: [
                    "Start studying several days before the test date.",
                    "Planning ahead is important for doing well on tests.",
                    "Make sure you understand all the main concepts.",
                    "Get a good night's sleep before the test day."
                ],
                answer: "B",
                explanation: "This sentence states the main idea about test preparation.",
                details: ["Topic sentences often give advice or make recommendations"]
            },
            {
                type: "paragraph",
                paragraph: `The rainforest is an important ecosystem that needs protection. It produces oxygen that all living things need to breathe. Rainforests are home to millions of plant and animal species. These forests help regulate Earth's climate and weather patterns.`,
                question: "What is the topic sentence?",
                options: [
                    "It produces oxygen that all living things need to breathe.",
                    "The rainforest is an important ecosystem that needs protection.",
                    "Rainforests are home to millions of plant and animal species.",
                    "These forests help regulate Earth's climate and weather patterns."
                ],
                answer: "B",
                explanation: "This sentence introduces the main idea about rainforest importance.",
                details: ["Topic sentences can express needs or call for action"]
            },

            // Paragraph Writing - Supporting Details (25 questions)
            {
                type: "paragraph",
                paragraph: `Spring is a beautiful season. The flowers begin to bloom in vibrant colors. Trees grow new leaves that are bright green. Baby animals are born during this time of renewal. The weather becomes warmer and sunnier.`,
                question: "Which sentence does NOT support the main idea that spring is beautiful?",
                options: [
                    "The flowers begin to bloom in vibrant colors.",
                    "Trees grow new leaves that are bright green.",
                    "Baby animals are born during this time of renewal.",
                    "I have a math test next week that I need to study for."
                ],
                answer: "D",
                explanation: "The sentence about a math test does not support the main idea about spring's beauty. It's unrelated to the topic.",
                details: [
                    "Supporting details must be relevant to the main idea",
                    "Irrelevant details distract from the paragraph's focus",
                    "Good paragraphs stay on topic with all sentences supporting the main idea",
                    "Writers should remove sentences that don't support the topic sentence"
                ]
            },
            {
                type: "paragraph",
                paragraph: `Recycling helps protect our environment. It reduces the amount of trash sent to landfills. Recycling conserves natural resources like trees and water. It also saves energy compared to making new products from raw materials.`,
                question: "Which detail best supports the main idea about recycling?",
                options: [
                    "My favorite color is blue.",
                    "Recycling reduces the amount of trash sent to landfills.",
                    "I enjoy playing video games on weekends.",
                    "Pizza is my favorite food."
                ],
                answer: "B",
                explanation: "The sentence about reducing landfill trash directly supports how recycling helps the environment.",
                details: [
                    "Supporting details should directly relate to the main idea",
                    "They provide evidence, examples, or explanations",
                    "Irrelevant information weakens the paragraph's effectiveness"
                ]
            },
            {
                type: "paragraph",
                paragraph: `Regular brushing is important for dental health. It removes food particles that can cause cavities. Brushing helps prevent gum disease by removing plaque. It also keeps your breath fresh and your teeth looking white. My dog likes to chew on bones, which also helps clean his teeth.`,
                question: "Which sentence is off-topic and does not support the main idea?",
                options: [
                    "It removes food particles that can cause cavities.",
                    "Brushing helps prevent gum disease by removing plaque.",
                    "It also keeps your breath fresh and your teeth looking white.",
                    "My dog likes to chew on bones, which also helps clean his teeth."
                ],
                answer: "D",
                explanation: "The sentence about the dog, while related to dental health, shifts focus away from the main topic of human brushing habits.",
                details: [
                    "Supporting details should stay focused on the specific topic",
                    "Even related information can be off-topic if it shifts focus",
                    "Good paragraphs maintain consistent focus throughout"
                ]
            },
            {
                type: "paragraph",
                paragraph: `The library is a valuable resource for students. It has books on every subject for research projects. Computers with internet access are available for homework. Quiet study areas provide space for concentration. The librarians are always helpful when you need assistance.`,
                question: "Which detail LEAST supports the main idea about the library as a student resource?",
                options: [
                    "It has books on every subject for research projects.",
                    "Computers with internet access are available for homework.",
                    "The library building was constructed in 1985.",
                    "The librarians are always helpful when you need assistance."
                ],
                answer: "C",
                explanation: "The construction date of the building doesn't directly support how the library helps students with their work.",
                details: [
                    "Some facts may be true but not relevant to the main idea",
                    "Writers should select only the most relevant supporting details",
                    "Historical facts may not support current benefits"
                ]
            },
            {
                type: "paragraph",
                paragraph: `Exercise has many benefits for mental health. Physical activity releases endorphins that improve mood. Regular exercise can reduce feelings of stress and anxiety. It helps improve sleep quality, which affects overall mental wellbeing. Exercise also increases energy levels throughout the day.`,
                question: "Which sentence provides the STRONGEST support for the main idea?",
                options: [
                    "Physical activity releases endorphins that improve mood.",
                    "I prefer running to other forms of exercise.",
                    "My friend exercises at the gym three times a week.",
                    "Some people find exercise boring and difficult."
                ],
                answer: "A",
                explanation: "The sentence about endorphins directly explains a biological mechanism for how exercise benefits mental health.",
                details: [
                    "The strongest supporting details directly explain the main idea",
                    "Scientific explanations provide convincing support",
                    "Personal preferences or anecdotes may be weaker support"
                ]
            },
            // 20 more supporting details questions...
            {
                type: "paragraph",
                paragraph: `Reading regularly improves vocabulary skills. You encounter new words in context. Seeing words repeatedly helps you remember them. Understanding word meanings helps with reading comprehension. I have a large collection of books at home.`,
                question: "Which sentence does NOT support the main idea?",
                options: [
                    "You encounter new words in context.",
                    "Seeing words repeatedly helps you remember them.",
                    "Understanding word meanings helps with reading comprehension.",
                    "I have a large collection of books at home."
                ],
                answer: "D",
                explanation: "The book collection is unrelated to how reading improves vocabulary.",
                details: ["Personal possessions don't necessarily support skill development claims"]
            },
            {
                type: "paragraph",
                paragraph: `Eating breakfast is important for school performance. It provides energy for learning and concentration. Breakfast helps maintain stable blood sugar levels. Students who eat breakfast tend to have better attendance. My favorite breakfast is pancakes with syrup.`,
                question: "Which detail is off-topic?",
                options: [
                    "It provides energy for learning and concentration.",
                    "Breakfast helps maintain stable blood sugar levels.",
                    "Students who eat breakfast tend to have better attendance.",
                    "My favorite breakfast is pancakes with syrup."
                ],
                answer: "D",
                explanation: "Personal food preferences don't support the importance of breakfast.",
                details: ["Personal preferences are often irrelevant to general claims"]
            },
            {
                type: "paragraph",
                paragraph: `Team sports teach valuable life skills. Players learn to cooperate with teammates toward common goals. Sports require discipline and regular practice. Athletes develop resilience by learning to handle both wins and losses. My team won the championship last year.`,
                question: "Which sentence is least relevant to the main idea?",
                options: [
                    "Players learn to cooperate with teammates toward common goals.",
                    "Sports require discipline and regular practice.",
                    "Athletes develop resilience by learning to handle both wins and losses.",
                    "My team won the championship last year."
                ],
                answer: "D",
                explanation: "A specific win doesn't generally support skill development claims.",
                details: ["Specific outcomes may not support general skill development claims"]
            },
            {
                type: "paragraph",
                paragraph: `Homework helps reinforce classroom learning. It provides practice with new concepts. Completing assignments teaches time management skills. Homework allows teachers to assess student understanding. I usually do my homework at the kitchen table.`,
                question: "Which detail does NOT support the main idea?",
                options: [
                    "It provides practice with new concepts.",
                    "Completing assignments teaches time management skills.",
                    "Homework allows teachers to assess student understanding.",
                    "I usually do my homework at the kitchen table."
                ],
                answer: "D",
                explanation: "Location of homework completion is irrelevant to its benefits.",
                details: ["Location details often don't support purpose or benefit claims"]
            },
            {
                type: "paragraph",
                paragraph: `Museums provide valuable educational experiences. They display historical artifacts you can't see elsewhere. Interactive exhibits make learning engaging and fun. Museums often have expert guides who share interesting facts. Admission to museums can be expensive on weekends.`,
                question: "Which sentence weakens the main idea?",
                options: [
                    "They display historical artifacts you can't see elsewhere.",
                    "Interactive exhibits make learning engaging and fun.",
                    "Museums often have expert guides who share interesting facts.",
                    "Admission to museums can be expensive on weekends."
                ],
                answer: "D",
                explanation: "The cost criticism weakens the positive educational claim.",
                details: ["Negative aspects can weaken positive main ideas"]
            },

            // Reading Comprehension - Inference (50 questions)
            {
                type: "reading",
                passage: `Maria carefully measured the flour, sugar, and baking powder into a large bowl. She cracked two eggs into a separate bowl and whisked them until they were frothy. Then she poured the eggs into the dry ingredients and stirred everything together. Finally, she greased a pan and poured in the mixture.`,
                question: "What is Maria most likely making?",
                options: [
                    "A salad",
                    "A cake",
                    "Soup",
                    "Sandwiches"
                ],
                answer: "B",
                explanation: "The clues about measuring flour, sugar, baking powder, eggs, and using a pan suggest Maria is baking a cake.",
                details: [
                    "Inferences require using clues from the text",
                    "Baking ingredients like flour and baking powder suggest baked goods",
                    "The process described matches cake preparation",
                    "We combine text clues with our own knowledge to make inferences"
                ]
            },
            {
                type: "reading",
                passage: `Tom grabbed his umbrella and raincoat before leaving the house. The sky was dark gray, and he could hear distant rumbles. He made sure his backpack was waterproof before stepping outside.`,
                question: "What can you infer about the weather?",
                options: [
                    "It is sunny and warm",
                    "It is about to rain or storm",
                    "It is snowing heavily",
                    "It is windy but dry"
                ],
                answer: "B",
                explanation: "The umbrella, raincoat, dark gray sky, and thunder rumbles all suggest rainy or stormy weather is coming.",
                details: [
                    "Characters' preparations give clues about conditions",
                    "Weather descriptions like 'dark gray sky' suggest storms",
                    "Thunder rumbles indicate approaching storms",
                    "Multiple clues pointing to the same conclusion strengthen inferences"
                ]
            },
            {
                type: "reading",
                passage: `The alarm clock buzzed loudly, but Sarah just rolled over and covered her head with her pillow. Her eyes felt heavy, and every movement required great effort. She thought about all the homework she had stayed up late to finish.`,
                question: "How is Sarah probably feeling?",
                options: [
                    "Excited and energetic",
                    "Tired and sleepy",
                    "Angry and frustrated",
                    "Happy and refreshed"
                ],
                answer: "B",
                explanation: "The clues about covering her head, heavy eyes, needing effort to move, and staying up late doing homework all suggest she's tired.",
                details: [
                    "Characters' actions reveal their feelings",
                    "Physical descriptions like 'heavy eyes' suggest tiredness",
                    "Mention of staying up late provides cause for tiredness",
                    "We infer emotions from behavioral clues"
                ]
            },
            {
                type: "reading",
                passage: `Carlos carefully wrapped the small box in shiny blue paper. He found a ribbon and tied it into a perfect bow. Then he hid the package under his bed where no one would find it. He checked the calendar to make sure he hadn't forgotten the date.`,
                question: "What is Carlos most likely preparing for?",
                options: [
                    "A test at school",
                    "A birthday or gift-giving occasion",
                    "A sports competition",
                    "A cooking project"
                ],
                answer: "B",
                explanation: "Wrapping a box with pretty paper and ribbon, then hiding it, suggests he's preparing a gift for someone.",
                details: [
                    "Wrapping presents is associated with gift-giving occasions",
                    "Hiding gifts suggests surprise element",
                    "Checking calendar suggests an important date is approaching",
                    "Common knowledge about gift traditions helps with inference"
                ]
            },
            {
                type: "reading",
                passage: `The veterinarian gently examined the puppy's paw while the owner watched anxiously. She cleaned the cut carefully and applied a bandage. "He should avoid running and jumping for a few days," she advised. The owner nodded and promised to keep the puppy calm.`,
                question: "What probably happened to the puppy before this scene?",
                options: [
                    "The puppy won a dog show",
                    "The puppy learned new tricks",
                    "The puppy got injured",
                    "The puppy had a birthday"
                ],
                answer: "C",
                explanation: "The vet examining a paw, cleaning a cut, and applying a bandage all suggest the puppy was injured.",
                details: [
                    "Medical treatment implies prior injury or illness",
                    "Specific treatments like bandages suggest wounds",
                    "Activity restrictions suggest recovery from injury",
                    "We infer past events from current situations"
                ]
            },
            // 45 more inference questions...
            {
                type: "reading",
                passage: `Lena packed her swimsuit, sunscreen, and beach towel. She made sure to include her favorite book and a hat to protect her from the sun. Her mother reminded her to drink plenty of water throughout the day.`,
                question: "Where is Lena most likely going?",
                options: [
                    "To the library",
                    "To the beach",
                    "To school",
                    "To a restaurant"
                ],
                answer: "B",
                explanation: "Swimsuit, sunscreen, and beach towel are strong beach clues.",
                details: ["Specific items indicate specific destinations"]
            },
            {
                type: "reading",
                passage: `David kept checking his watch and looking toward the door. He rearranged the silverware on the table for the third time. When his phone buzzed, he grabbed it quickly, looking disappointed when he saw the message.`,
                question: "What is David probably feeling?",
                options: [
                    "Bored and uninterested",
                    "Anxious and expectant",
                    "Angry and frustrated",
                    "Happy and content"
                ],
                answer: "B",
                explanation: "Checking watch, looking at door, and phone disappointment suggest waiting anxiously.",
                details: ["Repeated actions and checking behavior suggest anticipation"]
            },
            {
                type: "reading",
                passage: `The campers gathered more wood as the sky grew darker. They made sure the fire was burning brightly and arranged their sleeping bags in a circle around it. The forest sounds seemed much louder now that the sun had set.`,
                question: "What time of day is it?",
                options: [
                    "Morning",
                    "Afternoon",
                    "Evening/night",
                    "Noon"
                ],
                answer: "C",
                explanation: "Dark sky, building fire, and sunset mention indicate evening.",
                details: ["Light conditions and activities indicate time of day"]
            },
            {
                type: "reading",
                passage: `Maria put on her warmest coat, wool hat, and thick gloves. She made sure her boots were waterproof before heading outside. The thermometer by the door showed the temperature was well below freezing.`,
                question: "What season is it most likely?",
                options: [
                    "Spring",
                    "Summer",
                    "Fall",
                    "Winter"
                ],
                answer: "D",
                explanation: "Winter clothing and below-freezing temperature indicate winter.",
                details: ["Clothing choices and temperature indicate seasons"]
            },
            {
                type: "reading",
                passage: `The students whispered excitedly as their teacher passed out the thick envelopes. Some immediately tore them open while others hesitated, looking nervous. Maria's hands shook as she carefully opened hers.`,
                question: "What are the students most likely receiving?",
                options: [
                    "Homework assignments",
                    "Test results or report cards",
                    "Birthday invitations",
                    "School supplies"
                ],
                answer: "B",
                explanation: "Nervousness and excitement about envelopes suggests important results.",
                details: ["Emotional reactions to documents suggest important content"]
            },
            {
                type: "reading",
                passage: `James carefully measured the board and marked it with a pencil. He put on safety goggles before turning on the loud, whirring machine. Wood dust filled the air as he guided the board through the blade.`,
                question: "Where is James probably working?",
                options: [
                    "In a kitchen",
                    "In a woodshop",
                    "In a science lab",
                    "In an art studio"
                ],
                answer: "B",
                explanation: "Wood, measuring, and power tools suggest woodshop.",
                details: ["Tools and materials indicate work environments"]
            },
            {
                type: "reading",
                passage: `The audience grew quiet as the house lights dimmed. A single spotlight illuminated the stage where a woman stood with a violin. She raised her bow, took a deep breath, and began to play.`,
                question: "Where is this scene taking place?",
                options: [
                    "At a concert hall",
                    "In a classroom",
                    "At a sports stadium",
                    "In a restaurant"
                ],
                answer: "A",
                explanation: "Audience, stage, spotlight, and violin performance suggest concert.",
                details: ["Performance elements indicate venue type"]
            },
            {
                type: "reading",
                passage: `Lily's stomach growled loudly as she smelled the delicious aromas coming from the kitchen. She set the table with their best dishes and carefully folded the napkins. Her mother called out that dinner would be ready in five minutes.`,
                question: "What is about to happen?",
                options: [
                    "They will clean the house",
                    "They will eat a meal",
                    "They will do homework",
                    "They will watch television"
                ],
                answer: "B",
                explanation: "Hunger, food smells, and table setting suggest mealtime.",
                details: ["Food-related preparations indicate mealtime"]
            },
            {
                type: "reading",
                passage: `The detective carefully dusted the table for fingerprints. She bagged the torn piece of paper as evidence and took photographs of the entire room. Her partner interviewed the nervous-looking witness in the corner.`,
                question: "What probably happened here recently?",
                options: [
                    "A party",
                    "A crime",
                    "A celebration",
                    "A meeting"
                ],
                answer: "B",
                explanation: "Evidence collection and witness interview suggest crime scene.",
                details: ["Investigation activities suggest criminal events"]
            },
            {
                type: "reading",
                passage: `Mark stuffed his passport and tickets into his carry-on bag. He double-checked that he had his foreign currency and phrase book. His suitcase was already by the door, waiting for the taxi to the airport.`,
                question: "What is Mark about to do?",
                options: [
                    "Go to work",
                    "Take a international trip",
                    "Visit relatives nearby",
                    "Go camping"
                ],
                answer: "B",
                explanation: "Passport, tickets, and foreign currency indicate international travel.",
                details: ["Travel documents indicate type of journey"]
            }
            // Additional questions would continue here to reach 100+ total...
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent!",
            "Fantastic!",
            "Great job!",
            "Amazing!",
            "Well done!",
            "You're a reading and writing expert!",
            "Perfect!",
            "Outstanding!",
            "Brilliant!",
            "You're on fire!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const passageDisplay = document.getElementById('passageDisplay');
        const paragraphDisplay = document.getElementById('paragraphDisplay');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const partDetails = document.getElementById('partDetails');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            // Show appropriate page based on state
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixParagraphWritingReading');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                // If we have a saved state but no questions, initialize them
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixParagraphWritingReading', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            // Create a copy of questions and shuffle them
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            // Allow pressing Enter to start practice
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            
            // Clear any previous input
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            
            // Display student name
            studentNameDisplay.textContent = appState.studentName;
            
            // Load the current question
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            // Calculate results
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            // Update results display
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            // Get highest score from localStorage
            const highest = localStorage.getItem('ideolixParagraphWritingReading_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            // Save new highest score if applicable
            if (appState.score > highest) {
                localStorage.setItem('ideolixParagraphWritingReading_highestScore', appState.score);
            }
            
            // Set encouraging message based on score
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a paragraph writing and reading comprehension expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You understand paragraph structure and inference skills very well!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a reading and writing master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review the questions you missed and try again!";
            } else {
                scoreMessage.textContent = "Keep practicing! You'll get better with more practice!";
            }
        }

        // Start practice mode
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert('Please enter your name to continue.');
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            // Initialize and shuffle questions
            initializeQuestions();
            
            // Save state and show practice page
            saveStateToStorage();
            showPracticePage();
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            // Update progress
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            // Clear previous displays
            passageDisplay.style.display = 'none';
            paragraphDisplay.style.display = 'none';
            
            // Set appropriate display based on question type
            if (question.type === "reading") {
                passageDisplay.textContent = question.passage;
                passageDisplay.style.display = 'block';
                questionText.textContent = "Read the passage and answer the question:";
            } else if (question.type === "paragraph") {
                paragraphDisplay.textContent = question.paragraph;
                paragraphDisplay.style.display = 'block';
                questionText.textContent = question.question;
            }
            
            // Clear previous options and feedback
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            // Create option elements
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            // Disable all options
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            // Mark correct/incorrect
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                // Correct answer
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                
                // Show positive feedback
                showFeedback(true, question.explanation, question.details);
            } else {
                // Incorrect answer
                optionElement.classList.add('incorrect');
                appState.answered++;
                
                // Show negative feedback
                showFeedback(false, question.explanation, question.details, question.answer);
            }
            
            // Enable next question button
            nextQuestionBtn.disabled = false;
            
            // Save progress
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, details, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            // Clear previous details
            partDetails.innerHTML = '';
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '✓';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '✗';
                feedbackTitle.textContent = 'Incorrect';
                const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                feedbackMessage.textContent = `Correct answer: ${correctOption}`;
            }
            
            feedbackExplanation.textContent = explanation;
            
            // Add part of speech details
            if (details && details.length > 0) {
                const detailsTitle = document.createElement('div');
                detailsTitle.textContent = 'Reading & Writing Tips:';
                detailsTitle.style.fontWeight = 'bold';
                detailsTitle.style.marginBottom = '10px';
                detailsTitle.style.color = 'var(--text-primary)';
                partDetails.appendChild(detailsTitle);
                
                details.forEach(detail => {
                    const detailElement = document.createElement('div');
                    detailElement.className = 'detail-item';
                    detailElement.textContent = detail;
                    partDetails.appendChild(detailElement);
                });
            }
            
            feedbackContainer.style.display = 'block';
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic with new shuffled questions
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            // Re-shuffle questions
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page (simulated)
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
            // In a real implementation, this would be: window.location.href = "grade4-english-topics.html";
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
