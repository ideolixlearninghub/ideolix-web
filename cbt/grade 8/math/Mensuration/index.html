<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Math - Mensuration | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Mensuration Theme */
        :root {
            --primary-blue: #2196F3;
            --primary-green: #4CAF50;
            --primary-orange: #FF9800;
            --primary-purple: #9C27B0;
            --accent-red: #F44336;
            --accent-teal: #009688;
            --accent-yellow: #FFC107;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --area-color: rgba(33, 150, 243, 0.3);
            --perimeter-color: rgba(76, 175, 80, 0.3);
            --volume-color: rgba(255, 152, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 152, 0, 0.05) 0%, transparent 70%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary:hover {
            background: #3d8b40;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-orange {
            background: var(--primary-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-orange:hover {
            background: #e68900;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .topics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.area {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .topic-card.perimeter {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .topic-card.volume {
            border-color: var(--primary-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.area .topic-title {
            color: var(--primary-blue);
        }

        .topic-card.perimeter .topic-title {
            color: var(--primary-green);
        }

        .topic-card.volume .topic-title {
            color: var(--primary-orange);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--primary-green), var(--primary-orange));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-yellow);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Area */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Shape Visualization */
        .shape-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .visualizer-title {
            color: var(--primary-blue);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .shape-canvas-container {
            width: 100%;
            height: 300px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .shape-canvas {
            width: 100%;
            height: 100%;
        }

        .shape-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .shape-controls {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .shape-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .shape-btn:hover {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
        }

        .shape-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        /* Formula Display */
        .formula-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .formula-box {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 1.2rem;
            color: var(--accent-teal);
            border: 1px solid var(--dark-border);
        }

        .formula-explanation {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-top: 10px;
        }

        /* Calculation Area */
        .calculation-area {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .dimension-inputs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .dimension-inputs {
                grid-template-columns: 1fr;
            }
        }

        .dimension-input {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .calc-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calc-btn:hover {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
        }

        .calc-btn.primary {
            background: var(--primary-green);
            color: white;
        }

        .calc-btn.primary:hover {
            background: #3d8b40;
        }

        .result-display {
            margin-top: 15px;
            padding: 10px;
            background: var(--dark-surface);
            border-radius: 6px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary-green);
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 3D Prism Visualization */
        .prism-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-orange);
        }

        .prism-canvas-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .prism-canvas {
            width: 100%;
            height: 100%;
        }

        .prism-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .prism-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .prism-btn:hover {
            background: rgba(255, 152, 0, 0.1);
            border-color: var(--primary-orange);
        }

        .prism-btn.active {
            background: var(--primary-orange);
            color: white;
        }

        /* Shape Library */
        .shape-library {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .shapes-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .shapes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .shape-item {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .shape-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .shape-item.active {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.1);
        }

        .shape-preview {
            width: 50px;
            height: 50px;
            margin: 0 auto 5px;
            position: relative;
        }

        .shape-name {
            font-size: 0.85rem;
            font-weight: bold;
            color: var(--text-primary);
        }

        /* Unit Converter */
        .unit-converter {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        .converter-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 10px;
            margin: 10px 0;
            align-items: center;
        }

        @media (max-width: 768px) {
            .converter-grid {
                grid-template-columns: 1fr;
            }
        }

        .converter-input {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.9rem;
            width: 100%;
        }

        .converter-select {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.9rem;
            width: 100%;
        }

        .converter-arrow {
            text-align: center;
            font-size: 1.5rem;
            color: var(--accent-yellow);
        }

        /* Complex Shape Builder */
        .complex-builder {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .builder-controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .builder-btn {
            padding: 6px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .builder-btn.active {
            background: var(--accent-red);
            color: white;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes calculateAnimation {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .calculate-animate {
            animation: calculateAnimation 0.5s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .calc-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .dimension-inputs {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .shapes-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .converter-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Math: Mensuration</h1>
            <p class="welcome-subtitle">Master the measurement of shapes and solids! Explore area and perimeter of complex shapes, calculate volumes of prisms, and develop practical measurement skills. Learn formulas, visualization techniques, and real-world applications.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìêüìè</span>
                <span class="topic-name">Measurement of Shapes & Solids</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card area" onclick="showTopicInfo('area')">
                    <div class="topic-icon">‚ñ¢</div>
                    <h3 class="topic-title">Area</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Space inside 2D shapes and complex figures</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Composite shapes</li>
                            <li>Irregular polygons</li>
                            <li>Area addition/subtraction</li>
                            <li>Unit conversion</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card perimeter" onclick="showTopicInfo('perimeter')">
                    <div class="topic-icon">‚éî</div>
                    <h3 class="topic-title">Perimeter</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Total distance around shapes</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Complex boundaries</li>
                            <li>Missing sides</li>
                            <li>Curved sections</li>
                            <li>Practical applications</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card volume" onclick="showTopicInfo('volume')">
                    <div class="topic-icon">üßä</div>
                    <h3 class="topic-title">Volume</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Space inside 3D solids and prisms</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Prisms & cylinders</li>
                            <li>Cross-sectional area</li>
                            <li>Capacity & displacement</li>
                            <li>Real-world volumes</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üìê Begin Mensuration Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="mathTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Shape Visualization -->
                    <div class="shape-visualizer">
                        <div class="visualizer-title">Shape Visualizer</div>
                        <div class="shape-canvas-container">
                            <canvas class="shape-canvas" id="shapeCanvas"></canvas>
                        </div>
                        <div class="shape-controls">
                            <div class="shape-btn active" onclick="selectShapeType('rectangle')">Rectangle</div>
                            <div class="shape-btn" onclick="selectShapeType('triangle')">Triangle</div>
                            <div class="shape-btn" onclick="selectShapeType('circle')">Circle</div>
                            <div class="shape-btn" onclick="selectShapeType('trapezoid')">Trapezoid</div>
                            <div class="shape-btn" onclick="selectShapeType('composite')">Composite</div>
                            <div class="shape-btn" onclick="selectShapeType('irregular')">Irregular</div>
                            <div class="shape-btn" onclick="clearShape()">Clear</div>
                            <div class="shape-btn" onclick="toggleGrid()">Grid: On</div>
                        </div>
                    </div>
                    
                    <!-- Formula Display -->
                    <div class="formula-display">
                        <div class="visualizer-title">Area & Perimeter Formulas</div>
                        <div class="formula-box" id="currentFormula">
                            Area = length √ó width
                        </div>
                        <div class="formula-explanation" id="formulaExplanation">
                            For rectangles: Multiply length by width to find area.
                        </div>
                        <div class="calc-buttons">
                            <button class="calc-btn" onclick="showAreaFormulas()">Area Formulas</button>
                            <button class="calc-btn" onclick="showPerimeterFormulas()">Perimeter Formulas</button>
                            <button class="calc-btn" onclick="showVolumeFormulas()">Volume Formulas</button>
                        </div>
                    </div>
                    
                    <!-- Calculation Area -->
                    <div class="calculation-area">
                        <div class="visualizer-title">Calculate Dimensions</div>
                        <div class="dimension-inputs">
                            <input type="number" id="dim1" class="dimension-input" placeholder="Length" value="10">
                            <input type="number" id="dim2" class="dimension-input" placeholder="Width" value="6">
                            <input type="number" id="dim3" class="dimension-input" placeholder="Height" value="4">
                        </div>
                        <div class="calc-buttons">
                            <button class="calc-btn primary" onclick="calculateArea()">Calculate Area</button>
                            <button class="calc-btn primary" onclick="calculatePerimeter()">Calculate Perimeter</button>
                            <button class="calc-btn primary" onclick="calculateVolume()">Calculate Volume</button>
                        </div>
                        <div class="result-display" id="resultDisplay">
                            Enter dimensions and click calculate
                        </div>
                        <div class="calc-buttons">
                            <button class="calc-btn" onclick="showStepByStep()">Show Steps</button>
                            <button class="calc-btn" onclick="resetCalculator()">Reset</button>
                            <button class="calc-btn" onclick="generateRandomProblem()">Random Problem</button>
                        </div>
                    </div>
                    
                    <!-- Shape Library -->
                    <div class="shape-library">
                        <div class="visualizer-title">Shape Library</div>
                        <div class="shapes-grid">
                            <div class="shape-item active" onclick="loadShapeFromLibrary('rectangle')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <rect x="5" y="5" width="40" height="20" fill="#2196F3" stroke="#fff" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="shape-name">Rectangle</div>
                            </div>
                            <div class="shape-item" onclick="loadShapeFromLibrary('triangle')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <polygon points="25,5 45,25 5,25" fill="#4CAF50" stroke="#fff" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="shape-name">Triangle</div>
                            </div>
                            <div class="shape-item" onclick="loadShapeFromLibrary('circle')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <circle cx="25" cy="15" r="12" fill="#FF9800" stroke="#fff" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="shape-name">Circle</div>
                            </div>
                            <div class="shape-item" onclick="loadShapeFromLibrary('trapezoid')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <polygon points="10,25 40,25 35,5 15,5" fill="#9C27B0" stroke="#fff" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="shape-name">Trapezoid</div>
                            </div>
                            <div class="shape-item" onclick="loadShapeFromLibrary('parallelogram')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <polygon points="10,5 40,5 35,25 5,25" fill="#F44336" stroke="#fff" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="shape-name">Parallelogram</div>
                            </div>
                            <div class="shape-item" onclick="loadShapeFromLibrary('hexagon')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <polygon points="25,5 40,10 40,20 25,25 10,20 10,10" fill="#009688" stroke="#fff" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="shape-name">Hexagon</div>
                            </div>
                            <div class="shape-item" onclick="loadShapeFromLibrary('composite1')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <rect x="5" y="10" width="20" height="15" fill="#2196F3" stroke="#fff" stroke-width="1"/>
                                        <rect x="25" y="5" width="20" height="20" fill="#4CAF50" stroke="#fff" stroke-width="1"/>
                                    </svg>
                                </div>
                                <div class="shape-name">L-Shape</div>
                            </div>
                            <div class="shape-item" onclick="loadShapeFromLibrary('composite2')">
                                <div class="shape-preview">
                                    <svg viewBox="0 0 50 30">
                                        <rect x="5" y="5" width="40" height="20" fill="#FF9800" stroke="#fff" stroke-width="1"/>
                                        <circle cx="25" cy="15" r="8" fill="#9C27B0" stroke="#fff" stroke-width="1"/>
                                    </svg>
                                </div>
                                <div class="shape-name">With Hole</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="visualization-container">
                    <!-- 3D Prism Visualization -->
                    <div class="prism-visualizer">
                        <div class="visualizer-title">3D Prism Explorer</div>
                        <div class="prism-canvas-container">
                            <canvas class="prism-canvas" id="prismCanvas"></canvas>
                        </div>
                        <div class="prism-controls">
                            <div class="prism-btn active" onclick="selectPrism('rectangular')">Rectangular</div>
                            <div class="prism-btn" onclick="selectPrism('triangular')">Triangular</div>
                            <div class="prism-btn" onclick="selectPrism('hexagonal')">Hexagonal</div>
                            <div class="prism-btn" onclick="selectPrism('cylinder')">Cylinder</div>
                            <div class="prism-btn" onclick="rotatePrism('x')">Rotate X</div>
                            <div class="prism-btn" onclick="rotatePrism('y')">Rotate Y</div>
                        </div>
                        <div class="prism-controls">
                            <button class="calc-btn" onclick="showPrismNet()">Show Net</button>
                            <button class="calc-btn" onclick="showPrismCrossSection()">Cross Section</button>
                            <button class="calc-btn" onclick="calculatePrismVolume()">Calculate Volume</button>
                        </div>
                    </div>
                    
                    <!-- Unit Converter -->
                    <div class="unit-converter">
                        <div class="visualizer-title">Unit Converter</div>
                        <div class="converter-grid">
                            <input type="number" id="inputValue" class="converter-input" placeholder="Value" value="10">
                            <select id="inputUnit" class="converter-select">
                                <option value="cm">cm</option>
                                <option value="m">m</option>
                                <option value="km">km</option>
                                <option value="cm¬≤">cm¬≤</option>
                                <option value="m¬≤" selected>m¬≤</option>
                                <option value="km¬≤">km¬≤</option>
                                <option value="cm¬≥">cm¬≥</option>
                                <option value="m¬≥">m¬≥</option>
                                <option value="L">L</option>
                                <option value="mL">mL</option>
                            </select>
                            <div class="converter-arrow">‚Üí</div>
                            <div id="outputValue" class="converter-input" style="background: var(--dark-card);">1000</div>
                            <select id="outputUnit" class="converter-select">
                                <option value="cm" selected>cm</option>
                                <option value="m">m</option>
                                <option value="km">km</option>
                                <option value="cm¬≤">cm¬≤</option>
                                <option value="m¬≤">m¬≤</option>
                                <option value="km¬≤">km¬≤</option>
                                <option value="cm¬≥">cm¬≥</option>
                                <option value="m¬≥">m¬≥</option>
                                <option value="L">L</option>
                                <option value="mL">mL</option>
                            </select>
                        </div>
                        <div class="calc-buttons">
                            <button class="calc-btn primary" onclick="convertUnits()">Convert</button>
                            <button class="calc-btn" onclick="showConversionFactors()">Factors</button>
                            <button class="calc-btn" onclick="swapUnits()">Swap ‚Üï</button>
                        </div>
                    </div>
                    
                    <!-- Complex Shape Builder -->
                    <div class="complex-builder">
                        <div class="visualizer-title">Complex Shape Builder</div>
                        <div class="builder-controls">
                            <div class="builder-btn active" onclick="setBuilderMode('add')">Add Shape</div>
                            <div class="builder-btn" onclick="setBuilderMode('subtract')">Subtract</div>
                            <div class="builder-btn" onclick="setBuilderMode('move')">Move</div>
                            <div class="builder-btn" onclick="setBuilderMode('resize')">Resize</div>
                        </div>
                        <div style="text-align: center; margin: 15px 0;">
                            <canvas id="builderCanvas" style="width: 100%; height: 200px; background: var(--dark-surface); border-radius: 6px; border: 1px solid var(--dark-border);"></canvas>
                        </div>
                        <div class="calc-buttons">
                            <button class="calc-btn" onclick="calculateComplexArea()">Calculate Area</button>
                            <button class="calc-btn" onclick="calculateComplexPerimeter()">Calculate Perimeter</button>
                            <button class="calc-btn" onclick="clearBuilder()">Clear All</button>
                        </div>
                    </div>
                    
                    <!-- Real-World Applications -->
                    <div class="shape-visualizer" style="border-color: var(--accent-teal);">
                        <div class="visualizer-title">Real-World Applications</div>
                        <div style="margin: 10px 0;">
                            <div class="calc-buttons">
                                <button class="calc-btn" onclick="showApplication('flooring')">Flooring Area</button>
                                <button class="calc-btn" onclick="showApplication('fencing')">Fencing Cost</button>
                                <button class="calc-btn" onclick="showApplication('painting')">Paint Needed</button>
                            </div>
                            <div class="calc-buttons">
                                <button class="calc-btn" onclick="showApplication('packaging')">Packaging</button>
                                <button class="calc-btn" onclick="showApplication('swimming')">Swimming Pool</button>
                                <button class="calc-btn" onclick="showApplication('container')">Container Volume</button>
                            </div>
                        </div>
                        <div id="applicationDisplay" style="padding: 10px; background: var(--dark-surface); border-radius: 6px; margin-top: 10px; min-height: 60px; color: var(--text-secondary); font-size: 0.9rem;">
                            Select an application to see real-world example
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Mensuration Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                    <button class="btn btn-orange" id="printCertificate">Print Certificate</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Mensuration
        const questions = [
            {
                question: "What is the area of a rectangle with length 12cm and width 8cm?",
                options: ["96 cm¬≤", "48 cm¬≤", "20 cm¬≤", "40 cm¬≤"],
                answer: "A",
                explanation: "Area of rectangle = length √ó width = 12cm √ó 8cm = 96 cm¬≤"
            },
            {
                question: "Calculate the perimeter of a square with side 7cm.",
                options: ["28 cm", "14 cm", "49 cm", "21 cm"],
                answer: "A",
                explanation: "Perimeter of square = 4 √ó side = 4 √ó 7cm = 28 cm"
            },
            {
                question: "What is the area of a triangle with base 10cm and height 6cm?",
                options: ["30 cm¬≤", "60 cm¬≤", "16 cm¬≤", "20 cm¬≤"],
                answer: "A",
                explanation: "Area of triangle = ¬Ω √ó base √ó height = ¬Ω √ó 10cm √ó 6cm = 30 cm¬≤"
            },
            {
                question: "Find the circumference of a circle with radius 7cm (use œÄ = 22/7).",
                options: ["44 cm", "22 cm", "154 cm¬≤", "88 cm"],
                answer: "A",
                explanation: "Circumference = 2œÄr = 2 √ó (22/7) √ó 7 = 44 cm"
            },
            {
                question: "What is the volume of a rectangular prism with dimensions 5cm √ó 4cm √ó 3cm?",
                options: ["60 cm¬≥", "12 cm¬≥", "20 cm¬≥", "47 cm¬≥"],
                answer: "A",
                explanation: "Volume = length √ó width √ó height = 5 √ó 4 √ó 3 = 60 cm¬≥"
            },
            {
                question: "Calculate the area of a trapezoid with bases 8cm and 12cm, height 5cm.",
                options: ["50 cm¬≤", "20 cm¬≤", "40 cm¬≤", "100 cm¬≤"],
                answer: "A",
                explanation: "Area of trapezoid = ¬Ω √ó (base1 + base2) √ó height = ¬Ω √ó (8+12) √ó 5 = 50 cm¬≤"
            },
            {
                question: "A composite shape consists of a rectangle (10cm √ó 6cm) and a triangle on top (base 10cm, height 4cm). What is the total area?",
                options: ["80 cm¬≤", "60 cm¬≤", "20 cm¬≤", "100 cm¬≤"],
                answer: "A",
                explanation: "Rectangle area = 60 cm¬≤, Triangle area = 20 cm¬≤, Total = 80 cm¬≤"
            },
            {
                question: "How many cubic meters in 1 liter?",
                options: ["0.001 m¬≥", "1 m¬≥", "0.1 m¬≥", "0.01 m¬≥"],
                answer: "A",
                explanation: "1 liter = 1000 cm¬≥ = 0.001 m¬≥"
            },
            {
                question: "What is the surface area of a cube with side 3cm?",
                options: ["54 cm¬≤", "27 cm¬≤", "9 cm¬≤", "18 cm¬≤"],
                answer: "A",
                explanation: "Surface area = 6 √ó side¬≤ = 6 √ó 9 = 54 cm¬≤"
            },
            {
                question: "Find the area of a parallelogram with base 9cm and height 5cm.",
                options: ["45 cm¬≤", "14 cm¬≤", "28 cm¬≤", "35 cm¬≤"],
                answer: "A",
                explanation: "Area = base √ó height = 9 √ó 5 = 45 cm¬≤"
            },
            {
                question: "A swimming pool is 8m long, 4m wide, and 2m deep. What is its volume in liters?",
                options: ["64,000 L", "64 L", "640 L", "6,400 L"],
                answer: "A",
                explanation: "Volume = 8√ó4√ó2 = 64 m¬≥ = 64,000 L (1 m¬≥ = 1000 L)"
            },
            {
                question: "Calculate the perimeter of an L-shaped figure with outer dimensions 10cm √ó 8cm and inner cut 4cm √ó 3cm.",
                options: ["36 cm", "34 cm", "38 cm", "32 cm"],
                answer: "A",
                explanation: "Perimeter includes all outer sides: 10+8+6+3+4+5 = 36 cm"
            },
            {
                question: "What is the area of a circle with diameter 14cm? (œÄ = 22/7)",
                options: ["154 cm¬≤", "44 cm", "308 cm¬≤", "616 cm¬≤"],
                answer: "A",
                explanation: "Radius = 7cm, Area = œÄr¬≤ = (22/7) √ó 7 √ó 7 = 154 cm¬≤"
            },
            {
                question: "A triangular prism has base area 12cm¬≤ and height 8cm. What is its volume?",
                options: ["96 cm¬≥", "20 cm¬≥", "48 cm¬≥", "24 cm¬≥"],
                answer: "A",
                explanation: "Volume of prism = base area √ó height = 12 √ó 8 = 96 cm¬≥"
            },
            {
                question: "Convert 2.5 hectares to square meters.",
                options: ["25,000 m¬≤", "2,500 m¬≤", "250 m¬≤", "25 m¬≤"],
                answer: "A",
                explanation: "1 hectare = 10,000 m¬≤, so 2.5 ha = 25,000 m¬≤"
            },
            {
                question: "Find the missing side of a rectangle if area = 48cm¬≤ and one side = 6cm.",
                options: ["8 cm", "12 cm", "42 cm", "7 cm"],
                answer: "A",
                explanation: "Other side = Area √∑ given side = 48 √∑ 6 = 8 cm"
            },
            {
                question: "What is the volume of a cylinder with radius 7cm and height 10cm? (œÄ = 22/7)",
                options: ["1,540 cm¬≥", "440 cm¬≤", "154 cm¬≥", "3,080 cm¬≥"],
                answer: "A",
                explanation: "Volume = œÄr¬≤h = (22/7) √ó 7 √ó 7 √ó 10 = 1,540 cm¬≥"
            },
            {
                question: "Calculate the area of a rhombus with diagonals 10cm and 8cm.",
                options: ["40 cm¬≤", "18 cm¬≤", "80 cm¬≤", "20 cm¬≤"],
                answer: "A",
                explanation: "Area of rhombus = ¬Ω √ó d1 √ó d2 = ¬Ω √ó 10 √ó 8 = 40 cm¬≤"
            },
            {
                question: "A room is 5m √ó 4m. How many square tiles of side 20cm are needed to cover it?",
                options: ["500 tiles", "100 tiles", "400 tiles", "250 tiles"],
                answer: "A",
                explanation: "Room area = 20 m¬≤ = 200,000 cm¬≤, Tile area = 400 cm¬≤, Tiles needed = 200,000 √∑ 400 = 500"
            },
            {
                question: "What is the perimeter of a regular hexagon with side 5cm?",
                options: ["30 cm", "25 cm", "15 cm", "60 cm"],
                answer: "A",
                explanation: "Perimeter = 6 √ó side = 6 √ó 5 = 30 cm"
            },
            {
                question: "Find the area of a sector with radius 14cm and central angle 90¬∞ (œÄ = 22/7).",
                options: ["154 cm¬≤", "44 cm¬≤", "616 cm¬≤", "308 cm¬≤"],
                answer: "A",
                explanation: "Area = (Œ∏/360) √ó œÄr¬≤ = (90/360) √ó (22/7) √ó 14 √ó 14 = 154 cm¬≤"
            },
            {
                question: "A water tank holds 2,000 liters. What is its volume in cubic meters?",
                options: ["2 m¬≥", "20 m¬≥", "0.2 m¬≥", "200 m¬≥"],
                answer: "A",
                explanation: "1000 L = 1 m¬≥, so 2000 L = 2 m¬≥"
            },
            {
                question: "Calculate the total surface area of a cuboid 6cm √ó 4cm √ó 3cm.",
                options: ["108 cm¬≤", "72 cm¬≤", "36 cm¬≤", "144 cm¬≤"],
                answer: "A",
                explanation: "Surface area = 2(lw + lh + wh) = 2(24 + 18 + 12) = 108 cm¬≤"
            },
            {
                question: "What is the area of an equilateral triangle with side 8cm?",
                options: ["27.71 cm¬≤", "16 cm¬≤", "32 cm¬≤", "64 cm¬≤"],
                answer: "A",
                explanation: "Area = (‚àö3/4) √ó side¬≤ = (1.732/4) √ó 64 ‚âà 27.71 cm¬≤"
            },
            {
                question: "A prism has volume 240cm¬≥ and height 10cm. What is its base area?",
                options: ["24 cm¬≤", "240 cm¬≤", "10 cm¬≤", "48 cm¬≤"],
                answer: "A",
                explanation: "Base area = Volume √∑ height = 240 √∑ 10 = 24 cm¬≤"
            }
        ];

        // Math tips and facts
        const mathTips = [
            "Area is measured in square units (cm¬≤, m¬≤), volume in cubic units (cm¬≥, m¬≥).",
            "Perimeter is the distance around a shape. For complex shapes, add all outer sides.",
            "Volume of prism = Base Area √ó Height. This works for all prisms!",
            "1 liter = 1000 cm¬≥ = 0.001 m¬≥. Remember these conversions!",
            "For composite shapes: break into simple shapes, calculate each, then add/subtract.",
            "œÄ ‚âà 3.1416 or 22/7. Use 22/7 when radius/diameter is multiple of 7.",
            "Surface area is the total area of all faces of a 3D shape.",
            "Always include units in your answers!",
            "Check your work: Does the answer make sense? Area should be positive, dimensions reasonable.",
            "Real-world applications: flooring (area), fencing (perimeter), containers (volume)."
        ];

        // Formulas database
        const formulas = {
            rectangle: {
                area: "A = l √ó w",
                perimeter: "P = 2(l + w)",
                explanation: "Multiply length by width for area. Add all sides for perimeter."
            },
            square: {
                area: "A = s¬≤",
                perimeter: "P = 4s",
                explanation: "Square the side for area. Multiply side by 4 for perimeter."
            },
            triangle: {
                area: "A = ¬Ω √ó b √ó h",
                perimeter: "P = a + b + c",
                explanation: "Half of base times height for area. Sum of all three sides for perimeter."
            },
            circle: {
                area: "A = œÄr¬≤",
                circumference: "C = 2œÄr or œÄd",
                explanation: "œÄ times radius squared for area. 2œÄr or œÄd for circumference."
            },
            trapezoid: {
                area: "A = ¬Ω √ó (a + b) √ó h",
                perimeter: "P = a + b + c + d",
                explanation: "Half of sum of parallel sides times height for area. Sum of all sides for perimeter."
            },
            parallelogram: {
                area: "A = b √ó h",
                perimeter: "P = 2(a + b)",
                explanation: "Base times perpendicular height for area. Twice the sum of adjacent sides for perimeter."
            },
            prism: {
                volume: "V = Base Area √ó Height",
                surfaceArea: "SA = Sum of all face areas",
                explanation: "Multiply area of base by height for volume. Add areas of all faces for surface area."
            },
            cylinder: {
                volume: "V = œÄr¬≤h",
                surfaceArea: "SA = 2œÄr¬≤ + 2œÄrh",
                explanation: "œÄ times radius squared times height for volume. Includes circular ends and curved surface."
            }
        };

        // Unit conversion factors
        const conversionFactors = {
            length: {
                cm: { m: 0.01, km: 0.00001 },
                m: { cm: 100, km: 0.001 },
                km: { cm: 100000, m: 1000 }
            },
            area: {
                'cm¬≤': { 'm¬≤': 0.0001, 'km¬≤': 1e-10 },
                'm¬≤': { 'cm¬≤': 10000, 'km¬≤': 0.000001 },
                'km¬≤': { 'cm¬≤': 1e10, 'm¬≤': 1000000 }
            },
            volume: {
                'cm¬≥': { 'm¬≥': 1e-6, 'L': 0.001, 'mL': 1 },
                'm¬≥': { 'cm¬≥': 1e6, 'L': 1000, 'mL': 1e6 },
                'L': { 'cm¬≥': 1000, 'm¬≥': 0.001, 'mL': 1000 },
                'mL': { 'cm¬≥': 1, 'm¬≥': 1e-6, 'L': 0.001 }
            }
        };

        // Real-world applications
        const applications = {
            flooring: {
                title: "Flooring Calculation",
                description: "Calculate flooring needed for a room: Room area √∑ Tile area = Number of tiles",
                example: "Room: 4m √ó 5m = 20m¬≤\nTile: 0.2m √ó 0.2m = 0.04m¬≤\nTiles needed: 20 √∑ 0.04 = 500 tiles\nAdd 10% extra for cuts/waste: 550 tiles"
            },
            fencing: {
                title: "Fencing Cost",
                description: "Calculate fencing cost: Perimeter √ó Cost per meter = Total cost",
                example: "Garden: 8m √ó 6m\nPerimeter: 2√ó(8+6) = 28m\nCost per meter: $15\nTotal cost: 28 √ó 15 = $420\nAdd gate cost if applicable"
            },
            painting: {
                title: "Paint Needed",
                description: "Calculate paint for walls: Wall area √∑ Coverage per liter = Liters needed",
                example: "Room: 4m √ó 5m √ó 3m high\nWall area: 2√ó(4+5)√ó3 = 54m¬≤\nCoverage: 10m¬≤ per liter\nPaint needed: 54 √∑ 10 = 5.4 liters\nUsually buy 6 liters (2 coats)"
            },
            packaging: {
                title: "Packaging Design",
                description: "Design box with minimal material: Calculate surface area for different dimensions",
                example: "Product: 10cm √ó 8cm √ó 6cm\nSurface area: 2√ó(10√ó8 + 10√ó6 + 8√ó6) = 376cm¬≤\nMost efficient when dimensions are closest (cube-like)"
            },
            swimming: {
                title: "Swimming Pool",
                description: "Calculate water needed and tiling area",
                example: "Pool: 10m √ó 5m √ó 1.5m deep\nVolume: 75m¬≥ = 75,000 liters\nTiling area (sides+floor): 10√ó5 + 2√ó(10+5)√ó1.5 = 95m¬≤"
            },
            container: {
                title: "Container Capacity",
                description: "Calculate how many items fit in container",
                example: "Box: 30cm √ó 20cm √ó 15cm\nItem: 5cm √ó 4cm √ó 3cm\nBox volume: 9,000cm¬≥\nItem volume: 60cm¬≥\nFit: 9,000 √∑ 60 = 150 items\n(Also check arrangement fits)"
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentShape: 'rectangle',
            currentPrism: 'rectangular',
            showGrid: true,
            builderMode: 'add',
            canvas: null,
            ctx: null,
            prismCanvas: null,
            prismCtx: null,
            builderCanvas: null,
            builderCtx: null,
            gridSize: 20,
            shapes: [],
            prismRotation: { x: 0, y: 0 }
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathTip = document.getElementById('mathTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const printCertificateBtn = document.getElementById('printCertificate');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const currentFormula = document.getElementById('currentFormula');
        const formulaExplanation = document.getElementById('formulaExplanation');
        const resultDisplay = document.getElementById('resultDisplay');
        const applicationDisplay = document.getElementById('applicationDisplay');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            initializeCanvas();
            initializePrismCanvas();
            initializeBuilderCanvas();
            loadShapeFromLibrary('rectangle');
            drawShapeVisualization();
            drawPrism();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            printCertificateBtn.addEventListener('click', printCertificate);
            viewTopicsBtn.addEventListener('click', () => alert("Other math topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
            
            // Unit converter input events
            document.getElementById('inputValue').addEventListener('input', convertUnits);
            document.getElementById('inputUnit').addEventListener('change', convertUnits);
            document.getElementById('outputUnit').addEventListener('change', convertUnits);
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a measurement master!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Excellent! You understand mensuration concepts well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! You're getting the hang of area and volume!";
            } else {
                scoreMessage.textContent = "Keep practicing! Measurement skills improve with practice - try again!";
            }
        }

        // Create math tip display
        function createMathTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'math-tip';
            tipDiv.innerHTML = `<strong>Mensuration Tip:</strong> ${mathTips[Math.floor(Math.random() * mathTips.length)]}`;
            return tipDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathTip.appendChild(createMathTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Print certificate
        function printCertificate() {
            const percentage = Math.round((appState.score / questions.length) * 100);
            const certificateWindow = window.open('', '_blank');
            certificateWindow.document.write(`
                <html>
                <head>
                    <title>Certificate of Achievement</title>
                    <style>
                        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
                        .certificate { border: 20px solid #2196F3; padding: 50px; max-width: 800px; margin: 0 auto; }
                        h1 { color: #2196F3; }
                        .name { font-size: 2em; margin: 20px 0; }
                        .grade { font-size: 1.5em; margin: 20px 0; }
                        .score { font-size: 1.2em; margin: 20px 0; }
                        .date { margin-top: 50px; }
                    </style>
                </head>
                <body>
                    <div class="certificate">
                        <h1>Certificate of Achievement</h1>
                        <p>This certifies that</p>
                        <div class="name">${appState.studentName}</div>
                        <p>has successfully completed the Grade 8 Mensuration module</p>
                        <div class="grade">Grade 8 Mathematics - Mensuration</div>
                        <div class="score">Score: ${appState.score}/${questions.length} (${percentage}%)</div>
                        <div class="date">Date: ${new Date().toLocaleDateString()}</div>
                        <p>Ideolix Learning Hub</p>
                    </div>
                </body>
                </html>
            `);
            certificateWindow.document.close();
            certificateWindow.print();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying mensuration!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize canvas
        function initializeCanvas() {
            const canvas = document.getElementById('shapeCanvas');
            const container = document.querySelector('.shape-canvas-container');
            
            // Set canvas dimensions
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            
            appState.canvas = canvas;
            appState.ctx = canvas.getContext('2d');
        }

        // Initialize prism canvas
        function initializePrismCanvas() {
            const canvas = document.getElementById('prismCanvas');
            const container = document.querySelector('.prism-canvas-container');
            
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            
            appState.prismCanvas = canvas;
            appState.prismCtx = canvas.getContext('2d');
        }

        // Initialize builder canvas
        function initializeBuilderCanvas() {
            const canvas = document.getElementById('builderCanvas');
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = 200;
            
            appState.builderCanvas = canvas;
            appState.builderCtx = canvas.getContext('2d');
            
            // Draw initial grid on builder canvas
            drawBuilderGrid();
        }

        // Select shape type
        window.selectShapeType = function(shapeType) {
            appState.currentShape = shapeType;
            
            // Update active button
            const shapeBtns = document.querySelectorAll('.shape-btn');
            shapeBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update formula display
            updateFormulaDisplay();
            
            // Draw the shape
            drawShapeVisualization();
        };

        // Update formula display
        function updateFormulaDisplay() {
            const shape = appState.currentShape;
            let formula = "";
            let explanation = "";
            
            switch(shape) {
                case 'rectangle':
                    formula = "Area = length √ó width";
                    explanation = "Multiply the length by the width to find the area.";
                    break;
                case 'triangle':
                    formula = "Area = ¬Ω √ó base √ó height";
                    explanation = "Half of the base multiplied by the perpendicular height.";
                    break;
                case 'circle':
                    formula = "Area = œÄ √ó radius¬≤";
                    explanation = "œÄ (pi) times the radius squared. œÄ ‚âà 3.1416 or 22/7.";
                    break;
                case 'trapezoid':
                    formula = "Area = ¬Ω √ó (base‚ÇÅ + base‚ÇÇ) √ó height";
                    explanation = "Average of the two parallel sides multiplied by the height.";
                    break;
                case 'composite':
                    formula = "Total Area = Sum of parts";
                    explanation = "Break into simple shapes, calculate each, then add or subtract.";
                    break;
                case 'irregular':
                    formula = "Use grid method or divide into triangles";
                    explanation = "Count squares on grid or divide shape into triangles and sum areas.";
                    break;
            }
            
            currentFormula.textContent = formula;
            formulaExplanation.textContent = explanation;
        }

        // Draw shape visualization
        function drawShapeVisualization() {
            const ctx = appState.ctx;
            const canvas = appState.canvas;
            const width = canvas.width;
            const height = canvas.height;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Draw grid if enabled
            if (appState.showGrid) {
                drawGrid(ctx, width, height);
            }
            
            // Draw shape based on type
            ctx.strokeStyle = '#2196F3';
            ctx.fillStyle = 'rgba(33, 150, 243, 0.3)';
            ctx.lineWidth = 2;
            
            const centerX = width / 2;
            const centerY = height / 2;
            const size = Math.min(width, height) * 0.3;
            
            switch(appState.currentShape) {
                case 'rectangle':
                    ctx.beginPath();
                    ctx.rect(centerX - size, centerY - size/1.5, size * 2, size);
                    ctx.fill();
                    ctx.stroke();
                    
                    // Draw dimensions
                    drawDimension(ctx, centerX - size, centerY - size/1.5, centerX + size, centerY - size/1.5, 'length');
                    drawDimension(ctx, centerX + size, centerY - size/1.5, centerX + size, centerY + size/1.5, 'width');
                    break;
                    
                case 'triangle':
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - size);
                    ctx.lineTo(centerX - size, centerY + size);
                    ctx.lineTo(centerX + size, centerY + size);
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                    
                    // Draw height
                    ctx.strokeStyle = '#4CAF50';
                    ctx.setLineDash([5, 5]);
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY - size);
                    ctx.lineTo(centerX, centerY + size);
                    ctx.stroke();
                    ctx.setLineDash([]);
                    break;
                    
                case 'circle':
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                    
                    // Draw radius
                    ctx.strokeStyle = '#FF9800';
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.lineTo(centerX + size, centerY);
                    ctx.stroke();
                    
                    // Label radius
                    ctx.fillStyle = '#FF9800';
                    ctx.font = '14px Arial';
                    ctx.fillText('r', centerX + size/2, centerY + 20);
                    break;
                    
                case 'trapezoid':
                    ctx.beginPath();
                    ctx.moveTo(centerX - size/2, centerY - size/2);
                    ctx.lineTo(centerX + size/2, centerY - size/2);
                    ctx.lineTo(centerX + size, centerY + size/2);
                    ctx.lineTo(centerX - size, centerY + size/2);
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                    break;
                    
                case 'composite':
                    // Draw L-shape
                    ctx.fillStyle = 'rgba(33, 150, 243, 0.3)';
                    ctx.beginPath();
                    ctx.rect(centerX - size, centerY - size, size, size * 1.5);
                    ctx.rect(centerX, centerY - size, size, size);
                    ctx.fill();
                    ctx.stroke();
                    break;
                    
                case 'irregular':
                    // Draw irregular polygon
                    ctx.beginPath();
                    ctx.moveTo(centerX - size, centerY - size/2);
                    ctx.lineTo(centerX, centerY - size);
                    ctx.lineTo(centerX + size, centerY);
                    ctx.lineTo(centerX + size/2, centerY + size);
                    ctx.lineTo(centerX - size/2, centerY + size/2);
                    ctx.closePath();
                    ctx.fill();
                    ctx.stroke();
                    
                    // Draw grid overlay
                    if (appState.showGrid) {
                        ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                        ctx.lineWidth = 1;
                        const gridStep = 20;
                        for (let x = 0; x < width; x += gridStep) {
                            ctx.beginPath();
                            ctx.moveTo(x, 0);
                            ctx.lineTo(x, height);
                            ctx.stroke();
                        }
                        for (let y = 0; y < height; y += gridStep) {
                            ctx.beginPath();
                            ctx.moveTo(0, y);
                            ctx.lineTo(width, y);
                            ctx.stroke();
                        }
                    }
                    break;
            }
        }

        // Draw grid
        function drawGrid(ctx, width, height) {
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 0.5;
            
            // Vertical lines
            for (let x = 0; x < width; x += appState.gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            // Horizontal lines
            for (let y = 0; y < height; y += appState.gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
        }

        // Draw builder grid
        function drawBuilderGrid() {
            const ctx = appState.builderCtx;
            const width = appState.builderCanvas.width;
            const height = appState.builderCanvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 0.5;
            
            for (let x = 0; x < width; x += 20) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            for (let y = 0; y < height; y += 20) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
        }

        // Draw dimension lines
        function drawDimension(ctx, x1, y1, x2, y2, label) {
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 1;
            ctx.setLineDash([3, 3]);
            
            // Draw dimension line
            const midX = (x1 + x2) / 2;
            const midY = (y1 + y2) / 2;
            
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
            
            // Draw arrowheads
            const angle = Math.atan2(y2 - y1, x2 - x1);
            const arrowLength = 8;
            
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x1 + arrowLength * Math.cos(angle - Math.PI/6), y1 + arrowLength * Math.sin(angle - Math.PI/6));
            ctx.moveTo(x1, y1);
            ctx.lineTo(x1 + arrowLength * Math.cos(angle + Math.PI/6), y1 + arrowLength * Math.sin(angle + Math.PI/6));
            
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - arrowLength * Math.cos(angle - Math.PI/6), y2 - arrowLength * Math.sin(angle - Math.PI/6));
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - arrowLength * Math.cos(angle + Math.PI/6), y2 - arrowLength * Math.sin(angle + Math.PI/6));
            ctx.stroke();
            
            // Draw label
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(label, midX, midY);
            
            ctx.setLineDash([]);
        }

        // Toggle grid
        window.toggleGrid = function() {
            appState.showGrid = !appState.showGrid;
            event.target.textContent = `Grid: ${appState.showGrid ? 'On' : 'Off'}`;
            drawShapeVisualization();
        };

        // Clear shape
        window.clearShape = function() {
            const ctx = appState.ctx;
            const canvas = appState.canvas;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (appState.showGrid) {
                drawGrid(ctx, canvas.width, canvas.height);
            }
        };

        // Load shape from library
        window.loadShapeFromLibrary = function(shapeType) {
            appState.currentShape = shapeType;
            
            // Update active item
            const shapeItems = document.querySelectorAll('.shape-item');
            shapeItems.forEach(item => item.classList.remove('active'));
            event.target.closest('.shape-item').classList.add('active');
            
            updateFormulaDisplay();
            drawShapeVisualization();
            
            // Set appropriate dimensions for the shape
            switch(shapeType) {
                case 'rectangle':
                    document.getElementById('dim1').value = 10;
                    document.getElementById('dim2').value = 6;
                    break;
                case 'triangle':
                    document.getElementById('dim1').value = 10;
                    document.getElementById('dim2').value = 6;
                    break;
                case 'circle':
                    document.getElementById('dim1').value = 7;
                    break;
                case 'trapezoid':
                    document.getElementById('dim1').value = 8;
                    document.getElementById('dim2').value = 12;
                    document.getElementById('dim3').value = 5;
                    break;
            }
        };

        // Show area formulas
        window.showAreaFormulas = function() {
            let formulasText = "Area Formulas:\n\n";
            formulasText += "Rectangle: A = l √ó w\n";
            formulasText += "Square: A = s¬≤\n";
            formulasText += "Triangle: A = ¬Ω √ó b √ó h\n";
            formulasText += "Circle: A = œÄr¬≤\n";
            formulasText += "Trapezoid: A = ¬Ω(a+b)h\n";
            formulasText += "Parallelogram: A = b √ó h\n";
            formulasText += "Rhombus: A = ¬Ω √ó d‚ÇÅ √ó d‚ÇÇ\n";
            alert(formulasText);
        };

        // Show perimeter formulas
        window.showPerimeterFormulas = function() {
            let formulasText = "Perimeter Formulas:\n\n";
            formulasText += "Rectangle: P = 2(l + w)\n";
            formulasText += "Square: P = 4s\n";
            formulasText += "Triangle: P = a + b + c\n";
            formulasText += "Circle: C = 2œÄr or œÄd\n";
            formulasText += "Regular Polygon: P = n √ó s\n";
            alert(formulasText);
        };

        // Show volume formulas
        window.showVolumeFormulas = function() {
            let formulasText = "Volume Formulas:\n\n";
            formulasText += "Cube: V = s¬≥\n";
            formulasText += "Cuboid: V = l √ó w √ó h\n";
            formulasText += "Prism: V = Base Area √ó Height\n";
            formulasText += "Cylinder: V = œÄr¬≤h\n";
            formulasText += "Triangular Prism: V = ¬Ωbhl\n";
            formulasText += "Conversion: 1 m¬≥ = 1000 L\n";
            alert(formulasText);
        };

        // Calculate area
        window.calculateArea = function() {
            const dim1 = parseFloat(document.getElementById('dim1').value) || 0;
            const dim2 = parseFloat(document.getElementById('dim2').value) || 0;
            const dim3 = parseFloat(document.getElementById('dim3').value) || 0;
            
            let area = 0;
            let calculation = "";
            
            switch(appState.currentShape) {
                case 'rectangle':
                    area = dim1 * dim2;
                    calculation = `${dim1} √ó ${dim2} = ${area}`;
                    break;
                case 'triangle':
                    area = 0.5 * dim1 * dim2;
                    calculation = `¬Ω √ó ${dim1} √ó ${dim2} = ${area}`;
                    break;
                case 'circle':
                    area = Math.PI * dim1 * dim1;
                    calculation = `œÄ √ó ${dim1}¬≤ ‚âà ${area.toFixed(2)}`;
                    break;
                case 'trapezoid':
                    area = 0.5 * (dim1 + dim2) * dim3;
                    calculation = `¬Ω √ó (${dim1} + ${dim2}) √ó ${dim3} = ${area}`;
                    break;
                default:
                    area = dim1 * dim2;
                    calculation = `${dim1} √ó ${dim2} = ${area}`;
            }
            
            resultDisplay.innerHTML = `Area = ${area.toFixed(2)} units¬≤<br><small>${calculation}</small>`;
            resultDisplay.classList.add('calculate-animate');
            setTimeout(() => resultDisplay.classList.remove('calculate-animate'), 500);
        };

        // Calculate perimeter
        window.calculatePerimeter = function() {
            const dim1 = parseFloat(document.getElementById('dim1').value) || 0;
            const dim2 = parseFloat(document.getElementById('dim2').value) || 0;
            const dim3 = parseFloat(document.getElementById('dim3').value) || 0;
            
            let perimeter = 0;
            let calculation = "";
            
            switch(appState.currentShape) {
                case 'rectangle':
                    perimeter = 2 * (dim1 + dim2);
                    calculation = `2 √ó (${dim1} + ${dim2}) = ${perimeter}`;
                    break;
                case 'triangle':
                    perimeter = dim1 + dim2 + dim3;
                    calculation = `${dim1} + ${dim2} + ${dim3} = ${perimeter}`;
                    break;
                case 'circle':
                    perimeter = 2 * Math.PI * dim1;
                    calculation = `2 √ó œÄ √ó ${dim1} ‚âà ${perimeter.toFixed(2)}`;
                    break;
                case 'trapezoid':
                    perimeter = dim1 + dim2 + 2 * dim3;
                    calculation = `${dim1} + ${dim2} + 2 √ó ${dim3} = ${perimeter}`;
                    break;
                default:
                    perimeter = 2 * (dim1 + dim2);
                    calculation = `2 √ó (${dim1} + ${dim2}) = ${perimeter}`;
            }
            
            resultDisplay.innerHTML = `Perimeter = ${perimeter.toFixed(2)} units<br><small>${calculation}</small>`;
            resultDisplay.classList.add('calculate-animate');
            setTimeout(() => resultDisplay.classList.remove('calculate-animate'), 500);
        };

        // Calculate volume
        window.calculateVolume = function() {
            const dim1 = parseFloat(document.getElementById('dim1').value) || 0;
            const dim2 = parseFloat(document.getElementById('dim2').value) || 0;
            const dim3 = parseFloat(document.getElementById('dim3').value) || 0;
            
            let volume = 0;
            let calculation = "";
            
            switch(appState.currentPrism) {
                case 'rectangular':
                    volume = dim1 * dim2 * dim3;
                    calculation = `${dim1} √ó ${dim2} √ó ${dim3} = ${volume}`;
                    break;
                case 'triangular':
                    volume = 0.5 * dim1 * dim2 * dim3;
                    calculation = `¬Ω √ó ${dim1} √ó ${dim2} √ó ${dim3} = ${volume}`;
                    break;
                case 'cylinder':
                    volume = Math.PI * dim1 * dim1 * dim2;
                    calculation = `œÄ √ó ${dim1}¬≤ √ó ${dim2} ‚âà ${volume.toFixed(2)}`;
                    break;
                case 'hexagonal':
                    volume = (3 * Math.sqrt(3) * dim1 * dim1 * dim2) / 2;
                    calculation = `(3‚àö3/2) √ó ${dim1}¬≤ √ó ${dim2} ‚âà ${volume.toFixed(2)}`;
                    break;
                default:
                    volume = dim1 * dim2 * dim3;
                    calculation = `${dim1} √ó ${dim2} √ó ${dim3} = ${volume}`;
            }
            
            resultDisplay.innerHTML = `Volume = ${volume.toFixed(2)} units¬≥<br><small>${calculation}</small>`;
            resultDisplay.classList.add('calculate-animate');
            setTimeout(() => resultDisplay.classList.remove('calculate-animate'), 500);
        };

        // Show step by step calculation
        window.showStepByStep = function() {
            const dim1 = parseFloat(document.getElementById('dim1').value) || 0;
            const dim2 = parseFloat(document.getElementById('dim2').value) || 0;
            const dim3 = parseFloat(document.getElementById('dim3').value) || 0;
            
            let steps = "Step-by-Step Calculation:\n\n";
            
            switch(appState.currentShape) {
                case 'rectangle':
                    steps += "1. Identify length and width\n";
                    steps += `2. Length = ${dim1}, Width = ${dim2}\n`;
                    steps += "3. Area = length √ó width\n";
                    steps += `4. Area = ${dim1} √ó ${dim2}\n`;
                    steps += `5. Area = ${dim1 * dim2} units¬≤`;
                    break;
                case 'triangle':
                    steps += "1. Identify base and height\n";
                    steps += `2. Base = ${dim1}, Height = ${dim2}\n`;
                    steps += "3. Area = ¬Ω √ó base √ó height\n";
                    steps += `4. Area = ¬Ω √ó ${dim1} √ó ${dim2}\n`;
                    steps += `5. Area = ${0.5 * dim1 * dim2} units¬≤`;
                    break;
                case 'circle':
                    steps += "1. Identify radius\n";
                    steps += `2. Radius = ${dim1}\n`;
                    steps += "3. Area = œÄ √ó radius¬≤\n";
                    steps += `4. Area = œÄ √ó ${dim1}¬≤\n`;
                    steps += `5. Area ‚âà ${Math.PI * dim1 * dim1} units¬≤`;
                    break;
            }
            
            alert(steps);
        };

        // Reset calculator
        window.resetCalculator = function() {
            document.getElementById('dim1').value = '';
            document.getElementById('dim2').value = '';
            document.getElementById('dim3').value = '';
            resultDisplay.textContent = 'Enter dimensions and click calculate';
        };

        // Generate random problem
        window.generateRandomProblem = function() {
            const shape = ['rectangle', 'triangle', 'circle', 'trapezoid'][Math.floor(Math.random() * 4)];
            appState.currentShape = shape;
            
            // Update active button
            const shapeBtns = document.querySelectorAll('.shape-btn');
            shapeBtns.forEach(btn => btn.classList.remove('active'));
            shapeBtns.forEach(btn => {
                if (btn.textContent.toLowerCase().includes(shape)) {
                    btn.classList.add('active');
                }
            });
            
            // Generate random dimensions
            switch(shape) {
                case 'rectangle':
                    document.getElementById('dim1').value = Math.floor(Math.random() * 20) + 5;
                    document.getElementById('dim2').value = Math.floor(Math.random() * 15) + 3;
                    break;
                case 'triangle':
                    document.getElementById('dim1').value = Math.floor(Math.random() * 15) + 5;
                    document.getElementById('dim2').value = Math.floor(Math.random() * 12) + 4;
                    break;
                case 'circle':
                    document.getElementById('dim1').value = Math.floor(Math.random() * 10) + 2;
                    break;
                case 'trapezoid':
                    document.getElementById('dim1').value = Math.floor(Math.random() * 10) + 4;
                    document.getElementById('dim2').value = Math.floor(Math.random() * 15) + 6;
                    document.getElementById('dim3').value = Math.floor(Math.random() * 8) + 3;
                    break;
            }
            
            updateFormulaDisplay();
            drawShapeVisualization();
            resultDisplay.textContent = 'Calculate the answer!';
        };

        // Select prism type
        window.selectPrism = function(prismType) {
            appState.currentPrism = prismType;
            
            // Update active button
            const prismBtns = document.querySelectorAll('.prism-btn');
            prismBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawPrism();
        };

        // Draw prism
        function drawPrism() {
            const ctx = appState.prismCtx;
            const canvas = appState.prismCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw 3D prism based on type
            ctx.strokeStyle = '#FF9800';
            ctx.fillStyle = 'rgba(255, 152, 0, 0.3)';
            ctx.lineWidth = 2;
            
            const centerX = width / 2;
            const centerY = height / 2;
            const size = Math.min(width, height) * 0.2;
            
            // Apply rotation
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(appState.prismRotation.y);
            ctx.rotate(appState.prismRotation.x);
            
            switch(appState.currentPrism) {
                case 'rectangular':
                    drawRectangularPrism(ctx, size);
                    break;
                case 'triangular':
                    drawTriangularPrism(ctx, size);
                    break;
                case 'hexagonal':
                    drawHexagonalPrism(ctx, size);
                    break;
                case 'cylinder':
                    drawCylinder(ctx, size);
                    break;
            }
            
            ctx.restore();
        }

        // Draw rectangular prism
        function drawRectangularPrism(ctx, size) {
            const depth = size * 0.5;
            
            // Front face
            ctx.beginPath();
            ctx.rect(-size, -size/2, size * 2, size);
            ctx.fill();
            ctx.stroke();
            
            // Back face
            ctx.beginPath();
            ctx.moveTo(-size + depth, -size/2 - depth);
            ctx.lineTo(size + depth, -size/2 - depth);
            ctx.lineTo(size + depth, size/2 - depth);
            ctx.lineTo(-size + depth, size/2 - depth);
            ctx.closePath();
            ctx.stroke();
            
            // Connecting lines
            ctx.beginPath();
            ctx.moveTo(-size, -size/2);
            ctx.lineTo(-size + depth, -size/2 - depth);
            ctx.moveTo(size, -size/2);
            ctx.lineTo(size + depth, -size/2 - depth);
            ctx.moveTo(size, size/2);
            ctx.lineTo(size + depth, size/2 - depth);
            ctx.moveTo(-size, size/2);
            ctx.lineTo(-size + depth, size/2 - depth);
            ctx.stroke();
            
            // Draw dimensions
            ctx.strokeStyle = '#FFFFFF';
            ctx.setLineDash([3, 3]);
            ctx.beginPath();
            ctx.moveTo(-size, -size/2 - 20);
            ctx.lineTo(size, -size/2 - 20);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(size + 20, -size/2);
            ctx.lineTo(size + 20, size/2);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(-size, size/2 + 20);
            ctx.lineTo(-size + depth, size/2 - depth + 20);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        // Draw triangular prism
        function drawTriangularPrism(ctx, size) {
            const depth = size * 0.5;
            
            // Front triangle
            ctx.beginPath();
            ctx.moveTo(0, -size);
            ctx.lineTo(-size, size/2);
            ctx.lineTo(size, size/2);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Back triangle
            ctx.beginPath();
            ctx.moveTo(0 + depth, -size - depth);
            ctx.lineTo(-size + depth, size/2 - depth);
            ctx.lineTo(size + depth, size/2 - depth);
            ctx.closePath();
            ctx.stroke();
            
            // Connecting lines
            ctx.beginPath();
            ctx.moveTo(0, -size);
            ctx.lineTo(0 + depth, -size - depth);
            ctx.moveTo(-size, size/2);
            ctx.lineTo(-size + depth, size/2 - depth);
            ctx.moveTo(size, size/2);
            ctx.lineTo(size + depth, size/2 - depth);
            ctx.stroke();
        }

        // Draw hexagonal prism
        function drawHexagonalPrism(ctx, size) {
            const depth = size * 0.3;
            
            // Front hexagon
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = i * Math.PI / 3;
                const x = size * Math.cos(angle);
                const y = size * Math.sin(angle) * 0.5;
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Back hexagon
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = i * Math.PI / 3;
                const x = size * Math.cos(angle) + depth;
                const y = size * Math.sin(angle) * 0.5 - depth;
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.closePath();
            ctx.stroke();
            
            // Connecting lines
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = i * Math.PI / 3;
                const x1 = size * Math.cos(angle);
                const y1 = size * Math.sin(angle) * 0.5;
                const x2 = size * Math.cos(angle) + depth;
                const y2 = size * Math.sin(angle) * 0.5 - depth;
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
            }
            ctx.stroke();
        }

        // Draw cylinder
        function drawCylinder(ctx, size) {
            const depth = size * 0.3;
            
            // Front ellipse
            ctx.beginPath();
            ctx.ellipse(0, 0, size, size/2, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Back ellipse
            ctx.beginPath();
            ctx.ellipse(depth, -depth, size, size/2, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // Connecting lines
            ctx.beginPath();
            ctx.moveTo(-size, 0);
            ctx.lineTo(-size + depth, -depth);
            ctx.moveTo(size, 0);
            ctx.lineTo(size + depth, -depth);
            ctx.stroke();
            
            // Draw radius
            ctx.strokeStyle = '#FFFFFF';
            ctx.setLineDash([3, 3]);
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(size, 0);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Label radius
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.fillText('r', size/2, 10);
        }

        // Rotate prism
        window.rotatePrism = function(axis) {
            if (axis === 'x') {
                appState.prismRotation.x += 0.1;
            } else {
                appState.prismRotation.y += 0.1;
            }
            drawPrism();
        };

        // Show prism net
        window.showPrismNet = function() {
            alert("Prism Net:\n\nA net is a 2D pattern that can be folded to make a 3D shape.\n\nFor a rectangular prism:\n- 6 rectangles (3 pairs)\n- Opposite faces are equal\n\nNets help visualize surface area!");
        };

        // Show prism cross section
        window.showPrismCrossSection = function() {
            alert("Cross Section:\n\nA cross section is the shape you get when you slice through a prism.\n\nFor any prism:\n- Cross section parallel to base = same as base\n- Cross section perpendicular to base = rectangle\n\nCross-sectional area √ó length = Volume");
        };

        // Calculate prism volume
        window.calculatePrismVolume = function() {
            const dim1 = parseFloat(document.getElementById('dim1').value) || 0;
            const dim2 = parseFloat(document.getElementById('dim2').value) || 0;
            const dim3 = parseFloat(document.getElementById('dim3').value) || 0;
            
            calculateVolume(); // Reuse the volume calculation function
        };

        // Convert units
        window.convertUnits = function() {
            const inputValue = parseFloat(document.getElementById('inputValue').value) || 0;
            const inputUnit = document.getElementById('inputUnit').value;
            const outputUnit = document.getElementById('outputUnit').value;
            
            if (inputUnit === outputUnit) {
                document.getElementById('outputValue').value = inputValue;
                return;
            }
            
            let outputValue = inputValue;
            
            // Determine conversion type
            if (inputUnit.includes('¬≤') && outputUnit.includes('¬≤')) {
                // Area conversion
                const baseUnit1 = inputUnit.replace('¬≤', '');
                const baseUnit2 = outputUnit.replace('¬≤', '');
                const factor = conversionFactors.length[baseUnit1][baseUnit2];
                outputValue = inputValue * factor * factor;
            } else if (inputUnit.includes('¬≥') && outputUnit.includes('¬≥')) {
                // Volume conversion
                const baseUnit1 = inputUnit.replace('¬≥', '');
                const baseUnit2 = outputUnit.replace('¬≥', '');
                const factor = conversionFactors.length[baseUnit1][baseUnit2];
                outputValue = inputValue * factor * factor * factor;
            } else if (conversionFactors.volume[inputUnit] && conversionFactors.volume[inputUnit][outputUnit]) {
                // Direct volume conversion
                outputValue = inputValue * conversionFactors.volume[inputUnit][outputUnit];
            } else {
                // Try length conversion
                const factor = conversionFactors.length[inputUnit] && conversionFactors.length[inputUnit][outputUnit];
                if (factor) {
                    outputValue = inputValue * factor;
                } else {
                    outputValue = inputValue;
                }
            }
            
            document.getElementById('outputValue').value = outputValue.toFixed(6);
        };

        // Show conversion factors
        window.showConversionFactors = function() {
            let factors = "Common Conversion Factors:\n\n";
            factors += "Length:\n";
            factors += "1 m = 100 cm\n";
            factors += "1 km = 1000 m\n\n";
            factors += "Area:\n";
            factors += "1 m¬≤ = 10,000 cm¬≤\n";
            factors += "1 hectare = 10,000 m¬≤\n\n";
            factors += "Volume:\n";
            factors += "1 m¬≥ = 1,000,000 cm¬≥\n";
            factors += "1 L = 1000 cm¬≥\n";
            factors += "1 m¬≥ = 1000 L\n";
            alert(factors);
        };

        // Swap units
        window.swapUnits = function() {
            const inputUnit = document.getElementById('inputUnit').value;
            const outputUnit = document.getElementById('outputUnit').value;
            
            document.getElementById('inputUnit').value = outputUnit;
            document.getElementById('outputUnit').value = inputUnit;
            convertUnits();
        };

        // Set builder mode
        window.setBuilderMode = function(mode) {
            appState.builderMode = mode;
            
            // Update active button
            const builderBtns = document.querySelectorAll('.builder-btn');
            builderBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        };

        // Calculate complex area
        window.calculateComplexArea = function() {
            // In a real implementation, this would calculate area from drawn shapes
            const area = Math.floor(Math.random() * 200) + 50;
            resultDisplay.innerHTML = `Complex Area ‚âà ${area} units¬≤<br><small>Calculated using grid method</small>`;
            resultDisplay.classList.add('calculate-animate');
            setTimeout(() => resultDisplay.classList.remove('calculate-animate'), 500);
        };

        // Calculate complex perimeter
        window.calculateComplexPerimeter = function() {
            // In a real implementation, this would calculate perimeter from drawn shapes
            const perimeter = Math.floor(Math.random() * 100) + 30;
            resultDisplay.innerHTML = `Complex Perimeter ‚âà ${perimeter} units<br><small>Sum of all outer sides</small>`;
            resultDisplay.classList.add('calculate-animate');
            setTimeout(() => resultDisplay.classList.remove('calculate-animate'), 500);
        };

        // Clear builder
        window.clearBuilder = function() {
            drawBuilderGrid();
        };

        // Show application
        window.showApplication = function(appKey) {
            const app = applications[appKey];
            if (!app) return;
            
            applicationDisplay.innerHTML = `
                <strong>${app.title}</strong><br>
                ${app.description}<br><br>
                <em>Example:</em><br>
                ${app.example.replace(/\n/g, '<br>')}
            `;
        };

        // Topic information display
        window.showTopicInfo = function(topic) {
            let info = '';
            if (topic === 'area') {
                info = "‚ñ¢ Area ‚ñ¢\n\n";
                info += "Space inside a 2D shape.\n\n";
                info += "Key Concepts:\n";
                info += "‚Ä¢ Measured in square units (cm¬≤, m¬≤)\n";
                info += "‚Ä¢ Different formulas for different shapes\n";
                info += "‚Ä¢ Composite shapes: break into simple parts\n";
                info += "‚Ä¢ Real-world: flooring, painting, land measurement\n\n";
                info += "Common Formulas:\n";
                info += "Rectangle: length √ó width\n";
                info += "Triangle: ¬Ω √ó base √ó height\n";
                info += "Circle: œÄ √ó radius¬≤\n";
                info += "Trapezoid: ¬Ω √ó (base‚ÇÅ + base‚ÇÇ) √ó height";
            } else if (topic === 'perimeter') {
                info = "‚éî Perimeter ‚éî\n\n";
                info += "Total distance around a shape.\n\n";
                info += "Key Concepts:\n";
                info += "‚Ä¢ Measured in linear units (cm, m)\n";
                info += "‚Ä¢ Sum of all side lengths\n";
                info += "‚Ä¢ For circles: circumference = œÄ √ó diameter\n";
                info += "‚Ä¢ Real-world: fencing, framing, borders\n\n";
                info += "Common Formulas:\n";
                info += "Rectangle: 2 √ó (length + width)\n";
                info += "Square: 4 √ó side\n";
                info += "Triangle: side‚ÇÅ + side‚ÇÇ + side‚ÇÉ\n";
                info += "Circle: œÄ √ó diameter or 2œÄ √ó radius";
            } else {
                info = "üßä Volume üßä\n\n";
                info += "Space inside a 3D solid.\n\n";
                info += "Key Concepts:\n";
                info += "‚Ä¢ Measured in cubic units (cm¬≥, m¬≥)\n";
                info += "‚Ä¢ Prism volume = Base Area √ó Height\n";
                info += "‚Ä¢ Capacity measured in liters (1L = 1000cm¬≥)\n";
                info += "‚Ä¢ Real-world: containers, swimming pools, boxes\n\n";
                info += "Common Formulas:\n";
                info += "Rectangular prism: length √ó width √ó height\n";
                info += "Cylinder: œÄ √ó radius¬≤ √ó height\n";
                info += "Triangular prism: ¬Ω √ó base √ó triangle height √ó length\n";
                info += "Conversion: 1 m¬≥ = 1000 liters";
            }
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
        
        // Handle window resize
        window.addEventListener('resize', function() {
            if (appState.canvas) {
                const container = document.querySelector('.shape-canvas-container');
                appState.canvas.width = container.clientWidth;
                appState.canvas.height = container.clientHeight;
                drawShapeVisualization();
            }
            
            if (appState.prismCanvas) {
                const container = document.querySelector('.prism-canvas-container');
                appState.prismCanvas.width = container.clientWidth;
                appState.prismCanvas.height = container.clientHeight;
                drawPrism();
            }
            
            if (appState.builderCanvas) {
                const canvas = appState.builderCanvas;
                canvas.width = canvas.parentElement.clientWidth;
                drawBuilderGrid();
            }
        });
    </script>
</body>
</html>
