<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 English - Speech Writing | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Speech Writing Theme */
        :root {
            --primary-blue: #2196F3;
            --secondary-purple: #9C27B0;
            --accent-orange: #FF9800;
            --accent-green: #4CAF50;
            --accent-red: #F44336;
            --accent-teal: #009688;
            --accent-indigo: #3F51B5;
            --accent-pink: #E91E63;
            --accent-amber: #FFC107;
            --accent-yellow: #FFEB3B;
            --accent-lime: #CDDC39;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --persuasive-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --informative-glow: 0 0 20px rgba(156, 39, 176, 0.4);
            --entertaining-glow: 0 0 20px rgba(255, 152, 0, 0.4);
            --special-glow: 0 0 20px rgba(76, 175, 80, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Georgia', 'Times New Roman', serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(156, 39, 176, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 152, 0, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 30% 70%, rgba(76, 175, 80, 0.03) 0%, transparent 50%);
        }

        /* Speech Pattern Background */
        .speech-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.1;
            pointer-events: none;
            background: 
                repeating-linear-gradient(45deg, 
                    transparent, 
                    transparent 20px, 
                    rgba(33, 150, 243, 0.05) 20px, 
                    rgba(33, 150, 243, 0.05) 40px),
                repeating-linear-gradient(-45deg, 
                    transparent, 
                    transparent 20px, 
                    rgba(156, 39, 176, 0.05) 20px, 
                    rgba(156, 39, 176, 0.05) 40px);
        }

        .floating-element {
            position: absolute;
            font-size: 2.5rem;
            font-weight: bold;
            animation: floatElement 30s linear infinite;
            opacity: 0.1;
            pointer-events: none;
        }

        @keyframes floatElement {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.05; }
            25% { transform: translateY(-100px) translateX(80px) rotate(90deg); opacity: 0.03; }
            50% { transform: translateY(-30px) translateX(-120px) rotate(180deg); opacity: 0.05; }
            75% { transform: translateY(100px) translateX(40px) rotate(270deg); opacity: 0.03; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.05; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--persuasive-glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.8rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 12px 24px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 2px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.8rem;
        }

        .topic-name {
            font-weight: 700;
            color: var(--primary-blue);
            font-size: 1.2rem;
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-secondary:hover {
            background: #7B1FA2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Speech Type Cards */
        .speech-types-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin: 30px 0;
        }

        @media (max-width: 768px) {
            .speech-types-grid {
                grid-template-columns: 1fr;
            }
        }

        .speech-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .speech-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .speech-card.persuasive {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .speech-card.informative {
            border-color: var(--secondary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .speech-card.entertaining {
            border-color: var(--accent-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .speech-card.special {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .speech-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .speech-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .speech-card.persuasive .speech-title {
            color: var(--primary-blue);
        }

        .speech-card.informative .speech-title {
            color: var(--secondary-purple);
        }

        .speech-card.entertaining .speech-title {
            color: var(--accent-orange);
        }

        .speech-card.special .speech-title {
            color: var(--accent-green);
        }

        .speech-description {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .speech-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .speech-features h4 {
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
            font-size: 1.2rem;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .speech-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-indigo));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        /* Options Container */
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-purple);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
            color: white;
        }

        /* Feedback Container */
        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Speech Structure Visualization */
        .speech-structure {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-teal);
        }

        .structure-title {
            color: var(--accent-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .structure-diagram {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .structure-part {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
        }

        .structure-part.opening {
            background: var(--primary-blue);
        }

        .structure-part.body {
            background: var(--secondary-purple);
        }

        .structure-part.conclusion {
            background: var(--accent-green);
        }

        .structure-part:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Speech Examples */
        .speech-examples {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .example-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .example-tab {
            padding: 10px 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .example-tab.active {
            background: var(--accent-orange);
            color: white;
            font-weight: bold;
        }

        .example-tab:hover:not(.active) {
            border-color: var(--accent-orange);
        }

        .example-content {
            background: var(--dark-surface);
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            font-style: italic;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Delivery Tips */
        .delivery-tips {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-pink);
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .tips-grid {
                grid-template-columns: 1fr;
            }
        }

        .tip-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-pink);
        }

        .tip-title {
            font-weight: bold;
            color: var(--accent-pink);
            margin-bottom: 8px;
        }

        /* Vocabulary Builder */
        .vocabulary-builder {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-indigo);
        }

        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .vocabulary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .vocab-word {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .vocab-word:hover {
            transform: translateY(-3px);
            background: rgba(63, 81, 181, 0.1);
        }

        .word-text {
            font-weight: bold;
            color: var(--accent-indigo);
            margin-bottom: 5px;
        }

        .word-definition {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Interactive Speech Practice */
        .speech-practice {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .practice-title {
            color: var(--accent-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-green);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-button:hover {
            background: rgba(76, 175, 80, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Compare Speeches Table */
        .compare-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .compare-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-orange);
            border-bottom: 2px solid var(--accent-orange);
        }

        .compare-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .compare-table tr:hover {
            background: rgba(255, 152, 0, 0.05);
        }

        /* Microphone Animation */
        .microphone {
            width: 40px;
            height: 60px;
            background: var(--dark-surface);
            border-radius: 20px;
            position: relative;
            margin: 0 auto 20px;
            border: 2px solid var(--accent-green);
        }

        .microphone:before {
            content: '';
            position: absolute;
            width: 10px;
            height: 15px;
            background: var(--accent-green);
            border-radius: 5px;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .microphone:after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--accent-green);
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0.3;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); opacity: 0.3; }
            50% { transform: translateX(-50%) scale(1.2); opacity: 0.1; }
            100% { transform: translateX(-50%) scale(1); opacity: 0.3; }
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .vocabulary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        .typewriter {
            display: inline-block;
            overflow: hidden;
            border-right: 2px solid var(--primary-blue);
            white-space: nowrap;
            animation: typewriter 2s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--primary-blue); }
        }
        
        @keyframes speechGlow {
            0% { box-shadow: 0 0 20px rgba(33, 150, 243, 0.4); }
            25% { box-shadow: 0 0 20px rgba(156, 39, 176, 0.4); }
            50% { box-shadow: 0 0 20px rgba(255, 152, 0, 0.4); }
            75% { box-shadow: 0 0 20px rgba(76, 175, 80, 0.4); }
            100% { box-shadow: 0 0 20px rgba(33, 150, 243, 0.4); }
        }
        
        .speech-glow {
            animation: speechGlow 5s linear infinite;
        }

        /* Stage Visualization */
        .stage {
            width: 100%;
            height: 120px;
            background: linear-gradient(to bottom, #333, #222);
            border-radius: 10px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--accent-amber);
        }

        .stage:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--accent-amber);
            box-shadow: 0 0 10px var(--accent-amber);
        }

        .stage-light {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--accent-yellow), transparent);
            animation: lightMove 10s infinite linear;
            opacity: 0.3;
        }

        @keyframes lightMove {
            0% { top: 10px; left: 10px; }
            25% { top: 10px; left: calc(100% - 50px); }
            50% { top: calc(100% - 50px); left: calc(100% - 50px); }
            75% { top: calc(100% - 50px); left: 10px; }
            100% { top: 10px; left: 10px; }
        }

        .podium {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 40px;
            background: var(--accent-amber);
            border-radius: 5px;
        }

        .podium:before {
            content: 'üé§';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Speech Pattern Background -->
    <div class="speech-bg" id="speechBg">
        <!-- Elements will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 7 English: Speech Writing</h1>
            <p class="welcome-subtitle">Master the art of public speaking and speech writing! Learn to craft persuasive arguments, deliver informative presentations, entertain audiences, and deliver special occasion speeches. Develop confidence, clarity, and communication skills that will serve you throughout life!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üé§üì¢üí¨</span>
                <span class="topic-name">Speech Writing & Public Speaking</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Begin Speech Writing Journey</span>
                </button>
            </div>
            
            <!-- Speech Types Overview -->
            <div class="speech-types-grid" style="width: 100%; margin-top: 30px;">
                <div class="speech-card persuasive" onclick="showSpeechType('persuasive')">
                    <div class="speech-icon">‚öñÔ∏è</div>
                    <h3 class="speech-title">Persuasive Speech</h3>
                    <p class="speech-description">Convinces the audience to adopt a particular viewpoint or take specific action. Uses strong arguments, evidence, and emotional appeals.</p>
                    <div class="speech-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Clear call to action</li>
                            <li>Strong arguments with evidence</li>
                            <li>Addresses counterarguments</li>
                            <li>Uses rhetorical devices</li>
                        </ul>
                    </div>
                </div>
                
                <div class="speech-card informative" onclick="showSpeechType('informative')">
                    <div class="speech-icon">üìö</div>
                    <h3 class="speech-title">Informative Speech</h3>
                    <p class="speech-description">Educates the audience about a specific topic. Presents facts, explanations, and information in an organized, clear manner.</p>
                    <div class="speech-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Clear, factual information</li>
                            <li>Logical organization</li>
                            <li>Easy-to-follow structure</li>
                            <li>Visual aids when appropriate</li>
                        </ul>
                    </div>
                </div>
                
                <div class="speech-card entertaining" onclick="showSpeechType('entertaining')">
                    <div class="speech-icon">üé≠</div>
                    <h3 class="speech-title">Entertaining Speech</h3>
                    <p class="speech-description">Amuses, delights, or engages the audience. Often includes humor, stories, and lighthearted content for social gatherings.</p>
                    <div class="speech-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Humor and wit</li>
                            <li>Engaging stories</li>
                            <li>Lighthearted tone</li>
                            <li>Audience interaction</li>
                        </ul>
                    </div>
                </div>
                
                <div class="speech-card special" onclick="showSpeechType('special')">
                    <div class="speech-icon">üèÜ</div>
                    <h3 class="speech-title">Special Occasion Speech</h3>
                    <p class="speech-description">Given at specific events like weddings, graduations, or award ceremonies. Celebrates, honors, or commemorates.</p>
                    <div class="speech-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Appropriate for the occasion</li>
                            <li>Personal and heartfelt</li>
                            <li>Brief and focused</li>
                            <li>Emotional resonance</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Speech fact display -->
                <div id="speechFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Speech Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const speechBg = document.getElementById('speechBg');
            
            // Create floating speech symbols
            const elements = ['üé§', 'üì¢', 'üí¨', 'üó£Ô∏è', 'üë•', 'üëè', 'üìù', 'üé≠', 'üèÜ', '‚öñÔ∏è', 'üìö', 'üéØ', 'üí°', 'üåü', '‚ú®', 'üî•', 'üéâ', '‚úÖ'];
            
            for (let i = 0; i < 25; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = elements[Math.floor(Math.random() * elements.length)];
                element.style.left = `${Math.random() * 100}%`;
                element.style.top = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 20}s`;
                element.style.fontSize = `${2 + Math.random() * 3}rem`;
                
                // Color different speech types
                if (['‚öñÔ∏è', 'üéØ', 'üí°'].includes(element.textContent)) {
                    element.style.color = 'rgba(33, 150, 243, 0.1)'; // Blue for persuasive
                } else if (['üìö', 'üìù', 'üí¨'].includes(element.textContent)) {
                    element.style.color = 'rgba(156, 39, 176, 0.1)'; // Purple for informative
                } else if (['üé≠', 'üéâ', '‚ú®'].includes(element.textContent)) {
                    element.style.color = 'rgba(255, 152, 0, 0.1)'; // Orange for entertaining
                } else if (['üèÜ', 'üåü', 'üëè'].includes(element.textContent)) {
                    element.style.color = 'rgba(76, 175, 80, 0.1)'; // Green for special occasion
                } else {
                    element.style.color = 'rgba(233, 30, 99, 0.1)'; // Pink for general
                }
                
                speechBg.appendChild(element);
            }
        }

        // Questions array - 120+ Grade 7 English speech writing questions
        const questions = [
            // Speech Basics (1-20)
            {
                type: "speech_basics",
                question: "What is the primary purpose of a speech?",
                options: ["To communicate ideas to an audience", "To write a long document", "To practice reading aloud", "To entertain oneself"],
                answer: "A",
                explanation: "The main purpose of any speech is to communicate ideas, information, or emotions to an audience effectively."
            },
            {
                type: "speech_basics",
                question: "Which of these is NOT one of the three main parts of a speech?",
                options: ["The appendix", "Introduction", "Body", "Conclusion"],
                answer: "A",
                explanation: "Speeches have three main parts: introduction (grabs attention), body (presents main points), and conclusion (summarizes and ends strongly)."
            },
            {
                type: "speech_basics",
                question: "What should a good speech introduction do?",
                options: ["Grab attention, state purpose, preview main points", "List all your sources", "Tell your entire life story", "Apologize for speaking"],
                answer: "A",
                explanation: "An effective introduction should grab the audience's attention, state your purpose/topic, and preview your main points."
            },
            {
                type: "speech_basics",
                question: "How long should a typical middle school speech be?",
                options: ["3-5 minutes", "30 seconds", "15-20 minutes", "Exactly 10 minutes"],
                answer: "A",
                explanation: "For middle school students, 3-5 minutes is an appropriate length‚Äîlong enough to develop ideas but short enough to maintain audience attention."
            },
            // Persuasive Speeches (21-40)
            {
                type: "persuasive_basics",
                question: "What is the main goal of a persuasive speech?",
                options: ["To convince the audience to believe or do something", "To make people laugh", "To provide complete information on a topic", "To tell a personal story"],
                answer: "A",
                explanation: "Persuasive speeches aim to change the audience's beliefs, attitudes, or behaviors about a topic."
            },
            {
                type: "persuasive_basics",
                question: "What is a 'call to action' in a persuasive speech?",
                options: ["A clear request for the audience to do something", "The title of the speech", "A thank you to the audience", "A list of references"],
                answer: "A",
                explanation: "A call to action specifically tells the audience what you want them to do after hearing your speech (vote, donate, change a habit, etc.)."
            },
            {
                type: "persuasive_basics",
                question: "Which persuasive technique uses logic and facts?",
                options: ["Logos", "Pathos", "Ethos", "Kairos"],
                answer: "A",
                explanation: "Logos appeals to logic and reason using facts, statistics, and logical arguments."
            },
            {
                type: "persuasive_basics",
                question: "What does 'addressing counterarguments' mean in persuasive speaking?",
                options: ["Acknowledging and responding to opposing views", "Speaking louder to overcome objections", "Ignoring different opinions", "Changing your topic mid-speech"],
                answer: "A",
                explanation: "Addressing counterarguments means acknowledging opposing viewpoints and explaining why your position is stronger, which makes your argument more credible."
            },
            // Informative Speeches (41-60)
            {
                type: "informative_basics",
                question: "What is the main purpose of an informative speech?",
                options: ["To educate or explain something to the audience", "To entertain with jokes", "To persuade about a controversial topic", "To tell a fictional story"],
                answer: "A",
                explanation: "Informative speeches aim to increase the audience's knowledge or understanding about a topic without trying to change their opinions."
            },
            {
                type: "informative_basics",
                question: "Which organizational pattern would work best for explaining how something works?",
                options: ["Chronological or process order", "Alphabetical order", "Random order", "By color"],
                answer: "A",
                explanation: "Chronological or process order works well for explaining steps in a process or how something develops over time."
            },
            {
                type: "informative_basics",
                question: "What should you avoid in an informative speech?",
                options: ["Expressing strong personal opinions", "Using clear examples", "Organizing information logically", "Defining key terms"],
                answer: "A",
                explanation: "Informative speeches should be objective and factual. Strong personal opinions belong in persuasive speeches."
            },
            {
                type: "informative_basics",
                question: "Which would make the BEST visual aid for an informative speech about volcanoes?",
                options: ["A diagram showing volcano parts and eruption process", "A poem about fire", "A song about mountains", "A random photo of a mountain"],
                answer: "A",
                explanation: "A clear, labeled diagram would help the audience understand volcano structure and eruption processes better than other options."
            },
            // Entertaining Speeches (61-80)
            {
                type: "entertaining_basics",
                question: "What is the primary goal of an entertaining speech?",
                options: ["To amuse, delight, or engage the audience", "To provide detailed instructions", "To argue a serious point", "To present scientific data"],
                answer: "A",
                explanation: "Entertaining speeches focus on amusing the audience, often through humor, stories, and lighthearted content."
            },
            {
                type: "entertaining_basics",
                question: "Which technique is commonly used in entertaining speeches?",
                options: ["Humor and storytelling", "Complex statistics", "Formal academic language", "Technical jargon"],
                answer: "A",
                explanation: "Humor, anecdotes, and engaging stories are key techniques for entertaining speeches."
            },
            {
                type: "entertaining_basics",
                question: "When telling a joke in a speech, what should you do FIRST?",
                options: ["Make sure it's appropriate for your audience", "Practice saying it very fast", "Use complicated vocabulary", "Tell it at the very end only"],
                answer: "A",
                explanation: "Always ensure humor is appropriate for your specific audience in terms of age, background, and context."
            },
            {
                type: "entertaining_basics",
                question: "What's a good way to engage your audience in an entertaining speech?",
                options: ["Ask rhetorical questions", "Read directly from notes without looking up", "Speak in a monotone voice", "Use as many facts as possible"],
                answer: "A",
                explanation: "Rhetorical questions, audience participation, and maintaining eye contact help engage listeners in entertaining speeches."
            },
            // Special Occasion Speeches (81-100)
            {
                type: "special_basics",
                question: "What type of speech would you give at a graduation ceremony?",
                options: ["Special occasion speech", "Persuasive speech", "Informative lecture", "Entertaining comedy routine"],
                answer: "A",
                explanation: "Graduation speeches are special occasion speeches that celebrate achievements and inspire graduates."
            },
            {
                type: "special_basics",
                question: "What should a wedding toast primarily do?",
                options: ["Celebrate the couple and wish them well", "Tell embarrassing stories about the couple", "Discuss politics", "Give marriage advice for an hour"],
                answer: "A",
                explanation: "Wedding toasts should be heartfelt, positive, and focused on celebrating the couple's union."
            },
            {
                type: "special_basics",
                question: "How long should most special occasion speeches be?",
                options: ["Brief and focused (2-5 minutes)", "As long as possible", "Exactly 10 minutes", "At least 20 minutes"],
                answer: "A",
                explanation: "Special occasion speeches are usually brief to maintain the event's schedule and audience attention."
            },
            {
                type: "special_basics",
                question: "What is important to consider when giving a eulogy?",
                options: ["Being respectful and honoring the person's memory", "Making everyone laugh hysterically", "Discussing controversial topics", "Focusing only on yourself"],
                answer: "A",
                explanation: "Eulogies should respectfully honor the deceased person's life, character, and impact on others."
            },
            // Speech Delivery (101-120)
            {
                type: "delivery_basics",
                question: "What does 'projecting your voice' mean?",
                options: ["Speaking loudly and clearly so everyone can hear", "Using a microphone always", "Whispering for effect", "Speaking very quickly"],
                answer: "A",
                explanation: "Projection means using your breath and diaphragm to speak loudly and clearly without shouting."
            },
            {
                type: "delivery_basics",
                question: "Why is eye contact important in speech delivery?",
                options: ["It connects you with the audience and shows confidence", "It helps you remember your speech", "It makes the speech shorter", "It's required by speech rules"],
                answer: "A",
                explanation: "Eye contact builds connection with your audience, shows confidence, and helps engage listeners."
            },
            {
                type: "delivery_basics",
                question: "What should you do with your hands during a speech?",
                options: ["Use natural gestures to emphasize points", "Keep them perfectly still at your sides", "Put them in your pockets", "Wave them wildly constantly"],
                answer: "A",
                explanation: "Natural, purposeful gestures can emphasize points and make your delivery more engaging, but they should feel natural, not forced."
            },
            {
                type: "delivery_basics",
                question: "What is 'pacing' in speech delivery?",
                options: ["The speed at which you speak", "Walking back and forth on stage", "The number of pages in your speech", "How high or low your voice is"],
                answer: "A",
                explanation: "Pacing refers to your speaking rate‚Äîvarying your pace keeps the audience engaged and emphasizes important points."
            },
            // Speech Writing (121-140)
            {
                type: "writing_basics",
                question: "What is a 'hook' in speech writing?",
                options: ["An engaging opening that grabs attention", "A mistake in the speech", "The conclusion of the speech", "A type of visual aid"],
                answer: "A",
                explanation: "A hook is an attention-grabbing opening like a question, quote, story, or surprising fact that engages listeners immediately."
            },
            {
                type: "writing_basics",
                question: "What does 'audience analysis' mean in speech preparation?",
                options: ["Considering who your listeners are and what they need", "Counting how many people are present", "Asking the audience their names", "Ignoring the audience completely"],
                answer: "A",
                explanation: "Audience analysis means considering your listeners' ages, backgrounds, knowledge level, and interests to tailor your speech effectively."
            },
            {
                type: "writing_basics",
                question: "What is the purpose of transitions in a speech?",
                options: ["To connect ideas and guide the audience", "To make the speech longer", "To show off vocabulary", "To give yourself time to think"],
                answer: "A",
                explanation: "Transitions (like 'next,' 'however,' 'in conclusion') help guide your audience through your speech smoothly."
            },
            {
                type: "writing_basics",
                question: "Why should you practice your speech aloud?",
                options: ["To improve delivery and timing", "To memorize every single word", "To make it sound different each time", "Only if you're nervous"],
                answer: "A",
                explanation: "Practicing aloud helps with pacing, delivery, familiarizing yourself with content, and building confidence."
            },
            // Rhetorical Devices (141-160)
            {
                type: "rhetorical_basics",
                question: "What is a rhetorical question?",
                options: ["A question asked for effect, not expecting an answer", "A question with an obvious answer", "A question from the audience", "A technical question"],
                answer: "A",
                explanation: "Rhetorical questions engage the audience's thinking but aren't meant to be answered aloud (e.g., 'Have you ever wondered...?')."
            },
            {
                type: "rhetorical_basics",
                question: "What is repetition in speeches?",
                options: ["Repeating words or phrases for emphasis", "Saying the same thing many times by accident", "Forgetting what you said", "Using different words for variety"],
                answer: "A",
                explanation: "Purposeful repetition of key words or phrases (like 'I have a dream') emphasizes important points and creates rhythm."
            },
            {
                type: "rhetorical_basics",
                question: "What is the rule of three in speech writing?",
                options: ["Grouping ideas in threes for memorability", "Having exactly three main points", "Speaking for three minutes", "Using three-syllable words"],
                answer: "A",
                explanation: "The rule of three suggests that ideas presented in groups of three are more memorable and satisfying (e.g., 'Friends, Romans, countrymen')."
            },
            {
                type: "rhetorical_basics",
                question: "What does 'anaphora' mean in speeches?",
                options: ["Repetition of words at the beginning of successive clauses", "Speaking without notes", "Using ancient languages", "Changing your tone frequently"],
                answer: "A",
                explanation: "Anaphora is repeating words at the beginning of phrases for emphasis (e.g., 'We shall fight on the beaches, we shall fight on the landing grounds...')."
            },
            // Overcoming Anxiety (161-180)
            {
                type: "anxiety_basics",
                question: "What is a good way to reduce speech anxiety?",
                options: ["Practice thoroughly and know your material", "Avoid practicing to stay spontaneous", "Focus only on your fears", "Imagine the worst possible outcome"],
                answer: "A",
                explanation: "Thorough preparation and practice build confidence and reduce anxiety more than any other technique."
            },
            {
                type: "anxiety_basics",
                question: "What should you do if you make a mistake during a speech?",
                options: ["Pause, breathe, and continue calmly", "Apologize repeatedly", "Run off the stage", "Start over from the beginning"],
                answer: "A",
                explanation: "Minor mistakes are normal. Pause briefly, take a breath, and continue. Most audiences won't even notice small errors."
            },
            {
                type: "anxiety_basics",
                question: "Why is breathing important before and during a speech?",
                options: ["It calms nerves and supports your voice", "It makes the speech shorter", "It's only important if you're singing", "It helps you speak faster"],
                answer: "A",
                explanation: "Deep breathing before speaking reduces anxiety, and proper breath support during speaking improves voice quality and projection."
            },
            {
                type: "anxiety_basics",
                question: "What positive mindset helps with speech anxiety?",
                options: ["Viewing it as sharing ideas, not performing", "Thinking everyone is judging you", "Focusing only on perfection", "Believing you must be the best speaker ever"],
                answer: "A",
                explanation: "View public speaking as sharing valuable ideas with interested listeners rather than performing perfectly under judgment."
            },
            // Visual Aids (181-200)
            {
                type: "visual_aids",
                question: "When should you use visual aids in a speech?",
                options: ["When they enhance understanding of your topic", "In every speech regardless of topic", "Only if required by the teacher", "To fill time when your speech is short"],
                answer: "A",
                explanation: "Visual aids should support and clarify your content, not distract from it. Use them when they genuinely help understanding."
            },
            {
                type: "visual_aids",
                question: "What is the biggest mistake people make with PowerPoint slides?",
                options: ["Putting too much text on each slide", "Using any colors at all", "Having too few slides", "Not using enough animation"],
                answer: "A",
                explanation: "Overloaded slides with too much text distract the audience from listening to you. Use brief bullet points and images instead."
            },
            {
                type: "visual_aids",
                question: "How should you handle visual aids during your speech?",
                options: ["Practice with them and know when to reference each", "Read directly from them", "Ignore them completely", "Pass them around during your speech"],
                answer: "A",
                explanation: "Integrate visual aids smoothly by practicing with them and knowing exactly when to reference each during your speech."
            },
            {
                type: "visual_aids",
                question: "What should you do if a visual aid fails during your speech?",
                options: ["Continue speaking and explain the content verbally", "Stop the speech until it's fixed", "Apologize and end the speech", "Ignore it and hope no one notices"],
                answer: "A",
                explanation: "Technical issues happen. Continue confidently and describe what the visual aid would have shown. Your preparation should allow this."
            },
            // Advanced Concepts (201-220)
            {
                type: "advanced_concepts",
                question: "What does 'ethos' refer to in persuasive speaking?",
                options: ["The speaker's credibility and character", "Emotional appeals", "Logical arguments", "Timing of the speech"],
                answer: "A",
                explanation: "Ethos is the persuasive appeal based on the speaker's credibility, expertise, and character."
            },
            {
                type: "advanced_concepts",
                question: "What is 'pathos' in persuasive speeches?",
                options: ["Appeals to the audience's emotions", "Logical arguments with facts", "The speaker's credibility", "The speech structure"],
                answer: "A",
                explanation: "Pathos involves appealing to the audience's emotions through stories, vivid language, and emotional examples."
            },
            {
                type: "advanced_concepts",
                question: "What is 'kairos' in speech context?",
                options: ["Speaking at the right moment for maximum impact", "Using ancient Greek techniques", "Speaking very quickly", "Having perfect pronunciation"],
                answer: "A",
                explanation: "Kairos means choosing the right moment and context for your speech to have the greatest impact."
            },
            {
                type: "advanced_concepts",
                question: "What does 'articulation' mean in speech delivery?",
                options: ["Pronouncing words clearly and distinctly", "Speaking with emotion", "Using hand gestures", "Organizing your speech well"],
                answer: "A",
                explanation: "Articulation refers to clear, distinct pronunciation of words so the audience can understand every word."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent speech knowledge!",
            "Perfect understanding of speech types!",
            "Great public speaking insight!",
            "You're a speech expert!",
            "Outstanding communication skills!",
            "Brilliant delivery techniques!",
            "You think like a professional speaker!",
            "Masterful understanding of speech structure!",
            "Exceptional rhetorical knowledge!",
            "You're ready to deliver award-winning speeches!"
        ];

        // Speech facts
        const speechFacts = [
            "The longest speech ever recorded in history lasted 24 hours and 18 minutes!",
            "Ancient Greeks considered public speaking a essential skill for all educated citizens.",
            "The fear of public speaking (glossophobia) affects about 75% of people.",
            "Martin Luther King Jr.'s 'I Have a Dream' speech was originally titled 'Normalcy, Never Again.'",
            "The average person speaks at about 125-150 words per minute.",
            "TED Talks are limited to 18 minutes because research shows that's the ideal attention span.",
            "Winston Churchill wrote out his speeches phonetically to help with his stutter.",
            "The most viewed TED Talk of all time is Sir Ken Robinson's 'Do Schools Kill Creativity?'"
        ];

        // Speech type definitions
        const speechTypes = [
            {
                type: "Persuasive",
                icon: "‚öñÔ∏è",
                color: "var(--primary-blue)",
                definition: "Aims to convince the audience to adopt a belief or take action.",
                purpose: "To change attitudes, beliefs, or behaviors through logical and emotional appeals.",
                features: ["Clear thesis/position", "Strong evidence and reasoning", "Addresses counterarguments", "Call to action", "Emotional appeals", "Credible sources"],
                examples: ["Political speeches", "Sales presentations", "Debates", "Advocacy speeches"],
                tips: ["Know your audience's values", "Use the three appeals (ethos, pathos, logos)", "Anticipate objections", "End with strong call to action"]
            },
            {
                type: "Informative",
                icon: "üìö",
                color: "var(--secondary-purple)",
                definition: "Educates the audience about a specific topic or concept.",
                purpose: "To increase knowledge or understanding without trying to change opinions.",
                features: ["Clear, organized information", "Objective facts and data", "Definitions of key terms", "Examples and illustrations", "Visual aids when helpful", "Logical structure"],
                examples: ["Class presentations", "How-to demonstrations", "Science fair explanations", "Historical overviews"],
                tips: ["Start with what audience already knows", "Use analogies for complex ideas", "Organize logically (chronological, spatial, topical)", "Practice clear explanations"]
            },
            {
                type: "Entertaining",
                icon: "üé≠",
                color: "var(--accent-orange)",
                definition: "Amuses, delights, or engages the audience primarily for enjoyment.",
                purpose: "To provide pleasure, laughter, or lighthearted engagement at social events.",
                features: ["Humor and wit", "Engaging stories", "Audience interaction", "Lighthearted tone", "Surprise elements", "Personal anecdotes"],
                examples: ["After-dinner speeches", "Roasts/toasts", "Storytelling events", "Social gathering talks"],
                tips: ["Know what your audience finds funny", "Practice timing for jokes", "Use self-deprecating humor carefully", "Keep it positive and inclusive"]
            },
            {
                type: "Special Occasion",
                icon: "üèÜ",
                color: "var(--accent-green)",
                definition: "Given at specific events to celebrate, honor, or commemorate.",
                purpose: "To mark important occasions and create shared emotional experiences.",
                features: ["Appropriate for the event", "Emotional resonance", "Personal connection", "Brief and focused", "Uplifting or comforting tone", "Memorable phrases"],
                examples: ["Wedding toasts", "Eulogies", "Award acceptance speeches", "Graduation addresses", "Retirement tributes"],
                tips: ["Keep it heartfelt and sincere", "Know the event's traditions", "Practice emotional control", "Focus on the occasion, not yourself"]
            }
        ];

        // Speech examples
        const speechExamples = {
            persuasive: [
                {
                    title: "The Importance of Recycling in Our School",
                    excerpt: "Imagine walking through our school courtyard and seeing it clean, green, and litter-free. This vision can become reality if each of us commits to recycling just one more item per day. Currently, only 30% of our school's waste is recycled, while the national average for schools is 45%. By placing recycling bins in every classroom and committing to 'Recycle Tuesdays,' we can increase our rate by 50% within one semester. This isn't just about cleanliness‚Äîit's about showing we care for our environment and setting an example for our community."
                },
                {
                    title: "Why We Need Longer Recess",
                    excerpt: "Raise your hand if you've ever felt tired or restless during afternoon classes. What if I told you there's a simple solution that could improve our focus, health, and even test scores? Research shows that students with at least 30 minutes of daily physical activity have 20% better concentration and 15% higher academic performance. By extending our recess by just 10 minutes, we're not asking for less learning time‚Äîwe're asking for more effective learning time. Let's work with our teachers to create a schedule that helps us learn better by moving more."
                }
            ],
            informative: [
                {
                    title: "How Honeybees Help Our World",
                    excerpt: "Did you know that one-third of all the food we eat depends on pollinators like honeybees? These incredible insects do much more than make honey. A single honeybee visits 50-100 flowers during one collection trip, and a typical hive makes about 1,000 such trips per day. Bees have special pollen baskets on their legs and communicate through a 'waggle dance' that tells other bees exactly where to find the best flowers. Without bees, we'd lose apples, almonds, blueberries, and many other foods we enjoy daily."
                },
                {
                    title: "The History of Video Games",
                    excerpt: "The journey of video games began not with complex consoles, but with a simple tennis simulation called 'Pong' in 1972. This black-and-white game featured two paddles and a dot for a ball, yet it captivated millions. The 1980s brought us iconic characters like Mario and Pac-Man, while the 1990s introduced us to 3D gaming with titles like 'Super Mario 64.' Today, video games are a $180 billion industry that includes educational games, virtual reality, and even competitive esports watched by millions worldwide."
                }
            ],
            entertaining: [
                {
                    title: "The Adventure of My First Camping Trip",
                    excerpt: "Have you ever tried to put up a tent in the dark while being serenaded by what sounded like a bear but turned out to be a particularly unhappy squirrel? That was my first camping experience! I packed everything I thought I'd need: three flashlights, bug spray, marshmallows... but forgot the tent poles. Let's just say I learned that night that 'sleeping under the stars' sounds romantic until you realize stars don't keep mosquitoes away. By morning, I had perfected the 'midnight tent dance' and gained a healthy respect for squirrels with attitude."
                },
                {
                    title: "My Family's Holiday Traditions",
                    excerpt: "In my family, Thanksgiving isn't complete until Uncle Joe tries to carve the turkey with what appears to be a sword from a Renaissance fair. Meanwhile, Aunt Martha insists her green bean casserole is 'experimental' every single year‚Äîthough we've noticed the experiments always seem to involve more onions than beans. And then there's the annual post-dinner debate: pie first or football? Personally, I vote for both while wearing the stretchiest pants I own. These traditions may be quirky, but they're ours!"
                }
            ],
            special: [
                {
                    title: "Graduation Speech to Classmates",
                    excerpt: "Three years ago, we walked through these doors as nervous seventh graders, backpacks nearly as big as we were. Remember trying to find our classrooms, learning each teacher's expectations, and figuring out where we belonged? Look at us now‚Äîconfident young adults ready for high school. We've grown together through science projects, school plays, sports victories, and even through challenging times. As we scatter to different schools next year, let's carry forward the friendships, lessons, and memories we've created here. Congratulations, Class of 2023‚Äîour future begins today!"
                },
                {
                    title: "Best Friend's Birthday Toast",
                    excerpt: "To my best friend Sarah‚Äîthe person who knows my secrets, laughs at my terrible jokes, and was there both when I aced my math test and when I accidentally dyed my hair green. I remember our first day of seventh grade when you shared your lunch with me because I'd forgotten mine. That simple act of kindness began a friendship that's seen us through three years of growth, laughter, and adventures. May your next year be filled with as much joy as you've brought to everyone around you. Happy birthday, my friend!"
                }
            ]
        };

        // Speech vocabulary
        const speechVocabulary = [
            { word: "Introduction", definition: "The opening part of a speech that grabs attention and previews content" },
            { word: "Thesis", definition: "The main idea or argument of a speech" },
            { word: "Transition", definition: "Words or phrases that connect different parts of a speech" },
            { word: "Conclusion", definition: "The final part that summarizes and leaves a lasting impression" },
            { word: "Rhetoric", definition: "The art of effective or persuasive speaking or writing" },
            { word: "Anecdote", definition: "A short personal story used to illustrate a point" },
            { word: "Hook", definition: "An engaging opening that captures audience attention" },
            { word: "Call to Action", definition: "A request for the audience to do something specific" },
            { word: "Ethos", definition: "Appeal based on the speaker's credibility and character" },
            { word: "Pathos", definition: "Appeal to the audience's emotions" },
            { word: "Logos", definition: "Appeal to logic and reason using facts and evidence" },
            { word: "Articulation", definition: "Clear and distinct pronunciation of words" }
        ];

        // Delivery tips by speech type
        const deliveryTips = [
            {
                type: "All Speeches",
                tips: [
                    "Practice aloud multiple times",
                    "Make eye contact with different audience members",
                    "Use natural gestures to emphasize points",
                    "Vary your vocal tone and pace"
                ]
            },
            {
                type: "Persuasive",
                tips: [
                    "Speak with conviction and passion",
                    "Pause before important points",
                    "Use strategic repetition",
                    "Maintain strong posture and confidence"
                ]
            },
            {
                type: "Informative",
                tips: [
                    "Speak clearly and at a moderate pace",
                    "Use visual aids effectively",
                    "Check for audience understanding",
                    "Define technical terms clearly"
                ]
            },
            {
                type: "Entertaining",
                tips: [
                    "Time your jokes and stories carefully",
                    "Use facial expressions to enhance humor",
                    "Engage with audience reactions",
                    "Keep energy level high and positive"
                ]
            },
            {
                type: "Special Occasion",
                tips: [
                    "Speak from the heart with sincerity",
                    "Control emotions while showing feeling",
                    "Make it personal and specific",
                    "Keep it brief and focused"
                ]
            }
        ];

        // Common speech mistakes
        const commonMistakes = [
            "Speaking too fast due to nerves",
            "Reading directly from notes without looking up",
            "Using filler words excessively (um, like, you know)",
            "Poor posture or distracting movements",
            "Not practicing with visual aids beforehand",
            "Going over time limits",
            "Inappropriate content for the audience",
            "Monotone delivery without vocal variety",
            "Starting with an apology or negative comment",
            "Ending abruptly without a strong conclusion"
        ];

        // Speech prompts for practice
        const speechPrompts = {
            persuasive: [
                "Persuade your classmates to volunteer for a community cleanup day.",
                "Convince the school board to add a new elective of your choice.",
                "Argue for or against school uniforms.",
                "Persuade your friends to reduce screen time and spend more time outdoors."
            ],
            informative: [
                "Explain how a popular app or social media platform works.",
                "Inform your class about an interesting animal's unique adaptations.",
                "Explain the steps in a scientific process you've learned.",
                "Teach your classmates how to do something you're good at."
            ],
            entertaining: [
                "Tell a funny story about a family vacation or outing.",
                "Share humorous observations about school life.",
                "Describe your most embarrassing moment in an entertaining way.",
                "Tell a story about trying something for the first time."
            ],
            special: [
                "Give a short graduation speech to your classmates.",
                "Give a birthday toast for a friend or family member.",
                "Accept an imaginary award for something you're proud of.",
                "Welcome new students to your school."
            ]
        };

        // Famous speeches for analysis
        const famousSpeeches = [
            {
                title: "I Have a Dream",
                speaker: "Martin Luther King Jr.",
                excerpt: "I have a dream that one day this nation will rise up and live out the true meaning of its creed: 'We hold these truths to be self-evident, that all men are created equal.'",
                type: "Persuasive",
                techniques: ["Repetition", "Biblical references", "Vivid imagery", "Emotional appeal"]
            },
            {
                title: "The Gettysburg Address",
                speaker: "Abraham Lincoln",
                excerpt: "Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.",
                type: "Special Occasion",
                techniques: ["Parallel structure", "Historical references", "Conciseness", "Memorable phrasing"]
            },
            {
                title: "We Choose to Go to the Moon",
                speaker: "John F. Kennedy",
                excerpt: "We choose to go to the moon in this decade and do the other things, not because they are easy, but because they are hard.",
                type: "Persuasive",
                techniques: ["Contrast", "Repetition", "Visionary language", "Challenge to audience"]
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const speechFact = document.getElementById('speechFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade7EnglishSpeeches');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade7EnglishSpeeches', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade7EnglishSpeeches_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade7EnglishSpeeches_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a speech writing and delivery expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Excellent! You have strong public speaking skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Great work! You understand different speech types well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! Keep practicing your speech skills!";
            } else {
                scoreMessage.textContent = "Keep learning! Public speaking is an essential life skill!";
            }
        }

        // Create speech fact display
        function createSpeechFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'speech-fact';
            
            factDiv.innerHTML = `<strong>Speech Fact:</strong> ${speechFacts[Math.floor(Math.random() * speechFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "speech_basics": "üé§",
                "persuasive_basics": "‚öñÔ∏è",
                "informative_basics": "üìö",
                "entertaining_basics": "üé≠",
                "special_basics": "üèÜ",
                "delivery_basics": "üó£Ô∏è",
                "writing_basics": "üìù",
                "rhetorical_basics": "üí¨",
                "anxiety_basics": "üòä",
                "visual_aids": "üñºÔ∏è",
                "advanced_concepts": "üß†"
            };
            
            let conceptName = "Speech Basics";
            let conceptIcon = "üé§";
            
            if (question.type.includes("speech_basics")) {
                conceptName = "Speech Basics";
                conceptIcon = conceptIcons.speech_basics;
            } else if (question.type.includes("persuasive_basics")) {
                conceptName = "Persuasive Speeches";
                conceptIcon = conceptIcons.persuasive_basics;
            } else if (question.type.includes("informative_basics")) {
                conceptName = "Informative Speeches";
                conceptIcon = conceptIcons.informative_basics;
            } else if (question.type.includes("entertaining_basics")) {
                conceptName = "Entertaining Speeches";
                conceptIcon = conceptIcons.entertaining_basics;
            } else if (question.type.includes("special_basics")) {
                conceptName = "Special Occasion Speeches";
                conceptIcon = conceptIcons.special_basics;
            } else if (question.type.includes("delivery_basics")) {
                conceptName = "Speech Delivery";
                conceptIcon = conceptIcons.delivery_basics;
            } else if (question.type.includes("writing_basics")) {
                conceptName = "Speech Writing";
                conceptIcon = conceptIcons.writing_basics;
            } else if (question.type.includes("rhetorical_basics")) {
                conceptName = "Rhetorical Devices";
                conceptIcon = conceptIcons.rhetorical_basics;
            } else if (question.type.includes("anxiety_basics")) {
                conceptName = "Overcoming Anxiety";
                conceptIcon = conceptIcons.anxiety_basics;
            } else if (question.type.includes("visual_aids")) {
                conceptName = "Visual Aids";
                conceptIcon = conceptIcons.visual_aids;
            } else if (question.type.includes("advanced_concepts")) {
                conceptName = "Advanced Concepts";
                conceptIcon = conceptIcons.advanced_concepts;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("speech_basics")) {
                label.textContent = "Foundations of effective speaking";
            } else if (question.type.includes("persuasive_basics")) {
                label.textContent = "Convincing and influencing audiences";
            } else if (question.type.includes("informative_basics")) {
                label.textContent = "Educating and explaining clearly";
            } else if (question.type.includes("entertaining_basics")) {
                label.textContent = "Amusing and engaging listeners";
            } else if (question.type.includes("special_basics")) {
                label.textContent = "Celebrating important occasions";
            } else if (question.type.includes("delivery_basics")) {
                label.textContent = "Voice, body language, and presentation";
            } else if (question.type.includes("writing_basics")) {
                label.textContent = "Crafting compelling speech content";
            } else if (question.type.includes("rhetorical_basics")) {
                label.textContent = "Persuasive language techniques";
            } else if (question.type.includes("anxiety_basics")) {
                label.textContent = "Building confidence and reducing nerves";
            } else if (question.type.includes("visual_aids")) {
                label.textContent = "Enhancing speeches with visuals";
            } else if (question.type.includes("advanced_concepts")) {
                label.textContent = "Sophisticated speaking concepts";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create speech writing visualization
        function createSpeechVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const randomPersuasive = speechExamples.persuasive[Math.floor(Math.random() * speechExamples.persuasive.length)];
            const randomInformative = speechExamples.informative[Math.floor(Math.random() * speechExamples.informative.length)];
            const randomEntertaining = speechExamples.entertaining[Math.floor(Math.random() * speechExamples.entertaining.length)];
            const randomSpecial = speechExamples.special[Math.floor(Math.random() * speechExamples.special.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-teal);">Speech Writing & Delivery Explorer</h3>
                
                <!-- Stage Visualization -->
                <div class="stage">
                    <div class="stage-light"></div>
                    <div class="stage-light" style="animation-delay: -3s;"></div>
                    <div class="stage-light" style="animation-delay: -6s;"></div>
                    <div class="podium"></div>
                </div>
                
                <div class="speech-structure">
                    <div class="structure-title">Basic Speech Structure</div>
                    
                    <div class="structure-diagram">
                        <div class="structure-part opening">Opening
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Hook ‚Ä¢ Purpose ‚Ä¢ Preview</div>
                        </div>
                        
                        <div style="text-align: center; color: var(--text-secondary); margin: 5px 0;">‚Üì</div>
                        
                        <div class="structure-part body">Body
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Main Points ‚Ä¢ Evidence ‚Ä¢ Examples</div>
                        </div>
                        
                        <div style="text-align: center; color: var(--text-secondary); margin: 5px 0;">‚Üì</div>
                        
                        <div class="structure-part conclusion">Conclusion
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Summary ‚Ä¢ Final Thought ‚Ä¢ Closing</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="showStructureDetails()">
                            Learn Speech Structure
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="practiceSpeechStructure()">
                            Practice Structure
                        </button>
                    </div>
                </div>
                
                <div class="speech-examples">
                    <div class="structure-title">Speech Examples by Type</div>
                    
                    <div class="example-tabs">
                        <div class="example-tab active" onclick="switchExample('persuasive')">Persuasive</div>
                        <div class="example-tab" onclick="switchExample('informative')">Informative</div>
                        <div class="example-tab" onclick="switchExample('entertaining')">Entertaining</div>
                        <div class="example-tab" onclick="switchExample('special')">Special Occasion</div>
                    </div>
                    
                    <div class="example-content" id="exampleContent">
                        <strong>${randomPersuasive.title}</strong><br><br>
                        ${randomPersuasive.excerpt}
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="analyzeExample()">
                            Analyze This Example
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="generateNewExample()">
                            New Example
                        </button>
                    </div>
                </div>
                
                <div class="delivery-tips">
                    <div class="structure-title">Delivery Tips by Speech Type</div>
                    
                    <div class="tips-grid">
                        ${deliveryTips.map((typeTips, idx) => `
                            <div class="tip-box">
                                <div class="tip-title">${typeTips.type}</div>
                                <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                                    ${typeTips.tips.map(tip => `<li>${tip}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="vocabulary-builder">
                    <div class="structure-title">Speech Writing Vocabulary</div>
                    
                    <div class="vocabulary-grid">
                        ${speechVocabulary.slice(0, 6).map((vocab, idx) => `
                            <div class="vocab-word" onclick="showVocabulary('${vocab.word}')">
                                <div class="word-text">${vocab.word}</div>
                                <div class="word-definition">${vocab.definition}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="showAllVocabulary()">
                            View All Vocabulary
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="vocabularyQuiz()">
                            Vocabulary Quiz
                        </button>
                    </div>
                </div>
                
                <table class="compare-table">
                    <thead>
                        <tr>
                            <th>Speech Type</th>
                            <th>Purpose</th>
                            <th>Key Features</th>
                            <th>Example Occasions</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${speechTypes.map((speechType, idx) => `
                            <tr onclick="showSpeechTypeDetails('${speechType.type}')" style="cursor: pointer;">
                                <td style="font-weight: bold; color: ${speechType.color};">${speechType.type}</td>
                                <td>${speechType.purpose}</td>
                                <td>${speechType.features.slice(0, 2).join(', ')}...</td>
                                <td>${speechType.examples.slice(0, 2).join(', ')}...</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="speech-practice">
                    <div class="practice-title">Interactive Speech Practice</div>
                    <div class="microphone"></div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="persuasivePractice()">Persuasive Practice</div>
                        <div class="practice-button" onclick="informativePractice()">Informative Practice</div>
                        <div class="practice-button" onclick="entertainingPractice()">Entertaining Practice</div>
                        <div class="practice-button" onclick="specialPractice()">Special Occasion Practice</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice different types of speech writing and delivery
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Speech Prompts:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Persuasive: Convince classmates to start a recycling program.<br>
                        2. Informative: Explain how social media algorithms work.<br>
                        3. Entertaining: Tell a funny story about a family holiday.<br>
                        4. Special Occasion: Give a graduation speech to your class.
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--primary-blue);">
                    <div style="color: var(--primary-blue); font-weight: bold; margin-bottom: 10px; text-align: center;">The Speech Preparation Process</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>1. Analyze Audience:</strong> Who are they? What do they know?<br>
                        <strong>2. Determine Purpose:</strong> What do you want to achieve?<br>
                        <strong>3. Research & Organize:</strong> Gather information and structure ideas<br>
                        <strong>4. Write & Practice:</strong> Create content and rehearse delivery<br>
                        <strong>5. Deliver & Adapt:</strong> Present confidently and adjust as needed
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-red);">
                    <div class="structure-title">Common Speech Mistakes to Avoid</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Watch out for these frequent errors!
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${commonMistakes.slice(0, 3).map((mistake, idx) => `
                            <div class="tip-box" style="border-left-color: var(--accent-red);" onclick="showCommonMistake(${idx})">
                                <div class="tip-title" style="color: var(--accent-red);">Mistake #${idx + 1}</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">${mistake}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Global functions for interactive practice
        window.showSpeechType = function(type) {
            const speechType = speechTypes.find(e => e.type.toLowerCase() === type);
            if (!speechType) return;
            
            let info = `${speechType.icon} ${speechType.type} Speech\n\n`;
            info += `Definition: ${speechType.definition}\n\n`;
            info += `Purpose: ${speechType.purpose}\n\n`;
            info += `Key Features:\n`;
            speechType.features.forEach(feature => {
                info += `‚Ä¢ ${feature}\n`;
            });
            info += `\nExamples:\n`;
            speechType.examples.forEach(example => {
                info += `‚Ä¢ ${example}\n`;
            });
            info += `\nDelivery Tips:\n`;
            speechType.tips.forEach(tip => {
                info += `‚Ä¢ ${tip}\n`;
            });
            
            alert(info);
        };

        window.showStructureDetails = function() {
            let info = `Basic Speech Structure\n\n`;
            info += `1. Introduction/Opening\n`;
            info += `   ‚Ä¢ Hook: Grab audience attention (question, quote, story, fact)\n`;
            info += `   ‚Ä¢ Purpose: State your topic and goal\n`;
            info += `   ‚Ä¢ Preview: Briefly outline your main points\n\n`;
            info += `2. Body\n`;
            info += `   ‚Ä¢ Main Point 1: Develop your first key idea with evidence\n`;
            info += `   ‚Ä¢ Main Point 2: Develop your second key idea\n`;
            info += `   ‚Ä¢ Main Point 3: Develop your third key idea (if applicable)\n`;
            info += `   ‚Ä¢ Use transitions between points\n\n`;
            info += `3. Conclusion\n`;
            info += `   ‚Ä¢ Summary: Briefly restate main points\n`;
            info += `   ‚Ä¢ Final Thought: Leave audience with memorable idea\n`;
            info += `   ‚Ä¢ Closing: Strong ending statement\n\n`;
            info += `Remember: Speeches are for listening, not reading! Use clear language and repetition.`;
            
            alert(info);
        };

        window.practiceSpeechStructure = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-teal);">Speech Structure Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-blue); font-weight: bold; margin-bottom: 10px;">
                            Topic: "The Benefits of Reading Every Day"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Drag and drop the elements into the correct speech structure order
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${[
                            "Hook: Did you know reading just 20 minutes daily exposes you to 1.8 million words per year?",
                            "Purpose: Today I'll explain why daily reading is essential for success.",
                            "Preview: I'll cover how reading improves vocabulary, reduces stress, and expands knowledge.",
                            "Main Point 1: Reading builds vocabulary and improves communication skills.",
                            "Main Point 2: Reading reduces stress by 68% according to university studies.",
                            "Main Point 3: Reading expands knowledge about different cultures and ideas.",
                            "Summary: Reading improves vocabulary, reduces stress, and expands knowledge.",
                            "Final Thought: Imagine where 20 minutes of daily reading could take you in a year!",
                            "Closing: Start today - open a book and open your mind."
                        ].map((element, idx) => `
                            <div class="structure-part" style="cursor: move; background: var(--dark-surface); color: var(--text-primary);" 
                                 draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)" id="element${idx}">
                                ${element}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="checkSpeechStructureOrder()">
                            Check Order
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showCorrectSpeechStructure()">
                            Show Correct Structure
                        </button>
                    </div>
                    
                    <div id="structureResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        // Drag and drop functions for structure practice
        let draggedElement = null;

        window.dragStart = function(event) {
            draggedElement = event.target;
            event.dataTransfer.setData('text/plain', event.target.id);
            event.target.style.opacity = '0.5';
        };

        window.dragOver = function(event) {
            event.preventDefault();
        };

        window.drop = function(event) {
            event.preventDefault();
            if (event.target.className.includes('structure-part')) {
                const parent = event.target.parentNode;
                const draggedIndex = Array.from(parent.children).indexOf(draggedElement);
                const targetIndex = Array.from(parent.children).indexOf(event.target);
                
                if (draggedIndex < targetIndex) {
                    parent.insertBefore(draggedElement, event.target.nextSibling);
                } else {
                    parent.insertBefore(draggedElement, event.target);
                }
            }
            if (draggedElement) {
                draggedElement.style.opacity = '1';
                draggedElement = null;
            }
        };

        window.checkSpeechStructureOrder = function() {
            const resultDiv = document.getElementById('structureResult');
            if (!resultDiv) return;
            
            const elements = document.querySelectorAll('.structure-part');
            const order = Array.from(elements).map(el => el.textContent);
            
            // Check if order is correct
            const correctOrder = [
                "Hook: Did you know reading just 20 minutes daily exposes you to 1.8 million words per year?",
                "Purpose: Today I'll explain why daily reading is essential for success.",
                "Preview: I'll cover how reading improves vocabulary, reduces stress, and expands knowledge.",
                "Main Point 1: Reading builds vocabulary and improves communication skills.",
                "Main Point 2: Reading reduces stress by 68% according to university studies.",
                "Main Point 3: Reading expands knowledge about different cultures and ideas.",
                "Summary: Reading improves vocabulary, reduces stress, and expands knowledge.",
                "Final Thought: Imagine where 20 minutes of daily reading could take you in a year!",
                "Closing: Start today - open a book and open your mind."
            ];
            
            let isCorrect = true;
            for (let i = 0; i < order.length; i++) {
                if (order[i] !== correctOrder[i]) {
                    isCorrect = false;
                    break;
                }
            }
            
            if (isCorrect) {
                resultDiv.textContent = "‚úì Correct! Perfect speech structure!";
                resultDiv.style.color = 'var(--accent-green)';
            } else {
                resultDiv.textContent = "Not quite right. Remember: Introduction ‚Üí Body ‚Üí Conclusion";
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showCorrectSpeechStructure = function() {
            let info = `Correct Speech Structure:\n\n`;
            info += `1. Introduction\n`;
            info += `   ‚Ä¢ Hook: Grab attention with interesting fact\n`;
            info += `   ‚Ä¢ Purpose: State your topic\n`;
            info += `   ‚Ä¢ Preview: Outline your main points\n\n`;
            info += `2. Body\n`;
            info += `   ‚Ä¢ Develop each main point with evidence\n`;
            info += `   ‚Ä¢ Use clear transitions\n`;
            info += `   ‚Ä¢ Limit to 3-5 main points\n\n`;
            info += `3. Conclusion\n`;
            info += `   ‚Ä¢ Summary: Restate main points\n`;
            info += `   ‚Ä¢ Final Thought: Leave lasting impression\n`;
            info += `   ‚Ä¢ Closing: Strong ending\n\n`;
            info += `Tip: Practice your speech aloud to check timing and flow!`;
            
            alert(info);
        };

        window.switchExample = function(type) {
            const tabs = document.querySelectorAll('.example-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            event.target.classList.add('active');
            
            const exampleContent = document.getElementById('exampleContent');
            const examples = speechExamples[type];
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            
            exampleContent.innerHTML = `<strong>${randomExample.title}</strong><br><br>${randomExample.excerpt}`;
            
            // Store current example for analysis
            window.currentExample = { type, ...randomExample };
        };

        window.analyzeExample = function() {
            if (!window.currentExample) {
                alert("Please select an example first!");
                return;
            }
            
            let info = `Analyzing: ${window.currentExample.title}\n\n`;
            info += `Speech Type: ${window.currentExample.type.charAt(0).toUpperCase() + window.currentExample.type.slice(1)}\n\n`;
            info += `Key Features:\n`;
            
            if (window.currentExample.type === 'persuasive') {
                info += `‚Ä¢ Presents an argument or position\n`;
                info += `‚Ä¢ Uses evidence and reasoning\n`;
                info += `‚Ä¢ Often includes call to action\n`;
                info += `‚Ä¢ Appeals to logic and emotions\n`;
            } else if (window.currentExample.type === 'informative') {
                info += `‚Ä¢ Presents facts and information\n`;
                info += `‚Ä¢ Educates without persuading\n`;
                info += `‚Ä¢ Clear organization\n`;
                info += `‚Ä¢ Defines key terms\n`;
            } else if (window.currentExample.type === 'entertaining') {
                info += `‚Ä¢ Uses humor and storytelling\n`;
                info += `‚Ä¢ Engages audience emotionally\n`;
                info += `‚Ä¢ Lighthearted tone\n`;
                info += `‚Ä¢ Often personal anecdotes\n`;
            } else if (window.currentExample.type === 'special') {
                info += `‚Ä¢ Appropriate for specific occasion\n`;
                info += `‚Ä¢ Emotional and heartfelt\n`;
                info += `‚Ä¢ Celebrates or honors\n`;
                info += `‚Ä¢ Connects with audience personally\n`;
            }
            
            info += `\nWhat makes this a good example?\n`;
            info += `‚Ä¢ Strong opening that establishes purpose\n`;
            info += `‚Ä¢ Clear organization and flow\n`;
            info += `‚Ä¢ Appropriate tone for the speech type\n`;
            info += `‚Ä¢ Language suited to the audience\n`;
            
            alert(info);
        };

        window.generateNewExample = function() {
            const activeTab = document.querySelector('.example-tab.active');
            if (!activeTab) return;
            
            const type = activeTab.textContent.toLowerCase();
            const examples = speechExamples[type];
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            
            const exampleContent = document.getElementById('exampleContent');
            exampleContent.innerHTML = `<strong>${randomExample.title}</strong><br><br>${randomExample.excerpt}`;
            
            // Store current example for analysis
            window.currentExample = { type, ...randomExample };
        };

        window.showVocabulary = function(word) {
            const vocab = speechVocabulary.find(v => v.word === word);
            if (!vocab) return;
            
            let info = `${vocab.word}\n\n`;
            info += `Definition: ${vocab.definition}\n\n`;
            info += `Example in a speech:\n`;
            
            if (word === 'Introduction') {
                info += `"Good morning! Today, I want to talk about something that affects every one of us..."`;
            } else if (word === 'Thesis') {
                info += `"My position is that recycling should be mandatory in all schools."`;
            } else if (word === 'Transition') {
                info += `"Now that we've seen the problem, let's consider some solutions..."`;
            } else if (word === 'Conclusion') {
                info += `"In summary, daily reading improves vocabulary, reduces stress, and expands knowledge."`;
            } else if (word === 'Rhetoric') {
                info += `"Using rhetorical devices like repetition and questions makes speeches more persuasive."`;
            } else if (word === 'Anecdote') {
                info += `"Let me tell you about my first camping trip to illustrate why preparation matters."`;
            } else if (word === 'Hook') {
                info += `"Imagine a world where every student reads 20 minutes daily. What could we achieve?"`;
            } else if (word === 'Call to Action') {
                info += `"I challenge each of you to recycle one more item daily starting tomorrow."`;
            } else if (word === 'Ethos') {
                info += `"As someone who has volunteered at animal shelters for three years, I've seen..."`;
            } else if (word === 'Pathos') {
                info += `"Think of the animals who suffer when we don't recycle properly."`;
            } else if (word === 'Logos') {
                info += `"Studies show that schools with recycling programs reduce waste by 40%."`;
            } else if (word === 'Articulation') {
                info += `"Clear articulation ensures your audience understands every important point."`;
            }
            
            alert(info);
        };

        window.showAllVocabulary = function() {
            let info = `Speech Writing Vocabulary\n\n`;
            
            speechVocabulary.forEach((vocab, index) => {
                info += `${index + 1}. ${vocab.word}: ${vocab.definition}\n`;
            });
            
            info += `\nTip: Try to use these words when discussing or preparing speeches!`;
            
            alert(info);
        };

        window.vocabularyQuiz = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const randomVocab = speechVocabulary[Math.floor(Math.random() * speechVocabulary.length)];
            const wrongOptions = speechVocabulary
                .filter(v => v.word !== randomVocab.word)
                .sort(() => Math.random() - 0.5)
                .slice(0, 3)
                .map(v => v.definition);
            
            const allOptions = [
                randomVocab.definition,
                ...wrongOptions
            ].sort(() => Math.random() - 0.5);
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-indigo);">Speech Vocabulary Quiz</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 10px; font-size: 1.5rem;">
                            ${randomVocab.word}
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            What is the correct definition?
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${allOptions.map((option, idx) => `
                            <div class="option" onclick="checkVocabularyAnswer(this, '${option}', '${randomVocab.definition}')">
                                <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                <div class="option-text">${option}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div id="vocabResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
            
            window.currentVocabWord = randomVocab.word;
        };

        window.checkVocabularyAnswer = function(element, selectedAnswer, correctAnswer) {
            const resultDiv = document.getElementById('vocabResult');
            if (!resultDiv) return;
            
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            if (selectedAnswer === correctAnswer) {
                element.classList.add('correct');
                resultDiv.textContent = `Correct! ${window.currentVocabWord}: ${correctAnswer}`;
                resultDiv.style.color = 'var(--accent-green)';
            } else {
                element.classList.add('incorrect');
                // Find and highlight correct option
                options.forEach(opt => {
                    if (opt.querySelector('.option-text').textContent === correctAnswer) {
                        opt.classList.add('correct');
                    }
                });
                resultDiv.textContent = `Incorrect. ${window.currentVocabWord}: ${correctAnswer}`;
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showSpeechTypeDetails = function(type) {
            const speechType = speechTypes.find(e => e.type === type);
            if (!speechType) return;
            
            let info = `${speechType.icon} ${speechType.type} Speech\n\n`;
            info += `Definition: ${speechType.definition}\n\n`;
            info += `Purpose: ${speechType.purpose}\n\n`;
            info += `Key Features:\n`;
            speechType.features.forEach(feature => {
                info += `‚Ä¢ ${feature}\n`;
            });
            info += `\nExamples:\n`;
            speechType.examples.forEach(example => {
                info += `‚Ä¢ ${example}\n`;
            });
            info += `\nDelivery Tips:\n`;
            speechType.tips.forEach(tip => {
                info += `‚Ä¢ ${tip}\n`;
            });
            info += `\nRemember: ${speechType.type} speeches focus on ${speechType.purpose.toLowerCase()}.`;
            
            alert(info);
        };

        window.persuasivePractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = speechPrompts.persuasive[Math.floor(Math.random() * speechPrompts.persuasive.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--primary-blue);">Persuasive Speech Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px;">
                            Speech Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write the opening paragraph of a persuasive speech based on this prompt.
                        </div>
                    </div>
                    
                    <textarea id="persuasiveWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your persuasive speech opening here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzePersuasiveWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showPersuasiveExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="writingAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzePersuasiveWriting = function() {
            const writing = document.getElementById('persuasiveWriting').value;
            const analysisDiv = document.getElementById('writingAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for clear position
            const positionWords = ['should', 'must', 'ought to', 'need to', 'better to', 'best to', 'I believe', 'I argue'];
            const hasPosition = positionWords.some(word => writing.toLowerCase().includes(word));
            if (hasPosition) {
                analysis += `‚úì Takes a clear position (good for persuasive)<br>`;
            } else {
                analysis += `‚úó Make your position clear (use words like 'should' or 'must')<br>`;
            }
            
            // Check for hook
            if (writing.length > 0 && (writing.includes('?') || writing.includes('!') || writing.includes('Imagine') || writing.includes('Did you know'))) {
                analysis += `‚úì Likely has an attention-grabbing hook<br>`;
            } else {
                analysis += `‚úó Start with a hook (question, surprising fact, vivid image)<br>`;
            }
            
            // Check for persuasive appeals
            const emotionalWords = ['imagine', 'feel', 'worry', 'hope', 'dream', 'care', 'important', 'crucial'];
            const logicalWords = ['because', 'since', 'therefore', 'research shows', 'studies indicate', 'evidence'];
            const hasEmotional = emotionalWords.some(word => writing.toLowerCase().includes(word));
            const hasLogical = logicalWords.some(word => writing.toLowerCase().includes(word));
            
            if (hasEmotional || hasLogical) {
                if (hasEmotional && hasLogical) {
                    analysis += `‚úì Uses both emotional and logical appeals (excellent!)<br>`;
                } else if (hasEmotional) {
                    analysis += `‚úì Uses emotional appeal (pathos)<br>`;
                    analysis += `‚Ä¢ Consider adding logical evidence too<br>`;
                } else if (hasLogical) {
                    analysis += `‚úì Uses logical appeal (logos)<br>`;
                    analysis += `‚Ä¢ Consider adding emotional connection too<br>`;
                }
            } else {
                analysis += `‚úó Add persuasive appeals (emotional or logical evidence)<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ State your position clearly in the first paragraph<br>`;
            analysis += `‚Ä¢ Use a strong hook to grab attention<br>`;
            analysis += `‚Ä¢ Include at least one piece of evidence<br>`;
            analysis += `‚Ä¢ Consider your audience's values and concerns<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showPersuasiveExample = function() {
            const example = speechExamples.persuasive[Math.floor(Math.random() * speechExamples.persuasive.length)];
            alert(`Example Persuasive Opening:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Takes a clear position\n‚Ä¢ Uses evidence and reasoning\n‚Ä¢ Appeals to audience values\n‚Ä¢ Sets up a persuasive argument`);
        };

        window.informativePractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = speechPrompts.informative[Math.floor(Math.random() * speechPrompts.informative.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-purple);">Informative Speech Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 10px;">
                            Speech Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write an informative speech opening based on this prompt. Present facts clearly.
                        </div>
                    </div>
                    
                    <textarea id="informativeWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your informative speech opening here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzeInformativeWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showInformativeExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="informativeAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzeInformativeWriting = function() {
            const writing = document.getElementById('informativeWriting').value;
            const analysisDiv = document.getElementById('informativeAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for factual language
            const factualIndicators = ['according to', 'research shows', 'studies indicate', 'statistics', 'facts', 'data', 'percent', 'scientists'];
            const hasFactual = factualIndicators.some(word => writing.toLowerCase().includes(word));
            if (hasFactual) {
                analysis += `‚úì Uses factual language (good for informative)<br>`;
            } else {
                analysis += `‚Ä¢ Consider adding factual information or statistics<br>`;
            }
            
            // Check for opinion words
            const opinionWords = ['I think', 'I believe', 'in my opinion', 'I feel', 'should', 'must', 'ought to'];
            const hasOpinion = opinionWords.some(word => writing.toLowerCase().includes(word));
            if (hasOpinion) {
                analysis += `‚úó Avoid personal opinions in informative writing<br>`;
            } else {
                analysis += `‚úì Maintains objective tone (good for informative)<br>`;
            }
            
            // Check for clear topic introduction
            if (writing.length > 30 && writing.split('.').length > 1) {
                analysis += `‚úì Likely introduces topic clearly<br>`;
            } else {
                analysis += `‚Ä¢ Make sure your opening clearly states what you'll explain<br>`;
            }
            
            // Check for definitions
            const definitionWords = ['means', 'refers to', 'is defined as', 'called', 'known as'];
            const hasDefinition = definitionWords.some(word => writing.toLowerCase().includes(word));
            if (hasDefinition) {
                analysis += `‚úì Defines key terms (excellent for informative)<br>`;
            } else {
                analysis += `‚Ä¢ Consider defining any specialized terms for your audience<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ Start with an interesting fact or question about your topic<br>`;
            analysis += `‚Ä¢ Clearly state what you'll explain<br>`;
            analysis += `‚Ä¢ Use facts and evidence to support information<br>`;
            analysis += `‚Ä¢ Define any terms your audience might not know<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showInformativeExample = function() {
            const example = speechExamples.informative[Math.floor(Math.random() * speechExamples.informative.length)];
            alert(`Example Informative Opening:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Presents factual information\n‚Ä¢ Uses clear explanations\n‚Ä¢ Maintains objective tone\n‚Ä¢ Educates without persuading`);
        };

        window.entertainingPractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = speechPrompts.entertaining[Math.floor(Math.random() * speechPrompts.entertaining.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-orange);">Entertaining Speech Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-amber); font-weight: bold; margin-bottom: 10px;">
                            Speech Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write an entertaining speech opening based on this prompt. Use humor and engaging storytelling.
                        </div>
                    </div>
                    
                    <textarea id="entertainingWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your entertaining speech opening here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzeEntertainingWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showEntertainingExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="entertainingAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzeEntertainingWriting = function() {
            const writing = document.getElementById('entertainingWriting').value;
            const analysisDiv = document.getElementById('entertainingAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for humor elements
            const humorIndicators = ['!', 'funny', 'hilarious', 'laugh', 'joke', 'comical', 'amusing', 'humorous'];
            const hasHumor = humorIndicators.some(word => {
                const lowerWriting = writing.toLowerCase();
                return lowerWriting.includes(word) || (word === '!' && writing.includes('!'));
            });
            if (hasHumor) {
                analysis += `‚úì Includes humorous elements (good for entertaining)<br>`;
            } else {
                analysis += `‚Ä¢ Consider adding humor or lighthearted elements<br>`;
            }
            
            // Check for storytelling elements
            const storyWords = ['story', 'tale', 'remember when', 'once', 'happened', 'experience', 'adventure'];
            const hasStory = storyWords.some(word => writing.toLowerCase().includes(word));
            if (hasStory) {
                analysis += `‚úì Uses storytelling (excellent for entertaining)<br>`;
            } else {
                analysis += `‚Ä¢ Consider telling a brief story or anecdote<br>`;
            }
            
            // Check for personal connection
            const personalWords = ['I', 'me', 'my', 'we', 'our'];
            const hasPersonal = personalWords.some(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'i');
                return regex.test(writing);
            });
            if (hasPersonal) {
                analysis += `‚úì Uses personal perspective (good for connection)<br>`;
            } else {
                analysis += `‚Ä¢ Consider using first-person for personal connection<br>`;
            }
            
            // Check for engaging language
            const engagingWords = ['imagine', 'picture this', 'you know', 'guess what'];
            const hasEngaging = engagingWords.some(word => writing.toLowerCase().includes(word));
            if (hasEngaging) {
                analysis += `‚úì Uses engaging language to involve audience<br>`;
            } else {
                analysis += `‚Ä¢ Try phrases like 'imagine' or 'picture this' to engage listeners<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ Start with an engaging story or funny observation<br>`;
            analysis += `‚Ä¢ Use first-person for personal connection<br>`;
            analysis += `‚Ä¢ Include humorous elements appropriate for your audience<br>`;
            analysis += `‚Ä¢ Keep tone lighthearted and positive<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showEntertainingExample = function() {
            const example = speechExamples.entertaining[Math.floor(Math.random() * speechExamples.entertaining.length)];
            alert(`Example Entertaining Opening:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Uses humor and storytelling\n‚Ä¢ Engages the audience emotionally\n‚Ä¢ Has lighthearted tone\n‚Ä¢ Creates personal connection`);
        };

        window.specialPractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = speechPrompts.special[Math.floor(Math.random() * speechPrompts.special.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-green);">Special Occasion Speech Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px;">
                            Speech Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write a special occasion speech opening based on this prompt. Be heartfelt and appropriate for the occasion.
                        </div>
                    </div>
                    
                    <textarea id="specialWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your special occasion speech opening here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzeSpecialWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showSpecialExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="specialAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzeSpecialWriting = function() {
            const writing = document.getElementById('specialWriting').value;
            const analysisDiv = document.getElementById('specialAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for appropriate tone
            const formalGreetings = ['honored', 'pleased', 'delighted', 'proud', 'thank you', 'welcome', 'congratulations'];
            const hasFormalGreeting = formalGreetings.some(word => writing.toLowerCase().includes(word));
            if (hasFormalGreeting) {
                analysis += `‚úì Uses appropriate formal tone for special occasion<br>`;
            } else {
                analysis += `‚Ä¢ Consider starting with a formal greeting appropriate for the occasion<br>`;
            }
            
            // Check for personal connection
            const personalWords = ['we', 'our', 'us', 'together', 'shared'];
            const hasPersonal = personalWords.some(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'i');
                return regex.test(writing);
            });
            if (hasPersonal) {
                analysis += `‚úì Creates sense of shared experience (good for special occasions)<br>`;
            } else {
                analysis += `‚Ä¢ Use 'we' and 'our' to create shared experience<br>`;
            }
            
            // Check for emotional resonance
            const emotionalWords = ['happy', 'proud', 'excited', 'honored', 'grateful', 'thankful', 'memorable', 'special'];
            const hasEmotional = emotionalWords.some(word => writing.toLowerCase().includes(word));
            if (hasEmotional) {
                analysis += `‚úì Conveys appropriate emotions for the occasion<br>`;
            } else {
                analysis += `‚Ä¢ Include words that convey appropriate emotions<br>`;
            }
            
            // Check for brevity
            const wordCount = writing.split(/\s+/).length;
            if (wordCount <= 100) {
                analysis += `‚úì Appropriate length for opening (special occasions should be brief)<br>`;
            } else {
                analysis += `‚Ä¢ Special occasion speeches should be brief - consider shortening<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ Start with appropriate greeting for the occasion<br>`;
            analysis += `‚Ä¢ Acknowledge why the occasion is special<br>`;
            analysis += `‚Ä¢ Use 'we' language for shared experience<br>`;
            analysis += `‚Ä¢ Keep it heartfelt but not too long<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showSpecialExample = function() {
            const example = speechExamples.special[Math.floor(Math.random() * speechExamples.special.length)];
            alert(`Example Special Occasion Opening:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Is appropriate for the specific occasion\n‚Ä¢ Creates emotional resonance\n‚Ä¢ Uses personal and heartfelt language\n‚Ä¢ Celebrates or honors appropriately`);
        };

        window.showCommonMistake = function(index) {
            const mistake = commonMistakes[index];
            if (!mistake) return;
            
            let info = `Common Speech Mistake #${index + 1}\n\n`;
            info += `${mistake}\n\n`;
            info += `How to fix it:\n`;
            
            if (index === 0) {
                info += `‚Ä¢ Practice with a timer and consciously slow down\n`;
                info += `‚Ä¢ Add intentional pauses between points\n`;
                info += `‚Ä¢ Remember: audiences need time to process information\n`;
                info += `‚Ä¢ Use breathing to control pace\n`;
            } else if (index === 1) {
                info += `‚Ä¢ Use notes with key words only, not full sentences\n`;
                info += `‚Ä¢ Practice until you can speak from key points\n`;
                info += `‚Ä¢ Make eye contact with different audience members\n`;
                info += `‚Ä¢ Use the 80/20 rule: 80% eye contact, 20% glancing at notes\n`;
            } else if (index === 2) {
                info += `‚Ä¢ Record yourself and count filler words\n`;
                info += `‚Ä¢ Practice pausing instead of saying 'um'\n`;
                info += `‚Ä¢ Use silent pauses - they feel longer to you than to audience\n`;
                info += `‚Ä¢ Have a friend signal when you use filler words\n`;
            }
            
            alert(info);
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            speechFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            speechFact.appendChild(createSpeechFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createSpeechVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
