<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Science - Genetics & Variation | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Genetics Theme */
        :root {
            --primary-purple: #9C27B0;      /* DNA/Genes */
            --primary-green: #4CAF50;       /* Inheritance */
            --primary-blue: #2196F3;        /* Variation */
            --primary-orange: #FF9800;      /* Evolution */
            --accent-yellow: #FFC107;       /* Dominant traits */
            --accent-red: #F44336;          /* Recessive traits */
            --accent-teal: #009688;         /* Mutations */
            --accent-pink: #E91E63;         /* Chromosomes */
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --dna-color: rgba(156, 39, 176, 0.8);
            --gene-color: rgba(76, 175, 80, 0.8);
            --chromosome-color: rgba(233, 30, 99, 0.8);
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(156, 39, 176, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(33, 150, 243, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-green), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-purple);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-primary:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-secondary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-accent {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-accent:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-orange {
            background: var(--primary-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-orange:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-purple);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Genetics Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .topics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.dna-genes {
            border-color: var(--primary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .topic-card.inheritance {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .topic-card.variation {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.dna-genes .topic-title {
            color: var(--primary-purple);
        }

        .topic-card.inheritance .topic-title {
            color: var(--primary-green);
        }

        .topic-card.variation .topic-title {
            color: var(--primary-blue);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-purple), var(--primary-green), var(--primary-blue));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
        }

        .genetics-fact {
            background: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-green);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            font-family: 'Courier New', monospace;
        }

        .option:hover {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-purple);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: #4CAF50;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: #4CAF50;
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: #4CAF50;
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
            font-family: 'Courier New', monospace;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* DNA Explorer */
        .dna-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
            position: relative;
        }

        .diagram-title {
            color: var(--accent-teal);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .dna-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        /* DNA Structure */
        .dna-strand {
            position: absolute;
            width: 2px;
            background: var(--dna-color);
            transform-origin: 0 0;
        }

        .dna-base {
            position: absolute;
            width: 30px;
            height: 2px;
            background: var(--accent-yellow);
            transform-origin: 0 0;
        }

        .base-pair {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .dna-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        /* Punnett Square */
        .punnett-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .punnett-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 1px;
            padding: 10px;
        }

        .punnett-cell {
            background: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--dark-border);
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .punnett-header {
            color: var(--accent-yellow);
            font-size: 1.2rem;
        }

        .punnett-genotype {
            color: var(--text-primary);
            font-size: 1rem;
        }

        .punnett-dominant {
            background: rgba(255, 193, 7, 0.1);
            color: var(--accent-yellow);
        }

        .punnett-recessive {
            background: rgba(244, 67, 54, 0.1);
            color: var(--accent-red);
        }

        /* Chromosome Explorer */
        .chromosome-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-pink);
        }

        .chromosome-container {
            width: 100%;
            height: 150px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        .chromosome {
            position: relative;
            width: 40px;
            height: 80px;
            background: linear-gradient(to bottom, var(--chromosome-color), #7B1FA2);
            border-radius: 20px;
        }

        .chromosome-arm {
            position: absolute;
            width: 100%;
            height: 50%;
            background: inherit;
        }

        .chromosome-centromere {
            position: absolute;
            width: 120%;
            height: 10px;
            background: var(--accent-yellow);
            top: 45%;
            left: -10%;
            border-radius: 5px;
        }

        .chromosome-gene {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--primary-green);
            border-radius: 50%;
        }

        /* Traits Explorer */
        .traits-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .traits-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .traits-container {
                grid-template-columns: 1fr;
            }
        }

        .trait-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .trait-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .trait-card.dominant {
            border-left-color: var(--accent-yellow);
        }

        .trait-card.recessive {
            border-left-color: var(--accent-red);
        }

        .trait-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .trait-card.dominant .trait-title {
            color: var(--accent-yellow);
        }

        .trait-card.recessive .trait-title {
            color: var(--accent-red);
        }

        .trait-genotype {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px;
            border-radius: 5px;
        }

        .trait-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Pedigree Chart */
        .pedigree-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-orange);
        }

        .pedigree-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pedigree-symbol {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .pedigree-male {
            border: 3px solid #2196F3;
            background: rgba(33, 150, 243, 0.1);
        }

        .pedigree-female {
            border: 3px solid #E91E63;
            background: rgba(233, 30, 99, 0.1);
        }

        .pedigree-affected {
            background: rgba(244, 67, 54, 0.3);
        }

        .pedigree-carrier {
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 5px,
                rgba(244, 67, 54, 0.2) 5px,
                rgba(244, 67, 54, 0.2) 10px
            );
        }

        /* Mutation Simulator */
        .mutation-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .mutation-container {
            width: 100%;
            height: 150px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            padding: 20px;
        }

        .dna-sequence {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 1rem;
            letter-spacing: 2px;
            margin: 10px 0;
        }

        .dna-base-char {
            display: inline-block;
            width: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .dna-base-a {
            color: #4CAF50;
        }

        .dna-base-t {
            color: #F44336;
        }

        .dna-base-c {
            color: #2196F3;
        }

        .dna-base-g {
            color: #FFC107;
        }

        .mutated {
            background: rgba(0, 188, 212, 0.3);
            border-radius: 3px;
            animation: pulseMutation 1s ease;
        }

        /* Genetic Cross Simulator */
        .cross-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        .cross-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .cross-input {
            width: 120px;
            padding: 8px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
        }

        .cross-results {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        /* Variation Explorer */
        .variation-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .variation-chart {
            width: 100%;
            height: 150px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 20px;
        }

        .variation-bar {
            width: 30px;
            background: var(--primary-blue);
            transition: height 0.5s ease;
            position: relative;
        }

        .variation-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        /* Practice Problems */
        .practice-problems {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .problem-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .problem-list {
                grid-template-columns: 1fr;
            }
        }

        .problem-item {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .problem-item:hover {
            background: rgba(244, 67, 54, 0.1);
            transform: translateX(5px);
        }

        .problem-number {
            font-weight: bold;
            color: var(--accent-red);
            min-width: 25px;
        }

        .problem-text {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-green), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-green), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes dnaRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .dna-rotate {
            animation: dnaRotate 20s linear infinite;
        }

        @keyframes pulseMutation {
            0%, 100% { background-color: rgba(0, 188, 212, 0.3); }
            50% { background-color: rgba(0, 188, 212, 0.6); }
        }

        @keyframes chromosomePair {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(10px); }
        }

        .chromosome-pair {
            animation: chromosomePair 3s ease-in-out infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .traits-container {
                grid-template-columns: 1fr;
            }
            
            .problem-list {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        /* Genetics Notation */
        .gene-symbol {
            font-family: 'Courier New', monospace;
            color: var(--primary-green);
            font-weight: bold;
        }

        .genotype {
            color: var(--accent-yellow);
            font-weight: bold;
        }

        .phenotype {
            color: var(--primary-blue);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Science: Genetics & Variation</h1>
            <p class="welcome-subtitle">Unlock the code of life! Explore how traits are inherited, understand genetic variation, and discover the principles that govern heredity and evolution in all living organisms.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸ§¬ðŸ”¬</span>
                <span class="topic-name">The Science of Heredity & Diversity</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card dna-genes" onclick="showTopicDetails('dna-genes')">
                    <div class="topic-icon">ðŸ§¬</div>
                    <h3 class="topic-title">DNA & Genes</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">The molecular basis of inheritance</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>DNA structure & replication</li>
                            <li>Genes and chromosomes</li>
                            <li>Genetic code</li>
                            <li>Protein synthesis</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card inheritance" onclick="showTopicDetails('inheritance')">
                    <div class="topic-icon">ðŸ“Š</div>
                    <h3 class="topic-title">Inheritance Patterns</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">How traits are passed from parents to offspring</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Mendelian genetics</li>
                            <li>Punnett squares</li>
                            <li>Dominant & recessive traits</li>
                            <li>Pedigree analysis</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card variation" onclick="showTopicDetails('variation')">
                    <div class="topic-icon">ðŸŒˆ</div>
                    <h3 class="topic-title">Variation & Evolution</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Sources and importance of genetic diversity</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Sources of variation</li>
                            <li>Mutations & their effects</li>
                            <li>Natural selection</li>
                            <li>Adaptation & speciation</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>ðŸ§¬ Begin Genetics Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="geneticsFact"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="optionsContainer" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <div class="dna-explorer">
                        <div class="diagram-title">DNA Structure Explorer</div>
                        <div class="dna-container" id="dnaContainer">
                            <!-- DNA structure will be added by JavaScript -->
                        </div>
                        <div class="dna-controls">
                            <button class="btn btn-small btn-primary" onclick="showDNAStructure()">Show DNA</button>
                            <button class="btn btn-small btn-secondary" onclick="showBasePairs()">Base Pairs</button>
                            <button class="btn btn-small btn-accent" onclick="showReplication()">Replication</button>
                            <button class="btn btn-small btn-orange" onclick="explainDNA()">Explain DNA</button>
                        </div>
                    </div>
                    
                    <div class="punnett-explorer">
                        <div class="diagram-title">Punnett Square Simulator</div>
                        <div class="punnett-container" id="punnettContainer">
                            <!-- Punnett square will be added by JavaScript -->
                        </div>
                        <div class="dna-controls">
                            <button class="btn btn-small btn-secondary" onclick="createMonohybridCross()">Monohybrid Cross</button>
                            <button class="btn btn-small btn-primary" onclick="createDihybridCross()">Dihybrid Cross</button>
                            <button class="btn btn-small btn-accent" onclick="calculateProbabilities()">Calculate Probability</button>
                            <button class="btn btn-small btn-orange" onclick="explainPunnett()">Explain Punnett Square</button>
                        </div>
                    </div>
                    
                    <div class="chromosome-explorer">
                        <div class="diagram-title">Chromosome & Gene Explorer</div>
                        <div class="chromosome-container" id="chromosomeContainer">
                            <!-- Chromosomes will be added by JavaScript -->
                        </div>
                        <div class="dna-controls">
                            <button class="btn btn-small" style="background: var(--accent-pink);" onclick="showChromosomes()">Show Chromosomes</button>
                            <button class="btn btn-small btn-primary" onclick="showGenes()">Show Genes</button>
                            <button class="btn btn-small btn-accent" onclick="showHomologousPair()">Homologous Pair</button>
                            <button class="btn btn-small btn-secondary" onclick="explainChromosomes()">Explain</button>
                        </div>
                    </div>
                    
                    <div class="traits-explorer">
                        <div class="diagram-title">Genetic Traits Explorer</div>
                        <div class="traits-container">
                            <div class="trait-card dominant" onclick="showTraitDetail('eye-color')">
                                <div class="trait-title">Eye Color</div>
                                <div class="trait-genotype">Dominant: Brown (B)<br>Recessive: Blue (b)</div>
                                <div class="trait-description">Brown eyes are dominant over blue. Genotype BB or Bb gives brown eyes, bb gives blue eyes.</div>
                            </div>
                            <div class="trait-card recessive" onclick="showTraitDetail('widows-peak')">
                                <div class="trait-title">Widow's Peak</div>
                                <div class="trait-genotype">Dominant: Present (W)<br>Recessive: Absent (w)</div>
                                <div class="trait-description">V-shaped hairline is dominant over straight hairline. About 75% of people have widow's peak.</div>
                            </div>
                            <div class="trait-card dominant" onclick="showTraitDetail('earlobe')">
                                <div class="trait-title">Earlobe Attachment</div>
                                <div class="trait-genotype">Dominant: Free (F)<br>Recessive: Attached (f)</div>
                                <div class="trait-description">Free earlobes (hanging) are dominant over attached earlobes. A classic Mendelian trait.</div>
                            </div>
                            <div class="trait-card recessive" onclick="showTraitDetail('tongue-roll')">
                                <div class="trait-title">Tongue Rolling</div>
                                <div class="trait-genotype">Dominant: Can roll (R)<br>Recessive: Cannot roll (r)</div>
                                <div class="trait-description">Ability to roll tongue is dominant. About 65-81% of people can roll their tongues.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pedigree-explorer">
                        <div class="diagram-title">Pedigree Chart Analysis</div>
                        <div class="pedigree-container" id="pedigreeContainer">
                            <!-- Pedigree chart will be added by JavaScript -->
                        </div>
                        <div class="dna-controls">
                            <button class="btn btn-small btn-orange" onclick="createPedigree()">Show Pedigree</button>
                            <button class="btn btn-small btn-primary" onclick="analyzeInheritance()">Analyze Inheritance</button>
                            <button class="btn btn-small btn-accent" onclick="identifyCarriers()">Identify Carriers</button>
                            <button class="btn btn-small btn-secondary" onclick="explainPedigree()">Explain Symbols</button>
                        </div>
                    </div>
                    
                    <div class="mutation-explorer">
                        <div class="diagram-title">Mutation Simulator</div>
                        <div class="mutation-container" id="mutationContainer">
                            <div class="dna-sequence" id="originalSequence">
                                Original: <span id="originalDNA"></span>
                            </div>
                            <div class="dna-sequence" id="mutatedSequence">
                                Mutated: <span id="mutatedDNA"></span>
                            </div>
                        </div>
                        <div class="dna-controls">
                            <button class="btn btn-small" style="background: var(--accent-teal);" onclick="simulatePointMutation()">Point Mutation</button>
                            <button class="btn btn-small btn-primary" onclick="simulateInsertion()">Insertion</button>
                            <button class="btn btn-small btn-accent" onclick="simulateDeletion()">Deletion</button>
                            <button class="btn btn-small btn-secondary" onclick="explainMutations()">Explain Mutations</button>
                        </div>
                    </div>
                    
                    <div class="cross-explorer">
                        <div class="diagram-title">Genetic Cross Calculator</div>
                        <div class="cross-controls">
                            <input type="text" class="cross-input" id="parent1Genotype" placeholder="Parent 1 (e.g., Aa)" value="Aa">
                            <input type="text" class="cross-input" id="parent2Genotype" placeholder="Parent 2 (e.g., aa)" value="aa">
                            <button class="btn btn-small btn-primary" onclick="performCross()">Perform Cross</button>
                        </div>
                        <div class="cross-results" id="crossResults">
                            Enter parent genotypes and click "Perform Cross"
                        </div>
                    </div>
                    
                    <div class="variation-explorer">
                        <div class="diagram-title">Genetic Variation Chart</div>
                        <div class="variation-chart" id="variationChart">
                            <!-- Variation bars will be added by JavaScript -->
                        </div>
                        <div class="dna-controls">
                            <button class="btn btn-small btn-accent" onclick="showHeightVariation()">Height Variation</button>
                            <button class="btn btn-small btn-primary" onclick="showSkinToneVariation()">Skin Tone</button>
                            <button class="btn btn-small btn-secondary" onclick="showBloodTypeVariation()">Blood Types</button>
                            <button class="btn btn-small btn-orange" onclick="explainVariation()">Explain Variation</button>
                        </div>
                    </div>
                    
                    <div class="practice-problems">
                        <div class="diagram-title">Genetics Practice Problems</div>
                        <div class="problem-list">
                            <div class="problem-item" onclick="solveProblem(1)">
                                <div class="problem-number">1</div>
                                <div class="problem-text">If B = brown eyes, b = blue, what genotype gives blue eyes?</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(2)">
                                <div class="problem-number">2</div>
                                <div class="problem-text">Cross: Aa Ã— Aa. What % offspring show dominant trait?</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(3)">
                                <div class="problem-number">3</div>
                                <div class="problem-text">DNA base pairing: A pairs with __, C pairs with __</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(4)">
                                <div class="problem-number">4</div>
                                <div class="problem-text">Define homozygous and heterozygous</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Genetics Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent Learning</div>
                    </div>
                </div>
                
                <div style="margin: 25px 0; padding: 15px; background: rgba(156, 39, 176, 0.1); border-radius: 10px;">
                    <h3 style="color: var(--primary-purple); margin-bottom: 10px;">Genetics Skills Mastered</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem;">
                        You've built strong foundations in DNA structure, inheritance patterns, and genetic variation. 
                        These concepts are fundamental to understanding heredity, evolution, and modern biotechnology!
                    </p>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Study Again</button>
                    <button class="btn btn-accent" id="viewTopics">Other Topics</button>
                    <button class="btn btn-secondary" onclick="showGeneticsChallenge()">Genetics Challenge</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Genetics & Variation
        const questions = [
            {
                question: "What is DNA?",
                options: ["Genetic material that carries hereditary information", "A type of protein", "A carbohydrate molecule", "A type of lipid"],
                answer: "A",
                explanation: "DNA (Deoxyribonucleic Acid) is the molecule that carries genetic instructions for growth, development, functioning, and reproduction of all living organisms."
            },
            {
                question: "What are the four bases in DNA?",
                options: ["Adenine, Thymine, Cytosine, Guanine", "Adenine, Uracil, Cytosine, Guanine", "Amino acids", "Sugar and phosphate"],
                answer: "A",
                explanation: "DNA contains four nitrogenous bases: Adenine (A), Thymine (T), Cytosine (C), and Guanine (G)."
            },
            {
                question: "How do DNA bases pair?",
                options: ["A with T, C with G", "A with C, T with G", "A with G, C with T", "Random pairing"],
                answer: "A",
                explanation: "DNA bases pair specifically: Adenine (A) always pairs with Thymine (T), and Cytosine (C) always pairs with Guanine (G)."
            },
            {
                question: "What is a gene?",
                options: ["A segment of DNA that codes for a protein", "A type of chromosome", "A complete set of DNA", "A reproductive cell"],
                answer: "A",
                explanation: "A gene is a specific sequence of DNA that contains the instructions to make a protein or functional RNA molecule."
            },
            {
                question: "What is an allele?",
                options: ["Different versions of the same gene", "A type of chromosome", "A DNA base pair", "A protein molecule"],
                answer: "A",
                explanation: "Alleles are different forms of the same gene. For example, the gene for eye color has alleles for brown, blue, green, etc."
            },
            {
                question: "What does 'homozygous' mean?",
                options: ["Having two identical alleles for a gene", "Having two different alleles for a gene", "Having no alleles for a gene", "Having extra chromosomes"],
                answer: "A",
                explanation: "Homozygous means an individual has two identical alleles for a particular gene (e.g., AA or aa)."
            },
            {
                question: "What does 'heterozygous' mean?",
                options: ["Having two different alleles for a gene", "Having two identical alleles for a gene", "Having only one allele for a gene", "Having no alleles for a gene"],
                answer: "A",
                explanation: "Heterozygous means an individual has two different alleles for a particular gene (e.g., Aa)."
            },
            {
                question: "What is genotype?",
                options: ["The genetic makeup of an organism", "The physical appearance of an organism", "The number of chromosomes", "The type of DNA"],
                answer: "A",
                explanation: "Genotype refers to the genetic constitution of an organism - the specific alleles it carries for particular genes."
            },
            {
                question: "What is phenotype?",
                options: ["The observable characteristics of an organism", "The genetic makeup of an organism", "The type of chromosomes", "The DNA sequence"],
                answer: "A",
                explanation: "Phenotype refers to the observable physical and biochemical characteristics of an organism, determined by both genotype and environment."
            },
            {
                question: "What is a dominant allele?",
                options: ["An allele that expresses its trait even when only one copy is present", "An allele that only expresses its trait when two copies are present", "An allele that never expresses its trait", "An allele that changes frequently"],
                answer: "A",
                explanation: "A dominant allele will express its trait even when paired with a different (recessive) allele. Only one copy is needed for the trait to appear."
            },
            {
                question: "What is a recessive allele?",
                options: ["An allele that only expresses its trait when two copies are present", "An allele that always expresses its trait", "An allele that never expresses its trait", "An allele that changes other alleles"],
                answer: "A",
                explanation: "A recessive allele only expresses its trait when two copies are present (homozygous recessive). It is masked by dominant alleles."
            },
            {
                question: "Who is known as the 'Father of Genetics'?",
                options: ["Gregor Mendel", "Charles Darwin", "James Watson", "Rosalind Franklin"],
                answer: "A",
                explanation: "Gregor Mendel, an Austrian monk, conducted experiments with pea plants in the 1860s that established the fundamental laws of inheritance."
            },
            {
                question: "What is a Punnett square used for?",
                options: ["Predicting the probability of offspring genotypes", "Measuring DNA length", "Counting chromosomes", "Identifying mutations"],
                answer: "A",
                explanation: "A Punnett square is a diagram used to predict the genotypes of offspring from a genetic cross between two parents."
            },
            {
                question: "In humans, how many chromosomes are in a normal body cell?",
                options: ["46", "23", "48", "24"],
                answer: "A",
                explanation: "Human body cells (somatic cells) contain 46 chromosomes - 23 pairs, with one chromosome from each pair inherited from each parent."
            },
            {
                question: "What is a mutation?",
                options: ["A change in the DNA sequence", "A type of chromosome", "A different phenotype", "A type of protein"],
                answer: "A",
                explanation: "A mutation is any change in the DNA sequence of an organism. Mutations can be beneficial, harmful, or have no effect."
            },
            {
                question: "What is natural selection?",
                options: ["Process where organisms better adapted to environment survive and reproduce", "Selection of traits by humans", "Random changes in DNA", "Exchange of genetic material"],
                answer: "A",
                explanation: "Natural selection is the process where organisms with traits better suited to their environment are more likely to survive and reproduce, passing those traits to offspring."
            },
            {
                question: "What is genetic variation?",
                options: ["Differences in DNA sequences among individuals", "All genes being identical", "Having extra chromosomes", "Lack of mutations"],
                answer: "A",
                explanation: "Genetic variation refers to differences in the DNA sequences among individuals in a population. It's essential for evolution and survival."
            },
            {
                question: "What are chromosomes?",
                options: ["Thread-like structures that carry genetic information", "Types of proteins", "DNA bases", "Cell organelles"],
                answer: "A",
                explanation: "Chromosomes are thread-like structures made of DNA and proteins that carry genetic information in the form of genes."
            },
            {
                question: "What is meiosis?",
                options: ["Cell division that produces gametes (sex cells)", "Cell division for growth and repair", "DNA replication process", "Protein synthesis"],
                answer: "A",
                explanation: "Meiosis is a type of cell division that produces gametes (sperm and egg cells) with half the normal number of chromosomes."
            },
            {
                question: "What is mitosis?",
                options: ["Cell division for growth and repair", "Cell division that produces gametes", "DNA replication", "Protein synthesis"],
                answer: "A",
                explanation: "Mitosis is cell division that produces two identical daughter cells from a single parent cell, used for growth, repair, and asexual reproduction."
            },
            {
                question: "What is a pedigree chart?",
                options: ["A diagram showing inheritance patterns in a family", "A Punnett square", "A DNA sequence", "A chromosome map"],
                answer: "A",
                explanation: "A pedigree chart is a diagram that shows the occurrence and appearance of phenotypes of a particular gene or genes across generations of a family."
            },
            {
                question: "What is evolution?",
                options: ["Change in heritable characteristics of populations over generations", "Development of an individual organism", "Change in DNA during replication", "Mutation in a single gene"],
                answer: "A",
                explanation: "Evolution is the process of change in the heritable characteristics of biological populations over successive generations."
            },
            {
                question: "What is adaptation?",
                options: ["A trait that increases an organism's chance of survival", "A type of mutation", "A dominant allele", "A type of chromosome"],
                answer: "A",
                explanation: "An adaptation is a heritable trait that increases an organism's ability to survive and reproduce in its environment."
            },
            {
                question: "What are gametes?",
                options: ["Reproductive cells (sperm and egg)", "Body cells", "Blood cells", "Nerve cells"],
                answer: "A",
                explanation: "Gametes are reproductive cells (sperm in males, eggs in females) that have half the normal number of chromosomes and combine during fertilization."
            },
            {
                question: "What is fertilization?",
                options: ["Union of sperm and egg to form a zygote", "Cell division", "DNA replication", "Protein synthesis"],
                answer: "A",
                explanation: "Fertilization is the process where a sperm cell and an egg cell unite to form a zygote, which develops into a new organism."
            }
        ];

        // Genetics facts
        const geneticsFacts = [
            "Humans share about 99.9% of their DNA with each other. The 0.1% difference accounts for all human variation.",
            "If unwound, the DNA in one cell would stretch about 2 meters long.",
            "We share about 98% of our DNA with chimpanzees, 90% with cats, 85% with mice, and 60% with bananas.",
            "The human genome contains about 3 billion base pairs and approximately 20,000-25,000 genes.",
            "Identical twins have the same DNA but different fingerprints.",
            "DNA can survive for thousands of years - scientists have extracted DNA from Neanderthal bones over 40,000 years old.",
            "All humans alive today can trace their maternal lineage back to a single woman who lived in Africa about 200,000 years ago (Mitochondrial Eve).",
            "The first complete human genome sequence took 13 years and cost about $3 billion. Today it can be done in days for under $1000."
        ];

        // Topic details
        const topicDetails = {
            'dna-genes': {
                title: "DNA & Genes",
                info: "DNA is the molecule that carries genetic instructions, and genes are segments of DNA that code for specific traits."
            },
            'inheritance': {
                title: "Inheritance Patterns",
                info: "The study of how traits are passed from parents to offspring through genetic information."
            },
            'variation': {
                title: "Variation & Evolution",
                info: "Genetic variation provides the raw material for evolution through natural selection."
            }
        };

        // Traits details
        const traitsDetails = {
            'eye-color': {
                title: "Eye Color Inheritance",
                explanation: "Eye color is controlled by multiple genes, but a simplified model shows brown (B) as dominant over blue (b). However, green, hazel, and other colors involve additional genes.",
                genotypes: {
                    "Brown eyes": ["BB", "Bb"],
                    "Blue eyes": ["bb"]
                },
                inheritance: "Polygenic (influenced by multiple genes)"
            },
            'widows-peak': {
                title: "Widow's Peak",
                explanation: "A V-shaped hairline is dominant over a straight hairline. This trait follows simple Mendelian inheritance.",
                genotypes: {
                    "Widow's peak": ["WW", "Ww"],
                    "Straight hairline": ["ww"]
                },
                inheritance: "Simple dominant-recessive"
            },
            'earlobe': {
                title: "Earlobe Attachment",
                explanation: "Free (unattached) earlobes are dominant over attached earlobes. This is one of the classic traits studied by early geneticists.",
                genotypes: {
                    "Free earlobes": ["FF", "Ff"],
                    "Attached earlobes": ["ff"]
                },
                inheritance: "Simple dominant-recessive"
            },
            'tongue-roll': {
                title: "Tongue Rolling",
                explanation: "The ability to roll the tongue into a tube shape is dominant. However, some evidence suggests environmental factors may also influence this trait.",
                genotypes: {
                    "Can roll tongue": ["RR", "Rr"],
                    "Cannot roll tongue": ["rr"]
                },
                inheritance: "Mostly dominant-recessive with possible environmental influence"
            }
        };

        // Practice problems with solutions
        const practiceProblems = {
            1: {
                problem: "If B = brown eyes, b = blue, what genotype gives blue eyes?",
                solution: "bb (homozygous recessive) - Both alleles must be recessive for blue eyes to appear."
            },
            2: {
                problem: "Cross: Aa Ã— Aa. What % offspring show dominant trait?",
                solution: "75% - Genotypes: 25% AA, 50% Aa (show dominant trait), 25% aa (recessive trait)."
            },
            3: {
                problem: "DNA base pairing: A pairs with __, C pairs with __",
                solution: "A pairs with T (Adenine-Thymine), C pairs with G (Cytosine-Guanine)"
            },
            4: {
                problem: "Define homozygous and heterozygous",
                solution: "Homozygous: Two identical alleles (AA or aa). Heterozygous: Two different alleles (Aa)."
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentDNA: "",
            currentMutation: "",
            currentCross: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const geneticsFact = document.getElementById('geneticsFact');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const dnaContainer = document.getElementById('dnaContainer');
        const punnettContainer = document.getElementById('punnettContainer');
        const chromosomeContainer = document.getElementById('chromosomeContainer');
        const pedigreeContainer = document.getElementById('pedigreeContainer');
        const originalDNA = document.getElementById('originalDNA');
        const mutatedDNA = document.getElementById('mutatedDNA');
        const crossResults = document.getElementById('crossResults');
        const variationChart = document.getElementById('variationChart');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            createDNAStructure();
            createPunnettSquare();
            createChromosomes();
            generateDNASequence();
            createVariationChart();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a genetics expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand inheritance and variation well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of genetics!";
            } else {
                scoreMessage.textContent = "Keep practicing! Genetics takes practice - try again!";
            }
        }

        // Create genetics fact display
        function createGeneticsFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'genetics-fact';
            factDiv.innerHTML = `<strong>Genetics Fact:</strong> ${geneticsFacts[Math.floor(Math.random() * geneticsFacts.length)]}`;
            return factDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            geneticsFact.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            geneticsFact.appendChild(createGeneticsFact());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying genetics!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Interactive functions
        window.showTopicDetails = function(topic) {
            const topicInfo = topicDetails[topic];
            if (!topicInfo) return;
            
            let info = `${topicInfo.title}\n\n`;
            info += `${topicInfo.info}\n\n`;
            
            if (topic === 'dna-genes') {
                info += "Key Concepts:\n";
                info += "â€¢ DNA Structure: Double helix with base pairs\n";
                info += "â€¢ Base Pairing: A-T, C-G\n";
                info += "â€¢ Genes: DNA segments coding for proteins\n";
                info += "â€¢ Chromosomes: DNA packaged with proteins\n";
                info += "â€¢ Replication: DNA copies itself before cell division\n\n";
                info += "Central Dogma: DNA â†’ RNA â†’ Protein";
            } else if (topic === 'inheritance') {
                info += "Key Concepts:\n";
                info += "â€¢ Mendel's Laws: Segregation & Independent Assortment\n";
                info += "â€¢ Genotype vs Phenotype\n";
                info += "â€¢ Dominant vs Recessive alleles\n";
                info += "â€¢ Homozygous vs Heterozygous\n";
                info += "â€¢ Punnett Squares: Predict offspring genotypes\n\n";
                info += "Example: Eye color, blood type, genetic disorders";
            } else if (topic === 'variation') {
                info += "Key Concepts:\n";
                info += "â€¢ Sources: Mutation, sexual reproduction, gene flow\n";
                info += "â€¢ Mutations: Point, insertion, deletion\n";
                info += "â€¢ Natural Selection: Survival of the fittest\n";
                info += "â€¢ Adaptation: Traits that improve survival\n";
                info += "â€¢ Speciation: Formation of new species\n\n";
                info += "Evolution: Genetic change in populations over time";
            }
            
            alert(info);
        };

        // DNA functions
        function createDNAStructure() {
            dnaContainer.innerHTML = '';
            
            const centerX = dnaContainer.clientWidth / 2;
            const centerY = dnaContainer.clientHeight / 2;
            const radius = 80;
            const turns = 3;
            const segments = 30;
            
            // Create DNA strands (backbones)
            for (let i = 0; i < segments; i++) {
                const angle = (i / segments) * Math.PI * 2 * turns;
                const x1 = centerX + radius * Math.cos(angle);
                const y1 = centerY + radius * Math.sin(angle);
                const x2 = centerX + (radius - 30) * Math.cos(angle);
                const y2 = centerY + (radius - 30) * Math.sin(angle);
                
                // Left strand
                const strand1 = document.createElement('div');
                strand1.className = 'dna-strand';
                strand1.style.left = `${x1}px`;
                strand1.style.top = `${y1}px`;
                strand1.style.height = '2px';
                strand1.style.width = '2px';
                strand1.style.background = 'var(--dna-color)';
                dnaContainer.appendChild(strand1);
                
                // Right strand
                const strand2 = document.createElement('div');
                strand2.className = 'dna-strand';
                strand2.style.left = `${x2}px`;
                strand2.style.top = `${y2}px`;
                strand2.style.height = '2px';
                strand2.style.width = '2px';
                strand2.style.background = 'var(--dna-color)';
                dnaContainer.appendChild(strand2);
                
                // Base pairs (rungs)
                if (i % 3 === 0) {
                    const base = document.createElement('div');
                    base.className = 'dna-base';
                    base.style.left = `${x2}px`;
                    base.style.top = `${y2}px`;
                    base.style.width = `${Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2))}px`;
                    base.style.transform = `rotate(${Math.atan2(y1-y2, x1-x2)}rad)`;
                    dnaContainer.appendChild(base);
                    
                    // Base pair labels
                    const basePair = document.createElement('div');
                    basePair.className = 'base-pair';
                    basePair.textContent = i % 6 === 0 ? 'A-T' : 'C-G';
                    basePair.style.left = `${(x1 + x2) / 2 - 15}px`;
                    basePair.style.top = `${(y1 + y2) / 2 - 10}px`;
                    dnaContainer.appendChild(basePair);
                }
            }
        }

        window.showDNAStructure = function() {
            createDNAStructure();
            alert("DNA Structure:\n\nâ€¢ Double helix: Twisted ladder shape\nâ€¢ Backbone: Sugar-phosphate chains\nâ€¢ Rungs: Base pairs (A-T, C-G)\nâ€¢ Complementary strands: One strand determines the other\nâ€¢ Antiparallel: Strands run in opposite directions");
        };

        window.showBasePairs = function() {
            // Highlight base pairs
            const bases = dnaContainer.querySelectorAll('.dna-base, .base-pair');
            bases.forEach(base => {
                base.style.boxShadow = '0 0 10px 2px var(--accent-yellow)';
                base.style.transition = 'box-shadow 0.5s ease';
            });
            
            setTimeout(() => {
                bases.forEach(base => {
                    base.style.boxShadow = 'none';
                });
            }, 2000);
            
            alert("DNA Base Pairing:\n\nâ€¢ Adenine (A) pairs with Thymine (T) - 2 hydrogen bonds\nâ€¢ Cytosine (C) pairs with Guanine (G) - 3 hydrogen bonds\nâ€¢ Complementary: Strands are not identical but complementary\nâ€¢ Chargaff's Rules: A=T, C=G in DNA");
        };

        window.showReplication = function() {
            dnaContainer.innerHTML = '<div style="color: white; text-align: center; margin-top: 80px; font-family: monospace;">DNA Replication Animation<br>1. Helicase unwinds DNA<br>2. DNA polymerase adds nucleotides<br>3. Two identical DNA molecules formed</div>';
            
            setTimeout(() => {
                createDNAStructure();
            }, 3000);
            
            alert("DNA Replication:\n\n1. Helicase enzyme unwinds and unzips DNA double helix\n2. DNA polymerase adds complementary nucleotides to each strand\n3. Two identical DNA molecules are formed (semi-conservative)\n4. Each new DNA molecule has one original strand and one new strand\n5. Occurs before cell division (mitosis/meiosis)");
        };

        window.explainDNA = function() {
            alert("DNA (Deoxyribonucleic Acid):\n\nâ€¢ Function: Stores genetic information\nâ€¢ Location: Nucleus of eukaryotic cells\nâ€¢ Structure: Double helix discovered by Watson & Crick (1953)\nâ€¢ Components: Nucleotides (sugar, phosphate, base)\nâ€¢ Information: Sequence of bases codes for proteins\nâ€¢ Universality: All living organisms use same genetic code");
        };

        // Punnett square functions
        function createPunnettSquare(parent1 = 'Aa', parent2 = 'Aa', trait = 'Eye Color') {
            punnettContainer.innerHTML = '';
            
            const alleles1 = parent1.split('');
            const alleles2 = parent2.split('');
            
            // Create 3x3 grid
            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 3; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'punnett-cell';
                    
                    if (row === 0 && col === 0) {
                        cell.textContent = trait;
                        cell.className += ' punnett-header';
                    } else if (row === 0 && col > 0) {
                        cell.textContent = alleles1[col-1];
                        cell.className += ' punnett-header';
                    } else if (col === 0 && row > 0) {
                        cell.textContent = alleles2[row-1];
                        cell.className += ' punnett-header';
                    } else {
                        const genotype = alleles1[col-1] + alleles2[row-1];
                        cell.textContent = genotype;
                        cell.className += ' punnett-genotype';
                        
                        // Color code based on dominance
                        if (genotype.includes('A')) {
                            cell.className += ' punnett-dominant';
                        } else {
                            cell.className += ' punnett-recessive';
                        }
                    }
                    
                    punnettContainer.appendChild(cell);
                }
            }
        }

        window.createMonohybridCross = function() {
            createPunnettSquare('Aa', 'Aa', 'Eye Color');
            alert("Monohybrid Cross (One Gene):\n\nâ€¢ Parents: Both heterozygous (Aa)\nâ€¢ Gametes: Each produces A and a\nâ€¢ Offspring genotypes: 25% AA, 50% Aa, 25% aa\nâ€¢ Phenotypic ratio: 3 dominant : 1 recessive\nâ€¢ Example: Cross between two brown-eyed (Bb) parents can produce blue-eyed (bb) child");
        };

        window.createDihybridCross = function() {
            punnettContainer.innerHTML = '<div style="color: white; text-align: center; margin-top: 80px; font-family: monospace;">Dihybrid Cross (Two Genes)<br>Example: AaBb Ã— AaBb<br>16 possible combinations<br>9:3:3:1 phenotypic ratio</div>';
            
            setTimeout(() => {
                createPunnettSquare('Aa', 'Aa', 'Eye Color');
            }, 3000);
            
            alert("Dihybrid Cross (Two Independent Genes):\n\nâ€¢ Example: Eye color (A/a) and hair color (B/b)\nâ€¢ Parents: AaBb Ã— AaBb\nâ€¢ Gametes: AB, Ab, aB, ab (each parent)\nâ€¢ Punnett Square: 4Ã—4 = 16 boxes\nâ€¢ Phenotypic ratio: 9 A_B_ : 3 A_bb : 3 aaB_ : 1 aabb\nâ€¢ Demonstrates independent assortment");
        };

        window.calculateProbabilities = function() {
            const parent1 = 'Aa';
            const parent2 = 'Aa';
            
            // Calculate probabilities
            const genotypes = {
                'AA': 0.25,
                'Aa': 0.5,
                'aa': 0.25
            };
            
            const dominantPhenotype = 0.75; // AA + Aa
            const recessivePhenotype = 0.25; // aa
            
            let result = `Cross: ${parent1} Ã— ${parent2}\n\n`;
            result += `Genotype Probabilities:\n`;
            result += `AA (homozygous dominant): ${(genotypes.AA * 100).toFixed(0)}%\n`;
            result += `Aa (heterozygous): ${(genotypes.Aa * 100).toFixed(0)}%\n`;
            result += `aa (homozygous recessive): ${(genotypes.aa * 100).toFixed(0)}%\n\n`;
            result += `Phenotype Probabilities:\n`;
            result += `Dominant trait: ${(dominantPhenotype * 100).toFixed(0)}%\n`;
            result += `Recessive trait: ${(recessivePhenotype * 100).toFixed(0)}%`;
            
            alert(result);
        };

        window.explainPunnett = function() {
            alert("Punnett Square:\n\nâ€¢ Purpose: Predicts possible genotypes of offspring\nâ€¢ Developed by: Reginald Punnett\nâ€¢ How to use:\n  1. Write parent genotypes\n  2. Determine possible gametes\n  3. Set up grid\n  4. Fill in combinations\n  5. Calculate probabilities\nâ€¢ Limitations: Assumes simple dominance, independent assortment\nâ€¢ Real-world: More complex due to multiple genes, environment");
        };

        // Chromosome functions
        function createChromosomes() {
            chromosomeContainer.innerHTML = '';
            
            // Create homologous pair
            for (let i = 0; i < 2; i++) {
                const chromosome = document.createElement('div');
                chromosome.className = 'chromosome chromosome-pair';
                chromosome.style.left = i === 0 ? '30%' : '60%';
                
                // Add centromere
                const centromere = document.createElement('div');
                centromere.className = 'chromosome-centromere';
                chromosome.appendChild(centromere);
                
                // Add genes (colored dots)
                const genePositions = [
                    {top: '20%', left: '30%'},
                    {top: '40%', left: '60%'},
                    {top: '70%', left: '40%'}
                ];
                
                genePositions.forEach(pos => {
                    const gene = document.createElement('div');
                    gene.className = 'chromosome-gene';
                    gene.style.top = pos.top;
                    gene.style.left = pos.left;
                    chromosome.appendChild(gene);
                });
                
                chromosomeContainer.appendChild(chromosome);
            }
        }

        window.showChromosomes = function() {
            createChromosomes();
            alert("Chromosomes:\n\nâ€¢ Structure: Condensed DNA with proteins\nâ€¢ Number: Humans have 46 (23 pairs)\nâ€¢ Types: Autosomes (22 pairs) and sex chromosomes (1 pair: XX female, XY male)\nâ€¢ Homologous chromosomes: Similar chromosomes from each parent\nâ€¢ Genes: Located at specific positions (loci) on chromosomes");
        };

        window.showGenes = function() {
            const genes = chromosomeContainer.querySelectorAll('.chromosome-gene');
            genes.forEach(gene => {
                gene.style.boxShadow = '0 0 8px 2px var(--primary-green)';
                gene.style.transform = 'scale(1.5)';
                gene.style.transition = 'all 0.5s ease';
            });
            
            setTimeout(() => {
                genes.forEach(gene => {
                    gene.style.boxShadow = 'none';
                    gene.style.transform = 'scale(1)';
                });
            }, 2000);
            
            alert("Genes on Chromosomes:\n\nâ€¢ Locus: Specific position of a gene on chromosome\nâ€¢ Alleles: Different versions at same locus\nâ€¢ Homozygous: Same allele on both homologous chromosomes\nâ€¢ Heterozygous: Different alleles on homologous chromosomes\nâ€¢ Linked genes: Genes close together on same chromosome tend to be inherited together");
        };

        window.showHomologousPair = function() {
            const chromosomes = chromosomeContainer.querySelectorAll('.chromosome');
            chromosomes.forEach(chromosome => {
                chromosome.style.boxShadow = '0 0 15px 3px var(--accent-pink)';
                chromosome.style.transition = 'box-shadow 0.5s ease';
            });
            
            setTimeout(() => {
                chromosomes.forEach(chromosome => {
                    chromosome.style.boxShadow = 'none';
                });
            }, 2000);
            
            alert("Homologous Chromosomes:\n\nâ€¢ Definition: Chromosome pairs (one from each parent) that are similar in length, gene position, and centromere location\nâ€¢ Carry same genes but may have different alleles\nâ€¢ Pair up during meiosis I\nâ€¢ Crossing over: Exchange of genetic material between homologues\nâ€¢ Ensures genetic variation in offspring");
        };

        window.explainChromosomes = function() {
            alert("Chromosome Structure:\n\nâ€¢ Chromatid: One half of duplicated chromosome\nâ€¢ Centromere: Constriction point where chromatids attach\nâ€¢ Telomeres: Protective ends of chromosomes\nâ€¢ Karyotype: Complete set of chromosomes organized by size\nâ€¢ Ploidy: Haploid (n) vs Diploid (2n)\nâ€¢ Abnormalities: Down syndrome (trisomy 21), Turner syndrome (XO)");
        };

        // Traits functions
        window.showTraitDetail = function(trait) {
            const traitInfo = traitsDetails[trait];
            if (!traitInfo) return;
            
            let info = `${traitInfo.title}\n\n`;
            info += `Explanation: ${traitInfo.explanation}\n\n`;
            info += `Genotypes:\n`;
            
            Object.entries(traitInfo.genotypes).forEach(([phenotype, genotypes]) => {
                info += `â€¢ ${phenotype}: ${genotypes.join(' or ')}\n`;
            });
            
            info += `\nInheritance Pattern: ${traitInfo.inheritance}\n\n`;
            info += `Note: Most human traits are polygenic (influenced by multiple genes) and can be affected by environment.`;
            
            alert(info);
        };

        // Pedigree functions
        function createPedigree() {
            pedigreeContainer.innerHTML = '';
            
            // Create a simple pedigree for a recessive disorder
            const symbols = [
                // Generation I
                {type: 'male', affected: false, x: 100, y: 50, id: 'I1'},
                {type: 'female', affected: false, x: 200, y: 50, id: 'I2'},
                
                // Generation II
                {type: 'male', affected: true, x: 100, y: 120, id: 'II1'},
                {type: 'female', affected: false, carrier: true, x: 200, y: 120, id: 'II2'},
                {type: 'male', affected: false, carrier: true, x: 300, y: 120, id: 'II3'},
                
                // Generation III
                {type: 'male', affected: false, x: 150, y: 190, id: 'III1'},
                {type: 'female', affected: true, x: 250, y: 190, id: 'III2'},
            ];
            
            symbols.forEach(symbol => {
                const elem = document.createElement('div');
                elem.className = `pedigree-symbol pedigree-${symbol.type} ${symbol.affected ? 'pedigree-affected' : ''} ${symbol.carrier ? 'pedigree-carrier' : ''}`;
                elem.style.left = `${symbol.x}px`;
                elem.style.top = `${symbol.y}px`;
                elem.textContent = symbol.id;
                pedigreeContainer.appendChild(elem);
            });
        }

        window.analyzeInheritance = function() {
            createPedigree();
            
            setTimeout(() => {
                alert("Pedigree Analysis:\n\nâ€¢ Pattern: Autosomal recessive\nâ€¢ Evidence:\n  - Skips generations (II â†’ III)\n  - Affected individuals can have unaffected parents (III2)\n  - Males and females equally affected\nâ€¢ Carrier: Has one copy of recessive allele (II2, II3)\nâ€¢ Genotypes:\n  - Affected: aa\n  - Unaffected carriers: Aa\n  - Unaffected non-carriers: AA");
            }, 1000);
        };

        window.identifyCarriers = function() {
            createPedigree();
            
            setTimeout(() => {
                // Highlight carriers
                const carriers = pedigreeContainer.querySelectorAll('.pedigree-carrier');
                carriers.forEach(carrier => {
                    carrier.style.boxShadow = '0 0 10px 3px var(--accent-yellow)';
                });
                
                alert("Carriers Identified:\n\nâ€¢ II2 (female): Carrier (Aa)\nâ€¢ II3 (male): Carrier (Aa)\n\nCarriers have one copy of the recessive allele but don't show the trait. They can pass the allele to offspring.");
            }, 1000);
        };

        window.explainPedigree = function() {
            alert("Pedigree Chart Symbols:\n\nâ€¢ Square: Male\nâ€¢ Circle: Female\nâ€¢ Shaded: Affected by trait/disorder\nâ€¢ Half-shaded: Carrier (for recessive traits)\nâ€¢ Horizontal line: Mating/parents\nâ€¢ Vertical line: Offspring\nâ€¢ Roman numerals: Generations (I, II, III...)\nâ€¢ Arabic numerals: Individuals within generation\nâ€¢ Diamond: Unknown/unspecified sex");
        };

        // Mutation functions
        function generateDNASequence() {
            const bases = ['A', 'T', 'C', 'G'];
            let sequence = '';
            
            for (let i = 0; i < 20; i++) {
                sequence += bases[Math.floor(Math.random() * bases.length)];
            }
            
            appState.currentDNA = sequence;
            
            // Display original sequence with colors
            originalDNA.innerHTML = '';
            mutatedDNA.innerHTML = '';
            
            sequence.split('').forEach(base => {
                const span = document.createElement('span');
                span.className = `dna-base-char dna-base-${base.toLowerCase()}`;
                span.textContent = base;
                originalDNA.appendChild(span);
            });
            
            // Initially show same as original
            appState.currentMutation = sequence;
            updateMutatedDisplay();
        }

        function updateMutatedDisplay() {
            mutatedDNA.innerHTML = '';
            appState.currentMutation.split('').forEach((base, index) => {
                const span = document.createElement('span');
                span.className = `dna-base-char dna-base-${base.toLowerCase()}`;
                span.textContent = base;
                
                // Highlight mutation if different from original
                if (appState.currentDNA[index] !== base) {
                    span.classList.add('mutated');
                }
                
                mutatedDNA.appendChild(span);
            });
        }

        window.simulatePointMutation = function() {
            const position = Math.floor(Math.random() * appState.currentDNA.length);
            const bases = ['A', 'T', 'C', 'G'].filter(b => b !== appState.currentDNA[position]);
            const newBase = bases[Math.floor(Math.random() * bases.length)];
            
            appState.currentMutation = appState.currentDNA.split('');
            appState.currentMutation[position] = newBase;
            appState.currentMutation = appState.currentMutation.join('');
            
            updateMutatedDisplay();
            
            alert(`Point Mutation (Substitution):\n\nâ€¢ Position: ${position + 1}\nâ€¢ Changed: ${appState.currentDNA[position]} â†’ ${newBase}\n\nEffects:\nâ€¢ Silent mutation: Same amino acid (no effect)\nâ€¢ Missense: Different amino acid (protein change)\nâ€¢ Nonsense: Early stop codon (truncated protein)`);
        };

        window.simulateInsertion = function() {
            const position = Math.floor(Math.random() * appState.currentDNA.length);
            const bases = ['A', 'T', 'C', 'G'];
            const newBase = bases[Math.floor(Math.random() * bases.length)];
            
            appState.currentMutation = appState.currentDNA.split('');
            appState.currentMutation.splice(position, 0, newBase); // Insert at position
            appState.currentMutation = appState.currentMutation.join('');
            
            updateMutatedDisplay();
            
            alert(`Insertion Mutation:\n\nâ€¢ Position: ${position + 1}\nâ€¢ Inserted: ${newBase}\nâ€¢ Result: Frameshift (changes all downstream codons)\n\nEffects:\nâ€¢ Dramatic change in protein sequence\nâ€¢ Often harmful\nâ€¢ Can cause genetic disorders like Huntington's disease`);
        };

        window.simulateDeletion = function() {
            const position = Math.floor(Math.random() * appState.currentDNA.length);
            
            appState.currentMutation = appState.currentDNA.split('');
            const deletedBase = appState.currentMutation.splice(position, 1)[0]; // Remove at position
            appState.currentMutation = appState.currentMutation.join('');
            
            updateMutatedDisplay();
            
            alert(`Deletion Mutation:\n\nâ€¢ Position: ${position + 1}\nâ€¢ Deleted: ${deletedBase}\nâ€¢ Result: Frameshift (changes all downstream codons)\n\nEffects:\nâ€¢ Dramatic change in protein sequence\nâ€¢ Often harmful\nâ€¢ Example: CFTR gene deletion causes cystic fibrosis`);
        };

        window.explainMutations = function() {
            alert("Types of Mutations:\n\n1. Point Mutations (single base change):\n   â€¢ Substitution: One base replaced by another\n   â€¢ Transition: Purineâ†’Purine or Pyrimidineâ†’Pyrimidine\n   â€¢ Transversion: Purineâ†’Pyrimidine or vice versa\n\n2. Frameshift Mutations:\n   â€¢ Insertion: Extra base added\n   â€¢ Deletion: Base removed\n   â€¢ Changes reading frame\n\n3. Chromosomal Mutations:\n   â€¢ Deletion: Part of chromosome lost\n   â€¢ Duplication: Extra copy of segment\n   â€¢ Inversion: Segment reversed\n   â€¢ Translocation: Segment moves to different chromosome\n\nCauses: Radiation, chemicals, replication errors, viruses");
        };

        // Cross calculator
        window.performCross = function() {
            const parent1 = document.getElementById('parent1Genotype').value.toUpperCase();
            const parent2 = document.getElementById('parent2Genotype').value.toUpperCase();
            
            if (!isValidGenotype(parent1) || !isValidGenotype(parent2)) {
                alert("Please enter valid genotypes (e.g., AA, Aa, aa)");
                return;
            }
            
            // For simplicity, assume single gene with two alleles
            const alleles1 = getAlleles(parent1);
            const alleles2 = getAlleles(parent2);
            
            const results = [];
            
            // Generate all combinations
            for (const a1 of alleles1) {
                for (const a2 of alleles2) {
                    // Sort to show dominant allele first
                    const genotype = [a1, a2].sort().join('');
                    results.push(genotype);
                }
            }
            
            // Count genotypes
            const genotypeCounts = {};
            results.forEach(genotype => {
                genotypeCounts[genotype] = (genotypeCounts[genotype] || 0) + 1;
            });
            
            // Calculate probabilities
            const total = results.length;
            let output = `Cross: ${parent1} Ã— ${parent2}\n\n`;
            output += `Possible Gametes:\n`;
            output += `Parent 1: ${alleles1.join(', ')}\n`;
            output += `Parent 2: ${alleles2.join(', ')}\n\n`;
            output += `Offspring Genotypes:\n`;
            
            Object.entries(genotypeCounts).forEach(([genotype, count]) => {
                const probability = (count / total * 100).toFixed(0);
                output += `${genotype}: ${probability}% (${count}/${total})\n`;
            });
            
            // Determine phenotypes if we know dominance
            if (parent1.length === 2 && parent2.length === 2) {
                const dominantAllele = parent1[0].toUpperCase(); // Assume first allele is dominant
                const recessiveAllele = parent1[0].toLowerCase();
                
                let dominantCount = 0;
                let recessiveCount = 0;
                
                results.forEach(genotype => {
                    if (genotype.includes(dominantAllele)) {
                        dominantCount++;
                    } else {
                        recessiveCount++;
                    }
                });
                
                output += `\nPhenotype Probabilities:\n`;
                output += `Dominant trait: ${(dominantCount/total*100).toFixed(0)}%\n`;
                output += `Recessive trait: ${(recessiveCount/total*100).toFixed(0)}%`;
            }
            
            crossResults.textContent = output;
        };

        function isValidGenotype(genotype) {
            return /^[A-Za-z]{2}$/.test(genotype);
        }

        function getAlleles(genotype) {
            return genotype.split('');
        }

        // Variation chart
        function createVariationChart(data) {
            variationChart.innerHTML = '';
            
            const maxValue = Math.max(...data.values);
            const chartHeight = variationChart.clientHeight - 40;
            
            data.values.forEach((value, index) => {
                const barHeight = (value / maxValue) * (chartHeight - 30);
                
                const bar = document.createElement('div');
                bar.className = 'variation-bar';
                bar.style.height = `${barHeight}px`;
                
                const label = document.createElement('div');
                label.className = 'variation-label';
                label.textContent = data.labels[index];
                bar.appendChild(label);
                
                variationChart.appendChild(bar);
            });
        }

        window.showHeightVariation = function() {
            const data = {
                labels: ['<150cm', '150-160', '160-170', '170-180', '>180cm'],
                values: [5, 20, 40, 25, 10]
            };
            
            createVariationChart(data);
            alert("Height Variation:\n\nâ€¢ Continuous trait: Range of values\nâ€¢ Polygenic: Influenced by multiple genes\nâ€¢ Environmental factors: Nutrition, health\nâ€¢ Normal distribution: Bell curve pattern\nâ€¢ Heritability: About 80% genetic, 20% environmental\nâ€¢ Population differences: Genetic and environmental");
        };

        window.showSkinToneVariation = function() {
            const data = {
                labels: ['Very Light', 'Light', 'Medium', 'Dark', 'Very Dark'],
                values: [10, 25, 40, 20, 5]
            };
            
            createVariationChart(data);
            alert("Skin Tone Variation:\n\nâ€¢ Polygenic: At least 6 genes involved\nâ€¢ Adaptation: Melanin protects against UV radiation\nâ€¢ Vitamin D: Lighter skin in low sunlight areas\nâ€¢ Continuous variation: Spectrum of tones\nâ€¢ No 'races': Genetic variation within populations > between populations\nâ€¢ Social construct: Skin color categories are cultural");
        };

        window.showBloodTypeVariation = function() {
            const data = {
                labels: ['O', 'A', 'B', 'AB'],
                values: [44, 42, 10, 4]
            };
            
            createVariationChart(data);
            alert("Blood Type Distribution:\n\nâ€¢ Type O: Most common worldwide (44%)\nâ€¢ Type A: Common in Europe (42%)\nâ€¢ Type B: Higher in Asia (10%)\nâ€¢ Type AB: Rarest (4%)\nâ€¢ Genetics: A and B are codominant, O is recessive\nâ€¢ Evolution: May relate to disease resistance\nâ€¢ Blood transfusions: Must match types");
        };

        window.explainVariation = function() {
            alert("Sources of Genetic Variation:\n\n1. Mutation:\n   â€¢ Ultimate source of new alleles\n   â€¢ Random changes in DNA\n   â€¢ Can be beneficial, harmful, or neutral\n\n2. Sexual Reproduction:\n   â€¢ Independent assortment (meiosis)\n   â€¢ Crossing over (recombination)\n   â€¢ Random fertilization\n\n3. Gene Flow:\n   â€¢ Migration between populations\n   â€¢ Exchange of genetic material\n\nImportance:\nâ€¢ Raw material for evolution\nâ€¢ Allows adaptation to changing environments\nâ€¢ Reduces risk of extinction\nâ€¢ Basis for natural selection");
        };

        // Practice problems
        window.solveProblem = function(problemNum) {
            const problem = practiceProblems[problemNum];
            if (!problem) return;
            
            const answer = prompt(`Solve: ${problem.problem}\n\nEnter your answer:`);
            if (answer) {
                let correct = false;
                
                if (problemNum === 1 && answer.toLowerCase().includes("bb")) {
                    correct = true;
                } else if (problemNum === 2 && (answer.includes("75") || answer.includes("3/4"))) {
                    correct = true;
                } else if (problemNum === 3 && answer.toLowerCase().includes("t") && answer.toLowerCase().includes("g")) {
                    correct = true;
                } else if (problemNum === 4 && answer.toLowerCase().includes("homo") && answer.toLowerCase().includes("hetero")) {
                    correct = true;
                }
                
                if (correct) {
                    alert(`âœ… Correct!\n\n${problem.solution}`);
                } else {
                    alert(`âŒ Not quite right.\n\nCorrect solution:\n${problem.solution}`);
                }
            }
        };

        // Genetics challenge
        window.showGeneticsChallenge = function() {
            const challenges = [
                "Challenge 1: A woman with type A blood (genotype AO) marries a man with type B blood (genotype BO). What are possible blood types of their children?",
                "Challenge 2: In pea plants, tall (T) is dominant over short (t). Cross a heterozygous tall plant with a short plant. What % of offspring will be tall?",
                "Challenge 3: Colorblindness is X-linked recessive. A normal vision woman (carrier) marries a normal vision man. What % of sons will be colorblind?",
                "Challenge 4: If DNA sequence is ATG CCT GAA, what would be mRNA sequence after transcription?"
            ];
            
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            let info = "ðŸ§¬ Genetics Challenge ðŸ§¬\n\n";
            info += randomChallenge + "\n\n";
            info += "Use your genetics knowledge to solve it!\n\n";
            info += "Solutions:\n";
            info += "1. A, B, AB, or O (25% each) - AO Ã— BO gives AB, AO, BO, OO\n";
            info += "2. 50% - Tt Ã— tt gives 50% Tt (tall), 50% tt (short)\n";
            info += "3. 50% - XâºXâ» Ã— XâºY â†’ 50% XâºY (normal), 50% Xâ»Y (colorblind) sons\n";
            info += "4. AUG CCU GAA - Same as DNA but U replaces T";
            
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
