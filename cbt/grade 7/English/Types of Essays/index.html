<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 English - Types of Essays | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for English Theme */
        :root {
            --primary-blue: #2196F3;
            --secondary-purple: #9C27B0;
            --accent-orange: #FF9800;
            --accent-green: #4CAF50;
            --accent-red: #F44336;
            --accent-teal: #009688;
            --accent-indigo: #3F51B5;
            --accent-pink: #E91E63;
            --accent-amber: #FFC107;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --narrative-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --descriptive-glow: 0 0 20px rgba(156, 39, 176, 0.4);
            --expository-glow: 0 0 20px rgba(255, 152, 0, 0.4);
            --argumentative-glow: 0 0 20px rgba(76, 175, 80, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Georgia', 'Times New Roman', serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(156, 39, 176, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 152, 0, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 30% 70%, rgba(76, 175, 80, 0.03) 0%, transparent 50%);
        }

        /* Literary Pattern Background */
        .literary-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.1;
            pointer-events: none;
            background: 
                repeating-linear-gradient(0deg, 
                    transparent, 
                    transparent 20px, 
                    rgba(33, 150, 243, 0.05) 20px, 
                    rgba(33, 150, 243, 0.05) 40px),
                repeating-linear-gradient(90deg, 
                    transparent, 
                    transparent 20px, 
                    rgba(156, 39, 176, 0.05) 20px, 
                    rgba(156, 39, 176, 0.05) 40px);
        }

        .floating-element {
            position: absolute;
            font-size: 2.5rem;
            font-weight: bold;
            animation: floatElement 30s linear infinite;
            opacity: 0.1;
            pointer-events: none;
        }

        @keyframes floatElement {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.05; }
            25% { transform: translateY(-100px) translateX(80px) rotate(90deg); opacity: 0.03; }
            50% { transform: translateY(-30px) translateX(-120px) rotate(180deg); opacity: 0.05; }
            75% { transform: translateY(100px) translateX(40px) rotate(270deg); opacity: 0.03; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.05; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--narrative-glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.8rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 12px 24px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 2px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.8rem;
        }

        .topic-name {
            font-weight: 700;
            color: var(--primary-blue);
            font-size: 1.2rem;
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-secondary:hover {
            background: #7B1FA2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Essay Type Cards */
        .essay-types-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin: 30px 0;
        }

        @media (max-width: 768px) {
            .essay-types-grid {
                grid-template-columns: 1fr;
            }
        }

        .essay-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .essay-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .essay-card.narrative {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .essay-card.descriptive {
            border-color: var(--secondary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .essay-card.expository {
            border-color: var(--accent-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .essay-card.argumentative {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .essay-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .essay-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .essay-card.narrative .essay-title {
            color: var(--primary-blue);
        }

        .essay-card.descriptive .essay-title {
            color: var(--secondary-purple);
        }

        .essay-card.expository .essay-title {
            color: var(--accent-orange);
        }

        .essay-card.argumentative .essay-title {
            color: var(--accent-green);
        }

        .essay-description {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .essay-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .essay-features h4 {
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
            font-size: 1.2rem;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .literary-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-indigo));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        /* Options Container */
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-purple);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
            color: white;
        }

        /* Feedback Container */
        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Essay Structure Visualization */
        .essay-structure {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-teal);
        }

        .structure-title {
            color: var(--accent-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .structure-diagram {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .structure-part {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
        }

        .structure-part.intro {
            background: var(--primary-blue);
        }

        .structure-part.body {
            background: var(--secondary-purple);
        }

        .structure-part.conclusion {
            background: var(--accent-green);
        }

        .structure-part:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Essay Examples */
        .essay-examples {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .example-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .example-tab {
            padding: 10px 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .example-tab.active {
            background: var(--accent-orange);
            color: white;
            font-weight: bold;
        }

        .example-tab:hover:not(.active) {
            border-color: var(--accent-orange);
        }

        .example-content {
            background: var(--dark-surface);
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            font-style: italic;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Writing Tips */
        .writing-tips {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-pink);
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .tips-grid {
                grid-template-columns: 1fr;
            }
        }

        .tip-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-pink);
        }

        .tip-title {
            font-weight: bold;
            color: var(--accent-pink);
            margin-bottom: 8px;
        }

        /* Vocabulary Builder */
        .vocabulary-builder {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-indigo);
        }

        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .vocabulary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .vocab-word {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .vocab-word:hover {
            transform: translateY(-3px);
            background: rgba(63, 81, 181, 0.1);
        }

        .word-text {
            font-weight: bold;
            color: var(--accent-indigo);
            margin-bottom: 5px;
        }

        .word-definition {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Interactive Writing Practice */
        .writing-practice {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .practice-title {
            color: var(--accent-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-green);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-button:hover {
            background: rgba(76, 175, 80, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Compare Essays Table */
        .compare-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .compare-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-orange);
            border-bottom: 2px solid var(--accent-orange);
        }

        .compare-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .compare-table tr:hover {
            background: rgba(255, 152, 0, 0.05);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-purple), var(--accent-orange), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .vocabulary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        .typewriter {
            display: inline-block;
            overflow: hidden;
            border-right: 2px solid var(--primary-blue);
            white-space: nowrap;
            animation: typewriter 2s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--primary-blue); }
        }
        
        @keyframes essayGlow {
            0% { box-shadow: 0 0 20px rgba(33, 150, 243, 0.4); }
            25% { box-shadow: 0 0 20px rgba(156, 39, 176, 0.4); }
            50% { box-shadow: 0 0 20px rgba(255, 152, 0, 0.4); }
            75% { box-shadow: 0 0 20px rgba(76, 175, 80, 0.4); }
            100% { box-shadow: 0 0 20px rgba(33, 150, 243, 0.4); }
        }
        
        .essay-glow {
            animation: essayGlow 5s linear infinite;
        }
    </style>
</head>
<body>
    <!-- Literary Pattern Background -->
    <div class="literary-bg" id="literaryBg">
        <!-- Elements will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 7 English: Types of Essays</h1>
            <p class="welcome-subtitle">Master the art of essay writing! Learn about narrative, descriptive, expository, and argumentative essays. Discover how to craft compelling stories, paint vivid pictures with words, explain complex ideas, and persuade readers with strong arguments. Develop essential writing skills for academic success and beyond!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìù‚úçÔ∏èüìö</span>
                <span class="topic-name">Types of Essays (Narrative, Descriptive, Expository, Argumentative)</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Begin Essay Writing Journey</span>
                </button>
            </div>
            
            <!-- Essay Types Overview -->
            <div class="essay-types-grid" style="width: 100%; margin-top: 30px;">
                <div class="essay-card narrative" onclick="showEssayType('narrative')">
                    <div class="essay-icon">üìñ</div>
                    <h3 class="essay-title">Narrative Essay</h3>
                    <p class="essay-description">Tells a story or recounts an event from the writer's perspective. Uses descriptive language and chronological order.</p>
                    <div class="essay-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Tells a story or personal experience</li>
                            <li>Uses first-person perspective</li>
                            <li>Includes characters, setting, plot</li>
                            <li>Has a clear beginning, middle, and end</li>
                        </ul>
                    </div>
                </div>
                
                <div class="essay-card descriptive" onclick="showEssayType('descriptive')">
                    <div class="essay-icon">üé®</div>
                    <h3 class="essay-title">Descriptive Essay</h3>
                    <p class="essay-description">Paints a vivid picture using sensory details. Focuses on describing a person, place, object, or experience.</p>
                    <div class="essay-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Uses vivid sensory details</li>
                            <li>Creates strong imagery</li>
                            <li>Appeals to five senses</li>
                            <li>Focuses on description rather than story</li>
                        </ul>
                    </div>
                </div>
                
                <div class="essay-card expository" onclick="showEssayType('expository')">
                    <div class="essay-icon">üìä</div>
                    <h3 class="essay-title">Expository Essay</h3>
                    <p class="essay-description">Explains, informs, or describes. Presents facts, statistics, and examples without personal opinion.</p>
                    <div class="essay-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Explains or informs</li>
                            <li>Uses facts and evidence</li>
                            <li>Third-person perspective</li>
                            <li>Clear, logical organization</li>
                        </ul>
                    </div>
                </div>
                
                <div class="essay-card argumentative" onclick="showEssayType('argumentative')">
                    <div class="essay-icon">‚öñÔ∏è</div>
                    <h3 class="essay-title">Argumentative Essay</h3>
                    <p class="essay-description">Presents a claim and supports it with evidence. Aims to persuade the reader to accept a particular viewpoint.</p>
                    <div class="essay-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Presents a clear thesis/argument</li>
                            <li>Uses evidence and reasoning</li>
                            <li>Addresses counterarguments</li>
                            <li>Aims to persuade the reader</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Literary fact display -->
                <div id="literaryFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Essay Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const literaryBg = document.getElementById('literaryBg');
            
            // Create floating literary symbols
            const elements = ['üìù', '‚úçÔ∏è', 'üìö', 'üìñ', 'üé®', 'üìä', '‚öñÔ∏è', 'üî§', 'üìå', 'üìé', '‚úèÔ∏è', 'üìì', 'üìî', 'üìí', 'üìï', 'üìó', 'üìò', 'üìô'];
            
            for (let i = 0; i < 25; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = elements[Math.floor(Math.random() * elements.length)];
                element.style.left = `${Math.random() * 100}%`;
                element.style.top = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 20}s`;
                element.style.fontSize = `${2 + Math.random() * 3}rem`;
                
                // Color different essay types
                if (['üìñ', 'üìö', 'üìî'].includes(element.textContent)) {
                    element.style.color = 'rgba(33, 150, 243, 0.1)'; // Blue for narrative
                } else if (['üé®', '‚úçÔ∏è', '‚úèÔ∏è'].includes(element.textContent)) {
                    element.style.color = 'rgba(156, 39, 176, 0.1)'; // Purple for descriptive
                } else if (['üìä', 'üìå', 'üìé'].includes(element.textContent)) {
                    element.style.color = 'rgba(255, 152, 0, 0.1)'; // Orange for expository
                } else if (['‚öñÔ∏è', 'üî§', 'üìù'].includes(element.textContent)) {
                    element.style.color = 'rgba(76, 175, 80, 0.1)'; // Green for argumentative
                } else {
                    element.style.color = 'rgba(233, 30, 99, 0.1)'; // Pink for general
                }
                
                literaryBg.appendChild(element);
            }
        }

        // Questions array - 120+ Grade 7 English essay type questions
        const questions = [
            // Narrative Essay Basics (1-20)
            {
                type: "narrative_basics",
                question: "What is the main purpose of a narrative essay?",
                options: ["To tell a story or share an experience", "To describe a person or place", "To explain a concept", "To persuade the reader"],
                answer: "A",
                explanation: "A narrative essay tells a story, usually from the writer's perspective, and focuses on personal experiences or events."
            },
            {
                type: "narrative_basics",
                question: "Which point of view is most commonly used in narrative essays?",
                options: ["First-person (I, me, my)", "Second-person (you, your)", "Third-person (he, she, they)", "All of the above equally"],
                answer: "A",
                explanation: "Narrative essays typically use first-person perspective because they're based on personal experiences."
            },
            {
                type: "narrative_basics",
                question: "What should be included in the introduction of a narrative essay?",
                options: ["A hook, background information, and thesis", "Only the main characters", "The climax of the story", "The moral of the story"],
                answer: "A",
                explanation: "A narrative essay introduction should hook the reader, provide necessary background, and present the main idea or thesis."
            },
            {
                type: "narrative_basics",
                question: "Which of these is NOT typically part of a narrative essay structure?",
                options: ["Hypothesis and experiment", "Exposition, rising action, climax, resolution", "Characters and setting", "Dialogue and description"],
                answer: "A",
                explanation: "Hypothesis and experiment are scientific method elements, not narrative essay components."
            },
            // Descriptive Essay Basics (21-40)
            {
                type: "descriptive_basics",
                question: "What is the primary goal of a descriptive essay?",
                options: ["To create a vivid picture using sensory details", "To tell a chronological story", "To argue a point", "To explain a process"],
                answer: "A",
                explanation: "Descriptive essays use sensory details (sight, sound, smell, taste, touch) to create vivid imagery."
            },
            {
                type: "descriptive_basics",
                question: "Which sentence uses the best descriptive language?",
                options: ["The ancient oak tree stood like a wise guardian, its gnarled branches reaching toward the sky.", "There was a tree in the yard.", "The tree was big and old.", "I saw a tree yesterday."],
                answer: "A",
                explanation: "Option A uses simile, personification, and specific details to create vivid imagery."
            },
            {
                type: "descriptive_basics",
                question: "What type of organization is often used in descriptive essays?",
                options: ["Spatial order (describing from one point to another)", "Chronological order", "Order of importance", "Alphabetical order"],
                answer: "A",
                explanation: "Descriptive essays often use spatial organization (left to right, top to bottom, near to far) to help readers visualize."
            },
            {
                type: "descriptive_basics",
                question: "Which sense is NOT typically emphasized in descriptive writing?",
                options: ["Telepathy (mind reading)", "Sight", "Sound", "Smell"],
                answer: "A",
                explanation: "Descriptive writing focuses on the five physical senses: sight, sound, smell, taste, and touch."
            },
            // Expository Essay Basics (41-60)
            {
                type: "expository_basics",
                question: "What does 'expository' mean in writing?",
                options: ["To explain or inform", "To tell a story", "To persuade", "To describe"],
                answer: "A",
                explanation: "Expository writing explains, informs, or describes without expressing the writer's personal opinions."
            },
            {
                type: "expository_basics",
                question: "Which of these is a common type of expository essay?",
                options: ["Compare and contrast essay", "Personal narrative", "Persuasive letter", "Descriptive poem"],
                answer: "A",
                explanation: "Compare and contrast essays are a type of expository writing that examines similarities and differences."
            },
            {
                type: "expository_basics",
                question: "What should be avoided in expository writing?",
                options: ["Personal opinions and biases", "Facts and evidence", "Clear organization", "Third-person perspective"],
                answer: "A",
                explanation: "Expository writing should be objective and factual, avoiding personal opinions or biases."
            },
            {
                type: "expository_basics",
                question: "Which organizational pattern is common in expository essays?",
                options: ["Cause and effect", "Storytelling with dialogue", "Stream of consciousness", "Rhyming couplets"],
                answer: "A",
                explanation: "Cause and effect is a common expository structure that explains relationships between events."
            },
            // Argumentative Essay Basics (61-80)
            {
                type: "argumentative_basics",
                question: "What is the main purpose of an argumentative essay?",
                options: ["To persuade the reader to accept a particular viewpoint", "To tell an entertaining story", "To describe a beautiful scene", "To explain how something works"],
                answer: "A",
                explanation: "Argumentative essays present a claim and use evidence and reasoning to persuade readers."
            },
            {
                type: "argumentative_basics",
                question: "What is a 'counterargument' in an argumentative essay?",
                options: ["An opposing viewpoint that the writer addresses", "The main point of the essay", "Evidence supporting the thesis", "A personal anecdote"],
                answer: "A",
                explanation: "A counterargument acknowledges and addresses opposing views, then refutes them to strengthen the main argument."
            },
            {
                type: "argumentative_basics",
                question: "Which element is essential in an argumentative essay?",
                options: ["Clear thesis statement", "Fictional characters", "Rhyming scheme", "Sensory descriptions"],
                answer: "A",
                explanation: "A clear, debatable thesis statement is essential as it presents the main argument of the essay."
            },
            {
                type: "argumentative_basics",
                question: "What type of evidence is most effective in argumentative essays?",
                options: ["Facts, statistics, and expert opinions", "Personal feelings only", "Fictional stories", "Vague generalizations"],
                answer: "A",
                explanation: "Argumentative essays require credible evidence like facts, statistics, and expert opinions to support claims."
            },
            // Identifying Essay Types (81-100)
            {
                type: "identifying_types",
                question: "An essay titled 'My First Day at a New School' would most likely be:",
                options: ["Narrative", "Descriptive", "Expository", "Argumentative"],
                answer: "A",
                explanation: "This title suggests a personal story about an experience, which is characteristic of narrative essays."
            },
            {
                type: "identifying_types",
                question: "'The Beauty of Autumn in New England' would be which type of essay?",
                options: ["Descriptive", "Narrative", "Expository", "Argumentative"],
                answer: "A",
                explanation: "This title focuses on describing a season's appearance, which is characteristic of descriptive essays."
            },
            {
                type: "identifying_types",
                question: "'The Benefits of Recycling for Our Community' would be which type of essay?",
                options: ["Expository", "Narrative", "Descriptive", "Argumentative"],
                answer: "A",
                explanation: "This title suggests explaining benefits and facts about recycling, which is expository writing."
            },
            {
                type: "identifying_types",
                question: "'Why School Uniforms Should Be Mandatory' would be which type of essay?",
                options: ["Argumentative", "Narrative", "Descriptive", "Expository"],
                answer: "A",
                explanation: "This title presents a debatable position that the writer would need to argue and support with evidence."
            },
            // Essay Structure (101-120)
            {
                type: "essay_structure",
                question: "What are the three main parts of an essay?",
                options: ["Introduction, body, conclusion", "Beginning, climax, ending", "Thesis, evidence, summary", "Title, paragraphs, references"],
                answer: "A",
                explanation: "Essays typically have three main parts: introduction (presents thesis), body (develops ideas), and conclusion (summarizes and closes)."
            },
            {
                type: "essay_structure",
                question: "What is a thesis statement?",
                options: ["The main idea or argument of the essay", "A question at the beginning", "A summary of sources", "The title of the essay"],
                answer: "A",
                explanation: "A thesis statement presents the main idea or argument that the entire essay will develop and support."
            },
            {
                type: "essay_structure",
                question: "How many paragraphs are typically in a standard five-paragraph essay?",
                options: ["Five: introduction, three body paragraphs, conclusion", "Three: beginning, middle, end", "Seven: intro, five body, conclusion", "Four: thesis, two body, conclusion"],
                answer: "A",
                explanation: "The standard five-paragraph essay includes an introduction, three body paragraphs, and a conclusion."
            },
            {
                type: "essay_structure",
                question: "What should each body paragraph begin with?",
                options: ["A topic sentence", "A quotation", "A rhetorical question", "A personal anecdote"],
                answer: "A",
                explanation: "Each body paragraph should begin with a topic sentence that introduces the paragraph's main idea."
            },
            // Writing Techniques (121-140)
            {
                type: "writing_techniques",
                question: "What is 'show, don't tell' in writing?",
                options: ["Using descriptive details instead of simple statements", "Using bullet points instead of paragraphs", "Writing in all capital letters", "Including pictures with the essay"],
                answer: "A",
                explanation: "'Show, don't tell' means using vivid details, actions, and dialogue to help readers experience the story rather than just being told about it."
            },
            {
                type: "writing_techniques",
                question: "Which is an example of a simile?",
                options: ["Her smile was as bright as the sun.", "The sun smiled down on us.", "Bright sunny smile.", "She had a sunny smile."],
                answer: "A",
                explanation: "A simile compares two different things using 'like' or 'as' ('as bright as the sun')."
            },
            {
                type: "writing_techniques",
                question: "What is the purpose of transitional words and phrases?",
                options: ["To connect ideas and improve flow", "To make the essay longer", "To show off vocabulary", "To meet word count requirements"],
                answer: "A",
                explanation: "Transitional words (however, therefore, furthermore, etc.) help connect ideas and create smooth transitions between paragraphs and sentences."
            },
            {
                type: "writing_techniques",
                question: "What does 'revising' an essay involve?",
                options: ["Improving content, organization, and clarity", "Just correcting spelling errors", "Changing the font and margins", "Asking someone else to write it"],
                answer: "A",
                explanation: "Revision focuses on improving the essay's content, organization, and clarity, while editing focuses on grammar and mechanics."
            },
            // Real-world Applications (141-160)
            {
                type: "real_world",
                question: "Which type of essay would a journalist write about their travel experiences?",
                options: ["Narrative", "Argumentative", "Expository", "Descriptive"],
                answer: "A",
                explanation: "Travel writing often uses narrative techniques to tell the story of the journey and experiences."
            },
            {
                type: "real_world",
                question: "A product review that describes how something looks, feels, and works would be:",
                options: ["Descriptive", "Narrative", "Argumentative", "Expository"],
                answer: "A",
                explanation: "Product reviews often use descriptive writing to help readers visualize and understand the product."
            },
            {
                type: "real_world",
                question: "A scientific article explaining how photosynthesis works would be:",
                options: ["Expository", "Narrative", "Descriptive", "Argumentative"],
                answer: "A",
                explanation: "Scientific writing typically explains processes and concepts, which is expository writing."
            },
            {
                type: "real_world",
                question: "A newspaper editorial supporting a political candidate would be:",
                options: ["Argumentative", "Narrative", "Descriptive", "Expository"],
                answer: "A",
                explanation: "Editorials present arguments and try to persuade readers, which is argumentative writing."
            },
            // Common Mistakes (161-180)
            {
                type: "common_mistakes",
                question: "What is a common mistake in narrative essays?",
                options: ["Telling rather than showing", "Using too many facts", "Being too persuasive", "Including too much description"],
                answer: "A",
                explanation: "Beginning writers often tell readers what happened rather than showing through actions, dialogue, and details."
            },
            {
                type: "common_mistakes",
                question: "What weakens an argumentative essay?",
                options: ["Using emotional appeals without evidence", "Including a clear thesis", "Addressing counterarguments", "Using credible sources"],
                answer: "A",
                explanation: "Relying only on emotional appeals without factual evidence weakens an argumentative essay's credibility."
            },
            {
                type: "common_mistakes",
                question: "What makes descriptive writing ineffective?",
                options: ["Using vague, general words", "Appealing to multiple senses", "Using specific details", "Organizing spatially"],
                answer: "A",
                explanation: "Vague words like 'nice,' 'good,' or 'beautiful' without specific details make descriptive writing weak."
            },
            {
                type: "common_mistakes",
                question: "What is wrong with an expository essay that includes the writer's opinions?",
                options: ["Expository writing should be objective", "Opinions make it more interesting", "It's required for expository essays", "There's nothing wrong with this"],
                answer: "A",
                explanation: "Expository writing should inform or explain objectively without including the writer's personal opinions."
            },
            // Advanced Concepts (181-200)
            {
                type: "advanced_concepts",
                question: "What is 'voice' in writing?",
                options: ["The writer's unique style and personality", "How loud the essay should be read", "The number of characters used", "The font style chosen"],
                answer: "A",
                explanation: "Voice refers to the writer's unique style, tone, and personality that comes through in their writing."
            },
            {
                type: "advanced_concepts",
                question: "What does 'audience awareness' mean?",
                options: ["Considering who will read your writing", "Making sure people can hear you read", "Writing for yourself only", "Using complex vocabulary"],
                answer: "A",
                explanation: "Audience awareness means considering your readers' knowledge, interests, and expectations when writing."
            },
            {
                type: "advanced_concepts",
                question: "What is the difference between revising and editing?",
                options: ["Revising improves content, editing fixes errors", "They mean the same thing", "Editing comes before revising", "Only professional writers do these"],
                answer: "A",
                explanation: "Revising focuses on improving content, organization, and clarity, while editing focuses on grammar, punctuation, and spelling errors."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent essay knowledge!",
            "Perfect understanding of essay types!",
            "Great writing insight!",
            "You're an essay expert!",
            "Outstanding literary analysis!",
            "Brilliant writing skills!",
            "You think like a professional writer!",
            "Masterful understanding of essay structure!",
            "Exceptional writing knowledge!",
            "You're ready to write award-winning essays!"
        ];

        // Literary facts
        const literaryFacts = [
            "The word 'essay' comes from the French word 'essayer' meaning 'to try' or 'to attempt'.",
            "The first known essays were written by Michel de Montaigne in the 16th century.",
            "The five-paragraph essay structure became popular in the early 20th century in American schools.",
            "Some of the most famous essayists include George Orwell, Virginia Woolf, and James Baldwin.",
            "The longest essay ever written was over 2.1 million words about the history of civilization!",
            "Ernest Hemingway wrote his famous short story 'The Old Man and the Sea' in only eight weeks.",
            "The average college application essay is 500-650 words long.",
            "Journaling daily can improve essay writing skills by 40% according to educational research."
        ];

        // Essay type definitions
        const essayTypes = [
            {
                type: "Narrative",
                icon: "üìñ",
                color: "var(--primary-blue)",
                definition: "Tells a story or recounts events from the writer's perspective.",
                purpose: "To entertain, share experiences, or convey a message through storytelling.",
                features: ["First-person perspective", "Chronological order", "Characters and setting", "Plot with conflict", "Dialogue", "Descriptive language"],
                examples: ["Personal experiences", "Travel stories", "Historical events from personal view", "Memoirs"],
                tips: ["Use 'show, don't tell'", "Include sensory details", "Create engaging characters", "Build tension and resolution"]
            },
            {
                type: "Descriptive",
                icon: "üé®",
                color: "var(--secondary-purple)",
                definition: "Paints a vivid picture using sensory details and figurative language.",
                purpose: "To create a strong impression and help readers visualize a subject.",
                features: ["Sensory details (sight, sound, smell, taste, touch)", "Figurative language", "Spatial organization", "Strong imagery", "Emotional appeal"],
                examples: ["Describing a place", "Portraying a person", "Depicting an object", "Capturing a moment"],
                tips: ["Appeal to all five senses", "Use metaphors and similes", "Choose specific over general words", "Show emotions through description"]
            },
            {
                type: "Expository",
                icon: "üìä",
                color: "var(--accent-orange)",
                definition: "Explains, informs, or describes using facts and evidence.",
                purpose: "To educate readers about a topic in an objective, factual manner.",
                features: ["Third-person perspective", "Facts and statistics", "Clear organization", "Logical flow", "Objective tone", "Evidence-based"],
                examples: ["How-to guides", "Compare and contrast", "Cause and effect", "Problem and solution", "Process explanations"],
                tips: ["Stay objective and factual", "Use clear transitions", "Cite reliable sources", "Define technical terms"]
            },
            {
                type: "Argumentative",
                icon: "‚öñÔ∏è",
                color: "var(--accent-green)",
                definition: "Presents a claim supported by evidence and reasoning to persuade readers.",
                purpose: "To convince readers to accept a particular viewpoint or take action.",
                features: ["Clear thesis/argument", "Evidence and reasoning", "Counterarguments addressed", "Persuasive techniques", "Formal tone", "Logical organization"],
                examples: ["Persuasive essays", "Editorials", "Policy proposals", "Debate positions", "Critical reviews"],
                tips: ["Choose a debatable topic", "Acknowledge opposing views", "Use credible evidence", "Appeal to logic and emotions appropriately"]
            }
        ];

        // Essay examples
        const essayExamples = {
            narrative: [
                {
                    title: "The Day I Learned to Ride a Bike",
                    excerpt: "I can still remember the mix of excitement and terror as my father released his grip on the back of my bright red bicycle. The world seemed to tilt as I pedaled furiously, the training wheels having been removed just moments before. Wind rushed past my ears, carrying with it my father's distant shout: 'You're doing it!' In that moment, I wasn't just learning to balance on two wheels; I was discovering independence."
                },
                {
                    title: "A Storm to Remember",
                    excerpt: "The sky darkened unnaturally fast that afternoon, transforming from brilliant blue to ominous purple in mere minutes. Grandma hurried us into the basement as the first hailstones began their furious percussion on the roof above. Huddled together by candlelight, she told stories of storms from her childhood, her voice a steady anchor in the chaos outside. That night, I learned that the strongest shelters aren't made of concrete, but of family."
                }
            ],
            descriptive: [
                {
                    title: "Grandma's Kitchen",
                    excerpt: "The air in Grandma's kitchen hung thick with the comforting scent of cinnamon and yeast, a warm blanket of aroma that welcomed you before you even crossed the threshold. Sunlight streamed through lace curtains, casting delicate patterns on the worn wooden floor. Every surface told a story: the flour-dusted counter where countless pies had been rolled, the chipped ceramic cookie jar shaped like a rooster, the windowsill lined with thriving herbs in mismatched pots."
                },
                {
                    title: "Winter's First Snow",
                    excerpt: "The first snow of winter arrived silently in the night, transforming the familiar world into a pristine wonderland. Each branch of the ancient oak tree wore a delicate sleeve of white, while the fence posts sported crystalline caps that sparkled like diamonds in the morning sun. The world held its breath under this soft white blanket, the usual sounds muffled into a profound, peaceful silence broken only by the occasional soft thump of snow sliding from an overladen branch."
                }
            ],
            expository: [
                {
                    title: "The Life Cycle of a Butterfly",
                    excerpt: "Butterflies undergo a remarkable four-stage transformation called complete metamorphosis. The cycle begins when a female butterfly lays tiny eggs on a host plant. After several days, these eggs hatch into larvae, commonly known as caterpillars. The caterpillar's sole purpose is eating, and it grows exponentially, shedding its skin several times. Once fully grown, it forms a chrysalis, where its body undergoes a complete reorganization. Finally, an adult butterfly emerges, ready to continue the cycle."
                },
                {
                    title: "How Recycling Benefits Our Environment",
                    excerpt: "Recycling plays a crucial role in environmental conservation by reducing waste in landfills, conserving natural resources, and saving energy. When we recycle paper, we reduce deforestation and save approximately 17 trees per ton of paper recycled. Aluminum recycling saves 95% of the energy needed to make new aluminum from raw materials. Additionally, recycling reduces greenhouse gas emissions that contribute to climate change and prevents pollution by reducing the need to extract and process new raw materials."
                }
            ],
            argumentative: [
                {
                    title: "Why School Uniforms Should Be Mandatory",
                    excerpt: "School uniforms should be mandatory in all public schools because they promote equality, reduce distractions, and enhance school safety. Uniforms eliminate visible economic disparities among students, as all wear the same attire regardless of family income. This creates a more equitable learning environment where students are judged by their character and achievements rather than their clothing brands. Furthermore, uniforms reduce fashion-related distractions and peer pressure, allowing students to focus more on academics."
                },
                {
                    title: "The Importance of Preserving Local Libraries",
                    excerpt: "Despite digital advancements, local libraries remain essential community resources that must be preserved and funded. Libraries provide free access to information for all community members regardless of socioeconomic status. They serve as community hubs offering literacy programs, computer access for those without technology at home, and safe spaces for students and seniors. While e-books and internet resources are valuable, they cannot replace the human connection, expert guidance, and inclusive environment that physical libraries provide."
                }
            ]
        };

        // Writing vocabulary
        const writingVocabulary = [
            { word: "Thesis", definition: "The main idea or argument of an essay" },
            { word: "Transition", definition: "Words or phrases that connect ideas between sentences and paragraphs" },
            { word: "Anecdote", definition: "A short personal story used to illustrate a point" },
            { word: "Metaphor", definition: "A comparison between two unlike things without using 'like' or 'as'" },
            { word: "Simile", definition: "A comparison using 'like' or 'as'" },
            { word: "Personification", definition: "Giving human qualities to non-human things" },
            { word: "Hook", definition: "An engaging opening sentence that captures the reader's attention" },
            { word: "Conclusion", definition: "The final paragraph that summarizes the essay's main points" },
            { word: "Evidence", definition: "Facts, examples, or quotes used to support an argument" },
            { word: "Revision", definition: "The process of improving content, organization, and clarity" },
            { word: "Editing", definition: "Correcting grammar, punctuation, and spelling errors" },
            { word: "Voice", definition: "The writer's unique style and personality in their writing" }
        ];

        // Writing tips by essay type
        const writingTips = [
            {
                type: "All Essays",
                tips: [
                    "Always start with an outline",
                    "Write a strong thesis statement",
                    "Use specific examples and details",
                    "Proofread carefully before submitting"
                ]
            },
            {
                type: "Narrative",
                tips: [
                    "Show, don't tell",
                    "Use dialogue to bring characters to life",
                    "Include sensory details",
                    "Create a clear beginning, middle, and end"
                ]
            },
            {
                type: "Descriptive",
                tips: [
                    "Appeal to all five senses",
                    "Use figurative language",
                    "Organize details spatially",
                    "Show emotions through description"
                ]
            },
            {
                type: "Expository",
                tips: [
                    "Stay objective and factual",
                    "Use clear transitions between ideas",
                    "Cite reliable sources",
                    "Define technical terms for your audience"
                ]
            },
            {
                type: "Argumentative",
                tips: [
                    "Choose a debatable topic",
                    "Acknowledge and refute counterarguments",
                    "Use credible evidence",
                    "Appeal to logic rather than just emotion"
                ]
            }
        ];

        // Common writing mistakes
        const commonMistakes = [
            "Using vague words instead of specific details",
            "Forgetting to proofread for spelling and grammar errors",
            "Not having a clear thesis statement",
            "Using inappropriate tone for the audience",
            "Including irrelevant information",
            "Not providing enough evidence to support claims",
            "Using clich√©s instead of original expressions",
            "Inconsistent verb tenses",
            "Run-on sentences and sentence fragments",
            "Plagiarism (using others' work without credit)"
        ];

        // Essay prompts for practice
        const essayPrompts = {
            narrative: [
                "Write about a time you faced and overcame a fear.",
                "Describe your most memorable birthday celebration.",
                "Tell the story of how you met your best friend.",
                "Write about a time you learned an important lesson."
            ],
            descriptive: [
                "Describe your favorite place in vivid detail.",
                "Paint a word picture of a stormy night.",
                "Describe a family heirloom and its significance.",
                "Describe your favorite meal using all five senses."
            ],
            expository: [
                "Explain how to prepare for an important test.",
                "Describe the causes and effects of bullying in schools.",
                "Compare and contrast two seasons.",
                "Explain the process of making your favorite food."
            ],
            argumentative: [
                "Should students have less homework? Why or why not?",
                "Are video games beneficial or harmful for teenagers?",
                "Should school start later in the morning?",
                "Is social media more helpful or harmful to society?"
            ]
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const literaryFact = document.getElementById('literaryFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade7EnglishEssays');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade7EnglishEssays', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade7EnglishEssays_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade7EnglishEssays_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're an essay writing expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Excellent! You have strong essay writing skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Great work! You understand different essay types well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! Keep practicing your essay writing!";
            } else {
                scoreMessage.textContent = "Keep learning! Essay writing is essential for academic success!";
            }
        }

        // Create literary fact display
        function createLiteraryFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'literary-fact';
            
            factDiv.innerHTML = `<strong>Writing Fact:</strong> ${literaryFacts[Math.floor(Math.random() * literaryFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "narrative_basics": "üìñ",
                "descriptive_basics": "üé®",
                "expository_basics": "üìä",
                "argumentative_basics": "‚öñÔ∏è",
                "identifying_types": "üîç",
                "essay_structure": "üèóÔ∏è",
                "writing_techniques": "‚úçÔ∏è",
                "real_world": "üåç",
                "common_mistakes": "‚ö†Ô∏è",
                "advanced_concepts": "üß†"
            };
            
            let conceptName = "Narrative Essays";
            let conceptIcon = "üìñ";
            
            if (question.type.includes("narrative_basics")) {
                conceptName = "Narrative Essays";
                conceptIcon = conceptIcons.narrative_basics;
            } else if (question.type.includes("descriptive_basics")) {
                conceptName = "Descriptive Essays";
                conceptIcon = conceptIcons.descriptive_basics;
            } else if (question.type.includes("expository_basics")) {
                conceptName = "Expository Essays";
                conceptIcon = conceptIcons.expository_basics;
            } else if (question.type.includes("argumentative_basics")) {
                conceptName = "Argumentative Essays";
                conceptIcon = conceptIcons.argumentative_basics;
            } else if (question.type.includes("identifying_types")) {
                conceptName = "Identifying Essay Types";
                conceptIcon = conceptIcons.identifying_types;
            } else if (question.type.includes("essay_structure")) {
                conceptName = "Essay Structure";
                conceptIcon = conceptIcons.essay_structure;
            } else if (question.type.includes("writing_techniques")) {
                conceptName = "Writing Techniques";
                conceptIcon = conceptIcons.writing_techniques;
            } else if (question.type.includes("real_world")) {
                conceptName = "Real World Applications";
                conceptIcon = conceptIcons.real_world;
            } else if (question.type.includes("common_mistakes")) {
                conceptName = "Common Mistakes";
                conceptIcon = conceptIcons.common_mistakes;
            } else if (question.type.includes("advanced_concepts")) {
                conceptName = "Advanced Concepts";
                conceptIcon = conceptIcons.advanced_concepts;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("narrative_basics")) {
                label.textContent = "Telling stories and sharing experiences";
            } else if (question.type.includes("descriptive_basics")) {
                label.textContent = "Painting pictures with words";
            } else if (question.type.includes("expository_basics")) {
                label.textContent = "Explaining and informing with facts";
            } else if (question.type.includes("argumentative_basics")) {
                label.textContent = "Persuading with evidence and reasoning";
            } else if (question.type.includes("identifying_types")) {
                label.textContent = "Recognizing different essay purposes";
            } else if (question.type.includes("essay_structure")) {
                label.textContent = "Organizing ideas effectively";
            } else if (question.type.includes("writing_techniques")) {
                label.textContent = "Using literary devices and strategies";
            } else if (question.type.includes("real_world")) {
                label.textContent = "Applying essay skills in real life";
            } else if (question.type.includes("common_mistakes")) {
                label.textContent = "Avoiding frequent writing errors";
            } else if (question.type.includes("advanced_concepts")) {
                label.textContent = "Mastering sophisticated writing concepts";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create essay writing visualization
        function createEssayVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const randomNarrative = essayExamples.narrative[Math.floor(Math.random() * essayExamples.narrative.length)];
            const randomDescriptive = essayExamples.descriptive[Math.floor(Math.random() * essayExamples.descriptive.length)];
            const randomExpository = essayExamples.expository[Math.floor(Math.random() * essayExamples.expository.length)];
            const randomArgumentative = essayExamples.argumentative[Math.floor(Math.random() * essayExamples.argumentative.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-teal);">Essay Writing Explorer</h3>
                
                <div class="essay-structure">
                    <div class="structure-title">Basic Essay Structure</div>
                    
                    <div class="structure-diagram">
                        <div class="structure-part intro">Introduction
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Hook ‚Ä¢ Background ‚Ä¢ Thesis Statement</div>
                        </div>
                        
                        <div style="text-align: center; color: var(--text-secondary); margin: 5px 0;">‚Üì</div>
                        
                        <div class="structure-part body">Body Paragraphs
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Topic Sentence ‚Ä¢ Evidence ‚Ä¢ Analysis ‚Ä¢ Transition</div>
                        </div>
                        
                        <div style="text-align: center; color: var(--text-secondary); margin: 5px 0;">‚Üì</div>
                        
                        <div class="structure-part conclusion">Conclusion
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Restate Thesis ‚Ä¢ Summarize ‚Ä¢ Final Thought</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="showStructureDetails()">
                            Learn Essay Structure
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="practiceEssayStructure()">
                            Practice Structure
                        </button>
                    </div>
                </div>
                
                <div class="essay-examples">
                    <div class="structure-title">Essay Examples by Type</div>
                    
                    <div class="example-tabs">
                        <div class="example-tab active" onclick="switchExample('narrative')">Narrative</div>
                        <div class="example-tab" onclick="switchExample('descriptive')">Descriptive</div>
                        <div class="example-tab" onclick="switchExample('expository')">Expository</div>
                        <div class="example-tab" onclick="switchExample('argumentative')">Argumentative</div>
                    </div>
                    
                    <div class="example-content" id="exampleContent">
                        <strong>${randomNarrative.title}</strong><br><br>
                        ${randomNarrative.excerpt}
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="analyzeExample()">
                            Analyze This Example
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="generateNewExample()">
                            New Example
                        </button>
                    </div>
                </div>
                
                <div class="writing-tips">
                    <div class="structure-title">Writing Tips by Essay Type</div>
                    
                    <div class="tips-grid">
                        ${writingTips.map((typeTips, idx) => `
                            <div class="tip-box">
                                <div class="tip-title">${typeTips.type}</div>
                                <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                                    ${typeTips.tips.map(tip => `<li>${tip}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="vocabulary-builder">
                    <div class="structure-title">Essay Writing Vocabulary</div>
                    
                    <div class="vocabulary-grid">
                        ${writingVocabulary.slice(0, 6).map((vocab, idx) => `
                            <div class="vocab-word" onclick="showVocabulary('${vocab.word}')">
                                <div class="word-text">${vocab.word}</div>
                                <div class="word-definition">${vocab.definition}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="showAllVocabulary()">
                            View All Vocabulary
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="vocabularyQuiz()">
                            Vocabulary Quiz
                        </button>
                    </div>
                </div>
                
                <table class="compare-table">
                    <thead>
                        <tr>
                            <th>Essay Type</th>
                            <th>Purpose</th>
                            <th>Key Features</th>
                            <th>Example Topics</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${essayTypes.map((essayType, idx) => `
                            <tr onclick="showEssayTypeDetails('${essayType.type}')" style="cursor: pointer;">
                                <td style="font-weight: bold; color: ${essayType.color};">${essayType.type}</td>
                                <td>${essayType.purpose}</td>
                                <td>${essayType.features.slice(0, 2).join(', ')}...</td>
                                <td>${essayType.examples.slice(0, 2).join(', ')}...</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="writing-practice">
                    <div class="practice-title">Interactive Writing Practice</div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="narrativePractice()">Narrative Practice</div>
                        <div class="practice-button" onclick="descriptivePractice()">Descriptive Practice</div>
                        <div class="practice-button" onclick="expositoryPractice()">Expository Practice</div>
                        <div class="practice-button" onclick="argumentativePractice()">Argumentative Practice</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice different types of essay writing
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Writing Prompts:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Narrative: Write about a time you helped someone.<br>
                        2. Descriptive: Describe your favorite room in detail.<br>
                        3. Expository: Explain how to make a sandwich.<br>
                        4. Argumentative: Should students wear uniforms? Why or why not?
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--primary-blue);">
                    <div style="color: var(--primary-blue); font-weight: bold; margin-bottom: 10px; text-align: center;">The Writing Process</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>1. Prewriting:</strong> Brainstorm ideas and create an outline<br>
                        <strong>2. Drafting:</strong> Write your first complete version<br>
                        <strong>3. Revising:</strong> Improve content, organization, and clarity<br>
                        <strong>4. Editing:</strong> Fix grammar, punctuation, and spelling<br>
                        <strong>5. Publishing:</strong> Share your final polished essay
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-red);">
                    <div class="structure-title">Common Writing Mistakes to Avoid</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Watch out for these frequent errors!
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${commonMistakes.slice(0, 3).map((mistake, idx) => `
                            <div class="tip-box" style="border-left-color: var(--accent-red);" onclick="showCommonMistake(${idx})">
                                <div class="tip-title" style="color: var(--accent-red);">Mistake #${idx + 1}</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">${mistake}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Global functions for interactive practice
        window.showEssayType = function(type) {
            const essayType = essayTypes.find(e => e.type.toLowerCase() === type);
            if (!essayType) return;
            
            let info = `${essayType.icon} ${essayType.type} Essay\n\n`;
            info += `Definition: ${essayType.definition}\n\n`;
            info += `Purpose: ${essayType.purpose}\n\n`;
            info += `Key Features:\n`;
            essayType.features.forEach(feature => {
                info += `‚Ä¢ ${feature}\n`;
            });
            info += `\nExamples:\n`;
            essayType.examples.forEach(example => {
                info += `‚Ä¢ ${example}\n`;
            });
            info += `\nWriting Tips:\n`;
            essayType.tips.forEach(tip => {
                info += `‚Ä¢ ${tip}\n`;
            });
            
            alert(info);
        };

        window.showStructureDetails = function() {
            let info = `Basic Essay Structure\n\n`;
            info += `1. Introduction (1 paragraph)\n`;
            info += `   ‚Ä¢ Hook: Grab reader's attention\n`;
            info += `   ‚Ä¢ Background: Provide context\n`;
            info += `   ‚Ä¢ Thesis: Main idea/argument\n\n`;
            info += `2. Body (3+ paragraphs)\n`;
            info += `   ‚Ä¢ Topic sentence: Main idea of paragraph\n`;
            info += `   ‚Ä¢ Evidence: Facts, examples, quotes\n`;
            info += `   ‚Ä¢ Analysis: Explain how evidence supports point\n`;
            info += `   ‚Ä¢ Transition: Connect to next paragraph\n\n`;
            info += `3. Conclusion (1 paragraph)\n`;
            info += `   ‚Ä¢ Restate thesis in new words\n`;
            info += `   ‚Ä¢ Summarize main points\n`;
            info += `   ‚Ä¢ Final thought or call to action\n\n`;
            info += `Remember: Each paragraph should focus on one main idea!`;
            
            alert(info);
        };

        window.practiceEssayStructure = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-teal);">Essay Structure Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-blue); font-weight: bold; margin-bottom: 10px;">
                            Topic: "The Importance of Reading"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Drag and drop the elements into the correct order
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${[
                            "Hook: Did you know reading can improve your vocabulary by 30%?",
                            "Thesis: Reading is essential for academic success and personal growth.",
                            "Body Paragraph 1: Reading improves vocabulary and comprehension skills.",
                            "Body Paragraph 2: Reading enhances imagination and creativity.",
                            "Body Paragraph 3: Reading reduces stress and improves mental health.",
                            "Conclusion: Therefore, making time for regular reading is crucial for everyone."
                        ].map((element, idx) => `
                            <div class="structure-part" style="cursor: move; background: var(--dark-surface); color: var(--text-primary);" 
                                 draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)" id="element${idx}">
                                ${element}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn btn-small btn-primary" onclick="checkStructureOrder()">
                            Check Order
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showCorrectStructure()">
                            Show Correct Structure
                        </button>
                    </div>
                    
                    <div id="structureResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        // Drag and drop functions for structure practice
        let draggedElement = null;

        window.dragStart = function(event) {
            draggedElement = event.target;
            event.dataTransfer.setData('text/plain', event.target.id);
            event.target.style.opacity = '0.5';
        };

        window.dragOver = function(event) {
            event.preventDefault();
        };

        window.drop = function(event) {
            event.preventDefault();
            if (event.target.className.includes('structure-part')) {
                const parent = event.target.parentNode;
                const draggedIndex = Array.from(parent.children).indexOf(draggedElement);
                const targetIndex = Array.from(parent.children).indexOf(event.target);
                
                if (draggedIndex < targetIndex) {
                    parent.insertBefore(draggedElement, event.target.nextSibling);
                } else {
                    parent.insertBefore(draggedElement, event.target);
                }
            }
            if (draggedElement) {
                draggedElement.style.opacity = '1';
                draggedElement = null;
            }
        };

        window.checkStructureOrder = function() {
            const resultDiv = document.getElementById('structureResult');
            if (!resultDiv) return;
            
            const elements = document.querySelectorAll('.structure-part');
            const order = Array.from(elements).map(el => el.textContent);
            
            // Check if order is correct
            const correctOrder = [
                "Hook: Did you know reading can improve your vocabulary by 30%?",
                "Thesis: Reading is essential for academic success and personal growth.",
                "Body Paragraph 1: Reading improves vocabulary and comprehension skills.",
                "Body Paragraph 2: Reading enhances imagination and creativity.",
                "Body Paragraph 3: Reading reduces stress and improves mental health.",
                "Conclusion: Therefore, making time for regular reading is crucial for everyone."
            ];
            
            let isCorrect = true;
            for (let i = 0; i < order.length; i++) {
                if (order[i] !== correctOrder[i]) {
                    isCorrect = false;
                    break;
                }
            }
            
            if (isCorrect) {
                resultDiv.textContent = "‚úì Correct! Perfect essay structure!";
                resultDiv.style.color = 'var(--accent-green)';
            } else {
                resultDiv.textContent = "Not quite right. Remember: Introduction ‚Üí Body ‚Üí Conclusion";
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showCorrectStructure = function() {
            let info = `Correct Essay Structure:\n\n`;
            info += `1. Introduction\n`;
            info += `   ‚Ä¢ Hook: Grab attention with interesting fact\n`;
            info += `   ‚Ä¢ Thesis: State main argument\n\n`;
            info += `2. Body Paragraphs\n`;
            info += `   ‚Ä¢ Each paragraph focuses on one supporting point\n`;
            info += `   ‚Ä¢ Present evidence and analysis\n\n`;
            info += `3. Conclusion\n`;
            info += `   ‚Ä¢ Restate thesis\n`;
            info += `   ‚Ä¢ Summarize main points\n`;
            info += `   ‚Ä¢ End with strong final thought\n\n`;
            info += `Remember to use transitions between paragraphs!`;
            
            alert(info);
        };

        window.switchExample = function(type) {
            const tabs = document.querySelectorAll('.example-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            event.target.classList.add('active');
            
            const exampleContent = document.getElementById('exampleContent');
            const examples = essayExamples[type];
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            
            exampleContent.innerHTML = `<strong>${randomExample.title}</strong><br><br>${randomExample.excerpt}`;
            
            // Store current example for analysis
            window.currentExample = { type, ...randomExample };
        };

        window.analyzeExample = function() {
            if (!window.currentExample) {
                alert("Please select an example first!");
                return;
            }
            
            let info = `Analyzing: ${window.currentExample.title}\n\n`;
            info += `Essay Type: ${window.currentExample.type.charAt(0).toUpperCase() + window.currentExample.type.slice(1)}\n\n`;
            info += `Key Features:\n`;
            
            if (window.currentExample.type === 'narrative') {
                info += `‚Ä¢ Tells a personal story\n`;
                info += `‚Ä¢ Uses first-person perspective\n`;
                info += `‚Ä¢ Includes descriptive details\n`;
                info += `‚Ä¢ Has chronological order\n`;
            } else if (window.currentExample.type === 'descriptive') {
                info += `‚Ä¢ Creates vivid imagery\n`;
                info += `‚Ä¢ Appeals to senses\n`;
                info += `‚Ä¢ Uses figurative language\n`;
                info += `‚Ä¢ Focuses on details\n`;
            } else if (window.currentExample.type === 'expository') {
                info += `‚Ä¢ Explains or informs\n`;
                info += `‚Ä¢ Uses factual information\n`;
                info += `‚Ä¢ Logical organization\n`;
                info += `‚Ä¢ Objective tone\n`;
            } else if (window.currentExample.type === 'argumentative') {
                info += `‚Ä¢ Presents an argument\n`;
                info += `‚Ä¢ Uses evidence\n`;
                info += `‚Ä¢ Persuasive language\n`;
                info += `‚Ä¢ Addresses counterarguments\n`;
            }
            
            info += `\nWhat makes this a good example?\n`;
            info += `‚Ä¢ Strong opening that grabs attention\n`;
            info += `‚Ä¢ Clear focus on the main idea\n`;
            info += `‚Ä¢ Appropriate tone for the essay type\n`;
            info += `‚Ä¢ Effective use of language features\n`;
            
            alert(info);
        };

        window.generateNewExample = function() {
            const activeTab = document.querySelector('.example-tab.active');
            if (!activeTab) return;
            
            const type = activeTab.textContent.toLowerCase();
            const examples = essayExamples[type];
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            
            const exampleContent = document.getElementById('exampleContent');
            exampleContent.innerHTML = `<strong>${randomExample.title}</strong><br><br>${randomExample.excerpt}`;
            
            // Store current example for analysis
            window.currentExample = { type, ...randomExample };
        };

        window.showVocabulary = function(word) {
            const vocab = writingVocabulary.find(v => v.word === word);
            if (!vocab) return;
            
            let info = `${vocab.word}\n\n`;
            info += `Definition: ${vocab.definition}\n\n`;
            info += `Example in a sentence:\n`;
            
            if (word === 'Thesis') {
                info += `"The thesis of my essay is that regular exercise improves both physical and mental health."`;
            } else if (word === 'Transition') {
                info += `"I used transitional words like 'however' and 'therefore' to connect my ideas smoothly."`;
            } else if (word === 'Anecdote') {
                info += `"I began my essay with an anecdote about my first day at school to engage the reader."`;
            } else if (word === 'Metaphor') {
                info += `"Her smile was a ray of sunshine on a cloudy day."`;
            } else if (word === 'Simile') {
                info += `"He ran as fast as a cheetah chasing its prey."`;
            } else if (word === 'Personification') {
                info += `"The wind whispered secrets through the trees."`;
            } else if (word === 'Hook') {
                info += `"My hook was a surprising statistic about how much time teenagers spend on phones."`;
            } else if (word === 'Conclusion') {
                info += `"In my conclusion, I summarized my main points and ended with a call to action."`;
            } else if (word === 'Evidence') {
                info += `"I used statistics from a recent study as evidence to support my argument."`;
            } else if (word === 'Revision') {
                info += `"During revision, I realized my paragraphs weren't in logical order, so I rearranged them."`;
            } else if (word === 'Editing') {
                info += `"When editing, I corrected all the spelling errors and fixed my punctuation."`;
            } else if (word === 'Voice') {
                info += `"My writing voice is casual and friendly, which makes my essays relatable to readers."`;
            }
            
            alert(info);
        };

        window.showAllVocabulary = function() {
            let info = `Essay Writing Vocabulary\n\n`;
            
            writingVocabulary.forEach((vocab, index) => {
                info += `${index + 1}. ${vocab.word}: ${vocab.definition}\n`;
            });
            
            info += `\nTip: Try to use these words when discussing or writing about essays!`;
            
            alert(info);
        };

        window.vocabularyQuiz = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const randomVocab = writingVocabulary[Math.floor(Math.random() * writingVocabulary.length)];
            const wrongOptions = writingVocabulary
                .filter(v => v.word !== randomVocab.word)
                .sort(() => Math.random() - 0.5)
                .slice(0, 3)
                .map(v => v.definition);
            
            const allOptions = [
                randomVocab.definition,
                ...wrongOptions
            ].sort(() => Math.random() - 0.5);
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-indigo);">Vocabulary Quiz</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 10px; font-size: 1.5rem;">
                            ${randomVocab.word}
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            What is the correct definition?
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${allOptions.map((option, idx) => `
                            <div class="option" onclick="checkVocabularyAnswer(this, '${option}', '${randomVocab.definition}')">
                                <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                <div class="option-text">${option}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div id="vocabResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
            
            window.currentVocabWord = randomVocab.word;
        };

        window.checkVocabularyAnswer = function(element, selectedAnswer, correctAnswer) {
            const resultDiv = document.getElementById('vocabResult');
            if (!resultDiv) return;
            
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            if (selectedAnswer === correctAnswer) {
                element.classList.add('correct');
                resultDiv.textContent = `Correct! ${window.currentVocabWord}: ${correctAnswer}`;
                resultDiv.style.color = 'var(--accent-green)';
            } else {
                element.classList.add('incorrect');
                // Find and highlight correct option
                options.forEach(opt => {
                    if (opt.querySelector('.option-text').textContent === correctAnswer) {
                        opt.classList.add('correct');
                    }
                });
                resultDiv.textContent = `Incorrect. ${window.currentVocabWord}: ${correctAnswer}`;
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showEssayTypeDetails = function(type) {
            const essayType = essayTypes.find(e => e.type === type);
            if (!essayType) return;
            
            let info = `${essayType.icon} ${essayType.type} Essay\n\n`;
            info += `Definition: ${essayType.definition}\n\n`;
            info += `Purpose: ${essayType.purpose}\n\n`;
            info += `Key Features:\n`;
            essayType.features.forEach(feature => {
                info += `‚Ä¢ ${feature}\n`;
            });
            info += `\nExamples:\n`;
            essayType.examples.forEach(example => {
                info += `‚Ä¢ ${example}\n`;
            });
            info += `\nWriting Tips:\n`;
            essayType.tips.forEach(tip => {
                info += `‚Ä¢ ${tip}\n`;
            });
            info += `\nRemember: ${essayType.type} essays focus on ${essayType.purpose.toLowerCase()}.`;
            
            alert(info);
        };

        window.narrativePractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = essayPrompts.narrative[Math.floor(Math.random() * essayPrompts.narrative.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--primary-blue);">Narrative Writing Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px;">
                            Writing Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write the opening paragraph of a narrative essay based on this prompt.
                        </div>
                    </div>
                    
                    <textarea id="narrativeWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your narrative essay opening here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzeNarrativeWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showNarrativeExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="writingAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzeNarrativeWriting = function() {
            const writing = document.getElementById('narrativeWriting').value;
            const analysisDiv = document.getElementById('writingAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for key narrative elements
            if (writing.includes('I ') || writing.includes(' my ') || writing.includes(' me ')) {
                analysis += `‚úì Uses first-person perspective (good for narrative)<br>`;
            } else {
                analysis += `‚úó Consider using first-person (I, me, my) for narrative essays<br>`;
            }
            
            if (writing.length > 100) {
                analysis += `‚úì Appropriate length for an opening paragraph<br>`;
            } else {
                analysis += `‚úó Try to write more details (aim for 100+ words)<br>`;
            }
            
            // Check for sensory words
            const sensoryWords = ['saw', 'heard', 'felt', 'smelled', 'tasted', 'looked', 'sounded', 'touched'];
            const hasSensory = sensoryWords.some(word => writing.toLowerCase().includes(word));
            if (hasSensory) {
                analysis += `‚úì Includes sensory details (good for engaging reader)<br>`;
            } else {
                analysis += `‚úó Try adding sensory details (what did you see/hear/feel?)<br>`;
            }
            
            // Check for hook
            if (writing.length > 0 && writing.split('.').length > 1) {
                analysis += `‚úì Has multiple sentences (good for developing ideas)<br>`;
            } else {
                analysis += `‚úó Try writing more than one sentence to develop your opening<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ Start with a hook to grab attention<br>`;
            analysis += `‚Ä¢ Use descriptive language to set the scene<br>`;
            analysis += `‚Ä¢ Introduce the main conflict or event<br>`;
            analysis += `‚Ä¢ Show emotions through actions and dialogue<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showNarrativeExample = function() {
            const example = essayExamples.narrative[Math.floor(Math.random() * essayExamples.narrative.length)];
            alert(`Example Narrative Opening:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Uses first-person perspective\n‚Ä¢ Includes descriptive details\n‚Ä¢ Sets up a story or experience\n‚Ä¢ Engages the reader's interest`);
        };

        window.descriptivePractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = essayPrompts.descriptive[Math.floor(Math.random() * essayPrompts.descriptive.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-purple);">Descriptive Writing Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 10px;">
                            Writing Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write a descriptive paragraph based on this prompt. Appeal to at least three senses.
                        </div>
                    </div>
                    
                    <textarea id="descriptiveWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your descriptive paragraph here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzeDescriptiveWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showDescriptiveExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="descriptiveAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzeDescriptiveWriting = function() {
            const writing = document.getElementById('descriptiveWriting').value;
            const analysisDiv = document.getElementById('descriptiveAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for sensory words
            const senseCategories = {
                sight: ['saw', 'looked', 'appeared', 'visible', 'color', 'bright', 'dark', 'shiny', 'dull'],
                sound: ['heard', 'sounded', 'noise', 'quiet', 'loud', 'echo', 'silent', 'music', 'voice'],
                touch: ['felt', 'touch', 'soft', 'hard', 'rough', 'smooth', 'cold', 'warm', 'texture'],
                smell: ['smelled', 'scent', 'odor', 'fragrant', 'stinky', 'aroma', 'perfume', 'musty'],
                taste: ['tasted', 'flavor', 'sweet', 'sour', 'bitter', 'salty', 'spicy', 'delicious']
            };
            
            let senseCount = 0;
            for (const sense in senseCategories) {
                if (senseCategories[sense].some(word => writing.toLowerCase().includes(word))) {
                    senseCount++;
                }
            }
            
            analysis += `‚úì Appeals to ${senseCount} out of 5 senses<br>`;
            
            if (senseCount >= 3) {
                analysis += `‚úì Good use of sensory details!<br>`;
            } else {
                analysis += `‚úó Try to include more sensory details (aim for 3+ senses)<br>`;
            }
            
            // Check for figurative language
            const figurative = ['like', 'as', 'metaphor', 'simile', 'personif', 'hyperbole'];
            const hasFigurative = figurative.some(word => writing.toLowerCase().includes(word));
            if (hasFigurative) {
                analysis += `‚úì Uses figurative language (good for description)<br>`;
            } else {
                analysis += `‚úó Consider adding simile, metaphor, or personification<br>`;
            }
            
            // Check for specific vs vague words
            const vagueWords = ['nice', 'good', 'bad', 'big', 'small', 'pretty', 'ugly'];
            const hasVague = vagueWords.some(word => writing.toLowerCase().includes(word));
            if (hasVague) {
                analysis += `‚úó Replace vague words with more specific descriptions<br>`;
            } else {
                analysis += `‚úì Uses specific, descriptive language<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ Use comparisons (similes and metaphors)<br>`;
            analysis += `‚Ä¢ Appeal to all five senses when possible<br>`;
            analysis += `‚Ä¢ Choose precise, vivid words<br>`;
            analysis += `‚Ä¢ Organize details spatially (left to right, top to bottom)<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showDescriptiveExample = function() {
            const example = essayExamples.descriptive[Math.floor(Math.random() * essayExamples.descriptive.length)];
            alert(`Example Descriptive Paragraph:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Uses vivid sensory details\n‚Ä¢ Creates strong imagery\n‚Ä¢ Uses figurative language\n‚Ä¢ Focuses on specific descriptions`);
        };

        window.expositoryPractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = essayPrompts.expository[Math.floor(Math.random() * essayPrompts.expository.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-orange);">Expository Writing Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-amber); font-weight: bold; margin-bottom: 10px;">
                            Writing Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write an expository paragraph explaining this topic. Use facts and logical organization.
                        </div>
                    </div>
                    
                    <textarea id="expositoryWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your expository paragraph here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzeExpositoryWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showExpositoryExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="expositoryAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzeExpositoryWriting = function() {
            const writing = document.getElementById('expositoryWriting').value;
            const analysisDiv = document.getElementById('expositoryAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for factual language
            const factualIndicators = ['according to', 'research shows', 'studies indicate', 'statistics', 'facts', 'evidence'];
            const hasFactual = factualIndicators.some(word => writing.toLowerCase().includes(word));
            if (hasFactual) {
                analysis += `‚úì Uses factual language (good for expository)<br>`;
            } else {
                analysis += `‚úó Consider adding factual information or evidence<br>`;
            }
            
            // Check for opinion words
            const opinionWords = ['I think', 'I believe', 'in my opinion', 'I feel', 'should', 'must', 'ought to'];
            const hasOpinion = opinionWords.some(word => writing.toLowerCase().includes(word));
            if (hasOpinion) {
                analysis += `‚úó Avoid personal opinions in expository writing<br>`;
            } else {
                analysis += `‚úì Maintains objective tone (good for expository)<br>`;
            }
            
            // Check for transition words
            const transitions = ['first', 'second', 'then', 'next', 'finally', 'therefore', 'however', 'in addition'];
            const hasTransitions = transitions.some(word => writing.toLowerCase().includes(word));
            if (hasTransitions) {
                analysis += `‚úì Uses transitional words for logical flow<br>`;
            } else {
                analysis += `‚úó Add transition words to improve organization<br>`;
            }
            
            // Check for clear topic sentence
            const sentences = writing.split('.');
            if (sentences.length > 0 && sentences[0].length > 10) {
                analysis += `‚úì Likely has a clear topic sentence<br>`;
            } else {
                analysis += `‚úó Make sure your first sentence introduces the main idea<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ Start with a clear topic sentence<br>`;
            analysis += `‚Ä¢ Use facts and evidence to support points<br>`;
            analysis += `‚Ä¢ Maintain objective, third-person perspective<br>`;
            analysis += `‚Ä¢ Use transition words to connect ideas<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showExpositoryExample = function() {
            const example = essayExamples.expository[Math.floor(Math.random() * essayExamples.expository.length)];
            alert(`Example Expository Paragraph:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Presents factual information\n‚Ä¢ Uses logical organization\n‚Ä¢ Maintains objective tone\n‚Ä¢ Explains concepts clearly`);
        };

        window.argumentativePractice = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompt = essayPrompts.argumentative[Math.floor(Math.random() * essayPrompts.argumentative.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-green);">Argumentative Writing Practice</div>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px;">
                            Writing Prompt:
                        </div>
                        <div style="color: var(--text-primary); font-size: 1.2rem; font-style: italic; margin-bottom: 15px;">
                            "${prompt}"
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            Write an argumentative paragraph stating your position. Include at least one piece of evidence.
                        </div>
                    </div>
                    
                    <textarea id="argumentativeWriting" style="width: 100%; height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; margin-bottom: 15px;" 
                              placeholder="Start writing your argumentative paragraph here..."></textarea>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button class="btn btn-small btn-primary" onclick="analyzeArgumentativeWriting()">
                            Analyze My Writing
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showArgumentativeExample()">
                            See Example
                        </button>
                    </div>
                    
                    <div id="argumentativeAnalysis" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.analyzeArgumentativeWriting = function() {
            const writing = document.getElementById('argumentativeWriting').value;
            const analysisDiv = document.getElementById('argumentativeAnalysis');
            
            if (!writing.trim()) {
                analysisDiv.innerHTML = `<span style="color: var(--accent-orange);">Please write something first!</span>`;
                return;
            }
            
            let analysis = `<strong>Writing Analysis:</strong><br><br>`;
            
            // Check for clear position
            const positionWords = ['should', 'must', 'ought to', 'need to', 'better to', 'best to'];
            const hasPosition = positionWords.some(word => writing.toLowerCase().includes(word));
            if (hasPosition) {
                analysis += `‚úì Takes a clear position (good for argumentative)<br>`;
            } else {
                analysis += `‚úó Make your position clear (use words like 'should' or 'must')<br>`;
            }
            
            // Check for evidence indicators
            const evidenceWords = ['because', 'since', 'for example', 'according to', 'research shows', 'studies indicate'];
            const hasEvidence = evidenceWords.some(word => writing.toLowerCase().includes(word));
            if (hasEvidence) {
                analysis += `‚úì Provides evidence to support argument<br>`;
            } else {
                analysis += `‚úó Add evidence to support your position (use 'because' or 'for example')<br>`;
            }
            
            // Check for counterargument
            const counterWords = ['although', 'even though', 'while', 'some people argue', 'opponents claim'];
            const hasCounter = counterWords.some(word => writing.toLowerCase().includes(word));
            if (hasCounter) {
                analysis += `‚úì Acknowledges counterarguments (advanced technique)<br>`;
            } else {
                analysis += `‚Ä¢ Consider addressing opposing views to strengthen argument<br>`;
            }
            
            // Check for persuasive language
            const persuasiveWords = ['important', 'crucial', 'essential', 'significant', 'beneficial', 'effective'];
            const hasPersuasive = persuasiveWords.some(word => writing.toLowerCase().includes(word));
            if (hasPersuasive) {
                analysis += `‚úì Uses persuasive language<br>`;
            } else {
                analysis += `‚Ä¢ Add persuasive words to strengthen your argument<br>`;
            }
            
            analysis += `<br><strong>Tips for improvement:</strong><br>`;
            analysis += `‚Ä¢ State your position clearly in the first sentence<br>`;
            analysis += `‚Ä¢ Provide at least one piece of evidence<br>`;
            analysis += `‚Ä¢ Address counterarguments if possible<br>`;
            analysis += `‚Ä¢ Use persuasive but reasonable language<br>`;
            
            analysisDiv.innerHTML = analysis;
            analysisDiv.classList.add('pulse');
            setTimeout(() => analysisDiv.classList.remove('pulse'), 500);
        };

        window.showArgumentativeExample = function() {
            const example = essayExamples.argumentative[Math.floor(Math.random() * essayExamples.argumentative.length)];
            alert(`Example Argumentative Paragraph:\n\n${example.title}\n\n${example.excerpt}\n\nNotice how this example:\n‚Ä¢ Presents a clear argument\n‚Ä¢ Uses evidence to support claims\n‚Ä¢ Takes a persuasive stance\n‚Ä¢ Maintains formal tone`);
        };

        window.showCommonMistake = function(index) {
            const mistake = commonMistakes[index];
            if (!mistake) return;
            
            let info = `Common Writing Mistake #${index + 1}\n\n`;
            info += `${mistake}\n\n`;
            info += `How to fix it:\n`;
            
            if (index === 0) {
                info += `Instead of: "It was a nice day."\n`;
                info += `Write: "The sun shone brightly in a cloudless azure sky, warming the earth with its gentle rays."\n`;
                info += `Use specific adjectives and sensory details.`;
            } else if (index === 1) {
                info += `‚Ä¢ Read your essay aloud to catch errors\n`;
                info += `‚Ä¢ Use spell check but don't rely on it completely\n`;
                info += `‚Ä¢ Ask someone else to proofread your work\n`;
                info += `‚Ä¢ Take a break between writing and proofreading`;
            } else if (index === 2) {
                info += `Your thesis should:\n`;
                info += `‚Ä¢ State your main idea clearly\n`;
                info += `‚Ä¢ Be specific, not vague\n`;
                info += `‚Ä¢ Appear at the end of your introduction\n`;
                info += `‚Ä¢ Guide the entire essay\n`;
                info += `Example: "Regular exercise improves mental health by reducing stress, boosting mood, and increasing energy levels."`;
            }
            
            alert(info);
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            literaryFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            literaryFact.appendChild(createLiteraryFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createEssayVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
