<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 Math - Coordinate Graphs & Geometry | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Coordinate Graph Theme */
        :root {
            --primary-blue: #2196F3;
            --secondary-green: #4CAF50;
            --accent-purple: #9C27B0;
            --accent-orange: #FF9800;
            --accent-red: #F44336;
            --accent-yellow: #FFC107;
            --accent-teal: #009688;
            --accent-pink: #E91E63;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(33, 150, 243, 0.3);
            --grid-glow: 0 0 15px rgba(255, 193, 7, 0.2);
            --point-glow: 0 0 15px rgba(233, 30, 99, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Coordinate Grid Background */
        .grid-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                linear-gradient(to right, rgba(33, 150, 243, 0.05) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(33, 150, 243, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.3;
        }

        .floating-point {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 2rem;
            font-weight: bold;
            animation: floatPoint 15s linear infinite;
        }

        @keyframes floatPoint {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0.1; }
            25% { transform: translate(-100px, -50px) rotate(90deg); opacity: 0.05; }
            50% { transform: translate(50px, -100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translate(100px, 50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translate(0, 0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-secondary {
            background: var(--accent-pink);
            color: white;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }

        .btn-secondary:hover {
            background: #C2185B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--accent-pink));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--accent-pink);
        }

        .option.correct .option-letter {
            background: var(--primary-blue);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(33, 150, 243, 0.1);
            border-left: 5px solid var(--primary-blue);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-blue);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-blue);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Main Coordinate Grid */
        .coordinate-grid {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-pink);
            position: relative;
            overflow: hidden;
            box-shadow: var(--grid-glow);
        }

        .grid-canvas-container {
            width: 100%;
            height: 400px;
            position: relative;
            margin: 20px 0;
        }

        #coordinateCanvas {
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            border-radius: 8px;
            cursor: crosshair;
        }

        .grid-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .grid-button {
            padding: 8px 15px;
            background: var(--dark-surface);
            border: 2px solid var(--primary-blue);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .grid-button:hover {
            background: rgba(33, 150, 243, 0.1);
        }

        .display-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        /* Quadrants Display */
        .quadrants-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .quadrant-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
            height: 300px;
        }

        @media (max-width: 768px) {
            .quadrant-grid {
                grid-template-columns: 1fr;
                height: auto;
            }
        }

        .quadrant {
            background: var(--dark-surface);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .quadrant:hover {
            transform: scale(1.03);
        }

        .quadrant-I {
            border-color: var(--secondary-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .quadrant-II {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .quadrant-III {
            border-color: var(--accent-red);
            background: rgba(244, 67, 54, 0.1);
        }

        .quadrant-IV {
            border-color: var(--accent-purple);
            background: rgba(156, 39, 176, 0.1);
        }

        .quadrant-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .quadrant-signs {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--text-secondary);
        }

        /* Points Display */
        .points-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .points-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }

        .point-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-width: 100px;
            text-align: center;
            border: 2px solid var(--accent-yellow);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .point-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--point-glow);
        }

        .point-coordinates {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            font-family: 'Courier New', monospace;
        }

        .point-location {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Distance Calculator */
        .distance-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-teal);
        }

        .distance-inputs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .distance-inputs {
                grid-template-columns: 1fr;
            }
        }

        .point-input {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
        }

        .input-label {
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .coordinate-input {
            display: flex;
            gap: 10px;
        }

        .coordinate-input input {
            width: 60px;
            padding: 8px;
            background: var(--dark-bg);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            color: var(--text-primary);
            text-align: center;
        }

        /* Shapes on Grid */
        .shapes-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .shapes-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .shapes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .shape-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .shape-box:hover {
            transform: translateY(-5px);
        }

        .shape-box.rectangle {
            border-color: var(--primary-blue);
        }

        .shape-box.triangle {
            border-color: var(--secondary-green);
        }

        .shape-box.square {
            border-color: var(--accent-pink);
        }

        .shape-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .shape-name {
            font-weight: bold;
            margin-bottom: 8px;
        }

        .shape-coords {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-family: 'Courier New', monospace;
        }

        /* Reflection and Translation */
        .transformations-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-yellow);
        }

        .transformation-controls {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .transformation-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-yellow);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .transformation-button:hover {
            background: rgba(255, 193, 7, 0.1);
        }

        /* Coordinate Table */
        .coordinate-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .coordinate-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-pink);
            border-bottom: 2px solid var(--accent-pink);
        }

        .coordinate-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .coordinate-table tr:hover {
            background: rgba(233, 30, 99, 0.05);
        }

        /* Interactive Practice */
        .interactive-practice {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-teal);
        }

        .practice-title {
            color: var(--accent-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-teal);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-button:hover {
            background: rgba(0, 150, 136, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .grid-canvas-container {
                height: 300px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes plotPoint {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .plot-point {
            animation: plotPoint 0.3s ease forwards;
        }
        
        @keyframes drawLine {
            from { stroke-dashoffset: 1000; }
            to { stroke-dashoffset: 0; }
        }
        
        .draw-line {
            animation: drawLine 1s ease forwards;
        }
        
        @keyframes gridGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.2); }
            50% { box-shadow: 0 0 20px 5px rgba(255, 193, 7, 0.1); }
        }
        
        .grid-glow {
            animation: gridGlow 2s ease-in-out infinite;
        }
        
        @keyframes pointGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(233, 30, 99, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(233, 30, 99, 0.2); }
        }
        
        .point-glow {
            animation: pointGlow 2s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Coordinate Grid Background -->
    <div class="grid-bg" id="gridBg">
        <!-- Points will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 Mathematics</h1>
            <p class="welcome-subtitle">Explore the world of coordinate graphs! Learn to plot points, understand quadrants, calculate distances, and create shapes on the coordinate plane. Discover how mathematics can map our world through coordinates!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìçüìê‚ú®</span>
                <span class="topic-name">Coordinate Graphs & Geometry</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Coordinate Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Math fact display -->
                <div id="mathFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Coordinate Graph Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const gridBg = document.getElementById('gridBg');
            
            // Create floating coordinate points
            const points = ['(2,3)', '(4,-1)', '(-3,5)', '(-2,-4)', '(5,0)', '(0,6)', '(1,2)', '(3,4)'];
            
            for (let i = 0; i < 20; i++) {
                const point = document.createElement('div');
                point.className = 'floating-point';
                point.textContent = points[Math.floor(Math.random() * points.length)];
                point.style.left = `${Math.random() * 100}%`;
                point.style.top = `${Math.random() * 100}%`;
                point.style.animationDelay = `${Math.random() * 15}s`;
                point.style.fontSize = `${1 + Math.random() * 2}rem`;
                
                // Color points in different quadrants
                const pointText = point.textContent;
                if (pointText.includes('(-') && pointText.includes(',-')) {
                    point.style.color = 'rgba(244, 67, 54, 0.1)'; // Quadrant III
                } else if (pointText.includes('(-')) {
                    point.style.color = 'rgba(33, 150, 243, 0.1)'; // Quadrant II
                } else if (pointText.includes(',-')) {
                    point.style.color = 'rgba(156, 39, 176, 0.1)'; // Quadrant IV
                } else {
                    point.style.color = 'rgba(76, 175, 80, 0.1)'; // Quadrant I
                }
                
                gridBg.appendChild(point);
            }
        }

        // Questions array - 120+ Grade 6 Coordinate Graphs questions
        const questions = [
            // Coordinate Plane Basics (1-20)
            {
                type: "coordinate_basics",
                question: "What is the horizontal number line on coordinate plane called?",
                options: ["x-axis", "y-axis", "origin", "quadrant"],
                answer: "A",
                explanation: "The horizontal line is the x-axis. The vertical line is the y-axis."
            },
            {
                type: "coordinate_basics",
                question: "What are the coordinates of the origin?",
                options: ["(0,0)", "(1,1)", "(0,1)", "(1,0)"],
                answer: "A",
                explanation: "The origin is where x-axis and y-axis intersect at point (0,0)."
            },
            {
                type: "coordinate_basics",
                question: "How many quadrants are in coordinate plane?",
                options: ["4", "2", "8", "6"],
                answer: "A",
                explanation: "There are 4 quadrants: I (+,+), II (-,+), III (-,-), IV (+,-)."
            },
            {
                type: "coordinate_basics",
                question: "Which quadrant has positive x and positive y?",
                options: ["Quadrant I", "Quadrant II", "Quadrant III", "Quadrant IV"],
                answer: "A",
                explanation: "Quadrant I: (+,+), Quadrant II: (-,+), Quadrant III: (-,-), Quadrant IV: (+,-)."
            },
            {
                type: "coordinate_basics",
                question: "In (3,5), which is x-coordinate?",
                options: ["3", "5", "Both", "Neither"],
                answer: "A",
                explanation: "Coordinates are (x,y). First number is x-coordinate (horizontal), second is y-coordinate (vertical)."
            },
            // Plotting Points (21-40)
            {
                type: "plotting_points",
                question: "Where is point (2,3) located?",
                options: ["Quadrant I", "Quadrant II", "Quadrant III", "Quadrant IV"],
                answer: "A",
                explanation: "(2,3) has x=2 (+), y=3 (+) ‚Üí Quadrant I (+,+)."
            },
            {
                type: "plotting_points",
                question: "Where is (-4,1)?",
                options: ["Quadrant II", "Quadrant I", "Quadrant III", "Quadrant IV"],
                answer: "A",
                explanation: "(-4,1) has x=-4 (-), y=1 (+) ‚Üí Quadrant II (-,+)."
            },
            {
                type: "plotting_points",
                question: "Where is (3,-2)?",
                options: ["Quadrant IV", "Quadrant I", "Quadrant II", "Quadrant III"],
                answer: "A",
                explanation: "(3,-2) has x=3 (+), y=-2 (-) ‚Üí Quadrant IV (+,-)."
            },
            {
                type: "plotting_points",
                question: "Where is (-5,-1)?",
                options: ["Quadrant III", "Quadrant I", "Quadrant II", "Quadrant IV"],
                answer: "A",
                explanation: "(-5,-1) has x=-5 (-), y=-1 (-) ‚Üí Quadrant III (-,-)."
            },
            {
                type: "plotting_points",
                question: "Where is point (0,4)?",
                options: ["On y-axis", "On x-axis", "Quadrant I", "Quadrant II"],
                answer: "A",
                explanation: "When x=0, point lies on y-axis. (0,4) is 4 units up on y-axis."
            },
            // Finding Coordinates (41-60)
            {
                type: "finding_coordinates",
                question: "What are coordinates of point 3 units right, 2 units up from origin?",
                options: ["(3,2)", "(2,3)", "(-3,2)", "(3,-2)"],
                answer: "A",
                explanation: "Right = positive x, Up = positive y ‚Üí (3,2)."
            },
            {
                type: "finding_coordinates",
                question: "Point 4 left, 1 down from origin?",
                options: ["(-4,-1)", "(-4,1)", "(4,-1)", "(4,1)"],
                answer: "A",
                explanation: "Left = negative x, Down = negative y ‚Üí (-4,-1)."
            },
            {
                type: "finding_coordinates",
                question: "If point is on x-axis at -3, coordinates?",
                options: ["(-3,0)", "(0,-3)", "(-3,-3)", "(3,0)"],
                answer: "A",
                explanation: "On x-axis means y=0. At -3 on x-axis ‚Üí (-3,0)."
            },
            {
                type: "finding_coordinates",
                question: "Point symmetric to (2,5) over y-axis?",
                options: ["(-2,5)", "(2,-5)", "(-2,-5)", "(5,2)"],
                answer: "A",
                explanation: "Reflection over y-axis changes x to opposite sign: (2,5) ‚Üí (-2,5)."
            },
            // Distance Between Points (61-80)
            {
                type: "distance_between",
                question: "Distance between (2,3) and (2,7)?",
                options: ["4 units", "5 units", "10 units", "2 units"],
                answer: "A",
                explanation: "Same x-coordinate, vertical distance = |7-3| = 4 units."
            },
            {
                type: "distance_between",
                question: "Distance between (1,4) and (5,4)?",
                options: ["4 units", "3 units", "6 units", "8 units"],
                answer: "A",
                explanation: "Same y-coordinate, horizontal distance = |5-1| = 4 units."
            },
            {
                type: "distance_between",
                question: "Points (3,0) and (-2,0) are how far apart?",
                options: ["5 units", "1 unit", "3 units", "2 units"],
                answer: "A",
                explanation: "Both on x-axis, distance = |3 - (-2)| = |5| = 5 units."
            },
            // Shapes on Coordinate Plane (81-100)
            {
                type: "shapes",
                question: "Square vertices: (2,2), (2,5), (5,5), (5,2). Side length?",
                options: ["3 units", "4 units", "5 units", "7 units"],
                answer: "A",
                explanation: "From (2,2) to (2,5): difference in y = 3 units. Square sides equal = 3 units."
            },
            {
                type: "shapes",
                question: "Triangle vertices: (0,0), (4,0), (2,3). Base length?",
                options: ["4 units", "3 units", "5 units", "6 units"],
                answer: "A",
                explanation: "Base from (0,0) to (4,0) along x-axis = 4 units."
            },
            {
                type: "shapes",
                question: "Rectangle vertices: (1,1), (1,4), (6,4), (6,1). Perimeter?",
                options: ["16 units", "12 units", "18 units", "20 units"],
                answer: "A",
                explanation: "Width = 6-1=5, Height = 4-1=3, Perimeter = 2√ó(5+3) = 16 units."
            },
            // Transformations (101-120)
            {
                type: "transformations",
                question: "Point (3,4) translated 2 units right, 1 unit down becomes?",
                options: ["(5,3)", "(1,3)", "(5,5)", "(3,2)"],
                answer: "A",
                explanation: "Right: x+2=5, Down: y-1=3 ‚Üí (5,3)."
            },
            {
                type: "transformations",
                question: "Reflect (2,-3) over x-axis.",
                options: ["(2,3)", "(-2,-3)", "(-2,3)", "(2,-3)"],
                answer: "A",
                explanation: "Reflection over x-axis changes y to opposite sign: (2,-3) ‚Üí (2,3)."
            },
            {
                type: "transformations",
                question: "Point (-1,5) translated 3 left, 2 up becomes?",
                options: ["(-4,7)", "(2,7)", "(-4,3)", "(2,3)"],
                answer: "A",
                explanation: "Left: x-3=-4, Up: y+2=7 ‚Üí (-4,7)."
            },
            // Real-world Applications (121-140)
            {
                type: "real_world",
                question: "Map grid: School at (2,3), Park at (5,3). How far apart?",
                options: ["3 blocks", "2 blocks", "5 blocks", "6 blocks"],
                answer: "A",
                explanation: "Same y-coordinate, horizontal distance = |5-2| = 3 blocks."
            },
            {
                type: "real_world",
                question: "City grid: Library (0,0), School (0,4). School is...",
                options: ["4 blocks north", "4 blocks east", "4 blocks south", "4 blocks west"],
                answer: "A",
                explanation: "Same x, y increased by 4 ‚Üí 4 units up/north from origin."
            },
            // Mixed Practice (141-160)
            {
                type: "mixed",
                question: "Which point is in Quadrant II?",
                options: ["(-3,2)", "(3,2)", "(3,-2)", "(-3,-2)"],
                answer: "A",
                explanation: "Quadrant II: (-,+). (-3,2) has x=-, y=+."
            },
            {
                type: "mixed",
                question: "Point on y-axis?",
                options: ["(0,5)", "(5,0)", "(5,5)", "(-5,5)"],
                answer: "A",
                explanation: "On y-axis means x=0. (0,5) has x=0."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: "",
            canvas: null,
            ctx: null,
            points: [],
            shapes: [],
            gridSize: 10,
            scale: 30
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent coordinate plotting!",
            "Perfect point placement!",
            "Great graph analysis!",
            "Amazing! You're a coordinate expert!",
            "Perfect understanding of quadrants!",
            "You're a graphing champion!",
            "Outstanding distance calculation!",
            "Brilliant shape recognition!",
            "You think like a cartographer!",
            "Coordinate mastery achieved!"
        ];

        // Coordinate plane terms
        const coordinateTerms = [
            {
                term: "Origin",
                definition: "Center point where axes intersect",
                coordinates: "(0,0)"
            },
            {
                term: "x-axis",
                definition: "Horizontal number line",
                direction: "Left-right"
            },
            {
                term: "y-axis",
                definition: "Vertical number line",
                direction: "Up-down"
            },
            {
                term: "Quadrant",
                definition: "One of four regions",
                count: "4 quadrants"
            },
            {
                term: "Coordinates",
                definition: "(x,y) pair locating points",
                format: "Horizontal first, then vertical"
            },
            {
                term: "Ordered Pair",
                definition: "Another name for coordinates",
                example: "(3,4)"
            }
        ];

        // Quadrant information
        const quadrants = [
            {
                name: "Quadrant I",
                signs: "(+,+)",
                description: "Top-right region",
                color: "#4CAF50",
                example: "(3,2)"
            },
            {
                name: "Quadrant II",
                signs: "(-,+)",
                description: "Top-left region",
                color: "#2196F3",
                example: "(-2,4)"
            },
            {
                name: "Quadrant III",
                signs: "(-,-)",
                description: "Bottom-left region",
                color: "#F44336",
                example: "(-3,-1)"
            },
            {
                name: "Quadrant IV",
                signs: "(+,-)",
                description: "Bottom-right region",
                color: "#9C27B0",
                example: "(2,-3)"
            }
        ];

        // Interesting math facts about coordinate geometry
        const mathFacts = [
            "The coordinate system is called Cartesian coordinates, named after mathematician Ren√© Descartes!",
            "Descartes reportedly got the idea while watching a fly on his ceiling and wondering how to describe its position!",
            "Coordinates are used in GPS to pinpoint any location on Earth with incredible accuracy!",
            "The Cartesian plane has infinite points - between any two points, there's always another point!",
            "Video games use coordinate systems to position characters, objects, and camera angles!",
            "The first use of coordinates was by ancient Greeks, but Descartes formalized the system in 1637!",
            "GPS coordinates use latitude (north-south) and longitude (east-west) which work like a giant coordinate plane on Earth!",
            "Minecraft uses a 3D coordinate system (x,y,z) to track every block's position in the game world!"
        ];

        // Common points for practice
        const practicePoints = [
            {x: 2, y: 3, quadrant: "I"},
            {x: -4, y: 1, quadrant: "II"},
            {x: 3, y: -2, quadrant: "IV"},
            {x: -5, y: -1, quadrant: "III"},
            {x: 0, y: 4, location: "y-axis"},
            {x: 3, y: 0, location: "x-axis"},
            {x: -2, y: -3, quadrant: "III"},
            {x: 5, y: 5, quadrant: "I"}
        ];

        // Shapes on coordinate plane
        const shapes = [
            {
                name: "Square",
                vertices: [{x:1,y:1}, {x:1,y:4}, {x:4,y:4}, {x:4,y:1}],
                color: "#2196F3",
                perimeter: 12,
                area: 9
            },
            {
                name: "Rectangle",
                vertices: [{x:-2,y:-1}, {x:-2,y:2}, {x:3,y:2}, {x:3,y:-1}],
                color: "#4CAF50",
                perimeter: 16,
                area: 15
            },
            {
                name: "Triangle",
                vertices: [{x:0,y:0}, {x:4,y:0}, {x:2,y:3}],
                color: "#FF9800",
                area: 6
            },
            {
                name: "Right Triangle",
                vertices: [{x:-3,y:-1}, {x:-3,y:2}, {x:-1,y:-1}],
                color: "#E91E63",
                area: 3
            }
        ];

        // Transformations examples
        const transformations = [
            {
                name: "Translation",
                description: "Sliding a shape without rotating",
                example: "(2,3) ‚Üí (5,4) by moving 3 right, 1 up"
            },
            {
                name: "Reflection",
                description: "Flipping over a line (mirror image)",
                example: "(2,3) over x-axis ‚Üí (2,-3)"
            },
            {
                name: "Symmetry",
                description: "Matching parts when folded",
                example: "Point (3,4) symmetric to (-3,4) over y-axis"
            }
        ];

        // Real-world coordinate examples
        const realWorldExamples = [
            {
                scenario: "City Map",
                description: "Streets as x-axis, avenues as y-axis",
                example: "Library at (2,3), School at (2,7) ‚Üí 4 blocks apart"
            },
            {
                scenario: "Chess Board",
                description: "Files (a-h) as x, ranks (1-8) as y",
                example: "Knight at (3,3) to (5,4) ‚Üí L-shaped move"
            },
            {
                scenario: "Battleship Game",
                description: "Grid coordinates to target ships",
                example: "Attack position B3 = (2,3) on grid"
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathFact = document.getElementById('mathFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6MathCoordinates');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6MathCoordinates', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6MathCoordinates_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6MathCoordinates_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a coordinate graphing expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent spatial reasoning skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning to master coordinate geometry!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Practice more with plotting points and shapes!";
            } else {
                scoreMessage.textContent = "Keep learning! Coordinate graphs are fundamental to mapping and navigation!";
            }
        }

        // Create math fact display
        function createMathFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'math-fact';
            
            factDiv.innerHTML = `<strong>Amazing Coordinate Fact:</strong> ${mathFacts[Math.floor(Math.random() * mathFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "coordinate_basics": "üìç",
                "plotting_points": "üìä",
                "finding_coordinates": "üîç",
                "distance_between": "üìè",
                "shapes": "üìê",
                "transformations": "üîÑ",
                "real_world": "üó∫Ô∏è",
                "mixed": "üéØ"
            };
            
            let conceptName = "Coordinate Basics";
            let conceptIcon = "üìç";
            
            if (question.type.includes("coordinate_basics")) {
                conceptName = "Coordinate Basics";
                conceptIcon = conceptIcons.coordinate_basics;
            } else if (question.type.includes("plotting_points")) {
                conceptName = "Plotting Points";
                conceptIcon = conceptIcons.plotting_points;
            } else if (question.type.includes("finding_coordinates")) {
                conceptName = "Finding Coordinates";
                conceptIcon = conceptIcons.finding_coordinates;
            } else if (question.type.includes("distance_between")) {
                conceptName = "Distance Between Points";
                conceptIcon = conceptIcons.distance_between;
            } else if (question.type.includes("shapes")) {
                conceptName = "Shapes on Grid";
                conceptIcon = conceptIcons.shapes;
            } else if (question.type.includes("transformations")) {
                conceptName = "Transformations";
                conceptIcon = conceptIcons.transformations;
            } else if (question.type.includes("real_world")) {
                conceptName = "Real-World Applications";
                conceptIcon = conceptIcons.real_world;
            } else if (question.type.includes("mixed")) {
                conceptName = "Mixed Practice";
                conceptIcon = conceptIcons.mixed;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("coordinate_basics")) {
                label.textContent = "Understanding axes, origin, quadrants, and coordinate pairs";
            } else if (question.type.includes("plotting_points")) {
                label.textContent = "Locating points using (x,y) coordinates on the grid";
            } else if (question.type.includes("finding_coordinates")) {
                label.textContent = "Determining coordinates from position on the grid";
            } else if (question.type.includes("distance_between")) {
                label.textContent = "Calculating horizontal and vertical distances between points";
            } else if (question.type.includes("shapes")) {
                label.textContent = "Creating and analyzing geometric shapes using coordinates";
            } else if (question.type.includes("transformations")) {
                label.textContent = "Translating, reflecting, and transforming points and shapes";
            } else if (question.type.includes("real_world")) {
                label.textContent = "Applying coordinate graphs to maps, games, and navigation";
            } else if (question.type.includes("mixed")) {
                label.textContent = "Mixed review of all coordinate geometry concepts";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create coordinate graph visualization
        function createCoordinateVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-pink);">Coordinate Graphs & Geometry</h3>
                
                <div class="coordinate-grid">
                    <div class="display-title">Interactive Coordinate Grid</div>
                    <div class="grid-canvas-container">
                        <canvas id="coordinateCanvas" width="600" height="400"></canvas>
                    </div>
                    <div class="grid-controls">
                        <div class="grid-button" onclick="plotRandomPoint()">Plot Random Point</div>
                        <div class="grid-button" onclick="clearPoints()">Clear Points</div>
                        <div class="grid-button" onclick="drawRectangle()">Draw Rectangle</div>
                        <div class="grid-button" onclick="drawTriangle()">Draw Triangle</div>
                        <div class="grid-button" onclick="calculateDistance()">Calculate Distance</div>
                    </div>
                    <div id="gridInfo" style="text-align: center; margin-top: 15px; color: var(--text-secondary); min-height: 30px;">
                        Click on grid to plot points or use buttons above
                    </div>
                </div>
                
                <div class="quadrants-container">
                    <div class="display-title">Four Quadrants of Coordinate Plane</div>
                    <div class="quadrant-grid">
                        ${quadrants.map(quadrant => `
                            <div class="quadrant quadrant-${quadrant.name.split(' ')[1]}">
                                <div class="quadrant-name">${quadrant.name}</div>
                                <div class="quadrant-signs">${quadrant.signs}</div>
                                <div style="margin: 10px 0; font-size: 1.2rem; font-family: 'Courier New', monospace;">
                                    ${quadrant.example}
                                </div>
                                <div style="font-size: 0.9rem; color: var(--text-secondary);">
                                    ${quadrant.description}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 15px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Remember:</strong> x-axis first, then y-axis ‚Üí (x,y)
                    </div>
                </div>
                
                <div class="points-container">
                    <div class="display-title">Practice Points - Click to Plot</div>
                    <div class="points-list" id="pointsList">
                        ${practicePoints.map((point, index) => `
                            <div class="point-item" onclick="plotSpecificPoint(${point.x}, ${point.y})">
                                <div class="point-coordinates">(${point.x}, ${point.y})</div>
                                <div class="point-location">
                                    ${point.quadrant ? `Quadrant ${point.quadrant}` : point.location}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="distance-container">
                    <div class="display-title">Distance Calculator</div>
                    <div class="distance-inputs">
                        <div class="point-input">
                            <div class="input-label">Point A</div>
                            <div class="coordinate-input">
                                <input type="number" id="pointAx" value="2" min="-10" max="10">
                                <span>,</span>
                                <input type="number" id="pointAy" value="3" min="-10" max="10">
                            </div>
                        </div>
                        <div class="point-input">
                            <div class="input-label">Point B</div>
                            <div class="coordinate-input">
                                <input type="number" id="pointBx" value="5" min="-10" max="10">
                                <span>,</span>
                                <input type="number" id="pointBy" value="3" min="-10" max="10">
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin: 15px 0;">
                        <button class="btn btn-small btn-primary" onclick="calculateManualDistance()">Calculate Distance</button>
                        <button class="btn btn-small btn-outline" onclick="plotBothPoints()">Plot Both Points</button>
                    </div>
                    <div id="distanceResult" style="text-align: center; font-size: 1.2rem; color: var(--accent-orange); min-height: 30px;">
                        Distance will appear here
                    </div>
                </div>
                
                <div class="shapes-container">
                    <div class="display-title">Shapes on Coordinate Grid</div>
                    <div class="shapes-grid">
                        ${shapes.map(shape => `
                            <div class="shape-box ${shape.name.toLowerCase()}" onclick="drawShape(${JSON.stringify(shape.vertices)})">
                                <div class="shape-icon">${getShapeIcon(shape.name)}</div>
                                <div class="shape-name">${shape.name}</div>
                                <div class="shape-coords">
                                    ${shape.vertices.map(v => `(${v.x},${v.y})`).join(', ')}
                                </div>
                                ${shape.perimeter ? `<div style="font-size: 0.8rem; margin-top: 5px;">Perimeter: ${shape.perimeter}</div>` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="transformations-container">
                    <div class="display-title">Transformations</div>
                    <div class="transformation-controls">
                        <div class="transformation-button" onclick="translateShape()">Translate Shape</div>
                        <div class="transformation-button" onclick="reflectOverX()">Reflect over x-axis</div>
                        <div class="transformation-button" onclick="reflectOverY()">Reflect over y-axis</div>
                        <div class="transformation-button" onclick="showSymmetry()">Show Symmetry</div>
                    </div>
                    <div id="transformationInfo" style="text-align: center; margin-top: 15px; color: var(--text-secondary); min-height: 30px;">
                        Click buttons to see transformations
                    </div>
                </div>
                
                <table class="coordinate-table">
                    <thead>
                        <tr>
                            <th>Coordinate Term</th>
                            <th>Definition</th>
                            <th>Example/Note</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${coordinateTerms.map(term => `
                            <tr>
                                <td style="font-weight: bold; color: var(--accent-yellow);">${term.term}</td>
                                <td>${term.definition}</td>
                                <td style="font-family: 'Courier New', monospace;">${term.coordinates || term.direction || term.count || term.example || term.format}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="interactive-practice">
                    <div class="practice-title">Interactive Practice</div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="practiceQuadrants()">Identify Quadrants</div>
                        <div class="practice-button" onclick="practicePlotting()">Plot Coordinates</div>
                        <div class="practice-button" onclick="practiceDistance()">Find Distances</div>
                        <div class="practice-button" onclick="practiceShapes()">Create Shapes</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice coordinate skills
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Practice:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Plot point (3, -2) - Which quadrant?<br>
                        2. Distance between (1,4) and (1,9)?<br>
                        3. Reflect (2,5) over x-axis<br>
                        4. Translate (3,1) 2 right, 3 up<br>
                        5. Point on y-axis at y=4
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-teal);">
                    <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Coordinate Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Order:</strong> x before y ‚Üí (x,y)<br>
                        <strong>Quadrants:</strong> I (+,+), II (-,+), III (-,-), IV (+,-)<br>
                        <strong>Distance:</strong> Same x? Vertical distance |y‚ÇÇ-y‚ÇÅ|<br>
                        <strong>Axes:</strong> x=0 on y-axis, y=0 on x-axis
                    </div>
                </div>
            `;
            
            // Initialize canvas after DOM is ready
            setTimeout(() => {
                initializeCanvas();
            }, 100);
            
            return vizDiv;
        }

        // Helper functions
        function getShapeIcon(shapeName) {
            const icons = {
                "Square": "‚¨õ",
                "Rectangle": "‚ñ≠",
                "Triangle": "‚ñ≤",
                "Right Triangle": "‚ó£"
            };
            return icons[shapeName] || "‚¨õ";
        }

        // Canvas functions
        function initializeCanvas() {
            const canvas = document.getElementById('coordinateCanvas');
            if (!canvas) return;
            
            appState.canvas = canvas;
            appState.ctx = canvas.getContext('2d');
            appState.points = [];
            appState.shapes = [];
            
            // Set canvas size
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = 400;
            
            // Draw initial grid
            drawGrid();
            
            // Add click event to plot points
            canvas.addEventListener('click', function(event) {
                const rect = canvas.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                // Convert to coordinate system
                const gridX = Math.round((x - canvas.width/2) / appState.scale);
                const gridY = Math.round((canvas.height/2 - y) / appState.scale);
                
                // Add point
                addPoint(gridX, gridY);
                
                // Update info
                document.getElementById('gridInfo').innerHTML = 
                    `Point plotted at (${gridX}, ${gridY}) in ${getQuadrant(gridX, gridY)}`;
            });
        }

        function drawGrid() {
            const ctx = appState.ctx;
            const canvas = appState.canvas;
            if (!ctx || !canvas) return;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const gridSize = appState.gridSize;
            const scale = appState.scale;
            
            // Draw grid lines
            ctx.strokeStyle = 'rgba(33, 150, 243, 0.3)';
            ctx.lineWidth = 1;
            
            // Vertical lines
            for (let x = -gridSize; x <= gridSize; x++) {
                const pixelX = centerX + x * scale;
                ctx.beginPath();
                ctx.moveTo(pixelX, 0);
                ctx.lineTo(pixelX, canvas.height);
                ctx.stroke();
                
                // Draw x-axis labels
                if (x !== 0) {
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                    ctx.font = '12px Arial';
                    ctx.fillText(x.toString(), pixelX - 5, centerY + 15);
                }
            }
            
            // Horizontal lines
            for (let y = -gridSize; y <= gridSize; y++) {
                const pixelY = centerY + y * scale;
                ctx.beginPath();
                ctx.moveTo(0, pixelY);
                ctx.lineTo(canvas.width, pixelY);
                ctx.stroke();
                
                // Draw y-axis labels
                if (y !== 0) {
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                    ctx.font = '12px Arial';
                    ctx.fillText((-y).toString(), centerX + 10, pixelY + 5);
                }
            }
            
            // Draw axes
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            
            // x-axis
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(canvas.width, centerY);
            ctx.stroke();
            
            // y-axis
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, canvas.height);
            ctx.stroke();
            
            // Draw origin label
            ctx.fillStyle = '#FF9800';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('O', centerX - 10, centerY + 20);
            ctx.fillText('(0,0)', centerX - 20, centerY - 10);
            
            // Draw quadrant labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('I', centerX + 30, centerY - 30);
            ctx.fillText('II', centerX - 50, centerY - 30);
            ctx.fillText('III', centerX - 50, centerY + 50);
            ctx.fillText('IV', centerX + 30, centerY + 50);
            
            // Redraw existing points and shapes
            redrawAll();
        }

        function addPoint(x, y) {
            appState.points.push({x, y});
            redrawAll();
            
            // Draw the new point
            const ctx = appState.ctx;
            const canvas = appState.canvas;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = appState.scale;
            
            const pixelX = centerX + x * scale;
            const pixelY = centerY - y * scale;
            
            // Draw point
            ctx.fillStyle = '#E91E63';
            ctx.beginPath();
            ctx.arc(pixelX, pixelY, 6, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw label
            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 12px Arial';
            ctx.fillText(`(${x},${y})`, pixelX + 8, pixelY - 8);
        }

        function redrawAll() {
            drawGrid();
            
            // Redraw all points
            appState.points.forEach(point => {
                const ctx = appState.ctx;
                const canvas = appState.canvas;
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const scale = appState.scale;
                
                const pixelX = centerX + point.x * scale;
                const pixelY = centerY - point.y * scale;
                
                // Draw point
                ctx.fillStyle = '#E91E63';
                ctx.beginPath();
                ctx.arc(pixelX, pixelY, 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw label
                ctx.fillStyle = '#FFFFFF';
                ctx.font = 'bold 12px Arial';
                ctx.fillText(`(${point.x},${point.y})`, pixelX + 8, pixelY - 8);
            });
            
            // Redraw shapes
            appState.shapes.forEach(shape => {
                drawShapeOnCanvas(shape.vertices, shape.color, shape.fill);
            });
        }

        function getQuadrant(x, y) {
            if (x > 0 && y > 0) return "Quadrant I";
            if (x < 0 && y > 0) return "Quadrant II";
            if (x < 0 && y < 0) return "Quadrant III";
            if (x > 0 && y < 0) return "Quadrant IV";
            if (x === 0 && y !== 0) return "on y-axis";
            if (y === 0 && x !== 0) return "on x-axis";
            return "at origin";
        }

        // Global functions for interactive controls
        window.plotRandomPoint = function() {
            const x = Math.floor(Math.random() * 9) - 4; // -4 to 4
            const y = Math.floor(Math.random() * 9) - 4; // -4 to 4
            addPoint(x, y);
            
            document.getElementById('gridInfo').innerHTML = 
                `Random point plotted at (${x}, ${y}) in ${getQuadrant(x, y)}`;
        };

        window.clearPoints = function() {
            appState.points = [];
            appState.shapes = [];
            drawGrid();
            document.getElementById('gridInfo').innerHTML = "All points cleared";
        };

        window.plotSpecificPoint = function(x, y) {
            addPoint(x, y);
            document.getElementById('gridInfo').innerHTML = 
                `Point plotted at (${x}, ${y}) in ${getQuadrant(x, y)}`;
        };

        window.drawRectangle = function() {
            const vertices = [
                {x: -3, y: 2},
                {x: -3, y: -1},
                {x: 2, y: -1},
                {x: 2, y: 2}
            ];
            
            appState.shapes.push({
                vertices: vertices,
                color: '#2196F3',
                fill: true
            });
            
            redrawAll();
            document.getElementById('gridInfo').innerHTML = 
                "Rectangle drawn: (-3,2), (-3,-1), (2,-1), (2,2)";
        };

        window.drawTriangle = function() {
            const vertices = [
                {x: 0, y: 0},
                {x: 4, y: 0},
                {x: 2, y: 3}
            ];
            
            appState.shapes.push({
                vertices: vertices,
                color: '#4CAF50',
                fill: true
            });
            
            redrawAll();
            document.getElementById('gridInfo').innerHTML = 
                "Triangle drawn: (0,0), (4,0), (2,3)";
        };

        window.drawShape = function(vertices) {
            appState.shapes.push({
                vertices: vertices,
                color: '#FF9800',
                fill: true
            });
            
            redrawAll();
            document.getElementById('gridInfo').innerHTML = 
                `Shape drawn with ${vertices.length} vertices`;
        };

        window.drawShapeOnCanvas = function(vertices, color, fill) {
            const ctx = appState.ctx;
            const canvas = appState.canvas;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = appState.scale;
            
            if (vertices.length < 2) return;
            
            ctx.strokeStyle = color;
            ctx.fillStyle = fill ? color + '40' : 'transparent';
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            const first = vertices[0];
            const firstX = centerX + first.x * scale;
            const firstY = centerY - first.y * scale;
            ctx.moveTo(firstX, firstY);
            
            for (let i = 1; i < vertices.length; i++) {
                const vertex = vertices[i];
                const pixelX = centerX + vertex.x * scale;
                const pixelY = centerY - vertex.y * scale;
                ctx.lineTo(pixelX, pixelY);
            }
            
            // Close the shape
            ctx.lineTo(firstX, firstY);
            
            if (fill) {
                ctx.fill();
            }
            ctx.stroke();
        };

        window.calculateDistance = function() {
            if (appState.points.length < 2) {
                document.getElementById('gridInfo').innerHTML = 
                    "Please plot at least 2 points first";
                return;
            }
            
            const p1 = appState.points[appState.points.length - 2];
            const p2 = appState.points[appState.points.length - 1];
            
            const distance = Math.sqrt(
                Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2)
            );
            
            document.getElementById('gridInfo').innerHTML = 
                `Distance between (${p1.x},${p1.y}) and (${p2.x},${p2.y}) = ${distance.toFixed(2)} units`;
        };

        window.calculateManualDistance = function() {
            const ax = parseInt(document.getElementById('pointAx').value) || 0;
            const ay = parseInt(document.getElementById('pointAy').value) || 0;
            const bx = parseInt(document.getElementById('pointBx').value) || 0;
            const by = parseInt(document.getElementById('pointBy').value) || 0;
            
            const distance = Math.sqrt(
                Math.pow(bx - ax, 2) + Math.pow(by - ay, 2)
            );
            
            document.getElementById('distanceResult').innerHTML = 
                `Distance = ${distance.toFixed(2)} units`;
        };

        window.plotBothPoints = function() {
            const ax = parseInt(document.getElementById('pointAx').value) || 0;
            const ay = parseInt(document.getElementById('pointAy').value) || 0;
            const bx = parseInt(document.getElementById('pointBx').value) || 0;
            const by = parseInt(document.getElementById('pointBy').value) || 0;
            
            addPoint(ax, ay);
            addPoint(bx, by);
        };

        window.translateShape = function() {
            if (appState.shapes.length === 0) {
                document.getElementById('transformationInfo').innerHTML = 
                    "Please draw a shape first";
                return;
            }
            
            const shape = appState.shapes[appState.shapes.length - 1];
            const translatedVertices = shape.vertices.map(v => ({
                x: v.x + 2,
                y: v.y + 1
            }));
            
            appState.shapes.push({
                vertices: translatedVertices,
                color: '#9C27B0',
                fill: false
            });
            
            redrawAll();
            document.getElementById('transformationInfo').innerHTML = 
                "Shape translated 2 right, 1 up (in purple)";
        };

        window.reflectOverX = function() {
            if (appState.shapes.length === 0) {
                document.getElementById('transformationInfo').innerHTML = 
                    "Please draw a shape first";
                return;
            }
            
            const shape = appState.shapes[appState.shapes.length - 1];
            const reflectedVertices = shape.vertices.map(v => ({
                x: v.x,
                y: -v.y
            }));
            
            appState.shapes.push({
                vertices: reflectedVertices,
                color: '#FF9800',
                fill: false
            });
            
            redrawAll();
            document.getElementById('transformationInfo').innerHTML = 
                "Shape reflected over x-axis (in orange)";
        };

        window.reflectOverY = function() {
            if (appState.shapes.length === 0) {
                document.getElementById('transformationInfo').innerHTML = 
                    "Please draw a shape first";
                return;
            }
            
            const shape = appState.shapes[appState.shapes.length - 1];
            const reflectedVertices = shape.vertices.map(v => ({
                x: -v.x,
                y: v.y
            }));
            
            appState.shapes.push({
                vertices: reflectedVertices,
                color: '#009688',
                fill: false
            });
            
            redrawAll();
            document.getElementById('transformationInfo').innerHTML = 
                "Shape reflected over y-axis (in teal)";
        };

        window.showSymmetry = function() {
            // Draw a symmetric pattern
            const pattern = [
                {x: 0, y: 0},
                {x: 2, y: 1},
                {x: 2, y: -1}
            ];
            
            // Original in green
            appState.shapes.push({
                vertices: pattern,
                color: '#4CAF50',
                fill: true
            });
            
            // Symmetric over y-axis in blue
            const symmetric = pattern.map(v => ({x: -v.x, y: v.y}));
            appState.shapes.push({
                vertices: symmetric,
                color: '#2196F3',
                fill: true
            });
            
            redrawAll();
            document.getElementById('transformationInfo').innerHTML = 
                "Showing symmetry over y-axis (green & blue shapes)";
        };

        // Interactive practice functions
        window.practiceQuadrants = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const points = [
                {coords: "(3, 2)", answer: "Quadrant I"},
                {coords: "(-4, 1)", answer: "Quadrant II"},
                {coords: "(2, -3)", answer: "Quadrant IV"},
                {coords: "(-1, -2)", answer: "Quadrant III"},
                {coords: "(0, 5)", answer: "y-axis"}
            ];
            
            const point = points[Math.floor(Math.random() * points.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--primary-blue);">Identify Location</div>
                    <div style="font-size: 2rem; margin-bottom: 20px; font-family: 'Courier New', monospace;">
                        ${point.coords}
                    </div>
                    <div style="margin-bottom: 20px;">
                        Where is this point located?
                    </div>
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0;">
                        <div style="font-size: 1.3rem; color: var(--accent-orange);">
                            ${point.answer}
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Quadrants:</strong> I(+,+), II(-,+), III(-,-), IV(+,-)<br>
                        <strong>Axes:</strong> x=0 on y-axis, y=0 on x-axis
                    </div>
                </div>
            `;
        };

        window.practicePlotting = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const instructions = [
                {text: "Plot point 3 units right, 2 units up from origin", coords: "(3, 2)"},
                {text: "Plot point 4 units left, 1 unit down from origin", coords: "(-4, -1)"},
                {text: "Plot point on x-axis at position -2", coords: "(-2, 0)"},
                {text: "Plot point on y-axis at position 5", coords: "(0, 5)"}
            ];
            
            const instruction = instructions[Math.floor(Math.random() * instructions.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-green);">Plotting Practice</div>
                    <div style="margin-bottom: 20px; font-style: italic;">
                        "${instruction.text}"
                    </div>
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0;">
                        <div style="font-size: 1.3rem; color: var(--accent-pink);">
                            Coordinates: ${instruction.coords}
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Directions:</strong><br>
                        Right = positive x, Left = negative x<br>
                        Up = positive y, Down = negative y<br>
                        On x-axis: y=0, On y-axis: x=0
                    </div>
                </div>
            `;
        };

        window.practiceDistance = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const problems = [
                {p1: "(2, 3)", p2: "(2, 7)", distance: "4 units (vertical)"},
                {p1: "(1, 4)", p2: "(5, 4)", distance: "4 units (horizontal)"},
                {p1: "(0, 0)", p2: "(3, 4)", distance: "5 units (diagonal)"},
                {p1: "(-2, 1)", p2: "(3, 1)", distance: "5 units (horizontal)"}
            ];
            
            const problem = problems[Math.floor(Math.random() * problems.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-purple);">Distance Calculation</div>
                    <div style="margin-bottom: 20px;">
                        Distance between ${problem.p1} and ${problem.p2}?
                    </div>
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0;">
                        <div style="font-size: 1.3rem; color: var(--accent-teal);">
                            ${problem.distance}
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Formula:</strong> ‚àö[(x‚ÇÇ-x‚ÇÅ)¬≤ + (y‚ÇÇ-y‚ÇÅ)¬≤]<br>
                        <strong>Same x:</strong> Vertical distance = |y‚ÇÇ-y‚ÇÅ|<br>
                        <strong>Same y:</strong> Horizontal distance = |x‚ÇÇ-x‚ÇÅ|
                    </div>
                </div>
            `;
        };

        window.practiceShapes = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const shapes = [
                {name: "Square", vertices: "(1,1), (1,4), (4,4), (4,1)", side: "3 units"},
                {name: "Rectangle", vertices: "(-2,-1), (-2,2), (3,2), (3,-1)", dims: "5√ó3"},
                {name: "Triangle", vertices: "(0,0), (4,0), (2,3)", base: "4 units"}
            ];
            
            const shape = shapes[Math.floor(Math.random() * shapes.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-orange);">Shape Analysis</div>
                    <div style="margin-bottom: 15px;">
                        <strong>${shape.name}</strong> with vertices:
                    </div>
                    <div style="font-family: 'Courier New', monospace; margin-bottom: 20px;">
                        ${shape.vertices}
                    </div>
                    <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 15px 0;">
                        <div style="color: var(--accent-yellow);">
                            ${shape.side || shape.dims || shape.base}
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        Plot these points and connect them in order to see the shape!
                    </div>
                </div>
            `;
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathFact.appendChild(createMathFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createCoordinateVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
