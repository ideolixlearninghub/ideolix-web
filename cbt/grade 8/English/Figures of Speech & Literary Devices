<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 English - Figures of Speech & Literary Devices | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Literary Devices Theme */
        :root {
            --metaphor-blue: #2196F3;
            --simile-purple: #9C27B0;
            --personification-green: #4CAF50;
            --hyperbole-orange: #FF9800;
            --alliteration-teal: #009688;
            --irony-red: #F44336;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --metaphor-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --simile-glow: 0 0 20px rgba(156, 39, 176, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(156, 39, 176, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--metaphor-blue), var(--simile-purple), var(--personification-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--metaphor-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--metaphor-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--metaphor-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Literary Components Grid */
        .components-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin: 25px 0;
        }

        @media (max-width: 768px) {
            .components-grid {
                grid-template-columns: 1fr;
            }
        }

        .component-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .component-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .component-card.comparison {
            border-color: var(--simile-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .component-card.description {
            border-color: var(--metaphor-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .component-card.sound {
            border-color: var(--alliteration-teal);
            background: linear-gradient(135deg, rgba(0, 150, 136, 0.1), transparent);
        }

        .component-card.exaggeration {
            border-color: var(--hyperbole-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .component-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .component-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .component-card.comparison .component-title {
            color: var(--simile-purple);
        }

        .component-card.description .component-title {
            color: var(--metaphor-blue);
        }

        .component-card.sound .component-title {
            color: var(--alliteration-teal);
        }

        .component-card.exaggeration .component-title {
            color: var(--hyperbole-orange);
        }

        .component-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
            flex-grow: 1;
        }

        .component-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .component-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
        }

        .feature-list li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
        }

        .component-card.comparison .feature-list li:before {
            color: var(--simile-purple);
        }

        .component-card.description .feature-list li:before {
            color: var(--metaphor-blue);
        }

        .component-card.sound .feature-list li:before {
            color: var(--alliteration-teal);
        }

        .component-card.exaggeration .feature-list li:before {
            color: var(--hyperbole-orange);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--metaphor-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary {
            background: var(--simile-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-secondary:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-success {
            background: var(--personification-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-success:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-warning {
            background: var(--hyperbole-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-warning:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-teal {
            background: var(--alliteration-teal);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 150, 136, 0.3);
        }

        .btn-teal:hover {
            background: #00796B;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 150, 136, 0.4);
        }

        .btn-danger {
            background: var(--irony-red);
            color: white;
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
        }

        .btn-danger:hover {
            background: #D32F2F;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(244, 67, 54, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--metaphor-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--metaphor-blue), var(--simile-purple), var(--personification-green));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .literary-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--hyperbole-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--metaphor-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--personification-green);
            color: var(--personification-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--irony-red);
            color: var(--irony-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--simile-purple);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--personification-green);
        }

        .option.incorrect .option-letter {
            background: var(--irony-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--personification-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--irony-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--personification-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--irony-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--personification-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--irony-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Literary Devices Builder Area */
        .literary-builder {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .literary-builder {
                grid-template-columns: 1fr;
            }
        }

        .builder-sidebar {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 800px;
        }

        /* Device Categories */
        .device-categories {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--simile-purple);
        }

        .categories-title {
            color: var(--simile-purple);
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .category-tab {
            padding: 8px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .category-tab:hover {
            border-color: var(--simile-purple);
            background: rgba(156, 39, 176, 0.1);
        }

        .category-tab.active {
            border-color: var(--simile-purple);
            background: rgba(156, 39, 176, 0.2);
        }

        .devices-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            min-height: 150px;
        }

        .device-item {
            padding: 8px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 4px;
            border-left: 3px solid;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .device-item:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.05);
        }

        .device-item.metaphor { border-color: var(--metaphor-blue); }
        .device-item.simile { border-color: var(--simile-purple); }
        .device-item.personification { border-color: var(--personification-green); }
        .device-item.hyperbole { border-color: var(--hyperbole-orange); }
        .device-item.alliteration { border-color: var(--alliteration-teal); }
        .device-item.irony { border-color: var(--irony-red); }

        .device-name {
            font-size: 0.9rem;
            font-weight: bold;
        }

        .device-example {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 3px;
        }

        /* Device Comparison */
        .device-comparison {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--metaphor-blue);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-card);
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 2px solid var(--metaphor-blue);
            color: var(--metaphor-blue);
        }

        .comparison-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .comparison-table td:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Interactive Device Creator */
        .device-creator {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--personification-green);
        }

        .creator-toolbar {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .creator-tool {
            padding: 8px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .creator-tool:hover {
            border-color: var(--personification-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .device-input {
            width: 100%;
            height: 100px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            padding: 15px;
            color: var(--text-primary);
            font-size: 0.95rem;
            line-height: 1.6;
            resize: vertical;
            margin-bottom: 15px;
        }

        .device-input:focus {
            outline: none;
            border-color: var(--personification-green);
        }

        .creator-feedback {
            padding: 10px;
            background: var(--dark-surface);
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            min-height: 50px;
        }

        /* Device Analysis */
        .device-analysis {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--hyperbole-orange);
        }

        .analysis-text {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            border-left: 3px solid var(--hyperbole-orange);
        }

        .analysis-question {
            font-size: 0.85rem;
            color: var(--text-primary);
            margin-top: 8px;
            font-style: italic;
        }

        /* Sound Devices Builder */
        .sound-builder {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--alliteration-teal);
        }

        .sound-part {
            padding: 10px;
            margin: 8px 0;
            background: var(--dark-surface);
            border-radius: 6px;
            cursor: move;
            border: 2px dashed var(--dark-border);
            transition: all 0.2s ease;
        }

        .sound-part:hover {
            border-color: var(--alliteration-teal);
        }

        .sound-zone {
            padding: 15px;
            border: 2px dashed var(--dark-border);
            border-radius: 8px;
            min-height: 100px;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .sound-zone.active {
            border-color: var(--alliteration-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        /* Poetry Examples */
        .poetry-examples {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--metaphor-blue);
        }

        .poem-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .poem-btn {
            padding: 8px 16px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .poem-btn:hover {
            border-color: var(--metaphor-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .poem-btn.active {
            border-color: var(--metaphor-blue);
            background: rgba(33, 150, 243, 0.2);
        }

        .poem-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            min-height: 150px;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text-secondary);
            font-style: italic;
            white-space: pre-line;
        }

        /* Prose Examples */
        .prose-examples {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--irony-red);
        }

        .prose-text {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            border-left: 3px solid var(--irony-red);
        }

        /* Device Quiz */
        .device-quiz {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--personification-green);
        }

        .quiz-question {
            margin-bottom: 15px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .quiz-option {
            padding: 10px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            border-color: var(--personification-green);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--metaphor-blue), var(--simile-purple), var(--personification-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--metaphor-blue), var(--simile-purple), var(--personification-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--metaphor-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: rgba(33, 150, 243, 0.2); }
            100% { background-color: transparent; }
        }

        .highlight {
            animation: highlight 1s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        /* Device Highlight Colors */
        .metaphor-highlight { color: var(--metaphor-blue); font-weight: bold; }
        .simile-highlight { color: var(--simile-purple); font-weight: bold; }
        .personification-highlight { color: var(--personification-green); font-weight: bold; }
        .hyperbole-highlight { color: var(--hyperbole-orange); font-weight: bold; }
        .alliteration-highlight { color: var(--alliteration-teal); font-weight: bold; }
        .irony-highlight { color: var(--irony-red); font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 English: Figures of Speech & Literary Devices</h1>
            <p class="welcome-subtitle">Master the art of literary expression through figures of speech and literary devices. Learn to identify, analyze, and create metaphors, similes, personification, alliteration, and more to enhance your writing and reading comprehension.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸŒ¹âœ¨ðŸŽ­ðŸ“šðŸŽ¨</span>
                <span class="topic-name">Metaphors, Similes, Personification, Alliteration, Hyperbole, Irony</span>
            </div>
            
            <div class="components-grid">
                <div class="component-card comparison" onclick="showComponentDetail('comparison')">
                    <div class="component-icon">ðŸ”„</div>
                    <h3 class="component-title">Comparison Devices</h3>
                    <p class="component-description">Master similes and metaphors - the building blocks of descriptive writing that create vivid imagery through comparison.</p>
                    <div class="component-features">
                        <h4>Key Devices:</h4>
                        <ul class="feature-list">
                            <li>Simile (like/as comparisons)</li>
                            <li>Metaphor (direct comparisons)</li>
                            <li>Analogy (extended comparisons)</li>
                            <li>Symbolism (representing ideas)</li>
                            <li>Allegory (story comparisons)</li>
                            <li>Parable (moral comparisons)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="component-card description" onclick="showComponentDetail('description')">
                    <div class="component-icon">ðŸŽ¨</div>
                    <h3 class="component-title">Descriptive Devices</h3>
                    <p class="component-description">Learn personification, hyperbole, and imagery to bring writing to life with vivid description and emotional impact.</p>
                    <div class="component-features">
                        <h4>Key Devices:</h4>
                        <ul class="feature-list">
                            <li>Personification</li>
                            <li>Hyperbole (exaggeration)</li>
                            <li>Imagery (sensory details)</li>
                            <li>Onomatopoeia (sound words)</li>
                            <li>Oxymoron (contradictions)</li>
                            <li>Euphemism (soft expressions)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="component-card sound" onclick="showComponentDetail('sound')">
                    <div class="component-icon">ðŸŽµ</div>
                    <h3 class="component-title">Sound Devices</h3>
                    <p class="component-description">Master alliteration, assonance, consonance, and rhyme to create musical language and memorable phrases.</p>
                    <div class="component-features">
                        <h4>Key Devices:</h4>
                        <ul class="feature-list">
                            <li>Alliteration</li>
                            <li>Assonance (vowel sounds)</li>
                            <li>Consonance (consonant sounds)</li>
                            <li>Rhyme & Rhythm</li>
                            <li>Onomatopoeia</li>
                            <li>Euphony & Cacophony</li>
                        </ul>
                    </div>
                </div>
                
                <div class="component-card exaggeration" onclick="showComponentDetail('exaggeration')">
                    <div class="component-icon">âš¡</div>
                    <h3 class="component-title">Impact Devices</h3>
                    <p class="component-description">Learn irony, sarcasm, understatement, and other devices that create surprise, humor, and emotional impact.</p>
                    <div class="component-features">
                        <h4>Key Devices:</h4>
                        <ul class="feature-list">
                            <li>Irony (verbal/situational)</li>
                            <li>Sarcasm (cutting irony)</li>
                            <li>Understatement (litotes)</li>
                            <li>Paradox (seeming contradiction)</li>
                            <li>Pun (word play)</li>
                            <li>Satire (social criticism)</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>ðŸ“š Begin Literary Devices Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="literaryTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Literary Devices Builder Area -->
            <div class="literary-builder">
                <div class="builder-sidebar">
                    <!-- Device Categories -->
                    <div class="device-categories">
                        <div class="categories-title">Literary Devices Categories</div>
                        <div class="category-tabs">
                            <button class="category-tab active" onclick="showCategory('comparison')">Comparison</button>
                            <button class="category-tab" onclick="showCategory('description')">Description</button>
                            <button class="category-tab" onclick="showCategory('sound')">Sound</button>
                            <button class="category-tab" onclick="showCategory('impact')">Impact</button>
                            <button class="category-tab" onclick="showCategory('structure')">Structure</button>
                        </div>
                        <div class="devices-display" id="devicesDisplay">
                            <!-- Comparison devices will load here -->
                            <div class="device-item simile" onclick="showDeviceDetail('simile')">
                                <div class="device-name">Simile</div>
                                <div class="device-example">"Her smile was as bright as the sun"</div>
                            </div>
                            <div class="device-item metaphor" onclick="showDeviceDetail('metaphor')">
                                <div class="device-name">Metaphor</div>
                                <div class="device-example">"Time is a thief"</div>
                            </div>
                            <div class="device-item personification" onclick="showDeviceDetail('personification')">
                                <div class="device-name">Personification</div>
                                <div class="device-example">"The wind whispered through the trees"</div>
                            </div>
                            <div class="device-item hyperbole" onclick="showDeviceDetail('hyperbole')">
                                <div class="device-name">Hyperbole</div>
                                <div class="device-example">"I've told you a million times"</div>
                            </div>
                            <div class="device-item alliteration" onclick="showDeviceDetail('alliteration')">
                                <div class="device-name">Alliteration</div>
                                <div class="device-example">"Peter Piper picked a peck..."</div>
                            </div>
                        </div>
                        <div class="creator-toolbar">
                            <button class="creator-tool" onclick="randomDeviceExample()">Random Example</button>
                            <button class="creator-tool" onclick="quizMeOnDevices()">Quick Quiz</button>
                            <button class="creator-tool" onclick="showAllDevices()">View All</button>
                        </div>
                    </div>
                    
                    <!-- Device Comparison -->
                    <div class="device-comparison">
                        <div class="categories-title">Common Device Comparisons</div>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Device</th>
                                    <th>Definition</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr onclick="showDeviceDetail('simile')">
                                    <td>Simile</td>
                                    <td>Comparison using "like" or "as"</td>
                                    <td>Brave as a lion</td>
                                </tr>
                                <tr onclick="showDeviceDetail('metaphor')">
                                    <td>Metaphor</td>
                                    <td>Direct comparison without "like" or "as"</td>
                                    <td>He is a night owl</td>
                                </tr>
                                <tr onclick="showDeviceDetail('personification')">
                                    <td>Personification</td>
                                    <td>Giving human traits to non-human things</td>
                                    <td>The flowers danced in the breeze</td>
                                </tr>
                                <tr onclick="showDeviceDetail('hyperbole')">
                                    <td>Hyperbole</td>
                                    <td>Extreme exaggeration</td>
                                    <td>I'm so hungry I could eat a horse</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Device Analysis Practice -->
                    <div class="device-analysis">
                        <div class="categories-title">Device Analysis Practice</div>
                        <div class="analysis-text" id="analysisText">
                            "The stars winked at me from the velvet sky, as if sharing a secret too precious for daylight."
                        </div>
                        <div class="analysis-question" id="analysisQuestion">
                            What literary devices can you identify in this sentence?
                        </div>
                        <div class="creator-toolbar">
                            <button class="creator-tool" onclick="analyzeForPersonification()">Find Personification</button>
                            <button class="creator-tool" onclick="analyzeForSimile()">Find Simile</button>
                            <button class="creator-tool" onclick="analyzeForMetaphor()">Find Metaphor</button>
                            <button class="creator-tool" onclick="newAnalysisExample()">New Example</button>
                        </div>
                        <div class="creator-feedback" id="analysisFeedback">
                            Click buttons to practice identifying literary devices
                        </div>
                    </div>
                    
                    <!-- Device Quiz -->
                    <div class="device-quiz">
                        <div class="categories-title">Quick Device Quiz</div>
                        <div class="quiz-question" id="quizQuestion">
                            What device is this: "The world is a stage"?
                        </div>
                        <div class="quiz-options" id="quizOptions">
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'metaphor')">Metaphor</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'simile')">Simile</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'personification')">Personification</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'hyperbole')">Hyperbole</div>
                        </div>
                        <div class="creator-toolbar">
                            <button class="creator-tool" onclick="newQuizQuestion()">New Question</button>
                            <button class="creator-tool" onclick="resetQuiz()">Reset Quiz</button>
                        </div>
                    </div>
                </div>
                
                <div class="builder-sidebar">
                    <!-- Interactive Device Creator -->
                    <div class="device-creator">
                        <div class="categories-title">Create Your Own Literary Devices</div>
                        <div class="creator-toolbar">
                            <button class="creator-tool" onclick="createSimile()">Create Simile</button>
                            <button class="creator-tool" onclick="createMetaphor()">Create Metaphor</button>
                            <button class="creator-tool" onclick="createPersonification()">Create Personification</button>
                            <button class="creator-tool" onclick="createHyperbole()">Create Hyperbole</button>
                            <button class="creator-tool" onclick="clearCreator()">Clear</button>
                        </div>
                        <textarea class="device-input" id="deviceInput" placeholder="Create your literary device here...">
The city slept under a blanket of stars, its lights winking like fallen constellations. Traffic whispered secrets to the empty streets, and moonlight painted silver pathways on sleeping buildings.</textarea>
                        <div class="creator-toolbar">
                            <button class="creator-tool" onclick="analyzeMyWriting()">Analyze My Writing</button>
                            <button class="creator-tool" onclick="checkForDevices()">Find Devices</button>
                            <button class="creator-tool" onclick="suggestImprovements()">Suggest Improvements</button>
                            <button class="creator-tool" onclick="generateRandomSentence()">Random Prompt</button>
                        </div>
                        <div class="creator-feedback" id="creatorFeedback">
                            Write your creative text and use the tools to analyze and improve it.
                        </div>
                    </div>
                    
                    <!-- Sound Devices Builder -->
                    <div class="sound-builder">
                        <div class="categories-title">Sound Devices Practice</div>
                        <div id="soundInstruction" style="color: var(--text-secondary); margin-bottom: 10px; font-size: 0.9rem;">
                            Build sentences using sound devices:
                        </div>
                        <div class="sound-part" draggable="true" id="sound1" ondragstart="dragSound(event)">
                            Alliteration: "Sally sells seashells..."
                        </div>
                        <div class="sound-part" draggable="true" id="sound2" ondragstart="dragSound(event)">
                            Assonance: "The rain in Spain..."
                        </div>
                        <div class="sound-part" draggable="true" id="sound3" ondragstart="dragSound(event)">
                            Consonance: "...stroke of luck"
                        </div>
                        <div class="sound-part" draggable="true" id="sound4" ondragstart="dragSound(event)">
                            Onomatopoeia: "Buzz, crackle, pop"
                        </div>
                        <div class="sound-part" draggable="true" id="sound5" ondragstart="dragSound(event)">
                            Rhyme: "The cat in the hat"
                        </div>
                        <div class="sound-zone" id="soundZone" ondrop="dropSound(event)" ondragover="allowDropSound(event)">
                            Build creative sentence here...
                        </div>
                        <div class="creator-toolbar">
                            <button class="creator-tool" onclick="checkSoundDevices()">Check Sound Devices</button>
                            <button class="creator-tool" onclick="resetSoundBuilder()">Reset</button>
                            <button class="creator-tool" onclick="showSoundExample()">Show Example</button>
                        </div>
                    </div>
                    
                    <!-- Poetry Examples -->
                    <div class="poetry-examples">
                        <div class="categories-title">Poetry Examples with Devices</div>
                        <div class="poem-selector">
                            <button class="poem-btn active" onclick="showPoem('nature')">Nature Poem</button>
                            <button class="poem-btn" onclick="showPoem('love')">Love Poem</button>
                            <button class="poem-btn" onclick="showPoem('city')">City Poem</button>
                            <button class="poem-btn" onclick="showPoem('narrative')">Narrative Poem</button>
                        </div>
                        <div class="poem-display" id="poemDisplay">
                            The moon was a ghostly galleon
                            Tossed upon cloudy seas,
                            The road was a ribbon of moonlight
                            Over the purple moor...
                            
                            [Metaphors: moon = galleon, road = ribbon]
                            [Alliteration: ghostly galleon]
                            [Imagery: purple moor, cloudy seas]
                        </div>
                    </div>
                    
                    <!-- Prose Examples -->
                    <div class="prose-examples">
                        <div class="categories-title">Prose Examples with Devices</div>
                        <div class="prose-text">
                            "The old house stood lonely and forgotten, its windows like blind eyes staring at nothing. Time had gnawed at its edges, and the wind sang mournful tunes through its broken boards."
                            
                            <div style="margin-top: 10px; font-size: 0.8rem; color: var(--text-secondary);">
                                <span class="simile-highlight">Simile</span>: "windows like blind eyes"<br>
                                <span class="personification-highlight">Personification</span>: "Time had gnawed", "wind sang"<br>
                                <span class="alliteration-highlight">Alliteration</span>: "broken boards"
                            </div>
                        </div>
                        <div class="creator-toolbar">
                            <button class="creator-tool" onclick="newProseExample()">New Prose Example</button>
                            <button class="creator-tool" onclick="highlightDevices()">Highlight Devices</button>
                            <button class="creator-tool" onclick="explainProseDevices()">Explain Devices</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Literary Devices Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Literary Devices Questions (80+)
        const questions = [
            // Similes & Metaphors (1-20)
            {
                question: "What is a simile?",
                options: ["A comparison using 'like' or 'as'", "A direct comparison without 'like' or 'as'", "Giving human traits to non-human things", "An extreme exaggeration"],
                answer: "A",
                explanation: "A simile is a figure of speech that directly compares two different things using the words 'like' or 'as'."
            },
            {
                question: "Which of these is a simile?",
                options: ["Her eyes sparkled like diamonds", "He is a shining star", "The wind whispered secrets", "I've walked a thousand miles"],
                answer: "A",
                explanation: "'Her eyes sparkled like diamonds' uses 'like' to compare eyes to diamonds, making it a simile."
            },
            {
                question: "What is a metaphor?",
                options: ["A direct comparison stating one thing IS another", "A comparison using 'like' or 'as'", "An exaggeration for effect", "Words that imitate sounds"],
                answer: "A",
                explanation: "A metaphor directly states that one thing is another, creating a comparison without using 'like' or 'as'."
            },
            {
                question: "Which is a metaphor?",
                options: ["Life is a rollercoaster", "Busy as a bee", "The trees danced in the wind", "She's as tall as a tree"],
                answer: "A",
                explanation: "'Life is a rollercoaster' directly states life IS a rollercoaster, making it a metaphor."
            },
            {
                question: "What's the difference between simile and metaphor?",
                options: ["Simile uses 'like' or 'as'; metaphor doesn't", "Metaphor is longer", "Simile is always true", "No difference"],
                answer: "A",
                explanation: "The key difference is that similes use 'like' or 'as' for comparison, while metaphors make direct comparisons."
            },
            {
                question: "Which device is in: 'Time is a thief'?",
                options: ["Metaphor", "Simile", "Personification", "Hyperbole"],
                answer: "A",
                explanation: "'Time is a thief' is a metaphor - it directly states time IS a thief."
            },
            {
                question: "Which device is in: 'Cool as a cucumber'?",
                options: ["Simile", "Metaphor", "Alliteration", "Onomatopoeia"],
                answer: "A",
                explanation: "'Cool as a cucumber' uses 'as' to compare, making it a simile."
            },
            {
                question: "What makes an effective metaphor?",
                options: ["Creates vivid, unexpected connection", "Always uses 'like' or 'as'", "Must be literally true", "Should be complex"],
                answer: "A",
                explanation: "Effective metaphors create vivid, sometimes unexpected connections between unlike things."
            },
            {
                question: "Which is an extended metaphor?",
                options: ["A metaphor developed throughout a text", "A very long simile", "Multiple different metaphors", "A metaphor using 'like'"],
                answer: "A",
                explanation: "An extended metaphor continues the comparison throughout several lines or an entire work."
            },
            {
                question: "What is a mixed metaphor?",
                options: ["Combining incompatible metaphors", "Using both simile and metaphor", "A very creative metaphor", "A misunderstood metaphor"],
                answer: "A",
                explanation: "A mixed metaphor combines elements from different metaphors that don't work well together."
            },
            {
                question: "Which device is in: 'His words were daggers'?",
                options: ["Metaphor", "Simile", "Personification", "Hyperbole"],
                answer: "A",
                explanation: "This is a metaphor comparing words to daggers without using 'like' or 'as'."
            },
            {
                question: "What is an implied metaphor?",
                options: ["Suggests comparison without stating it directly", "A weak metaphor", "A misunderstood metaphor", "A metaphor in poetry only"],
                answer: "A",
                explanation: "An implied metaphor suggests the comparison rather than stating it directly."
            },
            {
                question: "Which is NOT a simile?",
                options: ["The world's a stage", "Quick as lightning", "Sweet like honey", "Hard as rock"],
                answer: "A",
                explanation: "'The world's a stage' is a metaphor, not a simile (no 'like' or 'as')."
            },
            {
                question: "What does 'drowning in work' use?",
                options: ["Metaphor", "Simile", "Literal meaning", "Personification"],
                answer: "A",
                explanation: "'Drowning in work' is a metaphor comparing overwhelming work to drowning."
            },
            {
                question: "Which creates more vivid imagery?",
                options: ["Both can be equally vivid", "Only similes", "Only metaphors", "Neither"],
                answer: "A",
                explanation: "Both similes and metaphors can create equally vivid imagery when used effectively."
            },
            {
                question: "What is 'dead metaphor'?",
                options: ["Metaphor so common it's not noticed", "Metaphor about death", "Incorrect metaphor", "Old-fashioned metaphor"],
                answer: "A",
                explanation: "A dead metaphor is so commonly used that people don't recognize it as figurative language."
            },
            {
                question: "Which device is in: 'Love is a battlefield'?",
                options: ["Metaphor", "Simile", "Hyperbole", "Personification"],
                answer: "A",
                explanation: "This directly states love IS a battlefield, making it a metaphor."
            },
            {
                question: "What is analogy?",
                options: ["Extended comparison showing similarities", "Short metaphor", "Type of simile", "Sound device"],
                answer: "A",
                explanation: "Analogy is an extended comparison showing similarities between different things."
            },
            {
                question: "Which is a simile for happiness?",
                options: ["As happy as a clam", "Happiness is sunshine", "Happiness smiled", "Incredibly happy"],
                answer: "A",
                explanation: "'As happy as a clam' uses 'as' to compare, making it a simile."
            },
            {
                question: "What is 'The classroom was a zoo'?",
                options: ["Metaphor", "Simile", "Personification", "Literal statement"],

            // Personification (21-40)
                answer: "A",
                explanation: "This is a metaphor comparing a chaotic classroom to a zoo."
            },
            {
                question: "What is personification?",
                options: ["Giving human traits to non-human things", "Comparing two things", "Extreme exaggeration", "Repeating sounds"],
                answer: "A",
                explanation: "Personification gives human qualities, emotions, or actions to animals, objects, or ideas."
            },
            {
                question: "Which is personification?",
                options: ["The sun smiled down on us", "The sun is like a smile", "The sun is a golden coin", "The incredibly bright sun"],
                answer: "A",
                explanation: "'The sun smiled' gives human action (smiling) to the sun, making it personification."
            },
            {
                question: "What human quality is in: 'The wind whispered'?",
                options: ["Speaking/whispering", "Running", "Thinking", "Sleeping"],
                answer: "A",
                explanation: "Whispering is a human action given to the wind."
            },
            {
                question: "Which is NOT personification?",
                options: ["The tree is tall", "The tree waved hello", "The tree sighed in the wind", "The tree watched over the garden"],
                answer: "A",
                explanation: "'The tree is tall' is a simple description, not personification."
            },
            {
                question: "What does personification add to writing?",
                options: ["Emotional connection and vividness", "Factual accuracy", "Complex vocabulary", "Historical context"],
                answer: "A",
                explanation: "Personification creates emotional connection and makes descriptions more vivid."
            },
            {
                question: "Which is personification of time?",
                options: ["Time marches on", "Time is money", "Time flies", "Time like a river"],
                answer: "A",
                explanation: "'Marches on' gives human action (marching) to time."
            },
            {
                question: "What is anthropomorphism?",
                options: ["Giving human form to non-human things", "A type of metaphor", "Extreme personification", "Animal characters"],
                answer: "A",
                explanation: "Anthropomorphism specifically gives human form or attributes to animals or objects."
            },
            {
                question: "Which device is in: 'Opportunity knocked'?",
                options: ["Personification", "Metaphor", "Simile", "Hyperbole"],
                answer: "A",
                explanation: "Knocking is a human action given to the abstract concept of opportunity."
            },
            {
                question: "What human trait in: 'The camera loves you'?",
                options: ["Emotion (love)", "Movement", "Speech", "Thought"],
                answer: "A",
                explanation: "Love is a human emotion given to a camera."
            },
            {
                question: "Which is personification of nature?",
                options: ["The mountains stood guard", "The tall mountains", "Mountains like giants", "Gigantic mountains"],
                answer: "A",
                explanation: "'Stood guard' gives human action to mountains."
            },
            {
                question: "What is pathetic fallacy?",
                options: ["Nature reflecting human emotions", "Weak personification", "Sad metaphor", "Weather description"],
                answer: "A",
                explanation: "Pathetic fallacy is a type of personification where nature reflects human emotions."
            },
            {
                question: "Which shows angry weather?",
                options: ["The storm raged", "The big storm", "Storm like anger", "Very stormy"],
                answer: "A",
                explanation: "'Raged' gives human emotion (anger) to the storm."
            },
            {
                question: "What is zoomorphism?",
                options: ["Giving animal traits to humans", "Giving human traits to animals", "Animal metaphors", "Animal sounds"],
                answer: "A",
                explanation: "Zoomorphism gives animal characteristics to humans or human things."
            },
            {
                question: "Which is personification of a city?",
                options: ["The city never sleeps", "The large city", "City like a machine", "Busy city"],
                answer: "A",
                explanation: "'Never sleeps' gives human quality to the city."
            },
            {
                question: "What human action in: 'The book spoke to me'?",
                options: ["Speaking", "Listening", "Walking", "Seeing"],
                answer: "A",
                explanation: "Speaking is a human action given to a book."
            },
            {
                question: "Which is NOT pathetic fallacy?",
                options: ["The sunny day made me happy", "The weeping willow", "The angry sea", "The melancholy rain"],
                answer: "A",
                explanation: "This describes human emotion caused by weather, not weather having human emotion."
            },
            {
                question: "What is in: 'Fear gripped my heart'?",
                options: ["Personification", "Simile", "Metaphor", "Alliteration"],
                answer: "A",
                explanation: "Gripping is a human action given to fear."
            },
            {
                question: "Which gives emotion to objects?",
                options: ["The lonely road", "The long road", "Road like a ribbon", "The winding road"],
                answer: "A",
                explanation: "'Lonely' is a human emotion given to a road."
            },
            {
                question: "What is in: 'The flowers danced'?",
                options: ["Personification", "Metaphor", "Simile", "Hyperbole"],
                answer: "A",
                explanation: "Dancing is a human action given to flowers."

            // Hyperbole & Understatement (41-60)
            },
            {
                question: "What is hyperbole?",
                options: ["Extreme exaggeration for effect", "Understatement", "Literal truth", "Complex comparison"],
                answer: "A",
                explanation: "Hyperbole uses extreme exaggeration to emphasize a point or create humor."
            },
            {
                question: "Which is hyperbole?",
                options: ["I'm so hungry I could eat a horse", "I'm quite hungry", "Hunger is a beast", "Hungry like a wolf"],
                answer: "A",
                explanation: "Eating a horse is extreme exaggeration for emphasis."
            },
            {
                question: "What is understatement?",
                options: ["Presenting something as less important than it is", "Exaggeration", "Direct comparison", "Sound device"],
                answer: "A",
                explanation: "Understatement presents something as less significant than it really is, often for ironic effect."
            },
            {
                question: "Which is understatement?",
                options: ["The hurricane caused a bit of wind", "The devastating hurricane", "Hurricane like a monster", "The incredibly powerful hurricane"],
                answer: "A",
                explanation: "Calling a hurricane 'a bit of wind' dramatically understates its power."
            },
            {
                question: "What is litotes?",
                options: ["Understatement using double negative", "Extreme exaggeration", "Direct comparison", "Sound repetition"],
                answer: "A",
                explanation: "Litotes is a form of understatement using double negatives or negative terms."
            },
            {
                question: "Which is litotes?",
                options: ["Not bad at all", "Absolutely terrible", "Very good", "Somewhat okay"],
                answer: "A",
                explanation: "'Not bad' uses negative terms to express something positive."
            },
            {
                question: "What's the purpose of hyperbole?",
                options: ["Emphasize and create strong impression", "Provide factual information", "Create confusion", "Simplify language"],
                answer: "A",
                explanation: "Hyperbole emphasizes points and creates strong emotional impressions."
            },
            {
                question: "Which is hyperbole about waiting?",
                options: ["I've been waiting forever", "I waited a while", "Waiting is boring", "Time passed slowly"],
                answer: "A",
                explanation: "'Forever' is extreme exaggeration about waiting time."
            },
            {
                question: "What is meiosis?",
                options: ["Belittling understatement", "Extreme exaggeration", "Sound device", "Type of metaphor"],
                answer: "A",
                explanation: "Meiosis is understatement that belittles or dismisses something's importance."
            },
            {
                question: "Which shows hyperbole for size?",
                options: ["Bigger than a house", "Quite large", "Large like an elephant", "The large object"],
                answer: "A",
                explanation: "'Bigger than a house' is extreme exaggeration about size."
            },
            {
                question: "What is in: 'I died of embarrassment'?",
                options: ["Hyperbole", "Literal truth", "Metaphor", "Simile"],
                answer: "A",
                explanation: "This exaggerates embarrassment to the point of death for emphasis."
            },
            {
                question: "Which is understatement for success?",
                options: ["I did alright", "I was incredibly successful", "Success like a tidal wave", "Complete triumph"],
                answer: "A",
                explanation: "'Did alright' understates significant achievement."
            },
            {
                question: "What is auxesis?",
                options: ["Exaggeration for emphasis", "Understatement", "Climactic ordering", "Sound device"],
                answer: "A",
                explanation: "Auxesis is exaggeration that increases in intensity for emphasis."
            },
            {
                question: "Which hyperbole for tiredness?",
                options: ["I could sleep for a year", "I'm tired", "Tired like after running", "Very tired"],
                answer: "A",
                explanation: "Sleeping for a year exaggerates extreme tiredness."
            },
            {
                question: "What is in: 'It's just a scratch' (for major injury)?",
                options: ["Understatement", "Hyperbole", "Metaphor", "Simile"],
                answer: "A",
                explanation: "Calling a major injury 'just a scratch' dramatically understates its severity."
            },
            {
                question: "Which is NOT hyperbole?",
                options: ["The medium-sized box", "The box weighed a ton", "I told you a million times", "It took ages"],
                answer: "A",
                explanation: "This is literal description, not exaggeration."
            },
            {
                question: "What is overstatement?",
                options: ["Synonym for hyperbole", "Understatement", "Accurate statement", "Complex description"],
                answer: "A",
                explanation: "Overstatement is another term for hyperbole or exaggeration."
            },
            {
                question: "Which shows hyperbole for cold?",
                options: ["I'm freezing to death", "It's chilly", "Cold like ice", "The cold weather"],
                answer: "A",
                explanation: "'Freezing to death' exaggerates cold for emphasis."
            },
            {
                question: "What is in: 'The test was no walk in the park'?",
                options: ["Litotes (understatement)", "Hyperbole", "Metaphor", "Simile"],
                answer: "A",
                explanation: "This uses negative terms to emphasize difficulty."
            },
            {
                question: "Which hyperbole for weight?",
                options: ["This bag weighs a ton", "Heavy bag", "Bag like rocks", "Very heavy"],

            // Sound Devices (61-80)
                answer: "A",
                explanation: "'Weighs a ton' exaggerates weight for emphasis."
            },
            {
                question: "What is alliteration?",
                options: ["Repetition of initial consonant sounds", "Repetition of vowel sounds", "Word imitation", "Rhyming words"],
                answer: "A",
                explanation: "Alliteration repeats initial consonant sounds in nearby words."
            },
            {
                question: "Which shows alliteration?",
                options: ["Peter Piper picked peppers", "The cat sat on the mat", "How now brown cow", "The big bad wolf"],
                answer: "A",
                explanation: "'Peter Piper picked peppers' repeats the 'p' sound."
            },
            {
                question: "What is assonance?",
                options: ["Repetition of vowel sounds", "Consonant repetition", "Word repetition", "Rhyme scheme"],
                answer: "A",
                explanation: "Assonance repeats vowel sounds in nearby words."
            },
            {
                question: "Which shows assonance?",
                options: ["The rain in Spain stays mainly in the plain", "She sells seashells", "Big bad wolf", "Peter Piper"],
                answer: "A",
                explanation: "This repeats the long 'a' sound in rain, Spain, stays, mainly, plain."
            },
            {
                question: "What is consonance?",
                options: ["Repetition of consonant sounds", "Vowel repetition", "Word meaning", "Sentence rhythm"],
                answer: "A",
                explanation: "Consonance repeats consonant sounds anywhere in words."
            },
            {
                question: "Which shows consonance?",
                options: ["Stroke of luck", "Mike likes bikes", "The early bird", "Time and tide"],
                answer: "A",
                explanation: "'Stroke of luck' repeats the 'k' sound."
            },
            {
                question: "What is onomatopoeia?",
                options: ["Words that imitate sounds", "Sound repetition", "Rhyming words", "Loud words"],
                answer: "A",
                explanation: "Onomatopoeia uses words that phonetically imitate sounds."
            },
            {
                question: "Which is onomatopoeia?",
                options: ["Buzz, pop, crash", "Run, jump, play", "Big, small, tall", "Happy, sad, mad"],
                answer: "A",
                explanation: "Buzz, pop, and crash imitate sounds they describe."
            },
            {
                question: "What is euphony?",
                options: ["Pleasant, harmonious sounds", "Harsh sounds", "Rhyming sounds", "Repetitive sounds"],
                answer: "A",
                explanation: "Euphony uses pleasant, melodious combinations of sounds."
            },
            {
                question: "What is cacophony?",
                options: ["Harsh, discordant sounds", "Pleasant sounds", "Rhyming sounds", "Soft sounds"],
                answer: "A",
                explanation: "Cacophony uses harsh, jarring sound combinations."
            },
            {
                question: "Which shows sibilance?",
                options: ["She sells shiny seashells", "Peter Piper picked", "Big bad wolf", "How now brown"],
                answer: "A",
                explanation: "Sibilance repeats 's', 'sh', 'z' sounds, as in this example."
            },
            {
                question: "What is rhyme?",
                options: ["Repetition of similar sounds", "Word meaning", "Sentence length", "Paragraph structure"],
                answer: "A",
                explanation: "Rhyme repeats similar sounding words, usually at line ends."
            },
            {
                question: "What is internal rhyme?",
                options: ["Rhyme within a line", "Rhyme at line ends", "Half-rhyme", "Sight rhyme"],
                answer: "A",
                explanation: "Internal rhyme places rhyming words within the same line."
            },
            {
                question: "Which shows internal rhyme?",
                options: ["Once upon a midnight dreary", "The cat in the hat", "Twinkle twinkle little star", "Mary had a little lamb"],
                answer: "A",
                explanation: "'Once upon a midnight dreary' rhymes 'upon' with 'dreary' within the line."
            },
            {
                question: "What is half-rhyme/slant rhyme?",
                options: ["Imperfect rhyme", "Perfect rhyme", "Internal rhyme", "Sight rhyme"],
                answer: "A",
                explanation: "Half-rhyme uses similar but not identical sounds."
            },
            {
                question: "What is rhythm?",
                options: ["Pattern of stressed/unstressed syllables", "Sound repetition", "Word meaning", "Sentence length"],
                answer: "A",
                explanation: "Rhythm is the pattern of beats or stresses in language."
            },
            {
                question: "Which creates musical language?",
                options: ["All sound devices can", "Only rhyme", "Only alliteration", "Only onomatopoeia"],
                answer: "A",
                explanation: "All sound devices contribute to musical language when used effectively."
            },
            {
                question: "What is anaphora?",
                options: ["Repetition at sentence beginnings", "Repetition at ends", "Middle repetition", "Sound repetition"],
                answer: "A",
                explanation: "Anaphora repeats words or phrases at the beginning of successive sentences."
            },
            {
                question: "What is epistrophe?",
                options: ["Repetition at sentence ends", "Beginning repetition", "Middle repetition", "Sound repetition"],
                answer: "A",
                explanation: "Epistrophe repeats words or phrases at the end of successive sentences."
            },
            {
                question: "Which is NOT a sound device?",
                options: ["Metaphor", "Alliteration", "Assonance", "Onomatopoeia"],
                answer: "A",
                explanation: "Metaphor is a comparison device, not primarily a sound device."
            }
        ];

        // Additional questions beyond 80
        const additionalQuestions = [
            {
                question: "What is irony?",
                options: ["Opposite of literal meaning or expectation", "Extreme exaggeration", "Direct comparison", "Sound repetition"],
                answer: "A",
                explanation: "Irony involves saying the opposite of what is meant or situations where outcomes contradict expectations."
            },
            {
                question: "What is situational irony?",
                options: ["Outcome opposite of expectations", "Saying opposite of meaning", "Audience knows more than characters", "Historical coincidence"],
                answer: "A",
                explanation: "Situational irony occurs when the outcome of a situation is opposite to what was expected."
            },
            {
                question: "What is verbal irony?",
                options: ["Saying opposite of literal meaning", "Situational contradiction", "Dramatic tension", "Sarcasm only"],
                answer: "A",
                explanation: "Verbal irony involves saying the opposite of what is literally meant."
            },
            {
                question: "What is dramatic irony?",
                options: ["Audience knows more than characters", "Character says opposite of meaning", "Unexpected outcome", "Historical irony"],
                answer: "A",
                explanation: "Dramatic irony occurs when the audience knows something characters don't."
            },
            {
                question: "What is oxymoron?",
                options: ["Combining contradictory terms", "Extended metaphor", "Sound device", "Type of rhyme"],
                answer: "A",
                explanation: "Oxymoron combines contradictory terms (e.g., 'deafening silence')."
            },
            {
                question: "What is paradox?",
                options: ["Seemingly contradictory truth", "Simple contradiction", "Metaphor", "Hyperbole"],
                answer: "A",
                explanation: "Paradox is a statement that seems contradictory but reveals truth."
            },
            {
                question: "What is symbolism?",
                options: ["Using objects to represent ideas", "Direct comparison", "Sound device", "Exaggeration"],
                answer: "A",
                explanation: "Symbolism uses objects, characters, or actions to represent abstract ideas."
            },
            {
                question: "What is imagery?",
                options: ["Language that appeals to senses", "Sound patterns", "Sentence structure", "Word definitions"],
                answer: "A",
                explanation: "Imagery uses descriptive language to create sensory experiences for readers."
            },
            {
                question: "What is allusion?",
                options: ["Reference to well-known person/event", "Direct explanation", "Sound device", "Type of metaphor"],
                answer: "A",
                explanation: "Allusion makes indirect reference to people, events, or works outside the text."
            },
            {
                question: "What is pun?",
                options: ["Play on words with multiple meanings", "Type of metaphor", "Sound device", "Exaggeration"],
                answer: "A",
                explanation: "Pun plays on words with multiple meanings or similar sounds."
            }
        ];

        // Combine all questions
        const allQuestions = [...questions, ...additionalQuestions];

        // Literary device tips
        const literaryTips = [
            "Remember: Simile uses 'like' or 'as', metaphor says something IS something else!",
            "Personification gives human qualities to animals, objects, or ideas.",
            "Hyperbole isn't meant to be taken literally - it's exaggeration for effect!",
            "Alliteration repeats initial consonant sounds (Peter Piper picked...).",
            "Assonance repeats vowel sounds (The rain in Spain...).",
            "Irony has three types: verbal (saying opposite), situational (unexpected outcome), dramatic (audience knows more).",
            "Oxymoron combines opposites (jumbo shrimp, deafening silence).",
            "Symbolism uses concrete objects to represent abstract ideas."
        ];

        // Device categories data
        const deviceCategories = {
            comparison: [
                { name: "Simile", example: "Brave as a lion", color: "simile" },
                { name: "Metaphor", example: "Time is money", color: "metaphor" },
                { name: "Analogy", example: "Life is like a box of chocolates", color: "metaphor" },
                { name: "Symbolism", example: "Dove = peace", color: "metaphor" },
                { name: "Allegory", example: "Animal Farm represents Russian Revolution", color: "metaphor" }
            ],
            description: [
                { name: "Personification", example: "The wind whispered secrets", color: "personification" },
                { name: "Hyperbole", example: "I've told you a million times", color: "hyperbole" },
                { name: "Imagery", example: "The crimson sunset painted the sky", color: "personification" },
                { name: "Onomatopoeia", example: "Buzz, crash, whisper", color: "alliteration" },
                { name: "Oxymoron", example: "Deafening silence", color: "irony" }
            ],
            sound: [
                { name: "Alliteration", example: "Sally sells seashells", color: "alliteration" },
                { name: "Assonance", example: "The rain in Spain", color: "alliteration" },
                { name: "Consonance", example: "Stroke of luck", color: "alliteration" },
                { name: "Rhyme", example: "Cat, hat, mat", color: "alliteration" },
                { name: "Onomatopoeia", example: "Buzz, pop, sizzle", color: "alliteration" }
            ],
            impact: [
                { name: "Irony", example: "Fire station burns down", color: "irony" },
                { name: "Sarcasm", example: "Nice weather we're having (during storm)", color: "irony" },
                { name: "Understatement", example: "The hurricane caused a breeze", color: "hyperbole" },
                { name: "Paradox", example: "Less is more", color: "irony" },
                { name: "Pun", example: "I'm reading a book on anti-gravity - it's impossible to put down!", color: "irony" }
            ],
            structure: [
                { name: "Anaphora", example: "We shall fight on the beaches, we shall fight...", color: "metaphor" },
                { name: "Epistrophe", example: "Government of the people, by the people, for the people", color: "metaphor" },
                { name: "Parallelism", example: "Like father, like son", color: "simile" },
                { name: "Antithesis", example: "It was the best of times, it was the worst of times", color: "irony" },
                { name: "Chiasmus", example: "Ask not what your country can do for you...", color: "metaphor" }
            ]
        };

        // Analysis examples
        const analysisExamples = [
            {
                text: "The stars winked at me from the velvet sky, as if sharing a secret too precious for daylight.",
                devices: [
                    { type: "personification", explanation: "'Stars winked' gives human action to stars" },
                    { type: "metaphor", explanation: "'velvet sky' compares sky to velvet" },
                    { type: "simile", explanation: "'as if sharing a secret' uses 'as if' for comparison" },
                    { type: "imagery", explanation: "Creates visual picture of night sky" }
                ]
            },
            {
                text: "Her laughter was music to his ears, a symphony that drowned out the world's noise.",
                devices: [
                    { type: "metaphor", explanation: "'laughter was music' direct comparison" },
                    { type: "metaphor", explanation: "'symphony that drowned' extended metaphor" },
                    { type: "hyperbole", explanation: "'drowned out the world's noise' exaggeration" },
                    { type: "imagery", explanation: "Auditory imagery of laughter and music" }
                ]
            },
            {
                text: "Time crawled like a wounded animal, each second an eternity in the silent room.",
                devices: [
                    { type: "simile", explanation: "'crawled like a wounded animal' uses 'like'" },
                    { type: "metaphor", explanation: "'each second an eternity' direct comparison" },
                    { type: "personification", explanation: "'Time crawled' gives action to time" },
                    { type: "hyperbole", explanation: "'each second an eternity' exaggeration" }
                ]
            }
        ];

        // Quiz questions
        const quizQuestions = [
            {
                question: "What device is this: 'The world is a stage'?",
                options: ["Metaphor", "Simile", "Personification", "Hyperbole"],
                answer: "Metaphor",
                explanation: "Directly states world IS a stage (no 'like' or 'as')"
            },
            {
                question: "Which device gives human traits to non-human things?",
                options: ["Personification", "Metaphor", "Simile", "Alliteration"],
                answer: "Personification",
                explanation: "Personification gives human qualities to animals, objects, or ideas"
            },
            {
                question: "'I'm so hungry I could eat a horse' uses what device?",
                options: ["Hyperbole", "Metaphor", "Simile", "Personification"],
                answer: "Hyperbole",
                explanation: "Extreme exaggeration for effect"
            },
            {
                question: "Which device repeats initial consonant sounds?",
                options: ["Alliteration", "Assonance", "Consonance", "Onomatopoeia"],
                answer: "Alliteration",
                explanation: "Alliteration repeats beginning consonant sounds"
            },
            {
                question: "'Brave as a lion' is an example of?",
                options: ["Simile", "Metaphor", "Personification", "Hyperbole"],
                answer: "Simile",
                explanation: "Uses 'as' to compare bravery to a lion"
            }
        ];

        // Poetry examples
        const poemExamples = {
            nature: `The moon was a ghostly galleon
Tossed upon cloudy seas,
The road was a ribbon of moonlight
Over the purple moor...

[Devices Used]
â€¢ Metaphor: "moon was a ghostly galleon"
â€¢ Metaphor: "road was a ribbon"
â€¢ Alliteration: "ghostly galleon"
â€¢ Imagery: "purple moor", "cloudy seas"
â€¢ Personification: moon "tossed" (implied)`,

            love: `My love is like a red, red rose
That's newly sprung in June;
My love is like the melody
That's sweetly played in tune.

[Devices Used]
â€¢ Simile: "love is like a red, red rose"
â€¢ Simile: "love is like the melody"
â€¢ Repetition: "red, red" (emphasis)
â€¢ Imagery: visual (rose) and auditory (melody)
â€¢ Rhyme: June/tune`,

            city: `The city breathes, a living beast
With neon veins and concrete bones,
Its heart beats in the traffic's pulse
And whispers through the telephone tones.

[Devices Used]
â€¢ Personification: "city breathes", "living beast"
â€¢ Metaphor: "neon veins", "concrete bones"
â€¢ Metaphor: "heart beats in traffic's pulse"
â€¢ Alliteration: "telephone tones"
â€¢ Imagery: urban landscape description`,

            narrative: `The wind howled like a banshee's cry,
The trees danced madly in the storm,
While lightning wrote across the sky
Its angry, bright, electric form.

[Devices Used]
â€¢ Simile: "howled like a banshee's cry"
â€¢ Personification: "trees danced", "lightning wrote"
â€¢ Imagery: storm scene description
â€¢ Alliteration: "bright, electric"
â€¢ Metaphor: "electric form" for lightning`
        };

        // Prose examples
        const proseExamples = [
            {
                text: "The old house stood lonely and forgotten, its windows like blind eyes staring at nothing. Time had gnawed at its edges, and the wind sang mournful tunes through its broken boards.",
                devices: [
                    { type: "simile", text: "windows like blind eyes" },
                    { type: "personification", text: "Time had gnawed" },
                    { type: "personification", text: "wind sang mournful tunes" },
                    { type: "alliteration", text: "broken boards" },
                    { type: "imagery", text: "creates haunting atmosphere" }
                ]
            },
            {
                text: "Her smile was sunrise after a long night, warming everything it touched. In that moment, the world held its breath, waiting to see what came next.",
                devices: [
                    { type: "metaphor", text: "smile was sunrise" },
                    { type: "personification", text: "world held its breath" },
                    { type: "imagery", text: "visual and emotional warmth" },
                    { type: "hyperbole", text: "warming everything it touched" }
                ]
            },
            {
                text: "The argument hit him like a physical blow, each word a hammer strike to his carefully constructed defenses. Silence followed, so complete it was almost a presence in the room.",
                devices: [
                    { type: "simile", text: "like a physical blow" },
                    { type: "metaphor", text: "each word a hammer strike" },
                    { type: "oxymoron", text: "silence... almost a presence" },
                    { type: "imagery", text: "physical and emotional impact" }
                ]
            }
        ];

        // Sound device parts
        const soundParts = [
            { id: "sound1", text: "Alliteration: 'Sally sells seashells by the seashore'", device: "alliteration" },
            { id: "sound2", text: "Assonance: 'The rain in Spain stays mainly in the plain'", device: "assonance" },
            { id: "sound3", text: "Consonance: '...a stroke of luck'", device: "consonance" },
            { id: "sound4", text: "Onomatopoeia: 'Buzz, crackle, pop, sizzle'", device: "onomatopoeia" },
            { id: "sound5", text: "Rhyme: 'The cat in the hat came back'", device: "rhyme" }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentAnalysis: 0,
            currentProse: 0,
            currentQuiz: 0,
            quizScore: 0,
            soundOrder: [],
            currentCategory: 'comparison'
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const literaryTip = document.getElementById('literaryTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const devicesDisplay = document.getElementById('devicesDisplay');
        const analysisText = document.getElementById('analysisText');
        const analysisQuestion = document.getElementById('analysisQuestion');
        const analysisFeedback = document.getElementById('analysisFeedback');
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');
        const deviceInput = document.getElementById('deviceInput');
        const creatorFeedback = document.getElementById('creatorFeedback');
        const soundZone = document.getElementById('soundZone');
        const poemDisplay = document.getElementById('poemDisplay');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupDeviceCategories();
            setupAnalysisExample();
            setupQuiz();
            setupSoundBuilder();
            setupPoemExample();
            setupProseExample();
        }

        // Setup device categories
        function setupDeviceCategories() {
            showCategory('comparison');
        }

        function showCategory(category) {
            appState.currentCategory = category;
            
            // Update active tab
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event?.target.classList.add('active');
            
            // Display devices
            const devices = deviceCategories[category];
            devicesDisplay.innerHTML = '';
            
            devices.forEach(device => {
                const item = document.createElement('div');
                item.className = `device-item ${device.color}`;
                item.onclick = () => showDeviceDetail(device.name.toLowerCase());
                item.innerHTML = `
                    <div class="device-name">${device.name}</div>
                    <div class="device-example">"${device.example}"</div>
                `;
                devicesDisplay.appendChild(item);
            });
        }

        function showDeviceDetail(device) {
            let detail = "";
            let examples = [];
            
            switch(device) {
                case 'simile':
                    detail = "SIMILE:\n\nDefinition: Comparison using 'like' or 'as'\n\nExamples:\nâ€¢ Brave as a lion\nâ€¢ Cool as a cucumber\nâ€¢ Sleep like a baby\nâ€¢ Fast like lightning\n\nPurpose: Creates vivid imagery through comparison\n\nTip: Similes make abstract concepts concrete";
                    examples = ["Her smile was like sunshine", "He runs like the wind", "As quiet as a mouse", "Clear as crystal"];
                    break;
                case 'metaphor':
                    detail = "METAPHOR:\n\nDefinition: Direct comparison (saying something IS something else)\n\nExamples:\nâ€¢ Time is money\nâ€¢ He is a night owl\nâ€¢ Life is a rollercoaster\nâ€¢ The classroom was a zoo\n\nPurpose: Creates strong, direct imagery\n\nTip: Metaphors can be extended throughout a text";
                    examples = ["She has a heart of stone", "The world is a stage", "His words were daggers", "Love is a battlefield"];
                    break;
                case 'personification':
                    detail = "PERSONIFICATION:\n\nDefinition: Giving human traits to non-human things\n\nExamples:\nâ€¢ The wind whispered\nâ€¢ Opportunity knocked\nâ€¢ The sun smiled down\nâ€¢ Time marches on\n\nPurpose: Creates emotional connection and vivid description\n\nRelated: Anthropomorphism (giving human form), Pathetic fallacy (weather reflecting emotions)";
                    examples = ["The flowers danced in the breeze", "The camera loves you", "Fear gripped my heart", "The city never sleeps"];
                    break;
                case 'hyperbole':
                    detail = "HYPERBOLE:\n\nDefinition: Extreme exaggeration for effect\n\nExamples:\nâ€¢ I'm so hungry I could eat a horse\nâ€¢ I've told you a million times\nâ€¢ This bag weighs a ton\nâ€¢ I died of embarrassment\n\nPurpose: Emphasizes points, creates humor or drama\n\nTip: Not meant to be taken literally!";
                    examples = ["I'm freezing to death", "She's older than dirt", "I could sleep for a year", "My backpack weighs a thousand pounds"];
                    break;
                case 'alliteration':
                    detail = "ALLITERATION:\n\nDefinition: Repetition of initial consonant sounds\n\nExamples:\nâ€¢ Peter Piper picked peppers\nâ€¢ She sells seashells\nâ€¢ Big bad wolf\nâ€¢ Crazy kangaroos\n\nPurpose: Creates rhythm, emphasizes words, makes phrases memorable\n\nRelated: Assonance (vowel sounds), Consonance (consonant sounds anywhere)";
                    examples = ["Wicked witches wander", "Five frantic frogs fled", "Round the rugged rocks", "Lucy's lovely lemon loaf"];
                    break;
                default:
                    detail = "Select a device to see details";
            }
            
            alert(detail);
        }

        function randomDeviceExample() {
            const categories = Object.keys(deviceCategories);
            const randomCategory = categories[Math.floor(Math.random() * categories.length)];
            const devices = deviceCategories[randomCategory];
            const randomDevice = devices[Math.floor(Math.random() * devices.length)];
            
            alert(`Random Device Example:\n\n${randomDevice.name}\n"${randomDevice.example}"\n\nCategory: ${randomCategory.charAt(0).toUpperCase() + randomCategory.slice(1)}`);
        }

        function quizMeOnDevices() {
            const device = Object.values(deviceCategories).flat()[Math.floor(Math.random() * 20)];
            const answer = prompt(`What literary device is this?\n\n"${device.example}"\n\nType your answer:`);
            
            if (answer && answer.toLowerCase().includes(device.name.toLowerCase())) {
                alert(`Correct! That's ${device.name}.`);
            } else {
                alert(`That was ${device.name}. ${device.name}: ${device.example}`);
            }
        }

        function showAllDevices() {
            let allDevices = "ALL LITERARY DEVICES:\n\n";
            
            Object.entries(deviceCategories).forEach(([category, devices]) => {
                allDevices += `\n${category.toUpperCase()}:\n`;
                devices.forEach(device => {
                    allDevices += `â€¢ ${device.name}: "${device.example}"\n`;
                });
            });
            
            alert(allDevices);
        }

        // Analysis functions
        function setupAnalysisExample() {
            updateAnalysisDisplay();
        }

        function updateAnalysisDisplay() {
            const analysis = analysisExamples[appState.currentAnalysis];
            analysisText.textContent = `"${analysis.text}"`;
            analysisQuestion.textContent = "What literary devices can you identify in this sentence?";
        }

        function analyzeForPersonification() {
            const analysis = analysisExamples[appState.currentAnalysis];
            const personification = analysis.devices.filter(d => d.type === 'personification');
            
            if (personification.length > 0) {
                analysisFeedback.innerHTML = `<strong>Personification Found:</strong><br>`;
                personification.forEach(p => {
                    analysisFeedback.innerHTML += `â€¢ ${p.explanation}<br>`;
                });
                analysisFeedback.style.color = "var(--personification-green)";
            } else {
                analysisFeedback.innerHTML = `<strong>No Personification Found</strong><br>This example doesn't use personification. Try another analysis.`;
                analysisFeedback.style.color = "var(--text-secondary)";
            }
        }

        function analyzeForSimile() {
            const analysis = analysisExamples[appState.currentAnalysis];
            const similes = analysis.devices.filter(d => d.type === 'simile');
            
            if (similes.length > 0) {
                analysisFeedback.innerHTML = `<strong>Simile Found:</strong><br>`;
                similes.forEach(s => {
                    analysisFeedback.innerHTML += `â€¢ ${s.explanation}<br>`;
                });
                analysisFeedback.style.color = "var(--simile-purple)";
            } else {
                analysisFeedback.innerHTML = `<strong>No Simile Found</strong><br>This example doesn't use simile. Try another analysis.`;
                analysisFeedback.style.color = "var(--text-secondary)";
            }
        }

        function analyzeForMetaphor() {
            const analysis = analysisExamples[appState.currentAnalysis];
            const metaphors = analysis.devices.filter(d => d.type === 'metaphor');
            
            if (metaphors.length > 0) {
                analysisFeedback.innerHTML = `<strong>Metaphor Found:</strong><br>`;
                metaphors.forEach(m => {
                    analysisFeedback.innerHTML += `â€¢ ${m.explanation}<br>`;
                });
                analysisFeedback.style.color = "var(--metaphor-blue)";
            } else {
                analysisFeedback.innerHTML = `<strong>No Metaphor Found</strong><br>This example doesn't use metaphor. Try another analysis.`;
                analysisFeedback.style.color = "var(--text-secondary)";
            }
        }

        function newAnalysisExample() {
            appState.currentAnalysis = (appState.currentAnalysis + 1) % analysisExamples.length;
            updateAnalysisDisplay();
            analysisFeedback.textContent = "Click buttons to practice identifying literary devices";
            analysisFeedback.style.color = "var(--text-secondary)";
        }

        // Quiz functions
        function setupQuiz() {
            updateQuizDisplay();
        }

        function updateQuizDisplay() {
            const quiz = quizQuestions[appState.currentQuiz];
            quizQuestion.textContent = quiz.question;
            quizOptions.innerHTML = '';
            
            quiz.options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = option;
                optionElement.onclick = () => checkQuizAnswer(optionElement, option);
                quizOptions.appendChild(optionElement);
            });
        }

        function checkQuizAnswer(element, selected) {
            const quiz = quizQuestions[appState.currentQuiz];
            const options = quizOptions.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.textContent === quiz.answer) {
                    opt.style.border = '2px solid var(--personification-green)';
                    opt.style.background = 'rgba(76, 175, 80, 0.2)';
                }
            });
            
            if (selected === quiz.answer) {
                element.style.border = '2px solid var(--personification-green)';
                element.style.background = 'rgba(76, 175, 80, 0.2)';
                appState.quizScore++;
                creatorFeedback.innerHTML = `<strong>Correct!</strong> ${quiz.explanation}`;
                creatorFeedback.style.color = "var(--personification-green)";
            } else {
                element.style.border = '2px solid var(--irony-red)';
                element.style.background = 'rgba(244, 67, 54, 0.2)';
                creatorFeedback.innerHTML = `<strong>Incorrect.</strong> The answer is ${quiz.answer}. ${quiz.explanation}`;
                creatorFeedback.style.color = "var(--irony-red)";
            }
        }

        function newQuizQuestion() {
            appState.currentQuiz = (appState.currentQuiz + 1) % quizQuestions.length;
            updateQuizDisplay();
            creatorFeedback.textContent = "Select your answer";
            creatorFeedback.style.color = "var(--text-secondary)";
        }

        function resetQuiz() {
            appState.quizScore = 0;
            appState.currentQuiz = 0;
            updateQuizDisplay();
            creatorFeedback.textContent = "Quiz reset. Your score: 0";
            creatorFeedback.style.color = "var(--text-secondary)";
        }

        // Device creator functions
        function createSimile() {
            const templates = [
                "Her smile was like ___",
                "He ran as fast as ___",
                "The water was as clear as ___",
                "It was cold like ___",
                "She sang like ___"
            ];
            const objects = [
                "sunshine", "a summer day", "a bird", "an angel", "honey",
                "lightning", "the wind", "a rocket", "a cheetah", "a bullet",
                "crystal", "glass", "air", "a mountain stream", "diamonds",
                "ice", "winter", "the Arctic", "a freezer", "snow",
                "a nightingale", "music", "a symphony", "rain", "thunder"
            ];
            
            const template = templates[Math.floor(Math.random() * templates.length)];
            const object = objects[Math.floor(Math.random() * objects.length)];
            const simile = template.replace('___', object);
            
            deviceInput.value += `\n${simile}`;
            creatorFeedback.innerHTML = `<strong>Simile Created:</strong> ${simile}<br>Similes use "like" or "as" to compare different things.`;
            creatorFeedback.style.color = "var(--simile-purple)";
        }

        function createMetaphor() {
            const templates = [
                "___ is ___",
                "Her ___ was ___",
                "The ___ became ___",
                "He is ___",
                "Life is ___"
            ];
            const subjects = [
                "Time", "Love", "Hope", "Fear", "Anger",
                "heart", "mind", "soul", "voice", "touch",
                "storm", "sunset", "ocean", "mountain", "forest",
                "a rock", "a fortress", "an open book", "a closed door", "a mystery",
                "a journey", "a rollercoaster", "a puzzle", "a story", "a song"
            ];
            const metaphors = [
                "a thief", "a river", "a fire", "a shadow", "light",
                "a cage", "a key", "a weapon", "medicine", "poison",
                "a beast", "a blanket", "a mirror", "a prison", "freedom",
                "an anchor", "a sail", "a compass", "a map", "a destination",
                "a dance", "a battle", "a garden", "a desert", "an ocean"
            ];
            
            const template = templates[Math.floor(Math.random() * templates.length)];
            const subject = subjects[Math.floor(Math.random() * subjects.length)];
            const metaphor = metaphors[Math.floor(Math.random() * metaphors.length)];
            const result = template.replace('___', subject).replace('___', metaphor);
            
            deviceInput.value += `\n${result}`;
            creatorFeedback.innerHTML = `<strong>Metaphor Created:</strong> ${result}<br>Metaphors directly state one thing IS another (no "like" or "as").`;
            creatorFeedback.style.color = "var(--metaphor-blue)";
        }

        function createPersonification() {
            const objects = [
                "The wind", "The moon", "Time", "Opportunity", "Fear",
                "The old house", "The city", "The ocean", "The trees", "The flowers",
                "The book", "The camera", "The computer", "The car", "The clock"
            ];
            const actions = [
                "whispered secrets", "smiled down", "marched on", "knocked", "gripped my heart",
                "sighed in relief", "danced happily", "sang a lullaby", "watched over", "protected",
                "spoke volumes", "told a story", "remembered everything", "refused to start", "ticked impatiently"
            ];
            
            const object = objects[Math.floor(Math.random() * objects.length)];
            const action = actions[Math.floor(Math.random() * actions.length)];
            const personification = `${object} ${action}`;
            
            deviceInput.value += `\n${personification}`;
            creatorFeedback.innerHTML = `<strong>Personification Created:</strong> ${personification}<br>Personification gives human qualities to non-human things.`;
            creatorFeedback.style.color = "var(--personification-green)";
        }

        function createHyperbole() {
            const templates = [
                "I'm so ___ I could ___",
                "This weighs ___",
                "I've told you ___ times",
                "It took ___ to finish",
                "I nearly ___ when I heard"
            ];
            const adjectives = ["hungry", "tired", "cold", "hot", "bored", "excited", "scared"];
            const exaggerations = [
                "eat a horse", "sleep for a week", "freeze to death", "melt into a puddle",
                "die of boredom", "jump out of my skin", "faint on the spot"
            ];
            const measures = ["a ton", "a million pounds", "as much as an elephant", "more than a mountain"];
            const numbers = ["a million", "a billion", "a thousand", "ten thousand", "countless"];
            const times = ["ages", "forever", "an eternity", "centuries", "a lifetime"];
            const reactions = ["died", "fainted", "exploded", "melted", "turned to stone"];
            
            const template = templates[Math.floor(Math.random() * templates.length)];
            let result = "";
            
            if (template.includes("so ___ I could")) {
                const adj = adjectives[Math.floor(Math.random() * adjectives.length)];
                const exag = exaggerations[Math.floor(Math.random() * exaggerations.length)];
                result = template.replace('so ___ I could', `so ${adj} I could ${exag}`);
            } else if (template.includes("weighs ___")) {
                const measure = measures[Math.floor(Math.random() * measures.length)];
                result = template.replace('weighs ___', `weighs ${measure}`);
            } else if (template.includes("told you ___ times")) {
                const number = numbers[Math.floor(Math.random() * numbers.length)];
                result = template.replace('told you ___ times', `told you ${number} times`);
            } else if (template.includes("took ___ to finish")) {
                const time = times[Math.floor(Math.random() * times.length)];
                result = template.replace('took ___ to finish', `took ${time} to finish`);
            } else {
                const reaction = reactions[Math.floor(Math.random() * reactions.length)];
                result = template.replace('nearly ___ when I heard', `nearly ${reaction} when I heard`);
            }
            
            deviceInput.value += `\n${result}`;
            creatorFeedback.innerHTML = `<strong>Hyperbole Created:</strong> ${result}<br>Hyperbole uses extreme exaggeration for emphasis (not meant literally).`;
            creatorFeedback.style.color = "var(--hyperbole-orange)";
        }

        function clearCreator() {
            deviceInput.value = '';
            creatorFeedback.textContent = "Editor cleared. Start creating your literary devices.";
            creatorFeedback.style.color = "var(--text-secondary)";
        }

        function analyzeMyWriting() {
            const text = deviceInput.value.toLowerCase();
            let devicesFound = [];
            
            // Check for similes
            if (text.includes(' like ') || text.includes(' as ') || text.match(/as .* as/)) {
                devicesFound.push("Simile (uses 'like' or 'as' for comparison)");
            }
            
            // Check for metaphors (simplified - looks for "is" statements)
            const sentences = text.split(/[.!?]+/);
            sentences.forEach(sentence => {
                if (sentence.includes(' is ') && sentence.split(' ').length < 10) {
                    devicesFound.push("Metaphor (direct comparison using 'is')");
                }
            });
            
            // Check for personification
            const personificationWords = ['whispered', 'sang', 'danced', 'smiled', 'cried', 'laughed', 'watched', 'slept'];
            if (personificationWords.some(word => text.includes(word))) {
                devicesFound.push("Personification (human actions given to non-human things)");
            }
            
            // Check for hyperbole
            const hyperboleWords = ['million', 'billion', 'forever', 'never', 'always', 'every', 'all', 'completely', 'totally', 'absolutely'];
            if (hyperboleWords.some(word => text.includes(word))) {
                devicesFound.push("Hyperbole (exaggeration for effect)");
            }
            
            // Check for alliteration
            const words = text.split(/\s+/);
            for (let i = 0; i < words.length - 1; i++) {
                if (words[i][0] === words[i+1][0] && /[a-z]/i.test(words[i][0])) {
                    devicesFound.push("Alliteration (repeated initial sounds)");
                    break;
                }
            }
            
            if (devicesFound.length === 0) {
                creatorFeedback.innerHTML = "<strong>Analysis:</strong> No obvious literary devices found. Try adding similes, metaphors, or personification.";
                creatorFeedback.style.color = "var(--text-secondary)";
            } else {
                const uniqueDevices = [...new Set(devicesFound)];
                creatorFeedback.innerHTML = `<strong>Devices Found:</strong><br>${uniqueDevices.join('<br>')}`;
                creatorFeedback.style.color = "var(--personification-green)";
            }
        }

        function checkForDevices() {
            const text = deviceInput.value;
            let analysis = "DEVICE ANALYSIS:\n\n";
            
            // Simple pattern matching
            if (text.match(/like|as .* as|as if|similar to/i)) {
                analysis += "âœ“ Simile detected (uses 'like' or 'as')\n";
            }
            
            if (text.match(/\b(is|are|was|were)\b .*\b(and|but|or)\b/i)) {
                analysis += "âœ“ Possible metaphor (direct comparison)\n";
            }
            
            if (text.match(/\b(whispered|sang|danced|smiled|cried|laughed|watched)\b/i)) {
                analysis += "âœ“ Personification detected (human actions)\n";
            }
            
            if (text.match(/\b(million|billion|forever|never|always|completely)\b/i)) {
                analysis += "âœ“ Hyperbole detected (exaggeration)\n";
            }
            
            if (text.match(/(\b\w\b).*\1/i)) {
                analysis += "âœ“ Possible alliteration or sound device\n";
            }
            
            if (analysis === "DEVICE ANALYSIS:\n\n") {
                analysis += "No obvious literary devices detected.\nTry adding:\nâ€¢ Similes (using 'like' or 'as')\nâ€¢ Metaphors (direct comparisons)\nâ€¢ Personification (human traits)\nâ€¢ Hyperbole (exaggeration)";
            }
            
            alert(analysis);
        }

        function suggestImprovements() {
            const text = deviceInput.value;
            let suggestions = [];
            
            if (text.length < 50) {
                suggestions.push("Add more descriptive details");
            }
            
            if (!text.match(/like|as|is|are|was|were/)) {
                suggestions.push("Try adding a simile or metaphor");
            }
            
            if (!text.match(/[.!?]$/)) {
                suggestions.push("Consider adding punctuation for rhythm");
            }
            
            const words = text.split(/\s+/).length;
            if (words > 100) {
                suggestions.push("Consider breaking into shorter sentences");
            }
            
            if (suggestions.length === 0) {
                creatorFeedback.innerHTML = "<strong>Good writing!</strong> Consider: 1) Varying sentence length 2) Adding sensory details 3) Using more specific nouns";
                creatorFeedback.style.color = "var(--personification-green)";
            } else {
                creatorFeedback.innerHTML = `<strong>Suggestions:</strong><br>${suggestions.join('<br>')}`;
                creatorFeedback.style.color = "var(--hyperbole-orange)";
            }
        }

        function generateRandomSentence() {
            const templates = [
                "The {adjective} {noun} {verb} like {comparison}",
                "{Time} was {metaphor}, {description}",
                "I felt so {emotion} I could {hyperbole}",
                "The {nature} {personification}, while {background}"
            ];
            
            const adjectives = ["ancient", "lonely", "whispering", "forgotten", "silent", "watching", "broken"];
            const nouns = ["house", "tree", "road", "moon", "wind", "shadow", "memory"];
            const verbs = ["stood", "waited", "whispered", "sang", "danced", "watched", "remembered"];
            const comparisons = ["a ghost", "a secret", "a dream", "a promise", "a memory", "a shadow", "an echo"];
            const times = ["Night", "Dawn", "Twilight", "Midnight", "Evening", "Morning"];
            const metaphors = ["a blanket", "a song", "a painting", "a story", "a memory", "a dream"];
            const descriptions = ["wrapping everything in silence", "filling the empty spaces", "painting the sky with colors", "whispering through the trees"];
            const emotions = ["happy", "sad", "angry", "tired", "excited", "scared", "bored"];
            const hyperboles = ["dance forever", "sleep for years", "shout from rooftops", "climb mountains", "swim oceans"];
            const nature = ["wind", "rain", "sun", "moon", "stars", "ocean", "forest"];
            const personifications = ["whispered secrets", "sang lullabies", "danced lightly", "smiled down", "watched over"];
            const backgrounds = ["the world held its breath", "time seemed to stop", "everything stood still", "silence wrapped around"];
            
            const template = templates[Math.floor(Math.random() * templates.length)];
            let sentence = template;
            
            sentence = sentence.replace('{adjective}', adjectives[Math.floor(Math.random() * adjectives.length)]);
            sentence = sentence.replace('{noun}', nouns[Math.floor(Math.random() * nouns.length)]);
            sentence = sentence.replace('{verb}', verbs[Math.floor(Math.random() * verbs.length)]);
            sentence = sentence.replace('{comparison}', comparisons[Math.floor(Math.random() * comparisons.length)]);
            sentence = sentence.replace('{Time}', times[Math.floor(Math.random() * times.length)]);
            sentence = sentence.replace('{metaphor}', metaphors[Math.floor(Math.random() * metaphors.length)]);
            sentence = sentence.replace('{description}', descriptions[Math.floor(Math.random() * descriptions.length)]);
            sentence = sentence.replace('{emotion}', emotions[Math.floor(Math.random() * emotions.length)]);
            sentence = sentence.replace('{hyperbole}', hyperboles[Math.floor(Math.random() * hyperboles.length)]);
            sentence = sentence.replace('{nature}', nature[Math.floor(Math.random() * nature.length)]);
            sentence = sentence.replace('{personification}', personifications[Math.floor(Math.random() * personifications.length)]);
            sentence = sentence.replace('{background}', backgrounds[Math.floor(Math.random() * backgrounds.length)]);
            
            deviceInput.value = sentence;
            creatorFeedback.innerHTML = `<strong>Writing Prompt:</strong> ${sentence}<br>Continue this sentence or use it as inspiration.`;
            creatorFeedback.style.color = "var(--metaphor-blue)";
        }

        // Sound builder functions
        function setupSoundBuilder() {
            soundParts.forEach(part => {
                const element = document.getElementById(part.id);
                if (element) {
                    element.draggable = true;
                    element.ondragstart = dragSound;
                }
            });
        }

        function dragSound(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.target.style.opacity = "0.5";
        }

        function allowDropSound(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('active');
        }

        function dropSound(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.remove('active');
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.getElementById(data);
            
            if (draggedElement) {
                draggedElement.style.opacity = "1";
                const clone = draggedElement.cloneNode(true);
                clone.style.opacity = "1";
                clone.style.margin = "5px";
                clone.style.padding = "8px";
                clone.style.border = "1px solid var(--alliteration-teal)";
                clone.style.backgroundColor = "rgba(0, 150, 136, 0.1)";
                clone.draggable = false;
                clone.id = "sound-clone-" + clone.id;
                
                ev.currentTarget.appendChild(clone);
                
                if (!appState.soundOrder.includes(data)) {
                    appState.soundOrder.push(data);
                }
            }
        }

        function checkSoundDevices() {
            const zone = document.getElementById('soundZone');
            const items = zone.querySelectorAll('.sound-part');
            
            if (items.length === 0) {
                creatorFeedback.textContent = "Please add sound devices to the zone first.";
                creatorFeedback.style.color = "var(--text-secondary)";
                return;
            }
            
            let deviceCount = {};
            items.forEach(item => {
                const text = item.textContent;
                if (text.includes('Alliteration')) deviceCount.alliteration = (deviceCount.alliteration || 0) + 1;
                if (text.includes('Assonance')) deviceCount.assonance = (deviceCount.assonance || 0) + 1;
                if (text.includes('Consonance')) deviceCount.consonance = (deviceCount.consonance || 0) + 1;
                if (text.includes('Onomatopoeia')) deviceCount.onomatopoeia = (deviceCount.onomatopoeia || 0) + 1;
                if (text.includes('Rhyme')) deviceCount.rhyme = (deviceCount.rhyme || 0) + 1;
            });
            
            let feedback = "<strong>Sound Devices Used:</strong><br>";
            Object.entries(deviceCount).forEach(([device, count]) => {
                feedback += `â€¢ ${device.charAt(0).toUpperCase() + device.slice(1)}: ${count} time(s)<br>`;
            });
            
            creatorFeedback.innerHTML = feedback;
            creatorFeedback.style.color = "var(--alliteration-teal)";
        }

        function resetSoundBuilder() {
            const zone = document.getElementById('soundZone');
            zone.innerHTML = "Build creative sentence here...";
            appState.soundOrder = [];
            creatorFeedback.textContent = "Sound builder reset. Drag sound devices to build again.";
            creatorFeedback.style.color = "var(--text-secondary)";
        }

        function showSoundExample() {
            const example = `EXAMPLE WITH MULTIPLE SOUND DEVICES:

"Sally's seashells shimmered slightly,
While watery waves washed wistfully.
The ocean's roar, a rhythmic rhyme,
Crashing, splashing, keeping time."

Devices Used:
â€¢ Alliteration: "Sally's seashells shimmered slightly"
â€¢ Alliteration: "watery waves washed wistfully"
â€¢ Assonance: "ocean's roar" (long 'o' sounds)
â€¢ Consonance: "rhythmic rhyme" ('thm' and 'm' sounds)
â€¢ Onomatopoeia: "Crashing, splashing"
â€¢ Rhyme: "rhyme/time"`;
            
            alert(example);
        }

        // Poetry functions
        function setupPoemExample() {
            showPoem('nature');
        }

        function showPoem(type) {
            appState.currentPoem = type;
            const poem = poemExamples[type];
            poemDisplay.textContent = poem;
            
            // Update active button
            document.querySelectorAll('.poem-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Prose functions
        function setupProseExample() {
            updateProseDisplay();
        }

        function updateProseDisplay() {
            const prose = proseExamples[appState.currentProse];
            const proseContainer = document.querySelector('.prose-text');
            if (proseContainer) {
                proseContainer.innerHTML = `
                    "${prose.text}"
                    <div style="margin-top: 10px; font-size: 0.8rem; color: var(--text-secondary);">
                        ${prose.devices.map(d => `<span class="${d.type}-highlight">${d.type.charAt(0).toUpperCase() + d.type.slice(1)}</span>: ${d.text}`).join('<br>')}
                    </div>
                `;
            }
        }

        function newProseExample() {
            appState.currentProse = (appState.currentProse + 1) % proseExamples.length;
            updateProseDisplay();
        }

        function highlightDevices() {
            const prose = proseExamples[appState.currentProse];
            let highlightedText = prose.text;
            
            prose.devices.forEach(device => {
                if (device.text) {
                    const escapedText = device.text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    const regex = new RegExp(`(${escapedText})`, 'gi');
                    highlightedText = highlightedText.replace(regex, `<span class="${device.type}-highlight">$1</span>`);
                }
            });
            
            const proseContainer = document.querySelector('.prose-text');
            if (proseContainer) {
                proseContainer.innerHTML = `
                    "${highlightedText}"
                    <div style="margin-top: 10px; font-size: 0.8rem; color: var(--text-secondary);">
                        <strong>Devices Highlighted:</strong><br>
                        ${prose.devices.map(d => `<span class="${d.type}-highlight">â— ${d.type}</span>`).join(' ')}
                    </div>
                `;
            }
        }

        function explainProseDevices() {
            const prose = proseExamples[appState.currentProse];
            let explanation = "DEVICE ANALYSIS:\n\n";
            
            prose.devices.forEach(device => {
                explanation += `â€¢ ${device.type.toUpperCase()}: ${device.text}\n`;
                if (device.type === 'simile') {
                    explanation += "  (Comparison using 'like' or 'as')\n";
                } else if (device.type === 'metaphor') {
                    explanation += "  (Direct comparison saying something IS something else)\n";
                } else if (device.type === 'personification') {
                    explanation += "  (Giving human qualities to non-human things)\n";
                } else if (device.type === 'alliteration') {
                    explanation += "  (Repetition of initial consonant sounds)\n";
                }
                explanation += "\n";
            });
            
            alert(explanation);
        }

        // Component detail
        window.showComponentDetail = function(type) {
            let info = "";
            
            if (type === 'comparison') {
                info = "ðŸ”„ COMPARISON DEVICES ðŸ”„\n\n";
                info += "1. SIMILE:\n";
                info += "   â€¢ Uses 'like' or 'as'\n";
                info += "   â€¢ Example: 'Brave as a lion'\n";
                info += "   â€¢ Creates vivid imagery\n\n";
                info += "2. METAPHOR:\n";
                info += "   â€¢ Direct comparison (no 'like'/'as')\n";
                info += "   â€¢ Example: 'Time is money'\n";
                info += "   â€¢ Can be extended throughout text\n\n";
                info += "3. ANALOGY:\n";
                info += "   â€¢ Extended comparison showing similarities\n";
                info += "   â€¢ Often explains complex ideas\n\n";
                info += "4. SYMBOLISM:\n";
                info += "   â€¢ Objects represent abstract ideas\n";
                info += "   â€¢ Example: Dove = peace, Rose = love";
            } else if (type === 'description') {
                info = "ðŸŽ¨ DESCRIPTIVE DEVICES ðŸŽ¨\n\n";
                info += "1. PERSONIFICATION:\n";
                info += "   â€¢ Gives human traits to non-human things\n";
                info += "   â€¢ Example: 'The wind whispered'\n";
                info += "   â€¢ Creates emotional connection\n\n";
                info += "2. HYPERBOLE:\n";
                info += "   â€¢ Extreme exaggeration for effect\n";
                info += "   â€¢ Example: 'I've told you a million times'\n";
                info += "   â€¢ Not meant to be taken literally\n\n";
                info += "3. IMAGERY:\n";
                info += "   â€¢ Language that appeals to senses\n";
                info += "   â€¢ Creates vivid mental pictures\n";
                info += "   â€¢ Uses sensory details (sight, sound, etc.)\n\n";
                info += "4. OXYMORON:\n";
                info += "   â€¢ Combines contradictory terms\n";
                info += "   â€¢ Example: 'Deafening silence'";
            } else if (type === 'sound') {
                info = "ðŸŽµ SOUND DEVICES ðŸŽµ\n\n";
                info += "1. ALLITERATION:\n";
                info += "   â€¢ Repetition of initial consonant sounds\n";
                info += "   â€¢ Example: 'Peter Piper picked...'\n";
                info += "   â€¢ Creates rhythm and emphasis\n\n";
                info += "2. ASSONANCE:\n";
                info += "   â€¢ Repetition of vowel sounds\n";
                info += "   â€¢ Example: 'The rain in Spain...'\n";
                info += "   â€¢ Creates internal rhyme\n\n";
                info += "3. CONSONANCE:\n";
                info += "   â€¢ Repetition of consonant sounds\n";
                info += "   â€¢ Can be anywhere in words\n";
                info += "   â€¢ Example: '...stroke of luck'\n\n";
                info += "4. ONOMATOPOEIA:\n";
                info += "   â€¢ Words that imitate sounds\n";
                info += "   â€¢ Example: 'Buzz, crash, whisper'\n";
                info += "   â€¢ Creates sensory experience";
            } else {
                info = "âš¡ IMPACT DEVICES âš¡\n\n";
                info += "1. IRONY:\n";
                info += "   â€¢ Opposite of literal meaning/expectation\n";
                info += "   â€¢ Types: Verbal, Situational, Dramatic\n";
                info += "   â€¢ Creates surprise or humor\n\n";
                info += "2. OXYMORON:\n";
                info += "   â€¢ Contradictory terms combined\n";
                info += "   â€¢ Example: 'Bittersweet', 'Living death'\n";
                info += "   â€¢ Creates complexity\n\n";
                info += "3. PARADOX:\n";
                info += "   â€¢ Seemingly contradictory truth\n";
                info += "   â€¢ Example: 'Less is more'\n";
                info += "   â€¢ Makes readers think deeply\n\n";
                info += "4. PUN:\n";
                info += "   â€¢ Play on words with multiple meanings\n";
                info += "   â€¢ Creates humor\n";
                info += "   â€¢ Example: 'I'm reading a book on anti-gravity - it's impossible to put down!'";
            }
            
            alert(info);
        };

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other English topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Create literary tip display
        function createLiteraryTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'literary-tip';
            tipDiv.innerHTML = `<strong>Literary Tip:</strong> ${literaryTips[Math.floor(Math.random() * literaryTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / allQuestions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You've mastered literary devices!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Excellent work! You understand figures of speech very well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! You're developing strong literary analysis skills!";
            } else {
                scoreMessage.textContent = "Keep practicing! Literary devices make writing come alive!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = allQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${allQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / allQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            literaryTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            literaryTip.appendChild(createLiteraryTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = allQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin literary devices practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
