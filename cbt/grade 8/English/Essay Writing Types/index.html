<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 English - Essay Writing Types | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Essay Writing Theme */
        :root {
            --narrative-purple: #9C27B0;
            --descriptive-blue: #2196F3;
            --argumentative-red: #F44336;
            --accent-orange: #FF9800;
            --success-teal: #009688;
            --warning-amber: #FFC107;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --narrative-glow: 0 0 20px rgba(156, 39, 176, 0.4);
            --descriptive-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --argumentative-glow: 0 0 20px rgba(244, 67, 54, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(156, 39, 176, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 80%, rgba(244, 67, 54, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--narrative-purple), var(--descriptive-blue), var(--argumentative-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--narrative-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--narrative-purple);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--narrative-purple);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
        }

        /* Essay Type Grid */
        .essay-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .essay-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .essay-grid {
                grid-template-columns: 1fr;
            }
        }

        .essay-card {
            background: var(--dark-surface);
            border-radius: 16px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .essay-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
        }

        .essay-card.narrative {
            border-color: var(--narrative-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .essay-card.descriptive {
            border-color: var(--descriptive-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .essay-card.argumentative {
            border-color: var(--argumentative-red);
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.1), transparent);
        }

        .essay-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .essay-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .essay-card.narrative .essay-title {
            color: var(--narrative-purple);
        }

        .essay-card.descriptive .essay-title {
            color: var(--descriptive-blue);
        }

        .essay-card.argumentative .essay-title {
            color: var(--argumentative-red);
        }

        .essay-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
            flex-grow: 1;
        }

        .essay-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .essay-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 6px;
            padding-left: 20px;
            position: relative;
        }

        .feature-list li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
        }

        .essay-card.narrative .feature-list li:before {
            color: var(--narrative-purple);
        }

        .essay-card.descriptive .feature-list li:before {
            color: var(--descriptive-blue);
        }

        .essay-card.argumentative .feature-list li:before {
            color: var(--argumentative-red);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--narrative-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-primary:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-secondary {
            background: var(--descriptive-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-secondary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-danger {
            background: var(--argumentative-red);
            color: white;
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
        }

        .btn-danger:hover {
            background: #D32F2F;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(244, 67, 54, 0.4);
        }

        .btn-success {
            background: var(--success-teal);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 150, 136, 0.3);
        }

        .btn-success:hover {
            background: #00796B;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 150, 136, 0.4);
        }

        .btn-warning {
            background: var(--warning-amber);
            color: #212121;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        }

        .btn-warning:hover {
            background: #FFA000;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 193, 7, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--narrative-purple);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--narrative-purple), var(--descriptive-blue), var(--argumentative-red));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .writing-tip {
            background: rgba(255, 193, 7, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--warning-amber);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--narrative-purple);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-teal);
            color: var(--success-teal);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--argumentative-red);
            color: var(--argumentative-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--accent-orange);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--success-teal);
        }

        .option.incorrect .option-letter {
            background: var(--argumentative-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--success-teal);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--argumentative-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--success-teal);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--argumentative-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--success-teal);
        }

        .feedback-incorrect .feedback-title {
            color: var(--argumentative-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 800px;
        }

        /* Essay Visualizers */
        .essay-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid;
        }

        .narrative-visualizer {
            border-color: var(--narrative-purple);
        }

        .descriptive-visualizer {
            border-color: var(--descriptive-blue);
        }

        .argumentative-visualizer {
            border-color: var(--argumentative-red);
        }

        .visualizer-title {
            color: inherit;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .essay-example {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .narrative-example {
            border-left: 3px solid var(--narrative-purple);
        }

        .descriptive-example {
            border-left: 3px solid var(--descriptive-blue);
        }

        .argumentative-example {
            border-left: 3px solid var(--argumentative-red);
        }

        /* Structure Comparison */
        .structure-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-orange);
        }

        .structure-tables {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .structure-tables {
                grid-template-columns: 1fr;
            }
        }

        .structure-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .structure-table th {
            background: var(--dark-card);
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 2px solid;
        }

        .narrative-table th {
            color: var(--narrative-purple);
            border-color: var(--narrative-purple);
        }

        .descriptive-table th {
            color: var(--descriptive-blue);
            border-color: var(--descriptive-blue);
        }

        .argumentative-table th {
            color: var(--argumentative-red);
            border-color: var(--argumentative-red);
        }

        .structure-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .structure-table td:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Thesis Statement Examples */
        .thesis-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--success-teal);
        }

        .thesis-pair {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .thesis-pair {
                grid-template-columns: 1fr;
            }
        }

        .thesis-card {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .narrative-thesis {
            border: 2px solid var(--narrative-purple);
        }

        .descriptive-thesis {
            border: 2px solid var(--descriptive-blue);
        }

        .argumentative-thesis {
            border: 2px solid var(--argumentative-red);
        }

        .thesis-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .thesis-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .thesis-text {
            font-size: 1rem;
            font-weight: bold;
            line-height: 1.4;
        }

        .narrative-thesis .thesis-text {
            color: var(--narrative-purple);
        }

        .descriptive-thesis .thesis-text {
            color: var(--descriptive-blue);
        }

        .argumentative-thesis .thesis-text {
            color: var(--argumentative-red);
        }

        /* Essay Transformation */
        .transformation-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--success-teal);
        }

        .sentence-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1rem;
            line-height: 1.6;
            border: 2px dashed var(--dark-border);
        }

        /* Interactive Editor */
        .editor-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-orange);
        }

        .text-editor {
            width: 100%;
            height: 150px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            padding: 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            line-height: 1.5;
            resize: vertical;
            margin: 10px 0;
        }

        .text-editor:focus {
            outline: none;
            border-color: var(--accent-orange);
        }

        .editor-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 10px 0;
        }

        /* Essay Organization */
        .organization-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--warning-amber);
        }

        .organization-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .organization-diagram {
                grid-template-columns: 1fr;
            }
        }

        .organization-step {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
            border: 1px solid var(--dark-border);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .organization-step:hover {
            transform: scale(1.05);
        }

        .step-number {
            width: 25px;
            height: 25px;
            background: var(--accent-orange);
            color: white;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .step-title {
            font-size: 0.8rem;
            color: var(--text-primary);
            margin-bottom: 5px;
            font-weight: bold;
        }

        .step-description {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Essay Classification */
        .classification-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--success-teal);
        }

        .classification-items {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .classification-items {
                grid-template-columns: 1fr;
            }
        }

        .classification-item {
            padding: 10px;
            background: var(--dark-surface);
            border: 2px dashed var(--dark-border);
            border-radius: 6px;
            text-align: center;
            cursor: grab;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .classification-item:hover {
            border-color: var(--accent-orange);
        }

        .classification-zones {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .classification-zones {
                grid-template-columns: 1fr;
            }
        }

        .classification-zone {
            padding: 15px;
            border: 2px dashed var(--dark-border);
            border-radius: 8px;
            min-height: 100px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .classification-zone.active {
            border-color: var(--success-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--narrative-purple), var(--descriptive-blue), var(--argumentative-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--narrative-purple), var(--descriptive-blue), var(--argumentative-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-value.narrative {
            color: var(--narrative-purple);
        }

        .stat-value.descriptive {
            color: var(--descriptive-blue);
        }

        .stat-value.argumentative {
            color: var(--argumentative-red);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: rgba(156, 39, 176, 0.2); }
            100% { background-color: transparent; }
        }

        .highlight {
            animation: highlight 1s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 English: Essay Writing Types</h1>
            <p class="welcome-subtitle">Master the art of essay writing! Learn to craft compelling narratives, vivid descriptions, and persuasive arguments through structured writing practice.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸ“–ðŸŽ¨ðŸ’­</span>
                <span class="topic-name">Narrative, Descriptive, Argumentative Essays</span>
            </div>
            
            <div class="essay-grid">
                <div class="essay-card narrative" onclick="showEssayDetail('narrative')">
                    <div class="essay-icon">ðŸ“–</div>
                    <h3 class="essay-title">Narrative Essay</h3>
                    <p class="essay-description">Tells a story with characters, setting, plot, and conflict. Uses chronological order and descriptive language to engage readers.</p>
                    <div class="essay-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Characters and setting</li>
                            <li>Plot with conflict</li>
                            <li>Chronological order</li>
                            <li>Dialogue and action</li>
                            <li>First/third person POV</li>
                            <li>Theme or moral</li>
                        </ul>
                    </div>
                </div>
                
                <div class="essay-card descriptive" onclick="showEssayDetail('descriptive')">
                    <div class="essay-icon">ðŸŽ¨</div>
                    <h3 class="essay-title">Descriptive Essay</h3>
                    <p class="essay-description">Paints a vivid picture using sensory details. Focuses on describing people, places, objects, or experiences in detail.</p>
                    <div class="essay-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Sensory details</li>
                            <li>Vivid imagery</li>
                            <li>Figurative language</li>
                            <li>Spatial organization</li>
                            <li>Emotional appeal</li>
                            <li>Dominant impression</li>
                        </ul>
                    </div>
                </div>
                
                <div class="essay-card argumentative" onclick="showEssayDetail('argumentative')">
                    <div class="essay-icon">ðŸ’­</div>
                    <h3 class="essay-title">Argumentative Essay</h3>
                    <p class="essay-description">Presents a claim with evidence and reasoning. Persuades readers through logical arguments, counterarguments, and proof.</p>
                    <div class="essay-features">
                        <h4>Key Features:</h4>
                        <ul class="feature-list">
                            <li>Clear thesis statement</li>
                            <li>Logical arguments</li>
                            <li>Evidence and examples</li>
                            <li>Counterarguments</li>
                            <li>Formal tone</li>
                            <li>Persuasive conclusion</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>ðŸ“š Begin Essay Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="writingTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Essay Examples -->
                    <div class="essay-visualizer narrative-visualizer">
                        <div class="visualizer-title">Narrative Essay Example</div>
                        <div class="essay-example narrative-example">
                            "The morning of my first day at a new school dawned gray and rainy. I remember clutching my mother's hand tightly as we approached the large brick building, my new shoes squeaking on the wet pavement..."
                        </div>
                        <div class="essay-example narrative-example">
                            "As I stepped onto the stage, the blinding lights made the audience disappear. My heart pounded like a drum as I took a deep breath and began to speak..."
                        </div>
                    </div>
                    
                    <div class="essay-visualizer descriptive-visualizer">
                        <div class="visualizer-title">Descriptive Essay Example</div>
                        <div class="essay-example descriptive-example">
                            "The old oak tree stood like a silent guardian at the edge of the meadow. Its gnarled branches reached toward the sky like arthritic fingers, each one heavy with emerald leaves that rustled softly in the breeze..."
                        </div>
                        <div class="essay-example descriptive-example">
                            "Grandma's kitchen always smelled of cinnamon and freshly baked bread. Sunlight streamed through the checkered curtains, painting golden rectangles on the worn linoleum floor..."
                        </div>
                    </div>
                    
                    <div class="essay-visualizer argumentative-visualizer">
                        <div class="visualizer-title">Argumentative Essay Example</div>
                        <div class="essay-example argumentative-example">
                            "School uniforms should be mandatory because they promote equality, reduce distractions, and foster a sense of community. Research shows that schools with uniform policies have 30% fewer disciplinary issues..."
                        </div>
                        <div class="essay-example argumentative-example">
                            "While some argue that homework is essential for learning, excessive homework actually harms students' mental health, limits family time, and reduces the effectiveness of classroom learning..."
                        </div>
                    </div>
                    
                    <!-- Structure Comparison -->
                    <div class="structure-section">
                        <div class="visualizer-title">Essay Structure Comparison</div>
                        <div class="structure-tables">
                            <table class="structure-table narrative-table">
                                <thead>
                                    <tr>
                                        <th colspan="2">Narrative Structure</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showStructureDetail('narrative_intro')">
                                        <td>1. Introduction</td>
                                        <td>Sets scene, introduces characters</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('narrative_rising')">
                                        <td>2. Rising Action</td>
                                        <td>Builds conflict, develops plot</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('narrative_climax')">
                                        <td>3. Climax</td>
                                        <td>Turning point, main conflict</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('narrative_falling')">
                                        <td>4. Falling Action</td>
                                        <td>Resolves conflict</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('narrative_conclusion')">
                                        <td>5. Conclusion</td>
                                        <td>Reveals lesson or theme</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="structure-table descriptive-table">
                                <thead>
                                    <tr>
                                        <th colspan="2">Descriptive Structure</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showStructureDetail('descriptive_intro')">
                                        <td>1. Introduction</td>
                                        <td>Introduces subject</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('descriptive_body1')">
                                        <td>2. Body Paragraph 1</td>
                                        <td>Sensory details: Sight</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('descriptive_body2')">
                                        <td>3. Body Paragraph 2</td>
                                        <td>Sensory details: Sound/Touch</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('descriptive_body3')">
                                        <td>4. Body Paragraph 3</td>
                                        <td>Sensory details: Smell/Taste</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('descriptive_conclusion')">
                                        <td>5. Conclusion</td>
                                        <td>Overall impression</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="structure-table argumentative-table">
                                <thead>
                                    <tr>
                                        <th colspan="2">Argumentative Structure</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showStructureDetail('argumentative_intro')">
                                        <td>1. Introduction</td>
                                        <td>Thesis statement</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('argumentative_body1')">
                                        <td>2. Body Paragraph 1</td>
                                        <td>Main argument + evidence</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('argumentative_body2')">
                                        <td>3. Body Paragraph 2</td>
                                        <td>Second argument + evidence</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('argumentative_counter')">
                                        <td>4. Counterargument</td>
                                        <td>Address opposing views</td>
                                    </tr>
                                    <tr onclick="showStructureDetail('argumentative_conclusion')">
                                        <td>5. Conclusion</td>
                                        <td>Restate thesis, call to action</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Thesis Statement Examples -->
                    <div class="thesis-section">
                        <div class="visualizer-title">Thesis Statement Examples</div>
                        <div id="thesisInstruction" style="margin-bottom: 15px; color: var(--text-secondary); text-align: center; font-size: 0.9rem;">
                            Click on thesis statements for analysis
                        </div>
                        
                        <div class="thesis-pair">
                            <div class="thesis-card narrative-thesis" onclick="showThesisDetail('narrative')">
                                <div class="thesis-label">Narrative Essay</div>
                                <div class="thesis-text">"My first day at summer camp taught me that true friendship can be found in the most unexpected places."</div>
                            </div>
                            <div class="thesis-card descriptive-thesis" onclick="showThesisDetail('descriptive')">
                                <div class="thesis-label">Descriptive Essay</div>
                                <div class="thesis-text">"My grandmother's kitchen was a warm sanctuary filled with comforting aromas, cherished memories, and unconditional love."</div>
                            </div>
                            <div class="thesis-card argumentative-thesis" onclick="showThesisDetail('argumentative')">
                                <div class="thesis-label">Argumentative Essay</div>
                                <div class="thesis-text">"School should start later in the morning because it would improve student health, academic performance, and overall well-being."</div>
                            </div>
                        </div>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-secondary" onclick="newThesisExample()">New Examples</button>
                            <button class="btn btn-small btn-secondary" onclick="showAllThesisTypes()">Show All Types</button>
                        </div>
                    </div>
                    
                    <!-- Essay Organization -->
                    <div class="organization-section">
                        <div class="visualizer-title">Essay Organization Guide</div>
                        <div id="organizationInstruction" style="margin-bottom: 10px; color: var(--text-secondary); text-align: center;">
                            Click steps for detailed guidance
                        </div>
                        
                        <div class="organization-diagram">
                            <div class="organization-step" onclick="showStepDetail('prewriting')">
                                <div class="step-number">1</div>
                                <div class="step-title">Prewriting</div>
                                <div class="step-description">Brainstorm ideas, create outline</div>
                            </div>
                            <div class="organization-step" onclick="showStepDetail('drafting')">
                                <div class="step-number">2</div>
                                <div class="step-title">Drafting</div>
                                <div class="step-description">Write first version</div>
                            </div>
                            <div class="organization-step" onclick="showStepDetail('revising')">
                                <div class="step-number">3</div>
                                <div class="step-title">Revising</div>
                                <div class="step-description">Improve content, organization</div>
                            </div>
                            <div class="organization-step" onclick="showStepDetail('editing')">
                                <div class="step-number">4</div>
                                <div class="step-title">Editing</div>
                                <div class="step-description">Fix grammar, spelling</div>
                            </div>
                            <div class="organization-step" onclick="showStepDetail('publishing')">
                                <div class="step-number">5</div>
                                <div class="step-title">Publishing</div>
                                <div class="step-description">Share final version</div>
                            </div>
                            <div class="organization-step" onclick="showStepDetail('reflecting')">
                                <div class="step-number">6</div>
                                <div class="step-title">Reflecting</div>
                                <div class="step-description">Learn from the process</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Interactive Editor -->
                    <div class="editor-section">
                        <div class="visualizer-title">Practice Essay Writing</div>
                        <textarea class="text-editor" id="writingEditor" placeholder="Type your essay paragraph here..."></textarea>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-primary" onclick="checkNarrative()">Check Narrative</button>
                            <button class="btn btn-small btn-secondary" onclick="checkDescriptive()">Check Descriptive</button>
                            <button class="btn btn-small btn-danger" onclick="checkArgumentative()">Check Argumentative</button>
                            <button class="btn btn-small btn-success" onclick="suggestImprovements()">Improve</button>
                            <button class="btn btn-small btn-warning" onclick="clearEditor()">Clear</button>
                        </div>
                        
                        <div id="editorFeedback" style="margin-top: 10px; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                            Write a paragraph and check its essay type characteristics
                        </div>
                    </div>
                    
                    <!-- Essay Classification -->
                    <div class="classification-section">
                        <div class="visualizer-title">Essay Type Classification</div>
                        <div id="classificationInstruction" style="margin-bottom: 10px; color: var(--text-primary); text-align: center;">
                            Drag topics to correct essay type:
                        </div>
                        
                        <div class="classification-items" id="classificationItems">
                            <!-- Items will be populated by JavaScript -->
                        </div>
                        
                        <div class="classification-zones">
                            <div class="classification-zone" id="zoneNarrative" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div style="color: var(--narrative-purple); font-weight: bold;">Narrative Essay</div>
                            </div>
                            <div class="classification-zone" id="zoneDescriptive" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div style="color: var(--descriptive-blue); font-weight: bold;">Descriptive Essay</div>
                            </div>
                            <div class="classification-zone" id="zoneArgumentative" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div style="color: var(--argumentative-red); font-weight: bold;">Argumentative Essay</div>
                            </div>
                        </div>
                        
                        <div id="classificationFeedback" style="margin-top: 10px; color: var(--text-secondary); text-align: center; font-size: 0.9rem;"></div>
                        
                        <div class="editor-controls">
                            <button class="btn btn-small btn-secondary" onclick="newClassificationChallenge()">New Challenge</button>
                            <button class="btn btn-small btn-success" onclick="checkClassification()">Check Answers</button>
                            <button class="btn btn-small btn-warning" onclick="resetClassification()">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Essay Writing Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value narrative" id="narrativeScore">0</div>
                        <div class="stat-label">Narrative Questions Correct</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value descriptive" id="descriptiveScore">0</div>
                        <div class="stat-label">Descriptive Questions Correct</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value argumentative" id="argumentativeScore">0</div>
                        <div class="stat-label">Argumentative Questions Correct</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive questions array - 80+ questions
        const questions = [
            // Basic Identification (1-20)
            {
                question: "Which type of essay tells a story with characters and plot?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Expository Essay"],
                answer: "A",
                explanation: "Narrative essays tell stories with characters, setting, plot, and conflict.",
                type: "narrative"
            },
            {
                question: "What type of essay uses sensory details to paint a picture?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Persuasive Essay"],
                answer: "A",
                explanation: "Descriptive essays focus on sensory details (sight, sound, smell, touch, taste) to create vivid imagery.",
                type: "descriptive"
            },
            {
                question: "Which essay presents a claim supported by evidence?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Reflective Essay"],
                answer: "A",
                explanation: "Argumentative essays present a claim/thesis and support it with evidence, reasoning, and counterarguments.",
                type: "argumentative"
            },
            {
                question: "What is the main purpose of a narrative essay?",
                options: ["To tell a story", "To describe something", "To argue a point", "To explain a process"],
                answer: "A",
                explanation: "The primary purpose of narrative essays is storytelling - to share an experience or convey a message through a narrative.",
                type: "narrative"
            },
            {
                question: "Which essay type focuses on creating a dominant impression?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Analytical Essay"],
                answer: "A",
                explanation: "Descriptive essays aim to create a dominant impression - an overall feeling or mood about the subject being described.",
                type: "descriptive"
            },
            {
                question: "What is a thesis statement in an argumentative essay?",
                options: ["The main claim being argued", "A summary of the story", "A list of sensory details", "The conclusion"],
                answer: "A",
                explanation: "In argumentative essays, the thesis statement clearly presents the main claim or position being argued.",
                type: "argumentative"
            },
            {
                question: "Which essay type typically uses chronological order?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "All of them"],
                answer: "A",
                explanation: "Narrative essays often use chronological order (time sequence) to tell stories from beginning to end.",
                type: "narrative"
            },
            {
                question: "What do descriptive essays primarily use?",
                options: ["Sensory language and imagery", "Logical arguments", "Character development", "Statistical evidence"],
                answer: "A",
                explanation: "Descriptive essays rely heavily on sensory language and imagery to help readers visualize the subject.",
                type: "descriptive"
            },
            {
                question: "Which essay includes counterarguments?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Personal Essay"],
                answer: "A",
                explanation: "Argumentative essays address counterarguments (opposing views) to strengthen the main argument.",
                type: "argumentative"
            },
            {
                question: "What is the climax in a narrative essay?",
                options: ["The turning point of the story", "The introduction", "The conclusion", "Character descriptions"],
                answer: "A",
                explanation: "The climax is the turning point or most intense moment in a narrative essay's plot.",
                type: "narrative"
            },
            {
                question: "Which essay type might use spatial organization?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Research Essay"],
                answer: "A",
                explanation: "Descriptive essays often use spatial organization (describing from left to right, top to bottom, etc.).",
                type: "descriptive"
            },
            {
                question: "What evidence might an argumentative essay use?",
                options: ["Statistics and expert opinions", "Personal anecdotes only", "Fictional stories", "Random opinions"],
                answer: "A",
                explanation: "Argumentative essays use credible evidence like statistics, research findings, and expert opinions.",
                type: "argumentative"
            },
            {
                question: "Which essay focuses on character development?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Comparative Essay"],
                answer: "A",
                explanation: "Narrative essays develop characters through their actions, dialogue, and experiences.",
                type: "narrative"
            },
            {
                question: "What is figurative language primarily used in?",
                options: ["Descriptive Essays", "Argumentative Essays", "Research Papers", "Business Reports"],
                answer: "A",
                explanation: "Descriptive essays frequently use figurative language (similes, metaphors, personification) to create vivid images.",
                type: "descriptive"
            },
            {
                question: "Which essay requires a clear call to action?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Reflective Essay"],
                answer: "A",
                explanation: "Argumentative essays often conclude with a call to action - urging readers to do something about the issue.",
                type: "argumentative"
            },
            {
                question: "What does a narrative essay's setting provide?",
                options: ["Time and place of the story", "Statistical data", "Opposing arguments", "Sensory details only"],
                answer: "A",
                explanation: "The setting establishes when and where the narrative takes place, creating context for the story.",
                type: "narrative"
            },
            {
                question: "Which essay might describe something from general to specific?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Process Essay"],
                answer: "A",
                explanation: "Descriptive essays often move from general impressions to specific details.",
                type: "descriptive"
            },
            {
                question: "What is the purpose of a hook in an argumentative essay?",
                options: ["Grab reader's attention", "State the thesis", "Present evidence", "Address counterarguments"],
                answer: "A",
                explanation: "The hook (in introduction) grabs readers' attention before presenting the thesis.",
                type: "argumentative"
            },
            {
                question: "Which essay uses dialogue between characters?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Expository Essay"],
                answer: "A",
                explanation: "Narrative essays may include dialogue to develop characters and advance the plot.",
                type: "narrative"
            },
            {
                question: "What do descriptive essays appeal to?",
                options: ["The five senses", "Logical reasoning", "Emotional stories", "Statistical analysis"],
                answer: "A",
                explanation: "Descriptive essays appeal to the five senses: sight, sound, smell, touch, and taste.",
                type: "descriptive"
            },

            // Structure and Organization (21-40)
            {
                question: "What is the typical structure of a narrative essay?",
                options: ["Introduction, Rising Action, Climax, Falling Action, Conclusion", "Thesis, Evidence, Counterargument, Conclusion", "Introduction, Body Paragraphs, Conclusion", "Hook, Background, Thesis, Body, Conclusion"],
                answer: "A",
                explanation: "Narrative essays follow a plot structure: introduction/setup, rising action, climax, falling action, and resolution.",
                type: "narrative"
            },
            {
                question: "How are descriptive essays usually organized?",
                options: ["Spatially or by sensory categories", "Chronologically", "By order of importance", "Randomly"],
                answer: "A",
                explanation: "Descriptive essays often use spatial organization or organize by different sensory categories.",
                type: "descriptive"
            },
            {
                question: "What is the standard structure of an argumentative essay?",
                options: ["Introduction, Body with evidence, Counterargument, Conclusion", "Beginning, Middle, End", "Hook, Characters, Setting, Plot", "General to specific description"],
                answer: "A",
                explanation: "Argumentative essays typically have: introduction with thesis, body paragraphs with evidence, counterargument paragraph, and conclusion.",
                type: "argumentative"
            },
            {
                question: "Where should the thesis statement appear in an argumentative essay?",
                options: ["In the introduction", "In the conclusion", "In every paragraph", "Only in body paragraphs"],
                answer: "A",
                explanation: "The thesis statement should appear in the introduction, usually at the end of the first paragraph.",
                type: "argumentative"
            },
            {
                question: "What comes after the climax in a narrative essay?",
                options: ["Falling action", "Rising action", "Introduction", "New characters"],
                answer: "A",
                explanation: "After the climax comes the falling action, where the conflict begins to resolve.",
                type: "narrative"
            },
            {
                question: "How many body paragraphs should a standard essay have?",
                options: ["At least three", "Only one", "Exactly five", "As many as needed"],
                answer: "A",
                explanation: "Standard essays typically have at least three body paragraphs, each developing a main point.",
                type: "general"
            },
            {
                question: "What should each body paragraph begin with?",
                options: ["A topic sentence", "A quotation", "A question", "A conclusion"],
                answer: "A",
                explanation: "Each body paragraph should begin with a topic sentence that states the paragraph's main idea.",
                type: "general"
            },
            {
                question: "Where is the setting usually established in a narrative?",
                options: ["In the introduction", "In the climax", "In the conclusion", "In counterarguments"],
                answer: "A",
                explanation: "The setting is typically established in the introduction or early in the narrative.",
                type: "narrative"
            },
            {
                question: "What should a descriptive essay's conclusion do?",
                options: ["Reinforce the dominant impression", "Introduce new characters", "Present statistical evidence", "Address opposing views"],
                answer: "A",
                explanation: "A descriptive essay's conclusion should reinforce the dominant impression created throughout the essay.",
                type: "descriptive"
            },
            {
                question: "How should evidence be presented in argumentative essays?",
                options: ["With clear explanation", "Without explanation", "In random order", "Only in footnotes"],
                answer: "A",
                explanation: "Evidence in argumentative essays should be clearly presented and explained to show how it supports the claim.",
                type: "argumentative"
            },
            {
                question: "What is rising action in a narrative?",
                options: ["Events building toward climax", "The conclusion", "Character descriptions", "The thesis statement"],
                answer: "A",
                explanation: "Rising action refers to events that build tension and lead toward the climax.",
                type: "narrative"
            },
            {
                question: "How can descriptive essays organize sensory details?",
                options: ["By type of sense (sight, sound, etc.)", "Only chronologically", "By order of importance", "Alphabetically"],
                answer: "A",
                explanation: "Descriptive essays often organize sensory details by type (one paragraph for sight, another for sound, etc.).",
                type: "descriptive"
            },
            {
                question: "Where should counterarguments be addressed?",
                options: ["In a separate paragraph", "In the introduction", "In the hook", "Not at all"],
                answer: "A",
                explanation: "Counterarguments are typically addressed in a separate paragraph after presenting your main arguments.",
                type: "argumentative"
            },
            {
                question: "What should narrative conclusions include?",
                options: ["Resolution and reflection", "New conflicts", "Statistical data", "Counterarguments"],
                answer: "A",
                explanation: "Narrative conclusions should provide resolution and often include reflection on the story's meaning.",
                type: "narrative"
            },
            {
                question: "How are transitions used in essays?",
                options: ["To connect ideas between paragraphs", "To introduce new characters", "To provide evidence", "To state the thesis"],
                answer: "A",
                explanation: "Transitions connect ideas between paragraphs and help essays flow smoothly.",
                type: "general"
            },
            {
                question: "What makes a good descriptive essay topic?",
                options: ["Something you can observe closely", "A statistical controversy", "A historical event", "A future prediction"],
                answer: "A",
                explanation: "Good descriptive essay topics are things you can observe closely and describe in detail.",
                type: "descriptive"
            },
            {
                question: "How many main points should an argumentative essay have?",
                options: ["At least two or three", "Only one", "At least ten", "As many as possible"],
                answer: "A",
                explanation: "Argumentative essays should have at least two or three main points supporting the thesis.",
                type: "argumentative"
            },
            {
                question: "What is conflict in a narrative?",
                options: ["The main problem or struggle", "The setting description", "The thesis statement", "The conclusion"],
                answer: "A",
                explanation: "Conflict is the main problem or struggle that drives the narrative forward.",
                type: "narrative"
            },
            {
                question: "How specific should descriptive details be?",
                options: ["Very specific and concrete", "Vague and general", "Abstract only", "Mathematical"],
                answer: "A",
                explanation: "Descriptive details should be specific and concrete rather than vague or general.",
                type: "descriptive"
            },
            {
                question: "What is the purpose of a conclusion paragraph?",
                options: ["Summarize and leave lasting impression", "Introduce new evidence", "Start a new story", "List all sources"],
                answer: "A",
                explanation: "Conclusions summarize main points and leave readers with a lasting impression.",
                type: "general"
            },

            // Writing Techniques (41-60)
            {
                question: "Which technique is most important in descriptive writing?",
                options: ["Using sensory details", "Presenting arguments", "Developing plot", "Citing sources"],
                answer: "A",
                explanation: "Using sensory details (sight, sound, smell, touch, taste) is crucial for effective descriptive writing.",
                type: "descriptive"
            },
            {
                question: "What does 'show, don't tell' mean in narrative writing?",
                options: ["Use actions and dialogue instead of explanations", "Use more adjectives", "Tell everything explicitly", "Avoid dialogue"],
                answer: "A",
                explanation: "'Show, don't tell' means revealing character traits and emotions through actions and dialogue rather than simply stating them.",
                type: "narrative"
            },
            {
                question: "What makes evidence credible in argumentative writing?",
                options: ["It comes from reliable sources", "It's emotional", "It's fictional", "It's brief"],
                answer: "A",
                explanation: "Credible evidence comes from reliable, authoritative sources like research studies, experts, or official statistics.",
                type: "argumentative"
            },
            {
                question: "What is figurative language?",
                options: ["Language that uses comparisons", "Formal academic language", "Statistical language", "Simple vocabulary"],
                answer: "A",
                explanation: "Figurative language uses comparisons (similes, metaphors) to create vivid images and descriptions.",
                type: "descriptive"
            },
            {
                question: "How can dialogue improve a narrative?",
                options: ["Reveals character and advances plot", "Makes it shorter", "Adds statistics", "Creates arguments"],
                answer: "A",
                explanation: "Dialogue reveals character personalities and relationships while advancing the plot.",
                type: "narrative"
            },
            {
                question: "What is a counterargument?",
                options: ["An opposing viewpoint", "The main thesis", "A personal story", "A sensory detail"],
                answer: "A",
                explanation: "A counterargument is an opposing viewpoint that you address and refute in an argumentative essay.",
                type: "argumentative"
            },
            {
                question: "What does 'vivid imagery' mean?",
                options: ["Creating clear mental pictures", "Using big words", "Listing facts", "Arguing strongly"],
                answer: "A",
                explanation: "Vivid imagery uses descriptive language to create clear, strong mental pictures for readers.",
                type: "descriptive"
            },
            {
                question: "What is point of view in narrative writing?",
                options: ["Perspective from which story is told", "The main argument", "The conclusion", "The setting"],
                answer: "A",
                explanation: "Point of view is the perspective (first person, third person) from which the narrative is told.",
                type: "narrative"
            },
            {
                question: "What is emotional appeal in argumentative writing?",
                options: ["Appealing to readers' emotions", "Using only logic", "Ignoring feelings", "Being neutral"],
                answer: "A",
                explanation: "Emotional appeal (pathos) connects with readers' emotions to support an argument, though it should be balanced with logic.",
                type: "argumentative"
            },
            {
                question: "What are sensory details?",
                options: ["Details appealing to five senses", "Statistical data", "Logical arguments", "Character backgrounds"],
                answer: "A",
                explanation: "Sensory details are descriptions that appeal to the five senses: sight, sound, smell, touch, and taste.",
                type: "descriptive"
            },
            {
                question: "What is characterization?",
                options: ["Developing characters in a story", "Describing a place", "Arguing a point", "Listing evidence"],
                answer: "A",
                explanation: "Characterization is the process of developing characters through their actions, dialogue, thoughts, and appearances.",
                type: "narrative"
            },
            {
                question: "What is logical appeal?",
                options: ["Using reasoning and evidence", "Using emotional stories", "Using sensory details", "Using dialogue"],
                answer: "A",
                explanation: "Logical appeal (logos) uses reasoning, facts, and evidence to support an argument.",
                type: "argumentative"
            },
            {
                question: "What is a simile?",
                options: ["Comparison using 'like' or 'as'", "Direct comparison", "Human qualities to objects", "Sound words"],
                answer: "A",
                explanation: "A simile is a comparison using 'like' or 'as' (e.g., 'as brave as a lion').",
                type: "descriptive"
            },
            {
                question: "What is plot structure?",
                options: ["Organization of story events", "List of characters", "Collection of evidence", "Sensory details list"],
                answer: "A",
                explanation: "Plot structure refers to how story events are organized (exposition, rising action, climax, etc.).",
                type: "narrative"
            },
            {
                question: "What makes an argument persuasive?",
                options: ["Strong evidence and clear reasoning", "Lots of adjectives", "Long sentences", "Complex vocabulary"],
                answer: "A",
                explanation: "Persuasive arguments combine strong evidence with clear, logical reasoning.",
                type: "argumentative"
            },
            {
                question: "What is personification?",
                options: ["Giving human traits to non-human things", "Comparing with 'like' or 'as'", "Repeating sounds", "Using statistics"],
                answer: "A",
                explanation: "Personification gives human qualities to animals, objects, or ideas (e.g., 'the wind whispered').",
                type: "descriptive"
            },
            {
                question: "What is theme in a narrative?",
                options: ["The underlying message", "The main character", "The setting", "The conflict"],
                answer: "A",
                explanation: "Theme is the underlying message or insight about life that the narrative conveys.",
                type: "narrative"
            },
            {
                question: "What is a rebuttal?",
                options: ["Response to counterargument", "The main thesis", "A personal story", "Introduction hook"],
                answer: "A",
                explanation: "A rebuttal is a response that refutes or answers a counterargument.",
                type: "argumentative"
            },
            {
                question: "What are concrete details?",
                options: ["Specific, observable facts", "Vague descriptions", "Abstract ideas", "General statements"],
                answer: "A",
                explanation: "Concrete details are specific, observable facts rather than vague or abstract descriptions.",
                type: "descriptive"
            },
            {
                question: "What is pacing in narrative writing?",
                options: ["Speed at which story unfolds", "Number of characters", "Length of dialogue", "Size of setting"],
                answer: "A",
                explanation: "Pacing refers to how quickly or slowly the story events unfold.",
                type: "narrative"
            },

            // Application and Analysis (61-80)
            {
                question: "Which essay type would be best for 'My Most Memorable Vacation'?",
                options: ["Narrative Essay", "Argumentative Essay", "Research Paper", "Business Report"],
                answer: "A",
                explanation: "A personal experience like a memorable vacation is best suited for a narrative essay.",
                type: "narrative"
            },
            {
                question: "Which essay would describe 'The Perfect Autumn Day'?",
                options: ["Descriptive Essay", "Argumentative Essay", "Narrative Essay", "Scientific Report"],
                answer: "A",
                explanation: "Describing a scene like 'The Perfect Autumn Day' is ideal for a descriptive essay focusing on sensory details.",
                type: "descriptive"
            },
            {
                question: "Which essay would argue 'Schools Should Have Longer Recess'?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Personal Letter"],
                answer: "A",
                explanation: "Taking a position on an issue like recess length requires an argumentative essay with evidence and reasoning.",
                type: "argumentative"
            },
            {
                question: "What type of essay would tell the story of learning to ride a bike?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Expository Essay"],
                answer: "A",
                explanation: "A personal story about learning a skill is perfect for a narrative essay.",
                type: "narrative"
            },
            {
                question: "Which essay would describe your favorite room in detail?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Persuasive Letter"],
                answer: "A",
                explanation: "Detailed description of a place is the purpose of a descriptive essay.",
                type: "descriptive"
            },
            {
                question: "Which essay would present evidence about climate change?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Short Story"],
                answer: "A",
                explanation: "Presenting evidence about an issue like climate change requires an argumentative essay.",
                type: "argumentative"
            },
            {
                question: "What essay type shares a meaningful childhood experience?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Research Paper"],
                answer: "A",
                explanation: "Sharing personal experiences and their significance is the purpose of narrative essays.",
                type: "narrative"
            },
            {
                question: "Which essay would paint a picture of a busy marketplace?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "News Article"],
                answer: "A",
                explanation: "Painting a vivid picture of a scene is the goal of descriptive essays.",
                type: "descriptive"
            },
            {
                question: "Which essay would convince about the benefits of reading?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Poem"],
                answer: "A",
                explanation: "Convincing readers about benefits requires an argumentative essay with evidence.",
                type: "argumentative"
            },
            {
                question: "What essay tells about overcoming a challenge?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Recipe"],
                answer: "A",
                explanation: "Stories about overcoming challenges are classic narrative essay topics.",
                type: "narrative"
            },
            {
                question: "Which essay would detail a beautiful sunset?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Instruction Manual"],
                answer: "A",
                explanation: "Detailed description of natural beauty is perfect for descriptive essays.",
                type: "descriptive"
            },
            {
                question: "Which essay would debate social media age limits?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Shopping List"],
                answer: "A",
                explanation: "Debating policies requires presenting arguments and evidence - the purpose of argumentative essays.",
                type: "argumentative"
            },
            {
                question: "What essay shares a family tradition story?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Math Problem"],
                answer: "A",
                explanation: "Sharing stories about family traditions is ideal for narrative essays.",
                type: "narrative"
            },
            {
                question: "Which essay would describe a historical monument?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Science Experiment"],
                answer: "A",
                explanation: "Describing a place or object in detail is the purpose of descriptive essays.",
                type: "descriptive"
            },
            {
                question: "Which essay would argue for more art education?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Music Lyrics"],
                answer: "A",
                explanation: "Arguing for educational changes requires evidence and reasoning - the focus of argumentative essays.",
                type: "argumentative"
            },
            {
                question: "What essay tells about a friendship journey?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Business Plan"],
                answer: "A",
                explanation: "Journeys and relationship stories are classic narrative essay topics.",
                type: "narrative"
            },
            {
                question: "Which essay would capture a concert experience?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Legal Document"],
                answer: "A",
                explanation: "Capturing the sensory experience of an event is perfect for descriptive essays.",
                type: "descriptive"
            },
            {
                question: "Which essay would debate homework policies?",
                options: ["Argumentative Essay", "Narrative Essay", "Descriptive Essay", "Poetry"],
                answer: "A",
                explanation: "Debating educational policies requires presenting arguments with evidence.",
                type: "argumentative"
            },
            {
                question: "What essay shares a cultural celebration experience?",
                options: ["Narrative Essay", "Descriptive Essay", "Argumentative Essay", "Technical Manual"],
                answer: "A",
                explanation: "Sharing experiences of cultural events is ideal for narrative essays.",
                type: "narrative"
            },
            {
                question: "Which essay would describe a favorite meal?",
                options: ["Descriptive Essay", "Narrative Essay", "Argumentative Essay", "Map"],
                answer: "A",
                explanation: "Describing food using sensory details (taste, smell, appearance) is perfect for descriptive essays.",
                type: "descriptive"
            }
        ];

        // Additional questions beyond 80
        const additionalQuestions = [
            {
                question: "What should you avoid in argumentative essay evidence?",
                options: ["Personal opinions without support", "Statistics from experts", "Research findings", "Logical reasoning"],
                answer: "A",
                explanation: "Avoid presenting personal opinions as evidence without supporting facts or research.",
                type: "argumentative"
            },
            {
                question: "What makes narrative essays engaging?",
                options: ["Conflict and character development", "Lots of statistics", "Formal language only", "Abstract ideas"],
                answer: "A",
                explanation: "Conflict and character development make narratives engaging and meaningful.",
                type: "narrative"
            },
            {
                question: "How can you improve descriptive writing?",
                options: ["Use specific, concrete details", "Use vague language", "Avoid sensory details", "Use only facts"],
                answer: "A",
                explanation: "Specific, concrete details rather than vague language make descriptions more vivid.",
                type: "descriptive"
            },
            {
                question: "Why is audience important in argumentative writing?",
                options: ["To tailor arguments effectively", "To ignore their views", "To use complex words", "To make it longer"],
                answer: "A",
                explanation: "Understanding your audience helps tailor arguments to address their concerns and perspectives.",
                type: "argumentative"
            }
        ];

        // Combine all questions
        const allQuestions = [...questions, ...additionalQuestions];

        // Writing tips
        const writingTips = [
            "Remember: Narrative = tells a story, Descriptive = paints a picture, Argumentative = persuades with evidence!",
            "Use specific, concrete details rather than vague language in descriptive writing.",
            "Argumentative essays should address counterarguments to strengthen your position.",
            "Show, don't tell! Use actions and dialogue to reveal character traits in narratives.",
            "Organize descriptive essays spatially or by sensory categories for clarity.",
            "Each body paragraph should focus on one main idea with supporting details.",
            "Revise and edit your essays - good writing is rewriting!",
            "Use transitions between paragraphs to create smooth flow in your essays."
        ];

        // Classification items
        const classificationItems = [
            { name: "My First Day at School", type: "narrative", color: "#9C27B0" },
            { name: "The Beach at Sunset", type: "descriptive", color: "#2196F3" },
            { name: "Why Recess Should Be Longer", type: "argumentative", color: "#F44336" },
            { name: "Learning to Swim", type: "narrative", color: "#9C27B0" },
            { name: "Grandma's Kitchen", type: "descriptive", color: "#2196F3" },
            { name: "The Benefits of Reading", type: "argumentative", color: "#F44336" },
            { name: "A Camping Adventure", type: "narrative", color: "#9C27B0" },
            { name: "A Thunderstorm", type: "descriptive", color: "#2196F3" },
            { name: "School Uniform Debate", type: "argumentative", color: "#F44336" }
        ];

        // Thesis statement examples
        const thesisExamples = [
            {
                narrative: "My first solo trip to the grocery store taught me independence and responsibility in ways I never expected.",
                descriptive: "The ancient library was a sanctuary of whispered secrets, dusty adventures, and timeless wisdom.",
                argumentative: "Public libraries should receive increased funding because they provide essential educational resources, community spaces, and digital access for all citizens."
            },
            {
                narrative: "The day I stood up to the school bully transformed not only my confidence but also our entire classroom dynamic.",
                descriptive: "Winter's first snowfall transformed my neighborhood into a magical wonderland of crystalline beauty and hushed tranquility.",
                argumentative: "Schools should implement later start times to address teenage sleep patterns, improve academic performance, and enhance student mental health."
            },
            {
                narrative: "Learning to play the violin challenged my patience but ultimately taught me the value of persistence and gradual progress.",
                descriptive: "The farmer's market on Saturday mornings was a vibrant tapestry of colors, aromas, and community connections.",
                argumentative: "Community service should be a graduation requirement because it builds empathy, teaches practical skills, and strengthens community bonds."
            }
        ];

        // Essay organization steps
        const essaySteps = [
            {
                step: "prewriting",
                title: "Prewriting",
                description: "Brainstorm ideas, choose topic, create outline"
            },
            {
                step: "drafting",
                title: "Drafting",
                description: "Write first version focusing on content"
            },
            {
                step: "revising",
                title: "Revising",
                description: "Improve content, organization, clarity"
            },
            {
                step: "editing",
                title: "Editing",
                description: "Correct grammar, spelling, punctuation"
            },
            {
                step: "publishing",
                title: "Publishing",
                description: "Share final polished version"
            },
            {
                step: "reflecting",
                title: "Reflecting",
                description: "Consider what worked and what to improve"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentClassification: [],
            draggedItem: null,
            currentThesis: 0,
            narrativeScore: 0,
            descriptiveScore: 0,
            argumentativeScore: 0
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const writingTip = document.getElementById('writingTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const narrativeScore = document.getElementById('narrativeScore');
        const descriptiveScore = document.getElementById('descriptiveScore');
        const argumentativeScore = document.getElementById('argumentativeScore');
        const timeSpent = document.getElementById('timeSpent');
        const classificationItemsContainer = document.getElementById('classificationItems');
        const classificationFeedback = document.getElementById('classificationFeedback');
        const writingEditor = document.getElementById('writingEditor');
        const editorFeedback = document.getElementById('editorFeedback');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupClassification();
            setupThesisExamples();
        }

        // Setup classification
        function setupClassification() {
            newClassificationChallenge();
        }

        function newClassificationChallenge() {
            // Shuffle and select items
            const shuffled = [...classificationItems].sort(() => Math.random() - 0.5);
            appState.currentClassification = shuffled;
            
            classificationItemsContainer.innerHTML = '';
            classificationFeedback.textContent = 'Drag topics to correct essay type';
            classificationFeedback.style.color = 'var(--text-secondary)';
            
            // Clear zones
            document.getElementById('zoneNarrative').innerHTML = '<div style="color: var(--narrative-purple); font-weight: bold;">Narrative Essay</div>';
            document.getElementById('zoneDescriptive').innerHTML = '<div style="color: var(--descriptive-blue); font-weight: bold;">Descriptive Essay</div>';
            document.getElementById('zoneArgumentative').innerHTML = '<div style="color: var(--argumentative-red); font-weight: bold;">Argumentative Essay</div>';
            
            shuffled.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'classification-item';
                itemDiv.textContent = item.name;
                itemDiv.style.backgroundColor = item.color;
                itemDiv.style.color = 'white';
                itemDiv.draggable = true;
                itemDiv.id = `item-${index}`;
                itemDiv.dataset.type = item.type;
                
                itemDiv.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', index);
                    appState.draggedItem = item;
                    itemDiv.style.opacity = '0.5';
                });
                
                itemDiv.addEventListener('dragend', () => {
                    itemDiv.style.opacity = '1';
                });
                
                classificationItemsContainer.appendChild(itemDiv);
            });
        }

        function allowDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.add('active');
        }

        function drop(event) {
            event.preventDefault();
            const zone = event.currentTarget;
            zone.classList.remove('active');
            
            if (appState.draggedItem) {
                const itemDiv = document.createElement('div');
                itemDiv.textContent = appState.draggedItem.name;
                itemDiv.style.margin = '5px';
                itemDiv.style.padding = '5px';
                itemDiv.style.backgroundColor = appState.draggedItem.color;
                itemDiv.style.color = 'white';
                itemDiv.style.borderRadius = '4px';
                itemDiv.style.fontSize = '0.8rem';
                
                zone.appendChild(itemDiv);
                classificationFeedback.textContent = `Placed ${appState.draggedItem.name} in ${zone.id.replace('zone', '')} category`;
            }
        }

        function checkClassification() {
            let correct = 0;
            let total = appState.currentClassification.length;
            
            // Check each zone
            const zones = {
                zoneNarrative: 'narrative',
                zoneDescriptive: 'descriptive',
                zoneArgumentative: 'argumentative'
            };
            
            for (const [zoneId, correctType] of Object.entries(zones)) {
                const zone = document.getElementById(zoneId);
                const items = zone.querySelectorAll('div:not(:first-child)');
                
                items.forEach(item => {
                    const itemName = item.textContent;
                    const originalItem = appState.currentClassification.find(i => i.name === itemName);
                    
                    if (originalItem && originalItem.type === correctType) {
                        correct++;
                        item.style.border = '2px solid var(--success-teal)';
                    } else {
                        item.style.border = '2px solid var(--argumentative-red)';
                    }
                });
            }
            
            const percentage = Math.round((correct / total) * 100);
            classificationFeedback.textContent = `Score: ${correct}/${total} (${percentage}%)`;
            classificationFeedback.style.color = percentage >= 80 ? 'var(--success-teal)' : 
                                               percentage >= 60 ? 'var(--warning-amber)' : 'var(--argumentative-red)';
            
            if (percentage === 100) {
                classificationFeedback.textContent += ' - Perfect classification!';
            }
        }

        function resetClassification() {
            newClassificationChallenge();
        }

        // Thesis examples functions
        function setupThesisExamples() {
            updateThesisDisplay();
        }

        function newThesisExample() {
            appState.currentThesis = (appState.currentThesis + 1) % thesisExamples.length;
            updateThesisDisplay();
        }

        function updateThesisDisplay() {
            const example = thesisExamples[appState.currentThesis];
            
            // Update thesis cards
            const narrativeCard = document.querySelector('.narrative-thesis .thesis-text');
            const descriptiveCard = document.querySelector('.descriptive-thesis .thesis-text');
            const argumentativeCard = document.querySelector('.argumentative-thesis .thesis-text');
            
            if (narrativeCard) narrativeCard.textContent = `"${example.narrative}"`;
            if (descriptiveCard) descriptiveCard.textContent = `"${example.descriptive}"`;
            if (argumentativeCard) argumentativeCard.textContent = `"${example.argumentative}"`;
        }

        function showThesisDetail(type) {
            const example = thesisExamples[appState.currentThesis];
            let detail = '';
            
            switch(type) {
                case 'narrative':
                    detail = "NARRATIVE THESIS STATEMENT\n\n";
                    detail += `Example: "${example.narrative}"\n\n`;
                    detail += "Characteristics:\n";
                    detail += "â€¢ Introduces a personal story or experience\n";
                    detail += "â€¢ Hints at the significance or lesson learned\n";
                    detail += "â€¢ Sets up the narrative's purpose\n";
                    detail += "â€¢ Often appears at the end of introduction\n\n";
                    detail += "Purpose: To tell readers what the story is about and why it matters";
                    break;
                    
                case 'descriptive':
                    detail = "DESCRIPTIVE THESIS STATEMENT\n\n";
                    detail += `Example: "${example.descriptive}"\n\n`;
                    detail += "Characteristics:\n";
                    detail += "â€¢ Introduces the subject being described\n";
                    detail += "â€¢ Hints at the dominant impression\n";
                    detail += "â€¢ May preview sensory details\n";
                    detail += "â€¢ Creates anticipation for description\n\n";
                    detail += "Purpose: To tell readers what will be described and what overall impression to expect";
                    break;
                    
                case 'argumentative':
                    detail = "ARGUMENTATIVE THESIS STATEMENT\n\n";
                    detail += `Example: "${example.argumentative}"\n\n`;
                    detail += "Characteristics:\n";
                    detail += "â€¢ Clearly states the claim/position\n";
                    detail += "â€¢ Often includes 'because' with reasons\n";
                    detail += "â€¢ Is debatable (not a fact)\n";
                    detail += "â€¢ Specific and focused\n\n";
                    detail += "Purpose: To clearly state the argument and main supporting points";
                    break;
            }
            
            alert(detail);
        }

        function showAllThesisTypes() {
            let allThesis = "THESIS STATEMENT EXAMPLES BY ESSAY TYPE\n\n";
            
            thesisExamples.forEach((example, index) => {
                allThesis += `Example Set ${index + 1}:\n`;
                allThesis += `Narrative: "${example.narrative}"\n`;
                allThesis += `Descriptive: "${example.descriptive}"\n`;
                allThesis += `Argumentative: "${example.argumentative}"\n\n`;
            });
            
            alert(allThesis);
        }

        // Essay organization steps
        function showStepDetail(step) {
            const stepInfo = essaySteps.find(s => s.step === step);
            if (!stepInfo) return;
            
            let detail = `${stepInfo.title.toUpperCase()} STAGE\n\n`;
            detail += `Description: ${stepInfo.description}\n\n`;
            
            switch(step) {
                case 'prewriting':
                    detail += "Activities:\n";
                    detail += "â€¢ Brainstorming ideas\n";
                    detail += "â€¢ Freewriting\n";
                    detail += "â€¢ Creating mind maps\n";
                    detail += "â€¢ Developing outlines\n";
                    detail += "â€¢ Researching if needed\n\n";
                    detail += "Tip: Don't worry about perfection - just generate ideas!";
                    break;
                    
                case 'drafting':
                    detail += "Activities:\n";
                    detail += "â€¢ Writing first complete version\n";
                    detail += "â€¢ Following your outline\n";
                    detail += "â€¢ Getting ideas on paper\n";
                    detail += "â€¢ Not worrying about errors\n\n";
                    detail += "Tip: Keep writing without stopping to edit - you can fix errors later!";
                    break;
                    
                case 'revising':
                    detail += "Activities:\n";
                    detail += "â€¢ Improving content and ideas\n";
                    detail += "â€¢ Strengthening organization\n";
                    detail += "â€¢ Adding/deleting sections\n";
                    detail += "â€¢ Improving word choice\n\n";
                    detail += "Tip: Read your essay aloud to identify awkward phrasing!";
                    break;
                    
                case 'editing':
                    detail += "Activities:\n";
                    detail += "â€¢ Correcting grammar\n";
                    detail += "â€¢ Fixing spelling\n";
                    detail += "â€¢ Checking punctuation\n";
                    detail += "â€¢ Improving sentence structure\n\n";
                    detail += "Tip: Edit in multiple passes - once for grammar, once for spelling!";
                    break;
                    
                case 'publishing':
                    detail += "Activities:\n";
                    detail += "â€¢ Preparing final format\n";
                    detail += "â€¢ Adding title page if needed\n";
                    detail += "â€¢ Proofreading final version\n";
                    detail += "â€¢ Sharing with audience\n\n";
                    detail += "Tip: Make sure your essay looks professional and polished!";
                    break;
                    
                case 'reflecting':
                    detail += "Activities:\n";
                    detail += "â€¢ What worked well?\n";
                    detail += "â€¢ What was challenging?\n";
                    detail += "â€¢ What would you do differently?\n";
                    detail += "â€¢ What did you learn?\n\n";
                    detail += "Tip: Reflection helps you improve for next time!";
                    break;
            }
            
            alert(detail);
        }

        // Structure detail
        window.showStructureDetail = function(detail) {
            let info = "";
            
            switch(detail) {
                case 'narrative_intro':
                    info = "NARRATIVE INTRODUCTION\n\nPurpose:\nâ€¢ Introduce characters and setting\nâ€¢ Establish context for the story\nâ€¢ Hook the reader's interest\nâ€¢ Hint at the conflict or theme\n\nElements:\nâ€¢ Setting (time and place)\nâ€¢ Main characters\nâ€¢ Opening situation\nâ€¢ Hook (attention-grabber)";
                    break;
                    
                case 'narrative_rising':
                    info = "RISING ACTION\n\nPurpose:\nâ€¢ Develop the plot\nâ€¢ Build tension and suspense\nâ€¢ Develop characters\nâ€¢ Move toward climax\n\nElements:\nâ€¢ Series of events\nâ€¢ Increasing conflict\nâ€¢ Character development\nâ€¢ Foreshadowing";
                    break;
                    
                case 'narrative_climax':
                    info = "CLIMAX\n\nPurpose:\nâ€¢ Turning point of the story\nâ€¢ Highest point of tension\nâ€¢ Main conflict confrontation\nâ€¢ Most intense moment\n\nElements:\nâ€¢ Decision or action\nâ€¢ Conflict resolution begins\nâ€¢ Character transformation\nâ€¢ Central dramatic moment";
                    break;
                    
                case 'narrative_falling':
                    info = "FALLING ACTION\n\nPurpose:\nâ€¢ Resolve the conflict\nâ€¢ Show consequences of climax\nâ€¢ Tie up loose ends\nâ€¢ Lead toward conclusion\n\nElements:\nâ€¢ Resolution of subplots\nâ€¢ Character reactions\nâ€¢ Consequences shown\nâ€¢ Winding down of action";
                    break;
                    
                case 'narrative_conclusion':
                    info = "NARRATIVE CONCLUSION\n\nPurpose:\nâ€¢ Provide resolution\nâ€¢ Show character growth\nâ€¢ Reveal theme or lesson\nâ€¢ Leave lasting impression\n\nElements:\nâ€¢ Final outcome\nâ€¢ Reflection on events\nâ€¢ Theme statement\nâ€¢ Closing thought";
                    break;
                    
                case 'descriptive_intro':
                    info = "DESCRIPTIVE INTRODUCTION\n\nPurpose:\nâ€¢ Introduce the subject\nâ€¢ Create initial impression\nâ€¢ Establish dominant mood\nâ€¢ Preview sensory details\n\nElements:\nâ€¢ Subject identification\nâ€¢ Dominant impression\nâ€¢ General description\nâ€¢ Thesis statement";
                    break;
                    
                case 'descriptive_body1':
                    info = "DESCRIPTIVE BODY - SIGHT\n\nPurpose:\nâ€¢ Describe visual details\nâ€¢ Create mental images\nâ€¢ Use color, shape, size\nâ€¢ Establish spatial relationships\n\nElements:\nâ€¢ Visual observations\nâ€¢ Color descriptions\nâ€¢ Size and shape details\nâ€¢ Spatial organization";
                    break;
                    
                case 'descriptive_body2':
                    info = "DESCRIPTIVE BODY - SOUND/TOUCH\n\nPurpose:\nâ€¢ Appeal to hearing sense\nâ€¢ Describe textures and feels\nâ€¢ Create auditory imagery\nâ€¢ Use onomatopoeia\n\nElements:\nâ€¢ Sound descriptions\nâ€¢ Texture details\nâ€¢ Temperature feelings\nâ€¢ Physical sensations";
                    break;
                    
                case 'descriptive_body3':
                    info = "DESCRIPTIVE BODY - SMELL/TASTE\n\nPurpose:\nâ€¢ Appeal to smell sense\nâ€¢ Describe tastes if applicable\nâ€¢ Use scent memories\nâ€¢ Create sensory richness\n\nElements:\nâ€¢ Aroma descriptions\nâ€¢ Flavor details\nâ€¢ Associated memories\nâ€¢ Sensory connections";
                    break;
                    
                case 'descriptive_conclusion':
                    info = "DESCRIPTIVE CONCLUSION\n\nPurpose:\nâ€¢ Reinforce dominant impression\nâ€¢ Summarize main details\nâ€¢ Leave vivid final image\nâ€¢ Connect to larger meaning\n\nElements:\nâ€¢ Final overall impression\nâ€¢ Significance of subject\nâ€¢ Closing sensory image\nâ€¢ Lasting thought";
                    break;
                    
                case 'argumentative_intro':
                    info = "ARGUMENTATIVE INTRODUCTION\n\nPurpose:\nâ€¢ Introduce the issue\nâ€¢ Provide background\nâ€¢ Present thesis statement\nâ€¢ Hook the reader\n\nElements:\nâ€¢ Attention grabber\nâ€¢ Background information\nâ€¢ Thesis statement\nâ€¢ Preview of arguments";
                    break;
                    
                case 'argumentative_body1':
                    info = "ARGUMENTATIVE BODY - MAIN ARGUMENT 1\n\nPurpose:\nâ€¢ Present strongest argument\nâ€¢ Provide evidence\nâ€¢ Explain reasoning\nâ€¢ Connect to thesis\n\nElements:\nâ€¢ Topic sentence\nâ€¢ Supporting evidence\nâ€¢ Explanation\nâ€¢ Connection to thesis";
                    break;
                    
                case 'argumentative_body2':
                    info = "ARGUMENTATIVE BODY - MAIN ARGUMENT 2\n\nPurpose:\nâ€¢ Present second argument\nâ€¢ Provide different evidence\nâ€¢ Show multiple perspectives\nâ€¢ Strengthen overall case\n\nElements:\nâ€¢ Topic sentence\nâ€¢ Supporting evidence\nâ€¢ Logical reasoning\nâ€¢ Transition to next point";
                    break;
                    
                case 'argumentative_counter':
                    info = "COUNTERARGUMENT PARAGRAPH\n\nPurpose:\nâ€¢ Address opposing views\nâ€¢ Refute counterarguments\nâ€¢ Show fairness and depth\nâ€¢ Strengthen own position\n\nElements:\nâ€¢ Acknowledgement of opposing view\nâ€¢ Fair presentation\nâ€¢ Refutation with evidence\nâ€¢ Return to main argument";
                    break;
                    
                case 'argumentative_conclusion':
                    info = "ARGUMENTATIVE CONCLUSION\n\nPurpose:\nâ€¢ Restate thesis\nâ€¢ Summarize main points\nâ€¢ Provide final persuasion\nâ€¢ Call to action\n\nElements:\nâ€¢ Restated thesis\nâ€¢ Summary of arguments\nâ€¢ Final persuasive appeal\nâ€¢ Call to action or implication";
                    break;
                    
                default:
                    info = "Select a specific essay element for detailed information.";
            }
            
            alert(info);
        };

        // Essay detail
        window.showEssayDetail = function(type) {
            let info = "";
            
            if (type === 'narrative') {
                info = "ðŸ“– NARRATIVE ESSAY ðŸ“–\n\n";
                info += "Purpose: To tell a story that conveys a message or insight\n\n";
                info += "Key Elements:\n";
                info += "â€¢ Characters - people in the story\n";
                info += "â€¢ Setting - time and place\n";
                info += "â€¢ Plot - sequence of events\n";
                info += "â€¢ Conflict - problem or struggle\n";
                info += "â€¢ Theme - underlying message\n";
                info += "â€¢ Point of View - narrative perspective\n\n";
                info += "Structure:\n";
                info += "1. Introduction - sets scene, introduces characters\n";
                info += "2. Rising Action - builds conflict, develops plot\n";
                info += "3. Climax - turning point, main conflict\n";
                info += "4. Falling Action - resolves conflict\n";
                info += "5. Conclusion - reveals lesson or theme\n\n";
                info += "Writing Tips:\n";
                info += "â€¢ Use chronological order\n";
                info += "â€¢ Show, don't tell - use actions and dialogue\n";
                info += "â€¢ Include sensory details\n";
                info += "â€¢ Develop characters through their actions\n";
                info += "â€¢ Create a clear beginning, middle, and end\n\n";
                info += "Example Topics:\n";
                info += "â€¢ A time you learned an important lesson\n";
                info += "â€¢ Your most memorable vacation\n";
                info += "â€¢ Overcoming a challenge\n";
                info += "â€¢ A friendship that changed you";
            } else if (type === 'descriptive') {
                info = "ðŸŽ¨ DESCRIPTIVE ESSAY ðŸŽ¨\n\n";
                info += "Purpose: To create a vivid picture using sensory details\n\n";
                info += "Key Elements:\n";
                info += "â€¢ Sensory Details - appeal to five senses\n";
                info += "â€¢ Vivid Imagery - create mental pictures\n";
                info += "â€¢ Figurative Language - similes, metaphors\n";
                info += "â€¢ Dominant Impression - overall mood/feeling\n";
                info += "â€¢ Spatial Organization - logical description order\n";
                info += "â€¢ Concrete Details - specific, observable facts\n\n";
                info += "Structure:\n";
                info += "1. Introduction - introduces subject, creates first impression\n";
                info += "2. Body Paragraphs - organized by senses or spatially\n";
                info += "3. Conclusion - reinforces dominant impression\n\n";
                info += "Writing Tips:\n";
                info += "â€¢ Use all five senses when possible\n";
                info += "â€¢ Be specific and concrete\n";
                info += "â€¢ Use figurative language (similes, metaphors)\n";
                info += "â€¢ Show, don't just tell\n";
                info += "â€¢ Organize logically (left to right, top to bottom)\n\n";
                info += "Example Topics:\n";
                info += "â€¢ Your favorite place\n";
                info += "â€¢ A person you admire\n";
                info += "â€¢ A beautiful natural scene\n";
                info += "â€¢ A memorable meal";
            } else {
                info = "ðŸ’­ ARGUMENTATIVE ESSAY ðŸ’­\n\n";
                info += "Purpose: To persuade readers with evidence and reasoning\n\n";
                info += "Key Elements:\n";
                info += "â€¢ Thesis Statement - clear claim/position\n";
                info += "â€¢ Evidence - facts, statistics, examples\n";
                info += "â€¢ Reasoning - logical connections\n";
                info += "â€¢ Counterarguments - opposing views addressed\n";
                info += "â€¢ Refutation - response to counterarguments\n";
                info += "â€¢ Call to Action - what readers should do\n\n";
                info += "Structure:\n";
                info += "1. Introduction - presents issue and thesis\n";
                info += "2. Body Paragraphs - present arguments with evidence\n";
                info += "3. Counterargument - addresses opposing views\n";
                info += "4. Conclusion - restates thesis, calls to action\n\n";
                info += "Writing Tips:\n";
                info += "â€¢ Use credible evidence from reliable sources\n";
                info += "â€¢ Address counterarguments fairly\n";
                info += "â€¢ Use logical reasoning\n";
                info += "â€¢ Maintain formal, objective tone\n";
                info += "â€¢ Organize arguments from strongest to weakest\n\n";
                info += "Example Topics:\n";
                info += "â€¢ Should school start later?\n";
                info += "â€¢ Are video games beneficial?\n";
                info += "â€¢ Should homework be limited?\n";
                info += "â€¢ Is social media harmful for teens?";
            }
            
            alert(info);
        };

        // Editor functions
        function checkNarrative() {
            const text = writingEditor.value.trim();
            if (!text) {
                editorFeedback.textContent = "Please enter some text first.";
                editorFeedback.style.color = "var(--warning-amber)";
                return;
            }
            
            let score = 0;
            let feedback = [];
            
            // Check for narrative elements
            const hasCharacters = /(I|he|she|they|we|my friend|my mother|father|sister|brother)/i.test(text);
            const hasAction = /(walked|ran|said|yelled|laughed|cried|jumped|moved|went)/i.test(text);
            const hasTimeWords = /(then|next|after|while|when|suddenly|finally|later)/i.test(text);
            const hasDialogue = /"[^"]*"|'[^']*'|said|asked|replied|exclaimed/i.test(text);
            
            if (hasCharacters) {
                feedback.push("âœ“ Characters mentioned (good for narrative)");
                score++;
            } else {
                feedback.push("Consider adding characters to your narrative");
            }
            
            if (hasAction) {
                feedback.push("âœ“ Action verbs used (shows events happening)");
                score++;
            } else {
                feedback.push("Add more action - what are people doing?");
            }
            
            if (hasTimeWords) {
                feedback.push("âœ“ Time sequence words (helps chronological flow)");
                score++;
            } else {
                feedback.push("Add time words (then, next, suddenly) for narrative flow");
            }
            
            if (hasDialogue) {
                feedback.push("âœ“ Dialogue or speech indicators (brings characters to life)");
                score++;
            } else {
                feedback.push("Consider adding dialogue to develop characters");
            }
            
            // Check for sensory details (good but not required)
            const sensoryWords = /(saw|heard|felt|smelled|tasted|bright|loud|soft|rough|sweet|fragrant)/i.test(text);
            if (sensoryWords) {
                feedback.push("âœ“ Sensory details included (enhances narrative)");
                score++;
            }
            
            // Overall assessment
            let assessment = "";
            if (score >= 3) {
                assessment = "Text shows strong narrative qualities with characters, action, and sequence.";
                editorFeedback.style.color = "var(--success-teal)";
            } else if (score >= 2) {
                assessment = "Text has some narrative elements but could be strengthened.";
                editorFeedback.style.color = "var(--warning-amber)";
            } else {
                assessment = "Text needs more narrative elements (characters, action, sequence).";
                editorFeedback.style.color = "var(--argumentative-red)";
            }
            
            editorFeedback.innerHTML = `<strong>Narrative Assessment:</strong> ${assessment}<br>${feedback.join('<br>')}`;
        }

        function checkDescriptive() {
            const text = writingEditor.value.trim();
            if (!text) {
                editorFeedback.textContent = "Please enter some text first.";
                editorFeedback.style.color = "var(--warning-amber)";
                return;
            }
            
            let score = 0;
            let feedback = [];
            
            // Check for descriptive elements
            const sightWords = /(saw|looked|appeared|color|shape|size|bright|dark|light|beautiful|ugly)/i.test(text);
            const soundWords = /(heard|sounded|noise|quiet|loud|echo|whisper|shout|music)/i.test(text);
            const touchWords = /(felt|touch|texture|soft|hard|rough|smooth|warm|cold|hot)/i.test(text);
            const smellWords = /(smelled|scent|odor|fragrance|aroma|stinky|perfume)/i.test(text);
            const tasteWords = /(tasted|flavor|sweet|sour|bitter|salty|delicious|disgusting)/i.test(text);
            const figurative = /(like|as|metaphor|simile|personification)/i.test(text);
            const adjectives = (text.match(/\b(\w+ly|\w+ing|\w+ed)\b/g) || []).length;
            
            const senses = [sightWords, soundWords, touchWords, smellWords, tasteWords];
            const senseCount = senses.filter(Boolean).length;
            
            if (senseCount >= 2) {
                feedback.push(`âœ“ Uses ${senseCount} different senses (good description)`);
                score += senseCount;
            } else {
                feedback.push("Add more sensory details (sight, sound, touch, smell, taste)");
            }
            
            if (figurative) {
                feedback.push("âœ“ Figurative language used (enhances description)");
                score++;
            } else {
                feedback.push("Consider adding similes or metaphors");
            }
            
            if (adjectives > 3) {
                feedback.push(`âœ“ ${adjectives} descriptive words/phrases`);
                score++;
            } else {
                feedback.push("Add more descriptive adjectives and adverbs");
            }
            
            // Check for specific vs vague
            const specificWords = /\b(the|a|an)\s+\w+\s+\w+/gi.test(text);
            if (specificWords) {
                feedback.push("âœ“ Specific details rather than vague generalities");
                score++;
            } else {
                feedback.push("Be more specific - instead of 'a tree' try 'the ancient oak tree'");
            }
            
            // Overall assessment
            let assessment = "";
            if (score >= 5) {
                assessment = "Text shows excellent descriptive qualities with multiple senses and vivid details.";
                editorFeedback.style.color = "var(--success-teal)";
            } else if (score >= 3) {
                assessment = "Text has descriptive elements but could be more vivid.";
                editorFeedback.style.color = "var(--warning-amber)";
            } else {
                assessment = "Text needs more sensory details and descriptive language.";
                editorFeedback.style.color = "var(--argumentative-red)";
            }
            
            editorFeedback.innerHTML = `<strong>Descriptive Assessment:</strong> ${assessment}<br>${feedback.join('<br>')}`;
        }

        function checkArgumentative() {
            const text = writingEditor.value.trim();
            if (!text) {
                editorFeedback.textContent = "Please enter some text first.";
                editorFeedback.style.color = "var(--warning-amber)";
                return;
            }
            
            let score = 0;
            let feedback = [];
            
            // Check for argumentative elements
            const claimWords = /(should|must|ought|need to|have to|better|best|worst)/i.test(text);
            const evidenceWords = /(because|since|therefore|thus|research|study|shows|proves|according to|statistics)/i.test(text);
            const logicalWords = /(if.*then|therefore|consequently|thus|hence|so|because)/i.test(text);
            const counterWords = /(although|while|even though|despite|however|but|on the other hand)/i.test(text);
            const formalTone = !/(lol|omg|wow|awesome|cool|hey|hi|gonna|wanna)/i.test(text);
            
            if (claimWords) {
                feedback.push("âœ“ Makes a claim or argument (should, must, etc.)");
                score++;
            } else {
                feedback.push("Make a clear claim - what should or shouldn't happen?");
            }
            
            if (evidenceWords) {
                feedback.push("âœ“ Presents evidence or reasoning (because, research shows)");
                score++;
            } else {
                feedback.push("Add evidence or reasoning to support your claim");
            }
            
            if (logicalWords) {
                feedback.push("âœ“ Uses logical connectors (therefore, thus, because)");
                score++;
            } else {
                feedback.push("Use logical connectors to show reasoning");
            }
            
            if (counterWords) {
                feedback.push("âœ“ Addresses counterarguments (although, however)");
                score++;
            } else {
                feedback.push("Consider addressing opposing views");
            }
            
            if (formalTone) {
                feedback.push("âœ“ Maintains formal, objective tone");
                score++;
            } else {
                feedback.push("Use more formal language for argumentative writing");
            }
            
            // Check for examples
            const hasExamples = /(for example|for instance|such as|including|like)/i.test(text);
            if (hasExamples) {
                feedback.push("âœ“ Provides examples (strengthens argument)");
                score++;
            }
            
            // Overall assessment
            let assessment = "";
            if (score >= 4) {
                assessment = "Text shows strong argumentative qualities with claims, evidence, and reasoning.";
                editorFeedback.style.color = "var(--success-teal)";
            } else if (score >= 3) {
                assessment = "Text has argumentative elements but could be stronger.";
                editorFeedback.style.color = "var(--warning-amber)";
            } else {
                assessment = "Text needs clearer argumentation with claims and evidence.";
                editorFeedback.style.color = "var(--argumentative-red)";
            }
            
            editorFeedback.innerHTML = `<strong>Argumentative Assessment:</strong> ${assessment}<br>${feedback.join('<br>')}`;
        }

        function suggestImprovements() {
            const text = writingEditor.value.trim();
            if (!text) {
                editorFeedback.textContent = "Please enter some text first.";
                return;
            }
            
            let suggestions = [];
            
            // General writing suggestions
            if (text.length < 50) {
                suggestions.push("Expand your writing - add more details and examples");
            }
            
            if (!/[.!?]$/.test(text)) {
                suggestions.push("End with proper punctuation");
            }
            
            // Check for vague language
            const vagueWords = /\b(thing|stuff|a lot|very|really|good|bad|nice)\b/gi;
            const vagueMatches = text.match(vagueWords);
            if (vagueMatches) {
                suggestions.push(`Replace vague words (${vagueMatches.slice(0, 3).join(', ')}) with specific terms`);
            }
            
            // Check sentence variety
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            if (sentences.length > 0) {
                const avgLength = text.length / sentences.length;
                if (avgLength > 25) {
                    suggestions.push("Break up long sentences for better readability");
                } else if (avgLength < 10) {
                    suggestions.push("Combine some short sentences for better flow");
                }
            }
            
            // Check for repetition
            const words = text.toLowerCase().split(/\W+/);
            const wordCounts = {};
            words.forEach(word => {
                if (word.length > 3) {
                    wordCounts[word] = (wordCounts[word] || 0) + 1;
                }
            });
            
            const repeated = Object.entries(wordCounts)
                .filter(([word, count]) => count > 3)
                .map(([word]) => word);
                
            if (repeated.length > 0) {
                suggestions.push(`Avoid repeating: ${repeated.slice(0, 2).join(', ')} - use synonyms`);
            }
            
            if (suggestions.length === 0) {
                editorFeedback.innerHTML = "<strong>Great writing!</strong> Your text shows good structure and clarity. Consider: varying sentence structure, adding specific examples, and ensuring logical flow.";
                editorFeedback.style.color = "var(--success-teal)";
            } else {
                editorFeedback.innerHTML = `<strong>Writing Suggestions:</strong><br>${suggestions.slice(0, 5).join('<br>')}`;
                editorFeedback.style.color = "var(--warning-amber)";
            }
        }

        function clearEditor() {
            writingEditor.value = '';
            editorFeedback.textContent = "Write a paragraph and check its essay type characteristics";
            editorFeedback.style.color = "var(--text-secondary)";
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other English topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Create writing tip display
        function createWritingTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'writing-tip';
            tipDiv.innerHTML = `<strong>Writing Tip:</strong> ${writingTips[Math.floor(Math.random() * writingTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / allQuestions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            narrativeScore.textContent = appState.narrativeScore;
            descriptiveScore.textContent = appState.descriptiveScore;
            argumentativeScore.textContent = appState.argumentativeScore;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You've mastered narrative, descriptive, and argumentative essays!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Excellent work! You understand different essay types very well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! You're developing strong essay writing skills!";
            } else {
                scoreMessage.textContent = "Keep practicing! Understanding different essay types is key to effective writing!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = allQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${allQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / allQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            writingTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            writingTip.appendChild(createWritingTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = allQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                
                // Track scores by essay type
                if (question.type === 'narrative') appState.narrativeScore++;
                if (question.type === 'descriptive') appState.descriptiveScore++;
                if (question.type === 'argumentative') appState.argumentativeScore++;
                
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < allQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.narrativeScore = 0;
            appState.descriptiveScore = 0;
            appState.argumentativeScore = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin essay writing practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.narrativeScore = 0;
            appState.descriptiveScore = 0;
            appState.argumentativeScore = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
