<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 Science - Energy Forms & Conversions | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Energy Theme */
        :root {
            --primary-yellow: #FFC107;
            --secondary-orange: #FF9800;
            --accent-red: #F44336;
            --accent-blue: #2196F3;
            --accent-green: #4CAF50;
            --accent-purple: #9C27B0;
            --accent-teal: #009688;
            --accent-pink: #E91E63;
            --accent-indigo: #3F51B5;
            --dark-bg: #0A1929;
            --dark-surface: #1A2938;
            --dark-card: #233044;
            --dark-border: #334455;
            --text-primary: #FFFFFF;
            --text-secondary: #B0BEC5;
            --text-muted: #78909C;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(255, 193, 7, 0.3);
            --kinetic-glow: 0 0 15px rgba(33, 150, 243, 0.4);
            --potential-glow: 0 0 15px rgba(156, 39, 176, 0.4);
            --thermal-glow: 0 0 15px rgba(244, 67, 54, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Energy Pattern Background */
        .energy-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 193, 7, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(33, 150, 243, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(244, 67, 54, 0.1) 0%, transparent 50%);
            opacity: 0.3;
        }

        .floating-energy {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 3rem;
            font-weight: bold;
            animation: floatEnergy 20s linear infinite;
        }

        @keyframes floatEnergy {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 25, 41, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-yellow), var(--secondary-orange), var(--accent-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 193, 7, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-yellow);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-yellow);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-yellow);
            box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-yellow);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }

        .btn-primary:hover {
            background: #FFB300;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-orange);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
        }

        .btn-secondary:hover {
            background: #F57C00;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.5);
        }

        .btn-blue {
            background: var(--accent-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-blue:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-yellow);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-yellow), var(--secondary-orange), var(--accent-red));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-yellow), var(--secondary-orange), var(--accent-red));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-yellow);
            background: rgba(255, 193, 7, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-orange);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Energy Display */
        .energy-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-yellow);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .energy-container {
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-orange);
        }

        .energy-scenario {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .energy-highlight {
            background: rgba(255, 152, 0, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid var(--accent-orange);
        }

        .highlight-text {
            color: var(--accent-orange);
            font-weight: bold;
        }

        /* Energy Transformation Diagram */
        .energy-diagram {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 12px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--primary-yellow);
        }

        .energy-source {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.5rem;
            box-shadow: 0 0 20px currentColor;
        }

        .energy-arrow {
            position: absolute;
            color: var(--primary-yellow);
            font-size: 2rem;
            font-weight: bold;
        }

        /* Energy Forms Grid */
        .forms-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .forms-grid {
                grid-template-columns: 1fr;
            }
        }

        .form-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .form-card:hover {
            transform: translateY(-5px);
        }

        .form-card.kinetic {
            border-color: var(--accent-blue);
        }

        .form-card.potential {
            border-color: var(--accent-purple);
        }

        .form-card.thermal {
            border-color: var(--accent-red);
        }

        .form-card.chemical {
            border-color: var(--accent-green);
        }

        .form-card.electrical {
            border-color: var(--accent-yellow);
        }

        .form-card.light {
            border-color: var(--secondary-orange);
        }

        .form-card.sound {
            border-color: var(--accent-teal);
        }

        .form-card.nuclear {
            border-color: var(--accent-pink);
        }

        .form-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .kinetic .form-icon {
            color: var(--accent-blue);
        }

        .potential .form-icon {
            color: var(--accent-purple);
        }

        .thermal .form-icon {
            color: var(--accent-red);
        }

        .chemical .form-icon {
            color: var(--accent-green);
        }

        .electrical .form-icon {
            color: var(--accent-yellow);
        }

        .light .form-icon {
            color: var(--secondary-orange);
        }

        .sound .form-icon {
            color: var(--accent-teal);
        }

        .nuclear .form-icon {
            color: var(--accent-pink);
        }

        .form-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .kinetic .form-title {
            color: var(--accent-blue);
        }

        .potential .form-title {
            color: var(--accent-purple);
        }

        .thermal .form-title {
            color: var(--accent-red);
        }

        .chemical .form-title {
            color: var(--accent-green);
        }

        .electrical .form-title {
            color: var(--accent-yellow);
        }

        .light .form-title {
            color: var(--secondary-orange);
        }

        .sound .form-title {
            color: var(--accent-teal);
        }

        .nuclear .form-title {
            color: var(--accent-pink);
        }

        .form-definition {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .form-examples {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 10px;
        }

        /* Energy Conversion Table */
        .conversion-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .conversion-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--primary-yellow);
            border-bottom: 2px solid var(--primary-yellow);
        }

        .conversion-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .conversion-table tr:hover {
            background: rgba(255, 193, 7, 0.05);
        }

        /* Law of Conservation Display */
        .conservation-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-teal);
        }

        .conservation-title {
            color: var(--accent-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .conservation-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .conservation-content {
                flex-direction: column;
            }
        }

        .energy-balance {
            flex: 1;
            text-align: center;
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 8px;
        }

        /* Renewable vs Non-renewable */
        .energy-types-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .energy-types-title {
            color: var(--accent-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .energy-types-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .energy-types-grid {
                grid-template-columns: 1fr;
            }
        }

        .energy-type-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .energy-type-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .renewable .energy-type-icon {
            color: var(--accent-green);
        }

        .non-renewable .energy-type-icon {
            color: var(--accent-red);
        }

        .energy-type-name {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .renewable .energy-type-name {
            color: var(--accent-green);
        }

        .non-renewable .energy-type-name {
            color: var(--accent-red);
        }

        .energy-type-list {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Interactive Energy Converter */
        .converter-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .converter-title {
            color: var(--accent-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .converter-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .converter-select {
            padding: 10px 15px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-purple);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .converter-btn {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-purple);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .converter-btn:hover {
            background: rgba(156, 39, 176, 0.1);
            transform: translateY(-2px);
        }

        .converter-display {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-yellow), var(--secondary-orange), var(--accent-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-yellow), var(--secondary-orange), var(--accent-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-yellow);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .forms-grid {
                grid-template-columns: 1fr;
            }
            
            .energy-types-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes energyReveal {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .energy-reveal {
            animation: energyReveal 0.5s ease forwards;
        }
        
        @keyframes energyFlow {
            0% { transform: translateX(-100px) scale(0.8); opacity: 0; }
            50% { transform: translateX(0) scale(1.1); opacity: 1; }
            100% { transform: translateX(100px) scale(0.8); opacity: 0; }
        }
        
        .energy-flow {
            animation: energyFlow 3s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .spin {
            animation: spin 2s linear infinite;
        }
        
        @keyframes kineticGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(33, 150, 243, 0.2); }
        }
        
        .kinetic-glow {
            animation: kineticGlow 2s ease-in-out infinite;
        }
        
        @keyframes potentialGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(156, 39, 176, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(156, 39, 176, 0.2); }
        }
        
        .potential-glow {
            animation: potentialGlow 2s ease-in-out infinite;
        }
        
        @keyframes thermalGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(244, 67, 54, 0.2); }
        }
        
        .thermal-glow {
            animation: thermalGlow 2s ease-in-out infinite;
        }
        
        @keyframes floatSymbol {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .float-symbol {
            animation: floatSymbol 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Energy Pattern Background -->
    <div class="energy-bg" id="energyBg">
        <!-- Energy symbols will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 Science - Energy Forms & Conversions</h1>
            <p class="welcome-subtitle">Discover the power that makes everything move, change, and happen! Explore different forms of energy, learn how energy transforms from one type to another, and understand the Law of Conservation of Energy. Become an energy expert through interactive models and real-world examples!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">‚ö°üî•üí°üåäüîã</span>
                <span class="topic-name">Energy: Forms, Transformations & Conservation</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Ignite Energy Learning</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Science fact display -->
                <div id="scienceFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Energy Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Explore Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other Science Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const energyBg = document.getElementById('energyBg');
            
            // Create floating energy symbols
            const symbols = ['‚ö°', 'üî•', 'üí°', 'üåä', 'üîã', '‚òÄÔ∏è', 'üí®', 'üå™Ô∏è', 'üåÄ', '‚ú®', 'üåü', 'üí´'];
            
            for (let i = 0; i < 20; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'floating-energy float-symbol';
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.left = `${Math.random() * 100}%`;
                symbol.style.top = `${Math.random() * 100}%`;
                symbol.style.animationDelay = `${Math.random() * 5}s`;
                symbol.style.fontSize = `${2 + Math.random() * 4}rem`;
                
                // Color based on symbol type
                if (symbol.textContent === '‚ö°' || symbol.textContent === 'üîã') {
                    symbol.style.color = 'rgba(255, 193, 7, 0.1)';
                } else if (symbol.textContent === 'üî•' || symbol.textContent === '‚òÄÔ∏è') {
                    symbol.style.color = 'rgba(255, 152, 0, 0.1)';
                } else if (symbol.textContent === 'üí°' || symbol.textContent === '‚ú®') {
                    symbol.style.color = 'rgba(255, 255, 255, 0.1)';
                } else {
                    symbol.style.color = 'rgba(33, 150, 243, 0.1)';
                }
                
                energyBg.appendChild(symbol);
            }
        }

        // Questions array - 80+ Grade 6 Energy Forms & Conversions Questions
        const questions = [
            // Basic Energy Concepts (1-20)
            {
                type: "basic_concepts",
                question: "What is energy?",
                options: ["The ability to do work or cause change", "The speed of an object", "The amount of matter in an object", "The temperature of something"],
                answer: "A",
                explanation: "Energy is defined as the ability to do work or cause change."
            },
            {
                type: "basic_concepts",
                question: "What is the unit of measurement for energy?",
                options: ["Joule", "Newton", "Watt", "Meter"],
                answer: "A",
                explanation: "The joule (J) is the standard unit for measuring energy."
            },
            {
                type: "basic_concepts",
                question: "What does the Law of Conservation of Energy state?",
                options: ["Energy cannot be created or destroyed, only changed from one form to another", "Energy can be created from nothing", "Energy always decreases", "Energy only exists in moving objects"],
                answer: "A",
                explanation: "The Law of Conservation of Energy states that energy cannot be created or destroyed, only transformed from one form to another."
            },
            // Energy Forms (21-40)
            {
                type: "energy_forms",
                question: "What type of energy is associated with motion?",
                options: ["Kinetic energy", "Potential energy", "Thermal energy", "Chemical energy"],
                answer: "A",
                explanation: "Kinetic energy is the energy of motion - any moving object has kinetic energy."
            },
            {
                type: "energy_forms",
                question: "What type of energy is stored energy?",
                options: ["Potential energy", "Kinetic energy", "Thermal energy", "Light energy"],
                answer: "A",
                explanation: "Potential energy is stored energy that has the potential to do work."
            },
            {
                type: "energy_forms",
                question: "What form of energy is associated with heat?",
                options: ["Thermal energy", "Electrical energy", "Sound energy", "Nuclear energy"],
                answer: "A",
                explanation: "Thermal energy is the total kinetic energy of particles in a substance - we feel it as heat."
            },
            {
                type: "energy_forms",
                question: "What type of energy is stored in batteries and food?",
                options: ["Chemical energy", "Electrical energy", "Mechanical energy", "Light energy"],
                answer: "A",
                explanation: "Chemical energy is stored in the bonds between atoms and molecules, like in batteries and food."
            },
            {
                type: "energy_forms",
                question: "What form of energy involves the movement of electrons?",
                options: ["Electrical energy", "Thermal energy", "Sound energy", "Nuclear energy"],
                answer: "A",
                explanation: "Electrical energy comes from the movement of electrons through a conductor."
            },
            {
                type: "energy_forms",
                question: "What type of energy travels in waves and allows us to see?",
                options: ["Light energy", "Sound energy", "Thermal energy", "Chemical energy"],
                answer: "A",
                explanation: "Light energy is a form of electromagnetic radiation that our eyes can detect."
            },
            {
                type: "energy_forms",
                question: "What form of energy is produced by vibrating objects?",
                options: ["Sound energy", "Light energy", "Electrical energy", "Nuclear energy"],
                answer: "A",
                explanation: "Sound energy is produced by vibrating objects and travels as waves through matter."
            },
            // Energy Transformations (41-60)
            {
                type: "energy_transformations",
                question: "In a flashlight, what energy transformation occurs?",
                options: ["Chemical ‚Üí Electrical ‚Üí Light", "Light ‚Üí Electrical ‚Üí Chemical", "Thermal ‚Üí Chemical ‚Üí Light", "Sound ‚Üí Light ‚Üí Electrical"],
                answer: "A",
                explanation: "Batteries (chemical) produce electricity that powers the bulb to produce light."
            },
            {
                type: "energy_transformations",
                question: "What energy transformation occurs when you eat food?",
                options: ["Chemical ‚Üí Mechanical (movement)", "Mechanical ‚Üí Chemical", "Thermal ‚Üí Chemical", "Light ‚Üí Chemical"],
                answer: "A",
                explanation: "Your body converts chemical energy from food into mechanical energy for movement."
            },
            {
                type: "energy_transformations",
                question: "In a solar panel, what energy transformation occurs?",
                options: ["Light ‚Üí Electrical", "Electrical ‚Üí Light", "Thermal ‚Üí Electrical", "Chemical ‚Üí Light"],
                answer: "A",
                explanation: "Solar panels convert light energy from the sun into electrical energy."
            },
            {
                type: "energy_transformations",
                question: "What energy transformation occurs in a burning candle?",
                options: ["Chemical ‚Üí Light + Thermal", "Light ‚Üí Chemical + Thermal", "Thermal ‚Üí Chemical + Light", "Sound ‚Üí Light + Thermal"],
                answer: "A",
                explanation: "The wax (chemical energy) burns to produce light and heat (thermal energy)."
            },
            {
                type: "energy_transformations",
                question: "In a wind turbine, what energy transformation occurs?",
                options: ["Kinetic (wind) ‚Üí Mechanical ‚Üí Electrical", "Electrical ‚Üí Mechanical ‚Üí Kinetic", "Thermal ‚Üí Kinetic ‚Üí Electrical", "Chemical ‚Üí Mechanical ‚Üí Electrical"],
                answer: "A",
                explanation: "Wind (kinetic energy) turns the blades (mechanical) which generates electricity."
            },
            // Renewable vs Non-renewable Energy (61-80)
            {
                type: "energy_sources",
                question: "Which of these is a renewable energy source?",
                options: ["Solar energy", "Coal", "Natural gas", "Oil"],
                answer: "A",
                explanation: "Solar energy is renewable because the sun will continue to shine for billions of years."
            },
            {
                type: "energy_sources",
                question: "Which of these is a non-renewable energy source?",
                options: ["Coal", "Wind", "Solar", "Hydroelectric"],
                answer: "A",
                explanation: "Coal is a fossil fuel that takes millions of years to form, making it non-renewable."
            },
            {
                type: "energy_sources",
                question: "What is the original source of most energy on Earth?",
                options: ["The Sun", "The Earth's core", "The Moon", "Fossil fuels"],
                answer: "A",
                explanation: "The Sun is the original source of most energy on Earth, including fossil fuels (ancient plants), wind, and hydroelectric power."
            },
            {
                type: "energy_sources",
                question: "Which renewable energy source uses flowing water?",
                options: ["Hydroelectric", "Geothermal", "Biomass", "Solar"],
                answer: "A",
                explanation: "Hydroelectric power generates electricity from flowing or falling water."
            },
            {
                type: "energy_sources",
                question: "Which energy source comes from heat within the Earth?",
                options: ["Geothermal", "Solar", "Wind", "Biomass"],
                answer: "A",
                explanation: "Geothermal energy comes from heat within the Earth's crust."
            },
            // Practical Applications (81-100)
            {
                type: "practical_applications",
                question: "What type of energy does a stretched rubber band have?",
                options: ["Elastic potential energy", "Kinetic energy", "Chemical energy", "Thermal energy"],
                answer: "A",
                explanation: "A stretched rubber band has elastic potential energy because it can do work when released."
            },
            {
                type: "practical_applications",
                question: "When a book falls from a shelf, what energy transformation occurs?",
                options: ["Potential ‚Üí Kinetic", "Kinetic ‚Üí Potential", "Chemical ‚Üí Kinetic", "Thermal ‚Üí Kinetic"],
                answer: "A",
                explanation: "The book has potential energy on the shelf which converts to kinetic energy as it falls."
            },
            {
                type: "practical_applications",
                question: "What type of energy does food contain?",
                options: ["Chemical potential energy", "Kinetic energy", "Electrical energy", "Sound energy"],
                answer: "A",
                explanation: "Food contains chemical potential energy that our bodies convert to other forms."
            },
            {
                type: "practical_applications",
                question: "In a microphone, what energy transformation occurs?",
                options: ["Sound ‚Üí Electrical", "Electrical ‚Üí Sound", "Light ‚Üí Sound", "Thermal ‚Üí Sound"],
                answer: "A",
                explanation: "A microphone converts sound energy into electrical signals."
            },
            {
                type: "practical_applications",
                question: "What happens to energy in a system according to the Law of Conservation of Energy?",
                options: ["It changes form but the total amount stays the same", "It slowly disappears", "It increases over time", "It only exists in certain forms"],
                answer: "A",
                explanation: "Energy is conserved - it changes forms but the total amount in a closed system remains constant."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent energy knowledge!",
            "Perfect understanding of energy transformations!",
            "Great job identifying energy forms!",
            "Amazing! You're an energy expert!",
            "Perfect recall of energy concepts!",
            "You're a future physicist in the making!",
            "Outstanding science comprehension!",
            "Brilliant energy identification!",
            "You think like a scientist!",
            "Energy mastery achieved!"
        ];

        // Energy concepts
        const energyConcepts = [
            {
                name: "Energy Basics",
                description: "What energy is and how we measure it",
                icon: "‚ö°"
            },
            {
                name: "Energy Forms",
                description: "Different types of energy",
                icon: "üî•"
            },
            {
                name: "Energy Transformations",
                description: "How energy changes from one form to another",
                icon: "üîÑ"
            },
            {
                name: "Energy Sources",
                description: "Renewable vs non-renewable energy",
                icon: "üåç"
            },
            {
                name: "Conservation Law",
                description: "Energy cannot be created or destroyed",
                icon: "‚öñÔ∏è"
            }
        ];

        // Energy forms details
        const energyForms = [
            {
                name: "Kinetic Energy",
                definition: "Energy of motion",
                examples: "Running, flowing water, wind",
                formula: "KE = ¬Ω √ó mass √ó velocity¬≤",
                icon: "üèÉ",
                color: "#2196F3"
            },
            {
                name: "Potential Energy",
                definition: "Stored energy",
                examples: "Book on shelf, stretched spring, battery",
                formula: "PE = mass √ó gravity √ó height",
                icon: "üìö",
                color: "#9C27B0"
            },
            {
                name: "Thermal Energy",
                definition: "Heat energy",
                examples: "Fire, sunlight, body heat",
                formula: "Related to temperature",
                icon: "üî•",
                color: "#F44336"
            },
            {
                name: "Chemical Energy",
                definition: "Energy stored in chemical bonds",
                examples: "Food, batteries, fossil fuels",
                formula: "Released in chemical reactions",
                icon: "üîã",
                color: "#4CAF50"
            },
            {
                name: "Electrical Energy",
                definition: "Energy from moving electrons",
                examples: "Lightning, electricity in wires",
                formula: "Power √ó Time",
                icon: "‚ö°",
                color: "#FFC107"
            },
            {
                name: "Light Energy",
                definition: "Visible electromagnetic radiation",
                examples: "Sunlight, light bulbs, lasers",
                formula: "Travels at 300,000 km/s",
                icon: "üí°",
                color: "#FF9800"
            },
            {
                name: "Sound Energy",
                definition: "Energy from vibrating objects",
                examples: "Music, voices, thunder",
                formula: "Travels as waves through matter",
                icon: "üéµ",
                color: "#009688"
            },
            {
                name: "Nuclear Energy",
                definition: "Energy stored in atomic nuclei",
                examples: "Nuclear power, sun's energy",
                formula: "E = mc¬≤",
                icon: "‚ò¢Ô∏è",
                color: "#E91E63"
            }
        ];

        // Energy conversions
        const energyConversions = [
            {
                from: "Chemical",
                to: "Electrical + Light",
                example: "Battery in flashlight",
                device: "Flashlight"
            },
            {
                from: "Light",
                to: "Electrical",
                example: "Solar panels",
                device: "Solar Panel"
            },
            {
                from: "Chemical",
                to: "Thermal + Light",
                example: "Burning candle",
                device: "Candle"
            },
            {
                from: "Kinetic (wind)",
                to: "Electrical",
                example: "Wind turbines",
                device: "Wind Turbine"
            },
            {
                from: "Electrical",
                to: "Light + Thermal",
                example: "Light bulb",
                device: "Light Bulb"
            },
            {
                from: "Electrical",
                to: "Sound",
                example: "Speakers",
                device: "Speaker"
            },
            {
                from: "Sound",
                to: "Electrical",
                example: "Microphone",
                device: "Microphone"
            },
            {
                from: "Potential",
                to: "Kinetic",
                example: "Falling object",
                device: "Gravity"
            }
        ];

        // Renewable vs Non-renewable energy
        const energySources = {
            renewable: {
                name: "Renewable Energy",
                description: "Sources that can be replenished naturally",
                examples: "Solar, Wind, Hydroelectric, Geothermal, Biomass",
                advantages: "Sustainable, less pollution, unlimited supply",
                icon: "üå±",
                color: "#4CAF50"
            },
            nonRenewable: {
                name: "Non-Renewable Energy",
                description: "Sources that cannot be easily replenished",
                examples: "Coal, Oil, Natural Gas, Nuclear",
                advantages: "High energy density, reliable, established technology",
                icon: "‚õΩ",
                color: "#F44336"
            }
        };

        // Energy facts
        const energyFacts = [
            "The Sun produces enough energy in one second to power Earth for 500,000 years!",
            "A lightning bolt contains enough energy to power 150 million light bulbs!",
            "The human body converts food energy with about 25% efficiency!",
            "A single wind turbine can power up to 1,500 homes!",
            "Energy cannot be created or destroyed - only changed from one form to another!",
            "The first battery was invented in 1800 by Alessandro Volta!",
            "Plants convert only about 1-2% of sunlight into chemical energy!",
            "The word 'energy' comes from the Greek word 'energeia' meaning 'activity'!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceFact = document.getElementById('scienceFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6Energy');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6Energy', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6Energy_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6Energy_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're an energy expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent physics knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep exploring energy transformations!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review energy forms and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Understanding energy is key to understanding our universe!";
            }
        }

        // Create science fact display
        function createScienceFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'science-fact';
            
            factDiv.innerHTML = `<strong>Amazing Energy Fact:</strong> ${energyFacts[Math.floor(Math.random() * energyFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "basic_concepts": "‚ö°",
                "energy_forms": "üî•",
                "energy_transformations": "üîÑ",
                "energy_sources": "üåç",
                "practical_applications": "üí°"
            };
            
            let conceptName = "Energy Basics";
            let conceptIcon = "‚ö°";
            
            if (question.type.includes("basic_concepts")) {
                conceptName = "Energy Basics";
                conceptIcon = conceptIcons.basic_concepts;
            } else if (question.type.includes("energy_forms")) {
                conceptName = "Energy Forms";
                conceptIcon = conceptIcons.energy_forms;
            } else if (question.type.includes("energy_transformations")) {
                conceptName = "Energy Transformations";
                conceptIcon = conceptIcons.energy_transformations;
            } else if (question.type.includes("energy_sources")) {
                conceptName = "Energy Sources";
                conceptIcon = conceptIcons.energy_sources;
            } else if (question.type.includes("practical_applications")) {
                conceptName = "Practical Applications";
                conceptIcon = conceptIcons.practical_applications;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("basic_concepts")) {
                label.textContent = "What energy is and how we measure it";
            } else if (question.type.includes("energy_forms")) {
                label.textContent = "Different types of energy and their characteristics";
            } else if (question.type.includes("energy_transformations")) {
                label.textContent = "How energy changes from one form to another";
            } else if (question.type.includes("energy_sources")) {
                label.textContent = "Renewable vs non-renewable energy sources";
            } else if (question.type.includes("practical_applications")) {
                label.textContent = "Real-world examples of energy use and transformation";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create energy visualization
        function createEnergyVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-yellow);">Energy Forms & Transformations Explorer</h3>
                
                <div class="energy-display">
                    <div class="display-title">Current Energy Concept</div>
                    <div class="energy-container">
                        <div class="energy-scenario">${currentQuestion.question}</div>
                        <div class="energy-highlight">
                            <strong>Key Concept:</strong> <span class="highlight-text">${getEnergyConcept(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Energy Diagram -->
                <div class="energy-diagram" id="energyDiagram">
                    <!-- Energy diagram will be animated by JavaScript -->
                </div>
                <div style="text-align: center; margin-bottom: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                    Interactive Energy Transformation Model
                </div>
                
                <div class="forms-grid">
                    ${energyForms.map(form => `
                        <div class="form-card ${form.name.toLowerCase().split(' ')[0]}" style="border-color: ${form.color}" onclick="showEnergyFormDemo('${form.name}')">
                            <div class="form-icon" style="color: ${form.color}">${form.icon}</div>
                            <div class="form-title" style="color: ${form.color}">${form.name}</div>
                            <div class="form-definition">${form.definition}</div>
                            <div class="form-examples">
                                <strong>Examples:</strong> ${form.examples}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <table class="conversion-table">
                    <thead>
                        <tr>
                            <th>Input Energy</th>
                            <th>Output Energy</th>
                            <th>Example</th>
                            <th>Device</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${energyConversions.map(conversion => `
                            <tr>
                                <td style="font-weight: bold; color: var(--secondary-orange);">${conversion.from}</td>
                                <td style="color: var(--primary-yellow);">${conversion.to}</td>
                                <td style="font-size: 0.9rem;">${conversion.example}</td>
                                <td style="font-size: 0.8rem; color: var(--text-muted);">${conversion.device}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="conservation-container">
                    <div class="conservation-title">Law of Conservation of Energy</div>
                    <div class="conservation-content">
                        <div class="energy-balance">
                            <div style="font-size: 3rem; margin-bottom: 10px;">‚öñÔ∏è</div>
                            <div style="font-weight: bold; color: var(--accent-teal);">Energy In = Energy Out</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 10px;">
                                Energy cannot be created or destroyed, only changed from one form to another.
                            </div>
                        </div>
                        <div style="flex: 1; padding: 20px;">
                            <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px;">
                                <strong style="color: var(--accent-teal);">Example:</strong>
                                <div style="margin-top: 10px; font-size: 0.9rem;">
                                    A light bulb:<br>
                                    <span style="color: var(--secondary-orange);">100 J Electrical Energy</span> ‚Üí 
                                    <span style="color: var(--primary-yellow);">10 J Light Energy</span> + 
                                    <span style="color: var(--accent-red);">90 J Thermal Energy</span><br>
                                    <em style="font-size: 0.8rem;">Total energy is conserved (100 J = 10 J + 90 J)</em>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="energy-types-container">
                    <div class="energy-types-title">Renewable vs Non-Renewable Energy</div>
                    <div class="energy-types-grid">
                        <div class="energy-type-card renewable">
                            <div class="energy-type-icon">${energySources.renewable.icon}</div>
                            <div class="energy-type-name">${energySources.renewable.name}</div>
                            <div class="energy-type-list">
                                <strong>Examples:</strong> ${energySources.renewable.examples}<br>
                                <strong>Advantages:</strong> ${energySources.renewable.advantages}
                            </div>
                        </div>
                        <div class="energy-type-card non-renewable">
                            <div class="energy-type-icon">${energySources.nonRenewable.icon}</div>
                            <div class="energy-type-name">${energySources.nonRenewable.name}</div>
                            <div class="energy-type-list">
                                <strong>Examples:</strong> ${energySources.nonRenewable.examples}<br>
                                <strong>Advantages:</strong> ${energySources.nonRenewable.advantages}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="converter-container">
                    <div class="converter-title">Interactive Energy Converter</div>
                    <div class="converter-controls">
                        <select class="converter-select" id="fromEnergy">
                            <option value="">From Energy Type</option>
                            ${energyForms.map(form => `<option value="${form.name}">${form.name}</option>`).join('')}
                        </select>
                        <div style="color: var(--accent-purple); font-size: 1.5rem; display: flex; align-items: center;">‚Üí</div>
                        <select class="converter-select" id="toEnergy">
                            <option value="">To Energy Type</option>
                            ${energyForms.map(form => `<option value="${form.name}">${form.name}</option>`).join('')}
                        </select>
                        <button class="converter-btn" onclick="convertEnergy()">Convert</button>
                    </div>
                    <div class="converter-display" id="converterDisplay">
                        Select energy types and click Convert to see examples of energy transformations
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Energy Guide:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Energy = Ability to do work<br>
                        2. Measured in Joules (J)<br>
                        3. Two main types: Kinetic (motion) & Potential (stored)<br>
                        4. Energy can change forms but cannot be created or destroyed<br>
                        5. Renewable energy sources can be replenished
                    </div>
                </div>
                
                <div class="solution-container">
                    <div class="solution-title">Step-by-Step Learning Path</div>
                    <div class="solution-steps" id="solutionSteps">
                        ${generateLearningPath(currentQuestion)}
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-teal);">
                    <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Energy Learning Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Observe:</strong> Look for energy transformations in everyday life<br>
                        <strong>Classify:</strong> Identify energy forms in different situations<br>
                        <strong>Trace:</strong> Follow energy transformations from source to use<br>
                        <strong>Conserve:</strong> Understand why energy conservation is important<br>
                        <em>Energy is everywhere - understanding it helps us use it wisely!</em>
                    </div>
                </div>
            `;
            
            // Initialize energy diagram
            initializeEnergyDiagram();
            
            return vizDiv;
        }

        // Helper functions
        function getEnergyConcept(typeString) {
            const conceptMap = {
                "basic_concepts": "What energy is and how we measure it",
                "energy_forms": "Different types of energy",
                "energy_transformations": "Energy changing from one form to another",
                "energy_sources": "Where energy comes from",
                "practical_applications": "Real-world energy use"
            };
            
            return conceptMap[typeString] || "Energy Concepts";
        }

        function generateLearningPath(question) {
            let steps = [];
            
            if (question.type.includes("basic_concepts")) {
                steps = [
                    "Step 1: Understand what energy is (ability to do work)",
                    "Step 2: Recall the unit of measurement (Joules)",
                    "Step 3: Remember the Law of Conservation of Energy",
                    "Step 4: Apply these concepts to the question",
                    "Step 5: Select the most accurate answer"
                ];
            } else if (question.type.includes("energy_forms")) {
                steps = [
                    "Step 1: Identify which energy form is being described",
                    "Step 2: Recall characteristics of that energy form",
                    "Step 3: Compare with other energy forms",
                    "Step 4: Eliminate incorrect options",
                    "Step 5: Select the correct energy form"
                ];
            } else if (question.type.includes("energy_transformations")) {
                steps = [
                    "Step 1: Identify the starting energy form",
                    "Step 2: Identify the ending energy form(s)",
                    "Step 3: Trace the energy transformation",
                    "Step 4: Consider common examples",
                    "Step 5: Select the correct transformation sequence"
                ];
            } else {
                steps = [
                    "Step 1: Read the question carefully",
                    "Step 2: Identify key energy concepts involved",
                    "Step 3: Recall relevant energy principles",
                    "Step 4: Apply scientific reasoning",
                    "Step 5: Select the most accurate answer"
                ];
            }
            
            return steps.map((step, index) => `
                <div class="solution-step energy-reveal" style="animation-delay: ${index * 0.1}s">
                    <span class="step-number">${index + 1}</span>
                    <span class="step-description">${step}</span>
                    ${index === steps.length - 1 ? `
                        <div class="step-calculation">
                            <strong>Correct Answer:</strong> ${question.options[question.answer.charCodeAt(0) - 65]}
                        </div>
                        <div class="step-explanation">
                            ${question.explanation}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Global functions for interactive features
        window.showEnergyFormDemo = function(energyForm) {
            const energyDiagram = document.getElementById('energyDiagram');
            if (!energyDiagram) return;
            
            const form = energyForms.find(f => f.name === energyForm);
            if (!form) return;
            
            // Clear and show the selected energy form
            energyDiagram.innerHTML = '';
            
            const energyBall = document.createElement('div');
            energyBall.className = 'energy-source';
            energyBall.textContent = form.icon;
            energyBall.style.backgroundColor = form.color;
            energyBall.style.left = '50%';
            energyBall.style.top = '50%';
            energyBall.style.transform = 'translate(-50%, -50%)';
            energyBall.style.animation = 'pulse 2s infinite';
            
            energyDiagram.appendChild(energyBall);
            
            // Add label
            const label = document.createElement('div');
            label.style.position = 'absolute';
            label.style.bottom = '20px';
            label.style.left = '0';
            label.style.right = '0';
            label.style.textAlign = 'center';
            label.style.color = form.color;
            label.style.fontWeight = 'bold';
            label.innerHTML = `${form.name}<br><span style="font-size: 0.8rem;">${form.definition}</span>`;
            
            energyDiagram.appendChild(label);
        };

        window.convertEnergy = function() {
            const fromSelect = document.getElementById('fromEnergy');
            const toSelect = document.getElementById('toEnergy');
            const converterDisplay = document.getElementById('converterDisplay');
            
            if (!fromSelect || !toSelect || !converterDisplay) return;
            
            const fromEnergy = fromSelect.value;
            const toEnergy = toSelect.value;
            
            if (!fromEnergy || !toEnergy) {
                converterDisplay.innerHTML = "Please select both 'From' and 'To' energy types.";
                return;
            }
            
            // Find matching conversion examples
            const conversionExamples = {
                "Chemical to Electrical": "Battery powering a device",
                "Chemical to Light": "Glow stick, fireworks",
                "Chemical to Thermal": "Burning fuel, metabolism",
                "Light to Electrical": "Solar panels, solar calculators",
                "Light to Chemical": "Photosynthesis in plants",
                "Electrical to Light": "Light bulbs, LEDs",
                "Electrical to Sound": "Speakers, buzzers",
                "Electrical to Thermal": "Electric heater, toaster",
                "Electrical to Kinetic": "Electric motor, fan",
                "Kinetic to Electrical": "Wind turbine, hydroelectric dam",
                "Kinetic to Sound": "Clapping hands, drumming",
                "Kinetic to Thermal": "Rubbing hands together, brakes",
                "Potential to Kinetic": "Falling object, roller coaster",
                "Thermal to Kinetic": "Steam engine, hot air balloon",
                "Sound to Electrical": "Microphone, piezoelectric sensor"
            };
            
            const conversionKey = `${fromEnergy} to ${toEnergy}`;
            const reverseKey = `${toEnergy} to ${fromEnergy}`;
            
            let example = conversionExamples[conversionKey] || conversionExamples[reverseKey];
            
            if (example) {
                const fromForm = energyForms.find(f => f.name === fromEnergy);
                const toForm = energyForms.find(f => f.name === toEnergy);
                
                converterDisplay.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 10px;">
                            <span style="color: ${fromForm ? fromForm.color : '#FFF'}; font-weight: bold;">${fromEnergy}</span>
                            <span style="color: var(--accent-purple); margin: 0 10px;">‚Üí</span>
                            <span style="color: ${toForm ? toForm.color : '#FFF'}; font-weight: bold;">${toEnergy}</span>
                        </div>
                        <div style="font-size: 1.2rem; margin-bottom: 15px; color: var(--primary-yellow);">
                            Energy Transformation
                        </div>
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <strong>Example:</strong> ${example}
                        </div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 15px;">
                            <strong>Conservation of Energy:</strong> The total energy remains constant during this transformation.
                        </div>
                    </div>
                `;
            } else {
                converterDisplay.innerHTML = `
                    <div style="text-align: center; color: var(--text-secondary);">
                        <div style="margin-bottom: 10px;">Conversion from <strong>${fromEnergy}</strong> to <strong>${toEnergy}</strong></div>
                        <div>While this specific transformation might not be common, remember that energy can transform between many forms!</div>
                        <div style="margin-top: 10px; font-size: 0.9rem;">
                            Try: Chemical ‚Üí Electrical or Light ‚Üí Electrical for common examples.
                        </div>
                    </div>
                `;
            }
        };

        function initializeEnergyDiagram() {
            const energyDiagram = document.getElementById('energyDiagram');
            if (!energyDiagram) return;
            
            // Create a simple energy transformation diagram
            energyDiagram.innerHTML = `
                <!-- Chemical Energy (Battery) -->
                <div class="energy-source" style="background-color: #4CAF50; left: 20%; top: 50%; transform: translateY(-50%);">
                    üîã
                </div>
                
                <!-- Arrow -->
                <div class="energy-arrow" style="left: 30%; top: 50%; transform: translateY(-50%);">‚Üí</div>
                
                <!-- Electrical Energy -->
                <div class="energy-source" style="background-color: #FFC107; left: 40%; top: 50%; transform: translateY(-50%);">
                    ‚ö°
                </div>
                
                <!-- Arrow -->
                <div class="energy-arrow" style="left: 50%; top: 50%; transform: translateY(-50%);">‚Üí</div>
                
                <!-- Light Energy -->
                <div class="energy-source" style="background-color: #FF9800; left: 60%; top: 50%; transform: translateY(-50%);">
                    üí°
                </div>
                
                <!-- Labels -->
                <div style="position: absolute; top: 20px; left: 18%; color: #4CAF50; font-size: 0.8rem; font-weight: bold;">Chemical</div>
                <div style="position: absolute; top: 20px; left: 38%; color: #FFC107; font-size: 0.8rem; font-weight: bold;">Electrical</div>
                <div style="position: absolute; top: 20px; left: 58%; color: #FF9800; font-size: 0.8rem; font-weight: bold;">Light</div>
                
                <!-- Title -->
                <div style="position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                    Flashlight Energy Transformation
                </div>
            `;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceFact.appendChild(createScienceFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createEnergyVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin your energy journey!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
