<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 Math - Algebraic Expressions & Factorisation | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Algebra Theme */
        :root {
            --primary-blue: #2196F3;      /* Variables/Expressions */
            --primary-orange: #FF9800;    /* Simplification */
            --primary-green: #4CAF50;     /* Factorisation */
            --primary-purple: #9C27B0;    /* Formulas */
            --accent-yellow: #FFC107;     /* Operations */
            --accent-red: #F44336;        /* Common Mistakes */
            --accent-teal: #009688;       /* Step-by-step */
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --expression-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --factorisation-glow: 0 0 20px rgba(76, 175, 80, 0.4);
            --simplify-glow: 0 0 20px rgba(255, 152, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 152, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-orange), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary {
            background: var(--primary-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-secondary:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-accent {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-accent:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Math Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .topics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.expressions {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .topic-card.simplify {
            border-color: var(--primary-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .topic-card.factorisation {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.expressions .topic-title {
            color: var(--primary-blue);
        }

        .topic-card.simplify .topic-title {
            color: var(--primary-orange);
        }

        .topic-card.factorisation .topic-title {
            color: var(--primary-green);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--primary-orange), var(--primary-green));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
        }

        .math-fact {
            background: rgba(156, 39, 176, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-purple);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            font-family: 'Courier New', monospace;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: #4CAF50;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: #4CAF50;
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: #4CAF50;
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
            font-family: 'Courier New', monospace;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Expression Builder */
        .expression-builder {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .diagram-title {
            color: var(--accent-teal);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .builder-container {
            width: 100%;
            min-height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            padding: 15px;
        }

        .term-box {
            display: inline-block;
            padding: 8px 12px;
            margin: 5px;
            background: rgba(33, 150, 243, 0.2);
            border: 2px solid var(--primary-blue);
            border-radius: 6px;
            cursor: move;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
        }

        .operation-box {
            display: inline-block;
            padding: 8px 12px;
            margin: 5px;
            background: rgba(255, 152, 0, 0.2);
            border: 2px solid var(--primary-orange);
            border-radius: 6px;
            cursor: move;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
        }

        .expression-area {
            min-height: 60px;
            background: rgba(0, 0, 0, 0.2);
            border: 2px dashed var(--dark-border);
            border-radius: 6px;
            margin: 10px 0;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
        }

        .builder-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        /* Like Terms Combiner */
        .like-terms {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-orange);
        }

        .terms-container {
            width: 100%;
            height: 180px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            padding: 15px;
        }

        .term {
            display: inline-block;
            padding: 8px 12px;
            margin: 5px;
            background: rgba(255, 152, 0, 0.2);
            border: 2px solid var(--primary-orange);
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s ease;
        }

        .term:hover {
            transform: scale(1.1);
            background: rgba(255, 152, 0, 0.4);
        }

        .term.x { background: rgba(33, 150, 243, 0.2); border-color: var(--primary-blue); }
        .term.y { background: rgba(156, 39, 176, 0.2); border-color: var(--primary-purple); }
        .term.constant { background: rgba(76, 175, 80, 0.2); border-color: var(--primary-green); }

        .terms-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        /* Factorisation Visualizer */
        .factorisation-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .factor-container {
            width: 100%;
            height: 180px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            padding: 15px;
        }

        .factor-box {
            position: absolute;
            padding: 10px;
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid var(--primary-green);
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            text-align: center;
        }

        .factor-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        /* Algebra Formulas */
        .formulas-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .formula-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .formula-grid {
                grid-template-columns: 1fr;
            }
        }

        .formula-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary-purple);
        }

        .formula-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(156, 39, 176, 0.2);
        }

        .formula-title {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.95rem;
            color: var(--primary-purple);
        }

        .formula-equation {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .formula-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Step-by-step Examples */
        .examples-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .examples-grid {
                grid-template-columns: 1fr;
            }
        }

        .example-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .example-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-teal);
        }

        .example-card.expressions {
            border-left: 4px solid var(--primary-blue);
        }

        .example-card.simplify {
            border-left: 4px solid var(--primary-orange);
        }

        .example-card.factor {
            border-left: 4px solid var(--primary-green);
        }

        .example-title {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .example-card.expressions .example-title {
            color: var(--primary-blue);
        }

        .example-card.simplify .example-title {
            color: var(--primary-orange);
        }

        .example-card.factor .example-title {
            color: var(--primary-green);
        }

        .example-equation {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-orange), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-orange), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Practice Problems */
        .practice-problems {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            border: 2px solid var(--accent-yellow);
        }

        .problem-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .problem-list {
                grid-template-columns: 1fr;
            }
        }

        .problem-item {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .problem-item:hover {
            background: rgba(255, 193, 7, 0.1);
            transform: translateX(5px);
        }

        .problem-number {
            font-weight: bold;
            color: var(--accent-yellow);
            min-width: 25px;
        }

        .problem-text {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes combine {
            0% { transform: scale(1) translate(0, 0); opacity: 1; }
            100% { transform: scale(0.1) translate(50px, -20px); opacity: 0; }
        }

        .combining {
            animation: combine 0.5s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .formula-grid {
                grid-template-columns: 1fr;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .problem-list {
                grid-template-columns: 1fr;
            }
        }

        /* Math Symbol Styling */
        .math-symbol {
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .variable {
            color: var(--primary-blue);
            font-style: italic;
        }

        .coefficient {
            color: var(--primary-orange);
        }

        .constant {
            color: var(--primary-green);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 7 Math: Algebraic Expressions & Factorisation</h1>
            <p class="welcome-subtitle">Master the language of algebra! Learn to work with variables, simplify expressions, and factorise algebraic terms. Discover patterns, solve problems, and build a strong foundation for advanced mathematics.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ùë•¬≤ ‚ûï ùë¶¬≤</span>
                <span class="topic-name">Algebraic Expressions & Factorisation</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card expressions" onclick="showTopicDetails('expressions')">
                    <div class="topic-icon">ùëéùë• ‚ûï ùëè</div>
                    <h3 class="topic-title">Algebraic Expressions</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Combinations of variables, numbers, and operations</p>
                    <div class="topic-features">
                        <h4>Key Components:</h4>
                        <ul class="feature-list">
                            <li>Variables (x, y, z)</li>
                            <li>Coefficients (numbers)</li>
                            <li>Constants (numbers alone)</li>
                            <li>Operations (+, -, √ó, √∑)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card simplify" onclick="showTopicDetails('simplify')">
                    <div class="topic-icon">üî¢ ‚û°Ô∏è ‚ú®</div>
                    <h3 class="topic-title">Simplify Expressions</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Combine like terms and reduce complexity</p>
                    <div class="topic-features">
                        <h4>Key Skills:</h4>
                        <ul class="feature-list">
                            <li>Identify like terms</li>
                            <li>Combine coefficients</li>
                            <li>Follow order of operations</li>
                            <li>Remove parentheses</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card factorisation" onclick="showTopicDetails('factorisation')">
                    <div class="topic-icon">ùëéùëè ‚ûï ùëéùëê</div>
                    <h3 class="topic-title">Factorisation</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Breaking expressions into multiplied factors</p>
                    <div class="topic-features">
                        <h4>Key Methods:</h4>
                        <ul class="feature-list">
                            <li>Common factor method</li>
                            <li>Grouping method</li>
                            <li>Difference of squares</li>
                            <li>Trinomial factorisation</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üßÆ Begin Algebra Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="mathFact"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <div class="expression-builder">
                        <div class="diagram-title">Expression Builder</div>
                        <div class="builder-container">
                            <div class="term-box" draggable="true">3x</div>
                            <div class="term-box" draggable="true">2y</div>
                            <div class="term-box" draggable="true">5</div>
                            <div class="term-box" draggable="true">-4x</div>
                            <div class="term-box" draggable="true">7y</div>
                            <div class="term-box" draggable="true">-2</div>
                            <div class="operation-box" draggable="true">+</div>
                            <div class="operation-box" draggable="true">-</div>
                            <div class="operation-box" draggable="true">(</div>
                            <div class="operation-box" draggable="true">)</div>
                            
                            <div class="expression-area" id="expressionArea" ondragover="allowDrop(event)" ondrop="drop(event)">
                                Drop terms here to build expression
                            </div>
                        </div>
                        <div class="builder-controls">
                            <button class="btn btn-small btn-primary" onclick="simplifyExpression()">Simplify</button>
                            <button class="btn btn-small btn-secondary" onclick="evaluateExpression()">Evaluate</button>
                            <button class="btn btn-small btn-accent" onclick="clearExpression()">Clear</button>
                        </div>
                    </div>
                    
                    <div class="like-terms">
                        <div class="diagram-title">Combine Like Terms</div>
                        <div class="terms-container" id="termsContainer">
                            <!-- Terms will be added by JavaScript -->
                        </div>
                        <div class="terms-controls">
                            <button class="btn btn-small btn-secondary" onclick="addTerm('x')">Add x term</button>
                            <button class="btn btn-small btn-secondary" onclick="addTerm('y')">Add y term</button>
                            <button class="btn btn-small btn-accent" onclick="combineLikeTerms()">Combine</button>
                        </div>
                    </div>
                    
                    <div class="factorisation-visualizer">
                        <div class="diagram-title">Factorisation Visualizer</div>
                        <div class="factor-container" id="factorContainer">
                            <!-- Factor boxes will be added by JavaScript -->
                        </div>
                        <div class="factor-controls">
                            <button class="btn btn-small btn-accent" onclick="showCommonFactor()">Common Factor</button>
                            <button class="btn btn-small btn-accent" onclick="showGrouping()">Grouping Method</button>
                            <button class="btn btn-small btn-primary" onclick="showDifferenceSquares()">Difference of Squares</button>
                        </div>
                    </div>
                    
                    <div class="formulas-section">
                        <div class="diagram-title">Algebra Formulas</div>
                        <div class="formula-grid">
                            <div class="formula-card" onclick="showFormulaDetail('distributive')">
                                <div class="formula-title">Distributive Law</div>
                                <div class="formula-equation">a(b + c) = ab + ac</div>
                                <div class="formula-desc">Multiply each term inside parentheses</div>
                            </div>
                            <div class="formula-card" onclick="showFormulaDetail('commutative')">
                                <div class="formula-title">Commutative Law</div>
                                <div class="formula-equation">a + b = b + a</div>
                                <div class="formula-desc">Order doesn't matter for addition/multiplication</div>
                            </div>
                            <div class="formula-card" onclick="showFormulaDetail('associative')">
                                <div class="formula-title">Associative Law</div>
                                <div class="formula-equation">(a + b) + c = a + (b + c)</div>
                                <div class="formula-desc">Grouping doesn't matter for addition/multiplication</div>
                            </div>
                            <div class="formula-card" onclick="showFormulaDetail('difference_squares')">
                                <div class="formula-title">Difference of Squares</div>
                                <div class="formula-equation">a¬≤ - b¬≤ = (a + b)(a - b)</div>
                                <div class="formula-desc">Special factorisation pattern</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="examples-section">
                        <div class="diagram-title">Step-by-Step Examples</div>
                        <div class="examples-grid">
                            <div class="example-card expressions" onclick="showStepByStep('expression1')">
                                <div class="example-title">Building Expression</div>
                                <div class="example-equation">3x + 2y - x + 5</div>
                            </div>
                            <div class="example-card simplify" onclick="showStepByStep('simplify1')">
                                <div class="example-title">Simplifying</div>
                                <div class="example-equation">4x + 3x = 7x</div>
                            </div>
                            <div class="example-card factor" onclick="showStepByStep('factor1')">
                                <div class="example-title">Factorising</div>
                                <div class="example-equation">2x + 4 = 2(x + 2)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="practice-problems">
                        <div class="diagram-title">Quick Practice Problems</div>
                        <div class="problem-list">
                            <div class="problem-item" onclick="solveProblem(1)">
                                <div class="problem-number">1</div>
                                <div class="problem-text">Simplify: 3x + 5x - 2x</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(2)">
                                <div class="problem-number">2</div>
                                <div class="problem-text">Factorise: 6y + 9</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(3)">
                                <div class="problem-number">3</div>
                                <div class="problem-text">Combine: 2a + 3b - a + 4b</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(4)">
                                <div class="problem-number">4</div>
                                <div class="problem-text">Expand: 3(x + 4)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Algebra Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent Learning</div>
                    </div>
                </div>
                
                <div style="margin: 25px 0; padding: 15px; background: rgba(33, 150, 243, 0.1); border-radius: 10px;">
                    <h3 style="color: var(--primary-blue); margin-bottom: 10px;">Algebra Skills Checklist</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem;">
                        You've built essential algebra skills: working with variables, simplifying expressions, 
                        and factorisation. These are foundations for all higher mathematics!
                    </p>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Study Again</button>
                    <button class="btn btn-accent" id="viewTopics">Other Topics</button>
                    <button class="btn btn-secondary" onclick="showAlgebraChallenge()">Advanced Challenge</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Algebraic Expressions and Factorisation
        const questions = [
            {
                question: "What is the coefficient in the expression 5x + 3?",
                options: ["5", "x", "3", "+"],
                answer: "A",
                explanation: "The coefficient is the number multiplied by the variable, which is 5 in 5x."
            },
            {
                question: "What are 'like terms' in algebra?",
                options: ["Terms with same variables and exponents", "Terms with same coefficients", "Terms that look similar", "All terms in expression"],
                answer: "A",
                explanation: "Like terms have exactly the same variables raised to the same powers (e.g., 3x and 5x are like terms)."
            },
            {
                question: "Simplify: 2x + 3x + 5",
                options: ["5x + 5", "10x", "5x¬≤ + 5", "6x + 5"],
                answer: "A",
                explanation: "Combine like terms: 2x + 3x = 5x. The constant 5 remains unchanged."
            },
            {
                question: "What is the factorised form of 3x + 6?",
                options: ["3(x + 2)", "3x(1 + 2)", "(3x + 2)", "3(x + 6)"],
                answer: "A",
                explanation: "The common factor is 3. Divide both terms by 3: 3x √∑ 3 = x, 6 √∑ 3 = 2. So 3(x + 2)."
            },
            {
                question: "Expand: 4(2x - 3)",
                options: ["8x - 12", "8x - 3", "6x - 7", "2x - 12"],
                answer: "A",
                explanation: "Distribute 4 to both terms: 4 √ó 2x = 8x, 4 √ó (-3) = -12. So 8x - 12."
            },
            {
                question: "Which expression represents 'twice a number plus five'?",
                options: ["2x + 5", "x¬≤ + 5", "2(x + 5)", "x + 2 √ó 5"],
                answer: "A",
                explanation: "'Twice a number' is 2x, 'plus five' is +5, so 2x + 5."
            },
            {
                question: "Simplify: 5a + 3b - 2a + b",
                options: ["3a + 4b", "7a + 4b", "3a + 2b", "7a + 2b"],
                answer: "A",
                explanation: "Combine like terms: 5a - 2a = 3a, 3b + b = 4b. So 3a + 4b."
            },
            {
                question: "What is the greatest common factor of 8x¬≤ and 12x?",
                options: ["4x", "2x", "8x", "4"],
                answer: "A",
                explanation: "GCF of coefficients: 8 and 12 is 4. Variables: x¬≤ and x share x. So GCF is 4x."
            },
            {
                question: "Factorise completely: 2x¬≤ + 4x",
                options: ["2x(x + 2)", "x(2x + 4)", "2(x¬≤ + 2x)", "4x(0.5x + 1)"],
                answer: "A",
                explanation: "Common factor is 2x. 2x¬≤ √∑ 2x = x, 4x √∑ 2x = 2. So 2x(x + 2)."
            },
            {
                question: "Simplify: (3x + 4) + (2x - 1)",
                options: ["5x + 3", "5x + 5", "x + 3", "6x + 3"],
                answer: "A",
                explanation: "Remove parentheses and combine: 3x + 2x = 5x, 4 + (-1) = 3. So 5x + 3."
            },
            {
                question: "What is the value of 3x - 5 when x = 4?",
                options: ["7", "17", "2", "12"],
                answer: "A",
                explanation: "Substitute x = 4: 3(4) - 5 = 12 - 5 = 7."
            },
            {
                question: "Which terms are like terms with 5xy?",
                options: ["-2xy", "5x", "5y", "x¬≤y"],
                answer: "A",
                explanation: "Like terms have same variables with same exponents. Only -2xy has exactly x and y (both to power 1)."
            },
            {
                question: "Expand and simplify: 2(x + 3) + 3(x - 1)",
                options: ["5x + 3", "5x + 9", "6x + 3", "2x + 9"],
                answer: "A",
                explanation: "Expand: 2x + 6 + 3x - 3 = 5x + 3."
            },
            {
                question: "Factorise: 15 - 5y",
                options: ["5(3 - y)", "5(y - 3)", "3(5 - y)", "y(15 - 5)"],
                answer: "A",
                explanation: "Common factor is 5. 15 √∑ 5 = 3, -5y √∑ 5 = -y. So 5(3 - y)."
            },
            {
                question: "Simplify: 7a - 3a + 2a",
                options: ["6a", "12a", "2a", "5a"],
                answer: "A",
                explanation: "All are like terms: 7 - 3 + 2 = 6, so 6a."
            },
            {
                question: "What does 'factorise' mean?",
                options: ["Write as product of factors", "Make expression longer", "Find value of variable", "Add terms together"],
                answer: "A",
                explanation: "Factorisation is rewriting an expression as a multiplication of simpler expressions."
            },
            {
                question: "Simplify: 4(2x + 1) - 3(x - 2)",
                options: ["5x + 10", "5x - 2", "11x + 10", "11x - 2"],
                answer: "A",
                explanation: "Expand: 8x + 4 - 3x + 6 = 5x + 10."
            },
            {
                question: "Factorise using grouping: ax + ay + bx + by",
                options: ["(a + b)(x + y)", "(a + x)(b + y)", "(a + y)(b + x)", "Cannot be factorised"],
                answer: "A",
                explanation: "Group: (ax + ay) + (bx + by) = a(x + y) + b(x + y) = (a + b)(x + y)."
            },
            {
                question: "What is 3x √ó 4x?",
                options: ["12x¬≤", "7x", "12x", "7x¬≤"],
                answer: "A",
                explanation: "Multiply coefficients: 3 √ó 4 = 12. Multiply variables: x √ó x = x¬≤. So 12x¬≤."
            },
            {
                question: "Simplify: x + x + x + x",
                options: ["4x", "x‚Å¥", "4", "x + 4"],
                answer: "A",
                explanation: "Adding x four times gives 4x (like 1x + 1x + 1x + 1x = 4x)."
            },
            {
                question: "Factorise: x¬≤ - 9",
                options: ["(x + 3)(x - 3)", "(x - 3)¬≤", "(x + 9)(x - 1)", "Cannot be factorised"],
                answer: "A",
                explanation: "Difference of squares: x¬≤ - 9 = x¬≤ - 3¬≤ = (x + 3)(x - 3)."
            },
            {
                question: "What is the constant term in 2x¬≤ - 3x + 7?",
                options: ["7", "2", "-3", "0"],
                answer: "A",
                explanation: "The constant term is the term without a variable, which is 7."
            },
            {
                question: "Simplify: 5 - (2x - 3)",
                options: ["8 - 2x", "2 - 2x", "5 - 2x + 3", "2x + 8"],
                answer: "A",
                explanation: "Distribute negative: 5 - 2x + 3 = 8 - 2x."
            },
            {
                question: "Factorise completely: 6x¬≤y + 9xy¬≤",
                options: ["3xy(2x + 3y)", "3x(2xy + 3y¬≤)", "xy(6x + 9y)", "3(2x¬≤y + 3xy¬≤)"],
                answer: "A",
                explanation: "GCF is 3xy. 6x¬≤y √∑ 3xy = 2x, 9xy¬≤ √∑ 3xy = 3y. So 3xy(2x + 3y)."
            },
            {
                question: "What is algebra?",
                options: ["Mathematics using symbols and letters", "Only about solving equations", "Advanced arithmetic", "Geometry with numbers"],
                answer: "A",
                explanation: "Algebra is a branch of mathematics that uses symbols (usually letters) to represent numbers and quantities in formulas and equations."
            }
        ];

        // Math facts
        const mathFacts = [
            "The word 'algebra' comes from the Arabic word 'al-jabr' meaning 'reunion of broken parts'.",
            "The equals sign (=) was invented in 1557 by Welsh mathematician Robert Recorde.",
            "In algebra, letters used as variables can represent unknown values or values that can change.",
            "The distributive property is key to expanding expressions: a(b + c) = ab + ac.",
            "Ancient Babylonians were solving algebraic equations as early as 2000 BC!",
            "The highest power in an algebraic expression determines its degree (x¬≤ is degree 2).",
            "Like terms must have exactly the same variables with the same exponents.",
            "Factorisation is the reverse process of expanding expressions."
        ];

        // Topic details
        const topicDetails = {
            expressions: {
                title: "Algebraic Expressions",
                info: "Mathematical phrases containing numbers, variables, and operations."
            },
            simplify: {
                title: "Simplifying Expressions",
                info: "Combining like terms and reducing expressions to simplest form."
            },
            factorisation: {
                title: "Factorisation",
                info: "Breaking expressions into multiplied factors (reverse of expanding)."
            }
        };

        // Algebra formulas
        const formulas = {
            distributive: {
                title: "Distributive Law",
                equation: "a(b + c) = ab + ac",
                explanation: "Multiply each term inside parentheses by the factor outside. Also works with subtraction: a(b - c) = ab - ac."
            },
            commutative: {
                title: "Commutative Laws",
                equation: "a + b = b + a  and  a √ó b = b √ó a",
                explanation: "Order doesn't matter for addition and multiplication (but does matter for subtraction and division)."
            },
            associative: {
                title: "Associative Laws",
                equation: "(a + b) + c = a + (b + c)  and  (a √ó b) √ó c = a √ó (b √ó c)",
                explanation: "Grouping doesn't matter for addition and multiplication."
            },
            difference_squares: {
                title: "Difference of Squares",
                equation: "a¬≤ - b¬≤ = (a + b)(a - b)",
                explanation: "Special pattern for factorising the difference between two perfect squares."
            }
        };

        // Step-by-step examples
        const stepExamples = {
            expression1: {
                title: "Building Expression: 3x + 2y - x + 5",
                steps: [
                    "Step 1: Identify like terms (terms with same variables)",
                    "Step 2: Group like terms: (3x - x) + 2y + 5",
                    "Step 3: Combine coefficients: 3x - x = 2x",
                    "Step 4: Write simplified expression: 2x + 2y + 5"
                ]
            },
            simplify1: {
                title: "Simplifying: 4x + 3x = 7x",
                steps: [
                    "Step 1: Check if terms are like terms (both have 'x')",
                    "Step 2: Add the coefficients: 4 + 3 = 7",
                    "Step 3: Keep the variable part: x",
                    "Step 4: Write result: 7x"
                ]
            },
            factor1: {
                title: "Factorising: 2x + 4 = 2(x + 2)",
                steps: [
                    "Step 1: Find common factor of both terms",
                    "Step 2: 2x and 4 share common factor 2",
                    "Step 3: Divide each term by 2: 2x √∑ 2 = x, 4 √∑ 2 = 2",
                    "Step 4: Write as product: 2 √ó (x + 2) = 2(x + 2)"
                ]
            }
        };

        // Practice problems with solutions
        const practiceProblems = {
            1: {
                problem: "Simplify: 3x + 5x - 2x",
                solution: "All are like terms. Add coefficients: 3 + 5 - 2 = 6. Answer: 6x"
            },
            2: {
                problem: "Factorise: 6y + 9",
                solution: "Common factor is 3. Divide: 6y √∑ 3 = 2y, 9 √∑ 3 = 3. Answer: 3(2y + 3)"
            },
            3: {
                problem: "Combine: 2a + 3b - a + 4b",
                solution: "Like terms: (2a - a) + (3b + 4b) = a + 7b. Answer: a + 7b"
            },
            4: {
                problem: "Expand: 3(x + 4)",
                solution: "Distribute 3: 3 √ó x = 3x, 3 √ó 4 = 12. Answer: 3x + 12"
            }
        };

        // Factorisation examples
        const factorisationExamples = {
            common: {
                expression: "4x + 8",
                steps: "Common factor is 4. 4x √∑ 4 = x, 8 √∑ 4 = 2. Result: 4(x + 2)"
            },
            grouping: {
                expression: "ax + ay + bx + by",
                steps: "Group: (ax + ay) + (bx + by) = a(x + y) + b(x + y) = (a + b)(x + y)"
            },
            difference: {
                expression: "x¬≤ - 16",
                steps: "Difference of squares: x¬≤ - 4¬≤ = (x + 4)(x - 4)"
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentExpression: "",
            terms: []
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathFact = document.getElementById('mathFact');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const expressionArea = document.getElementById('expressionArea');
        const termsContainer = document.getElementById('termsContainer');
        const factorContainer = document.getElementById('factorContainer');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            initializeDragAndDrop();
            initializeTerms();
            initializeFactorisation();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other math topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're an algebra expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand algebraic expressions and factorisation well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of algebra concepts!";
            } else {
                scoreMessage.textContent = "Keep practicing! Algebra takes time to master - try again!";
            }
        }

        // Create math fact display
        function createMathFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'math-fact';
            factDiv.innerHTML = `<strong>Algebra Fact:</strong> ${mathFacts[Math.floor(Math.random() * mathFacts.length)]}`;
            return factDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathFact.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathFact.appendChild(createMathFact());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying algebra!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Interactive functions
        window.showTopicDetails = function(topic) {
            const topicInfo = topicDetails[topic];
            if (!topicInfo) return;
            
            let info = `${topicInfo.title}\n\n`;
            info += `${topicInfo.info}\n\n`;
            
            if (topic === 'expressions') {
                info += "Examples:\n";
                info += "‚Ä¢ 3x + 5 (binomial)\n";
                info += "‚Ä¢ 2x¬≤ - 4x + 1 (trinomial)\n";
                info += "‚Ä¢ 7y (monomial)\n\n";
                info += "Parts of Expression:\n";
                info += "‚Ä¢ Variable: Letter representing unknown\n";
                info += "‚Ä¢ Coefficient: Number multiplying variable\n";
                info += "‚Ä¢ Constant: Number without variable\n";
                info += "‚Ä¢ Term: Part separated by + or -";
            } else if (topic === 'simplify') {
                info += "Steps to Simplify:\n";
                info += "1. Remove parentheses (distribute)\n";
                info += "2. Combine like terms\n";
                info += "3. Arrange in standard form\n\n";
                info += "Example:\n";
                info += "2x + 3 + 4x - 1 = 6x + 2";
            } else if (topic === 'factorisation') {
                info += "Factorisation Methods:\n";
                info += "1. Common Factor: ab + ac = a(b + c)\n";
                info += "2. Grouping: ax + ay + bx + by = (a + b)(x + y)\n";
                info += "3. Difference of Squares: a¬≤ - b¬≤ = (a + b)(a - b)\n";
                info += "4. Trinomials: x¬≤ + 5x + 6 = (x + 2)(x + 3)";
            }
            
            alert(info);
        };

        // Drag and drop for expression builder
        function initializeDragAndDrop() {
            const draggables = document.querySelectorAll('.term-box, .operation-box');
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.textContent);
                    this.style.opacity = '0.5';
                });
                draggable.addEventListener('dragend', function() {
                    this.style.opacity = '1';
                });
            });
        }

        function allowDrop(e) {
            e.preventDefault();
        }

        function drop(e) {
            e.preventDefault();
            const data = e.dataTransfer.getData('text/plain');
            
            if (expressionArea.textContent === "Drop terms here to build expression") {
                expressionArea.textContent = data;
                appState.currentExpression = data;
            } else {
                expressionArea.textContent += " " + data;
                appState.currentExpression += " " + data;
            }
        }

        window.clearExpression = function() {
            expressionArea.textContent = "Drop terms here to build expression";
            appState.currentExpression = "";
        };

        window.simplifyExpression = function() {
            if (!appState.currentExpression || appState.currentExpression === "Drop terms here to build expression") {
                alert("Build an expression first by dragging terms!");
                return;
            }
            
            // Simple simplification for demo
            const expr = appState.currentExpression;
            let result = expr;
            
            // Remove extra spaces and simplify common patterns
            result = result.replace(/\s+/g, '');
            
            if (result.includes("3x+2x")) {
                result = result.replace("3x+2x", "5x");
            }
            if (result.includes("5-2")) {
                result = result.replace("5-2", "3");
            }
            if (result.includes("(+)") || result.includes("(-)")) {
                result = result.replace("(+)", "+").replace("(-)", "-");
            }
            
            alert(`Expression: ${expr}\n\nSimplified: ${result}\n\n(Note: This is a basic demonstration. Real simplification would require full algebraic processing.)`);
        };

        window.evaluateExpression = function() {
            if (!appState.currentExpression || appState.currentExpression === "Drop terms here to build expression") {
                alert("Build an expression first by dragging terms!");
                return;
            }
            
            const x = prompt("Enter a value for x:", "2");
            const y = prompt("Enter a value for y:", "3");
            
            if (x && y && !isNaN(x) && !isNaN(y)) {
                // Simple evaluation for demo
                const expr = appState.currentExpression;
                let result = 0;
                
                if (expr.includes("3x")) result += 3 * parseFloat(x);
                if (expr.includes("2y")) result += 2 * parseFloat(y);
                if (expr.includes("5")) result += 5;
                if (expr.includes("-4x")) result -= 4 * parseFloat(x);
                if (expr.includes("7y")) result += 7 * parseFloat(y);
                if (expr.includes("-2")) result -= 2;
                
                alert(`For x = ${x}, y = ${y}\nExpression: ${expr}\n\nResult: ${result}`);
            }
        };

        // Like terms combiner
        function initializeTerms() {
            const initialTerms = [
                { type: 'x', value: '3x', coefficient: 3 },
                { type: 'x', value: '2x', coefficient: 2 },
                { type: 'y', value: '5y', coefficient: 5 },
                { type: 'y', value: 'y', coefficient: 1 },
                { type: 'constant', value: '4', coefficient: 4 },
                { type: 'constant', value: '-2', coefficient: -2 }
            ];
            
            appState.terms = [...initialTerms];
            renderTerms();
        }

        function renderTerms() {
            termsContainer.innerHTML = '';
            appState.terms.forEach((term, index) => {
                const termElement = document.createElement('div');
                termElement.className = `term ${term.type}`;
                termElement.textContent = term.value;
                termElement.dataset.index = index;
                termElement.onclick = () => selectTerm(index);
                termsContainer.appendChild(termElement);
            });
        }

        function selectTerm(index) {
            const termElement = termsContainer.children[index];
            termElement.classList.toggle('selected');
        }

        window.addTerm = function(type) {
            let value, coefficient;
            
            if (type === 'x') {
                coefficient = Math.floor(Math.random() * 5) + 1;
                value = coefficient + 'x';
            } else if (type === 'y') {
                coefficient = Math.floor(Math.random() * 5) + 1;
                value = coefficient + 'y';
            }
            
            appState.terms.push({ type, value, coefficient });
            renderTerms();
        };

        window.combineLikeTerms = function() {
            const selected = document.querySelectorAll('.term.selected');
            if (selected.length < 2) {
                alert("Select at least 2 like terms to combine!");
                return;
            }
            
            const indices = Array.from(selected).map(el => parseInt(el.dataset.index));
            const firstTerm = appState.terms[indices[0]];
            const sameType = indices.every(i => appState.terms[i].type === firstTerm.type);
            
            if (!sameType) {
                alert("Can only combine like terms (terms with same variable)!");
                return;
            }
            
            // Calculate sum of coefficients
            let totalCoefficient = 0;
            indices.forEach(i => {
                totalCoefficient += appState.terms[i].coefficient;
            });
            
            // Remove selected terms
            indices.sort((a, b) => b - a); // Remove from end to beginning
            indices.forEach(i => {
                appState.terms.splice(i, 1);
            });
            
            // Add combined term
            let newValue;
            if (firstTerm.type === 'constant') {
                newValue = totalCoefficient.toString();
            } else {
                newValue = totalCoefficient + firstTerm.type;
                if (totalCoefficient === 1) newValue = firstTerm.type;
                if (totalCoefficient === -1) newValue = '-' + firstTerm.type;
            }
            
            appState.terms.push({
                type: firstTerm.type,
                value: newValue,
                coefficient: totalCoefficient
            });
            
            renderTerms();
            alert(`Combined like terms: Result is ${newValue}`);
        };

        // Factorisation visualizer
        function initializeFactorisation() {
            // Clear and setup factor container
            factorContainer.innerHTML = '';
            
            // Add some initial factor boxes
            const expressions = [
                { text: "2x + 4", top: "20%", left: "10%", type: "expression" },
                { text: "3(x + 2)", top: "60%", left: "60%", type: "factorised" }
            ];
            
            expressions.forEach(expr => {
                const box = document.createElement('div');
                box.className = 'factor-box';
                box.textContent = expr.text;
                box.style.top = expr.top;
                box.style.left = expr.left;
                box.dataset.type = expr.type;
                factorContainer.appendChild(box);
            });
        }

        window.showCommonFactor = function() {
            factorContainer.innerHTML = '';
            
            // Show common factor example
            const box1 = document.createElement('div');
            box1.className = 'factor-box';
            box1.textContent = "6x + 9";
            box1.style.top = "30%";
            box1.style.left = "20%";
            box1.style.width = "80px";
            factorContainer.appendChild(box1);
            
            const arrow = document.createElement('div');
            arrow.textContent = "‚Üí";
            arrow.style.position = "absolute";
            arrow.style.top = "50%";
            arrow.style.left = "50%";
            arrow.style.transform = "translate(-50%, -50%)";
            arrow.style.fontSize = "1.5rem";
            arrow.style.color = "var(--primary-green)";
            factorContainer.appendChild(arrow);
            
            const box2 = document.createElement('div');
            box2.className = 'factor-box';
            box2.textContent = "3(2x + 3)";
            box2.style.top = "30%";
            box2.style.left = "60%";
            box2.style.width = "100px";
            factorContainer.appendChild(box2);
            
            setTimeout(() => {
                alert("Common Factor Method:\n\n1. Find GCF of coefficients: GCF of 6 and 9 is 3\n2. Divide each term by 3: 6x √∑ 3 = 2x, 9 √∑ 3 = 3\n3. Write as product: 3(2x + 3)");
            }, 500);
        };

        window.showGrouping = function() {
            factorContainer.innerHTML = '';
            
            const box1 = document.createElement('div');
            box1.className = 'factor-box';
            box1.textContent = "ax + ay + bx + by";
            box1.style.top = "30%";
            box1.style.left = "10%";
            box1.style.width = "150px";
            factorContainer.appendChild(box1);
            
            const arrow = document.createElement('div');
            arrow.textContent = "‚Üí";
            arrow.style.position = "absolute";
            arrow.style.top = "50%";
            arrow.style.left = "50%";
            arrow.style.transform = "translate(-50%, -50%)";
            arrow.style.fontSize = "1.5rem";
            arrow.style.color = "var(--primary-green)";
            factorContainer.appendChild(arrow);
            
            const box2 = document.createElement('div');
            box2.className = 'factor-box';
            box2.textContent = "(a + b)(x + y)";
            box2.style.top = "30%";
            box2.style.left = "60%";
            box2.style.width = "100px";
            factorContainer.appendChild(box2);
            
            setTimeout(() => {
                alert("Grouping Method:\n\n1. Group terms: (ax + ay) + (bx + by)\n2. Factor each group: a(x + y) + b(x + y)\n3. Common factor (x + y): (a + b)(x + y)");
            }, 500);
        };

        window.showDifferenceSquares = function() {
            factorContainer.innerHTML = '';
            
            const box1 = document.createElement('div');
            box1.className = 'factor-box';
            box1.textContent = "x¬≤ - 16";
            box1.style.top = "30%";
            box1.style.left = "20%";
            box1.style.width = "80px";
            factorContainer.appendChild(box1);
            
            const arrow = document.createElement('div');
            arrow.textContent = "‚Üí";
            arrow.style.position = "absolute";
            arrow.style.top = "50%";
            arrow.style.left = "50%";
            arrow.style.transform = "translate(-50%, -50%)";
            arrow.style.fontSize = "1.5rem";
            arrow.style.color = "var(--primary-green)";
            factorContainer.appendChild(arrow);
            
            const box2 = document.createElement('div');
            box2.className = 'factor-box';
            box2.textContent = "(x + 4)(x - 4)";
            box2.style.top = "30%";
            box2.style.left = "60%";
            box2.style.width = "120px";
            factorContainer.appendChild(box2);
            
            setTimeout(() => {
                alert("Difference of Squares:\n\nPattern: a¬≤ - b¬≤ = (a + b)(a - b)\n\nx¬≤ - 16 = x¬≤ - 4¬≤\n= (x + 4)(x - 4)");
            }, 500);
        };

        // Formula details
        window.showFormulaDetail = function(formula) {
            const formulaInfo = formulas[formula];
            if (!formulaInfo) return;
            
            let info = `${formulaInfo.title}\n\n`;
            info += `Formula: ${formulaInfo.equation}\n\n`;
            info += `Explanation: ${formulaInfo.explanation}\n\n`;
            
            if (formula === 'distributive') {
                info += "Example:\n";
                info += "3(x + 4) = 3√óx + 3√ó4 = 3x + 12";
            } else if (formula === 'difference_squares') {
                info += "Example:\n";
                info += "9x¬≤ - 25 = (3x)¬≤ - 5¬≤ = (3x + 5)(3x - 5)";
            }
            
            alert(info);
        };

        // Step-by-step examples
        window.showStepByStep = function(example) {
            const exampleInfo = stepExamples[example];
            if (!exampleInfo) return;
            
            let info = `${exampleInfo.title}\n\n`;
            exampleInfo.steps.forEach(step => {
                info += `${step}\n`;
            });
            
            alert(info);
        };

        // Practice problems
        window.solveProblem = function(problemNum) {
            const problem = practiceProblems[problemNum];
            if (!problem) return;
            
            const answer = prompt(`Solve: ${problem.problem}\n\nEnter your answer:`);
            if (answer) {
                const simplifiedAnswer = answer.replace(/\s+/g, '');
                const expectedAnswer = problem.solution.split("Answer: ")[1].replace(/\s+/g, '');
                
                if (simplifiedAnswer === expectedAnswer) {
                    alert(`‚úÖ Correct!\n\n${problem.solution}`);
                } else {
                    alert(`‚ùå Not quite right.\n\nCorrect solution:\n${problem.solution}`);
                }
            }
        };

        // Advanced challenge
        window.showAlgebraChallenge = function() {
            const challenges = [
                "Challenge 1: Simplify 2(3x - 4) + 3(x + 5)",
                "Challenge 2: Factorise completely: 12x¬≤y - 18xy¬≤",
                "Challenge 3: If a = 3 and b = -2, find the value of 2a¬≤ - 3ab + b¬≤",
                "Challenge 4: Expand and simplify: (x + 3)(x - 2)"
            ];
            
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            let info = "üß† Algebra Challenge üß†\n\n";
            info += randomChallenge + "\n\n";
            info += "Take your time to solve it. Remember your algebra rules!\n\n";
            info += "Solutions:\n";
            info += "1. 6x - 8 + 3x + 15 = 9x + 7\n";
            info += "2. 6xy(2x - 3y)\n";
            info += "3. 2(9) - 3(3)(-2) + 4 = 18 + 18 + 4 = 40\n";
            info += "4. x¬≤ - 2x + 3x - 6 = x¬≤ + x - 6";
            
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
