<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 Science - Human Body Systems | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Human Body Theme */
        :root {
            --primary-red: #F44336;
            --secondary-blue: #2196F3;
            --accent-green: #4CAF50;
            --accent-orange: #FF9800;
            --accent-purple: #9C27B0;
            --accent-yellow: #FFC107;
            --accent-teal: #009688;
            --accent-pink: #E91E63;
            --accent-indigo: #3F51B5;
            --dark-bg: #0A1929;
            --dark-surface: #1A2938;
            --dark-card: #233044;
            --dark-border: #334455;
            --text-primary: #FFFFFF;
            --text-secondary: #B0BEC5;
            --text-muted: #78909C;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(244, 67, 54, 0.3);
            --respiratory-glow: 0 0 15px rgba(33, 150, 243, 0.4);
            --circulatory-glow: 0 0 15px rgba(244, 67, 54, 0.4);
            --digestive-glow: 0 0 15px rgba(76, 175, 80, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Body Systems Pattern Background */
        .body-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(244, 67, 54, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(33, 150, 243, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(76, 175, 80, 0.1) 0%, transparent 50%);
            opacity: 0.3;
        }

        .floating-organ {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 3rem;
            font-weight: bold;
            animation: floatOrgan 20s linear infinite;
        }

        @keyframes floatOrgan {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 25, 41, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-red), var(--secondary-blue), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(244, 67, 54, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-red);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-red);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-red);
            box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-red);
            color: white;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
        }

        .btn-primary:hover {
            background: #D32F2F;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(244, 67, 54, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-success {
            background: var(--accent-green);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-success:hover {
            background: #388E3C;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-red);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-red), var(--secondary-blue), var(--accent-green));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(244, 67, 54, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-red), var(--secondary-blue), var(--accent-green));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-red);
            background: rgba(244, 67, 54, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--primary-red);
            color: var(--primary-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-blue);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--primary-red);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid var(--primary-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--primary-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--primary-red);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Body System Display */
        .system-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--secondary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .system-container {
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-orange);
        }

        .system-scenario {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .system-highlight {
            background: rgba(255, 152, 0, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid var(--accent-orange);
        }

        .highlight-text {
            color: var(--accent-orange);
            font-weight: bold;
        }

        /* Body System Diagrams */
        .body-diagram {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 12px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--secondary-blue);
        }

        /* Respiratory System Elements */
        .lungs {
            position: absolute;
            width: 80px;
            height: 120px;
            background: var(--secondary-blue);
            border-radius: 40px;
            opacity: 0.8;
        }

        .trachea {
            position: absolute;
            width: 30px;
            height: 60px;
            background: var(--secondary-blue);
            border-radius: 15px;
        }

        .bronchi {
            position: absolute;
            width: 20px;
            height: 40px;
            background: var(--secondary-blue);
            border-radius: 10px;
        }

        /* Circulatory System Elements */
        .heart {
            position: absolute;
            width: 60px;
            height: 60px;
            background: var(--primary-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(244, 67, 54, 0.5);
        }

        .blood-vessel {
            position: absolute;
            background: var(--primary-red);
            border-radius: 5px;
        }

        /* Digestive System Elements */
        .stomach {
            position: absolute;
            width: 70px;
            height: 50px;
            background: var(--accent-green);
            border-radius: 35px 35px 10px 10px;
        }

        .intestine {
            position: absolute;
            width: 100px;
            height: 20px;
            background: var(--accent-green);
            border-radius: 10px;
        }

        /* Step-by-Step Solution */
        .solution-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--secondary-blue);
        }

        .solution-title {
            color: var(--secondary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .solution-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .solution-step {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary-blue);
            transition: transform 0.3s ease;
        }

        .solution-step:hover {
            transform: translateX(5px);
        }

        .step-number {
            display: inline-block;
            background: var(--secondary-blue);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            margin-right: 10px;
            font-weight: bold;
        }

        .step-description {
            display: inline;
            color: var(--text-primary);
        }

        .step-calculation {
            margin-top: 10px;
            padding: 10px;
            background: var(--dark-bg);
            border-radius: 6px;
            color: var(--accent-teal);
            font-family: monospace;
            font-size: 1.1rem;
            overflow-x: auto;
        }

        .step-explanation {
            margin-top: 5px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Body Systems Grid */
        .systems-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .systems-grid {
                grid-template-columns: 1fr;
            }
        }

        .system-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .system-card:hover {
            transform: translateY(-5px);
        }

        .system-card.respiratory {
            border-color: var(--secondary-blue);
        }

        .system-card.circulatory {
            border-color: var(--primary-red);
        }

        .system-card.digestive {
            border-color: var(--accent-green);
        }

        .system-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .respiratory .system-icon {
            color: var(--secondary-blue);
        }

        .circulatory .system-icon {
            color: var(--primary-red);
        }

        .digestive .system-icon {
            color: var(--accent-green);
        }

        .system-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .respiratory .system-title {
            color: var(--secondary-blue);
        }

        .circulatory .system-title {
            color: var(--primary-red);
        }

        .digestive .system-title {
            color: var(--accent-green);
        }

        .system-function {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .system-organs {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 10px;
        }

        /* Organs Table */
        .organs-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .organs-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-orange);
            border-bottom: 2px solid var(--accent-orange);
        }

        .organs-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .organs-table tr:hover {
            background: rgba(255, 152, 0, 0.05);
        }

        /* Interactive Body Map */
        .body-map-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .body-map-title {
            color: var(--accent-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .body-map {
            height: 300px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }

        .body-map-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .body-map-btn {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-purple);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .body-map-btn:hover {
            background: rgba(156, 39, 176, 0.1);
            transform: translateY(-2px);
        }

        /* Process Flow */
        .process-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-teal);
        }

        .process-title {
            color: var(--accent-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .process-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            position: relative;
        }

        .process-step {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            width: 100px;
            position: relative;
            z-index: 2;
        }

        .process-arrow {
            color: var(--accent-teal);
            font-size: 1.5rem;
        }

        /* Health Tips */
        .health-tips-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .health-tips-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .health-tip-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--accent-yellow);
        }

        .health-tip-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-yellow);
        }

        .health-tip-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent-yellow);
        }

        .health-tip-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-red), var(--secondary-blue), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-red), var(--secondary-blue), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-red);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .systems-grid {
                grid-template-columns: 1fr;
            }
            
            .health-tips-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes systemReveal {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .system-reveal {
            animation: systemReveal 0.5s ease forwards;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .heartbeat {
            animation: heartbeat 1s infinite;
        }
        
        @keyframes breathing {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        
        .breathing {
            animation: breathing 3s infinite;
        }
        
        @keyframes digestiveFlow {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .digestive-flow {
            animation: digestiveFlow 0.5s ease forwards;
        }
        
        @keyframes respiratoryGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(33, 150, 243, 0.2); }
        }
        
        .respiratory-glow {
            animation: respiratoryGlow 2s ease-in-out infinite;
        }
        
        @keyframes circulatoryGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(244, 67, 54, 0.2); }
        }
        
        .circulatory-glow {
            animation: circulatoryGlow 2s ease-in-out infinite;
        }
        
        @keyframes digestiveGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(76, 175, 80, 0.2); }
        }
        
        .digestive-glow {
            animation: digestiveGlow 2s ease-in-out infinite;
        }
        
        @keyframes floatSymbol {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .float-symbol {
            animation: floatSymbol 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Body Systems Pattern Background -->
    <div class="body-bg" id="bodyBg">
        <!-- Organs will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 Science - Human Body Systems</h1>
            <p class="welcome-subtitle">Discover the amazing machinery inside you! Explore how your respiratory system breathes, circulatory system pumps blood, and digestive system processes food. Learn how these systems work together to keep you alive and healthy through interactive models and engaging activities!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ü´Å‚ù§Ô∏èüçéüß†</span>
                <span class="topic-name">Respiratory, Circulatory & Digestive Systems</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Explore Body Systems</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Science fact display -->
                <div id="scienceFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Body Systems Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Explore Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other Science Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const bodyBg = document.getElementById('bodyBg');
            
            // Create floating organ symbols
            const symbols = ['ü´Å', '‚ù§Ô∏è', 'üçé', 'üß†', 'ü´Ä', 'ü´Å', 'ü¶∑', 'üëÅÔ∏è', 'üëÇ', 'üëÉ', 'üëÖ', 'üñêÔ∏è'];
            
            for (let i = 0; i < 20; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'floating-organ float-symbol';
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.left = `${Math.random() * 100}%`;
                symbol.style.top = `${Math.random() * 100}%`;
                symbol.style.animationDelay = `${Math.random() * 5}s`;
                symbol.style.fontSize = `${2 + Math.random() * 4}rem`;
                
                // Color based on symbol type
                if (symbol.textContent === 'ü´Å' || symbol.textContent === 'üëÉ') {
                    symbol.style.color = 'rgba(33, 150, 243, 0.1)';
                } else if (symbol.textContent === '‚ù§Ô∏è' || symbol.textContent === 'ü´Ä') {
                    symbol.style.color = 'rgba(244, 67, 54, 0.1)';
                } else if (symbol.textContent === 'üçé' || symbol.textContent === 'ü¶∑') {
                    symbol.style.color = 'rgba(76, 175, 80, 0.1)';
                } else {
                    symbol.style.color = 'rgba(156, 39, 176, 0.1)';
                }
                
                bodyBg.appendChild(symbol);
            }
        }

        // Questions array - 80+ Grade 6 Human Body Systems Questions
        const questions = [
            // Respiratory System (1-25)
            {
                type: "respiratory_system",
                question: "Which organ is the main part of the respiratory system where gas exchange occurs?",
                options: ["Lungs", "Heart", "Stomach", "Brain"],
                answer: "A",
                explanation: "The lungs are the primary organs of the respiratory system where oxygen enters the blood and carbon dioxide leaves."
            },
            {
                type: "respiratory_system",
                question: "What is the main function of the respiratory system?",
                options: ["To bring oxygen into the body and remove carbon dioxide", "To pump blood throughout the body", "To break down food for energy", "To control body movements"],
                answer: "A",
                explanation: "The respiratory system's primary function is gas exchange: taking in oxygen and expelling carbon dioxide."
            },
            {
                type: "respiratory_system",
                question: "Through which structure does air enter the respiratory system?",
                options: ["Nose and mouth", "Ears", "Eyes", "Skin"],
                answer: "A",
                explanation: "Air enters the respiratory system through the nose and mouth, then travels down the trachea to the lungs."
            },
            {
                type: "respiratory_system",
                question: "What is the windpipe called?",
                options: ["Trachea", "Esophagus", "Bronchus", "Alveolus"],
                answer: "A",
                explanation: "The trachea, or windpipe, carries air from the nose and mouth to the lungs."
            },
            {
                type: "respiratory_system",
                question: "What are the tiny air sacs in the lungs called?",
                options: ["Alveoli", "Bronchi", "Capillaries", "Arteries"],
                answer: "A",
                explanation: "Alveoli are tiny air sacs in the lungs where oxygen and carbon dioxide are exchanged with the blood."
            },
            {
                type: "respiratory_system",
                question: "What gas do we breathe in that our bodies need?",
                options: ["Oxygen", "Carbon dioxide", "Nitrogen", "Helium"],
                answer: "A",
                explanation: "We breathe in oxygen, which our cells use to produce energy through cellular respiration."
            },
            {
                type: "respiratory_system",
                question: "What gas do we breathe out as waste?",
                options: ["Carbon dioxide", "Oxygen", "Nitrogen", "Hydrogen"],
                answer: "A",
                explanation: "Carbon dioxide is the waste product of cellular respiration that we exhale."
            },
            {
                type: "respiratory_system",
                question: "Which muscle helps us breathe by moving up and down?",
                options: ["Diaphragm", "Biceps", "Heart", "Stomach"],
                answer: "A",
                explanation: "The diaphragm is a dome-shaped muscle that contracts and relaxes to help us breathe."
            },
            // Circulatory System (26-50)
            {
                type: "circulatory_system",
                question: "What is the main organ of the circulatory system?",
                options: ["Heart", "Lungs", "Liver", "Brain"],
                answer: "A",
                explanation: "The heart pumps blood throughout the body, making it the central organ of the circulatory system."
            },
            {
                type: "circulatory_system",
                question: "What is the main function of the circulatory system?",
                options: ["To transport blood throughout the body", "To help with breathing", "To digest food", "To send nerve signals"],
                answer: "A",
                explanation: "The circulatory system transports oxygen, nutrients, hormones, and waste products throughout the body."
            },
            {
                type: "circulatory_system",
                question: "What do red blood cells carry?",
                options: ["Oxygen", "Carbon dioxide", "Nutrients", "Waste"],
                answer: "A",
                explanation: "Red blood cells contain hemoglobin that carries oxygen from the lungs to body tissues."
            },
            {
                type: "circulatory_system",
                question: "Which blood vessels carry blood AWAY from the heart?",
                options: ["Arteries", "Veins", "Capillaries", "Alveoli"],
                answer: "A",
                explanation: "Arteries carry oxygen-rich blood away from the heart to the rest of the body."
            },
            {
                type: "circulatory_system",
                question: "Which blood vessels carry blood TOWARD the heart?",
                options: ["Veins", "Arteries", "Capillaries", "Bronchi"],
                answer: "A",
                explanation: "Veins carry oxygen-poor blood back to the heart from body tissues."
            },
            {
                type: "circulatory_system",
                question: "What are the smallest blood vessels where gas exchange occurs?",
                options: ["Capillaries", "Arteries", "Veins", "Aortas"],
                answer: "A",
                explanation: "Capillaries are tiny blood vessels where oxygen and nutrients are exchanged for carbon dioxide and waste."
            },
            {
                type: "circulatory_system",
                question: "How many chambers does the human heart have?",
                options: ["Four", "Two", "Three", "Five"],
                answer: "A",
                explanation: "The human heart has four chambers: two atria (upper) and two ventricles (lower)."
            },
            {
                type: "circulatory_system",
                question: "What is the liquid part of blood called?",
                options: ["Plasma", "Hemoglobin", "Platelets", "White blood cells"],
                answer: "A",
                explanation: "Plasma is the liquid component of blood that carries cells, nutrients, hormones, and waste products."
            },
            // Digestive System (51-75)
            {
                type: "digestive_system",
                question: "What is the main function of the digestive system?",
                options: ["To break down food and absorb nutrients", "To pump blood", "To help with breathing", "To control body temperature"],
                answer: "A",
                explanation: "The digestive system breaks down food into nutrients that can be absorbed and used by the body."
            },
            {
                type: "digestive_system",
                question: "Where does digestion begin?",
                options: ["Mouth", "Stomach", "Small intestine", "Esophagus"],
                answer: "A",
                explanation: "Digestion begins in the mouth where teeth break down food and saliva starts chemical digestion."
            },
            {
                type: "digestive_system",
                question: "What organ produces bile to help digest fats?",
                options: ["Liver", "Stomach", "Pancreas", "Gallbladder"],
                answer: "A",
                explanation: "The liver produces bile, which helps break down fats during digestion."
            },
            {
                type: "digestive_system",
                question: "Where are most nutrients absorbed into the bloodstream?",
                options: ["Small intestine", "Stomach", "Large intestine", "Esophagus"],
                answer: "A",
                explanation: "The small intestine has villi that absorb most nutrients from digested food into the bloodstream."
            },
            {
                type: "digestive_system",
                question: "What is the muscular tube that carries food from the mouth to the stomach?",
                options: ["Esophagus", "Trachea", "Small intestine", "Large intestine"],
                answer: "A",
                explanation: "The esophagus uses muscular contractions called peristalsis to move food to the stomach."
            },
            {
                type: "digestive_system",
                question: "What organ stores bile before releasing it into the small intestine?",
                options: ["Gallbladder", "Liver", "Pancreas", "Stomach"],
                answer: "A",
                explanation: "The gallbladder stores and concentrates bile produced by the liver."
            },
            {
                type: "digestive_system",
                question: "Which organ produces digestive enzymes and insulin?",
                options: ["Pancreas", "Liver", "Stomach", "Small intestine"],
                answer: "A",
                explanation: "The pancreas produces digestive enzymes and hormones like insulin that regulate blood sugar."
            },
            {
                type: "digestive_system",
                question: "What is the main function of the large intestine?",
                options: ["Absorb water and form feces", "Absorb nutrients", "Produce enzymes", "Store bile"],
                answer: "A",
                explanation: "The large intestine absorbs water from undigested food and forms solid waste (feces)."
            },
            // System Interactions (76-100)
            {
                type: "system_interactions",
                question: "How do the respiratory and circulatory systems work together?",
                options: ["Respiratory system provides oxygen that circulatory system transports", "Circulatory system helps breathing", "Respiratory system digests food", "They don't work together"],
                answer: "A",
                explanation: "The respiratory system takes in oxygen, which the circulatory system carries to cells, and takes away carbon dioxide."
            },
            {
                type: "system_interactions",
                question: "How does the digestive system help the circulatory system?",
                options: ["Provides nutrients that blood carries to cells", "Helps pump blood", "Cleans the blood", "Produces oxygen"],
                answer: "A",
                explanation: "The digestive system breaks down food into nutrients that are absorbed into the bloodstream and carried to cells."
            },
            {
                type: "system_interactions",
                question: "Which two systems work together to provide energy to cells?",
                options: ["Respiratory and digestive", "Nervous and skeletal", "Circulatory and nervous", "Digestive and skeletal"],
                answer: "A",
                explanation: "The digestive system provides nutrients and the respiratory system provides oxygen - both needed for cellular respiration to produce energy."
            },
            {
                type: "system_interactions",
                question: "What waste product do both respiratory and excretory systems remove?",
                options: ["Carbon dioxide", "Oxygen", "Glucose", "Protein"],
                answer: "A",
                explanation: "Both systems help remove carbon dioxide - respiratory through breathing, excretory through other mechanisms."
            },
            {
                type: "system_interactions",
                question: "Why do cells need both oxygen and nutrients?",
                options: ["For cellular respiration to produce energy", "To build cell walls", "To produce hormones", "To digest food"],
                answer: "A",
                explanation: "Cells use oxygen and nutrients in cellular respiration to produce ATP, the energy currency of cells."
            },
            // Health and Maintenance (101-120)
            {
                type: "health_maintenance",
                question: "How does exercise benefit the circulatory system?",
                options: ["Strengthens heart muscle", "Increases lung size", "Produces more stomach acid", "Makes bones stronger"],
                answer: "A",
                explanation: "Exercise strengthens the heart muscle, making it more efficient at pumping blood."
            },
            {
                type: "health_maintenance",
                question: "Why is a balanced diet important for the digestive system?",
                options: ["Provides all necessary nutrients", "Makes food taste better", "Increases appetite", "Prevents breathing problems"],
                answer: "A",
                explanation: "A balanced diet provides all the nutrients needed for proper body function and digestive health."
            },
            {
                type: "health_maintenance",
                question: "How does smoking affect the respiratory system?",
                options: ["Damages lungs and reduces oxygen intake", "Improves breathing", "Strengthens diaphragm", "Increases lung capacity"],
                answer: "A",
                explanation: "Smoking damages lung tissue, reduces oxygen exchange, and increases risk of respiratory diseases."
            },
            {
                type: "health_maintenance",
                question: "What is the importance of drinking water for body systems?",
                options: ["Helps all systems function properly", "Only helps digestion", "Only helps circulation", "Makes you less hungry"],
                answer: "A",
                explanation: "Water is essential for all body systems: helps digestion, circulation, temperature regulation, and waste removal."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent understanding of body systems!",
            "Perfect knowledge of human anatomy!",
            "Great job identifying system functions!",
            "Amazing! You're a body systems expert!",
            "Perfect recall of scientific concepts!",
            "You're a future doctor in the making!",
            "Outstanding biology comprehension!",
            "Brilliant system identification!",
            "You think like a physiologist!",
            "Human biology mastery achieved!"
        ];

        // Body systems concepts
        const bodySystemsConcepts = [
            {
                name: "Respiratory System",
                description: "Breathing and gas exchange",
                icon: "ü´Å"
            },
            {
                name: "Circulatory System",
                description: "Blood circulation and transport",
                icon: "‚ù§Ô∏è"
            },
            {
                name: "Digestive System",
                description: "Food breakdown and nutrient absorption",
                icon: "üçé"
            },
            {
                name: "System Interactions",
                description: "How systems work together",
                icon: "üîó"
            },
            {
                name: "Health & Maintenance",
                description: "Keeping body systems healthy",
                icon: "üí™"
            }
        ];

        // Body systems details
        const bodySystems = [
            {
                name: "Respiratory System",
                function: "Brings oxygen into the body and removes carbon dioxide",
                mainOrgans: "Lungs, trachea, diaphragm, nose",
                keyProcess: "Breathing and gas exchange",
                icon: "ü´Å",
                color: "#2196F3"
            },
            {
                name: "Circulatory System",
                function: "Transports blood, oxygen, nutrients, and waste throughout the body",
                mainOrgans: "Heart, blood vessels (arteries, veins, capillaries)",
                keyProcess: "Blood circulation",
                icon: "‚ù§Ô∏è",
                color: "#F44336"
            },
            {
                name: "Digestive System",
                function: "Breaks down food into nutrients that can be absorbed",
                mainOrgans: "Stomach, intestines, liver, pancreas",
                keyProcess: "Digestion and absorption",
                icon: "üçé",
                color: "#4CAF50"
            }
        ];

        // Organs and their functions
        const organsAndFunctions = [
            {
                organ: "Lungs",
                system: "Respiratory",
                function: "Gas exchange - oxygen in, carbon dioxide out",
                importance: "Essential for cellular respiration"
            },
            {
                organ: "Heart",
                system: "Circulatory",
                function: "Pumps blood throughout the body",
                importance: "Central pump of circulatory system"
            },
            {
                organ: "Stomach",
                system: "Digestive",
                function: "Mixes food with digestive juices",
                importance: "Mechanical and chemical digestion"
            },
            {
                organ: "Small Intestine",
                system: "Digestive",
                function: "Nutrient absorption into bloodstream",
                importance: "Main site of nutrient absorption"
            },
            {
                organ: "Liver",
                system: "Digestive",
                function: "Produces bile, filters blood, stores nutrients",
                importance: "Metabolic powerhouse"
            },
            {
                organ: "Trachea",
                system: "Respiratory",
                function: "Carries air to and from lungs",
                importance: "Air passageway"
            },
            {
                organ: "Arteries",
                system: "Circulatory",
                function: "Carry oxygen-rich blood away from heart",
                importance: "Supply oxygen to tissues"
            }
        ];

        // System processes
        const systemProcesses = [
            {
                process: "Breathing",
                system: "Respiratory",
                steps: "1. Inhalation (air in) 2. Gas exchange in lungs 3. Exhalation (air out)",
                importance: "Brings oxygen, removes carbon dioxide"
            },
            {
                process: "Blood Circulation",
                system: "Circulatory",
                steps: "1. Heart pumps 2. Blood travels through vessels 3. Returns to heart",
                importance: "Transports essential substances"
            },
            {
                process: "Digestion",
                system: "Digestive",
                steps: "1. Ingestion 2. Digestion 3. Absorption 4. Elimination",
                importance: "Provides nutrients and energy"
            }
        ];

        // Health tips for body systems
        const healthTips = [
            {
                tip: "Exercise Regularly",
                benefits: "Strengthens heart and lungs, improves circulation",
                system: "All Systems",
                icon: "üèÉ"
            },
            {
                tip: "Eat Balanced Diet",
                benefits: "Provides nutrients for all body systems",
                system: "Digestive & All",
                icon: "ü•ó"
            },
            {
                tip: "Stay Hydrated",
                benefits: "Helps digestion, circulation, and temperature control",
                system: "All Systems",
                icon: "üíß"
            },
            {
                tip: "Avoid Smoking",
                benefits: "Protects lungs and circulatory system",
                system: "Respiratory & Circulatory",
                icon: "üö≠"
            },
            {
                tip: "Practice Deep Breathing",
                benefits: "Strengthens respiratory system, reduces stress",
                system: "Respiratory",
                icon: "üå¨Ô∏è"
            },
            {
                tip: "Maintain Healthy Weight",
                benefits: "Reduces strain on heart and joints",
                system: "Circulatory & Skeletal",
                icon: "‚öñÔ∏è"
            }
        ];

        // Science facts
        const scienceFacts = [
            "Your heart beats about 100,000 times per day!",
            "Your lungs contain about 1,500 miles of airways!",
            "The small intestine is about 22 feet long in adults!",
            "You breathe about 20,000 times each day!",
            "Your blood travels 12,000 miles through blood vessels daily!",
            "The surface area of your lungs is about the size of a tennis court!",
            "Your stomach produces a new lining every 3-4 days!",
            "Your body has about 5 liters of blood!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceFact = document.getElementById('scienceFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6BodySystems');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6BodySystems', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6BodySystems_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6BodySystems_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a body systems expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent physiology knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep exploring how your body works!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review body systems and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Understanding your body is key to good health!";
            }
        }

        // Create science fact display
        function createScienceFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'science-fact';
            
            factDiv.innerHTML = `<strong>Amazing Body Fact:</strong> ${scienceFacts[Math.floor(Math.random() * scienceFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "respiratory_system": "ü´Å",
                "circulatory_system": "‚ù§Ô∏è",
                "digestive_system": "üçé",
                "system_interactions": "üîó",
                "health_maintenance": "üí™"
            };
            
            let conceptName = "Respiratory System";
            let conceptIcon = "ü´Å";
            
            if (question.type.includes("respiratory_system")) {
                conceptName = "Respiratory System";
                conceptIcon = conceptIcons.respiratory_system;
            } else if (question.type.includes("circulatory_system")) {
                conceptName = "Circulatory System";
                conceptIcon = conceptIcons.circulatory_system;
            } else if (question.type.includes("digestive_system")) {
                conceptName = "Digestive System";
                conceptIcon = conceptIcons.digestive_system;
            } else if (question.type.includes("system_interactions")) {
                conceptName = "System Interactions";
                conceptIcon = conceptIcons.system_interactions;
            } else if (question.type.includes("health_maintenance")) {
                conceptName = "Health & Maintenance";
                conceptIcon = conceptIcons.health_maintenance;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("respiratory_system")) {
                label.textContent = "Breathing, lungs, and gas exchange";
            } else if (question.type.includes("circulatory_system")) {
                label.textContent = "Heart, blood vessels, and circulation";
            } else if (question.type.includes("digestive_system")) {
                label.textContent = "Food breakdown and nutrient absorption";
            } else if (question.type.includes("system_interactions")) {
                label.textContent = "How body systems work together";
            } else if (question.type.includes("health_maintenance")) {
                label.textContent = "Keeping body systems healthy";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create body systems visualization
        function createBodyVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-red);">Human Body Systems Explorer</h3>
                
                <div class="system-display">
                    <div class="display-title">Current System Focus</div>
                    <div class="system-container">
                        <div class="system-scenario">${currentQuestion.question}</div>
                        <div class="system-highlight">
                            <strong>Key Concept:</strong> <span class="highlight-text">${getSystemFocus(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Body Diagram -->
                <div class="body-diagram" id="bodyDiagram">
                    <!-- Body diagram will be animated by JavaScript -->
                </div>
                <div style="text-align: center; margin-bottom: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                    Interactive Body Model - Explore different systems
                </div>
                
                <div class="systems-grid">
                    ${bodySystems.map(system => `
                        <div class="system-card ${system.name.toLowerCase().split(' ')[0]}" style="border-color: ${system.color}" onclick="showSystemDemo('${system.name}')">
                            <div class="system-icon" style="color: ${system.color}">${system.icon}</div>
                            <div class="system-title" style="color: ${system.color}">${system.name}</div>
                            <div class="system-function">${system.function}</div>
                            <div class="system-organs">
                                <strong>Main Organs:</strong> ${system.mainOrgans}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <table class="organs-table">
                    <thead>
                        <tr>
                            <th>Organ</th>
                            <th>System</th>
                            <th>Function</th>
                            <th>Importance</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${organsAndFunctions.map(organ => `
                            <tr>
                                <td style="font-weight: bold; color: var(--secondary-blue);">${organ.organ}</td>
                                <td style="color: ${getSystemColor(organ.system)};">${organ.system}</td>
                                <td style="font-size: 0.9rem;">${organ.function}</td>
                                <td style="font-size: 0.8rem; color: var(--text-muted);">${organ.importance}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="body-map-container">
                    <div class="body-map-title">Interactive Body Map</div>
                    <div class="body-map" id="interactiveBodyMap">
                        <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: var(--text-secondary);">
                            Click buttons to explore different body systems
                        </div>
                    </div>
                    <div class="body-map-controls">
                        <div class="body-map-btn" onclick="showBodyMap('respiratory')">Respiratory System</div>
                        <div class="body-map-btn" onclick="showBodyMap('circulatory')">Circulatory System</div>
                        <div class="body-map-btn" onclick="showBodyMap('digestive')">Digestive System</div>
                        <div class="body-map-btn" onclick="showBodyMap('all')">All Systems</div>
                    </div>
                </div>
                
                <div class="solution-container">
                    <div class="solution-title">Step-by-Step Learning Path</div>
                    <div class="solution-steps" id="solutionSteps">
                        ${generateLearningPath(currentQuestion)}
                    </div>
                </div>
                
                <div class="process-container">
                    <div class="process-title">System Processes Flow</div>
                    <div class="process-flow" id="processFlow">
                        <!-- Process flow will be inserted by JavaScript -->
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-orange);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Quick Study Guide:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Respiratory: Breathing, lungs, gas exchange<br>
                        2. Circulatory: Heart, blood vessels, transport<br>
                        3. Digestive: Food breakdown, nutrient absorption<br>
                        4. Systems work together for energy production<br>
                        5. Healthy habits support all body systems
                    </div>
                </div>
                
                <div class="health-tips-container">
                    <div class="display-title">Health Tips for Body Systems</div>
                    <div class="health-tips-grid">
                        ${healthTips.map(tip => `
                            <div class="health-tip-card">
                                <div class="health-tip-icon">${tip.icon}</div>
                                <div class="health-tip-title">${tip.tip}</div>
                                <div class="health-tip-description">
                                    <strong>Benefits:</strong> ${tip.benefits}<br>
                                    <strong>System:</strong> ${tip.system}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-teal);">
                    <div style="color: var(--accent-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Body Systems Learning Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Visualize:</strong> Draw system diagrams and label organs<br>
                        <strong>Connect:</strong> Link each organ to its specific function<br>
                        <strong>Relate:</strong> Connect systems to your own body experiences<br>
                        <strong>Practice:</strong> Use flashcards for organs and functions<br>
                        <em>Your body is an amazing machine - enjoy discovering how it works!</em>
                    </div>
                </div>
            `;
            
            // Initialize body diagram and process flow
            initializeBodyDiagram();
            initializeProcessFlow();
            showBodyMap('all');
            
            return vizDiv;
        }

        // Helper functions
        function getSystemFocus(typeString) {
            const systemMap = {
                "respiratory_system": "Breathing and gas exchange",
                "circulatory_system": "Blood circulation and transport",
                "digestive_system": "Food breakdown and nutrient absorption",
                "system_interactions": "How body systems work together",
                "health_maintenance": "Maintaining healthy body systems"
            };
            
            return systemMap[typeString] || "Human Body Systems";
        }

        function getSystemColor(systemName) {
            switch(systemName) {
                case "Respiratory": return "#2196F3";
                case "Circulatory": return "#F44336";
                case "Digestive": return "#4CAF50";
                default: return "#9C27B0";
            }
        }

        function generateLearningPath(question) {
            let steps = [];
            
            if (question.type.includes("respiratory_system")) {
                steps = [
                    "Step 1: Identify the respiratory system component",
                    "Step 2: Recall its function in breathing/gas exchange",
                    "Step 3: Consider how it works with other systems",
                    "Step 4: Eliminate incorrect options",
                    "Step 5: Select the most accurate answer"
                ];
            } else if (question.type.includes("circulatory_system")) {
                steps = [
                    "Step 1: Identify the circulatory system component",
                    "Step 2: Recall its function in blood transport",
                    "Step 3: Consider the direction of blood flow",
                    "Step 4: Eliminate incorrect options",
                    "Step 5: Select the most accurate answer"
                ];
            } else if (question.type.includes("digestive_system")) {
                steps = [
                    "Step 1: Identify the digestive system component",
                    "Step 2: Recall its function in food processing",
                    "Step 3: Consider the order in digestion",
                    "Step 4: Eliminate incorrect options",
                    "Step 5: Select the most accurate answer"
                ];
            } else {
                steps = [
                    "Step 1: Read the question carefully",
                    "Step 2: Identify which body system(s) are involved",
                    "Step 3: Recall relevant functions and interactions",
                    "Step 4: Apply scientific reasoning",
                    "Step 5: Select the most accurate biological answer"
                ];
            }
            
            return steps.map((step, index) => `
                <div class="solution-step system-reveal" style="animation-delay: ${index * 0.1}s">
                    <span class="step-number">${index + 1}</span>
                    <span class="step-description">${step}</span>
                    ${index === steps.length - 1 ? `
                        <div class="step-calculation">
                            <strong>Correct Answer:</strong> ${question.options[question.answer.charCodeAt(0) - 65]}
                        </div>
                        <div class="step-explanation">
                            ${question.explanation}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Global functions for interactive features
        window.showSystemDemo = function(systemName) {
            const interactiveBodyMap = document.getElementById('interactiveBodyMap');
            if (!interactiveBodyMap) return;
            
            showBodyMap(systemName.toLowerCase().split(' ')[0]);
        };

        window.showBodyMap = function(systemType) {
            const interactiveBodyMap = document.getElementById('interactiveBodyMap');
            if (!interactiveBodyMap) return;
            
            let content = '';
            let title = '';
            
            switch(systemType) {
                case 'respiratory':
                    title = "Respiratory System";
                    content = `
                        <div style="position: relative; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <!-- Head -->
                            <div style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); width: 60px; height: 60px; background: var(--dark-surface); border-radius: 50%;"></div>
                            
                            <!-- Trachea -->
                            <div style="position: absolute; top: 80px; left: 50%; transform: translateX(-50%); width: 20px; height: 80px; background: var(--secondary-blue); border-radius: 10px;"></div>
                            
                            <!-- Lungs -->
                            <div style="position: absolute; top: 100px; left: 30%; width: 80px; height: 120px; background: var(--secondary-blue); border-radius: 40px; opacity: 0.8; animation: breathing 3s infinite;"></div>
                            <div style="position: absolute; top: 100px; left: 50%; transform: translateX(-50%); width: 80px; height: 120px; background: var(--secondary-blue); border-radius: 40px; opacity: 0.8; animation: breathing 3s infinite; animation-delay: 1.5s;"></div>
                            
                            <!-- Diaphragm -->
                            <div style="position: absolute; bottom: 50px; left: 20%; right: 20%; height: 10px; background: var(--accent-orange); border-radius: 5px;"></div>
                            
                            <!-- Labels -->
                            <div style="position: absolute; top: 120px; left: 15%; color: var(--secondary-blue); font-size: 0.8rem; font-weight: bold;">Left Lung</div>
                            <div style="position: absolute; top: 120px; left: 70%; color: var(--secondary-blue); font-size: 0.8rem; font-weight: bold;">Right Lung</div>
                            <div style="position: absolute; top: 90px; left: 52%; color: var(--secondary-blue); font-size: 0.8rem; font-weight: bold;">Trachea</div>
                        </div>
                    `;
                    break;
                    
                case 'circulatory':
                    title = "Circulatory System";
                    content = `
                        <div style="position: relative; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <!-- Heart -->
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 70px; height: 70px; background: var(--primary-red); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; animation: heartbeat 1s infinite;">
                                ‚ù§Ô∏è
                            </div>
                            
                            <!-- Arteries (red) -->
                            <div style="position: absolute; top: 30%; left: 50%; width: 100px; height: 10px; background: var(--primary-red); border-radius: 5px; transform: rotate(45deg);"></div>
                            <div style="position: absolute; top: 30%; left: 30%; width: 80px; height: 10px; background: var(--primary-red); border-radius: 5px; transform: rotate(-45deg);"></div>
                            <div style="position: absolute; bottom: 30%; left: 40%; width: 120px; height: 10px; background: var(--primary-red); border-radius: 5px; transform: rotate(15deg);"></div>
                            
                            <!-- Veins (blue) -->
                            <div style="position: absolute; top: 60%; right: 30%; width: 100px; height: 10px; background: var(--secondary-blue); border-radius: 5px; transform: rotate(-30deg);"></div>
                            <div style="position: absolute; bottom: 40%; right: 40%; width: 80px; height: 10px; background: var(--secondary-blue); border-radius: 5px; transform: rotate(60deg);"></div>
                            
                            <!-- Capillaries -->
                            <div style="position: absolute; top: 40%; left: 20%; width: 40px; height: 40px; border: 1px solid var(--accent-purple); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; color: var(--accent-purple);">
                                Capillaries
                            </div>
                            
                            <!-- Labels -->
                            <div style="position: absolute; top: 20%; left: 60%; color: var(--primary-red); font-size: 0.8rem; font-weight: bold;">Arteries</div>
                            <div style="position: absolute; bottom: 30%; right: 20%; color: var(--secondary-blue); font-size: 0.8rem; font-weight: bold;">Veins</div>
                        </div>
                    `;
                    break;
                    
                case 'digestive':
                    title = "Digestive System";
                    content = `
                        <div style="position: relative; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <!-- Mouth -->
                            <div style="position: absolute; top: 30px; left: 50%; transform: translateX(-50%); width: 40px; height: 20px; background: var(--accent-green); border-radius: 20px 20px 0 0;"></div>
                            
                            <!-- Esophagus -->
                            <div style="position: absolute; top: 50px; left: 50%; transform: translateX(-50%); width: 15px; height: 60px; background: var(--accent-green); border-radius: 7px;"></div>
                            
                            <!-- Stomach -->
                            <div style="position: absolute; top: 110px; left: 40%; width: 70px; height: 50px; background: var(--accent-green); border-radius: 35px 35px 10px 10px;"></div>
                            
                            <!-- Small Intestine -->
                            <div style="position: absolute; top: 160px; left: 30%; width: 120px; height: 15px; background: var(--accent-green); border-radius: 7px; transform: rotate(5deg);"></div>
                            <div style="position: absolute; top: 180px; left: 35%; width: 110px; height: 15px; background: var(--accent-green); border-radius: 7px; transform: rotate(-5deg);"></div>
                            
                            <!-- Large Intestine -->
                            <div style="position: absolute; top: 200px; left: 50%; width: 15px; height: 60px; background: var(--accent-green); border-radius: 7px;"></div>
                            <div style="position: absolute; top: 200px; left: 30%; width: 80px; height: 15px; background: var(--accent-green); border-radius: 7px;"></div>
                            
                            <!-- Liver -->
                            <div style="position: absolute; top: 80px; left: 70%; width: 50px; height: 40px; background: var(--accent-teal); border-radius: 10px;"></div>
                            
                            <!-- Labels -->
                            <div style="position: absolute; top: 120px; left: 45%; color: var(--accent-green); font-size: 0.8rem; font-weight: bold;">Stomach</div>
                            <div style="position: absolute; top: 170px; left: 60%; color: var(--accent-green); font-size: 0.8rem; font-weight: bold;">Intestines</div>
                            <div style="position: absolute; top: 90px; left: 72%; color: var(--accent-teal); font-size: 0.8rem; font-weight: bold;">Liver</div>
                        </div>
                    `;
                    break;
                    
                case 'all':
                    title = "All Body Systems";
                    content = `
                        <div style="position: relative; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <!-- Simplified body outline -->
                            <div style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); width: 60px; height: 60px; background: var(--dark-surface); border-radius: 50%;"></div>
                            <div style="position: absolute; top: 80px; left: 50%; transform: translateX(-50%); width: 100px; height: 200px; background: var(--dark-surface); border-radius: 50px 50px 30px 30px;"></div>
                            
                            <!-- Respiratory highlights -->
                            <div style="position: absolute; top: 100px; left: 30%; width: 60px; height: 90px; border: 2px solid var(--secondary-blue); border-radius: 30px; opacity: 0.6;"></div>
                            <div style="position: absolute; top: 100px; left: 50%; transform: translateX(-50%); width: 60px; height: 90px; border: 2px solid var(--secondary-blue); border-radius: 30px; opacity: 0.6;"></div>
                            
                            <!-- Circulatory highlight -->
                            <div style="position: absolute; top: 120px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; border: 2px solid var(--primary-red); border-radius: 50%; opacity: 0.6;"></div>
                            
                            <!-- Digestive highlights -->
                            <div style="position: absolute; top: 160px; left: 45%; width: 50px; height: 40px; border: 2px solid var(--accent-green); border-radius: 25px 25px 10px 10px; opacity: 0.6;"></div>
                            <div style="position: absolute; top: 200px; left: 40%; width: 80px; height: 15px; border: 2px solid var(--accent-green); border-radius: 7px; opacity: 0.6; transform: rotate(5deg);"></div>
                            
                            <!-- Labels -->
                            <div style="position: absolute; top: 110px; left: 20%; color: var(--secondary-blue); font-size: 0.7rem; font-weight: bold;">Lungs</div>
                            <div style="position: absolute; top: 130px; left: 52%; color: var(--primary-red); font-size: 0.7rem; font-weight: bold;">Heart</div>
                            <div style="position: absolute; top: 170px; left: 48%; color: var(--accent-green); font-size: 0.7rem; font-weight: bold;">Stomach</div>
                            <div style="position: absolute; top: 210px; left: 45%; color: var(--accent-green); font-size: 0.7rem; font-weight: bold;">Intestines</div>
                        </div>
                    `;
                    break;
            }
            
            interactiveBodyMap.innerHTML = `
                <div style="position: absolute; top: 10px; left: 0; right: 0; text-align: center; color: var(--accent-purple); font-weight: bold; z-index: 10;">
                    ${title}
                </div>
                ${content}
            `;
        };

        function initializeBodyDiagram() {
            const bodyDiagram = document.getElementById('bodyDiagram');
            if (!bodyDiagram) return;
            
            // Create a simple body diagram
            bodyDiagram.innerHTML = `
                <!-- Head -->
                <div style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); width: 50px; height: 50px; background: var(--dark-surface); border-radius: 50%;"></div>
                
                <!-- Torso -->
                <div style="position: absolute; top: 70px; left: 50%; transform: translateX(-50%); width: 80px; height: 140px; background: var(--dark-surface); border-radius: 40px 40px 20px 20px;"></div>
                
                <!-- Arms -->
                <div style="position: absolute; top: 80px; left: 30%; width: 40px; height: 80px; background: var(--dark-surface); border-radius: 20px;"></div>
                <div style="position: absolute; top: 80px; right: 30%; width: 40px; height: 80px; background: var(--dark-surface); border-radius: 20px;"></div>
                
                <!-- Legs -->
                <div style="position: absolute; bottom: 20px; left: 40%; width: 30px; height: 80px; background: var(--dark-surface); border-radius: 15px;"></div>
                <div style="position: absolute; bottom: 20px; right: 40%; width: 30px; height: 80px; background: var(--dark-surface); border-radius: 15px;"></div>
                
                <!-- Heart (circulatory) -->
                <div class="heart heartbeat" style="top: 100px; left: 50%; transform: translateX(-50%);">
                    ‚ù§Ô∏è
                </div>
                
                <!-- Lungs (respiratory) -->
                <div class="lungs breathing" style="top: 90px; left: 30%;"></div>
                <div class="lungs breathing" style="top: 90px; right: 30%; animation-delay: 1.5s;"></div>
                
                <!-- Stomach (digestive) -->
                <div class="stomach" style="top: 150px; left: 45%;"></div>
                
                <!-- Intestines (digestive) -->
                <div class="intestine" style="top: 200px; left: 40%; transform: rotate(5deg);"></div>
                <div class="intestine" style="top: 220px; left: 35%; transform: rotate(-5deg); width: 120px;"></div>
            `;
        }

        function initializeProcessFlow() {
            const processFlow = document.getElementById('processFlow');
            if (!processFlow) return;
            
            // Show respiratory process flow by default
            const respiratoryProcess = systemProcesses.find(p => p.system === "Respiratory");
            
            processFlow.innerHTML = `
                <div class="process-step">
                    <div style="color: var(--accent-teal); font-weight: bold;">Step 1</div>
                    <div style="font-size: 0.9rem;">Inhalation</div>
                </div>
                <div class="process-arrow">‚Üí</div>
                <div class="process-step">
                    <div style="color: var(--accent-teal); font-weight: bold;">Step 2</div>
                    <div style="font-size: 0.9rem;">Gas Exchange</div>
                </div>
                <div class="process-arrow">‚Üí</div>
                <div class="process-step">
                    <div style="color: var(--accent-teal); font-weight: bold;">Step 3</div>
                    <div style="font-size: 0.9rem;">Exhalation</div>
                </div>
            `;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceFact.appendChild(createScienceFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createBodyVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin exploring body systems!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
