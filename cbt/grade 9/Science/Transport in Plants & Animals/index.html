<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 9 Science - Transport in Plants & Animals | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Biology Theme */
        :root {
            --biology-green: #4CAF50;
            --xylem-blue: #2196F3;
            --phloem-orange: #FF9800;
            --blood-red: #F44336;
            --heart-purple: #9C27B0;
            --leaf-teal: #009688;
            --cell-yellow: #FFC107;
            --capillary-pink: #E91E63;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(76, 175, 80, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 90% 30%, rgba(33, 150, 243, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 50% 80%, rgba(244, 67, 54, 0.08) 0%, transparent 40%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--biology-green), var(--xylem-blue), var(--blood-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(76, 175, 80, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--biology-green);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--biology-green);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-biology {
            background: var(--biology-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-biology:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-xylem {
            background: var(--xylem-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-xylem:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-phloem {
            background: var(--phloem-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-phloem:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-blood {
            background: var(--blood-red);
            color: white;
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
        }

        .btn-blood:hover {
            background: #D32F2F;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(244, 67, 54, 0.4);
        }

        .btn-heart {
            background: var(--heart-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-heart:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--biology-green);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--biology-green), var(--blood-red));
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .biology-tip {
            background: rgba(255, 193, 7, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--cell-yellow);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--biology-green);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--biology-green);
            color: var(--biology-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--biology-green);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--biology-green);
        }

        .option.incorrect .option-letter {
            background: #F44336;
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--biology-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--biology-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--biology-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Science Practice Area */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 900px;
        }

        /* Practice Sections */
        .practice-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid;
            position: relative;
        }

        .plant-transport-section {
            border-color: var(--biology-green);
        }

        .xylem-section {
            border-color: var(--xylem-blue);
        }

        .phloem-section {
            border-color: var(--phloem-orange);
        }

        .blood-section {
            border-color: var(--blood-red);
        }

        .heart-section {
            border-color: var(--heart-purple);
        }

        .circulatory-section {
            border-color: var(--capillary-pink);
        }

        .leaf-section {
            border-color: var(--leaf-teal);
        }

        .cell-section {
            border-color: var(--cell-yellow);
        }

        .section-title {
            color: inherit;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            font-size: 1.1rem;
        }

        /* Diagram Canvas */
        .diagram-canvas-container {
            position: relative;
            width: 100%;
            height: 200px;
            background: var(--dark-surface);
            border-radius: 6px;
            margin: 10px 0;
            overflow: hidden;
            border: 1px solid var(--dark-border);
        }

        .diagram-canvas {
            width: 100%;
            height: 100%;
        }

        /* Measurement Input */
        .measurement-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .measurement-input {
            width: 100px;
            padding: 8px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 1rem;
            text-align: center;
        }

        .measurement-input:focus {
            outline: none;
            border-color: var(--biology-green);
        }

        .measurement-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            min-width: 100px;
        }

        .unit-display {
            color: var(--cell-yellow);
            font-size: 0.9rem;
            margin-left: 5px;
        }

        /* Biology Display */
        .biology-display {
            background: rgba(76, 175, 80, 0.1);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            text-align: center;
            color: var(--biology-green);
            border-left: 3px solid var(--biology-green);
        }

        /* Formula Display */
        .formula-display {
            background: rgba(33, 150, 243, 0.1);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            text-align: center;
            color: var(--xylem-blue);
            border-left: 3px solid var(--xylem-blue);
        }

        /* Process List */
        .process-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 15px 0;
        }

        .process-item {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
            border: 1px solid var(--dark-border);
            font-size: 0.9rem;
        }

        .process-item.highlight {
            background: rgba(33, 150, 243, 0.2);
            border-color: var(--xylem-blue);
        }

        /* Cross-section Container */
        .cross-section-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: var(--dark-surface);
            border-radius: 6px;
            margin: 10px 0;
            overflow: auto;
            border: 1px solid var(--dark-border);
            padding: 10px;
        }

        /* Slider */
        .biology-slider-container {
            margin: 15px 0;
        }

        .biology-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: var(--dark-surface);
            border-radius: 3px;
            outline: none;
        }

        .biology-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--biology-green);
            cursor: pointer;
        }

        .biology-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--biology-green);
            cursor: pointer;
            border: none;
        }

        /* Biology Controls */
        .biology-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
            justify-content: center;
        }

        /* Step Display */
        .step-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.9rem;
            line-height: 1.4;
            color: var(--text-secondary);
            max-height: 150px;
            overflow-y: auto;
        }

        /* Solution Display */
        .solution-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
        }

        /* Quick Reference */
        .reference-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--cell-yellow);
        }

        .biology-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .biology-table th {
            background: var(--dark-card);
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 2px solid var(--cell-yellow);
            color: var(--cell-yellow);
        }

        .biology-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        .biology-cell {
            font-family: 'Courier New', monospace;
            color: var(--biology-green);
        }

        /* Component Values Display */
        .component-values-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .component-item {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
            border: 1px solid var(--dark-border);
        }

        .component-function {
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .component-value {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--biology-green), var(--blood-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--biology-green), var(--blood-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .component-values-display {
                grid-template-columns: 1fr;
            }
            
            .process-list {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--biology-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes flow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .flow {
            animation: flow 3s linear infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.05); }
            50% { transform: scale(1); }
            75% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        .heartbeat {
            animation: heartbeat 1s ease infinite;
        }

        @keyframes highlight {
            0% { background-color: transparent; }
            50% { background-color: rgba(76, 175, 80, 0.3); }
            100% { background-color: transparent; }
        }

        .highlight {
            animation: highlight 1.5s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .biology-controls {
                flex-direction: column;
            }
            
            .biology-controls .btn {
                width: 100%;
            }
            
            .measurement-input-group {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .measurement-input {
                width: 100%;
            }
        }

        /* Plant and Animal Diagram Styles */
        .plant-diagram-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .plant-part {
            width: 80px;
            height: 80px;
            background: var(--dark-surface);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            border: 2px solid var(--dark-border);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .plant-part:hover {
            transform: scale(1.1);
            border-color: var(--biology-green);
        }

        .plant-part.selected {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--biology-green);
        }

        .part-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .blood-cell-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 15px 0;
        }

        .blood-cell {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            border: 3px solid var(--dark-border);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .red-blood-cell {
            background: linear-gradient(135deg, #FF5252, #D32F2F);
        }

        .white-blood-cell {
            background: linear-gradient(135deg, #FFFFFF, #E0E0E0);
            color: #333;
        }

        .platelet-cell {
            background: linear-gradient(135deg, #FFCCBC, #FF8A65);
        }

        .blood-cell.selected {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(244, 67, 54, 0.5);
        }

        /* Heart Chamber Styles */
        .heart-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 15px 0;
        }

        .heart-chamber {
            padding: 10px;
            background: var(--dark-surface);
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--dark-border);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .heart-chamber:hover {
            transform: translateY(-3px);
            border-color: var(--heart-purple);
        }

        .heart-chamber.selected {
            background: rgba(156, 39, 176, 0.2);
            border-color: var(--heart-purple);
        }

        .chamber-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        /* Transpiration Demonstration */
        .transpiration-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 15px auto;
            border-radius: 50%;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            overflow: hidden;
        }

        .transpiration-segment {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Transport Rate Chart */
        .rate-chart-container {
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            margin: 15px 0;
            padding: 10px;
            background: var(--dark-surface);
            border-radius: 8px;
            border: 1px solid var(--dark-border);
        }

        .rate-bar {
            width: 30px;
            background: var(--xylem-blue);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
        }

        .rate-label {
            text-align: center;
            margin-top: 5px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Stomata Diagram */
        .stomata-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 15px 0;
        }

        .stomata {
            width: 120px;
            height: 60px;
            border-radius: 50%;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            position: relative;
            overflow: hidden;
        }

        .guard-cell {
            position: absolute;
            width: 50%;
            height: 100%;
            background: var(--biology-green);
            opacity: 0.3;
        }

        .stomata-opening {
            position: absolute;
            width: 30%;
            height: 50%;
            background: var(--leaf-teal);
            top: 25%;
            left: 35%;
            border-radius: 5px;
        }

        /* Microscopic View */
        .microscope-container {
            position: relative;
            width: 100%;
            height: 150px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid var(--dark-border);
            overflow: hidden;
        }

        .cell-view {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Transport in Plants & Animals</h1>
            <p class="welcome-subtitle">Explore how living organisms transport water, nutrients, and gases. Understand xylem and phloem in plants, and the circulatory system in animals through interactive diagrams and experiments.</p>
            
            <div class="topic-badge">
                <span>üåø Xylem & Phloem ‚Ä¢ ‚ù§Ô∏è Circulatory System ‚Ä¢ ü©∏ Blood Components ‚Ä¢ üçÉ Transpiration ‚Ä¢ üíì Heart Structure ‚Ä¢ üå± Osmosis & Diffusion</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-biology" id="startPractice">
                    <span>üî¨ Begin Biology Practice (100+ Questions)</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="biologyTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Biology Practice Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Plant Transport Overview -->
                    <div class="practice-section plant-transport-section">
                        <div class="section-title">Plant Transport System</div>
                        
                        <div class="biology-display">
                            Plants have two main transport systems: Xylem and Phloem
                        </div>
                        
                        <div class="plant-diagram-container">
                            <div class="plant-part" onclick="selectPlantPart('roots')">
                                <div class="part-icon">üå±</div>
                                <div>Roots</div>
                            </div>
                            <div class="plant-part" onclick="selectPlantPart('stem')">
                                <div class="part-icon">üéã</div>
                                <div>Stem</div>
                            </div>
                            <div class="plant-part" onclick="selectPlantPart('leaves')">
                                <div class="part-icon">üçÉ</div>
                                <div>Leaves</div>
                            </div>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-biology" onclick="explainPlantTransport()">Learn Plant Transport</button>
                            <button class="btn btn-small btn-outline" onclick="showPlantCrossSection()">Plant Cross-section</button>
                            <button class="btn btn-small btn-outline" onclick="demonstrateWaterUptake()">Water Uptake Demo</button>
                        </div>
                        
                        <div class="solution-display" id="plantTransportInfo">
                            Select a plant part to learn about its role in transport
                        </div>
                        
                        <div class="step-display" id="plantTransportSteps">
                            Xylem transports water and minerals upward<br>
                            Phloem transports food (sugars) throughout the plant
                        </div>
                    </div>
                    
                    <!-- Xylem Structure and Function -->
                    <div class="practice-section xylem-section">
                        <div class="section-title">Xylem Transport System</div>
                        
                        <div class="diagram-canvas-container">
                            <canvas class="diagram-canvas" id="xylemCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="formula-display">
                            Water Transport: Roots ‚Üí Stem ‚Üí Leaves
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Plant height (cm):</span>
                            <input type="number" id="plantHeight" class="measurement-input" value="100" min="10" step="10">
                            <span class="unit-display">cm</span>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Transpiration rate:</span>
                            <input type="number" id="transpirationRate" class="measurement-input" value="5" min="1" step="1">
                            <span class="unit-display">ml/hour</span>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-xylem" onclick="calculateWaterTransport()">Calculate Water Transport</button>
                            <button class="btn btn-small btn-outline" onclick="explainXylem()">Learn Xylem Structure</button>
                            <button class="btn btn-small btn-outline" onclick="demonstrateCapillarity()">Capillary Action Demo</button>
                        </div>
                        
                        <div class="solution-display" id="xylemResult">
                            Xylem transports water and minerals from roots to leaves
                        </div>
                        
                        <div class="step-display" id="xylemSteps">
                            Forces: Root pressure, Capillarity, Transpiration pull
                        </div>
                    </div>
                    
                    <!-- Phloem Structure and Function -->
                    <div class="practice-section phloem-section">
                        <div class="section-title">Phloem Transport System</div>
                        
                        <div class="diagram-canvas-container">
                            <canvas class="diagram-canvas" id="phloemCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="formula-display">
                            Food Transport: Source (Leaves) ‚Üí Sink (Storage)
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Sugar concentration:</span>
                            <input type="number" id="sugarConcentration" class="measurement-input" value="20" min="5" max="40" step="5">
                            <span class="unit-display">%</span>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Transport distance:</span>
                            <input type="number" id="transportDistance" class="measurement-input" value="50" min="10" step="10">
                            <span class="unit-display">cm</span>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-phloem" onclick="calculateFoodTransport()">Calculate Food Transport</button>
                            <button class="btn btn-small btn-outline" onclick="explainPhloem()">Learn Phloem Structure</button>
                            <button class="btn btn-small btn-outline" onclick="demonstrateTranslocation()">Translocation Demo</button>
                        </div>
                        
                        <div class="solution-display" id="phloemResult">
                            Phloem transports sugars from leaves to other plant parts
                        </div>
                        
                        <div class="step-display" id="phloemSteps">
                            Process: Loading ‚Üí Transport ‚Üí Unloading
                        </div>
                    </div>
                    
                    <!-- Transpiration Process -->
                    <div class="practice-section leaf-section">
                        <div class="section-title">Transpiration Process</div>
                        
                        <div class="stomata-container">
                            <div class="stomata">
                                <div class="guard-cell" style="left: 0;"></div>
                                <div class="guard-cell" style="right: 0;"></div>
                                <div class="stomata-opening"></div>
                            </div>
                        </div>
                        
                        <div class="biology-display">
                            Water loss through stomata creates transpiration pull
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Temperature (¬∞C):</span>
                            <input type="number" id="temperature" class="measurement-input" value="25" min="10" max="40" step="5">
                            <span class="unit-display">¬∞C</span>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Humidity (%):</span>
                            <input type="number" id="humidity" class="measurement-input" value="50" min="10" max="90" step="10">
                            <span class="unit-display">%</span>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small" style="background: var(--leaf-teal); color: white;" onclick="calculateTranspirationRate()">Calculate Transpiration Rate</button>
                            <button class="btn btn-small btn-outline" onclick="explainTranspiration()">Learn Transpiration</button>
                            <button class="btn btn-small btn-outline" onclick="showFactorsAffecting()">Affecting Factors</button>
                        </div>
                        
                        <div class="solution-display" id="transpirationResult">
                            Transpiration: Water evaporation from leaves
                        </div>
                        
                        <div class="step-display" id="transpirationSteps">
                            Factors: Temperature, Humidity, Wind, Light
                        </div>
                    </div>
                    
                    <!-- Blood Components -->
                    <div class="practice-section blood-section">
                        <div class="section-title">Blood Components</div>
                        
                        <div class="blood-cell-container">
                            <div class="blood-cell red-blood-cell" onclick="selectBloodCell('rbc')">
                                RBC
                            </div>
                            <div class="blood-cell white-blood-cell" onclick="selectBloodCell('wbc')">
                                WBC
                            </div>
                            <div class="blood-cell platelet-cell" onclick="selectBloodCell('platelet')">
                                Platelet
                            </div>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Blood volume:</span>
                            <input type="number" id="bloodVolume" class="measurement-input" value="5" min="4" max="6" step="0.5">
                            <span class="unit-display">liters</span>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-blood" onclick="calculateBloodComponents()">Calculate Blood Composition</button>
                            <button class="btn btn-small btn-outline" onclick="explainBloodComponents()">Learn Blood Components</button>
                            <button class="btn btn-small btn-outline" onclick="showBloodFunctions()">Blood Functions</button>
                        </div>
                        
                        <div class="solution-display" id="bloodResult">
                            Blood: RBCs, WBCs, Platelets, Plasma
                        </div>
                        
                        <div class="component-values-display" id="bloodComponents">
                            <div class="component-item">
                                <div class="component-function">Plasma</div>
                                <div class="component-value">55%</div>
                            </div>
                            <div class="component-item">
                                <div class="component-function">RBCs</div>
                                <div class="component-value">45%</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Heart Structure -->
                    <div class="practice-section heart-section">
                        <div class="section-title">Heart Structure</div>
                        
                        <div class="diagram-canvas-container">
                            <canvas class="diagram-canvas" id="heartCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="formula-display">
                            Blood Flow: Body ‚Üí Heart ‚Üí Lungs ‚Üí Heart ‚Üí Body
                        </div>
                        
                        <div class="heart-container">
                            <div class="heart-chamber" onclick="selectHeartChamber('ra')">
                                <div class="chamber-icon">‚Üí</div>
                                <div>Right Atrium</div>
                            </div>
                            <div class="heart-chamber" onclick="selectHeartChamber('rv')">
                                <div class="chamber-icon">‚Üì</div>
                                <div>Right Ventricle</div>
                            </div>
                            <div class="heart-chamber" onclick="selectHeartChamber('la')">
                                <div class="chamber-icon">‚Üê</div>
                                <div>Left Atrium</div>
                            </div>
                            <div class="heart-chamber" onclick="selectHeartChamber('lv')">
                                <div class="chamber-icon">‚Üë</div>
                                <div>Left Ventricle</div>
                            </div>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-heart" onclick="explainHeartStructure()">Learn Heart Structure</button>
                            <button class="btn btn-small btn-outline" onclick="showBloodPathway()">Blood Pathway</button>
                            <button class="btn btn-small btn-outline" onclick="calculateHeartRate()">Calculate Heart Rate</button>
                        </div>
                        
                        <div class="solution-display" id="heartResult">
                            Heart: 4 chambers, double circulation
                        </div>
                        
                        <div class="step-display" id="heartSteps">
                            Pathway: Vena cava ‚Üí RA ‚Üí RV ‚Üí Lungs ‚Üí LA ‚Üí LV ‚Üí Aorta
                        </div>
                    </div>
                    
                    <!-- Circulatory System -->
                    <div class="practice-section circulatory-section">
                        <div class="section-title">Circulatory System</div>
                        
                        <div class="diagram-canvas-container">
                            <canvas class="diagram-canvas" id="circulatoryCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="formula-display">
                            Double Circulation: Pulmonary & Systemic
                        </div>
                        
                        <div class="process-list">
                            <div class="process-item" onclick="selectCirculation('pulmonary')">Pulmonary</div>
                            <div class="process-item" onclick="selectCirculation('systemic')">Systemic</div>
                            <div class="process-item" onclick="selectCirculation('coronary')">Coronary</div>
                            <div class="process-item" onclick="selectCirculation('portal')">Portal</div>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small" style="background: var(--capillary-pink); color: white;" onclick="explainCirculatorySystem()">Learn Circulatory System</button>
                            <button class="btn btn-small btn-outline" onclick="showArteryVeinDiff()">Artery vs Vein</button>
                            <button class="btn btn-small btn-outline" onclick="demonstrateBloodFlow()">Blood Flow Demo</button>
                        </div>
                        
                        <div class="solution-display" id="circulatoryResult">
                            Arteries carry blood away from heart<br>
                            Veins carry blood to the heart
                        </div>
                        
                        <div class="step-display" id="circulatorySteps">
                            Capillaries: Site of exchange between blood and tissues
                        </div>
                    </div>
                    
                    <!-- Cell Transport Mechanisms -->
                    <div class="practice-section cell-section">
                        <div class="section-title">Cell Transport Mechanisms</div>
                        
                        <div class="microscope-container">
                            <div class="cell-view" id="cellView">üî¨</div>
                        </div>
                        
                        <div class="biology-display">
                            Diffusion, Osmosis, Active Transport
                        </div>
                        
                        <div class="process-list">
                            <div class="process-item" onclick="selectTransport('diffusion')">Diffusion</div>
                            <div class="process-item" onclick="selectTransport('osmosis')">Osmosis</div>
                            <div class="process-item" onclick="selectTransport('active')">Active Transport</div>
                            <div class="process-item" onclick="selectTransport('facilitated')">Facilitated</div>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small" style="background: var(--cell-yellow); color: #333;" onclick="explainCellTransport()">Learn Transport Mechanisms</button>
                            <button class="btn btn-small btn-outline" onclick="showConcentrationGradient()">Concentration Gradient</button>
                            <button class="btn btn-small btn-outline" onclick="demonstrateOsmosis()">Osmosis Demo</button>
                        </div>
                        
                        <div class="solution-display" id="cellTransportResult">
                            Select a transport mechanism to learn more
                        </div>
                        
                        <div class="step-display" id="cellTransportSteps">
                            Passive: No energy required<br>
                            Active: Energy (ATP) required
                        </div>
                    </div>
                    
                    <!-- Transport in Plants vs Animals -->
                    <div class="reference-section">
                        <div class="section-title">Plants vs Animals: Transport Comparison</div>
                        <table class="biology-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Plants</th>
                                    <th>Animals</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Transport System</td>
                                    <td class="biology-cell">Xylem & Phloem</td>
                                    <td class="biology-cell">Circulatory System</td>
                                </tr>
                                <tr>
                                    <td>Transport Medium</td>
                                    <td>Water (xylem), Sap (phloem)</td>
                                    <td>Blood</td>
                                </tr>
                                <tr>
                                    <td>Driving Force</td>
                                    <td>Transpiration pull, Root pressure</td>
                                    <td>Heart pumping</td>
                                </tr>
                                <tr>
                                    <td>Direction</td>
                                    <td>Bidirectional (phloem)<br>Upward (xylem)</td>
                                    <td>Unidirectional in vessels</td>
                                </tr>
                                <tr>
                                    <td>Transport Speed</td>
                                    <td>Slow (cm/hour)</td>
                                    <td>Fast (m/second)</td>
                                </tr>
                                <tr>
                                    <td>Components Transported</td>
                                    <td>Water, Minerals, Sugars</td>
                                    <td>O‚ÇÇ, CO‚ÇÇ, Nutrients, Waste</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Transpiration Rate Calculator -->
                    <div class="practice-section leaf-section">
                        <div class="section-title">Transpiration Rate Calculator</div>
                        
                        <div class="rate-chart-container" id="transpirationChart">
                            <!-- Bars will be generated here -->
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Light intensity:</span>
                            <input type="number" id="lightIntensity" class="measurement-input" value="70" min="0" max="100" step="10">
                            <span class="unit-display">%</span>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Wind speed:</span>
                            <input type="number" id="windSpeed" class="measurement-input" value="10" min="0" max="30" step="5">
                            <span class="unit-display">km/h</span>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small" style="background: var(--leaf-teal); color: white;" onclick="updateTranspirationChart()">Update Transpiration Rate</button>
                            <button class="btn btn-small btn-outline" onclick="explainTranspirationFactors()">Factors Explained</button>
                            <button class="btn btn-small btn-outline" onclick="resetTranspirationChart()">Reset</button>
                        </div>
                        
                        <div class="solution-display" id="transpirationCalculation">
                            Transpiration increases with: Temperature, Light, Wind
                        </div>
                    </div>
                    
                    <!-- Blood Flow Simulation -->
                    <div class="practice-section blood-section">
                        <div class="section-title">Blood Flow Simulation</div>
                        
                        <div class="diagram-canvas-container">
                            <canvas class="diagram-canvas" id="bloodFlowCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Heart rate:</span>
                            <input type="number" id="heartRate" class="measurement-input" value="72" min="40" max="120" step="5">
                            <span class="unit-display">bpm</span>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Blood pressure:</span>
                            <input type="number" id="systolic" class="measurement-input" value="120" min="90" max="140" step="5">
                            <span>/</span>
                            <input type="number" id="diastolic" class="measurement-input" value="80" min="60" max="90" step="5">
                            <span class="unit-display">mmHg</span>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-blood" onclick="simulateBloodFlow()">Simulate Blood Flow</button>
                            <button class="btn btn-small btn-outline" onclick="explainBloodPressure()">Learn Blood Pressure</button>
                            <button class="btn btn-small btn-outline" onclick="showCirculationTime()">Circulation Time</button>
                        </div>
                        
                        <div class="solution-display" id="bloodFlowResult">
                            Normal resting heart rate: 60-100 bpm
                        </div>
                        
                        <div class="step-display" id="bloodFlowSteps">
                            Systolic: Pressure during contraction<br>
                            Diastolic: Pressure during relaxation
                        </div>
                    </div>
                    
                    <!-- Osmosis Experiment Simulator -->
                    <div class="practice-section cell-section">
                        <div class="section-title">Osmosis Experiment Simulator</div>
                        
                        <div class="cross-section-container">
                            <div style="text-align: center; padding: 20px;">
                                <div style="display: inline-block; width: 100px; height: 100px; background: linear-gradient(to right, #4CAF50, #2196F3); border-radius: 10px; border: 2px solid white; margin: 10px;">
                                    <div style="color: white; font-weight: bold; padding-top: 40px;">Cell</div>
                                </div>
                                <div style="display: inline-block; width: 150px; height: 150px; background: rgba(33, 150, 243, 0.2); border-radius: 10px; border: 2px dashed #2196F3; margin: 10px;">
                                    <div style="color: #2196F3; font-weight: bold; padding-top: 60px;">Solution</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Solution concentration:</span>
                            <input type="number" id="solutionConcentration" class="measurement-input" value="0.9" min="0.1" max="10" step="0.1">
                            <span class="unit-display">% NaCl</span>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small" style="background: var(--cell-yellow); color: #333;" onclick="simulateOsmosis()">Simulate Osmosis</button>
                            <button class="btn btn-small btn-outline" onclick="explainOsmosis()">Learn Osmosis</button>
                            <button class="btn btn-small btn-outline" onclick="showTonicityTypes()">Types of Solutions</button>
                        </div>
                        
                        <div class="solution-display" id="osmosisResult">
                            Isotonic: No net movement<br>
                            Hypertonic: Water leaves cell<br>
                            Hypotonic: Water enters cell
                        </div>
                        
                        <div class="step-display" id="osmosisSteps">
                            Osmosis: Water moves from high to low water concentration
                        </div>
                    </div>
                    
                    <!-- Transport Terminology Reference -->
                    <div class="reference-section">
                        <div class="section-title">Transport Terminology</div>
                        <table class="biology-table">
                            <thead>
                                <tr>
                                    <th>Term</th>
                                    <th>Definition</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Diffusion</td>
                                    <td>Movement from high to low concentration</td>
                                    <td>Oxygen in alveoli</td>
                                </tr>
                                <tr>
                                    <td>Osmosis</td>
                                    <td>Water movement across semi-permeable membrane</td>
                                    <td>Water into root hairs</td>
                                </tr>
                                <tr>
                                    <td>Active Transport</td>
                                    <td>Movement against concentration gradient (uses energy)</td>
                                    <td>Mineral uptake in roots</td>
                                </tr>
                                <tr>
                                    <td>Transpiration</td>
                                    <td>Water loss from leaves through stomata</td>
                                    <td>Water vapor from leaves</td>
                                </tr>
                                <tr>
                                    <td>Translocation</td>
                                    <td>Movement of sugars in phloem</td>
                                    <td>Sugar from leaves to fruits</td>
                                </tr>
                                <tr>
                                    <td>Capillarity</td>
                                    <td>Water rising in narrow tubes</td>
                                    <td>Water in xylem vessels</td>
                                </tr>
                                <tr>
                                    <td>Double Circulation</td>
                                    <td>Blood passes through heart twice per circuit</td>
                                    <td>Mammalian circulation</td>
                                </tr>
                                <tr>
                                    <td>Stomata</td>
                                    <td>Pores for gas exchange in leaves</td>
                                    <td>CO‚ÇÇ entry, O‚ÇÇ exit</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Interactive Quiz Generator -->
                    <div class="practice-section plant-transport-section">
                        <div class="section-title">Transport Quiz Generator</div>
                        
                        <div class="biology-display" id="biologyQuiz">
                            What is the function of xylem in plants?
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-biology" onclick="generateBiologyQuiz()">New Question</button>
                            <button class="btn btn-small btn-xylem" onclick="showQuizAnswer()">Show Answer</button>
                            <button class="btn btn-small btn-outline" onclick="checkQuizAnswer()">Check Your Answer</button>
                        </div>
                        
                        <div class="solution-display" id="quizSolution" style="display: none;">
                            Xylem transports water and minerals from roots to leaves
                        </div>
                        
                        <div class="measurement-input-group">
                            <span class="measurement-label">Your answer:</span>
                            <input type="text" id="userQuizAnswer" class="measurement-input" placeholder="Type your answer here">
                        </div>
                    </div>
                    
                    <!-- Plant Anatomy Explorer -->
                    <div class="practice-section xylem-section">
                        <div class="section-title">Plant Anatomy Explorer</div>
                        
                        <div class="diagram-canvas-container">
                            <canvas class="diagram-canvas" id="plantAnatomyCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="process-list">
                            <div class="process-item" onclick="highlightPlantPart('epidermis')">Epidermis</div>
                            <div class="process-item" onclick="highlightPlantPart('cortex')">Cortex</div>
                            <div class="process-item" onclick="highlightPlantPart('endodermis')">Endodermis</div>
                            <div class="process-item" onclick="highlightPlantPart('vascular')">Vascular Bundle</div>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small btn-xylem" onclick="explainPlantAnatomy()">Learn Plant Anatomy</button>
                            <button class="btn btn-small btn-outline" onclick="showRootStructure()">Root Structure</button>
                            <button class="btn btn-small btn-outline" onclick="showLeafStructure()">Leaf Structure</button>
                        </div>
                        
                        <div class="solution-display" id="plantAnatomyInfo">
                            Click on a plant part to learn about its structure and function
                        </div>
                    </div>
                    
                    <!-- Animal Circulatory Explorer -->
                    <div class="practice-section circulatory-section">
                        <div class="section-title">Circulatory System Explorer</div>
                        
                        <div class="diagram-canvas-container">
                            <canvas class="diagram-canvas" id="circulatoryExplorerCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="process-list">
                            <div class="process-item" onclick="highlightCirculatoryPart('artery')">Artery</div>
                            <div class="process-item" onclick="highlightCirculatoryPart('vein')">Vein</div>
                            <div class="process-item" onclick="highlightCirculatoryPart('capillary')">Capillary</div>
                            <div class="process-item" onclick="highlightCirculatoryPart('heart')">Heart</div>
                        </div>
                        
                        <div class="biology-controls">
                            <button class="btn btn-small" style="background: var(--capillary-pink); color: white;" onclick="explainVesselStructure()">Learn Vessel Structure</button>
                            <button class="btn btn-small btn-outline" onclick="showPulmonaryCircuit()">Pulmonary Circuit</button>
                            <button class="btn btn-small btn-outline" onclick="showSystemicCircuit()">Systemic Circuit</button>
                        </div>
                        
                        <div class="solution-display" id="circulatoryExplorerInfo">
                            Select a blood vessel type to learn about its structure
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-xylem" id="skipQuestion">Skip Question</button>
                <button class="btn btn-phloem" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Biology Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="plantScore">0</div>
                        <div class="stat-label">Plant Transport</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="animalScore">0</div>
                        <div class="stat-label">Animal Transport</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="xylemScore">0</div>
                        <div class="stat-label">Xylem Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="heartScore">0</div>
                        <div class="stat-label">Heart Questions</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-biology" id="retryTopic">Try Again</button>
                    <button class="btn btn-xylem" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // COMPREHENSIVE 100+ QUESTIONS ON TRANSPORT IN PLANTS AND ANIMALS
        
        const questions = [
            // Plant Transport: Xylem (1-25)
            {
                question: "What is the main function of xylem in plants?",
                options: ["Transport water and minerals", "Transport food", "Provide support", "Store food"],
                answer: "A",
                explanation: "Xylem transports water and minerals from roots to leaves. Phloem transports food.",
                type: "xylem"
            },
            {
                question: "Which process helps water move upward in xylem?",
                options: ["Transpiration pull", "Root pressure", "Both A and B", "Photosynthesis"],
                answer: "C",
                explanation: "Transpiration pull and root pressure both help water move upward in xylem vessels.",
                type: "xylem"
            },
            {
                question: "Xylem vessels are made of:",
                options: ["Dead cells with lignin", "Living cells with cytoplasm", "Thin-walled cells", "Cells with sieve plates"],
                answer: "A",
                explanation: "Xylem vessels are dead cells with lignified walls that provide strength and allow water transport.",
                type: "xylem"
            },
            {
                question: "Water enters root hairs through:",
                options: ["Osmosis", "Active transport", "Diffusion", "All of the above"],
                answer: "A",
                explanation: "Water enters root hairs mainly through osmosis, moving from soil (high water concentration) to root (lower water concentration).",
                type: "xylem"
            },
            {
                question: "Transpiration occurs mainly through:",
                options: ["Stomata", "Lenticels", "Cuticle", "Root hairs"],
                answer: "A",
                explanation: "About 90% of transpiration occurs through stomata (tiny pores) on leaves.",
                type: "xylem"
            },
            {
                question: "Which factor increases transpiration rate?",
                options: ["High temperature", "High humidity", "Low light", "Still air"],
                answer: "A",
                explanation: "High temperature increases evaporation, thus increasing transpiration rate.",
                type: "xylem"
            },
            {
                question: "Root pressure is maximum during:",
                options: ["Night", "Day", "Afternoon", "Morning"],
                answer: "A",
                explanation: "Root pressure is highest at night when transpiration is low and water accumulates in roots.",
                type: "xylem"
            },
            {
                question: "The cohesion-tension theory explains:",
                options: ["Water transport in xylem", "Food transport in phloem", "Mineral absorption", "Photosynthesis"],
                answer: "A",
                explanation: "Cohesion-tension theory explains how water is pulled upward in xylem due to transpiration.",
                type: "xylem"
            },
            {
                question: "Which is NOT a function of xylem?",
                options: ["Transport sugars", "Transport water", "Provide mechanical support", "Transport minerals"],
                answer: "A",
                explanation: "Xylem transports water and minerals. Phloem transports sugars (food).",
                type: "xylem"
            },
            {
                question: "Guttation occurs through:",
                options: ["Hydathodes", "Stomata", "Lenticels", "Cuticle"],
                answer: "A",
                explanation: "Guttation (water droplets on leaf tips) occurs through hydathodes, usually at night when root pressure is high.",
                type: "xylem"
            },

            // Plant Transport: Phloem (26-50)
            {
                question: "What does phloem transport in plants?",
                options: ["Organic nutrients", "Water", "Minerals", "Oxygen"],
                answer: "A",
                explanation: "Phloem transports organic nutrients (sugars, amino acids) from leaves to other plant parts.",
                type: "phloem"
            },
            {
                question: "Phloem consists of:",
                options: ["Sieve tubes and companion cells", "Vessels and tracheids", "Xylem fibers", "Parenchyma"],
                answer: "A",
                explanation: "Phloem contains sieve tubes for transport and companion cells that support sieve tubes.",
                type: "phloem"
            },
            {
                question: "Translocation refers to:",
                options: ["Movement of food in phloem", "Movement of water in xylem", "Mineral absorption", "Photosynthesis"],
                answer: "A",
                explanation: "Translocation is the movement of sugars and other organic substances through phloem.",
                type: "phloem"
            },
            {
                question: "The source in phloem transport is usually:",
                options: ["Leaves", "Roots", "Stems", "Flowers"],
                answer: "A",
                explanation: "Leaves are the source (where sugars are produced by photosynthesis).",
                type: "phloem"
            },
            {
                question: "Sinks in phloem transport include:",
                options: ["Growing roots and fruits", "Mature leaves", "Stem only", "All plant parts"],
                answer: "A",
                explanation: "Sinks are areas that use or store food, like growing roots, fruits, and storage organs.",
                type: "phloem"
            },
            {
                question: "Pressure flow hypothesis explains:",
                options: ["Phloem transport", "Xylem transport", "Mineral uptake", "Transpiration"],
                answer: "A",
                explanation: "Pressure flow hypothesis explains how sugars move in phloem from source to sink.",
                type: "phloem"
            },
            {
                question: "Sieve tubes lack:",
                options: ["Nucleus", "Cell wall", "Cytoplasm", "Plasmodesmata"],
                answer: "A",
                explanation: "Sieve tube elements lose their nucleus at maturity to facilitate transport.",
                type: "phloem"
            },
            {
                question: "Companion cells are connected to sieve tubes by:",
                options: ["Plasmodesmata", "Lignin", "Cuticle", "Stomata"],
                answer: "A",
                explanation: "Plasmodesmata connect companion cells to sieve tubes for communication and transport.",
                type: "phloem"
            },
            {
                question: "Phloem transport is:",
                options: ["Bidirectional", "Only upward", "Only downward", "Radial"],
                answer: "A",
                explanation: "Phloem transport can be bidirectional depending on source-sink relationships.",
                type: "phloem"
            },
            {
                question: "Sucrose is loaded into phloem by:",
                options: ["Active transport", "Osmosis", "Diffusion", "Root pressure"],
                answer: "A",
                explanation: "Sucrose loading into phloem requires active transport (energy).",
                type: "phloem"
            },

            // Animal Transport: Blood (51-75)
            {
                question: "What is the main function of red blood cells?",
                options: ["Carry oxygen", "Fight infection", "Clot blood", "Carry nutrients"],
                answer: "A",
                explanation: "Red blood cells contain hemoglobin that carries oxygen from lungs to tissues.",
                type: "blood"
            },
            {
                question: "Which blood component fights infection?",
                options: ["White blood cells", "Red blood cells", "Platelets", "Plasma"],
                answer: "A",
                explanation: "White blood cells (leukocytes) defend against pathogens and infections.",
                type: "blood"
            },
            {
                question: "Platelets are involved in:",
                options: ["Blood clotting", "Oxygen transport", "Immunity", "Nutrient transport"],
                answer: "A",
                explanation: "Platelets help form blood clots to stop bleeding.",
                type: "blood"
            },
            {
                question: "Plasma is mainly:",
                options: ["Water", "Proteins", "Salts", "Cells"],
                answer: "A",
                explanation: "Blood plasma is about 90% water, with dissolved proteins, salts, and nutrients.",
                type: "blood"
            },
            {
                question: "Hemoglobin is found in:",
                options: ["Red blood cells", "White blood cells", "Platelets", "Plasma"],
                answer: "A",
                explanation: "Hemoglobin, the oxygen-carrying pigment, is in red blood cells.",
                type: "blood"
            },
            {
                question: "Normal human blood pH is approximately:",
                options: ["7.4", "6.8", "8.0", "5.5"],
                answer: "A",
                explanation: "Blood pH is tightly regulated around 7.35-7.45 (slightly alkaline).",
                type: "blood"
            },
            {
                question: "Which blood type is universal donor?",
                options: ["O negative", "AB positive", "A positive", "B negative"],
                answer: "A",
                explanation: "O negative lacks A, B, and Rh antigens, so it can be donated to anyone.",
                type: "blood"
            },
            {
                question: "Blood carries carbon dioxide mainly as:",
                options: ["Bicarbonate ions", "Carbonic acid", "Dissolved gas", "Carboxyhemoglobin"],
                answer: "A",
                explanation: "About 70% of CO‚ÇÇ is transported as bicarbonate ions in plasma.",
                type: "blood"
            },
            {
                question: "Erythropoietin stimulates production of:",
                options: ["Red blood cells", "White blood cells", "Platelets", "Plasma proteins"],
                answer: "A",
                explanation: "Erythropoietin is a hormone that stimulates red blood cell production.",
                type: "blood"
            },
            {
                question: "Which is NOT a component of blood?",
                options: ["Lymph", "Red blood cells", "White blood cells", "Platelets"],
                answer: "A",
                explanation: "Lymph is part of the lymphatic system, not circulating blood.",
                type: "blood"
            },

            // Animal Transport: Heart & Circulation (76-100)
            {
                question: "How many chambers does the human heart have?",
                options: ["Four", "Two", "Three", "One"],
                answer: "A",
                explanation: "Human heart has 4 chambers: 2 atria (upper) and 2 ventricles (lower).",
                type: "heart"
            },
            {
                question: "Which chamber pumps blood to the lungs?",
                options: ["Right ventricle", "Left ventricle", "Right atrium", "Left atrium"],
                answer: "A",
                explanation: "Right ventricle pumps deoxygenated blood to lungs via pulmonary artery.",
                type: "heart"
            },
            {
                question: "Oxygenated blood returns to heart via:",
                options: ["Pulmonary veins", "Pulmonary artery", "Aorta", "Vena cava"],
                answer: "A",
                explanation: "Pulmonary veins carry oxygenated blood from lungs to left atrium.",
                type: "heart"
            },
            {
                question: "The largest artery is:",
                options: ["Aorta", "Pulmonary artery", "Coronary artery", "Carotid artery"],
                answer: "A",
                explanation: "Aorta is the largest artery, carrying oxygenated blood from left ventricle to body.",
                type: "heart"
            },
            {
                question: "Which blood vessel has valves?",
                options: ["Veins", "Arteries", "Capillaries", "Arterioles"],
                answer: "A",
                explanation: "Veins have valves to prevent backflow of blood, especially in legs.",
                type: "heart"
            },
            {
                question: "Normal adult resting heart rate is about:",
                options: ["72 bpm", "120 bpm", "50 bpm", "100 bpm"],
                answer: "A",
                explanation: "Normal resting heart rate is 60-100 beats per minute, average 72 bpm.",
                type: "heart"
            },
            {
                question: "Systolic pressure is:",
                options: ["Pressure during heart contraction", "Pressure during relaxation", "Average blood pressure", "Venous pressure"],
                answer: "A",
                explanation: "Systolic pressure is the higher number, measured during ventricular contraction.",
                type: "heart"
            },
            {
                question: "Double circulation means:",
                options: ["Blood passes through heart twice per circuit", "Two circuits: pulmonary and systemic", "Both A and B", "Heart has two sides"],
                answer: "C",
                explanation: "Double circulation: blood goes through heart twice (pulmonary and systemic circuits).",
                type: "heart"
            },
            {
                question: "Coronary arteries supply blood to:",
                options: ["Heart muscle", "Lungs", "Brain", "Kidneys"],
                answer: "A",
                explanation: "Coronary arteries supply oxygenated blood to the heart muscle itself.",
                type: "heart"
            },
            {
                question: "The pacemaker of the heart is:",
                options: ["SA node", "AV node", "Bundle of His", "Purkinje fibers"],
                answer: "A",
                explanation: "Sinoatrial (SA) node initiates heartbeats, setting the pace.",
                type: "heart"
            }
        ];

        // Biology tips
        const biologyTips = [
            "Tip: Xylem transports water upward, Phloem transports food in both directions",
            "Tip: Transpiration helps pull water up through xylem vessels",
            "Tip: Red blood cells carry oxygen, white blood cells fight infection",
            "Tip: Arteries carry blood away from heart, veins carry blood to heart",
            "Tip: The heart has four chambers: two atria and two ventricles",
            "Tip: Root hairs increase surface area for water absorption",
            "Tip: Stomata open during day for gas exchange, close at night to conserve water",
            "Tip: Capillaries are where exchange of materials occurs between blood and tissues"
        ];

        // Common biology values
        const biologyValues = {
            blood: {
                plasmaPercentage: 55,
                rbcPercentage: 45,
                normalHeartRate: "60-100 bpm",
                normalBP: "120/80 mmHg"
            },
            plants: {
                transpirationRate: "1-10 ml/hour",
                xylemSpeed: "1-10 cm/hour",
                stomataCount: "100-300 per mm¬≤"
            }
        };

        // Practice problems
        const biologyQuizzes = [
            {
                question: "What is transpiration and why is it important?",
                answer: "Transpiration is water loss from leaves through stomata. It creates transpiration pull that helps water move upward in xylem, cools the plant, and helps mineral absorption.",
                type: "plant"
            },
            {
                question: "How are arteries different from veins?",
                answer: "Arteries: Thick walls, no valves, carry oxygenated blood (except pulmonary), high pressure. Veins: Thin walls, have valves, carry deoxygenated blood (except pulmonary), low pressure.",
                type: "animal"
            },
            {
                question: "What is the difference between xylem and phloem?",
                answer: "Xylem: Transports water and minerals upward, dead cells, lignified walls. Phloem: Transports food in both directions, living cells, sieve tubes with companion cells.",
                type: "plant"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            plantScore: 0,
            animalScore: 0,
            xylemScore: 0,
            heartScore: 0,
            xylemCanvas: null,
            xylemCtx: null,
            phloemCanvas: null,
            phloemCtx: null,
            heartCanvas: null,
            heartCtx: null,
            circulatoryCanvas: null,
            circulatoryCtx: null,
            bloodFlowCanvas: null,
            bloodFlowCtx: null,
            plantAnatomyCanvas: null,
            plantAnatomyCtx: null,
            circulatoryExplorerCanvas: null,
            circulatoryExplorerCtx: null,
            selectedPlantPart: null,
            selectedBloodCell: null,
            selectedHeartChamber: null,
            selectedCirculation: null,
            selectedTransport: null,
            currentQuiz: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const biologyTip = document.getElementById('biologyTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const plantScore = document.getElementById('plantScore');
        const animalScore = document.getElementById('animalScore');
        const xylemScore = document.getElementById('xylemScore');
        const heartScore = document.getElementById('heartScore');

        // Practice area elements
        const plantTransportInfo = document.getElementById('plantTransportInfo');
        const plantTransportSteps = document.getElementById('plantTransportSteps');
        const xylemResult = document.getElementById('xylemResult');
        const xylemSteps = document.getElementById('xylemSteps');
        const phloemResult = document.getElementById('phloemResult');
        const phloemSteps = document.getElementById('phloemSteps');
        const transpirationResult = document.getElementById('transpirationResult');
        const transpirationSteps = document.getElementById('transpirationSteps');
        const bloodResult = document.getElementById('bloodResult');
        const bloodComponents = document.getElementById('bloodComponents');
        const heartResult = document.getElementById('heartResult');
        const heartSteps = document.getElementById('heartSteps');
        const circulatoryResult = document.getElementById('circulatoryResult');
        const circulatorySteps = document.getElementById('circulatorySteps');
        const cellTransportResult = document.getElementById('cellTransportResult');
        const cellTransportSteps = document.getElementById('cellTransportSteps');
        const transpirationCalculation = document.getElementById('transpirationCalculation');
        const bloodFlowResult = document.getElementById('bloodFlowResult');
        const bloodFlowSteps = document.getElementById('bloodFlowSteps');
        const osmosisResult = document.getElementById('osmosisResult');
        const osmosisSteps = document.getElementById('osmosisSteps');
        const plantAnatomyInfo = document.getElementById('plantAnatomyInfo');
        const circulatoryExplorerInfo = document.getElementById('circulatoryExplorerInfo');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupBiologyTools();
            initializeCanvases();
            drawAllDiagrams();
            setupCharts();
            generateBiologyQuiz();
        }

        // Setup biology tools
        function setupBiologyTools() {
            // Initialize with default values
            updateBiologyDisplays();
        }

        // Initialize canvases
        function initializeCanvases() {
            // Xylem canvas
            appState.xylemCanvas = document.getElementById('xylemCanvas');
            appState.xylemCtx = appState.xylemCanvas.getContext('2d');
            
            // Phloem canvas
            appState.phloemCanvas = document.getElementById('phloemCanvas');
            appState.phloemCtx = appState.phloemCanvas.getContext('2d');
            
            // Heart canvas
            appState.heartCanvas = document.getElementById('heartCanvas');
            appState.heartCtx = appState.heartCanvas.getContext('2d');
            
            // Circulatory canvas
            appState.circulatoryCanvas = document.getElementById('circulatoryCanvas');
            appState.circulatoryCtx = appState.circulatoryCanvas.getContext('2d');
            
            // Blood flow canvas
            appState.bloodFlowCanvas = document.getElementById('bloodFlowCanvas');
            appState.bloodFlowCtx = appState.bloodFlowCanvas.getContext('2d');
            
            // Plant anatomy canvas
            appState.plantAnatomyCanvas = document.getElementById('plantAnatomyCanvas');
            appState.plantAnatomyCtx = appState.plantAnatomyCanvas.getContext('2d');
            
            // Circulatory explorer canvas
            appState.circulatoryExplorerCanvas = document.getElementById('circulatoryExplorerCanvas');
            appState.circulatoryExplorerCtx = appState.circulatoryExplorerCanvas.getContext('2d');
        }

        // Draw all diagrams
        function drawAllDiagrams() {
            drawXylemDiagram();
            drawPhloemDiagram();
            drawHeartDiagram();
            drawCirculatoryDiagram();
            drawBloodFlow();
            drawPlantAnatomy();
            drawCirculatoryExplorer();
        }

        // Setup charts
        function setupCharts() {
            updateTranspirationChart();
        }

        // Plant transport functions
        function selectPlantPart(part) {
            appState.selectedPlantPart = part;
            document.querySelectorAll('.plant-part').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.closest('.plant-part').classList.add('selected');
            
            const parts = {
                roots: {
                    title: "Roots in Transport",
                    info: "Roots absorb water and minerals from soil through root hairs.",
                    steps: "1. Root hairs increase surface area<br>2. Water enters by osmosis<br>3. Minerals enter by active transport<br>4. Root pressure helps push water upward"
                },
                stem: {
                    title: "Stem in Transport",
                    info: "Stem contains vascular bundles (xylem and phloem) for transport.",
                    steps: "1. Xylem transports water upward<br>2. Phloem transports food in both directions<br>3. Provides mechanical support<br>4. Can store food and water"
                },
                leaves: {
                    title: "Leaves in Transport",
                    info: "Leaves are sites of photosynthesis and transpiration.",
                    steps: "1. Photosynthesis produces sugars<br>2. Transpiration creates pull for water uptake<br>3. Stomata regulate gas exchange<br>4. Veins contain vascular tissue"
                }
            };
            
            const selected = parts[part];
            plantTransportInfo.innerHTML = `<strong>${selected.title}</strong><br><br>${selected.info}`;
            plantTransportSteps.innerHTML = `<strong>Functions:</strong><br>${selected.steps}`;
            
            plantTransportInfo.classList.add('pulse');
            setTimeout(() => plantTransportInfo.classList.remove('pulse'), 1000);
        }

        function explainPlantTransport() {
            alert(`PLANT TRANSPORT SYSTEMS:

Plants have two main transport systems:

1. XYLEM:
   ‚Ä¢ Transports water and minerals
   ‚Ä¢ Direction: Roots ‚Üí Stem ‚Üí Leaves (upward only)
   ‚Ä¢ Components: Vessels, tracheids, fibers, parenchyma
   ‚Ä¢ Driving forces: Transpiration pull, root pressure, capillarity
   ‚Ä¢ Cells: Dead at maturity, lignified walls

2. PHLOEM:
   ‚Ä¢ Transports organic nutrients (sugars, amino acids)
   ‚Ä¢ Direction: Bidirectional (source to sink)
   ‚Ä¢ Components: Sieve tubes, companion cells, fibers, parenchyma
   ‚Ä¢ Process: Translocation
   ‚Ä¢ Driving force: Pressure flow hypothesis
   ‚Ä¢ Cells: Living at maturity

KEY PROCESSES:
‚Ä¢ Transpiration: Water loss through stomata
‚Ä¢ Translocation: Food movement in phloem
‚Ä¢ Osmosis: Water entry into root hairs
‚Ä¢ Active transport: Mineral uptake

IMPORTANCE:
‚Ä¢ Distributes water and nutrients
‚Ä¢ Transports food to storage organs
‚Ä¢ Supports plant growth and development
‚Ä¢ Maintains turgor pressure`);
        }

        function showPlantCrossSection() {
            alert(`PLANT STEM CROSS-SECTION:

From outside to inside:

1. EPIDERMIS:
   ‚Ä¢ Outer protective layer
   ‚Ä¢ May have cuticle to reduce water loss

2. CORTEX:
   ‚Ä¢ Parenchyma cells for storage
   ‚Ä¢ May contain chloroplasts

3. ENDODERMIS:
   ‚Ä¢ Selective barrier (Casparian strip)
   ‚Ä¢ Controls entry into vascular tissue

4. VASCULAR BUNDLES (arranged in ring):
   ‚Ä¢ XYLEM (inner): Water transport
   ‚Ä¢ PHLOEM (outer): Food transport
   ‚Ä¢ CAMBIUM (between): Growth tissue

5. PITH (center):
   ‚Ä¢ Parenchyma for storage
   ‚Ä¢ May be hollow in some plants

ROOT CROSS-SECTION:
Similar but with vascular tissue in center (not ring).`);
        }

        function demonstrateWaterUptake() {
            alert(`WATER UPTAKE DEMONSTRATION:

EXPERIMENT: Colored water in celery stalk

Procedure:
1. Take a celery stalk with leaves
2. Place in glass with colored water (red or blue dye)
3. Observe after 1-2 hours

Observations:
‚Ä¢ Colored water rises in the stalk
‚Ä¢ Veins in leaves become colored
‚Ä¢ Water reaches leaves through xylem

Explanation:
1. Water enters root hairs by osmosis
2. Moves through cortex to xylem
3. Rises through xylem due to:
   ‚Ä¢ Root pressure (pushes from below)
   ‚Ä¢ Capillarity (water rises in narrow tubes)
   ‚Ä¢ Transpiration pull (pulls from above)

Factors affecting rate:
‚Ä¢ Temperature
‚Ä¢ Humidity
‚Ä¢ Light intensity
‚Ä¢ Wind speed

This demonstrates how plants transport water from roots to leaves.`);
        }

        // Xylem functions
        function drawXylemDiagram() {
            const ctx = appState.xylemCtx;
            const width = appState.xylemCanvas.width;
            const height = appState.xylemCanvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw plant outline
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 3;
            
            // Stem
            ctx.beginPath();
            ctx.moveTo(width/2, 180);
            ctx.lineTo(width/2, 20);
            ctx.stroke();
            
            // Leaves
            ctx.beginPath();
            ctx.moveTo(width/2, 60);
            ctx.lineTo(width/2 - 40, 30);
            ctx.moveTo(width/2, 60);
            ctx.lineTo(width/2 + 40, 30);
            ctx.moveTo(width/2, 100);
            ctx.lineTo(width/2 - 30, 80);
            ctx.moveTo(width/2, 100);
            ctx.lineTo(width/2 + 30, 80);
            ctx.moveTo(width/2, 140);
            ctx.lineTo(width/2 - 35, 110);
            ctx.moveTo(width/2, 140);
            ctx.lineTo(width/2 + 35, 110);
            ctx.stroke();
            
            // Roots
            ctx.beginPath();
            ctx.moveTo(width/2, 180);
            for(let i = 0; i < 5; i++) {
                const x = width/2 - 20 + i * 10;
                ctx.moveTo(width/2, 180);
                ctx.lineTo(x, 200);
            }
            ctx.stroke();
            
            // Draw xylem vessels (blue lines inside stem)
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 3]);
            
            // Xylem vessels
            for(let i = 0; i < 3; i++) {
                const x = width/2 - 15 + i * 15;
                ctx.beginPath();
                ctx.moveTo(x, 180);
                ctx.lineTo(x, 20);
                ctx.stroke();
            }
            ctx.setLineDash([]);
            
            // Labels
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.fillText('Leaves (Transpiration)', width/2 - 40, 25);
            ctx.fillText('Stem (Xylem vessels)', width/2 - 35, height/2);
            ctx.fillText('Roots (Absorption)', width/2 - 30, 190);
            
            // Arrows showing water movement
            ctx.fillStyle = '#2196F3';
            ctx.font = 'bold 16px Arial';
            for(let i = 20; i < 180; i += 30) {
                ctx.fillText('‚Üë', width/2 + 25, i);
            }
        }

        function calculateWaterTransport() {
            const plantHeight = parseFloat(document.getElementById('plantHeight').value) || 100;
            const transpirationRate = parseFloat(document.getElementById('transpirationRate').value) || 5;
            
            // Calculate water transport rate
            const transportRate = transpirationRate; // Simplified
            const timeToTop = plantHeight / 10; // Simplified calculation
            
            xylemResult.innerHTML = `
                <strong>Water Transport Calculation:</strong><br><br>
                <strong>Plant height:</strong> ${plantHeight} cm<br>
                <strong>Transpiration rate:</strong> ${transpirationRate} ml/hour<br><br>
                <strong>Estimated water transport:</strong><br>
                ‚Ä¢ ${transportRate.toFixed(1)} ml/hour<br>
                ‚Ä¢ Time for water to reach top: ${timeToTop.toFixed(1)} hours<br><br>
                <strong>Forces involved:</strong><br>
                ‚Ä¢ Transpiration pull (main force)<br>
                ‚Ä¢ Root pressure (supplementary)<br>
                ‚Ä¢ Capillarity (in narrow vessels)`;
            
            xylemSteps.innerHTML = `
                <strong>Step-by-step water movement:</strong><br>
                1. Water evaporates from leaves (transpiration)<br>
                2. Creates tension (pull) in xylem<br>
                3. Water molecules cohere (stick together)<br>
                4. Water column pulled upward<br>
                5. Root hairs absorb more water from soil<br><br>
                <strong>Xylem structure adapts for:</strong><br>
                ‚Ä¢ Efficient water transport (hollow vessels)<br>
                ‚Ä¢ Strength (lignified walls)<br>
                ‚Ä¢ Prevention of collapse (ring/spiral thickenings)`;
            
            drawXylemDiagram();
            xylemResult.classList.add('pulse');
            setTimeout(() => xylemResult.classList.remove('pulse'), 1000);
        }

        function explainXylem() {
            alert(`XYLEM STRUCTURE AND FUNCTION:

XYLEM COMPONENTS:

1. VESSELS:
   ‚Ä¢ Long, tube-like structures
   ‚Ä¢ End walls broken down forming continuous tubes
   ‚Ä¢ Lignified walls for strength
   ‚Ä¢ Dead at maturity

2. TRACHEIDS:
   ‚Ä¢ Elongated cells with tapered ends
   ‚Ä¢ Walls have pits for water movement
   ‚Ä¢ Found in all vascular plants
   ‚Ä¢ Dead at maturity

3. XYLEM FIBERS:
   ‚Ä¢ Provide mechanical support
   ‚Ä¢ Thick, lignified walls
   ‚Ä¢ Dead cells

4. XYLEM PARENCHYMA:
   ‚Ä¢ Living cells
   ‚Ä¢ Store food and water
   ‚Ä¢ Help in lateral transport

XYLEM ADAPTATIONS:

1. LIGNIFIED WALLS:
   ‚Ä¢ Prevent collapse under tension
   ‚Ä¢ Provide mechanical strength

2. HOLLOW LUMEN:
   ‚Ä¢ Maximum space for water transport
   ‚Ä¢ Reduced resistance to flow

3. PITTED WALLS:
   ‚Ä¢ Allow lateral water movement
   ‚Ä¢ Connect adjacent cells

4. DIFFERENT PATTERNS:
   ‚Ä¢ Annular (rings): Allows stretching
   ‚Ä¢ Spiral: Provides flexibility
   ‚Ä¢ Reticulate: Maximum strength

FUNCTIONS:
1. Transport water and minerals
2. Provide mechanical support
3. Store water and nutrients
4. Involved in sap secretion`);
        }

        function demonstrateCapillarity() {
            alert(`CAPILLARITY DEMONSTRATION:

WHAT IS CAPILLARITY?
‚Ä¢ The ability of water to rise in narrow tubes
‚Ä¢ Due to adhesion (water sticks to tube) and cohesion (water sticks to water)

EXPERIMENT: Paper towel in colored water

Procedure:
1. Place one end of paper towel in colored water
2. Observe water moving up the paper

Observations:
‚Ä¢ Water moves upward against gravity
‚Ä¢ Movement faster in narrower spaces
‚Ä¢ Water front is even

In Plants:
‚Ä¢ Xylem vessels are narrow tubes
‚Ä¢ Capillarity helps water rise
‚Ä¢ Works with transpiration pull

Factors affecting capillarity:
‚Ä¢ Tube diameter (narrower = higher rise)
‚Ä¢ Surface tension of liquid
‚Ä¢ Adhesion between liquid and tube

Mathematical relation:
Height of rise ‚àù 1/radius of tube

Capillarity contributes to water movement in:
‚Ä¢ Small plants
‚Ä¢ Early morning (when transpiration is low)
‚Ä¢ Young seedlings`);
        }

        // Phloem functions
        function drawPhloemDiagram() {
            const ctx = appState.phloemCtx;
            const width = appState.phloemCanvas.width;
            const height = appState.phloemCanvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw plant with source and sink
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 3;
            
            // Plant outline
            ctx.beginPath();
            ctx.moveTo(width/2, 180);  // Roots
            ctx.lineTo(width/2, 20);   // Stem
            ctx.stroke();
            
            // Leaves (source)
            ctx.beginPath();
            ctx.arc(width/2 - 40, 40, 15, 0, Math.PI * 2);
            ctx.arc(width/2 + 40, 40, 15, 0, Math.PI * 2);
            ctx.stroke();
            
            // Fruits (sink)
            ctx.beginPath();
            ctx.arc(width/2 - 30, 150, 10, 0, Math.PI * 2);
            ctx.arc(width/2 + 30, 150, 10, 0, Math.PI * 2);
            ctx.stroke();
            
            // Roots (sink)
            ctx.beginPath();
            for(let i = 0; i < 3; i++) {
                const x = width/2 - 15 + i * 15;
                ctx.moveTo(width/2, 180);
                ctx.lineTo(x, 200);
            }
            ctx.stroke();
            
            // Draw phloem pathways (orange arrows)
            ctx.strokeStyle = '#FF9800';
            ctx.lineWidth = 3;
            ctx.fillStyle = '#FF9800';
            
            // From leaves to roots (downward)
            ctx.beginPath();
            ctx.moveTo(width/2 - 40, 40);
            ctx.lineTo(width/2 - 15, 180);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(width/2 + 40, 40);
            ctx.lineTo(width/2 + 15, 180);
            ctx.stroke();
            
            // From leaves to fruits
            ctx.beginPath();
            ctx.moveTo(width/2 - 40, 55);
            ctx.lineTo(width/2 - 30, 140);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(width/2 + 40, 55);
            ctx.lineTo(width/2 + 30, 140);
            ctx.stroke();
            
            // Arrow heads
            const drawArrow = (x, y, direction) => {
                ctx.beginPath();
                if(direction === 'down') {
                    ctx.moveTo(x, y);
                    ctx.lineTo(x - 5, y - 10);
                    ctx.lineTo(x + 5, y - 10);
                } else {
                    ctx.moveTo(x, y);
                    ctx.lineTo(x - 5, y + 10);
                    ctx.lineTo(x + 5, y + 10);
                }
                ctx.closePath();
                ctx.fill();
            };
            
            // Labels
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.fillText('Source (Leaves)', width/2 - 35, 25);
            ctx.fillText('Sink (Fruits)', width/2 - 25, 135);
            ctx.fillText('Sink (Roots)', width/2 - 25, 190);
            ctx.fillText('Phloem Transport', width/2 - 40, height/2);
            
            ctx.fillStyle = '#FF9800';
            ctx.font = 'bold 12px Arial';
            ctx.fillText('‚Üì Food transport', width/2 - 20, 100);
            ctx.fillText('‚Üì Food transport', width/2 - 20, 160);
        }

        function calculateFoodTransport() {
            const sugarConcentration = parseFloat(document.getElementById('sugarConcentration').value) || 20;
            const transportDistance = parseFloat(document.getElementById('transportDistance').value) || 50;
            
            // Simplified calculations
            const transportRate = sugarConcentration * 0.1; // ml/hour
            const transportTime = transportDistance / 10; // hours
            
            phloemResult.innerHTML = `
                <strong>Food Transport Calculation:</strong><br><br>
                <strong>Sugar concentration:</strong> ${sugarConcentration}%<br>
                <strong>Transport distance:</strong> ${transportDistance} cm<br><br>
                <strong>Estimated transport:</strong><br>
                ‚Ä¢ Rate: ${transportRate.toFixed(1)} ml/hour<br>
                ‚Ä¢ Time: ${transportTime.toFixed(1)} hours for ${transportDistance} cm<br><br>
                <strong>Phloem transport characteristics:</strong><br>
                ‚Ä¢ Bidirectional movement<br>
                ‚Ä¢ Requires living cells<br>
                ‚Ä¢ Active loading/unloading<br>
                ‚Ä¢ Pressure-driven flow`;
            
            phloemSteps.innerHTML = `
                <strong>Pressure Flow Hypothesis:</strong><br>
                1. Sugars loaded into phloem at source (active transport)<br>
                2. Water follows by osmosis (increases pressure)<br>
                3. Pressure pushes sap toward sink<br>
                4. Sugars unloaded at sink (used or stored)<br>
                5. Water returns to xylem<br><br>
                <strong>Key features:</strong><br>
                ‚Ä¢ Source: Where sugars are produced (usually leaves)<br>
                ‚Ä¢ Sink: Where sugars are used/stored (roots, fruits, buds)<br>
                ‚Ä¢ Sieve tubes: Conducting cells with sieve plates<br>
                ‚Ä¢ Companion cells: Provide energy for sieve tubes`;
            
            drawPhloemDiagram();
            phloemResult.classList.add('pulse');
            setTimeout(() => phloemResult.classList.remove('pulse'), 1000);
        }

        function explainPhloem() {
            alert(`PHLOEM STRUCTURE AND FUNCTION:

PHLOEM COMPONENTS:

1. SIEVE TUBE ELEMENTS:
   ‚Ä¢ Long, living cells (but without nucleus at maturity)
   ‚Ä¢ End walls have sieve plates with pores
   ‚Ä¢ Connected end-to-end forming sieve tubes
   ‚Ä¢ Cytoplasm present but reduced

2. COMPANION CELLS:
   ‚Ä¢ Living cells with nucleus and organelles
   ‚Ä¢ Connected to sieve tubes by plasmodesmata
   ‚Ä¢ Provide energy and regulate sieve tube function
   ‚Ä¢ Help in loading/unloading of sugars

3. PHLOEM FIBERS:
   ‚Ä¢ Provide mechanical support
   ‚Ä¢ Also called bast fibers
   ‚Ä¢ Used commercially (e.g., jute, flax)

4. PHLOEM PARENCHYMA:
   ‚Ä¢ Living cells for storage
   ‚Ä¢ Can store starch, fats, tannins
   ‚Ä¢ Help in lateral transport

PHLOEM TRANSPORT MECHANISM:

PRESSURE FLOW HYPOTHESIS:

1. LOADING (at source):
   ‚Ä¢ Sugars actively transported into sieve tubes
   ‚Ä¢ Water follows by osmosis
   ‚Ä¢ Pressure increases in sieve tubes

2. FLOW (through phloem):
   ‚Ä¢ Pressure gradient drives flow
   ‚Ä¢ Moves from high pressure (source) to low pressure (sink)
   ‚Ä¢ Can be bidirectional depending on source-sink

3. UNLOADING (at sink):
   ‚Ä¢ Sugars actively unloaded
   ‚Ä¢ Water moves back to xylem
   ‚Ä¢ Pressure decreases

CHARACTERISTICS:
‚Ä¢ Bidirectional transport possible
‚Ä¢ Requires living tissue
‚Ä¢ Relatively slow (cm/hour)
‚Ä¢ Energy-dependent process

ADAPTATIONS:
‚Ä¢ Sieve plates allow flow but prevent clogging
‚Ä¢ Companion cells provide energy
‚Ä¢ Callose can seal damaged sieve tubes`);
        }

        function demonstrateTranslocation() {
            alert(`TRANSLOCATION DEMONSTRATION:

EXPERIMENT: Radioactive tracer in plants

Procedure (conceptual):
1. Expose leaf to radioactive CO‚ÇÇ (¬π‚Å¥CO‚ÇÇ)
2. Plant performs photosynthesis
3. Trace movement of radioactive sugars

Observations:
‚Ä¢ Radioactivity appears in phloem
‚Ä¢ Moves to growing tips and roots
‚Ä¢ Can move both upward and downward

Real-world example: Aphid feeding

Natural demonstration:
1. Aphids insert stylet into phloem
2. Phloem sap flows out due to pressure
3. Shows phloem is under pressure

Key findings from experiments:
‚Ä¢ Phloem transport requires living cells
‚Ä¢ Sugars move from source to sink
‚Ä¢ Rate: 30-150 cm/hour
‚Ä¢ Temperature affects rate
‚Ä¢ Requires energy (ATP)

Factors affecting translocation:
‚Ä¢ Temperature
‚Ä¢ Metabolic inhibitors
‚Ä¢ Oxygen availability
‚Ä¢ Hormone levels

Importance:
‚Ä¢ Distributes photosynthesis products
‚Ä¢ Supports growth in different plant parts
‚Ä¢ Stores food for future use`);
        }

        // Transpiration functions
        function calculateTranspirationRate() {
            const temperature = parseFloat(document.getElementById('temperature').value) || 25;
            const humidity = parseFloat(document.getElementById('humidity').value) || 50;
            
            // Simplified calculation
            let transpirationRate = temperature * (100 - humidity) / 100;
            transpirationRate = Math.max(1, Math.min(10, transpirationRate)); // Limit 1-10 ml/hour
            
            const factors = [];
            if(temperature > 25) factors.push("High temperature increases transpiration");
            if(humidity < 50) factors.push("Low humidity increases transpiration");
            if(temperature < 20) factors.push("Low temperature decreases transpiration");
            if(humidity > 70) factors.push("High humidity decreases transpiration");
            
            transpirationResult.innerHTML = `
                <strong>Transpiration Rate Calculation:</strong><br><br>
                <strong>Temperature:</strong> ${temperature}¬∞C<br>
                <strong>Humidity:</strong> ${humidity}%<br><br>
                <strong>Estimated transpiration rate:</strong> ${transpirationRate.toFixed(1)} ml/hour<br><br>
                <strong>Factors affecting rate:</strong><br>
                ‚Ä¢ ${factors.join('<br>‚Ä¢ ')}`;
            
            transpirationSteps.innerHTML = `
                <strong>Transpiration process:</strong><br>
                1. Water evaporates from mesophyll cells<br>
                2. Water vapor diffuses through air spaces<br>
                3. Exits through stomata<br>
                4. Creates transpiration pull<br><br>
                <strong>Benefits of transpiration:</strong><br>
                ‚Ä¢ Creates pull for water and mineral transport<br>
                ‚Ä¢ Cools plant (evaporative cooling)<br>
                ‚Ä¢ Maintains turgor pressure<br>
                ‚Ä¢ Helps mineral absorption<br><br>
                <strong>Stomatal regulation:</strong><br>
                ‚Ä¢ Open during day for gas exchange<br>
                ‚Ä¢ Close at night to conserve water<br>
                ‚Ä¢ Guard cells control opening/closing`;
            
            transpirationResult.classList.add('pulse');
            setTimeout(() => transpirationResult.classList.remove('pulse'), 1000);
        }

        function explainTranspiration() {
            alert(`TRANSPIRATION: THE PLANT'S WATER LOSS

WHAT IS TRANSPIRATION?
‚Ä¢ Evaporation of water from aerial parts of plants
‚Ä¢ Mainly through stomata (90%)
‚Ä¢ Also through cuticle and lenticels

PROCESS:
1. Water evaporates from mesophyll cells
2. Water vapor diffuses through intercellular spaces
3. Exits through stomata into atmosphere

FACTORS AFFECTING RATE:

1. ENVIRONMENTAL FACTORS:
   ‚Ä¢ TEMPERATURE: ‚Üë temperature = ‚Üë transpiration
   ‚Ä¢ HUMIDITY: ‚Üë humidity = ‚Üì transpiration
   ‚Ä¢ LIGHT: ‚Üë light = ‚Üë transpiration (stomata open)
   ‚Ä¢ WIND: Moderate wind = ‚Üë transpiration

2. PLANT FACTORS:
   ‚Ä¢ Leaf area and structure
   ‚Ä¢ Number and distribution of stomata
   ‚Ä¢ Root-shoot ratio
   ‚Ä¢ Cuticle thickness

STOMATAL MECHANISM:
‚Ä¢ Guard cells control stomatal opening
‚Ä¢ Take up K‚Å∫ ions ‚Üí Water enters by osmosis ‚Üí Cells swell ‚Üí Stoma opens
‚Ä¢ Lose K‚Å∫ ions ‚Üí Water leaves ‚Üí Cells shrink ‚Üí Stoma closes

IMPORTANCE:
1. TRANSPIRATION PULL:
   ‚Ä¢ Main force for water ascent in xylem
   ‚Ä¢ Creates continuous water column

2. MINERAL TRANSPORT:
   ‚Ä¢ Minerals dissolved in water stream
   ‚Ä¢ Carried to all plant parts

3. TEMPERATURE REGULATION:
   ‚Ä¢ Evaporative cooling
   ‚Ä¢ Prevents overheating

4. TURGOR MAINTENANCE:
   ‚Ä¢ Helps maintain cell rigidity

MEASUREMENT METHODS:
‚Ä¢ Potometer: Measures water uptake
‚Ä¢ Cobalt chloride paper: Shows water loss
‚Ä¢ Weighing method: Measures weight loss`);
        }

        function showFactorsAffecting() {
            alert(`FACTORS AFFECTING TRANSPIRATION RATE:

1. LIGHT:
   ‚Ä¢ Stomata open in light for photosynthesis
   ‚Ä¢ Increases transpiration rate
   ‚Ä¢ Blue light receptors trigger opening

2. TEMPERATURE:
   ‚Ä¢ Higher temperature increases evaporation
   ‚Ä¢ Also affects stomatal opening
   ‚Ä¢ Optimal: 20-30¬∞C for most plants

3. HUMIDITY:
   ‚Ä¢ Higher humidity reduces diffusion gradient
   ‚Ä¢ Slows transpiration rate
   ‚Ä¢ Dry air increases transpiration

4. WIND:
   ‚Ä¢ Gentle wind removes water vapor near leaf
   ‚Ä¢ Increases diffusion gradient
   ‚Ä¢ Very strong wind may close stomata

5. SOIL WATER AVAILABILITY:
   ‚Ä¢ Water shortage triggers stomatal closure
   ‚Ä¢ Reduces transpiration to conserve water
   ‚Ä¢ Can lead to wilting

6. CARBON DIOXIDE CONCENTRATION:
   ‚Ä¢ High CO‚ÇÇ causes stomatal closure
   ‚Ä¢ Low CO‚ÇÇ causes stomatal opening

7. PLANT ADAPTATIONS:
   ‚Ä¢ Sunken stomata (reduce water loss)
   ‚Ä¢ Thick cuticle (reduce evaporation)
   ‚Ä¢ Reduced leaf area (desert plants)
   ‚Ä¢ Hairy leaves (trap moisture)

EXPERIMENT TO SHOW FACTORS:

1. Take four similar potted plants
2. Place in different conditions:
   ‚Ä¢ Plant A: Bright light, normal conditions
   ‚Ä¢ Plant B: Dark, normal conditions
   ‚Ä¢ Plant C: Bright light, plastic bag (high humidity)
   ‚Ä¢ Plant D: Bright light, fan (wind)
3. Compare water loss after 24 hours

RESULTS:
‚Ä¢ Plant A: Maximum transpiration
‚Ä¢ Plant B: Minimum transpiration (stomata closed)
‚Ä¢ Plant C: Reduced transpiration
‚Ä¢ Plant D: Increased transpiration`);
        }

        // Blood components functions
        function selectBloodCell(type) {
            appState.selectedBloodCell = type;
            document.querySelectorAll('.blood-cell').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            const cells = {
                rbc: {
                    name: "Red Blood Cells (Erythrocytes)",
                    info: "Carry oxygen from lungs to tissues and carbon dioxide back to lungs.",
                    details: "‚Ä¢ No nucleus (in mammals)<br>‚Ä¢ Biconcave shape (increases surface area)<br>‚Ä¢ Contains hemoglobin (iron-protein)<br>‚Ä¢ Life span: 120 days<br>‚Ä¢ Produced in bone marrow"
                },
                wbc: {
                    name: "White Blood Cells (Leukocytes)",
                    info: "Defend against infection and disease.",
                    details: "‚Ä¢ Have nucleus<br>‚Ä¢ Larger than RBCs<br>‚Ä¢ Can move independently (amoeboid)<br>‚Ä¢ Types: Neutrophils, Lymphocytes, Monocytes, Eosinophils, Basophils<br>‚Ä¢ Life span: Hours to years"
                },
                platelet: {
                    name: "Platelets (Thrombocytes)",
                    info: "Help in blood clotting to prevent bleeding.",
                    details: "‚Ä¢ Cell fragments (not complete cells)<br>‚Ä¢ No nucleus<br>‚Ä¢ Release clotting factors<br>‚Ä¢ Life span: 8-10 days<br>‚Ä¢ Produced in bone marrow"
                }
            };
            
            const selected = cells[type];
            bloodResult.innerHTML = `<strong>${selected.name}</strong><br><br>${selected.info}<br><br>${selected.details}`;
            
            bloodResult.classList.add('pulse');
            setTimeout(() => bloodResult.classList.remove('pulse'), 1000);
        }

        function calculateBloodComponents() {
            const bloodVolume = parseFloat(document.getElementById('bloodVolume').value) || 5;
            
            const plasmaVolume = bloodVolume * 0.55;
            const rbcVolume = bloodVolume * 0.45;
            const wbcCount = bloodVolume * 7000; // Approximate per microliter
            const plateletCount = bloodVolume * 250000; // Approximate per microliter
            
            bloodResult.innerHTML = `
                <strong>Blood Composition Analysis:</strong><br><br>
                <strong>Total blood volume:</strong> ${bloodVolume} liters<br><br>
                <strong>Components by volume:</strong><br>
                ‚Ä¢ Plasma: ${plasmaVolume.toFixed(1)} L (55%)<br>
                ‚Ä¢ Red blood cells: ${rbcVolume.toFixed(1)} L (45%)<br><br>
                <strong>Approximate cell counts:</strong><br>
                ‚Ä¢ RBCs: 4.5-6.5 million/ŒºL<br>
                ‚Ä¢ WBCs: 4,000-11,000/ŒºL<br>
                ‚Ä¢ Platelets: 150,000-400,000/ŒºL`;
            
            bloodComponents.innerHTML = `
                <div class="component-item">
                    <div class="component-function">Plasma (55%)</div>
                    <div class="component-value">${plasmaVolume.toFixed(1)} L</div>
                </div>
                <div class="component-item">
                    <div class="component-function">RBCs (45%)</div>
                    <div class="component-value">${rbcVolume.toFixed(1)} L</div>
                </div>
                <div class="component-item">
                    <div class="component-function">WBCs & Platelets</div>
                    <div class="component-value"><1%</div>
                </div>
                <div class="component-item">
                    <div class="component-function">Hematocrit</div>
                    <div class="component-value">45%</div>
                </div>`;
            
            bloodResult.classList.add('pulse');
            bloodComponents.classList.add('pulse');
            setTimeout(() => {
                bloodResult.classList.remove('pulse');
                bloodComponents.classList.remove('pulse');
            }, 1000);
        }

        function explainBloodComponents() {
            alert(`BLOOD COMPONENTS AND FUNCTIONS:

BLOOD COMPOSITION:

1. PLASMA (55%):
   ‚Ä¢ 90% Water
   ‚Ä¢ 7% Proteins (Albumin, Globulins, Fibrinogen)
   ‚Ä¢ 2% Other solutes (Nutrients, Gases, Hormones, Wastes, Electrolytes)

   FUNCTIONS:
   ‚Ä¢ Transport medium
   ‚Ä¢ Maintains pH and osmotic balance
   ‚Ä¢ Contains clotting factors
   ‚Ä¢ Distributes heat

2. FORMED ELEMENTS (45%):

   A. RED BLOOD CELLS (Erythrocytes):
      ‚Ä¢ Count: 4.5-6.5 million/ŒºL
      ‚Ä¢ Function: Oxygen and carbon dioxide transport
      ‚Ä¢ Features: Biconcave, no nucleus (mammals), hemoglobin
      ‚Ä¢ Life span: 120 days

   B. WHITE BLOOD CELLS (Leukocytes):
      ‚Ä¢ Count: 4,000-11,000/ŒºL
      ‚Ä¢ Function: Immunity and defense
      ‚Ä¢ Types:
        1. Granulocytes: Neutrophils, Eosinophils, Basophils
        2. Agranulocytes: Lymphocytes, Monocytes

   C. PLATELETS (Thrombocytes):
      ‚Ä¢ Count: 150,000-400,000/ŒºL
      ‚Ä¢ Function: Blood clotting
      ‚Ä¢ Features: Cell fragments, no nucleus
      ‚Ä¢ Life span: 8-10 days

BLOOD FUNCTIONS:
1. Transport: O‚ÇÇ, CO‚ÇÇ, nutrients, wastes, hormones
2. Regulation: pH, temperature, water balance
3. Protection: Clotting, immunity, defense

BLOOD PROPERTIES:
‚Ä¢ pH: 7.35-7.45 (slightly alkaline)
‚Ä¢ Viscosity: 3-4 times thicker than water
‚Ä¢ Temperature: ~38¬∞C (slightly higher than body temp)
‚Ä¢ Volume: 4-6 liters in adults`);
        }

        function showBloodFunctions() {
            alert(`FUNCTIONS OF BLOOD:

1. TRANSPORT FUNCTIONS:
   ‚Ä¢ OXYGEN: From lungs to tissues (via hemoglobin)
   ‚Ä¢ CARBON DIOXIDE: From tissues to lungs
   ‚Ä¢ NUTRIENTS: From digestive system to cells
   ‚Ä¢ WASTES: From cells to excretory organs
   ‚Ä¢ HORMONES: From endocrine glands to target organs
   ‚Ä¢ HEAT: From muscles and liver to skin

2. REGULATORY FUNCTIONS:
   ‚Ä¢ pH BALANCE: Buffers maintain blood pH 7.35-7.45
   ‚Ä¢ BODY TEMPERATURE: Distributes and regulates heat
   ‚Ä¢ WATER BALANCE: Maintains osmotic pressure
   ‚Ä¢ ELECTROLYTE BALANCE: Maintains ion concentrations

3. PROTECTIVE FUNCTIONS:
   ‚Ä¢ CLOTTING: Prevents blood loss (platelets and clotting factors)
   ‚Ä¢ IMMUNITY: White blood cells defend against pathogens
   ‚Ä¢ DETOXIFICATION: Removes toxins and waste products

SPECIFIC TRANSPORT MECHANISMS:

OXYGEN TRANSPORT:
‚Ä¢ 97% bound to hemoglobin (oxyhemoglobin)
‚Ä¢ 3% dissolved in plasma
‚Ä¢ Each hemoglobin carries 4 oxygen molecules

CARBON DIOXIDE TRANSPORT:
‚Ä¢ 70% as bicarbonate ions (HCO‚ÇÉ‚Åª)
‚Ä¢ 23% bound to hemoglobin (carbaminohemoglobin)
‚Ä¢ 7% dissolved in plasma

NUTRIENT TRANSPORT:
‚Ä¢ Glucose, amino acids, vitamins, minerals
‚Ä¢ Dissolved in plasma or bound to proteins

WASTE REMOVAL:
‚Ä¢ Urea, uric acid, creatinine
‚Ä¢ Carried to kidneys for excretion

CLOTTING PROCESS:
1. Vascular spasm (constriction)
2. Platelet plug formation
3. Coagulation (fibrin mesh)
4. Clot retraction
5. Fibrinolysis (clot dissolution)

BLOOD GROUPS:
‚Ä¢ ABO system: A, B, AB, O
‚Ä¢ Rh system: Positive or negative
‚Ä¢ Important for transfusions`);
        }

        // Heart structure functions
        function drawHeartDiagram() {
            const ctx = appState.heartCtx;
            const width = appState.heartCanvas.width;
            const height = appState.heartCanvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw heart outline
            ctx.strokeStyle = '#F44336';
            ctx.lineWidth = 3;
            ctx.fillStyle = 'rgba(244, 67, 54, 0.1)';
            
            // Simplified heart shape
            ctx.beginPath();
            ctx.moveTo(width/2, 50);
            ctx.bezierCurveTo(width/2 + 40, 30, width/2 + 60, 80, width/2 + 40, 120);
            ctx.bezierCurveTo(width/2 + 30, 150, width/2, 140, width/2 - 40, 120);
            ctx.bezierCurveTo(width/2 - 60, 80, width/2 - 40, 30, width/2, 50);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw chambers
            ctx.strokeStyle = '#9C27B0';
            ctx.lineWidth = 2;
            ctx.fillStyle = 'rgba(156, 39, 176, 0.1)';
            
            // Right atrium
            ctx.beginPath();
            ctx.ellipse(width/2 - 20, 70, 15, 20, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Right ventricle
            ctx.beginPath();
            ctx.ellipse(width/2 - 15, 110, 20, 25, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Left atrium
            ctx.beginPath();
            ctx.ellipse(width/2 + 20, 70, 15, 20, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Left ventricle
            ctx.beginPath();
            ctx.ellipse(width/2 + 15, 110, 20, 25, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '12px Arial';
            ctx.fillText('Right Atrium', width/2 - 40, 65);
            ctx.fillText('Right Ventricle', width/2 - 40, 115);
            ctx.fillText('Left Atrium', width/2 + 15, 65);
            ctx.fillText('Left Ventricle', width/2 + 15, 115);
            
            // Arrows for blood flow
            ctx.fillStyle = '#F44336';
            ctx.font = 'bold 14px Arial';
            
            // Deoxygenated blood (blue)
            ctx.fillStyle = '#2196F3';
            ctx.fillText('‚Üí', width/2 - 35, 85);  // RA to RV
            ctx.fillText('‚Üí', width/2 - 10, 100); // RV to lungs
            
            // Oxygenated blood (red)
            ctx.fillStyle = '#F44336';
            ctx.fillText('‚Üí', width/2 + 10, 85);  // LA to LV
            ctx.fillText('‚Üí', width/2 + 35, 100); // LV to body
            
            // Major vessels
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            
            // Aorta
            ctx.beginPath();
            ctx.moveTo(width/2 + 30, 90);
            ctx.lineTo(width/2 + 60, 70);
            ctx.stroke();
            ctx.fillText('Aorta', width/2 + 45, 65);
            
            // Pulmonary artery
            ctx.beginPath();
            ctx.moveTo(width/2 - 30, 90);
            ctx.lineTo(width/2 - 60, 70);
            ctx.stroke();
            ctx.fillText('Pulmonary', width/2 - 65, 65);
            ctx.fillText('Artery', width/2 - 60, 78);
            
            // Vena cava
            ctx.beginPath();
            ctx.moveTo(width/2 - 25, 60);
            ctx.lineTo(width/2 - 50, 40);
            ctx.stroke();
            ctx.fillText('Vena Cava', width/2 - 55, 35);
            
            // Pulmonary veins
            ctx.beginPath();
            ctx.moveTo(width/2 + 25, 60);
            ctx.lineTo(width/2 + 50, 40);
            ctx.stroke();
            ctx.fillText('Pulmonary', width/2 + 40, 35);
            ctx.fillText('Veins', width/2 + 45, 48);
        }

        function selectHeartChamber(chamber) {
            appState.selectedHeartChamber = chamber;
            document.querySelectorAll('.heart-chamber').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.closest('.heart-chamber').classList.add('selected');
            
            const chambers = {
                ra: {
                    name: "Right Atrium",
                    info: "Receives deoxygenated blood from body via vena cava.",
                    details: "‚Ä¢ Upper right chamber<br>‚Ä¢ Thin-walled<br>‚Ä¢ Receives blood from:<br>  - Superior vena cava (upper body)<br>  - Inferior vena cava (lower body)<br>‚Ä¢ Pumps blood to right ventricle"
                },
                rv: {
                    name: "Right Ventricle",
                    info: "Pumps deoxygenated blood to lungs via pulmonary artery.",
                    details: "‚Ä¢ Lower right chamber<br>‚Ä¢ Moderately thick walls<br>‚Ä¢ Has tricuspid valve (3 cusps)<br>‚Ä¢ Pumps to pulmonary artery<br>‚Ä¢ Pulmonary circulation starts here"
                },
                la: {
                    name: "Left Atrium",
                    info: "Receives oxygenated blood from lungs via pulmonary veins.",
                    details: "‚Ä¢ Upper left chamber<br>‚Ä¢ Thin-walled<br>‚Ä¢ Receives blood from 4 pulmonary veins<br>‚Ä¢ Pumps blood to left ventricle<br>‚Ä¢ Strongest atrial contraction"
                },
                lv: {
                    name: "Left Ventricle",
                    info: "Pumps oxygenated blood to body via aorta.",
                    details: "‚Ä¢ Lower left chamber<br>‚Ä¢ Thickest walls (3x thicker than RV)<br>‚Ä¢ Has bicuspid/mitral valve (2 cusps)<br>‚Ä¢ Pumps to aorta (largest artery)<br>‚Ä¢ Systemic circulation starts here"
                }
            };
            
            const selected = chambers[chamber];
            heartResult.innerHTML = `<strong>${selected.name}</strong><br><br>${selected.info}<br><br>${selected.details}`;
            
            heartResult.classList.add('pulse');
            setTimeout(() => heartResult.classList.remove('pulse'), 1000);
        }

        function explainHeartStructure() {
            alert(`HEART STRUCTURE AND FUNCTION:

HEART ANATOMY:

EXTERNAL FEATURES:
‚Ä¢ Size: Fist-sized
‚Ä¢ Location: Mediastinum (between lungs)
‚Ä¢ Orientation: Apex points left
‚Ä¢ Pericardium: Protective sac

INTERNAL STRUCTURE (4 CHAMBERS):

1. RIGHT ATRIUM:
   ‚Ä¢ Receives deoxygenated blood from body
   ‚Ä¢ Via superior and inferior vena cava
   ‚Ä¢ Coronary sinus drains heart muscle blood

2. RIGHT VENTRICLE:
   ‚Ä¢ Receives blood from right atrium
   ‚Ä¢ Pumps to lungs via pulmonary artery
   ‚Ä¢ Has tricuspid valve (right AV valve)

3. LEFT ATRIUM:
   ‚Ä¢ Receives oxygenated blood from lungs
   ‚Ä¢ Via 4 pulmonary veins
   ‚Ä¢ Strongest atrial contraction

4. LEFT VENTRICLE:
   ‚Ä¢ Receives blood from left atrium
   ‚Ä¢ Pumps to body via aorta
   ‚Ä¢ Has bicuspid/mitral valve (left AV valve)
   ‚Ä¢ Thickest walls (high pressure needed)

VALVES OF THE HEART:

ATRIOVENTRICULAR (AV) VALVES:
1. Tricuspid valve (right side): 3 cusps
2. Bicuspid/Mitral valve (left side): 2 cusps
‚Ä¢ Prevent backflow into atria during ventricular contraction

SEMILUNAR VALVES:
1. Pulmonary valve (right ventricle ‚Üí pulmonary artery)
2. Aortic valve (left ventricle ‚Üí aorta)
‚Ä¢ Prevent backflow into ventricles during relaxation

HEART WALL LAYERS:
1. Epicardium: Outer layer
2. Myocardium: Middle, muscular layer
3. Endocardium: Inner lining

CORONARY CIRCULATION:
‚Ä¢ Right and left coronary arteries
‚Ä¢ Supply oxygen to heart muscle
‚Ä¢ Blockage causes heart attack

CARDIAC CYCLE:
1. Atrial systole: Atria contract
2. Ventricular systole: Ventricles contract
3. Diastole: Chambers relax

HEART SOUNDS:
‚Ä¢ LUB (S1): AV valves closing
‚Ä¢ DUB (S2): Semilunar valves closing`);
        }

        function showBloodPathway() {
            alert(`BLOOD PATHWAY THROUGH THE HEART:

DOUBLE CIRCULATION PATHWAY:

1. PULMONARY CIRCULATION (Right side):
   ‚Ä¢ Deoxygenated blood from body ‚Üí Superior/Inferior vena cava
   ‚Üí Right atrium ‚Üí Tricuspid valve ‚Üí Right ventricle
   ‚Üí Pulmonary valve ‚Üí Pulmonary artery ‚Üí Lungs
   ‚Üí Oxygenation occurs in lung capillaries

2. SYSTEMIC CIRCULATION (Left side):
   ‚Ä¢ Oxygenated blood from lungs ‚Üí Pulmonary veins
   ‚Üí Left atrium ‚Üí Bicuspid/Mitral valve ‚Üí Left ventricle
   ‚Üí Aortic valve ‚Üí Aorta ‚Üí Body tissues
   ‚Üí Oxygen delivery in tissue capillaries

COMPLETE CIRCUIT:
Body ‚Üí Vena cava ‚Üí Right atrium ‚Üí Right ventricle
‚Üí Lungs ‚Üí Pulmonary veins ‚Üí Left atrium ‚Üí Left ventricle
‚Üí Aorta ‚Üí Body

TIME FOR COMPLETE CIRCUIT:
‚Ä¢ Total circulation time: ~1 minute
‚Ä¢ Pulmonary circuit: 5-10 seconds
‚Ä¢ Systemic circuit: 50-55 seconds

BLOOD OXYGEN CONTENT:
‚Ä¢ Vena cava: 75% saturated
‚Ä¢ Pulmonary artery: 75% saturated
‚Ä¢ Pulmonary veins: 98% saturated
‚Ä¢ Aorta: 98% saturated

PRESSURE DIFFERENCES:
‚Ä¢ Right ventricle: 25/5 mmHg
‚Ä¢ Left ventricle: 120/80 mmHg
‚Ä¢ Pulmonary artery: 25/10 mmHg
‚Ä¢ Aorta: 120/80 mmHg

SPECIAL FEATURES:
‚Ä¢ Coronary circulation: Supplies heart muscle
‚Ä¢ Hepatic portal system: Liver circulation
‚Ä¢ Renal circulation: Kidney filtration
‚Ä¢ Cerebral circulation: Brain blood supply`);
        }

        function calculateHeartRate() {
            const heartRate = parseFloat(document.getElementById('heartRate').value) || 72;
            
            // Calculations
            const beatsPerDay = heartRate * 60 * 24;
            const beatsPerYear = beatsPerDay * 365;
            const cardiacOutput = heartRate * 70 / 1000; // Approximate stroke volume 70ml
            
            heartResult.innerHTML = `
                <strong>Heart Rate Analysis:</strong><br><br>
                <strong>Heart rate:</strong> ${heartRate} beats per minute (bpm)<br><br>
                <strong>Daily calculations:</strong><br>
                ‚Ä¢ Beats per day: ${beatsPerDay.toLocaleString()}<br>
                ‚Ä¢ Beats per year: ${beatsPerYear.toLocaleString()}<br>
                ‚Ä¢ Cardiac output: ${cardiacOutput.toFixed(1)} L/min<br><br>
                <strong>Heart rate categories:</strong><br>
                ‚Ä¢ Normal resting: 60-100 bpm<br>
                ‚Ä¢ Bradycardia: <60 bpm<br>
                ‚Ä¢ Tachycardia: >100 bpm<br><br>
                <strong>Factors affecting heart rate:</strong><br>
                ‚Ä¢ Age, fitness level, emotions<br>
                ‚Ä¢ Body temperature, hormones<br>
                ‚Ä¢ Medications, physical activity`;
            
            heartSteps.innerHTML = `
                <strong>Cardiac output calculation:</strong><br>
                Cardiac Output = Heart Rate √ó Stroke Volume<br>
                = ${heartRate} bpm √ó 70 mL/beat<br>
                = ${(heartRate * 70).toFixed(0)} mL/min<br>
                = ${cardiacOutput.toFixed(1)} L/min<br><br>
                <strong>Stroke Volume:</strong> Amount of blood pumped per beat<br>
                <strong>Cardiac Output:</strong> Amount of blood pumped per minute<br><br>
                <strong>Average values:</strong><br>
                ‚Ä¢ Resting stroke volume: 70 mL<br>
                ‚Ä¢ Resting cardiac output: 5 L/min<br>
                ‚Ä¢ During exercise: Up to 25 L/min`;
            
            heartResult.classList.add('pulse');
            setTimeout(() => heartResult.classList.remove('pulse'), 1000);
        }

        // Circulatory system functions
        function drawCirculatoryDiagram() {
            const ctx = appState.circulatoryCtx;
            const width = appState.circulatoryCanvas.width;
            const height = appState.circulatoryCanvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw body outline
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            
            // Simple body shape
            ctx.beginPath();
            ctx.arc(width/2, 50, 20, 0, Math.PI * 2); // Head
            ctx.moveTo(width/2, 70);
            ctx.lineTo(width/2, 150); // Body
            ctx.moveTo(width/2, 90);
            ctx.lineTo(width/2 - 30, 120); // Left arm
            ctx.moveTo(width/2, 90);
            ctx.lineTo(width/2 + 30, 120); // Right arm
            ctx.moveTo(width/2, 150);
            ctx.lineTo(width/2 - 20, 180); // Left leg
            ctx.moveTo(width/2, 150);
            ctx.lineTo(width/2 + 20, 180); // Right leg
            ctx.stroke();
            
            // Draw heart
            ctx.fillStyle = 'rgba(244, 67, 54, 0.3)';
            ctx.beginPath();
            ctx.arc(width/2, 100, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#F44336';
            ctx.stroke();
            
            // Draw arteries (red - away from heart)
            ctx.strokeStyle = '#F44336';
            ctx.lineWidth = 3;
            
            // Aorta and major arteries
            ctx.beginPath();
            ctx.moveTo(width/2, 85); // From heart
            ctx.lineTo(width/2, 50); // To head
            ctx.lineTo(width/2 - 15, 40); // Left carotid
            ctx.moveTo(width/2, 50);
            ctx.lineTo(width/2 + 15, 40); // Right carotid
            
            ctx.moveTo(width/2, 100);
            ctx.lineTo(width/2 - 25, 110); // Left subclavian
            ctx.lineTo(width/2 - 30, 120); // Left arm
            
            ctx.moveTo(width/2, 100);
            ctx.lineTo(width/2 + 25, 110); // Right subclavian
            ctx.lineTo(width/2 + 30, 120); // Right arm
            
            ctx.moveTo(width/2, 115);
            ctx.lineTo(width/2, 150); // Descending aorta
            ctx.lineTo(width/2 - 10, 160); // Left iliac
            ctx.lineTo(width/2 - 20, 180); // Left leg
            
            ctx.moveTo(width/2, 150);
            ctx.lineTo(width/2 + 10, 160); // Right iliac
            ctx.lineTo(width/2 + 20, 180); // Right leg
            ctx.stroke();
            
            // Draw veins (blue - to heart)
            ctx.strokeStyle = '#2196F3';
            
            // Major veins
            ctx.beginPath();
            ctx.moveTo(width/2 - 15, 45); // From head
            ctx.lineTo(width/2, 60);
            ctx.moveTo(width/2 + 15, 45);
            ctx.lineTo(width/2, 60);
            
            ctx.moveTo(width/2 - 30, 125); // From left arm
            ctx.lineTo(width/2 - 25, 115);
            ctx.lineTo(width/2, 125);
            
            ctx.moveTo(width/2 + 30, 125); // From right arm
            ctx.lineTo(width/2 + 25, 115);
            ctx.lineTo(width/2, 125);
            
            ctx.moveTo(width/2 - 20, 185); // From left leg
            ctx.lineTo(width/2 - 10, 165);
            ctx.lineTo(width/2, 140);
            
            ctx.moveTo(width/2 + 20, 185); // From right leg
            ctx.lineTo(width/2 + 10, 165);
            ctx.lineTo(width/2, 140);
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '12px Arial';
            ctx.fillText('Heart', width/2 - 10, 95);
            ctx.fillText('Arteries', width/2 + 30, 130);
            ctx.fillText('Veins', width/2 - 30, 130);
            ctx.fillText('Oxygenated', width/2 - 25, 30);
            ctx.fillText('Deoxygenated', width/2 - 30, 170);
            
            // Color indicators
            ctx.fillStyle = '#F44336';
            ctx.fillRect(width - 50, 20, 30, 10);
            ctx.fillStyle = '#2196F3';
            ctx.fillRect(width - 50, 35, 30, 10);
            
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '10px Arial';
            ctx.fillText('Arteries', width - 50, 18);
            ctx.fillText('Veins', width - 50, 33);
        }

        function selectCirculation(type) {
            appState.selectedCirculation = type;
            document.querySelectorAll('.process-item').forEach(el => {
                el.classList.remove('highlight');
            });
            event.target.classList.add('highlight');
            
            const circulations = {
                pulmonary: {
                    name: "Pulmonary Circulation",
                    info: "Circulation between heart and lungs.",
                    path: "Right ventricle ‚Üí Pulmonary artery ‚Üí Lungs ‚Üí Pulmonary veins ‚Üí Left atrium",
                    purpose: "Oxygenates blood and removes CO‚ÇÇ",
                    features: "‚Ä¢ Low pressure circuit<br>‚Ä¢ Short distance<br>‚Ä¢ Only artery carrying deoxygenated blood<br>‚Ä¢ Only veins carrying oxygenated blood"
                },
                systemic: {
                    name: "Systemic Circulation",
                    info: "Circulation between heart and body tissues.",
                    path: "Left ventricle ‚Üí Aorta ‚Üí Arteries ‚Üí Capillaries ‚Üí Veins ‚Üí Vena cava ‚Üí Right atrium",
                    purpose: "Delivers oxygen and nutrients, removes wastes",
                    features: "‚Ä¢ High pressure circuit<br>‚Ä¢ Long distance<br>‚Ä¢ Contains 84% of blood volume<br>‚Ä¢ Multiple parallel circuits"
                },
                coronary: {
                    name: "Coronary Circulation",
                    info: "Circulation to heart muscle itself.",
                    path: "Aorta ‚Üí Coronary arteries ‚Üí Heart muscle ‚Üí Coronary veins ‚Üí Coronary sinus ‚Üí Right atrium",
                    purpose: "Supplies oxygen to heart muscle",
                    features: "‚Ä¢ Blood flow during diastole<br>‚Ä¢ High oxygen extraction<br>‚Ä¢ Collateral circulation<br>‚Ä¢ Blockage causes heart attack"
                },
                portal: {
                    name: "Hepatic Portal Circulation",
                    info: "Circulation from digestive organs to liver.",
                    path: "Digestive organs ‚Üí Hepatic portal vein ‚Üí Liver ‚Üí Hepatic vein ‚Üí Inferior vena cava",
                    purpose: "Processes nutrients, detoxifies blood",
                    features: "‚Ä¢ Two capillary beds<br>‚Ä¢ No oxygen exchange<br>‚Ä¢ Nutrient processing<br>‚Ä¢ Detoxification"
                }
            };
            
            const selected = circulations[type];
            circulatoryResult.innerHTML = `
                <strong>${selected.name}</strong><br><br>
                <strong>Function:</strong> ${selected.info}<br><br>
                <strong>Pathway:</strong><br>${selected.path}<br><br>
                <strong>Purpose:</strong> ${selected.purpose}<br><br>
                <strong>Features:</strong><br>${selected.features}`;
            
            circulatoryResult.classList.add('pulse');
            setTimeout(() => circulatoryResult.classList.remove('pulse'), 1000);
        }

        function explainCirculatorySystem() {
            alert(`CIRCULATORY SYSTEM OVERVIEW:

COMPONENTS:
1. HEART: Muscular pump (4 chambers)
2. BLOOD VESSELS: Transport network
3. BLOOD: Transport medium

TYPES OF CIRCULATION:

1. PULMONARY CIRCULATION:
   ‚Ä¢ Right heart ‚Üí Lungs ‚Üí Left heart
   ‚Ä¢ Purpose: Gas exchange (O‚ÇÇ in, CO‚ÇÇ out)
   ‚Ä¢ Unique: Pulmonary artery (deoxygenated)
                Pulmonary veins (oxygenated)

2. SYSTEMIC CIRCULATION:
   ‚Ä¢ Left heart ‚Üí Body ‚Üí Right heart
   ‚Ä¢ Purpose: Nutrient/waste exchange
   ‚Ä¢ Includes: Coronary, cerebral, renal, etc.

3. PORTAL CIRCULATION:
   ‚Ä¢ Between two capillary beds
   ‚Ä¢ Examples: Hepatic portal, Hypophyseal portal

BLOOD VESSEL TYPES:

ARTERIES:
‚Ä¢ Carry blood AWAY from heart
‚Ä¢ Thick, muscular, elastic walls
‚Ä¢ No valves (except semilunar)
‚Ä¢ High pressure
‚Ä¢ Pulse detectable

VEINS:
‚Ä¢ Carry blood TO heart
‚Ä¢ Thin walls, less muscle
‚Ä¢ Have valves (prevent backflow)
‚Ä¢ Low pressure
‚Ä¢ Larger lumen

CAPILLARIES:
‚Ä¢ Site of exchange
‚Ä¢ Single cell layer thick
‚Ä¢ Connect arterioles to venules
‚Ä¢ Total length: ~60,000 miles

BLOOD PRESSURE:
‚Ä¢ Systolic: Ventricular contraction (120 mmHg)
‚Ä¢ Diastolic: Ventricular relaxation (80 mmHg)
‚Ä¢ Pulse pressure = Systolic - Diastolic
‚Ä¢ Mean arterial pressure = Diastolic + 1/3 Pulse pressure

BLOOD FLOW REGULATION:
‚Ä¢ Autoregulation (local)
‚Ä¢ Neural control (ANS)
‚Ä¢ Hormonal control (epinephrine, etc.)
‚Ä¢ Physical factors (temperature, exercise)

SPECIAL CIRCULATIONS:
‚Ä¢ Coronary: Heart muscle supply
‚Ä¢ Cerebral: Brain (blood-brain barrier)
‚Ä¢ Pulmonary: Low resistance
‚Ä¢ Cutaneous: Temperature regulation
‚Ä¢ Renal: High flow for filtration`);
        }

        function showArteryVeinDiff() {
            alert(`ARTERIES vs VEINS: COMPARISON

STRUCTURAL DIFFERENCES:

1. WALL THICKNESS:
   ‚Ä¢ ARTERIES: Thick, muscular walls
   ‚Ä¢ VEINS: Thin, less muscular walls

2. LUMEN SIZE:
   ‚Ä¢ ARTERIES: Smaller lumen (relative to wall)
   ‚Ä¢ VEINS: Larger lumen (relative to wall)

3. VALVES:
   ‚Ä¢ ARTERIES: No valves (except semilunar at heart)
   ‚Ä¢ VEINS: Have valves (especially in limbs)

4. ELASTIC TISSUE:
   ‚Ä¢ ARTERIES: More elastic tissue
   ‚Ä¢ VEINS: Less elastic tissue

5. PRESSURE:
   ‚Ä¢ ARTERIES: High pressure (120/80 mmHg)
   ‚Ä¢ VEINS: Low pressure (10-20 mmHg)

FUNCTIONAL DIFFERENCES:

1. DIRECTION:
   ‚Ä¢ ARTERIES: Away from heart
   ‚Ä¢ VEINS: Toward heart

2. BLOOD CONTENT:
   ‚Ä¢ ARTERIES: Usually oxygenated (except pulmonary)
   ‚Ä¢ VEINS: Usually deoxygenated (except pulmonary)

3. PULSE:
   ‚Ä¢ ARTERIES: Pulse detectable
   ‚Ä¢ VEINS: No pulse

4. BLOOD FLOW:
   ‚Ä¢ ARTERIES: Rapid, pulsatile
   ‚Ä¢ VEINS: Slow, steady

5. COLOR:
   ‚Ä¢ ARTERIES: Bright red (oxygenated)
   ‚Ä¢ VEINS: Dark red (deoxygenated)

SPECIAL FEATURES:

ARTERIES:
‚Ä¢ Tunica media: Thick smooth muscle
‚Ä¢ Elastic fibers: Recoil maintains pressure
‚Ä¢ Vasoconstriction/vasodilation: Regulates flow

VEINS:
‚Ä¢ Valves: Prevent backflow
‚Ä¢ Skeletal muscle pump: Aids venous return
‚Ä¢ Respiratory pump: Aids venous return

EXCEPTIONS:
‚Ä¢ PULMONARY ARTERY: Carries deoxygenated blood
‚Ä¢ PULMONARY VEINS: Carry oxygenated blood
‚Ä¢ UMBILICAL ARTERIES: Carry deoxygenated blood in fetus
‚Ä¢ UMBILICAL VEIN: Carries oxygenated blood in fetus

CLINICAL IMPORTANCE:
‚Ä¢ Arteriosclerosis: Hardening of arteries
‚Ä¢ Varicose veins: Damaged vein valves
‚Ä¢ Aneurysm: Weak spot in artery wall
‚Ä¢ Phlebitis: Vein inflammation`);
        }

        function demonstrateBloodFlow() {
            alert(`BLOOD FLOW DEMONSTRATION:

EXPERIMENT: Observing blood flow in goldfish tail

Procedure:
1. Place goldfish in wet cotton with tail exposed
2. Observe under microscope
3. Note blood flow characteristics

Observations:

ARTERIOLES:
‚Ä¢ Rapid, pulsatile flow
‚Ä¢ Blood moves in spurts with heartbeat
‚Ä¢ Direction: Away from heart

VENULES:
‚Ä¢ Slow, steady flow
‚Ä¢ Continuous movement
‚Ä¢ Direction: Toward heart

CAPILLARIES:
‚Ä¢ Single file RBCs
‚Ä¢ Slowest flow
‚Ä¢ RBCs may change shape to pass

FACTORS AFFECTING BLOOD FLOW:

1. PRESSURE GRADIENT:
   ‚Ä¢ Difference between arterial and venous pressure
   ‚Ä¢ Main driving force for flow

2. RESISTANCE:
   ‚Ä¢ Vessel diameter (most important)
   ‚Ä¢ Blood viscosity
   ‚Ä¢ Vessel length

POISEUILLE'S LAW:
Flow ‚àù (Pressure difference √ó Radius‚Å¥) / (Viscosity √ó Length)

3. VASOMOTION:
   ‚Ä¢ Rhythmic contraction of arterioles
   ‚Ä¢ Regulates capillary flow

4. SKELETAL MUSCLE PUMP:
   ‚Ä¢ Muscle contraction compresses veins
   ‚Ä¢ Valves ensure one-way flow
   ‚Ä¢ Important for venous return from legs

5. RESPIRATORY PUMP:
   ‚Ä¢ Breathing creates pressure changes
   ‚Ä¢ Aids venous return to heart

BLOOD FLOW DISTRIBUTION (at rest):
‚Ä¢ Brain: 13%
‚Ä¢ Heart: 4%
‚Ä¢ Kidneys: 20%
‚Ä¢ Liver/GI: 24%
‚Ä¢ Muscle: 20%
‚Ä¢ Skin: 9%
‚Ä¢ Other: 10%

During exercise:
‚Ä¢ Muscle flow increases to 80-85%
‚Ä¢ Skin flow increases for cooling
‚Ä¢ GI flow decreases`);
        }

        // Cell transport functions
        function selectTransport(type) {
            appState.selectedTransport = type;
            document.querySelectorAll('.process-item').forEach(el => {
                el.classList.remove('highlight');
            });
            event.target.classList.add('highlight');
            
            const cellView = document.getElementById('cellView');
            const transports = {
                diffusion: {
                    name: "Diffusion",
                    symbol: "‚Üî",
                    info: "Movement from high to low concentration.",
                    details: "‚Ä¢ Passive (no energy)<br>‚Ä¢ Small molecules only<br>‚Ä¢ Along concentration gradient<br>‚Ä¢ Example: O‚ÇÇ and CO‚ÇÇ exchange",
                    examples: "‚Ä¢ Oxygen into cells<br>‚Ä¢ Carbon dioxide out of cells<br>‚Ä¢ Perfume spreading in room"
                },
                osmosis: {
                    name: "Osmosis",
                    symbol: "üíß",
                    info: "Water movement across semi-permeable membrane.",
                    details: "‚Ä¢ Passive (no energy)<br>‚Ä¢ Water only<br>‚Ä¢ High to low water concentration<br>‚Ä¢ Example: Water into root hairs",
                    examples: "‚Ä¢ Plant wilting/turgidity<br>‚Ä¢ Red blood cell in solutions<br>‚Ä¢ Food preservation (salt/sugar)"
                },
                active: {
                    name: "Active Transport",
                    symbol: "‚ö°",
                    info: "Movement against concentration gradient using energy.",
                    details: "‚Ä¢ Requires energy (ATP)<br>‚Ä¢ Uses carrier proteins<br>‚Ä¢ Against concentration gradient<br>‚Ä¢ Example: Mineral uptake in roots",
                    examples: "‚Ä¢ Sodium-potassium pump<br>‚Ä¢ Mineral absorption in roots<br>‚Ä¢ Neurotransmitter reuptake"
                },
                facilitated: {
                    name: "Facilitated Diffusion",
                    symbol: "üö™",
                    info: "Passive transport using carrier proteins.",
                    details: "‚Ä¢ Passive (no energy)<br>‚Ä¢ Uses carrier/channel proteins<br>‚Ä¢ Along concentration gradient<br>‚Ä¢ Example: Glucose into cells",
                    examples: "‚Ä¢ Glucose absorption<br>‚Ä¢ Ion channels in nerves<br>‚Ä¢ Water channels (aquaporins)"
                }
            };
            
            const selected = transports[type];
            cellView.textContent = selected.symbol;
            cellTransportResult.innerHTML = `<strong>${selected.name}</strong><br><br>${selected.info}<br><br>${selected.details}`;
            cellTransportSteps.innerHTML = `<strong>Examples:</strong><br>${selected.examples}`;
            
            cellTransportResult.classList.add('pulse');
            setTimeout(() => cellTransportResult.classList.remove('pulse'), 1000);
        }

        function explainCellTransport() {
            alert(`CELL TRANSPORT MECHANISMS:

TYPES OF TRANSPORT:

1. PASSIVE TRANSPORT (No energy required):
   A. SIMPLE DIFFUSION:
      ‚Ä¢ Small, non-polar molecules
      ‚Ä¢ Direct through lipid bilayer
      ‚Ä¢ Example: O‚ÇÇ, CO‚ÇÇ, lipids
   
   B. FACILITATED DIFFUSION:
      ‚Ä¢ Larger or polar molecules
      ‚Ä¢ Through carrier/channel proteins
      ‚Ä¢ Example: Glucose, ions, water
   
   C. OSMOSIS:
      ‚Ä¢ Water only
      ‚Ä¢ Through aquaporins or bilayer
      ‚Ä¢ High to low water concentration

2. ACTIVE TRANSPORT (Energy required):
   A. PRIMARY ACTIVE TRANSPORT:
      ‚Ä¢ Directly uses ATP
      ‚Ä¢ Example: Na‚Å∫/K‚Å∫ pump
   
   B. SECONDARY ACTIVE TRANSPORT:
      ‚Ä¢ Uses ion gradient created by primary
      ‚Ä¢ Co-transport (symport)
      ‚Ä¢ Counter-transport (antiport)

3. BULK TRANSPORT:
   A. ENDOCYTOSIS:
      ‚Ä¢ Into cell
      ‚Ä¢ Phagocytosis (solids)
      ‚Ä¢ Pinocytosis (liquids)
      ‚Ä¢ Receptor-mediated
   
   B. EXOCYTOSIS:
      ‚Ä¢ Out of cell
      ‚Ä¢ Secretion, waste removal

KEY CONCEPTS:

CONCENTRATION GRADIENT:
‚Ä¢ Difference in concentration across membrane
‚Ä¢ Drives passive transport

SEMI-PERMEABLE MEMBRANE:
‚Ä¢ Allows some substances through
‚Ä¢ Selectively permeable

TONICITY:
‚Ä¢ Isotonic: Equal concentration
‚Ä¢ Hypotonic: Lower solute (cell gains water)
‚Ä¢ Hypertonic: Higher solute (cell loses water)

MEMBRANE PROTEINS:
‚Ä¢ Channel proteins: Form pores
‚Ä¢ Carrier proteins: Bind and change shape
‚Ä¢ Pump proteins: Active transport

FACTORS AFFECTING RATE:
‚Ä¢ Concentration gradient
‚Ä¢ Temperature
‚Ä¢ Surface area
‚Ä¢ Membrane permeability
‚Ä¢ Number of carrier proteins

IMPORTANCE:
‚Ä¢ Nutrient uptake
‚Ä¢ Waste removal
‚Ä¢ Ion balance
‚Ä¢ Cell signaling
‚Ä¢ Homeostasis`);
        }

        function showConcentrationGradient() {
            alert(`CONCENTRATION GRADIENT:

DEFINITION:
‚Ä¢ Difference in concentration of a substance between two regions
‚Ä¢ Creates potential for movement

TYPES:

1. CHEMICAL GRADIENT:
   ‚Ä¢ Difference in chemical concentration
   ‚Ä¢ Example: More O‚ÇÇ outside cell than inside

2. ELECTRICAL GRADIENT:
   ‚Ä¢ Difference in electrical charge
   ‚Ä¢ Example: More Na‚Å∫ outside, more K‚Å∫ inside

3. ELECTROCHEMICAL GRADIENT:
   ‚Ä¢ Combined chemical and electrical
   ‚Ä¢ Example: Na‚Å∫ gradient in neurons

MOVEMENT ALONG GRADIENT:
‚Ä¢ HIGH ‚Üí LOW concentration: Passive (no energy)
‚Ä¢ LOW ‚Üí HIGH concentration: Active (requires energy)

EXAMPLES:

PASSIVE (with gradient):
‚Ä¢ O‚ÇÇ into cells (high in blood, low in cells)
‚Ä¢ CO‚ÇÇ out of cells (high in cells, low in blood)
‚Ä¢ Water into root hairs (high in soil, low in root)

ACTIVE (against gradient):
‚Ä¢ Na‚Å∫ out of cells (low outside, high inside)
‚Ä¢ K‚Å∫ into cells (low inside, high outside)
‚Ä¢ Minerals into root hairs (low in soil, high in root)

GRADIENT MAINTENANCE:
‚Ä¢ Requires energy input
‚Ä¢ Creates potential energy
‚Ä¢ Used for other processes

USES OF GRADIENT ENERGY:

1. SECONDARY ACTIVE TRANSPORT:
   ‚Ä¢ Glucose into intestinal cells (with Na‚Å∫ gradient)

2. ATP SYNTHESIS:
   ‚Ä¢ H‚Å∫ gradient in mitochondria

3. NERVE IMPULSES:
   ‚Ä¢ Na‚Å∫/K‚Å∫ gradient in neurons

GRADIENT DECAY:
‚Ä¢ Without energy input, gradients equalize
‚Ä¢ Leads to equilibrium
‚Ä¢ Cell death if critical gradients lost

MEASUREMENT:
‚Ä¢ Can be quantified
‚Ä¢ Steeper gradient = faster diffusion
‚Ä¢ Affected by distance and barriers`);
        }

        function demonstrateOsmosis() {
            alert(`OSMOSIS DEMONSTRATION:

EXPERIMENT 1: Potato osmometer

Procedure:
1. Cut potato into cubes
2. Make cavity in one cube
3. Fill with concentrated sugar solution
4. Place in water
5. Observe after 1 hour

Observations:
‚Ä¢ Water enters potato cavity
‚Ä¢ Sugar solution level rises
‚Ä¢ Potato becomes firm

Explanation:
‚Ä¢ Water moves from high concentration (beaker) to low concentration (sugar solution)
‚Ä¢ Through semi-permeable potato cell membranes

EXPERIMENT 2: Egg membrane demonstration

Procedure:
1. Dissolve egg shell in vinegar (leaves membrane)
2. Place egg in:
   a) Water (hypotonic)
   b) Salt water (hypertonic)
   c) Sugar solution (isotonic)

Observations:
‚Ä¢ In water: Egg swells (water enters)
‚Ä¢ In salt water: Egg shrinks (water leaves)
‚Ä¢ In sugar solution: No change

EXPERIMENT 3: Red blood cells

Procedure (conceptual):
1. Place RBCs in:
   a) 0.9% NaCl (isotonic)
   b) Distilled water (hypotonic)
   c) 10% NaCl (hypertonic)

Observations:
‚Ä¢ Isotonic: Normal shape
‚Ä¢ Hypotonic: Swell and burst (hemolysis)
‚Ä¢ Hypertonic: Shrink (crenation)

APPLICATIONS:

1. FOOD PRESERVATION:
   ‚Ä¢ Salt/sugar create hypertonic environment
   ‚Ä¢ Draws water out of microbes
   ‚Ä¢ Prevents spoilage

2. INTRAVENOUS SOLUTIONS:
   ‚Ä¢ Isotonic: Normal saline (0.9% NaCl)
   ‚Ä¢ Hypotonic: Hydrate cells
   ‚Ä¢ Hypertonic: Reduce edema

3. PLANT WATER RELATIONS:
   ‚Ä¢ Turgor pressure from osmosis
   ‚Ä¢ Wilting when water loss occurs

4. KIDNEY FUNCTION:
   ‚Ä¢ Osmosis in nephrons
   ‚Ä¢ Water reabsorption

KEY POINT:
Osmosis always moves water toward higher solute concentration (lower water concentration).`);
        }

        // Update all biology displays
        function updateBiologyDisplays() {
            calculateWaterTransport();
            calculateFoodTransport();
            calculateTranspirationRate();
            calculateBloodComponents();
            calculateHeartRate();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
            
            // Add input listeners for live updates
            document.getElementById('plantHeight').addEventListener('change', calculateWaterTransport);
            document.getElementById('transpirationRate').addEventListener('change', calculateWaterTransport);
            document.getElementById('sugarConcentration').addEventListener('change', calculateFoodTransport);
            document.getElementById('transportDistance').addEventListener('change', calculateFoodTransport);
            document.getElementById('temperature').addEventListener('change', calculateTranspirationRate);
            document.getElementById('humidity').addEventListener('change', calculateTranspirationRate);
            document.getElementById('bloodVolume').addEventListener('change', calculateBloodComponents);
            document.getElementById('heartRate').addEventListener('change', calculateHeartRate);
            
            // Initialize with default selections
            selectPlantPart('roots');
            selectBloodCell('rbc');
            selectHeartChamber('ra');
            selectCirculation('pulmonary');
            selectTransport('diffusion');
        }

        // Create biology tip display
        function createBiologyTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'biology-tip';
            tipDiv.innerHTML = `<strong>Biology Tip:</strong> ${biologyTips[Math.floor(Math.random() * biologyTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            plantScore.textContent = appState.plantScore;
            animalScore.textContent = appState.animalScore;
            xylemScore.textContent = appState.xylemScore;
            heartScore.textContent = appState.heartScore;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You've mastered transport systems!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great work! Strong understanding of plant and animal transport!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! Keep practicing to improve further!";
            } else {
                scoreMessage.textContent = "Keep practicing! Focus on xylem vs phloem and heart structure!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            biologyTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            biologyTip.appendChild(createBiologyTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                
                // Track scores by question type
                if (question.type === 'xylem' || question.type === 'phloem') {
                    appState.plantScore++;
                    if (question.type === 'xylem') appState.xylemScore++;
                }
                if (question.type === 'blood' || question.type === 'heart') {
                    appState.animalScore++;
                    if (question.type === 'heart') appState.heartScore++;
                }
                
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.plantScore = 0;
            appState.animalScore = 0;
            appState.xylemScore = 0;
            appState.heartScore = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin biology practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.plantScore = 0;
            appState.animalScore = 0;
            appState.xylemScore = 0;
            appState.heartScore = 0;
            
            showPracticePage();
        }

        // Additional interactive functions
        function drawBloodFlow() {
            // This would be implemented to show animated blood flow
        }

        function drawPlantAnatomy() {
            // This would be implemented to show plant anatomy
        }

        function drawCirculatoryExplorer() {
            // This would be implemented to show circulatory system exploration
        }

        function updateTranspirationChart() {
            // This would update the transpiration chart
        }

        function simulateBloodFlow() {
            // This would simulate blood flow
        }

        function simulateOsmosis() {
            // This would simulate osmosis
        }

        function generateBiologyQuiz() {
            // This would generate biology quiz questions
        }

        function highlightPlantPart(part) {
            // This would highlight plant parts
        }

        function highlightCirculatoryPart(part) {
            // This would highlight circulatory parts
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
