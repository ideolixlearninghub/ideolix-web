<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Science - Sound & Light | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Physics Theme */
        :root {
            --primary-blue: #2196F3;
            --primary-yellow: #FFC107;
            --primary-purple: #9C27B0;
            --primary-orange: #FF9800;
            --accent-teal: #009688;
            --accent-red: #F44336;
            --accent-green: #4CAF50;
            --accent-indigo: #3F51B5;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --sound-blue: rgba(33, 150, 243, 0.3);
            --light-yellow: rgba(255, 193, 7, 0.3);
            --reflection-purple: rgba(156, 39, 176, 0.3);
            --refraction-orange: rgba(255, 152, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 193, 7, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(156, 39, 176, 0.05) 0%, transparent 70%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary {
            background: var(--primary-yellow);
            color: #000;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        }

        .btn-secondary:hover {
            background: #FFB300;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 193, 7, 0.4);
        }

        .btn-purple {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-purple:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-orange {
            background: var(--primary-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-orange:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .topics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.sound {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .topic-card.light {
            border-color: var(--primary-yellow);
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), transparent);
        }

        .topic-card.reflection {
            border-color: var(--primary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.sound .topic-title {
            color: var(--primary-blue);
        }

        .topic-card.light .topic-title {
            color: var(--primary-yellow);
        }

        .topic-card.reflection .topic-title {
            color: var(--primary-purple);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--primary-yellow), var(--primary-purple));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .physics-tip {
            background: rgba(156, 39, 176, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-purple);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--accent-green);
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Area */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Wave Visualizer */
        .wave-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .visualizer-title {
            color: var(--primary-blue);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .wave-canvas-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .wave-canvas {
            width: 100%;
            height: 100%;
        }

        .wave-info {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            display: none;
        }

        .wave-info.show {
            display: block;
        }

        .wave-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .wave-controls {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .wave-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .wave-btn:hover {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
        }

        .wave-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        /* Light Visualizer */
        .light-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-yellow);
        }

        .light-canvas-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .light-canvas {
            width: 100%;
            height: 100%;
        }

        .light-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .light-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .light-btn:hover {
            background: rgba(255, 193, 7, 0.1);
            border-color: var(--primary-yellow);
        }

        .light-btn.active {
            background: var(--primary-yellow);
            color: #000;
        }

        /* Reflection Visualizer */
        .reflection-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .reflection-canvas-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .reflection-canvas {
            width: 100%;
            height: 100%;
        }

        .reflection-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .reflection-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reflection-btn:hover {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--primary-purple);
        }

        .reflection-btn.active {
            background: var(--primary-purple);
            color: white;
        }

        /* Refraction Visualizer */
        .refraction-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-orange);
        }

        .refraction-canvas-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .refraction-canvas {
            width: 100%;
            height: 100%;
        }

        .refraction-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .refraction-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .refraction-btn:hover {
            background: rgba(255, 152, 0, 0.1);
            border-color: var(--primary-orange);
        }

        .refraction-btn.active {
            background: var(--primary-orange);
            color: white;
        }

        /* Comparison Table */
        .comparison-table {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        th {
            background: var(--dark-surface);
            padding: 10px;
            text-align: left;
            color: var(--text-primary);
            border-bottom: 2px solid var(--dark-border);
        }

        td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-secondary);
        }

        tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Properties Display */
        .properties-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .properties-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .properties-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .property-card {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .property-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .property-card.sound {
            border-left-color: var(--primary-blue);
        }

        .property-card.light {
            border-left-color: var(--primary-yellow);
        }

        .property-card.wave {
            border-left-color: var(--primary-purple);
        }

        .property-title {
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .property-value {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Experiment Simulator */
        .experiment-simulator {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-indigo);
        }

        .experiment-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .experiment-canvas {
            width: 100%;
            height: 100%;
        }

        .experiment-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .experiment-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .experiment-btn:hover {
            background: rgba(63, 81, 181, 0.1);
            border-color: var(--accent-indigo);
        }

        .experiment-btn.active {
            background: var(--accent-indigo);
            color: white;
        }

        /* Interactive Quiz */
        .interactive-quiz {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-green);
        }

        .quiz-question {
            margin: 10px 0;
            color: var(--text-primary);
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 5px;
            margin: 10px 0;
        }

        .quiz-option {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes waveAnimation {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100px); }
        }

        .wave-animate {
            animation: waveAnimation 2s linear infinite;
        }

        @keyframes lightBeam {
            0% { opacity: 0.3; }
            50% { opacity: 1; }
            100% { opacity: 0.3; }
        }

        .light-animate {
            animation: lightBeam 1.5s ease-in-out infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .wave-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .refraction-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .experiment-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .properties-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Science: Sound & Light Waves</h1>
            <p class="welcome-subtitle">Explore the fascinating world of waves! Discover how sound travels, understand light reflection and refraction, visualize wave properties, and experiment with optical phenomena through interactive simulations.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸ”ŠðŸ”¦ðŸŒŠ</span>
                <span class="topic-name">Physics of Waves</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card sound" onclick="showTopicInfo('sound')">
                    <div class="topic-icon">ðŸ”Š</div>
                    <h3 class="topic-title">Sound Waves</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Longitudinal waves that require a medium to travel</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Wave properties (frequency, amplitude)</li>
                            <li>Sound propagation</li>
                            <li>Echo & reverberation</li>
                            <li>Speed of sound</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card light" onclick="showTopicInfo('light')">
                    <div class="topic-icon">ðŸ”¦</div>
                    <h3 class="topic-title">Light Waves</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Transverse electromagnetic waves</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Light properties</li>
                            <li>Visible spectrum</li>
                            <li>Color & wavelength</li>
                            <li>Speed of light</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card reflection" onclick="showTopicInfo('reflection')">
                    <div class="topic-icon">ðŸªž</div>
                    <h3 class="topic-title">Reflection & Refraction</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Behavior of light at boundaries</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Laws of reflection</li>
                            <li>Snell's Law of refraction</li>
                            <li>Mirrors & lenses</li>
                            <li>Total internal reflection</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>ðŸŒŠ Begin Physics Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="physicsTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Wave Visualizer -->
                    <div class="wave-visualizer">
                        <div class="visualizer-title">Wave Properties & Types</div>
                        <div class="wave-canvas-container">
                            <canvas class="wave-canvas" id="waveCanvas"></canvas>
                        </div>
                        <div class="wave-info" id="waveInfo">
                            <div style="display: flex; justify-content: space-between;">
                                <div>
                                    <div style="font-weight: bold; color: var(--primary-blue);" id="waveType"></div>
                                    <div style="font-size: 0.9rem;" id="waveDescription"></div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Wavelength</div>
                                    <div style="font-weight: bold;" id="wavelengthValue"></div>
                                </div>
                            </div>
                            <div style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);" id="waveDetails"></div>
                        </div>
                        <div class="wave-controls">
                            <div class="wave-btn active" onclick="showWave('transverse')">Transverse</div>
                            <div class="wave-btn" onclick="showWave('longitudinal')">Longitudinal</div>
                            <div class="wave-btn" onclick="showWave('sound')">Sound Wave</div>
                            <div class="wave-btn" onclick="showWave('light')">Light Wave</div>
                            <div class="wave-btn" onclick="changeFrequency('increase')">Increase Frequency</div>
                            <div class="wave-btn" onclick="changeFrequency('decrease')">Decrease Frequency</div>
                            <div class="wave-btn" onclick="changeAmplitude('increase')">Increase Amplitude</div>
                            <div class="wave-btn" onclick="changeAmplitude('decrease')">Decrease Amplitude</div>
                            <div class="wave-btn" onclick="showWaveParts()">Wave Parts</div>
                            <div class="wave-btn" onclick="animateWave()">Animate Wave</div>
                            <div class="wave-btn" onclick="compareWaves()">Compare Waves</div>
                            <div class="wave-btn" onclick="resetWave()">Reset</div>
                        </div>
                    </div>
                    
                    <!-- Sound Visualizer -->
                    <div class="light-visualizer" style="border-color: var(--primary-blue);">
                        <div class="visualizer-title">Sound Waves & Properties</div>
                        <div class="light-canvas-container">
                            <canvas class="light-canvas" id="soundCanvas"></canvas>
                        </div>
                        <div class="light-controls">
                            <div class="light-btn active" onclick="showSound('wave')">Sound Wave</div>
                            <div class="light-btn" onclick="showSound('propagation')">Propagation</div>
                            <div class="light-btn" onclick="showSound('echo')">Echo</div>
                            <div class="light-btn" onclick="showSound('doppler')">Doppler Effect</div>
                            <div class="light-btn" onclick="showSound('pitch')">Pitch & Frequency</div>
                            <div class="light-btn" onclick="showSound('loudness')">Loudness & Amplitude</div>
                            <div class="light-btn" onclick="playSoundWave()">Generate Sound</div>
                            <div class="light-btn" onclick="showMediumEffect()">Medium Effect</div>
                            <div class="light-btn" onclick="showSoundApplications()">Applications</div>
                        </div>
                    </div>
                    
                    <!-- Comparison Table -->
                    <div class="comparison-table">
                        <div class="visualizer-title">Sound vs Light Waves Comparison</div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Property</th>
                                        <th>Sound Waves</th>
                                        <th>Light Waves</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Wave Type</td>
                                        <td>Longitudinal (mechanical)</td>
                                        <td>Transverse (electromagnetic)</td>
                                    </tr>
                                    <tr>
                                        <td>Medium Required</td>
                                        <td>Yes (solid, liquid, gas)</td>
                                        <td>No (travels in vacuum)</td>
                                    </tr>
                                    <tr>
                                        <td>Speed in Air</td>
                                        <td>~343 m/s (at 20Â°C)</td>
                                        <td>~300,000,000 m/s</td>
                                    </tr>
                                    <tr>
                                        <td>Travels Through</td>
                                        <td>All materials</td>
                                        <td>Transparent materials</td>
                                    </tr>
                                    <tr>
                                        <td>Can be Reflected</td>
                                        <td>Yes (echo)</td>
                                        <td>Yes (mirrors)</td>
                                    </tr>
                                    <tr>
                                        <td>Can be Refracted</td>
                                        <td>Yes (bending in different media)</td>
                                        <td>Yes (lenses, prisms)</td>
                                    </tr>
                                    <tr>
                                        <td>Examples</td>
                                        <td>Voice, music, thunder</td>
                                        <td>Sunlight, laser, colors</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showMoreExamples()">More Examples</button>
                            <button class="btn btn-small btn-orange" onclick="testYourKnowledge()">Quick Quiz</button>
                        </div>
                    </div>
                    
                    <!-- Interactive Quiz -->
                    <div class="interactive-quiz">
                        <div class="visualizer-title">Quick Knowledge Check</div>
                        <div class="quiz-question" id="quizQuestion">What type of wave is sound?</div>
                        <div class="quiz-options" id="quizOptions">
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'A')">A) Longitudinal wave</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'B')">B) Transverse wave</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'C')">C) Electromagnetic wave</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'D')">D) Standing wave</div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="nextQuizQuestion()">Next Question</button>
                        </div>
                    </div>
                </div>
                
                <div class="visualization-container">
                    <!-- Light Visualizer -->
                    <div class="light-visualizer">
                        <div class="visualizer-title">Light Properties & Spectrum</div>
                        <div class="light-canvas-container">
                            <canvas class="light-canvas" id="lightCanvas"></canvas>
                        </div>
                        <div class="light-controls">
                            <div class="light-btn active" onclick="showLight('spectrum')">Visible Spectrum</div>
                            <div class="light-btn" onclick="showLight('ray')">Light Ray</div>
                            <div class="light-btn" onclick="showLight('prism')">Prism Dispersion</div>
                            <div class="light-btn" onclick="showLight('speed')">Speed of Light</div>
                            <div class="light-btn" onclick="showLight('em')">EM Spectrum</div>
                            <div class="light-btn" onclick="showLight('color')">Color Mixing</div>
                            <div class="light-btn" onclick="showLight('absorption')">Absorption</div>
                            <div class="light-btn" onclick="showLight('transmission')">Transmission</div>
                            <div class="light-btn" onclick="showLight('shadow')">Shadows</div>
                        </div>
                    </div>
                    
                    <!-- Reflection Visualizer -->
                    <div class="reflection-visualizer">
                        <div class="visualizer-title">Reflection of Light</div>
                        <div class="reflection-canvas-container">
                            <canvas class="reflection-canvas" id="reflectionCanvas"></canvas>
                        </div>
                        <div class="reflection-controls">
                            <div class="reflection-btn active" onclick="showReflection('plane')">Plane Mirror</div>
                            <div class="reflection-btn" onclick="showReflection('concave')">Concave Mirror</div>
                            <div class="reflection-btn" onclick="showReflection('convex')">Convex Mirror</div>
                            <div class="reflection-btn" onclick="showReflection('angle')">Angle of Reflection</div>
                            <div class="reflection-btn" onclick="showReflection('multiple')">Multiple Reflections</div>
                            <div class="reflection-btn" onclick="showReflection('periscope')">Periscope</div>
                            <div class="reflection-btn" onclick="showReflection('image')">Image Formation</div>
                            <div class="reflection-btn" onclick="changeIncidenceAngle()">Change Angle</div>
                            <div class="reflection-btn" onclick="showReflectionLaws()">Laws of Reflection</div>
                        </div>
                    </div>
                    
                    <!-- Refraction Visualizer -->
                    <div class="refraction-visualizer">
                        <div class="visualizer-title">Refraction of Light</div>
                        <div class="refraction-canvas-container">
                            <canvas class="refraction-canvas" id="refractionCanvas"></canvas>
                        </div>
                        <div class="refraction-controls">
                            <div class="refraction-btn active" onclick="showRefraction('airWater')">Air to Water</div>
                            <div class="refraction-btn" onclick="showRefraction('waterAir')">Water to Air</div>
                            <div class="refraction-btn" onclick="showRefraction('glass')">Glass Slab</div>
                            <div class="refraction-btn" onclick="showRefraction('prismRefraction')">Through Prism</div>
                            <div class="refraction-btn" onclick="showRefraction('lens')">Through Lens</div>
                            <div class="refraction-btn" onclick="showRefraction('critical')">Critical Angle</div>
                            <div class="refraction-btn" onclick="showRefraction('total')">Total Internal Reflection</div>
                            <div class="refraction-btn" onclick="showRefraction('apparentDepth')">Apparent Depth</div>
                            <div class="refraction-btn" onclick="changeRefractiveIndex()">Change Medium</div>
                            <div class="refraction-btn" onclick="showSnellsLaw()">Snell's Law</div>
                            <div class="refraction-btn" onclick="showRefractionApplications()">Applications</div>
                        </div>
                    </div>
                    
                    <!-- Properties Display -->
                    <div class="properties-display">
                        <div class="visualizer-title">Wave Properties & Characteristics</div>
                        <div class="properties-grid">
                            <div class="property-card wave" onclick="showProperty('amplitude')">
                                <div class="property-title">ðŸ“ˆ Amplitude</div>
                                <div class="property-value">Height of wave, determines loudness/brightness</div>
                            </div>
                            <div class="property-card wave" onclick="showProperty('wavelength')">
                                <div class="property-title">ðŸ“ Wavelength</div>
                                <div class="property-value">Distance between successive crests</div>
                            </div>
                            <div class="property-card wave" onclick="showProperty('frequency')">
                                <div class="property-title">ðŸ“Š Frequency</div>
                                <div class="property-value">Number of waves per second (Hz)</div>
                            </div>
                            <div class="property-card sound" onclick="showProperty('pitch')">
                                <div class="property-title">ðŸŽµ Pitch</div>
                                <div class="property-value">Perceived frequency of sound</div>
                            </div>
                            <div class="property-card sound" onclick="showProperty('loudness')">
                                <div class="property-title">ðŸ”Š Loudness</div>
                                <div class="property-value">Perceived amplitude of sound</div>
                            </div>
                            <div class="property-card light" onclick="showProperty('color')">
                                <div class="property-title">ðŸŒˆ Color</div>
                                <div class="property-value">Perceived wavelength of light</div>
                            </div>
                            <div class="property-card light" onclick="showProperty('intensity')">
                                <div class="property-title">ðŸ’¡ Intensity</div>
                                <div class="property-value">Brightness of light</div>
                            </div>
                            <div class="property-card wave" onclick="showProperty('speed')">
                                <div class="property-title">âš¡ Speed</div>
                                <div class="property-value">How fast wave travels (v = fÎ»)</div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="compareProperties()">Compare Properties</button>
                            <button class="btn btn-small btn-purple" onclick="showWaveEquation()">Wave Equation</button>
                        </div>
                    </div>
                    
                    <!-- Experiment Simulator -->
                    <div class="experiment-simulator">
                        <div class="visualizer-title">Physics Experiments</div>
                        <div class="experiment-container">
                            <canvas class="experiment-canvas" id="experimentCanvas"></canvas>
                        </div>
                        <div class="experiment-controls">
                            <div class="experiment-btn active" onclick="runExperiment('echo')">Echo Experiment</div>
                            <div class="experiment-btn" onclick="runExperiment('periscope')">Periscope</div>
                            <div class="experiment-btn" onclick="runExperiment('prism')">Prism Dispersion</div>
                            <div class="experiment-btn" onclick="runExperiment('lens')">Lens Experiment</div>
                            <div class="experiment-btn" onclick="runExperiment('mirage')">Mirage (Refraction)</div>
                            <div class="experiment-btn" onclick="runExperiment('soundMedium')">Sound in Different Media</div>
                            <div class="experiment-btn" onclick="pauseExperiment()">Pause</div>
                            <div class="experiment-btn" onclick="resetExperiment()">Reset</div>
                        </div>
                    </div>
                    
                    <!-- Real-World Applications -->
                    <div class="comparison-table" style="border-color: var(--accent-teal);">
                        <div class="visualizer-title">Real-World Applications</div>
                        <div style="margin: 10px 0; padding: 10px; background: var(--dark-surface); border-radius: 6px;">
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">ðŸ‘‚ Hearing Aids</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Amplify sound waves</div>
                                </div>
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">ðŸ‘“ Eyeglasses & Lenses</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Refraction corrects vision</div>
                                </div>
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">ðŸš— Rear-view Mirrors</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Convex mirrors for wider view</div>
                                </div>
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">ðŸŽ¤ Microphones & Speakers</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Convert sound waves</div>
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showMoreApplications()">More Applications</button>
                            <button class="btn btn-small btn-blue" onclick="showTechnologyImpact()">Technology Impact</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-orange" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Physics Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                    <button class="btn btn-purple" id="printCertificate">Print Certificate</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Sound & Light
        const questions = [
            {
                question: "What type of wave is sound?",
                options: ["Longitudinal wave", "Transverse wave", "Electromagnetic wave", "Standing wave"],
                answer: "A",
                explanation: "Sound waves are longitudinal waves where particles vibrate parallel to the direction of wave travel."
            },
            {
                question: "What is the speed of light in vacuum?",
                options: ["300,000 km/s", "343 m/s", "1500 m/s", "5000 km/s"],
                answer: "A",
                explanation: "Light travels at approximately 300,000 kilometers per second (3 Ã— 10â¸ m/s) in vacuum."
            },
            {
                question: "Which law states that the angle of incidence equals the angle of reflection?",
                options: ["Law of Reflection", "Snell's Law", "Law of Refraction", "Doppler's Law"],
                answer: "A",
                explanation: "The Law of Reflection states that the angle of incidence equals the angle of reflection."
            },
            {
                question: "What happens to light when it passes from air into water?",
                options: ["It bends toward the normal", "It bends away from the normal", "It travels straight", "It stops"],
                answer: "A",
                explanation: "Light bends toward the normal when entering a denser medium (like air to water) due to refraction."
            },
            {
                question: "What property of sound determines its pitch?",
                options: ["Frequency", "Amplitude", "Wavelength", "Speed"],
                answer: "A",
                explanation: "Pitch is determined by frequency - higher frequency = higher pitch, lower frequency = lower pitch."
            },
            {
                question: "Which mirror always forms a virtual, upright, and diminished image?",
                options: ["Convex mirror", "Concave mirror", "Plane mirror", "Spherical mirror"],
                answer: "A",
                explanation: "Convex mirrors always produce virtual, upright, and diminished (smaller) images."
            },
            {
                question: "What is the phenomenon where light separates into different colors?",
                options: ["Dispersion", "Reflection", "Refraction", "Diffraction"],
                answer: "A",
                explanation: "Dispersion occurs when light separates into its component colors, like in a rainbow or prism."
            },
            {
                question: "Sound cannot travel through:",
                options: ["Vacuum", "Air", "Water", "Solid"],
                answer: "A",
                explanation: "Sound requires a medium (solid, liquid, or gas) to travel. It cannot travel through vacuum."
            },
            {
                question: "What is the normal in reflection and refraction?",
                options: ["Line perpendicular to the surface", "Incident ray", "Reflected ray", "Surface itself"],
                answer: "A",
                explanation: "The normal is an imaginary line drawn perpendicular to the surface at the point of incidence."
            },
            {
                question: "Which color of light has the longest wavelength?",
                options: ["Red", "Violet", "Green", "Blue"],
                answer: "A",
                explanation: "Red light has the longest wavelength (about 700 nm) in the visible spectrum."
            },
            {
                question: "What is an echo?",
                options: ["Reflection of sound", "Refraction of sound", "Absorption of sound", "Transmission of sound"],
                answer: "A",
                explanation: "An echo is the reflection of sound waves off a surface back to the listener."
            },
            {
                question: "What type of lens converges light rays?",
                options: ["Convex lens", "Concave lens", "Plano-convex lens", "Diverging lens"],
                answer: "A",
                explanation: "Convex (converging) lenses bring parallel light rays together at a focal point."
            },
            {
                question: "What is the unit of frequency?",
                options: ["Hertz (Hz)", "Decibel (dB)", "Meter (m)", "Watt (W)"],
                answer: "A",
                explanation: "Frequency is measured in Hertz (Hz), which represents the number of cycles per second."
            },
            {
                question: "Which phenomenon explains why a pencil appears bent in water?",
                options: ["Refraction", "Reflection", "Dispersion", "Diffraction"],
                answer: "A",
                explanation: "Refraction of light at the air-water interface makes the pencil appear bent."
            },
            {
                question: "What property of sound determines its loudness?",
                options: ["Amplitude", "Frequency", "Wavelength", "Speed"],
                answer: "A",
                explanation: "Loudness is determined by amplitude - greater amplitude = louder sound."
            },
            {
                question: "What is the speed of sound in air at room temperature?",
                options: ["343 m/s", "1500 m/s", "3000 m/s", "500 m/s"],
                answer: "A",
                explanation: "Sound travels at approximately 343 meters per second in air at 20Â°C."
            },
            {
                question: "Which mirror can form real images?",
                options: ["Concave mirror", "Convex mirror", "Plane mirror", "All mirrors"],
                answer: "A",
                explanation: "Concave mirrors can form real, inverted images when the object is beyond the focal point."
            },
            {
                question: "What is total internal reflection?",
                options: ["Complete reflection inside a denser medium", "Refraction at critical angle", "Dispersion of light", "Absorption of light"],
                answer: "A",
                explanation: "Total internal reflection occurs when light tries to exit a denser medium at an angle greater than the critical angle."
            },
            {
                question: "What is the Doppler effect?",
                options: ["Change in frequency due to motion", "Change in amplitude due to distance", "Change in speed due to medium", "Change in wavelength due to temperature"],
                answer: "A",
                explanation: "The Doppler effect is the change in frequency (pitch) of a wave due to relative motion between source and observer."
            },
            {
                question: "Which color of light has the highest frequency?",
                options: ["Violet", "Red", "Green", "Yellow"],
                answer: "A",
                explanation: "Violet light has the highest frequency (and shortest wavelength) in the visible spectrum."
            },
            {
                question: "What is the range of human hearing?",
                options: ["20 Hz to 20,000 Hz", "10 Hz to 10,000 Hz", "100 Hz to 100,000 Hz", "1 Hz to 1,000 Hz"],
                answer: "A",
                explanation: "Most humans can hear sounds from about 20 Hz to 20,000 Hz (20 kHz)."
            },
            {
                question: "What is a mirage?",
                options: ["Refraction of light in air", "Reflection from water", "Dispersion in prism", "Diffraction around objects"],
                answer: "A",
                explanation: "A mirage is caused by refraction of light in air layers of different temperatures, creating illusory water surfaces."
            },
            {
                question: "Which travels faster: light or sound?",
                options: ["Light", "Sound", "They travel at same speed", "Depends on medium"],
                answer: "A",
                explanation: "Light travels much faster than sound. That's why we see lightning before hearing thunder."
            },
            {
                question: "What is the critical angle?",
                options: ["Angle for total internal reflection", "Angle of incidence", "Angle of refraction", "Angle of reflection"],
                answer: "A",
                explanation: "The critical angle is the angle of incidence beyond which total internal reflection occurs."
            },
            {
                question: "What is white light composed of?",
                options: ["All colors of visible spectrum", "Only primary colors", "Red, green, and blue", "No colors - it's pure"],
                answer: "A",
                explanation: "White light contains all colors of the visible spectrum, as demonstrated by dispersion through a prism."
            }
        ];

        // Physics tips and facts
        const physicsTips = [
            "Light travels so fast that it could circle the Earth 7.5 times in one second!",
            "The speed of sound in water is about 4.3 times faster than in air.",
            "A whisper measures about 30 decibels, while a rock concert can reach 120 decibels.",
            "Rainbows are caused by dispersion, reflection, and refraction of sunlight in water droplets.",
            "Bats use echolocation (sound reflection) to navigate and hunt in complete darkness.",
            "The human eye can distinguish about 10 million different colors!",
            "Sound travels fastest in solids, then liquids, then gases.",
            "Fiber optics use total internal reflection to transmit light signals over long distances.",
            "The Doppler effect is why an ambulance siren sounds different as it passes by.",
            "Some animals can see ultraviolet or infrared light that humans cannot see."
        ];

        // Quiz questions
        const quizQuestions = [
            {
                question: "What type of wave is sound?",
                options: ["Longitudinal wave", "Transverse wave", "Electromagnetic wave", "Standing wave"],
                answer: "A"
            },
            {
                question: "What is the speed of light in vacuum?",
                options: ["300,000 km/s", "343 m/s", "1500 m/s", "5000 km/s"],
                answer: "A"
            },
            {
                question: "Which law states angle of incidence = angle of reflection?",
                options: ["Law of Reflection", "Snell's Law", "Law of Refraction", "Doppler's Law"],
                answer: "A"
            },
            {
                question: "What property of sound determines pitch?",
                options: ["Frequency", "Amplitude", "Wavelength", "Speed"],
                answer: "A"
            },
            {
                question: "Sound cannot travel through:",
                options: ["Vacuum", "Air", "Water", "Solid"],
                answer: "A"
            }
        ];

        // Wave data
        const waves = {
            transverse: {
                name: "Transverse Wave",
                description: "Particles vibrate perpendicular to wave direction",
                examples: "Light waves, water waves, waves on a string",
                properties: "Crests and troughs, can be polarized"
            },
            longitudinal: {
                name: "Longitudinal Wave",
                description: "Particles vibrate parallel to wave direction",
                examples: "Sound waves, seismic P-waves",
                properties: "Compressions and rarefactions, cannot be polarized"
            },
            sound: {
                name: "Sound Wave",
                description: "Longitudinal mechanical wave requiring medium",
                examples: "Music, speech, thunder",
                properties: "Speed depends on medium: solids > liquids > gases"
            },
            light: {
                name: "Light Wave",
                description: "Transverse electromagnetic wave",
                examples: "Visible light, radio waves, X-rays",
                properties: "Travels in vacuum, speed = 3 Ã— 10â¸ m/s"
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentWave: 'transverse',
            currentSound: 'wave',
            currentLight: 'spectrum',
            currentReflection: 'plane',
            currentRefraction: 'airWater',
            currentExperiment: 'echo',
            waveFrequency: 2,
            waveAmplitude: 30,
            animationRunning: true,
            quizIndex: 0,
            waveCanvas: null,
            waveCtx: null,
            soundCanvas: null,
            soundCtx: null,
            lightCanvas: null,
            lightCtx: null,
            reflectionCanvas: null,
            reflectionCtx: null,
            refractionCanvas: null,
            refractionCtx: null,
            experimentCanvas: null,
            experimentCtx: null,
            animationFrame: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const physicsTip = document.getElementById('physicsTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const printCertificateBtn = document.getElementById('printCertificate');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const waveInfo = document.getElementById('waveInfo');
        const waveType = document.getElementById('waveType');
        const waveDescription = document.getElementById('waveDescription');
        const wavelengthValue = document.getElementById('wavelengthValue');
        const waveDetails = document.getElementById('waveDetails');
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            initializeCanvases();
            loadQuizQuestion();
            drawWave();
            drawSound();
            drawLight();
            drawReflection();
            drawRefraction();
            drawExperiment();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            printCertificateBtn.addEventListener('click', printCertificate);
            viewTopicsBtn.addEventListener('click', () => alert("Other science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a physics expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand wave properties well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of physics!";
            } else {
                scoreMessage.textContent = "Keep learning! Physics is fascinating - review and try again!";
            }
        }

        // Create physics tip display
        function createPhysicsTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'physics-tip';
            tipDiv.innerHTML = `<strong>Physics Tip:</strong> ${physicsTips[Math.floor(Math.random() * physicsTips.length)]}`;
            return tipDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            physicsTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            physicsTip.appendChild(createPhysicsTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Print certificate
        function printCertificate() {
            const percentage = Math.round((appState.score / questions.length) * 100);
            const certificateWindow = window.open('', '_blank');
            certificateWindow.document.write(`
                <html>
                <head>
                    <title>Certificate of Achievement</title>
                    <style>
                        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
                        .certificate { border: 20px solid #2196F3; padding: 50px; max-width: 800px; margin: 0 auto; }
                        h1 { color: #2196F3; }
                        .name { font-size: 2em; margin: 20px 0; }
                        .grade { font-size: 1.5em; margin: 20px 0; }
                        .score { font-size: 1.2em; margin: 20px 0; }
                        .date { margin-top: 50px; }
                    </style>
                </head>
                <body>
                    <div class="certificate">
                        <h1>Certificate of Achievement</h1>
                        <p>This certifies that</p>
                        <div class="name">${appState.studentName}</div>
                        <p>has successfully completed the Grade 8 Physics module</p>
                        <div class="grade">Grade 8 Science - Sound & Light: Reflection & Refraction</div>
                        <div class="score">Score: ${appState.score}/${questions.length} (${percentage}%)</div>
                        <div class="date">Date: ${new Date().toLocaleDateString()}</div>
                        <p>Ideolix Learning Hub</p>
                    </div>
                </body>
                </html>
            `);
            certificateWindow.document.close();
            certificateWindow.print();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying physics!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize canvases
        function initializeCanvases() {
            // Wave canvas
            const waveCanvas = document.getElementById('waveCanvas');
            const waveContainer = document.querySelector('.wave-canvas-container');
            waveCanvas.width = waveContainer.clientWidth;
            waveCanvas.height = waveContainer.clientHeight;
            appState.waveCanvas = waveCanvas;
            appState.waveCtx = waveCanvas.getContext('2d');
            
            // Sound canvas
            const soundCanvas = document.getElementById('soundCanvas');
            const soundContainer = document.querySelector('.light-canvas-container');
            soundCanvas.width = soundContainer.clientWidth;
            soundCanvas.height = soundContainer.clientHeight;
            appState.soundCanvas = soundCanvas;
            appState.soundCtx = soundCanvas.getContext('2d');
            
            // Light canvas
            const lightCanvas = document.getElementById('lightCanvas');
            const lightContainer = document.querySelector('.light-canvas-container');
            lightCanvas.width = lightContainer.clientWidth;
            lightCanvas.height = lightContainer.clientHeight;
            appState.lightCanvas = lightCanvas;
            appState.lightCtx = lightCanvas.getContext('2d');
            
            // Reflection canvas
            const reflectionCanvas = document.getElementById('reflectionCanvas');
            const reflectionContainer = document.querySelector('.reflection-canvas-container');
            reflectionCanvas.width = reflectionContainer.clientWidth;
            reflectionCanvas.height = reflectionContainer.clientHeight;
            appState.reflectionCanvas = reflectionCanvas;
            appState.reflectionCtx = reflectionCanvas.getContext('2d');
            
            // Refraction canvas
            const refractionCanvas = document.getElementById('refractionCanvas');
            const refractionContainer = document.querySelector('.refraction-canvas-container');
            refractionCanvas.width = refractionContainer.clientWidth;
            refractionCanvas.height = refractionContainer.clientHeight;
            appState.refractionCanvas = refractionCanvas;
            appState.refractionCtx = refractionCanvas.getContext('2d');
            
            // Experiment canvas
            const experimentCanvas = document.getElementById('experimentCanvas');
            const experimentContainer = document.querySelector('.experiment-container');
            experimentCanvas.width = experimentContainer.clientWidth;
            experimentCanvas.height = experimentContainer.clientHeight;
            appState.experimentCanvas = experimentCanvas;
            appState.experimentCtx = experimentCanvas.getContext('2d');
        }

        // Show wave type
        window.showWave = function(wave) {
            appState.currentWave = wave;
            
            // Update active button
            const waveBtns = document.querySelectorAll('.wave-btn');
            waveBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawWave();
        };

        // Draw wave
        function drawWave() {
            const ctx = appState.waveCtx;
            const canvas = appState.waveCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw title
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            const wave = waves[appState.currentWave];
            ctx.fillText(wave.name, width/2, 20);
            
            // Draw wave based on type
            const centerY = height/2;
            const amplitude = appState.waveAmplitude;
            const frequency = appState.waveFrequency;
            const wavelength = 150 / frequency;
            
            if (appState.currentWave === 'transverse' || appState.currentWave === 'light') {
                // Draw transverse wave (sine wave)
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                for (let x = 0; x < width; x++) {
                    const y = centerY + amplitude * Math.sin((x * frequency * 0.05) + (Date.now() * 0.001));
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
                
                // Draw crests and troughs
                ctx.fillStyle = '#FFC107';
                for (let i = 0; i < 3; i++) {
                    const x = 50 + i * wavelength;
                    const y = centerY + amplitude * Math.sin((x * frequency * 0.05) + (Date.now() * 0.001));
                    
                    // Crest
                    if (Math.sin((x * frequency * 0.05) + (Date.now() * 0.001)) > 0.9) {
                        ctx.beginPath();
                        ctx.arc(x, y, 5, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.fillText('Crest', x, y - 15);
                    }
                    // Trough
                    else if (Math.sin((x * frequency * 0.05) + (Date.now() * 0.001)) < -0.9) {
                        ctx.beginPath();
                        ctx.arc(x, y, 5, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.fillText('Trough', x, y + 20);
                    }
                }
                
                // Draw equilibrium line
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(0, centerY);
                ctx.lineTo(width, centerY);
                ctx.stroke();
                
                // Draw amplitude
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(30, centerY - amplitude);
                ctx.lineTo(30, centerY + amplitude);
                ctx.stroke();
                ctx.fillStyle = '#4CAF50';
                ctx.fillText('Amplitude', 50, centerY);
                
                // Draw wavelength
                ctx.strokeStyle = '#FF9800';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(100, centerY - 40);
                ctx.lineTo(100 + wavelength, centerY - 40);
                ctx.stroke();
                ctx.fillStyle = '#FF9800';
                ctx.fillText('Wavelength (Î»)', 100 + wavelength/2, centerY - 50);
                
            } else if (appState.currentWave === 'longitudinal' || appState.currentWave === 'sound') {
                // Draw longitudinal wave (compressions and rarefactions)
                const particles = 20;
                const spacing = 15;
                
                for (let i = 0; i < particles; i++) {
                    const x = 50 + i * spacing;
                    // Simulate compression and rarefaction
                    const compression = amplitude * Math.sin((i * frequency * 0.5) + (Date.now() * 0.001));
                    const particleSpacing = spacing + compression;
                    
                    // Draw particle
                    ctx.fillStyle = '#2196F3';
                    ctx.beginPath();
                    ctx.arc(50 + i * particleSpacing, centerY, 8, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw compression/rarefaction labels
                    if (i % 5 === 0) {
                        if (compression > 5) {
                            ctx.fillStyle = '#FF5252';
                            ctx.fillText('Compression', 50 + i * particleSpacing, centerY - 20);
                        } else if (compression < -5) {
                            ctx.fillStyle = '#4CAF50';
                            ctx.fillText('Rarefaction', 50 + i * particleSpacing, centerY + 30);
                        }
                    }
                }
                
                // Draw direction arrow
                ctx.strokeStyle = '#FFC107';
                ctx.lineWidth = 2;
                drawArrow(ctx, width - 100, centerY, width - 50, centerY);
                ctx.fillStyle = '#FFC107';
                ctx.fillText('Wave Direction', width - 75, centerY - 15);
                
                // Draw particle vibration direction
                ctx.strokeStyle = '#9C27B0';
                ctx.beginPath();
                ctx.moveTo(100, centerY - 30);
                ctx.lineTo(100, centerY + 30);
                ctx.stroke();
                ctx.fillStyle = '#9C27B0';
                ctx.fillText('Particle Vibration', 120, centerY);
            }
            
            // Update wave info
            waveType.textContent = wave.name;
            waveDescription.textContent = wave.description;
            wavelengthValue.textContent = `${Math.round(wavelength)} px`;
            waveDetails.textContent = `Examples: ${wave.examples}\nProperties: ${wave.properties}`;
            waveInfo.classList.add('show');
        }

        // Change frequency
        window.changeFrequency = function(action) {
            if (action === 'increase') {
                appState.waveFrequency = Math.min(appState.waveFrequency + 0.5, 5);
            } else {
                appState.waveFrequency = Math.max(appState.waveFrequency - 0.5, 0.5);
            }
            drawWave();
        };

        // Change amplitude
        window.changeAmplitude = function(action) {
            if (action === 'increase') {
                appState.waveAmplitude = Math.min(appState.waveAmplitude + 5, 50);
            } else {
                appState.waveAmplitude = Math.max(appState.waveAmplitude - 5, 5);
            }
            drawWave();
        };

        // Show wave parts
        window.showWaveParts = function() {
            alert("Wave Parts:\n\n" +
                  "Transverse Waves:\n" +
                  "â€¢ Crest: Highest point\n" +
                  "â€¢ Trough: Lowest point\n" +
                  "â€¢ Amplitude: Height from rest position\n" +
                  "â€¢ Wavelength (Î»): Distance between crests\n" +
                  "â€¢ Frequency: Number of waves per second\n\n" +
                  "Longitudinal Waves:\n" +
                  "â€¢ Compression: Dense region\n" +
                  "â€¢ Rarefaction: Sparse region\n" +
                  "â€¢ Wavelength: Distance between compressions");
        };

        // Animate wave
        window.animateWave = function() {
            // In a full implementation, this would continuously animate the wave
            alert("Wave Animation Started!\n\n" +
                  "Observe how:\n" +
                  "â€¢ Transverse waves move up and down\n" +
                  "â€¢ Longitudinal waves compress and expand\n" +
                  "â€¢ Frequency affects wave density\n" +
                  "â€¢ Amplitude affects wave height\n\n" +
                  "Waves transfer energy without transferring matter!");
        };

        // Compare waves
        window.compareWaves = function() {
            alert("Transverse vs Longitudinal Waves:\n\n" +
                  "Transverse Waves:\n" +
                  "â€¢ Particles vibrate perpendicular to wave direction\n" +
                  "â€¢ Examples: Light, water waves\n" +
                  "â€¢ Have crests and troughs\n" +
                  "â€¢ Can be polarized\n\n" +
                  "Longitudinal Waves:\n" +
                  "â€¢ Particles vibrate parallel to wave direction\n" +
                  "â€¢ Examples: Sound, seismic P-waves\n" +
                  "â€¢ Have compressions and rarefactions\n" +
                  "â€¢ Cannot be polarized");
        };

        // Reset wave
        window.resetWave = function() {
            appState.waveFrequency = 2;
            appState.waveAmplitude = 30;
            drawWave();
        };

        // Show sound visualization
        window.showSound = function(sound) {
            appState.currentSound = sound;
            
            // Update active button
            const soundBtns = document.querySelectorAll('.light-btn');
            soundBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawSound();
        };

        // Draw sound visualization
        function drawSound() {
            const ctx = appState.soundCtx;
            const canvas = appState.soundCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw title
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            let title = "";
            if (appState.currentSound === 'wave') title = "Sound Wave Representation";
            else if (appState.currentSound === 'propagation') title = "Sound Propagation";
            else if (appState.currentSound === 'echo') title = "Echo - Reflection of Sound";
            else if (appState.currentSound === 'doppler') title = "Doppler Effect";
            else if (appState.currentSound === 'pitch') title = "Pitch & Frequency";
            else title = "Loudness & Amplitude";
            
            ctx.fillText(title, width/2, 20);
            
            // Draw based on sound type
            if (appState.currentSound === 'wave' || appState.currentSound === 'pitch' || appState.currentSound === 'loudness') {
                // Draw sound wave
                const centerY = height/2;
                const amplitude = appState.currentSound === 'loudness' ? 40 : 30;
                const frequency = appState.currentSound === 'pitch' ? 3 : 2;
                
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                for (let x = 0; x < width; x++) {
                    const y = centerY + amplitude * Math.sin((x * frequency * 0.05));
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
                
                // Draw labels
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                if (appState.currentSound === 'pitch') {
                    ctx.fillText('High Frequency = High Pitch', width/2, 40);
                    ctx.fillText('Low Frequency = Low Pitch', width/2, height - 20);
                } else if (appState.currentSound === 'loudness') {
                    ctx.fillText('Large Amplitude = Loud Sound', width/2, 40);
                    ctx.fillText('Small Amplitude = Soft Sound', width/2, height - 20);
                } else {
                    ctx.fillText('Longitudinal Wave - Compressions & Rarefactions', width/2, height - 20);
                }
                
            } else if (appState.currentSound === 'propagation') {
                // Draw sound propagation in different media
                // Air
                ctx.fillStyle = 'rgba(33, 150, 243, 0.3)';
                ctx.fillRect(50, 50, width - 100, 60);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Air: 343 m/s', width/2, 80);
                
                // Draw sound waves in air
                ctx.strokeStyle = '#2196F3';
                for (let i = 0; i < 5; i++) {
                    const x = 70 + i * 40;
                    ctx.beginPath();
                    ctx.arc(x, 80, 15, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                // Water
                ctx.fillStyle = 'rgba(33, 150, 243, 0.5)';
                ctx.fillRect(50, 120, width - 100, 60);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Water: 1482 m/s', width/2, 150);
                
                // Draw sound waves in water (closer together - faster)
                ctx.strokeStyle = '#2196F3';
                for (let i = 0; i < 8; i++) {
                    const x = 60 + i * 25;
                    ctx.beginPath();
                    ctx.arc(x, 150, 10, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                // Solid (steel)
                ctx.fillStyle = 'rgba(33, 150, 243, 0.7)';
                ctx.fillRect(50, 190, width - 100, 60);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Steel: 5960 m/s', width/2, 220);
                
                // Draw sound waves in steel (even closer)
                ctx.strokeStyle = '#2196F3';
                for (let i = 0; i < 12; i++) {
                    const x = 55 + i * 18;
                    ctx.beginPath();
                    ctx.arc(x, 220, 8, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Sound travels fastest in solids, then liquids, then gases', width/2, height - 20);
                
            } else if (appState.currentSound === 'echo') {
                // Draw echo diagram
                // Draw source
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.arc(100, height/2, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Sound Source', 100, height/2 - 30);
                
                // Draw wall
                ctx.fillStyle = '#795548';
                ctx.fillRect(width - 120, 50, 20, height - 100);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Wall', width - 110, 40);
                
                // Draw sound waves to wall
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(120, height/2);
                ctx.lineTo(width - 120, height/2);
                ctx.stroke();
                
                // Draw reflected waves (echo)
                ctx.strokeStyle = '#FF9800';
                ctx.beginPath();
                ctx.moveTo(width - 120, height/2);
                ctx.lineTo(120, height/2);
                ctx.stroke();
                
                // Draw labels
                ctx.fillStyle = '#2196F3';
                ctx.fillText('Original Sound', width/2 - 50, height/2 - 20);
                ctx.fillStyle = '#FF9800';
                ctx.fillText('Echo (Reflected Sound)', width/2 - 60, height/2 + 30);
                
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Echo is heard when reflected sound reaches listener after 0.1s', width/2, height - 20);
                
            } else if (appState.currentSound === 'doppler') {
                // Draw Doppler effect
                // Draw stationary source
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.arc(100, height/2, 15, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Stationary Source', 100, height/2 - 25);
                
                // Draw waves from stationary source (concentric circles)
                ctx.strokeStyle = 'rgba(33, 150, 243, 0.5)';
                for (let i = 1; i <= 3; i++) {
                    ctx.beginPath();
                    ctx.arc(100, height/2, i * 30, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                // Draw moving source
                ctx.fillStyle = '#FF9800';
                ctx.beginPath();
                ctx.arc(width - 100, height/2, 15, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Moving Source', width - 100, height/2 - 25);
                
                // Draw waves from moving source (compressed in front)
                ctx.strokeStyle = 'rgba(255, 152, 0, 0.5)';
                // Front (compressed)
                for (let i = 1; i <= 3; i++) {
                    ctx.beginPath();
                    ctx.arc(width - 100 + i * 20, height/2, i * 20, 0, Math.PI * 2);
                    ctx.stroke();
                }
                // Back (expanded)
                for (let i = 1; i <= 3; i++) {
                    ctx.beginPath();
                    ctx.arc(width - 100 - i * 40, height/2, i * 40, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                // Draw explanation
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Waves compress in front (higher pitch), expand behind (lower pitch)', width/2, height - 40);
                ctx.fillText('Example: Ambulance siren sounds different as it passes', width/2, height - 20);
            }
        };

        // Play sound wave
        window.playSoundWave = function() {
            alert("Generating Sound Wave!\n\n" +
                  "In a real application, this would play different sound frequencies.\n\n" +
                  "High frequency = High pitch (like a whistle)\n" +
                  "Low frequency = Low pitch (like a drum)\n" +
                  "Large amplitude = Loud sound\n" +
                  "Small amplitude = Soft sound");
        };

        // Show medium effect
        window.showMediumEffect = function() {
            alert("Medium Effect on Sound:\n\n" +
                  "Sound Speed in Different Media:\n" +
                  "â€¢ Air (20Â°C): 343 m/s\n" +
                  "â€¢ Water: 1482 m/s (4.3Ã— faster than air)\n" +
                  "â€¢ Steel: 5960 m/s (17Ã— faster than air)\n" +
                  "â€¢ Vacuum: 0 m/s (sound cannot travel)\n\n" +
                  "Sound travels faster in denser media because particles are closer together.");
        };

        // Show sound applications
        window.showSoundApplications = function() {
            alert("Sound Applications:\n\n" +
                  "Medical:\n" +
                  "â€¢ Ultrasound imaging\n" +
                  "â€¢ Hearing aids\n\n" +
                  "Communication:\n" +
                  "â€¢ Telephones\n" +
                  "â€¢ Microphones & speakers\n\n" +
                  "Navigation:\n" +
                  "â€¢ Sonar (underwater)\n" +
                  "â€¢ Echolocation (bats, dolphins)\n\n" +
                  "Entertainment:\n" +
                  "â€¢ Musical instruments\n" +
                  "â€¢ Sound systems");
        };

        // Show light visualization
        window.showLight = function(light) {
            appState.currentLight = light;
            
            // Update active button
            const lightBtns = document.querySelectorAll('.light-btn');
            lightBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawLight();
        };

        // Draw light visualization
        function drawLight() {
            const ctx = appState.lightCtx;
            const canvas = appState.lightCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw title
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            let title = "";
            if (appState.currentLight === 'spectrum') title = "Visible Light Spectrum";
            else if (appState.currentLight === 'ray') title = "Light Ray Propagation";
            else if (appState.currentLight === 'prism') title = "Prism Dispersion";
            else if (appState.currentLight === 'speed') title = "Speed of Light";
            else if (appState.currentLight === 'em') title = "Electromagnetic Spectrum";
            else if (appState.currentLight === 'color') title = "Color Mixing";
            else if (appState.currentLight === 'absorption') title = "Light Absorption";
            else if (appState.currentLight === 'transmission') title = "Light Transmission";
            else title = "Shadow Formation";
            
            ctx.fillText(title, width/2, 20);
            
            // Draw based on light type
            if (appState.currentLight === 'spectrum') {
                // Draw visible spectrum
                const colors = [
                    {name: 'Violet', color: '#8B00FF', start: 50},
                    {name: 'Indigo', color: '#4B0082', start: 90},
                    {name: 'Blue', color: '#0000FF', start: 130},
                    {name: 'Green', color: '#00FF00', start: 170},
                    {name: 'Yellow', color: '#FFFF00', start: 210},
                    {name: 'Orange', color: '#FF7F00', start: 250},
                    {name: 'Red', color: '#FF0000', start: 290}
                ];
                
                const barHeight = 40;
                const y = 80;
                
                colors.forEach(color => {
                    ctx.fillStyle = color.color;
                    ctx.fillRect(color.start, y, 30, barHeight);
                    
                    ctx.fillStyle = '#FFFFFF';
                    ctx.font = '10px Arial';
                    ctx.fillText(color.name, color.start + 5, y + barHeight + 15);
                });
                
                // Draw wavelength scale
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(50, y + barHeight + 30);
                ctx.lineTo(320, y + barHeight + 30);
                ctx.stroke();
                
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '10px Arial';
                ctx.fillText('400 nm', 45, y + barHeight + 45);
                ctx.fillText('700 nm', 315, y + barHeight + 45);
                ctx.fillText('Wavelength â†’', width/2, y + barHeight + 60);
                
                ctx.fillStyle = '#FFC107';
                ctx.font = '12px Arial';
                ctx.fillText('White light contains all these colors!', width/2, height - 30);
                
            } else if (appState.currentLight === 'ray') {
                // Draw light rays
                // Draw light source
                ctx.fillStyle = '#FFC107';
                ctx.beginPath();
                ctx.arc(100, height/2, 25, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#000000';
                ctx.fillText('Light\nSource', 100, height/2);
                
                // Draw light rays
                ctx.strokeStyle = '#FFC107';
                ctx.lineWidth = 3;
                
                // Straight ray
                ctx.beginPath();
                ctx.moveTo(125, height/2);
                ctx.lineTo(width - 50, height/2);
                ctx.stroke();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Straight line propagation', width/2, height/2 - 20);
                
                // Diverging rays
                for (let i = -2; i <= 2; i++) {
                    const angle = i * 0.3;
                    ctx.beginPath();
                    ctx.moveTo(100, height/2);
                    ctx.lineTo(width - 50, height/2 + angle * 100);
                    ctx.stroke();
                }
                
                ctx.fillStyle = '#FFC107';
                ctx.font = '12px Arial';
                ctx.fillText('Light travels in straight lines (rays)', width/2, height - 30);
                
            } else if (appState.currentLight === 'prism') {
                // Draw prism dispersion
                // Draw white light entering
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(50, height/2);
                ctx.lineTo(150, height/2);
                ctx.stroke();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('White Light', 100, height/2 - 15);
                
                // Draw prism
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(150, 80);
                ctx.lineTo(250, 80);
                ctx.lineTo(150, height - 80);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Prism', 180, height/2);
                
                // Draw dispersed light (rainbow)
                const colors = ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#8B00FF'];
                
                for (let i = 0; i < colors.length; i++) {
                    const angle = -0.5 + (i * 0.15);
                    const x1 = 250;
                    const y1 = height/2;
                    const x2 = width - 50;
                    const y2 = height/2 + angle * 150;
                    
                    ctx.strokeStyle = colors[i];
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                }
                
                ctx.fillStyle = '#FFC107';
                ctx.font = '12px Arial';
                ctx.fillText('Prism separates white light into colors (dispersion)', width/2, height - 30);
            }
        };

        // Show reflection visualization
        window.showReflection = function(reflection) {
            appState.currentReflection = reflection;
            
            // Update active button
            const reflectionBtns = document.querySelectorAll('.reflection-btn');
            reflectionBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawReflection();
        };

        // Draw reflection visualization
        function drawReflection() {
            const ctx = appState.reflectionCtx;
            const canvas = appState.reflectionCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw title
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            let title = "";
            if (appState.currentReflection === 'plane') title = "Plane Mirror Reflection";
            else if (appState.currentReflection === 'concave') title = "Concave Mirror";
            else if (appState.currentReflection === 'convex') title = "Convex Mirror";
            else if (appState.currentReflection === 'angle') title = "Angle of Incidence = Angle of Reflection";
            else if (appState.currentReflection === 'multiple') title = "Multiple Reflections";
            else if (appState.currentReflection === 'periscope') title = "Periscope Principle";
            else if (appState.currentReflection === 'image') title = "Image Formation in Mirrors";
            else title = "Laws of Reflection";
            
            ctx.fillText(title, width/2, 20);
            
            // Draw based on reflection type
            if (appState.currentReflection === 'plane' || appState.currentReflection === 'angle') {
                // Draw plane mirror
                ctx.fillStyle = 'rgba(156, 39, 176, 0.3)';
                ctx.fillRect(width/2 - 5, 50, 10, height - 100);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Mirror', width/2, 40);
                
                // Draw normal
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(width/2, 80);
                ctx.lineTo(width/2, height - 80);
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle = '#4CAF50';
                ctx.fillText('Normal', width/2 + 10, height/2);
                
                // Draw incident ray
                const incidentAngle = 30 * Math.PI / 180;
                const incidentLength = 100;
                
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(width/2 - incidentLength * Math.sin(incidentAngle), 
                          height/2 + incidentLength * Math.cos(incidentAngle));
                ctx.lineTo(width/2, height/2);
                ctx.stroke();
                ctx.fillStyle = '#2196F3';
                ctx.fillText('Incident Ray', width/2 - 70, height/2 - 40);
                
                // Draw reflected ray
                ctx.strokeStyle = '#FF9800';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(width/2, height/2);
                ctx.lineTo(width/2 + incidentLength * Math.sin(incidentAngle), 
                          height/2 + incidentLength * Math.cos(incidentAngle));
                ctx.stroke();
                ctx.fillStyle = '#FF9800';
                ctx.fillText('Reflected Ray', width/2 + 50, height/2 - 40);
                
                // Draw angles
                ctx.strokeStyle = '#FFC107';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.arc(width/2, height/2, 40, Math.PI/2 - incidentAngle, Math.PI/2);
                ctx.stroke();
                ctx.fillStyle = '#FFC107';
                ctx.fillText('Î¸i', width/2 - 25, height/2 - 25);
                
                ctx.beginPath();
                ctx.arc(width/2, height/2, 40, Math.PI/2, Math.PI/2 + incidentAngle);
                ctx.stroke();
                ctx.fillText('Î¸r', width/2 + 15, height/2 - 25);
                
                ctx.fillStyle = '#9C27B0';
                ctx.font = '12px Arial';
                ctx.fillText('Angle of Incidence (Î¸i) = Angle of Reflection (Î¸r)', width/2, height - 30);
                
            } else if (appState.currentReflection === 'concave') {
                // Draw concave mirror
                const centerX = width/2;
                const centerY = height/2;
                const radius = 150;
                
                // Draw mirror arc (concave)
                ctx.strokeStyle = '#9C27B0';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(centerX, centerY + 100, radius, Math.PI * 0.7, Math.PI * 1.3);
                ctx.stroke();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Concave Mirror', centerX, 60);
                
                // Draw principal axis
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(50, centerY + 100);
                ctx.lineTo(width - 50, centerY + 100);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Draw focal point
                ctx.fillStyle = '#FF5252';
                ctx.beginPath();
                ctx.arc(centerX + radius/2, centerY + 100, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('F (Focal Point)', centerX + radius/2 + 10, centerY + 90);
                
                // Draw center of curvature
                ctx.fillStyle = '#2196F3';
                ctx.beginPath();
                ctx.arc(centerX + radius, centerY + 100, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('C (Center of Curvature)', centerX + radius + 10, centerY + 120);
                
                // Draw parallel rays converging at focus
                ctx.strokeStyle = '#FF9800';
                ctx.lineWidth = 2;
                
                // Ray 1: Parallel to axis â†’ through focus
                ctx.beginPath();
                ctx.moveTo(80, centerY);
                ctx.lineTo(centerX + radius/2, centerY + 100);
                ctx.lineTo(width - 50, centerY + 200);
                ctx.stroke();
                
                // Ray 2: Through focus â†’ parallel
                ctx.beginPath();
                ctx.moveTo(80, centerY + 200);
                ctx.lineTo(centerX + radius/2, centerY + 100);
                ctx.lineTo(width - 50, centerY);
                ctx.stroke();
                
                ctx.fillStyle = '#9C27B0';
                ctx.font = '12px Arial';
                ctx.fillText('Concave mirrors converge light to a focal point', width/2, height - 30);
                
            } else if (appState.currentReflection === 'convex') {
                // Draw convex mirror
                const centerX = width/2;
                const centerY = height/2;
                const radius = 150;
                
                // Draw mirror arc (convex)
                ctx.strokeStyle = '#9C27B0';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(centerX, centerY - 50, radius, Math.PI * 0.2, Math.PI * 0.8);
                ctx.stroke();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Convex Mirror', centerX, 60);
                
                // Draw principal axis
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(50, centerY - 50);
                ctx.lineTo(width - 50, centerY - 50);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Draw virtual focus behind mirror
                ctx.fillStyle = '#FF5252';
                ctx.beginPath();
                ctx.arc(centerX - radius/2, centerY - 50, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('F (Virtual Focus)', centerX - radius/2 - 60, centerY - 60);
                
                // Draw diverging rays
                ctx.strokeStyle = '#FF9800';
                ctx.lineWidth = 2;
                
                // Parallel rays appear to diverge from virtual focus
                for (let i = 0; i < 3; i++) {
                    const y = centerY - 100 + i * 50;
                    ctx.beginPath();
                    ctx.moveTo(80, y);
                    // Hit mirror
                    const mirrorX = centerX - Math.sqrt(radius*radius - Math.pow(y - (centerY - 50), 2));
                    ctx.lineTo(mirrorX, y);
                    // Reflect (appear to come from virtual focus)
                    ctx.lineTo(width - 50, centerY - 150 + i * 100);
                    ctx.stroke();
                }
                
                ctx.fillStyle = '#9C27B0';
                ctx.font = '12px Arial';
                ctx.fillText('Convex mirrors diverge light - virtual focus behind mirror', width/2, height - 30);
            }
        };

        // Change incidence angle
        window.changeIncidenceAngle = function() {
            alert("Changing Incidence Angle:\n\n" +
                  "Law of Reflection:\n" +
                  "â€¢ Angle of incidence = Angle of reflection\n" +
                  "â€¢ Both measured from the normal\n" +
                  "â€¢ Normal is perpendicular to surface\n\n" +
                  "Example:\n" +
                  "â€¢ 30Â° incidence â†’ 30Â° reflection\n" +
                  "â€¢ 45Â° incidence â†’ 45Â° reflection\n" +
                  "â€¢ 60Â° incidence â†’ 60Â° reflection");
        };

        // Show reflection laws
        window.showReflectionLaws = function() {
            alert("Laws of Reflection:\n\n" +
                  "1. The incident ray, reflected ray, and normal all lie in the same plane.\n\n" +
                  "2. The angle of incidence (Î¸i) equals the angle of reflection (Î¸r).\n\n" +
                  "Additional Facts:\n" +
                  "â€¢ Regular reflection: Smooth surface (mirror)\n" +
                  "â€¢ Diffuse reflection: Rough surface (paper, wall)\n" +
                  "â€¢ Image in plane mirror: Virtual, upright, same size, laterally inverted");
        };

        // Show refraction visualization
        window.showRefraction = function(refraction) {
            appState.currentRefraction = refraction;
            
            // Update active button
            const refractionBtns = document.querySelectorAll('.refraction-btn');
            refractionBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawRefraction();
        };

        // Draw refraction visualization
        function drawRefraction() {
            const ctx = appState.refractionCtx;
            const canvas = appState.refractionCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw title
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            let title = "";
            if (appState.currentRefraction === 'airWater') title = "Refraction: Air to Water";
            else if (appState.currentRefraction === 'waterAir') title = "Refraction: Water to Air";
            else if (appState.currentRefraction === 'glass') title = "Refraction Through Glass Slab";
            else if (appState.currentRefraction === 'prismRefraction') title = "Refraction Through Prism";
            else if (appState.currentRefraction === 'lens') title = "Refraction Through Lens";
            else if (appState.currentRefraction === 'critical') title = "Critical Angle";
            else if (appState.currentRefraction === 'total') title = "Total Internal Reflection";
            else if (appState.currentRefraction === 'apparentDepth') title = "Apparent Depth";
            else title = "Snell's Law of Refraction";
            
            ctx.fillText(title, width/2, 20);
            
            // Draw based on refraction type
            if (appState.currentRefraction === 'airWater' || appState.currentRefraction === 'waterAir') {
                // Draw boundary
                const boundaryY = height/2;
                
                // Draw air (top)
                ctx.fillStyle = 'rgba(33, 150, 243, 0.1)';
                ctx.fillRect(0, 0, width, boundaryY);
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Air (nâ‰ˆ1.00)', width/4, boundaryY/2);
                
                // Draw water (bottom)
                ctx.fillStyle = 'rgba(33, 150, 243, 0.3)';
                ctx.fillRect(0, boundaryY, width, boundaryY);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Water (nâ‰ˆ1.33)', width*3/4, boundaryY + boundaryY/2);
                
                // Draw boundary line
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, boundaryY);
                ctx.lineTo(width, boundaryY);
                ctx.stroke();
                ctx.fillText('Boundary', width - 50, boundaryY - 10);
                
                // Draw normal
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(width/2, 50);
                ctx.lineTo(width/2, height - 50);
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle = '#4CAF50';
                ctx.fillText('Normal', width/2 + 10, boundaryY);
                
                // Draw incident ray
                const incidentAngle = 40 * Math.PI / 180;
                const incidentLength = 120;
                
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                if (appState.currentRefraction === 'airWater') {
                    // Air to water: bends toward normal
                    ctx.moveTo(width/2 - incidentLength * Math.sin(incidentAngle), 
                              boundaryY - incidentLength * Math.cos(incidentAngle));
                    ctx.lineTo(width/2, boundaryY);
                    
                    // Refracted ray (bends toward normal)
                    const refractedAngle = Math.asin(Math.sin(incidentAngle) / 1.33);
                    ctx.moveTo(width/2, boundaryY);
                    ctx.lineTo(width/2 + incidentLength * Math.sin(refractedAngle), 
                              boundaryY + incidentLength * Math.cos(refractedAngle));
                    
                    ctx.fillStyle = '#2196F3';
                    ctx.fillText('Air â†’ Water: Bends toward normal', width/2, height - 30);
                } else {
                    // Water to air: bends away from normal
                    ctx.moveTo(width/2 - incidentLength * Math.sin(incidentAngle), 
                              boundaryY + incidentLength * Math.cos(incidentAngle));
                    ctx.lineTo(width/2, boundaryY);
                    
                    // Refracted ray (bends away from normal)
                    const refractedAngle = Math.asin(Math.sin(incidentAngle) * 1.33);
                    // Check for total internal reflection
                    if (refractedAngle <= Math.PI/2) {
                        ctx.moveTo(width/2, boundaryY);
                        ctx.lineTo(width/2 + incidentLength * Math.sin(refractedAngle), 
                                  boundaryY - incidentLength * Math.cos(refractedAngle));
                        ctx.fillStyle = '#2196F3';
                        ctx.fillText('Water â†’ Air: Bends away from normal', width/2, height - 30);
                    } else {
                        // Total internal reflection would occur
                        ctx.fillStyle = '#FF5252';
                        ctx.fillText('Beyond critical angle: Total internal reflection', width/2, height - 30);
                    }
                }
                ctx.stroke();
                
                // Draw angles
                ctx.strokeStyle = '#FFC107';
                ctx.lineWidth = 1;
                
                if (appState.currentRefraction === 'airWater') {
                    // Incidence angle (air side)
                    ctx.beginPath();
                    ctx.arc(width/2, boundaryY, 40, Math.PI/2 - incidentAngle, Math.PI/2);
                    ctx.stroke();
                    ctx.fillStyle = '#FFC107';
                    ctx.fillText('Î¸â‚', width/2 - 25, boundaryY - 25);
                    
                    // Refraction angle (water side)
                    const refractedAngle = Math.asin(Math.sin(incidentAngle) / 1.33);
                    ctx.beginPath();
                    ctx.arc(width/2, boundaryY, 40, Math.PI/2, Math.PI/2 + refractedAngle);
                    ctx.stroke();
                    ctx.fillText('Î¸â‚‚', width/2 + 15, boundaryY + 35);
                } else {
                    // Incidence angle (water side)
                    ctx.beginPath();
                    ctx.arc(width/2, boundaryY, 40, Math.PI/2, Math.PI/2 + incidentAngle);
                    ctx.stroke();
                    ctx.fillStyle = '#FFC107';
                    ctx.fillText('Î¸â‚', width/2 + 15, boundaryY + 35);
                }
                
            } else if (appState.currentRefraction === 'glass') {
                // Draw glass slab
                const slabWidth = 150;
                const slabHeight = 100;
                const slabX = width/2 - slabWidth/2;
                const slabY = height/2 - slabHeight/2;
                
                // Draw glass slab
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.fillRect(slabX, slabY, slabWidth, slabHeight);
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 2;
                ctx.strokeRect(slabX, slabY, slabWidth, slabHeight);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Glass Slab', width/2, slabY - 10);
                
                // Draw light ray through slab
                const incidentAngle = 30 * Math.PI / 180;
                const glassRefractiveIndex = 1.5;
                
                // Calculate refraction angles
                const refractedAngle = Math.asin(Math.sin(incidentAngle) / glassRefractiveIndex);
                
                // Incident ray (air to glass)
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(slabX - 80, height/2);
                ctx.lineTo(slabX, height/2);
                ctx.stroke();
                
                // Refracted ray in glass
                const glassPathLength = slabWidth / Math.cos(refractedAngle);
                const verticalShift = glassPathLength * Math.sin(refractedAngle);
                
                ctx.beginPath();
                ctx.moveTo(slabX, height/2);
                ctx.lineTo(slabX + slabWidth, height/2 + verticalShift);
                ctx.stroke();
                
                // Emergent ray (glass to air)
                ctx.beginPath();
                ctx.moveTo(slabX + slabWidth, height/2 + verticalShift);
                ctx.lineTo(slabX + slabWidth + 80, height/2 + verticalShift);
                ctx.stroke();
                
                // Draw normals
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                // Left normal
                ctx.beginPath();
                ctx.moveTo(slabX, slabY);
                ctx.lineTo(slabX, slabY + slabHeight);
                ctx.stroke();
                // Right normal
                ctx.beginPath();
                ctx.moveTo(slabX + slabWidth, slabY);
                ctx.lineTo(slabX + slabWidth, slabY + slabHeight);
                ctx.stroke();
                ctx.setLineDash([]);
                
                ctx.fillStyle = '#FF9800';
                ctx.font = '12px Arial';
                ctx.fillText('Light emerges parallel but displaced', width/2, height - 30);
            }
        };

        // Change refractive index
        window.changeRefractiveIndex = function() {
            alert("Refractive Index (n):\n\n" +
                  "Definition:\n" +
                  "n = speed of light in vacuum / speed of light in medium\n\n" +
                  "Examples:\n" +
                  "â€¢ Vacuum: n = 1.00\n" +
                  "â€¢ Air: n â‰ˆ 1.0003\n" +
                  "â€¢ Water: n = 1.33\n" +
                  "â€¢ Glass: n = 1.5\n" +
                  "â€¢ Diamond: n = 2.42\n\n" +
                  "Higher n = slower light speed = more bending");
        };

        // Show Snell's Law
        window.showSnellsLaw = function() {
            alert("Snell's Law of Refraction:\n\n" +
                  "Formula: nâ‚ sin(Î¸â‚) = nâ‚‚ sin(Î¸â‚‚)\n\n" +
                  "Where:\n" +
                  "â€¢ nâ‚ = refractive index of first medium\n" +
                  "â€¢ Î¸â‚ = angle of incidence (in first medium)\n" +
                  "â€¢ nâ‚‚ = refractive index of second medium\n" +
                  "â€¢ Î¸â‚‚ = angle of refraction (in second medium)\n\n" +
                  "Example:\n" +
                  "Light from air (n=1) to water (n=1.33):\n" +
                  "If Î¸â‚ = 30Â°, then Î¸â‚‚ = sinâ»Â¹(sin30Â°/1.33) â‰ˆ 22Â°");
        };

        // Show refraction applications
        window.showRefractionApplications = function() {
            alert("Refraction Applications:\n\n" +
                  "Vision Correction:\n" +
                  "â€¢ Eyeglasses\n" +
                  "â€¢ Contact lenses\n" +
                  "â€¢ Cataract surgery lenses\n\n" +
                  "Optical Instruments:\n" +
                  "â€¢ Microscopes\n" +
                  "â€¢ Telescopes\n" +
                  "â€¢ Cameras\n\n" +
                  "Everyday Phenomena:\n" +
                  "â€¢ Rainbows\n" +
                  "â€¢ Twinkling stars\n" +
                  "â€¢ Mirages\n" +
                  "â€¢ Pencil appearing bent in water");
        };

        // Show property
        window.showProperty = function(property) {
            const properties = {
                amplitude: "Amplitude:\nâ€¢ Height of wave from rest position\nâ€¢ Sound: Determines loudness\nâ€¢ Light: Determines brightness/intensity\nâ€¢ Measured in meters (m) or decibels (dB) for sound",
                wavelength: "Wavelength (Î»):\nâ€¢ Distance between successive crests\nâ€¢ Sound: Longer Î» = lower pitch\nâ€¢ Light: Determines color\nâ€¢ Red: ~700 nm, Violet: ~400 nm",
                frequency: "Frequency (f):\nâ€¢ Number of waves per second\nâ€¢ Unit: Hertz (Hz)\nâ€¢ Sound: Higher f = higher pitch\nâ€¢ Light: Higher f = higher energy\nâ€¢ Human hearing: 20 Hz - 20,000 Hz",
                pitch: "Pitch:\nâ€¢ Perception of sound frequency\nâ€¢ High frequency = high pitch (whistle)\nâ€¢ Low frequency = low pitch (drum)\nâ€¢ Measured subjectively in musical notes",
                loudness: "Loudness:\nâ€¢ Perception of sound amplitude\nâ€¢ Greater amplitude = louder sound\nâ€¢ Measured in decibels (dB)\nâ€¢ Whisper: ~30 dB, Concert: ~120 dB",
                color: "Color:\nâ€¢ Perception of light wavelength\nâ€¢ Red: Longest wavelength (~700 nm)\nâ€¢ Violet: Shortest wavelength (~400 nm)\nâ€¢ White light: All colors combined",
                intensity: "Intensity:\nâ€¢ Brightness of light\nâ€¢ Related to amplitude of light wave\nâ€¢ Measured in lumens or lux\nâ€¢ Sunlight: ~100,000 lux, Moonlight: ~0.1 lux",
                speed: "Wave Speed (v):\nâ€¢ v = f Ã— Î» (frequency Ã— wavelength)\nâ€¢ Sound in air: ~343 m/s at 20Â°C\nâ€¢ Light in vacuum: 3 Ã— 10â¸ m/s\nâ€¢ Speed depends on medium properties"
            };
            
            if (properties[property]) {
                alert(properties[property]);
            }
        };

        // Compare properties
        window.compareProperties = function() {
            alert("Wave Property Comparison:\n\n" +
                  "Sound vs Light:\n" +
                  "â€¢ Frequency: Both have frequency\n" +
                  "â€¢ Wavelength: Both have wavelength\n" +
                  "â€¢ Amplitude: Sound amplitude = loudness, Light amplitude = brightness\n" +
                  "â€¢ Speed: Light much faster than sound\n\n" +
                  "Transverse vs Longitudinal:\n" +
                  "â€¢ Both transfer energy\n" +
                  "â€¢ Both can be reflected/refracted\n" +
                  "â€¢ Both have frequency/wavelength/speed");
        };

        // Show wave equation
        window.showWaveEquation = function() {
            alert("Wave Equation:\n\n" +
                  "Basic Formula: v = f Ã— Î»\n\n" +
                  "Where:\n" +
                  "â€¢ v = wave speed (m/s)\n" +
                  "â€¢ f = frequency (Hz)\n" +
                  "â€¢ Î» = wavelength (m)\n\n" +
                  "Examples:\n" +
                  "1. Sound in air (v = 343 m/s):\n" +
                  "   If f = 440 Hz (A note), then Î» = 343/440 â‰ˆ 0.78 m\n\n" +
                  "2. Light in vacuum (v = 3Ã—10â¸ m/s):\n" +
                  "   If Î» = 600 nm (orange light), then f = 3Ã—10â¸/600Ã—10â»â¹ = 5Ã—10Â¹â´ Hz");
        };

        // Run experiment
        window.runExperiment = function(experiment) {
            appState.currentExperiment = experiment;
            
            // Update active button
            const experimentBtns = document.querySelectorAll('.experiment-btn');
            experimentBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawExperiment();
        };

        // Draw experiment
        function drawExperiment() {
            const ctx = appState.experimentCtx;
            const canvas = appState.experimentCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw title
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            let title = "";
            if (appState.currentExperiment === 'echo') title = "Echo Experiment";
            else if (appState.currentExperiment === 'periscope') title = "Periscope";
            else if (appState.currentExperiment === 'prism') title = "Prism Dispersion Experiment";
            else if (appState.currentExperiment === 'lens') title = "Lens Experiment";
            else if (appState.currentExperiment === 'mirage') title = "Mirage Formation";
            else title = "Sound in Different Media";
            
            ctx.fillText(title, width/2, 20);
            
            // Draw experiment based on type
            if (appState.currentExperiment === 'echo') {
                // Draw echo experiment setup
                // Draw person
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.arc(80, height/2, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Person', 80, height/2 - 30);
                
                // Draw wall
                ctx.fillStyle = '#795548';
                ctx.fillRect(width - 100, 50, 20, height - 100);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Wall', width - 90, 40);
                
                // Draw distance
                ctx.strokeStyle = '#FFC107';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(100, height/2);
                ctx.lineTo(width - 100, height/2);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // Calculate distance for echo
                const distance = width - 200;
                const time = (2 * distance / 343).toFixed(2); // Round trip at speed of sound
                
                ctx.fillStyle = '#FFC107';
                ctx.font = '12px Arial';
                ctx.fillText(`Distance: ${Math.round(distance/10)}m`, width/2, height/2 - 20);
                ctx.fillText(`Echo time: ${time}s (if >0.1s)`, width/2, height/2 + 20);
                
                // Draw sound waves
                const timeFactor = Date.now() * 0.001;
                ctx.strokeStyle = 'rgba(33, 150, 243, 0.5)';
                for (let i = 1; i <= 3; i++) {
                    const radius = (timeFactor * 50 + i * 30) % 150;
                    if (radius < 100) {
                        ctx.beginPath();
                        ctx.arc(80, height/2, radius, 0, Math.PI * 2);
                        ctx.stroke();
                    }
                }
                
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Clap and listen for echo - needs >17m distance', width/2, height - 20);
                
            } else if (appState.currentExperiment === 'periscope') {
                // Draw periscope
                // Draw two mirrors at 45Â°
                const mirrorLength = 80;
                
                // First mirror (top)
                ctx.save();
                ctx.translate(100, 80);
                ctx.rotate(-Math.PI/4);
                ctx.fillStyle = 'rgba(156, 39, 176, 0.3)';
                ctx.fillRect(0, -5, mirrorLength, 10);
                ctx.restore();
                
                // Second mirror (bottom)
                ctx.save();
                ctx.translate(180, height - 80);
                ctx.rotate(Math.PI/4);
                ctx.fillStyle = 'rgba(156, 39, 176, 0.3)';
                ctx.fillRect(0, -5, mirrorLength, 10);
                ctx.restore();
                
                // Draw light path
                ctx.strokeStyle = '#FFC107';
                ctx.lineWidth = 3;
                
                // Light enters top
                ctx.beginPath();
                ctx.moveTo(50, 50);
                ctx.lineTo(100, 80);
                ctx.stroke();
                
                // Reflects down
                ctx.beginPath();
                ctx.moveTo(100, 80);
                ctx.lineTo(180, height - 80);
                ctx.stroke();
                
                // Reflects out
                ctx.beginPath();
                ctx.moveTo(180, height - 80);
                ctx.lineTo(230, height - 50);
                ctx.stroke();
                
                // Draw labels
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Object', 40, 40);
                ctx.fillText('Image', 240, height - 40);
                ctx.fillText('Periscope uses two mirrors at 45Â°', width/2, height - 20);
                
            } else if (appState.currentExperiment === 'prism') {
                // Draw prism dispersion experiment
                // Draw light source
                ctx.fillStyle = '#FFC107';
                ctx.beginPath();
                ctx.arc(80, height/2, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Light\nSource', 80, height/2);
                
                // Draw prism
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(150, 80);
                ctx.lineTo(250, 80);
                ctx.lineTo(150, height - 80);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Prism', 180, height/2);
                
                // Draw white light entering
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(100, height/2);
                ctx.lineTo(150, height/2);
                ctx.stroke();
                ctx.fillText('White Light', 125, height/2 - 20);
                
                // Draw spectrum exiting
                const colors = ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#8B00FF'];
                
                for (let i = 0; i < colors.length; i++) {
                    const angle = -0.5 + (i * 0.15);
                    const x1 = 250;
                    const y1 = height/2;
                    const x2 = width - 50;
                    const y2 = height/2 + angle * 150;
                    
                    ctx.strokeStyle = colors[i];
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                }
                
                // Draw screen catching spectrum
                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(width - 50, 50);
                ctx.lineTo(width - 50, height - 50);
                ctx.stroke();
                ctx.fillText('Screen', width - 40, height/2);
                
                ctx.fillStyle = '#FFC107';
                ctx.font = '12px Arial';
                ctx.fillText('Prism separates white light into rainbow colors', width/2, height - 20);
            }
        };

        // Pause experiment
        window.pauseExperiment = function() {
            alert("Experiment paused. Click 'Reset' to restart.");
        };

        // Reset experiment
        window.resetExperiment = function() {
            drawExperiment();
        };

        // Show more examples
        window.showMoreExamples = function() {
            alert("More Sound & Light Examples:\n\n" +
                  "Sound Phenomena:\n" +
                  "â€¢ Thunder (sound of lightning)\n" +
                  "â€¢ Sonar (underwater navigation)\n" +
                  "â€¢ Ultrasound (medical imaging)\n\n" +
                  "Light Phenomena:\n" +
                  "â€¢ Rainbow (dispersion + reflection in droplets)\n" +
                  "â€¢ Blue sky (Rayleigh scattering)\n" +
                  "â€¢ Red sunset (more scattering at horizon)\n\n" +
                  "Everyday Examples:\n" +
                  "â€¢ Mirrors in bathrooms\n" +
                  "â€¢ Glasses/contact lenses\n" +
                  "â€¢ Camera lenses\n" +
                  "â€¢ Microphones & speakers");
        };

        // Test your knowledge
        window.testYourKnowledge = function() {
            alert("Quick Physics Test:\n\n" +
                  "1. Why do we see lightning before hearing thunder? (Light faster than sound)\n" +
                  "2. Why does a straw look bent in water? (Refraction)\n" +
                  "3. What type of mirror is used in cars? (Convex - wider view)\n" +
                  "4. Why is the sky blue? (Rayleigh scattering)\n" +
                  "5. How do fiber optics work? (Total internal reflection)");
        };

        // Show more applications
        window.showMoreApplications = function() {
            alert("Real-World Applications:\n\n" +
                  "Medical:\n" +
                  "â€¢ Endoscopy (fiber optics)\n" +
                  "â€¢ Ultrasound scanning\n" +
                  "â€¢ LASIK eye surgery\n\n" +
                  "Communication:\n" +
                  "â€¢ Fiber optic internet\n" +
                  "â€¢ Satellite communication\n" +
                  "â€¢ Radio/TV broadcasting\n\n" +
                  "Transportation:\n" +
                  "â€¢ Rear-view mirrors\n" +
                  "â€¢ Traffic light sensors\n" +
                  "â€¢ Sonar in ships\n\n" +
                  "Entertainment:\n" +
                  "â€¢ Concert sound systems\n" +
                  "â€¢ Movie projectors\n" +
                  "â€¢ Laser light shows");
        };

        // Show technology impact
        window.showTechnologyImpact = function() {
            alert("Technology Impact:\n\n" +
                  "Revolutionary Technologies:\n" +
                  "â€¢ Internet (fiber optics)\n" +
                  "â€¢ Medical imaging (X-rays, ultrasound)\n" +
                  "â€¢ GPS (light-speed signals)\n" +
                  "â€¢ Solar power (light energy conversion)\n\n" +
                  "Future Technologies:\n" +
                  "â€¢ Quantum computing (using light)\n" +
                  "â€¢ Li-Fi (light-based internet)\n" +
                  "â€¢ Holography\n" +
                  "â€¢ Advanced medical diagnostics");
        };

        // Load quiz question
        function loadQuizQuestion() {
            const quiz = quizQuestions[appState.quizIndex];
            quizQuestion.textContent = quiz.question;
            
            quizOptions.innerHTML = '';
            quiz.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                optionElement.onclick = () => checkQuizAnswer(optionElement, String.fromCharCode(65 + index));
                quizOptions.appendChild(optionElement);
            });
        }

        // Check quiz answer
        window.checkQuizAnswer = function(element, selectedAnswer) {
            const quiz = quizQuestions[appState.quizIndex];
            const options = quizOptions.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.textContent.startsWith(quiz.answer + ')')) {
                    opt.classList.add('correct');
                }
            });
            
            if (selectedAnswer === quiz.answer) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
            }
        };

        // Next quiz question
        window.nextQuizQuestion = function() {
            appState.quizIndex = (appState.quizIndex + 1) % quizQuestions.length;
            loadQuizQuestion();
        };

        // Topic information display
        window.showTopicInfo = function(topic) {
            let info = '';
            if (topic === 'sound') {
                info = "ðŸ”Š Sound Waves ðŸ”Š\n\n";
                info += "Longitudinal mechanical waves that require a medium to travel.\n\n";
                info += "Key Facts:\n";
                info += "â€¢ Speed in air: ~343 m/s at 20Â°C\n";
                info += "â€¢ Requires medium (solid, liquid, gas)\n";
                info += "â€¢ Can be reflected (echo), refracted, absorbed\n";
                info += "â€¢ Pitch determined by frequency\n";
                info += "â€¢ Loudness determined by amplitude\n\n";
                info += "Examples: Music, speech, thunder, ultrasound";
            } else if (topic === 'light') {
                info = "ðŸ”¦ Light Waves ðŸ”¦\n\n";
                info += "Transverse electromagnetic waves that can travel through vacuum.\n\n";
                info += "Key Facts:\n";
                info += "â€¢ Speed in vacuum: 3 Ã— 10â¸ m/s\n";
                info += "â€¢ Visible spectrum: 400-700 nm wavelength\n";
                info += "â€¢ Can be reflected, refracted, dispersed, absorbed\n";
                info += "â€¢ Color determined by wavelength\n";
                info += "â€¢ Intensity determined by amplitude\n\n";
                info += "Examples: Sunlight, laser, colors, X-rays";
            } else {
                info = "ðŸªž Reflection & Refraction ðŸªž\n\n";
                info += "Behavior of light at boundaries between different media.\n\n";
                info += "Reflection:\n";
                info += "â€¢ Law: Angle of incidence = Angle of reflection\n";
                info += "â€¢ Types: Regular (mirrors), Diffuse (rough surfaces)\n\n";
                info += "Refraction:\n";
                info += "â€¢ Bending of light when changing medium\n";
                info += "â€¢ Governed by Snell's Law: nâ‚sinÎ¸â‚ = nâ‚‚sinÎ¸â‚‚\n";
                info += "â€¢ Total internal reflection occurs beyond critical angle\n\n";
                info += "Applications: Lenses, mirrors, fiber optics, prisms";
            }
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
        
        // Handle window resize
        window.addEventListener('resize', function() {
            initializeCanvases();
            drawWave();
            drawSound();
            drawLight();
            drawReflection();
            drawRefraction();
            drawExperiment();
        });

        // Helper function to draw arrows
        function drawArrow(ctx, fromX, fromY, toX, toY) {
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();
            
            // Draw arrowhead
            const angle = Math.atan2(toY - fromY, toX - fromX);
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - 10 * Math.cos(angle - Math.PI/6), toY - 10 * Math.sin(angle - Math.PI/6));
            ctx.lineTo(toX - 10 * Math.cos(angle + Math.PI/6), toY - 10 * Math.sin(angle + Math.PI/6));
            ctx.closePath();
            ctx.fill();
        }
    </script>
</body>
</html>
