<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 English - Tenses (Simple, Continuous, Perfect) | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Language Arts Theme - Tenses Edition */
        :root {
            --primary-teal: #009688;
            --secondary-amber: #FFC107;
            --accent-deep-purple: #673AB7;
            --accent-pink: #E91E63;
            --accent-blue: #2196F3;
            --accent-green: #4CAF50;
            --accent-orange: #FF9800;
            --accent-red: #F44336;
            --accent-cyan: #00BCD4;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --present-glow: 0 0 20px rgba(0, 150, 136, 0.4);
            --past-glow: 0 0 20px rgba(255, 193, 7, 0.4);
            --future-glow: 0 0 20px rgba(103, 58, 183, 0.4);
            --perfect-glow: 0 0 20px rgba(233, 30, 99, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Tenses Pattern Background */
        .tenses-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 150, 136, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 193, 7, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(103, 58, 183, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 20%, rgba(233, 30, 99, 0.1) 0%, transparent 50%);
            opacity: 0.3;
        }

        .floating-element {
            position: absolute;
            font-size: 3rem;
            font-weight: bold;
            animation: floatElement 25s linear infinite;
        }

        @keyframes floatElement {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-150px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-150px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(150px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--present-glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 150, 136, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-teal);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-teal);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-teal);
            box-shadow: 0 0 0 3px rgba(0, 150, 136, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
        }

        .btn-primary:hover {
            background: #00796B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-amber);
            color: #212121;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }

        .btn-secondary:hover {
            background: #FFA000;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-teal);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-teal), var(--secondary-amber), var(--accent-pink));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 150, 136, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .tense-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-pink);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-teal), var(--accent-pink));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 150, 136, 0.1);
            border-color: var(--primary-teal);
            color: var(--primary-teal);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-amber);
            color: #212121;
        }

        .option.correct .option-letter {
            background: var(--primary-teal);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 150, 136, 0.1);
            border-left: 5px solid var(--primary-teal);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-teal);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-teal);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Tense Display */
        .tense-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-pink);
            text-align: center;
        }

        .display-title {
            color: var(--primary-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        /* Tense Timeline */
        .timeline-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-blue);
        }

        .timeline {
            position: relative;
            height: 80px;
            margin: 30px 0;
            background: linear-gradient(90deg, var(--accent-red), var(--secondary-amber), var(--accent-green));
            border-radius: 8px;
            overflow: hidden;
        }

        .timeline-point {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: var(--dark-bg);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid;
        }

        .timeline-point:hover {
            transform: translateY(-50%) scale(1.2);
        }

        .timeline-point.past {
            left: 10%;
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .timeline-point.present {
            left: 50%;
            transform: translate(-50%, -50%);
            border-color: var(--secondary-amber);
            color: var(--secondary-amber);
        }

        .timeline-point.future {
            right: 10%;
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .timeline-label {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Tense Comparison */
        .comparison-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }

        .comparison-box {
            background: var(--dark-card);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            min-width: 200px;
            transition: transform 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .comparison-box.simple {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        .comparison-box.continuous {
            border-color: var(--accent-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .comparison-box.perfect {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.1);
        }

        .comparison-box:hover {
            transform: scale(1.05);
        }

        .comparison-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .comparison-box.simple .comparison-name {
            color: var(--primary-teal);
        }

        .comparison-box.continuous .comparison-name {
            color: var(--accent-blue);
        }

        .comparison-box.perfect .comparison-name {
            color: var(--accent-pink);
        }

        .comparison-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        /* Verb Forms */
        .verb-forms-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .verb-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .verb-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .verb-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .verb-box:hover {
            transform: translateY(-3px);
        }

        .verb-box.base {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        .verb-box.past {
            border-color: var(--secondary-amber);
            background: rgba(255, 193, 7, 0.1);
        }

        .verb-box.participle {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.1);
        }

        .verb-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .verb-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .verb-box.base .verb-name {
            color: var(--primary-teal);
        }

        .verb-box.past .verb-name {
            color: var(--secondary-amber);
        }

        .verb-box.participle .verb-name {
            color: var(--accent-pink);
        }

        /* Tense Patterns */
        .pattern-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-deep-purple);
        }

        .pattern-methods {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }

        .pattern-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 120px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .pattern-box:hover {
            transform: scale(1.05);
            border-color: var(--accent-deep-purple);
        }

        .pattern-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .pattern-name {
            font-weight: bold;
            color: var(--accent-deep-purple);
            margin-bottom: 5px;
        }

        /* Signal Words */
        .signal-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .signal-types {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .signal-types {
                grid-template-columns: 1fr;
            }
        }

        .signal-box {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .signal-box:hover {
            transform: translateY(-3px);
        }

        .signal-box.past {
            border-color: var(--accent-red);
            background: rgba(244, 67, 54, 0.1);
        }

        .signal-box.present {
            border-color: var(--secondary-amber);
            background: rgba(255, 193, 7, 0.1);
        }

        .signal-box.future {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .signal-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .signal-name {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .signal-box.past .signal-name {
            color: var(--accent-red);
        }

        .signal-box.present .signal-name {
            color: var(--secondary-amber);
        }

        .signal-box.future .signal-name {
            color: var(--accent-green);
        }

        /* Tense Table */
        .tense-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .tense-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-pink);
            border-bottom: 2px solid var(--accent-pink);
        }

        .tense-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .tense-table tr:hover {
            background: rgba(233, 30, 99, 0.05);
        }

        /* Interactive Practice */
        .interactive-practice {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-deep-purple);
        }

        .practice-title {
            color: var(--accent-deep-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-deep-purple);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .practice-button:hover {
            background: rgba(103, 58, 183, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-teal);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .signal-types {
                grid-template-columns: 1fr;
            }
            
            .verb-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Tenses Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes timelineFlow {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }
        
        .timeline-flow {
            animation: timelineFlow 5s linear infinite;
        }
        
        @keyframes tenseGlow {
            0% { background-color: rgba(0, 150, 136, 0.1); }
            33% { background-color: rgba(255, 193, 7, 0.1); }
            66% { background-color: rgba(233, 30, 99, 0.1); }
            100% { background-color: rgba(0, 150, 136, 0.1); }
        }
        
        .tense-glow {
            animation: tenseGlow 5s linear infinite;
        }
        
        @keyframes verbTransform {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .verb-transform {
            animation: verbTransform 1s ease-in-out infinite;
        }
        
        @keyframes timeTravel {
            0% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(100px) rotate(90deg); }
            50% { transform: translateX(0) rotate(180deg); }
            75% { transform: translateX(-100px) rotate(270deg); }
            100% { transform: translateX(0) rotate(360deg); }
        }
        
        .time-travel {
            animation: timeTravel 3s linear infinite;
        }
        
        @keyframes perfectFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .perfect-flash {
            animation: perfectFlash 2s ease-in-out infinite;
        }
        
        @keyframes continuousWave {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .continuous-wave {
            animation: continuousWave 3s linear infinite;
            background: linear-gradient(90deg, transparent, rgba(33, 150, 243, 0.3), transparent);
        }
    </style>
</head>
<body>
    <!-- Tenses Pattern Background -->
    <div class="tenses-bg" id="tensesBg">
        <!-- Elements will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 English</h1>
            <p class="welcome-subtitle">Master time in language! Explore tenses - simple, continuous, and perfect forms. Learn how to express past, present, and future actions accurately. Understand verb forms, time expressions, and when to use each tense. Build your grammar skills to communicate clearly about any time!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">‚è∞üî§‚ú®</span>
                <span class="topic-name">Tenses (Simple, Continuous, Perfect)</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Tense Journey</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Tense fact display -->
                <div id="tenseFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Tense Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const tensesBg = document.getElementById('tensesBg');
            
            // Create floating time and tense symbols
            const elements = ['‚è∞', '‚åõ', 'üìÖ', 'üïê', 'üî§', '‚ú®', 'üåü', 'üí≠', 'üó£Ô∏è', 'üìù', 'üìã', '‚è≥', 'üï∞Ô∏è', 'üìÜ'];
            
            for (let i = 0; i < 25; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = elements[Math.floor(Math.random() * elements.length)];
                element.style.left = `${Math.random() * 100}%`;
                element.style.top = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 20}s`;
                element.style.fontSize = `${2 + Math.random() * 3}rem`;
                
                // Color different time concepts
                if (['‚è∞', '‚åõ', '‚è≥', 'üï∞Ô∏è'].includes(element.textContent)) {
                    element.style.color = 'rgba(0, 150, 136, 0.1)'; // Teal for time
                } else if (['üìÖ', 'üìÜ', 'üïê'].includes(element.textContent)) {
                    element.style.color = 'rgba(255, 193, 7, 0.1)'; // Amber for calendar/time
                } else if (['üî§', 'üìù', 'üìã'].includes(element.textContent)) {
                    element.style.color = 'rgba(103, 58, 183, 0.1)'; // Purple for writing
                } else {
                    element.style.color = 'rgba(233, 30, 99, 0.1)'; // Pink for communication
                }
                
                tensesBg.appendChild(element);
            }
        }

        // Questions array - 120+ Grade 6 Tenses questions
        const questions = [
            // Basic Tense Concepts (1-20)
            {
                type: "basic_concepts",
                question: "What are tenses in English grammar?",
                options: ["Forms of verbs showing time", "Types of nouns", "Sentence structures", "Punctuation marks"],
                answer: "A",
                explanation: "Tenses show when an action happens: past, present, or future."
            },
            {
                type: "basic_concepts",
                question: "How many main tenses are there in English?",
                options: ["Three: Past, Present, Future", "Two: Past and Future", "Four: Past, Present, Future, Perfect", "Five: Past, Present, Future, Simple, Continuous"],
                answer: "A",
                explanation: "The three main tenses are Past, Present, and Future. Each has simple, continuous, perfect, and perfect continuous forms."
            },
            {
                type: "basic_concepts",
                question: "What does the simple present tense describe?",
                options: ["Habitual actions, facts, general truths", "Actions happening right now", "Completed actions in the past", "Future plans"],
                answer: "A",
                explanation: "Simple present: habits (I eat breakfast), facts (Water boils at 100¬∞C), general truths (The sun rises in the east)."
            },
            {
                type: "basic_concepts",
                question: "What does the simple past tense describe?",
                options: ["Completed actions in the past", "Current actions", "Future plans", "General facts"],
                answer: "A",
                explanation: "Simple past: actions completed at specific past times (Yesterday, I walked to school)."
            },
            {
                type: "basic_concepts",
                question: "What does the simple future tense describe?",
                options: ["Actions that will happen", "Current actions", "Past habits", "General truths"],
                answer: "A",
                explanation: "Simple future: actions that haven't happened yet (Tomorrow, I will visit my grandmother)."
            },
            // Simple Tenses (21-40)
            {
                type: "simple_tenses",
                question: "Simple Present: 'She _____ to school every day.'",
                options: ["walks", "walked", "will walk", "is walking"],
                answer: "A",
                explanation: "Simple present for habitual action: 'She walks to school every day.'"
            },
            {
                type: "simple_tenses",
                question: "Simple Past: 'Yesterday, they _____ basketball.'",
                options: ["played", "play", "will play", "are playing"],
                answer: "A",
                explanation: "Simple past for completed action: 'Yesterday, they played basketball.'"
            },
            {
                type: "simple_tenses",
                question: "Simple Future: 'Next week, I _____ my grandparents.'",
                options: ["will visit", "visit", "visited", "am visiting"],
                answer: "A",
                explanation: "Simple future with 'will': 'Next week, I will visit my grandparents.'"
            },
            {
                type: "simple_tenses",
                question: "Which is simple present tense?",
                options: ["The Earth revolves around the sun.", "The Earth revolved around the sun.", "The Earth will revolve around the sun.", "The Earth is revolving around the sun."],
                answer: "A",
                explanation: "Simple present for scientific fact: 'The Earth revolves around the sun.'"
            },
            {
                type: "simple_tenses",
                question: "Simple Past of 'go'?",
                options: ["went", "goed", "gone", "going"],
                answer: "A",
                explanation: "Irregular verb: go ‚Üí went ‚Üí gone (present ‚Üí past ‚Üí past participle)"
            },
            // Continuous/Progressive Tenses (41-60)
            {
                type: "continuous_tenses",
                question: "What do continuous tenses show?",
                options: ["Actions in progress at specific times", "Completed actions", "Habitual actions", "Future plans"],
                answer: "A",
                explanation: "Continuous tenses show ongoing actions at specific times."
            },
            {
                type: "continuous_tenses",
                question: "Present Continuous: 'Right now, I _____ a book.'",
                options: ["am reading", "read", "will read", "was reading"],
                answer: "A",
                explanation: "Present continuous for action happening now: 'I am reading a book.'"
            },
            {
                type: "continuous_tenses",
                question: "Past Continuous: 'Yesterday at 3 PM, they _____ soccer.'",
                options: ["were playing", "played", "will play", "are playing"],
                answer: "A",
                explanation: "Past continuous for action in progress at specific past time: 'They were playing soccer.'"
            },
            {
                type: "continuous_tenses",
                question: "Future Continuous: 'This time tomorrow, I _____ to music.'",
                options: ["will be listening", "listen", "listened", "am listening"],
                answer: "A",
                explanation: "Future continuous for action that will be in progress: 'I will be listening to music.'"
            },
            {
                type: "continuous_tenses",
                question: "Structure of present continuous?",
                options: ["am/is/are + present participle (-ing)", "have/has + past participle", "will + base verb", "was/were + present participle"],
                answer: "A",
                explanation: "Present continuous = am/is/are + verb-ing (I am studying)."
            },
            // Perfect Tenses (61-80)
            {
                type: "perfect_tenses",
                question: "What do perfect tenses show?",
                options: ["Completed actions relevant to another time", "Ongoing actions", "Simple facts", "Future predictions"],
                answer: "A",
                explanation: "Perfect tenses connect actions completed at one time to another time."
            },
            {
                type: "perfect_tenses",
                question: "Present Perfect: 'I _____ my homework.'",
                options: ["have finished", "finish", "finished", "will finish"],
                answer: "A",
                explanation: "Present perfect: action completed with present relevance (I have finished my homework)."
            },
            {
                type: "perfect_tenses",
                question: "Past Perfect: 'She _____ the movie before we arrived.'",
                options: ["had watched", "watched", "has watched", "was watching"],
                answer: "A",
                explanation: "Past perfect: action completed before another past action (She had watched the movie before we arrived)."
            },
            {
                type: "perfect_tenses",
                question: "Future Perfect: 'By next year, I _____ high school.'",
                options: ["will have completed", "complete", "completed", "am completing"],
                answer: "A",
                explanation: "Future perfect: action completed before future time (I will have completed high school)."
            },
            {
                type: "perfect_tenses",
                question: "Structure of present perfect?",
                options: ["have/has + past participle", "am/is/are + present participle", "will + base verb", "was/were + present participle"],
                answer: "A",
                explanation: "Present perfect = have/has + past participle (I have eaten)."
            },
            // Perfect Continuous Tenses (81-100)
            {
                type: "perfect_continuous",
                question: "What do perfect continuous tenses show?",
                options: ["Actions that started in the past and continue", "Simple completed actions", "Future plans", "General facts"],
                answer: "A",
                explanation: "Perfect continuous: actions starting in past and continuing to present/future."
            },
            {
                type: "perfect_continuous",
                question: "Present Perfect Continuous: 'I _____ for two hours.'",
                options: ["have been studying", "study", "studied", "will study"],
                answer: "A",
                explanation: "Present perfect continuous: action started in past, continues now (I have been studying for two hours)."
            },
            {
                type: "perfect_continuous",
                question: "Past Perfect Continuous: 'She _____ for hours when I called.'",
                options: ["had been working", "worked", "has worked", "was working"],
                answer: "A",
                explanation: "Past perfect continuous: action continued up to another past time (She had been working for hours when I called)."
            },
            {
                type: "perfect_continuous",
                question: "Structure of present perfect continuous?",
                options: ["have/has been + present participle", "had been + present participle", "will have been + present participle", "am/is/are + present participle"],
                answer: "A",
                explanation: "Present perfect continuous = have/has been + verb-ing (I have been waiting)."
            },
            // Verb Forms (101-120)
            {
                type: "verb_forms",
                question: "What are the three main verb forms?",
                options: ["Base form, Past form, Past participle", "Present, Past, Future", "Singular, Plural, Collective", "Simple, Continuous, Perfect"],
                answer: "A",
                explanation: "Verb forms: Base (eat), Past (ate), Past participle (eaten)."
            },
            {
                type: "verb_forms",
                question: "Past participle of 'write'?",
                options: ["written", "wrote", "writing", "writed"],
                answer: "A",
                explanation: "write ‚Üí wrote ‚Üí written (present ‚Üí past ‚Üí past participle)"
            },
            {
                type: "verb_forms",
                question: "Which verb is regular?",
                options: ["walk ‚Üí walked ‚Üí walked", "go ‚Üí went ‚Üí gone", "eat ‚Üí ate ‚Üí eaten", "see ‚Üí saw ‚Üí seen"],
                answer: "A",
                explanation: "Regular verbs add -ed for past and past participle: walk ‚Üí walked ‚Üí walked."
            },
            {
                type: "verb_forms",
                question: "Past form of 'bring'?",
                options: ["brought", "bringed", "brang", "bringing"],
                answer: "A",
                explanation: "bring ‚Üí brought ‚Üí brought (irregular verb)"
            },
            // Time Expressions/Signal Words (121-140)
            {
                type: "time_expressions",
                question: "Signal word for simple past?",
                options: ["yesterday", "now", "tomorrow", "since"],
                answer: "A",
                explanation: "Yesterday indicates simple past tense."
            },
            {
                type: "time_expressions",
                question: "Signal word for present perfect?",
                options: ["since", "yesterday", "tomorrow", "now"],
                answer: "A",
                explanation: "Since indicates present perfect tense."
            },
            {
                type: "time_expressions",
                question: "Signal word for future tense?",
                options: ["tomorrow", "yesterday", "now", "already"],
                answer: "A",
                explanation: "Tomorrow indicates future tense."
            },
            {
                type: "time_expressions",
                question: "Signal word for present continuous?",
                options: ["now", "yesterday", "tomorrow", "already"],
                answer: "A",
                explanation: "Now indicates present continuous tense."
            },
            // Common Errors (141-160)
            {
                type: "common_errors",
                question: "Correct the tense: 'Yesterday I am going to school.'",
                options: ["Yesterday I went to school.", "Yesterday I go to school.", "Yesterday I will go to school.", "Yesterday I have gone to school."],
                answer: "A",
                explanation: "Past action needs simple past: 'went' instead of 'am going'."
            },
            {
                type: "common_errors",
                question: "Correct: 'She have finished her homework.'",
                options: ["She has finished her homework.", "She finished her homework.", "She will finish her homework.", "She is finishing her homework."],
                answer: "A",
                explanation: "Third person singular present perfect needs 'has': She has finished."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent tense usage!",
            "Perfect time expression!",
            "Great verb form knowledge!",
            "You're a tense expert!",
            "Perfect timeline understanding!",
            "You're a grammar time traveler!",
            "Outstanding tense skills!",
            "Brilliant verb conjugation!",
            "You think in all tenses!",
            "Tense mastery achieved!"
        ];

        // Tense terms and definitions
        const tenseTerms = [
            {
                term: "Simple Present",
                definition: "Habits, facts, general truths",
                example: "I eat breakfast daily."
            },
            {
                term: "Present Continuous",
                definition: "Actions happening now",
                example: "I am eating breakfast."
            },
            {
                term: "Present Perfect",
                definition: "Completed actions with present relevance",
                example: "I have eaten breakfast."
            },
            {
                term: "Simple Past",
                definition: "Completed actions at specific past time",
                example: "I ate breakfast yesterday."
            },
            {
                term: "Past Continuous",
                definition: "Actions in progress at past time",
                example: "I was eating breakfast at 8 AM."
            },
            {
                term: "Past Perfect",
                definition: "Actions completed before another past action",
                example: "I had eaten breakfast before school."
            }
        ];

        // All 12 tenses
        const allTenses = [
            {
                tense: "Simple Present",
                time: "Present",
                aspect: "Simple",
                structure: "Subject + base verb(s/es)",
                example: "I eat apples.",
                usage: "Habits, facts, general truths",
                icon: "üìù"
            },
            {
                tense: "Present Continuous",
                time: "Present",
                aspect: "Continuous",
                structure: "Subject + am/is/are + verb-ing",
                example: "I am eating an apple.",
                usage: "Actions happening now",
                icon: "üé¨"
            },
            {
                tense: "Present Perfect",
                time: "Present",
                aspect: "Perfect",
                structure: "Subject + have/has + past participle",
                example: "I have eaten an apple.",
                usage: "Completed actions with present relevance",
                icon: "‚úÖ"
            },
            {
                tense: "Present Perfect Continuous",
                time: "Present",
                aspect: "Perfect Continuous",
                structure: "Subject + have/has been + verb-ing",
                example: "I have been eating apples.",
                usage: "Actions starting in past and continuing",
                icon: "‚è≥"
            },
            {
                tense: "Simple Past",
                time: "Past",
                aspect: "Simple",
                structure: "Subject + past verb",
                example: "I ate an apple.",
                usage: "Completed actions at specific past time",
                icon: "üìÖ"
            },
            {
                tense: "Past Continuous",
                time: "Past",
                aspect: "Continuous",
                structure: "Subject + was/were + verb-ing",
                example: "I was eating an apple.",
                usage: "Actions in progress at past time",
                icon: "üéûÔ∏è"
            },
            {
                tense: "Past Perfect",
                time: "Past",
                aspect: "Perfect",
                structure: "Subject + had + past participle",
                example: "I had eaten an apple.",
                usage: "Actions completed before another past action",
                icon: "‚èÆÔ∏è"
            },
            {
                tense: "Past Perfect Continuous",
                time: "Past",
                aspect: "Perfect Continuous",
                structure: "Subject + had been + verb-ing",
                example: "I had been eating apples.",
                usage: "Actions continuing up to past time",
                icon: "‚Ü©Ô∏è"
            },
            {
                tense: "Simple Future",
                time: "Future",
                aspect: "Simple",
                structure: "Subject + will + base verb",
                example: "I will eat an apple.",
                usage: "Future actions, predictions",
                icon: "üîÆ"
            },
            {
                tense: "Future Continuous",
                time: "Future",
                aspect: "Continuous",
                structure: "Subject + will be + verb-ing",
                example: "I will be eating an apple.",
                usage: "Actions in progress at future time",
                icon: "‚è≠Ô∏è"
            },
            {
                tense: "Future Perfect",
                time: "Future",
                aspect: "Perfect",
                structure: "Subject + will have + past participle",
                example: "I will have eaten an apple.",
                usage: "Actions completed before future time",
                icon: "‚è©"
            },
            {
                tense: "Future Perfect Continuous",
                time: "Future",
                aspect: "Perfect Continuous",
                structure: "Subject + will have been + verb-ing",
                example: "I will have been eating apples.",
                usage: "Actions continuing up to future time",
                icon: "‚Ü™Ô∏è"
            }
        ];

        // Verb forms
        const verbForms = [
            {
                verb: "eat",
                base: "eat",
                past: "ate",
                participle: "eaten",
                meaning: "consume food",
                type: "irregular",
                icon: "üçé"
            },
            {
                verb: "go",
                base: "go",
                past: "went",
                participle: "gone",
                meaning: "move/travel",
                type: "irregular",
                icon: "üö∂"
            },
            {
                verb: "write",
                base: "write",
                past: "wrote",
                participle: "written",
                meaning: "create text",
                type: "irregular",
                icon: "‚úçÔ∏è"
            },
            {
                verb: "walk",
                base: "walk",
                past: "walked",
                participle: "walked",
                meaning: "move on foot",
                type: "regular",
                icon: "üö∂‚Äç‚ôÇÔ∏è"
            },
            {
                verb: "study",
                base: "study",
                past: "studied",
                participle: "studied",
                meaning: "learn",
                type: "regular",
                icon: "üìö"
            },
            {
                verb: "play",
                base: "play",
                past: "played",
                participle: "played",
                meaning: "have fun/game",
                type: "regular",
                icon: "üéÆ"
            }
        ];

        // Time expressions/signal words
        const timeExpressions = [
            {
                time: "Past",
                expressions: ["yesterday", "last week", "in 2020", "two days ago", "when I was young"],
                icon: "üìÖ"
            },
            {
                time: "Present",
                expressions: ["now", "currently", "at the moment", "today", "these days"],
                icon: "‚è∞"
            },
            {
                time: "Future",
                expressions: ["tomorrow", "next week", "in 2025", "soon", "later"],
                icon: "üîÆ"
            },
            {
                time: "Perfect Tenses",
                expressions: ["since", "for", "already", "yet", "just", "recently"],
                icon: "‚úÖ"
            },
            {
                time: "Continuous Tenses",
                expressions: ["while", "as", "at 3 PM", "during", "still"],
                icon: "üé¨"
            }
        ];

        // Interesting tense facts
        const tenseFacts = [
            "English has 12 verb tenses but we use about 4-5 most frequently!",
            "The word 'tense' comes from Latin 'tempus' meaning 'time'!",
            "Some languages have only 2 tenses (past and non-past)!",
            "The present perfect tense doesn't exist in some languages!",
            "The future perfect continuous is the rarest tense in English!",
            "'Will' and 'shall' were originally verbs meaning 'want' and 'owe'!",
            "The progressive/continuous form (-ing) developed from Old English!",
            "Present tense can talk about future: 'My flight leaves at 6 PM.'!"
        ];

        // Daily routine examples
        const dailyRoutines = [
            {
                time: "Morning",
                simple: "I wake up at 7 AM.",
                continuous: "I am brushing my teeth now.",
                perfect: "I have finished breakfast.",
                perfectContinuous: "I have been getting ready for 30 minutes."
            },
            {
                time: "School",
                simple: "I study mathematics.",
                continuous: "I am listening to the teacher.",
                perfect: "I have completed my assignment.",
                perfectContinuous: "I have been studying for two hours."
            },
            {
                time: "Evening",
                simple: "I play with friends.",
                continuous: "I am doing homework.",
                perfect: "I have finished my chores.",
                perfectContinuous: "I have been playing since 4 PM."
            },
            {
                time: "Night",
                simple: "I read before bed.",
                continuous: "I am sleeping now.",
                perfect: "I have prepared for tomorrow.",
                perfectContinuous: "I have been reading for an hour."
            }
        ];

        // Tense timeline events
        const timelineEvents = [
            {
                time: "Past",
                events: ["Dinosaurs lived", "Pyramids were built", "Shakespeare wrote plays"],
                color: "#F44336"
            },
            {
                time: "Present",
                events: ["I am learning English", "Technology is advancing", "People use smartphones"],
                color: "#FFC107"
            },
            {
                time: "Future",
                events: ["Robots will help us", "Humans may live on Mars", "Renewable energy will grow"],
                color: "#4CAF50"
            }
        ];

        // Common mistakes and corrections
        const commonMistakes = [
            {
                mistake: "I am go to school every day.",
                correction: "I go to school every day.",
                explanation: "Simple present for habits, not present continuous"
            },
            {
                mistake: "Yesterday I eat pizza.",
                correction: "Yesterday I ate pizza.",
                explanation: "Simple past for completed past actions"
            },
            {
                mistake: "She have a book.",
                correction: "She has a book.",
                explanation: "Third person singular present simple needs 'has'"
            },
            {
                mistake: "I will going to the store.",
                correction: "I will go to the store.",
                explanation: "Simple future uses 'will + base verb'"
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const tenseFact = document.getElementById('tenseFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6EnglishTenses');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6EnglishTenses', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6EnglishTenses_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6EnglishTenses_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a tense expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent tense knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing different tenses!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review simple, continuous, and perfect forms!";
            } else {
                scoreMessage.textContent = "Keep exploring! Tenses help us communicate about time accurately!";
            }
        }

        // Create tense fact display
        function createTenseFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'tense-fact';
            
            factDiv.innerHTML = `<strong>Amazing Tense Fact:</strong> ${tenseFacts[Math.floor(Math.random() * tenseFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "basic_concepts": "‚è∞",
                "simple_tenses": "üìù",
                "continuous_tenses": "üé¨",
                "perfect_tenses": "‚úÖ",
                "perfect_continuous": "‚è≥",
                "verb_forms": "üî§",
                "time_expressions": "üìÖ",
                "common_errors": "‚ö†Ô∏è"
            };
            
            let conceptName = "Basic Concepts";
            let conceptIcon = "‚è∞";
            
            if (question.type.includes("basic_concepts")) {
                conceptName = "Basic Concepts";
                conceptIcon = conceptIcons.basic_concepts;
            } else if (question.type.includes("simple_tenses")) {
                conceptName = "Simple Tenses";
                conceptIcon = conceptIcons.simple_tenses;
            } else if (question.type.includes("continuous_tenses")) {
                conceptName = "Continuous Tenses";
                conceptIcon = conceptIcons.continuous_tenses;
            } else if (question.type.includes("perfect_tenses")) {
                conceptName = "Perfect Tenses";
                conceptIcon = conceptIcons.perfect_tenses;
            } else if (question.type.includes("perfect_continuous")) {
                conceptName = "Perfect Continuous";
                conceptIcon = conceptIcons.perfect_continuous;
            } else if (question.type.includes("verb_forms")) {
                conceptName = "Verb Forms";
                conceptIcon = conceptIcons.verb_forms;
            } else if (question.type.includes("time_expressions")) {
                conceptName = "Time Expressions";
                conceptIcon = conceptIcons.time_expressions;
            } else if (question.type.includes("common_errors")) {
                conceptName = "Common Errors";
                conceptIcon = conceptIcons.common_errors;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("basic_concepts")) {
                label.textContent = "Understanding time in language";
            } else if (question.type.includes("simple_tenses")) {
                label.textContent = "Simple present, past, and future";
            } else if (question.type.includes("continuous_tenses")) {
                label.textContent = "Actions in progress";
            } else if (question.type.includes("perfect_tenses")) {
                label.textContent = "Completed actions with relevance";
            } else if (question.type.includes("perfect_continuous")) {
                label.textContent = "Continuous actions with duration";
            } else if (question.type.includes("verb_forms")) {
                label.textContent = "Base, past, and participle forms";
            } else if (question.type.includes("time_expressions")) {
                label.textContent = "Yesterday, now, tomorrow, since, for";
            } else if (question.type.includes("common_errors")) {
                label.textContent = "Fixing tense mistakes";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create tense visualization
        function createTenseVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const dailyRoutine = dailyRoutines[Math.floor(Math.random() * dailyRoutines.length)];
            const timelineEvent = timelineEvents[Math.floor(Math.random() * timelineEvents.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-pink);">Tenses Explorer: Time in Language</h3>
                
                <div class="timeline-container">
                    <div class="display-title">Time Timeline: Past ‚Üí Present ‚Üí Future</div>
                    
                    <div class="timeline">
                        <div class="continuous-wave" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
                        
                        <div class="timeline-point past" onclick="showTimePeriod('Past')">
                            ‚Üê
                        </div>
                        <div class="timeline-label" style="left: 10%;">Past</div>
                        
                        <div class="timeline-point present" onclick="showTimePeriod('Present')">
                            ‚óè
                        </div>
                        <div class="timeline-label" style="left: 50%;">Present</div>
                        
                        <div class="timeline-point future" onclick="showTimePeriod('Future')">
                            ‚Üí
                        </div>
                        <div class="timeline-label" style="right: 10%;">Future</div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <div style="font-weight: bold; color: var(--accent-blue);">${timelineEvent.time} Events:</div>
                        <div style="color: var(--text-secondary); margin-top: 5px;">
                            ${timelineEvent.events.map(event => `‚Ä¢ ${event}`).join('<br>')}
                        </div>
                    </div>
                </div>
                
                <div class="tense-display">
                    <div style="font-size: 1.5rem; margin-bottom: 15px;">
                        Daily Routine: <span style="color: var(--primary-teal); font-weight: bold;">${dailyRoutine.time}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.1rem; color: var(--primary-teal); margin-bottom: 10px;">Simple</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${dailyRoutine.simple}</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.1rem; color: var(--accent-blue); margin-bottom: 10px;">Continuous</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${dailyRoutine.continuous}</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.1rem; color: var(--accent-pink); margin-bottom: 10px;">Perfect</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${dailyRoutine.perfect}</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.1rem; color: var(--accent-cyan); margin-bottom: 10px;">Perfect Continuous</div>
                            <div style="font-size: 1rem; color: var(--text-secondary);">${dailyRoutine.perfectContinuous}</div>
                        </div>
                    </div>
                </div>
                
                <div class="comparison-container">
                    <div class="comparison-box simple" onclick="showTenseType('Simple')">
                        <div class="comparison-icon">üìù</div>
                        <div class="comparison-name">Simple Tenses</div>
                        <div class="comparison-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                            Facts, habits, completed actions
                        </div>
                    </div>
                    <div class="comparison-box continuous" onclick="showTenseType('Continuous')">
                        <div class="comparison-icon">üé¨</div>
                        <div class="comparison-name">Continuous Tenses</div>
                        <div class="comparison-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                            Actions in progress
                        </div>
                    </div>
                    <div class="comparison-box perfect" onclick="showTenseType('Perfect')">
                        <div class="comparison-icon">‚úÖ</div>
                        <div class="comparison-name">Perfect Tenses</div>
                        <div class="comparison-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                            Completed actions with relevance
                        </div>
                    </div>
                </div>
                
                <div class="verb-forms-container">
                    <div class="display-title">Verb Forms - Building Blocks of Tenses</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Click on verbs to learn their forms
                    </div>
                    
                    <div class="verb-grid">
                        ${verbForms.map((verb, idx) => `
                            <div class="verb-box ${verb.type === 'regular' ? 'base' : 'past'}" onclick="showVerbForms('${verb.verb}')">
                                <div class="verb-icon">${verb.icon}</div>
                                <div class="verb-name">${verb.verb}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                                    ${verb.past} | ${verb.participle}
                                </div>
                                <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 3px;">
                                    ${verb.type}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="signal-container">
                    <div class="display-title">Time Expressions - Signal Words</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Words that tell us which tense to use
                    </div>
                    
                    <div class="signal-types">
                        ${timeExpressions.map((time, idx) => `
                            <div class="signal-box ${time.time.toLowerCase()}" onclick="showSignalWords('${time.time}')">
                                <div class="signal-icon">${time.icon}</div>
                                <div class="signal-name">${time.time}</div>
                                <div style="font-size: 0.9rem; margin: 10px 0;">
                                    ${time.expressions.slice(0, 3).join(', ')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="pattern-container tense-glow">
                    <div class="display-title">12 English Tenses - Complete Overview</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Simple, Continuous, Perfect, Perfect Continuous √ó Past, Present, Future
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0;">
                        ${allTenses.slice(0, 6).map((tense, idx) => `
                            <div class="pattern-box" onclick="showTenseDetails('${tense.tense}')">
                                <div class="pattern-icon">${tense.icon}</div>
                                <div class="pattern-name">${tense.tense.split(' ')[1]}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">${tense.time}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px;">
                        <button class="btn btn-small btn-outline" onclick="showAllTensesTable()">View All 12 Tenses</button>
                    </div>
                </div>
                
                <table class="tense-table">
                    <thead>
                        <tr>
                            <th>Tense</th>
                            <th>Structure</th>
                            <th>Example</th>
                            <th>Usage</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${allTenses.slice(0, 6).map((tense, idx) => `
                            <tr>
                                <td style="font-weight: bold; color: ${tense.time === 'Past' ? 'var(--accent-red)' : tense.time === 'Present' ? 'var(--secondary-amber)' : 'var(--accent-green)'};">${tense.tense}</td>
                                <td>${tense.structure}</td>
                                <td style="font-style: italic;">${tense.example}</td>
                                <td>${tense.usage}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="real-world-example" style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid var(--accent-orange); font-style: italic; color: var(--text-secondary);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Real-World Tense Usage:</div>
                    "Yesterday (past) I studied (simple past) for my test. While I was studying (past continuous), my friend called. I had already finished (past perfect) my homework before dinner. Today (present) I am reviewing (present continuous) my notes. I have learned (present perfect) many new concepts. I will take (simple future) my test tomorrow. By this time tomorrow, I will have completed (future perfect) it. I will be celebrating (future continuous) afterward!"
                    <div style="margin-top: 10px;">
                        <strong>Key concepts:</strong> Simple = facts/habits, Continuous = in progress, Perfect = completed with relevance, Time words = tense clues.
                    </div>
                </div>
                
                <div class="interactive-practice">
                    <div class="practice-title">Interactive Tense Practice</div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="identifyTense()">Identify Tense</div>
                        <div class="practice-button" onclick="fillBlankWithTense()">Fill in the Blank</div>
                        <div class="practice-button" onclick="correctTenseError()">Correct Errors</div>
                        <div class="practice-button" onclick="createSentenceWithTense()">Create Sentences</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice tenses
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-pink);">
                    <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 10px;">Quick Practice:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Identify tense: "She is reading a book."<br>
                        2. Fill blank: "Yesterday I _____ (go) to the park."<br>
                        3. Correct: "I am eat breakfast every day."<br>
                        4. Create future continuous sentence.<br>
                        5. What tense uses "have/has + past participle"?
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--primary-teal);">
                    <div style="color: var(--primary-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Tense Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Simple:</strong> Habits, facts, completed actions<br>
                        <strong>Continuous:</strong> Actions in progress<br>
                        <strong>Perfect:</strong> Completed with relevance to another time<br>
                        <strong>Check:</strong> Time expressions? Ongoing or completed?
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper functions
        function getIconForTense(tenseName) {
            const iconMap = {
                "Simple Present": "üìù",
                "Present Continuous": "üé¨",
                "Present Perfect": "‚úÖ",
                "Present Perfect Continuous": "‚è≥",
                "Simple Past": "üìÖ",
                "Past Continuous": "üéûÔ∏è",
                "Past Perfect": "‚èÆÔ∏è",
                "Past Perfect Continuous": "‚Ü©Ô∏è",
                "Simple Future": "üîÆ",
                "Future Continuous": "‚è≠Ô∏è",
                "Future Perfect": "‚è©",
                "Future Perfect Continuous": "‚Ü™Ô∏è"
            };
            return iconMap[tenseName] || "‚è∞";
        }

        // Global functions for interactive practice
        window.showTimePeriod = function(period) {
            const periodData = timelineEvents.find(t => t.time === period);
            if (!periodData) return;
            
            alert(`${period} Time\n\nKey Characteristics:\n‚Ä¢ Actions ${period.toLowerCase()} actions\n‚Ä¢ Specific time indicators\n‚Ä¢ Different verb forms\n\nExamples:\n${periodData.events.map(e => `‚Ä¢ ${e}`).join('\n')}`);
        };

        window.showTenseType = function(type) {
            const tenses = {
                "Simple": "Used for:\n‚Ä¢ Habits/routines (I eat breakfast)\n‚Ä¢ Facts/truths (Water boils at 100¬∞C)\n‚Ä¢ Completed actions (I finished my work)\n\nStructure: Subject + base verb/past verb/will + base verb",
                "Continuous": "Used for:\n‚Ä¢ Actions in progress (I am eating)\n‚Ä¢ Temporary situations (She is living in Paris)\n‚Ä¢ Changing situations (Technology is improving)\n\nStructure: Subject + am/is/are/was/were/will be + verb-ing",
                "Perfect": "Used for:\n‚Ä¢ Completed actions with present relevance (I have finished)\n‚Ä¢ Actions before another time (She had left when I arrived)\n‚Ä¢ Experiences (I have visited London)\n\nStructure: Subject + have/has/had/will have + past participle"
            };
            
            alert(`${type} Tenses\n\n${tenses[type]}`);
        };

        window.showVerbForms = function(verb) {
            const verbData = verbForms.find(v => v.verb === verb);
            if (!verbData) return;
            
            alert(`${verbData.verb.toUpperCase()} (${verbData.meaning})\n\nForms:\n‚Ä¢ Base: ${verbData.base}\n‚Ä¢ Past: ${verbData.past}\n‚Ä¢ Past Participle: ${verbData.participle}\n\nType: ${verbData.type} verb\n\nExample sentences:\n‚Ä¢ Present: I ${verbData.base} apples.\n‚Ä¢ Past: Yesterday I ${verbData.past} an apple.\n‚Ä¢ Perfect: I have ${verbData.participle} an apple.`);
        };

        window.showSignalWords = function(time) {
            const timeData = timeExpressions.find(t => t.time === time);
            if (!timeData) return;
            
            alert(`${time} Time Expressions\n\nCommon signal words:\n${timeData.expressions.map(exp => `‚Ä¢ ${exp}`).join('\n')}\n\nThese words help identify which tense to use.`);
        };

        window.showTenseDetails = function(tenseName) {
            const tense = allTenses.find(t => t.tense === tenseName);
            if (!tense) return;
            
            alert(`${tense.tense}\n\nStructure: ${tense.structure}\n\nExample: ${tense.example}\n\nUsage: ${tense.usage}\n\nThis tense is used to talk about ${tense.time.toLowerCase()} ${tense.aspect.toLowerCase()} actions.`);
        };

        window.showAllTensesTable = function() {
            let tableHTML = `<div style="text-align: center; margin-bottom: 15px; font-size: 1.2rem; color: var(--primary-teal); font-weight: bold;">All 12 English Tenses</div>`;
            tableHTML += `<table style="width: 100%; border-collapse: collapse; background: var(--dark-card); border-radius: 8px; overflow: hidden;">`;
            tableHTML += `<thead><tr style="background: var(--dark-surface);"><th style="padding: 10px; text-align: left;">Tense</th><th style="padding: 10px; text-align: left;">Structure</th><th style="padding: 10px; text-align: left;">Example</th></tr></thead><tbody>`;
            
            allTenses.forEach(tense => {
                tableHTML += `<tr style="border-bottom: 1px solid var(--dark-border);">`;
                tableHTML += `<td style="padding: 8px; font-weight: bold; color: ${tense.time === 'Past' ? 'var(--accent-red)' : tense.time === 'Present' ? 'var(--secondary-amber)' : 'var(--accent-green)'};">${tense.tense}</td>`;
                tableHTML += `<td style="padding: 8px;">${tense.structure}</td>`;
                tableHTML += `<td style="padding: 8px; font-style: italic;">${tense.example}</td>`;
                tableHTML += `</tr>`;
            });
            
            tableHTML += `</tbody></table>`;
            
            alert(`${tableHTML}`);
        };

        window.identifyTense = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const sentences = [
                {
                    sentence: "I eat breakfast every morning.",
                    tense: "Simple Present",
                    explanation: "Habitual action"
                },
                {
                    sentence: "She is reading a book right now.",
                    tense: "Present Continuous",
                    explanation: "Action happening now"
                },
                {
                    sentence: "They have finished their homework.",
                    tense: "Present Perfect",
                    explanation: "Completed action with present relevance"
                },
                {
                    sentence: "Yesterday, we played soccer.",
                    tense: "Simple Past",
                    explanation: "Completed action at specific past time"
                }
            ];
            
            const currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--primary-teal);">Identify the Tense</div>
                    <div style="font-size: 1.3rem; margin-bottom: 15px; font-style: italic; color: var(--text-primary);">
                        "${currentSentence.sentence}"
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${["Simple Present", "Present Continuous", "Present Perfect", "Simple Past", "Past Continuous", "Simple Future"].map((tense, idx) => `
                            <div class="option" onclick="checkTenseIdentification(this, '${tense}', '${currentSentence.tense}')">
                                <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                <div class="option-text">${tense}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div id="tenseIdentificationResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Hint:</strong> Look at the verb form and time indicators.
                    </div>
                </div>
            `;
            
            window.currentTenseExplanation = currentSentence.explanation;
        };

        window.checkTenseIdentification = function(element, selectedTense, correctTense) {
            const resultDiv = document.getElementById('tenseIdentificationResult');
            if (!resultDiv) return;
            
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            if (selectedTense === correctTense) {
                element.classList.add('correct');
                resultDiv.textContent = `Correct! This is ${correctTense}. ${window.currentTenseExplanation}`;
                resultDiv.style.color = 'var(--primary-teal)';
            } else {
                element.classList.add('incorrect');
                // Find and highlight correct option
                options.forEach(opt => {
                    if (opt.querySelector('.option-text').textContent === correctTense) {
                        opt.classList.add('correct');
                    }
                });
                resultDiv.textContent = `Incorrect. This is ${correctTense}. ${window.currentTenseExplanation}`;
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.fillBlankWithTense = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const blanks = [
                {
                    sentence: "Yesterday, I _____ (go) to the park.",
                    answer: "went",
                    tense: "Simple Past",
                    hint: "Completed action in the past"
                },
                {
                    sentence: "She _____ (read) a book right now.",
                    answer: "is reading",
                    tense: "Present Continuous",
                    hint: "Action happening now"
                },
                {
                    sentence: "They _____ (finish) their homework already.",
                    answer: "have finished",
                    tense: "Present Perfect",
                    hint: "Completed action with present relevance"
                },
                {
                    sentence: "Tomorrow, we _____ (play) soccer.",
                    answer: "will play",
                    tense: "Simple Future",
                    hint: "Future action"
                }
            ];
            
            const currentBlank = blanks[Math.floor(Math.random() * blanks.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-amber);">Fill in the Blank with Correct Tense</div>
                    <div style="font-size: 1.2rem; margin-bottom: 15px; font-style: italic; color: var(--text-primary);">
                        ${currentBlank.sentence}
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <input type="text" id="blankAnswer" placeholder="Type the correct verb form" style="width: 100%; padding: 12px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1.1rem;">
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkBlankAnswer('${currentBlank.answer}', '${currentBlank.tense}')">Check Answer</button>
                        <button class="btn btn-small btn-outline" onclick="showBlankHint('${currentBlank.hint}')">Hint</button>
                        <button class="btn btn-small btn-outline" onclick="showBlankAnswer('${currentBlank.answer}', '${currentBlank.tense}')">Show Answer</button>
                    </div>
                    
                    <div id="blankResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        window.checkBlankAnswer = function(correctAnswer, tense) {
            const answerInput = document.getElementById('blankAnswer');
            const resultDiv = document.getElementById('blankResult');
            
            if (!answerInput || !resultDiv) return;
            
            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswerLower = correctAnswer.toLowerCase();
            
            if (userAnswer === correctAnswerLower) {
                resultDiv.textContent = `Perfect! "${correctAnswer}" is correct. This is ${tense}.`;
                resultDiv.style.color = 'var(--primary-teal)';
            } else {
                resultDiv.textContent = `Try again! Think about ${tense.toLowerCase()} tense.`;
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showBlankHint = function(hint) {
            const resultDiv = document.getElementById('blankResult');
            if (resultDiv) {
                resultDiv.textContent = `Hint: ${hint}`;
                resultDiv.style.color = 'var(--secondary-amber)';
            }
        };

        window.showBlankAnswer = function(answer, tense) {
            const resultDiv = document.getElementById('blankResult');
            if (resultDiv) {
                resultDiv.innerHTML = `Answer: <span style="color: var(--primary-teal); font-weight: bold;">${answer}</span><br>This is ${tense} tense.`;
                resultDiv.style.color = 'var(--text-secondary)';
            }
        };

        window.correctTenseError = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const errors = commonMistakes[Math.floor(Math.random() * commonMistakes.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-red);">Correct the Tense Error</div>
                    <div style="font-size: 1.2rem; margin-bottom: 15px; font-style: italic; color: var(--text-primary);">
                        "${errors.mistake}"
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <input type="text" id="errorCorrection" placeholder="Type the corrected sentence" style="width: 100%; padding: 12px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1.1rem;">
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkErrorCorrection('${errors.correction.replace(/'/g, "\\'")}')">Check Correction</button>
                        <button class="btn btn-small btn-outline" onclick="showErrorExplanation('${errors.explanation.replace(/'/g, "\\'")}')">Explanation</button>
                    </div>
                    
                    <div id="errorResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        window.checkErrorCorrection = function(correctSentence) {
            const correctionInput = document.getElementById('errorCorrection');
            const resultDiv = document.getElementById('errorResult');
            
            if (!correctionInput || !resultDiv) return;
            
            const userCorrection = correctionInput.value.trim();
            const correctLower = correctSentence.toLowerCase();
            const userLower = userCorrection.toLowerCase();
            
            // Allow for minor punctuation differences
            if (userLower === correctLower || 
                userLower === correctLower + '.' ||
                userLower === correctLower.replace('.', '') ||
                Math.abs(userLower.length - correctLower.length) < 3) {
                
                resultDiv.textContent = "Excellent! You corrected the tense error perfectly!";
                resultDiv.style.color = 'var(--primary-teal)';
            } else {
                resultDiv.textContent = "Close! Check the verb form and tense.";
                resultDiv.style.color = 'var(--accent-orange)';
            }
        };

        window.showErrorExplanation = function(explanation) {
            const resultDiv = document.getElementById('errorResult');
            if (resultDiv) {
                resultDiv.textContent = `Explanation: ${explanation}`;
                resultDiv.style.color = 'var(--secondary-amber)';
            }
        };

        window.createSentenceWithTense = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const prompts = [
                {
                    prompt: "Create a sentence in Simple Present tense about your daily routine.",
                    example: "I brush my teeth every morning."
                },
                {
                    prompt: "Create a sentence in Present Continuous tense about what you're doing now.",
                    example: "I am learning about English tenses."
                },
                {
                    prompt: "Create a sentence in Simple Past tense about what you did yesterday.",
                    example: "Yesterday, I played with my friends."
                },
                {
                    prompt: "Create a sentence in Simple Future tense about your plans for tomorrow.",
                    example: "Tomorrow, I will visit my grandparents."
                }
            ];
            
            const currentPrompt = prompts[Math.floor(Math.random() * prompts.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-deep-purple);">Create a Sentence</div>
                    <div style="font-size: 1.2rem; margin-bottom: 15px; font-style: italic;">
                        ${currentPrompt.prompt}
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <textarea id="sentenceCreation" placeholder="Write your sentence here..." style="width: 100%; min-height: 100px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; resize: vertical;"></textarea>
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkCreatedSentence('${currentPrompt.example.replace(/'/g, "\\'")}')">Check Sentence</button>
                        <button class="btn btn-small btn-outline" onclick="showSentenceExample('${currentPrompt.example.replace(/'/g, "\\'")}')">Example</button>
                    </div>
                    
                    <div id="creationResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        window.checkCreatedSentence = function(example) {
            const sentenceInput = document.getElementById('sentenceCreation');
            const resultDiv = document.getElementById('creationResult');
            
            if (!sentenceInput || !resultDiv) return;
            
            const userSentence = sentenceInput.value.trim();
            
            if (userSentence.length < 5) {
                resultDiv.textContent = "Please write a complete sentence.";
                resultDiv.style.color = 'var(--accent-orange)';
            } else if (!userSentence.match(/[.!?]$/)) {
                resultDiv.textContent = "Good sentence! Don't forget ending punctuation!";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else if (!userSentence.match(/^[A-Z]/)) {
                resultDiv.textContent = "Remember to capitalize the first word!";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else {
                resultDiv.textContent = "Great sentence! You're using tenses correctly!";
                resultDiv.style.color = 'var(--primary-teal)';
            }
        };

        window.showSentenceExample = function(example) {
            const resultDiv = document.getElementById('creationResult');
            if (resultDiv) {
                resultDiv.textContent = `Example: ${example}`;
                resultDiv.style.color = 'var(--accent-deep-purple)';
            }
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            tenseFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            tenseFact.appendChild(createTenseFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createTenseVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
