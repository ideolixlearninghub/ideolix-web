<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 Math - Statistics: Data & Averages | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Statistics Theme */
        :root {
            --primary-blue: #2196F3;      /* Data Collection */
            --primary-orange: #FF9800;    /* Grouped Data */
            --primary-green: #4CAF50;     /* Histograms */
            --primary-purple: #9C27B0;    /* Averages */
            --accent-yellow: #FFC107;     /* Mean */
            --accent-red: #F44336;        /* Range */
            --accent-teal: #009688;       /* Mode */
            --accent-pink: #E91E63;       /* Median */
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --data-color: rgba(33, 150, 243, 0.8);
            --histogram-color: rgba(76, 175, 80, 0.8);
            --average-color: rgba(156, 39, 176, 0.8);
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 152, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-orange), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary {
            background: var(--primary-orange);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-secondary:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-accent {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-accent:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-purple {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-purple:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Statistics Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .topics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.grouped-data {
            border-color: var(--primary-orange);
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), transparent);
        }

        .topic-card.histograms {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .topic-card.averages {
            border-color: var(--primary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.grouped-data .topic-title {
            color: var(--primary-orange);
        }

        .topic-card.histograms .topic-title {
            color: var(--primary-green);
        }

        .topic-card.averages .topic-title {
            color: var(--primary-purple);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--primary-orange), var(--primary-green));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
        }

        .stats-fact {
            background: rgba(156, 39, 176, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-purple);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            font-family: 'Courier New', monospace;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: #4CAF50;
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: #4CAF50;
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: #4CAF50;
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
            font-family: 'Courier New', monospace;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Data Explorer */
        .data-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
            position: relative;
        }

        .diagram-title {
            color: var(--accent-teal);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .data-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            padding: 15px;
        }

        /* Grouped Data Explorer */
        .grouped-data-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-orange);
        }

        .frequency-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .frequency-table th {
            background: rgba(255, 152, 0, 0.2);
            color: var(--primary-orange);
            padding: 10px;
            text-align: left;
            font-weight: bold;
        }

        .frequency-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-secondary);
        }

        .frequency-table tr:last-child td {
            border-bottom: none;
        }

        .data-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        /* Histogram Explorer */
        .histogram-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .histogram-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 20px;
        }

        .histogram-bar {
            background: var(--primary-green);
            width: 40px;
            transition: height 0.5s ease;
            position: relative;
            margin: 0 5px;
        }

        .histogram-bar-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .histogram-bar-value {
            position: absolute;
            top: -25px;
            left: 0;
            right: 0;
            text-align: center;
            color: var(--text-primary);
            font-weight: bold;
        }

        /* Averages Explorer */
        .averages-explorer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .averages-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .averages-container {
                grid-template-columns: 1fr;
            }
        }

        .average-card {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-top: 4px solid transparent;
        }

        .average-card:hover {
            transform: translateY(-5px);
        }

        .average-card.mean {
            border-top-color: var(--accent-yellow);
        }

        .average-card.median {
            border-top-color: var(--accent-pink);
        }

        .average-card.mode {
            border-top-color: var(--accent-teal);
        }

        .average-card.range {
            border-top-color: var(--accent-red);
        }

        .average-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .average-card.mean .average-title {
            color: var(--accent-yellow);
        }

        .average-card.median .average-title {
            color: var(--accent-pink);
        }

        .average-card.mode .average-title {
            color: var(--accent-teal);
        }

        .average-card.range .average-title {
            color: var(--accent-red);
        }

        .average-formula {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px;
            border-radius: 5px;
        }

        .average-example {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Data Set Generator */
        .dataset-generator {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .dataset-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .dataset-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            max-height: 150px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }

        /* Statistics Calculator */
        .stats-calculator {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        .calculator-input {
            width: 100%;
            padding: 12px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            margin-bottom: 15px;
        }

        .calculator-results {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--dark-border);
        }

        .result-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .result-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .result-value {
            color: var(--text-primary);
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        /* Practice Problems */
        .practice-problems {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .problem-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .problem-list {
                grid-template-columns: 1fr;
            }
        }

        .problem-item {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .problem-item:hover {
            background: rgba(244, 67, 54, 0.1);
            transform: translateX(5px);
        }

        .problem-number {
            font-weight: bold;
            color: var(--accent-red);
            min-width: 25px;
        }

        .problem-text {
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-orange), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-orange), var(--primary-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes barGrow {
            from { height: 0; }
            to { height: var(--target-height); }
        }

        .bar-growing {
            animation: barGrow 1s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .averages-container {
                grid-template-columns: 1fr;
            }
            
            .problem-list {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        /* Statistics Notation */
        .data-point {
            font-family: 'Courier New', monospace;
            color: var(--primary-blue);
            font-weight: bold;
        }

        .frequency {
            color: var(--primary-orange);
            font-weight: bold;
        }

        .average-value {
            color: var(--primary-purple);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 7 Math: Statistics</h1>
            <p class="welcome-subtitle">Explore the world of data! Learn to organize information, create visual representations, and calculate averages - essential skills for understanding and interpreting data in everyday life.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸ“ŠðŸ“ˆ</span>
                <span class="topic-name">Data Analysis & Averages</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card grouped-data" onclick="showTopicDetails('grouped-data')">
                    <div class="topic-icon">ðŸ“‹</div>
                    <h3 class="topic-title">Grouped Data</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Organizing data into meaningful groups and intervals</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Frequency tables</li>
                            <li>Class intervals</li>
                            <li>Grouped frequency distribution</li>
                            <li>Data organization techniques</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card histograms" onclick="showTopicDetails('histograms')">
                    <div class="topic-icon">ðŸ“Š</div>
                    <h3 class="topic-title">Histograms</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Creating and interpreting graphical representations of data</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Histogram construction</li>
                            <li>Bar charts vs histograms</li>
                            <li>Frequency density</li>
                            <li>Data visualization</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card averages" onclick="showTopicDetails('averages')">
                    <div class="topic-icon">ðŸ§®</div>
                    <h3 class="topic-title">Averages</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Calculating and interpreting measures of central tendency</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Mean, median, mode</li>
                            <li>Range</li>
                            <li>Choosing appropriate averages</li>
                            <li>Real-world applications</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>ðŸ“Š Begin Statistics Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="statsFact"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="optionsContainer" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <div class="data-explorer">
                        <div class="diagram-title">Data Explorer</div>
                        <div class="data-container" id="dataContainer">
                            <div style="color: var(--text-secondary); text-align: center; margin-top: 50px;">
                                <p>Generate data sets and visualize statistics</p>
                                <p>Use controls below to explore</p>
                            </div>
                        </div>
                        <div class="data-controls">
                            <button class="btn btn-small btn-primary" onclick="generateRandomData()">Random Data</button>
                            <button class="btn btn-small btn-secondary" onclick="createGroupedData()">Group Data</button>
                            <button class="btn btn-small btn-accent" onclick="createHistogram()">Create Histogram</button>
                            <button class="btn btn-small btn-purple" onclick="calculateAllAverages()">Calculate Averages</button>
                        </div>
                    </div>
                    
                    <div class="grouped-data-explorer">
                        <div class="diagram-title">Grouped Data Frequency Table</div>
                        <table class="frequency-table" id="frequencyTable">
                            <thead>
                                <tr>
                                    <th>Class Interval</th>
                                    <th>Frequency</th>
                                    <th>Cumulative Frequency</th>
                                </tr>
                            </thead>
                            <tbody id="frequencyTableBody">
                                <!-- Rows will be added by JavaScript -->
                            </tbody>
                        </table>
                        <div class="data-controls">
                            <button class="btn btn-small btn-secondary" onclick="generateTestScores()">Test Scores</button>
                            <button class="btn btn-small btn-secondary" onclick="generateHeights()">Heights (cm)</button>
                            <button class="btn btn-small btn-secondary" onclick="generateAges()">Ages</button>
                            <button class="btn btn-small btn-accent" onclick="calculateClassWidth()">Class Width</button>
                        </div>
                    </div>
                    
                    <div class="histogram-explorer">
                        <div class="diagram-title">Histogram Visualization</div>
                        <div class="histogram-container" id="histogramContainer">
                            <!-- Histogram bars will be added by JavaScript -->
                        </div>
                        <div class="data-controls">
                            <button class="btn btn-small btn-accent" onclick="createEqualWidthHistogram()">Equal Width</button>
                            <button class="btn btn-small btn-accent" onclick="createUnequalWidthHistogram()">Unequal Width</button>
                            <button class="btn btn-small btn-primary" onclick="interpretHistogram()">Interpret</button>
                            <button class="btn btn-small btn-outline" onclick="clearHistogram()">Clear</button>
                        </div>
                    </div>
                    
                    <div class="averages-explorer">
                        <div class="diagram-title">Measures of Central Tendency</div>
                        <div class="averages-container">
                            <div class="average-card mean" onclick="showAverageDetail('mean')">
                                <div class="average-title">Mean</div>
                                <div class="average-formula">Mean = Î£x Ã· n</div>
                                <div class="average-example">Sum of all values divided by number of values</div>
                            </div>
                            <div class="average-card median" onclick="showAverageDetail('median')">
                                <div class="average-title">Median</div>
                                <div class="average-formula">Middle value when ordered</div>
                                <div class="average-example">Central value that divides data into two equal halves</div>
                            </div>
                            <div class="average-card mode" onclick="showAverageDetail('mode')">
                                <div class="average-title">Mode</div>
                                <div class="average-formula">Most frequent value</div>
                                <div class="average-example">Value that appears most often in the data set</div>
                            </div>
                            <div class="average-card range" onclick="showAverageDetail('range')">
                                <div class="average-title">Range</div>
                                <div class="average-formula">Range = Max - Min</div>
                                <div class="average-example">Difference between highest and lowest values</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dataset-generator">
                        <div class="diagram-title">Data Set Generator</div>
                        <div class="dataset-controls">
                            <input type="number" id="dataSize" class="calculator-input" placeholder="Data set size (e.g., 10)" min="5" max="50" value="10" style="width: 150px;">
                            <input type="number" id="minValue" class="calculator-input" placeholder="Min value" min="0" max="100" value="10" style="width: 120px;">
                            <input type="number" id="maxValue" class="calculator-input" placeholder="Max value" min="10" max="200" value="100" style="width: 120px;">
                            <button class="btn btn-small btn-primary" onclick="generateCustomDataset()">Generate</button>
                        </div>
                        <div class="dataset-display" id="datasetDisplay">
                            No data generated yet. Click "Generate" to create a data set.
                        </div>
                        <div class="data-controls">
                            <button class="btn btn-small btn-accent" onclick="sortDataset()">Sort Data</button>
                            <button class="btn btn-small btn-purple" onclick="addToDataset()">Add Value</button>
                            <button class="btn btn-small btn-secondary" onclick="clearDataset()">Clear</button>
                        </div>
                    </div>
                    
                    <div class="stats-calculator">
                        <div class="diagram-title">Statistics Calculator</div>
                        <input type="text" class="calculator-input" id="dataInput" placeholder="Enter numbers separated by commas (e.g., 5, 10, 15, 20)">
                        <div class="data-controls">
                            <button class="btn btn-small btn-primary" onclick="calculateFromInput()">Calculate</button>
                            <button class="btn btn-small btn-outline" onclick="clearCalculator()">Clear</button>
                        </div>
                        <div class="calculator-results" id="calculatorResults">
                            <div class="result-item">
                                <span class="result-label">Data Set:</span>
                                <span class="result-value" id="resultDataset">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Mean:</span>
                                <span class="result-value" id="resultMean">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Median:</span>
                                <span class="result-value" id="resultMedian">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Mode:</span>
                                <span class="result-value" id="resultMode">-</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Range:</span>
                                <span class="result-value" id="resultRange">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="practice-problems">
                        <div class="diagram-title">Statistics Practice Problems</div>
                        <div class="problem-list">
                            <div class="problem-item" onclick="solveProblem(1)">
                                <div class="problem-number">1</div>
                                <div class="problem-text">Find mean: 5, 10, 15, 20, 25</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(2)">
                                <div class="problem-number">2</div>
                                <div class="problem-text">Find median: 12, 8, 15, 10, 7</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(3)">
                                <div class="problem-number">3</div>
                                <div class="problem-text">Find mode: 3, 5, 7, 5, 2, 5, 8</div>
                            </div>
                            <div class="problem-item" onclick="solveProblem(4)">
                                <div class="problem-number">4</div>
                                <div class="problem-text">Find range: 45, 32, 67, 29, 51</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Statistics Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent Learning</div>
                    </div>
                </div>
                
                <div style="margin: 25px 0; padding: 15px; background: rgba(33, 150, 243, 0.1); border-radius: 10px;">
                    <h3 style="color: var(--primary-blue); margin-bottom: 10px;">Statistics Skills Mastered</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem;">
                        You've learned to organize data into groups, create histograms for visualization, 
                        and calculate different types of averages. These skills are essential for data 
                        analysis in many fields!
                    </p>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Study Again</button>
                    <button class="btn btn-accent" id="viewTopics">Other Topics</button>
                    <button class="btn btn-secondary" onclick="showDataAnalysisChallenge()">Data Analysis Challenge</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Statistics
        const questions = [
            {
                question: "What is grouped data?",
                options: ["Data organized into intervals or categories", "Data listed individually", "Data that is always numerical", "Data that cannot be sorted"],
                answer: "A",
                explanation: "Grouped data is organized into intervals or categories to make it easier to analyze."
            },
            {
                question: "What is the mean of a data set?",
                options: ["Sum of all values divided by number of values", "Middle value when sorted", "Most frequent value", "Difference between highest and lowest"],
                answer: "A",
                explanation: "The mean is calculated by adding all values and dividing by the number of values."
            },
            {
                question: "What is a histogram?",
                options: ["A graphical display of data using bars of different heights", "A circle graph showing proportions", "A line graph showing trends", "A table of frequencies"],
                answer: "A",
                explanation: "A histogram uses bars to show the frequency distribution of data, with bars touching each other."
            },
            {
                question: "What is the median of: 5, 8, 12, 15, 20?",
                options: ["12", "10", "8", "15"],
                answer: "A",
                explanation: "The median is the middle value when data is sorted. Sorted: 5, 8, 12, 15, 20. Middle is 12."
            },
            {
                question: "What is the mode of: 3, 5, 7, 5, 2, 5, 8?",
                options: ["5", "3", "7", "2"],
                answer: "A",
                explanation: "The mode is the most frequent value. 5 appears three times, more than any other value."
            },
            {
                question: "What is the range of: 10, 15, 22, 18, 25?",
                options: ["15", "18", "10", "25"],
                answer: "A",
                explanation: "Range = Maximum - Minimum = 25 - 10 = 15."
            },
            {
                question: "In a histogram, what do the bars represent?",
                options: ["Frequency of data in each interval", "Individual data points", "Cumulative frequency", "Percentage of total"],
                answer: "A",
                explanation: "In a histogram, the height of each bar represents the frequency of data in that interval."
            },
            {
                question: "What is a class interval in grouped data?",
                options: ["A range of values grouped together", "A single data value", "The average of a group", "The difference between groups"],
                answer: "A",
                explanation: "A class interval is a range of values that are grouped together in a frequency table."
            },
            {
                question: "What is the mean of: 4, 6, 8, 10, 12?",
                options: ["8", "7", "9", "10"],
                answer: "A",
                explanation: "Mean = (4+6+8+10+12) Ã· 5 = 40 Ã· 5 = 8."
            },
            {
                question: "Which average is most affected by extreme values?",
                options: ["Mean", "Median", "Mode", "Range"],
                answer: "A",
                explanation: "The mean is most affected by extreme values because it uses all values in its calculation."
            },
            {
                question: "What is cumulative frequency?",
                options: ["Running total of frequencies", "Frequency of one interval", "Average frequency", "Difference between frequencies"],
                answer: "A",
                explanation: "Cumulative frequency is the running total of frequencies as you move through the data."
            },
            {
                question: "In a histogram, bars touch each other because:",
                options: ["Data is continuous", "Data is discrete", "It looks better", "Bars are always separate"],
                answer: "A",
                explanation: "In histograms, bars touch because they represent continuous data intervals."
            },
            {
                question: "What is the median of an even number of values?",
                options: ["Average of two middle values", "The higher middle value", "The lower middle value", "The most frequent value"],
                answer: "A",
                explanation: "For an even number of values, the median is the average of the two middle values."
            },
            {
                question: "A data set can have:",
                options: ["More than one mode", "Only one mode", "No mean", "No range"],
                answer: "A",
                explanation: "A data set can be bimodal (two modes) or multimodal (more than two modes)."
            },
            {
                question: "What is frequency in statistics?",
                options: ["How often a value occurs", "The average value", "The middle value", "The spread of values"],
                answer: "A",
                explanation: "Frequency is the number of times a particular value or range of values occurs."
            },
            {
                question: "What does a histogram show that a bar chart doesn't?",
                options: ["Distribution of continuous data", "Comparison of categories", "Trends over time", "Percentages of a whole"],
                answer: "A",
                explanation: "Histograms show distribution of continuous data with bars touching, while bar charts compare discrete categories."
            },
            {
                question: "What is the range of this data: 5, 10, 15, 20?",
                options: ["15", "10", "20", "5"],
                answer: "A",
                explanation: "Range = Maximum - Minimum = 20 - 5 = 15."
            },
            {
                question: "Which is NOT a measure of central tendency?",
                options: ["Range", "Mean", "Median", "Mode"],
                answer: "A",
                explanation: "Range is a measure of spread/dispersion, not central tendency."
            },
            {
                question: "For grouped data, how do you find the modal class?",
                options: ["Class with highest frequency", "Class with lowest frequency", "Middle class", "First class"],
                answer: "A",
                explanation: "The modal class is the class interval with the highest frequency."
            },
            {
                question: "What is statistics?",
                options: ["Science of collecting, analyzing, and interpreting data", "Study of shapes", "Study of numbers only", "Study of probability"],
                answer: "A",
                explanation: "Statistics is the science concerned with developing and studying methods for collecting, analyzing, and interpreting data."
            },
            {
                question: "When is median better than mean?",
                options: ["When data has extreme values", "When data is normally distributed", "When finding most frequent value", "When data is categorical"],
                answer: "A",
                explanation: "Median is less affected by extreme values, so it's better when data has outliers."
            },
            {
                question: "What does a wide range indicate?",
                options: ["Data is spread out", "Data is clustered together", "Data has no variation", "Data is perfectly symmetrical"],
                answer: "A",
                explanation: "A wide range indicates that data values are spread out over a large interval."
            },
            {
                question: "In a frequency table, what does the 'tally' column show?",
                options: ["Count marks for each value", "Running total", "Percentage", "Average"],
                answer: "A",
                explanation: "Tally marks are used to count occurrences of each value or interval."
            },
            {
                question: "What is the mean of: 2, 4, 6, 8, 10?",
                options: ["6", "5", "7", "8"],
                answer: "A",
                explanation: "Mean = (2+4+6+8+10) Ã· 5 = 30 Ã· 5 = 6."
            },
            {
                question: "What is data visualization?",
                options: ["Presenting data in graphical format", "Listing data in tables", "Calculating averages", "Collecting data"],
                answer: "A",
                explanation: "Data visualization uses graphs, charts, and other visual elements to represent data."
            }
        ];

        // Statistics facts
        const statsFacts = [
            "The word 'statistics' comes from the Latin 'statisticum' meaning 'of the state' - originally used for state data.",
            "Florence Nightingale was a pioneer in statistical graphics, creating the 'coxcomb' diagram to show causes of mortality.",
            "The average human has one fallopian tube and one testicle (showing how averages can be misleading!).",
            "The first known statistical graph was created in 1765 by Joseph Priestley showing the lifespans of famous people.",
            "In a normal distribution, about 68% of data falls within one standard deviation of the mean.",
            "The 'law of large numbers' means that as you collect more data, your averages become more accurate.",
            "John Tukey, a statistician, coined the terms 'software', 'bit', and 'exploratory data analysis'.",
            "The histogram was first introduced by Karl Pearson in 1895."
        ];

        // Topic details
        const topicDetails = {
            'grouped-data': {
                title: "Grouped Data",
                info: "Grouped data is organized into intervals or classes to make large data sets more manageable."
            },
            'histograms': {
                title: "Histograms",
                info: "Histograms are graphical representations of data distribution using bars of different heights."
            },
            'averages': {
                title: "Averages",
                info: "Averages are measures of central tendency that represent the typical value in a data set."
            }
        };

        // Averages details
        const averagesDetails = {
            'mean': {
                title: "Mean",
                formula: "Mean = Sum of all values Ã· Number of values",
                example: "Data: 5, 10, 15, 20, 25\nSum = 75, Count = 5\nMean = 75 Ã· 5 = 15"
            },
            'median': {
                title: "Median",
                formula: "Middle value when data is sorted in order",
                example: "Data: 7, 10, 12, 15, 20\nSorted: 7, 10, 12, 15, 20\nMedian = 12 (middle value)\nFor even count: Average of two middle values"
            },
            'mode': {
                title: "Mode",
                formula: "Most frequent value in the data set",
                example: "Data: 3, 5, 7, 5, 2, 5, 8\nFrequency: 3 appears once, 5 appears three times, 7 appears once, 2 appears once, 8 appears once\nMode = 5 (most frequent)"
            },
            'range': {
                title: "Range",
                formula: "Range = Maximum value - Minimum value",
                example: "Data: 45, 32, 67, 29, 51\nMaximum = 67, Minimum = 29\nRange = 67 - 29 = 38"
            }
        };

        // Practice problems with solutions
        const practiceProblems = {
            1: {
                problem: "Find mean: 5, 10, 15, 20, 25",
                solution: "Mean = (5+10+15+20+25) Ã· 5 = 75 Ã· 5 = 15"
            },
            2: {
                problem: "Find median: 12, 8, 15, 10, 7",
                solution: "Sorted: 7, 8, 10, 12, 15\nMedian = 10 (middle value)"
            },
            3: {
                problem: "Find mode: 3, 5, 7, 5, 2, 5, 8",
                solution: "Frequency: 3(1), 5(3), 7(1), 2(1), 8(1)\nMode = 5 (appears 3 times)"
            },
            4: {
                problem: "Find range: 45, 32, 67, 29, 51",
                solution: "Maximum = 67, Minimum = 29\nRange = 67 - 29 = 38"
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentDataset: [],
            currentHistogram: null,
            groupedData: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const statsFact = document.getElementById('statsFact');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const dataContainer = document.getElementById('dataContainer');
        const frequencyTableBody = document.getElementById('frequencyTableBody');
        const histogramContainer = document.getElementById('histogramContainer');
        const datasetDisplay = document.getElementById('datasetDisplay');
        const calculatorResults = document.getElementById('calculatorResults');
        const resultDataset = document.getElementById('resultDataset');
        const resultMean = document.getElementById('resultMean');
        const resultMedian = document.getElementById('resultMedian');
        const resultMode = document.getElementById('resultMode');
        const resultRange = document.getElementById('resultRange');
        const dataInput = document.getElementById('dataInput');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            generateDefaultDataset();
            createSampleHistogram();
            generateSampleFrequencyTable();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other math topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
            
            dataInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') calculateFromInput();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a statistics expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand data analysis well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of statistics!";
            } else {
                scoreMessage.textContent = "Keep practicing! Statistics takes practice - try again!";
            }
        }

        // Create stats fact display
        function createStatsFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'stats-fact';
            factDiv.innerHTML = `<strong>Statistics Fact:</strong> ${statsFacts[Math.floor(Math.random() * statsFacts.length)]}`;
            return factDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            statsFact.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            statsFact.appendChild(createStatsFact());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying statistics!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Interactive functions
        window.showTopicDetails = function(topic) {
            const topicInfo = topicDetails[topic];
            if (!topicInfo) return;
            
            let info = `${topicInfo.title}\n\n`;
            info += `${topicInfo.info}\n\n`;
            
            if (topic === 'grouped-data') {
                info += "Key Concepts:\n";
                info += "â€¢ Class Intervals: Ranges like 0-10, 11-20, etc.\n";
                info += "â€¢ Frequency: How many values in each interval\n";
                info += "â€¢ Cumulative Frequency: Running total of frequencies\n";
                info += "â€¢ Class Width: Size of each interval\n\n";
                info += "Example:\n";
                info += "Heights (cm): 150-155, 156-160, 161-165\n";
                info += "Frequencies: 5, 12, 8";
            } else if (topic === 'histograms') {
                info += "Key Concepts:\n";
                info += "â€¢ Bars represent frequency\n";
                info += "â€¢ Bars touch (continuous data)\n";
                info += "â€¢ X-axis shows intervals\n";
                info += "â€¢ Y-axis shows frequency\n\n";
                info += "Histogram vs Bar Chart:\n";
                info += "â€¢ Histogram: Continuous data, bars touch\n";
                info += "â€¢ Bar Chart: Discrete categories, gaps between bars";
            } else if (topic === 'averages') {
                info += "Three Main Averages:\n";
                info += "1. Mean: Sum Ã· Count\n";
                info += "2. Median: Middle value when sorted\n";
                info += "3. Mode: Most frequent value\n\n";
                info += "When to Use Each:\n";
                info += "â€¢ Mean: No extreme values, normal distribution\n";
                info += "â€¢ Median: Extreme values present\n";
                info += "â€¢ Mode: Categorical data, most common item";
            }
            
            alert(info);
        };

        // Data generation and manipulation
        function generateRandomData() {
            const dataSize = 15;
            const min = 10;
            const max = 100;
            
            appState.currentDataset = [];
            for (let i = 0; i < dataSize; i++) {
                appState.currentDataset.push(Math.floor(Math.random() * (max - min + 1)) + min);
            }
            
            displayDataset();
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Random Data Generated</h4>
                    <p style="color: var(--text-secondary);">Size: ${dataSize} values</p>
                    <p style="color: var(--text-secondary);">Range: ${min} to ${max}</p>
                    <p style="color: var(--text-secondary); margin-top: 10px;">Use other tools to analyze this data.</p>
                </div>
            `;
            
            alert(`Generated ${dataSize} random values between ${min} and ${max}.\n\nUse the calculators and visualizers to analyze this data.`);
        }

        function generateDefaultDataset() {
            // Create a default dataset
            appState.currentDataset = [15, 22, 18, 30, 25, 35, 28, 40, 32, 45, 38, 50, 42, 55, 48];
            displayDataset();
        }

        function displayDataset() {
            datasetDisplay.textContent = appState.currentDataset.join(', ');
        }

        function generateCustomDataset() {
            const size = parseInt(document.getElementById('dataSize').value) || 10;
            const min = parseInt(document.getElementById('minValue').value) || 10;
            const max = parseInt(document.getElementById('maxValue').value) || 100;
            
            if (min >= max) {
                alert("Minimum value must be less than maximum value.");
                return;
            }
            
            appState.currentDataset = [];
            for (let i = 0; i < size; i++) {
                appState.currentDataset.push(Math.floor(Math.random() * (max - min + 1)) + min);
            }
            
            displayDataset();
            alert(`Generated ${size} values between ${min} and ${max}.`);
        }

        function sortDataset() {
            if (appState.currentDataset.length === 0) {
                alert("No data to sort. Generate a dataset first.");
                return;
            }
            
            appState.currentDataset.sort((a, b) => a - b);
            displayDataset();
            alert("Data sorted in ascending order.");
        }

        function addToDataset() {
            const value = prompt("Enter a numerical value to add to the dataset:");
            if (value && !isNaN(value)) {
                appState.currentDataset.push(parseFloat(value));
                displayDataset();
                alert(`Added ${value} to the dataset.`);
            } else if (value !== null) {
                alert("Please enter a valid number.");
            }
        }

        function clearDataset() {
            appState.currentDataset = [];
            displayDataset();
            alert("Dataset cleared.");
        }

        // Grouped data functions
        function createGroupedData() {
            if (appState.currentDataset.length === 0) {
                alert("No data available. Generate a dataset first.");
                return;
            }
            
            // Create grouped data from current dataset
            const sortedData = [...appState.currentDataset].sort((a, b) => a - b);
            const min = Math.min(...sortedData);
            const max = Math.max(...sortedData);
            const range = max - min;
            const numberOfClasses = Math.ceil(Math.sqrt(sortedData.length));
            const classWidth = Math.ceil(range / numberOfClasses);
            
            // Create class intervals
            const intervals = [];
            let start = Math.floor(min / 10) * 10; // Round down to nearest 10
            for (let i = 0; i < numberOfClasses; i++) {
                intervals.push({
                    start: start + (i * classWidth),
                    end: start + ((i + 1) * classWidth) - 1,
                    frequency: 0,
                    cumulative: 0
                });
            }
            
            // Count frequencies
            sortedData.forEach(value => {
                for (let i = 0; i < intervals.length; i++) {
                    if (value >= intervals[i].start && value <= intervals[i].end) {
                        intervals[i].frequency++;
                        break;
                    }
                }
            });
            
            // Calculate cumulative frequencies
            let cumulative = 0;
            intervals.forEach(interval => {
                cumulative += interval.frequency;
                interval.cumulative = cumulative;
            });
            
            appState.groupedData = intervals;
            
            // Display in table
            displayGroupedData(intervals);
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Data Grouped into Intervals</h4>
                    <p style="color: var(--text-secondary);">Data range: ${min} to ${max}</p>
                    <p style="color: var(--text-secondary);">Class width: ${classWidth}</p>
                    <p style="color: var(--text-secondary);">Number of classes: ${numberOfClasses}</p>
                    <p style="color: var(--text-secondary); margin-top: 10px;">See frequency table for details.</p>
                </div>
            `;
        }

        function displayGroupedData(intervals) {
            frequencyTableBody.innerHTML = '';
            
            intervals.forEach(interval => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${interval.start} - ${interval.end}</td>
                    <td>${interval.frequency}</td>
                    <td>${interval.cumulative}</td>
                `;
                frequencyTableBody.appendChild(row);
            });
        }

        function generateTestScores() {
            // Sample test scores data
            const intervals = [
                { start: 0, end: 49, frequency: 3, cumulative: 3 },
                { start: 50, end: 59, frequency: 5, cumulative: 8 },
                { start: 60, end: 69, frequency: 8, cumulative: 16 },
                { start: 70, end: 79, frequency: 12, cumulative: 28 },
                { start: 80, end: 89, frequency: 10, cumulative: 38 },
                { start: 90, end: 100, frequency: 7, cumulative: 45 }
            ];
            
            appState.groupedData = intervals;
            displayGroupedData(intervals);
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Test Scores Distribution</h4>
                    <p style="color: var(--text-secondary);">Total students: 45</p>
                    <p style="color: var(--text-secondary);">Modal class: 70-79 (12 students)</p>
                    <p style="color: var(--text-secondary);">Class width: 10</p>
                </div>
            `;
        }

        function generateHeights() {
            // Sample heights data
            const intervals = [
                { start: 150, end: 154, frequency: 2, cumulative: 2 },
                { start: 155, end: 159, frequency: 5, cumulative: 7 },
                { start: 160, end: 164, frequency: 8, cumulative: 15 },
                { start: 165, end: 169, frequency: 10, cumulative: 25 },
                { start: 170, end: 174, frequency: 7, cumulative: 32 },
                { start: 175, end: 179, frequency: 3, cumulative: 35 }
            ];
            
            appState.groupedData = intervals;
            displayGroupedData(intervals);
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Heights Distribution (cm)</h4>
                    <p style="color: var(--text-secondary);">Total people: 35</p>
                    <p style="color: var(--text-secondary);">Modal class: 165-169 cm (10 people)</p>
                    <p style="color: var(--text-secondary);">Class width: 5</p>
                </div>
            `;
        }

        function generateAges() {
            // Sample ages data
            const intervals = [
                { start: 0, end: 9, frequency: 15, cumulative: 15 },
                { start: 10, end: 19, frequency: 25, cumulative: 40 },
                { start: 20, end: 29, frequency: 30, cumulative: 70 },
                { start: 30, end: 39, frequency: 22, cumulative: 92 },
                { start: 40, end: 49, frequency: 18, cumulative: 110 },
                { start: 50, end: 59, frequency: 12, cumulative: 122 }
            ];
            
            appState.groupedData = intervals;
            displayGroupedData(intervals);
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Age Distribution</h4>
                    <p style="color: var(--text-secondary);">Total people: 122</p>
                    <p style="color: var(--text-secondary);">Modal class: 20-29 years (30 people)</p>
                    <p style="color: var(--text-secondary);">Class width: 10</p>
                </div>
            `;
        }

        function calculateClassWidth() {
            if (!appState.groupedData || appState.groupedData.length === 0) {
                alert("No grouped data available. Create grouped data first.");
                return;
            }
            
            const firstInterval = appState.groupedData[0];
            const classWidth = firstInterval.end - firstInterval.start + 1;
            
            alert(`Class Width = ${classWidth}\n\nCalculated as: (Upper bound - Lower bound + 1)\nFor first interval: ${firstInterval.end} - ${firstInterval.start} + 1 = ${classWidth}`);
        }

        // Histogram functions
        function createSampleHistogram() {
            createEqualWidthHistogram();
        }

        function createHistogram() {
            if (!appState.groupedData || appState.groupedData.length === 0) {
                alert("No grouped data available. Create grouped data first.");
                return;
            }
            
            createHistogramFromData(appState.groupedData);
        }

        function createHistogramFromData(intervals) {
            histogramContainer.innerHTML = '';
            
            const maxFrequency = Math.max(...intervals.map(i => i.frequency));
            const containerHeight = histogramContainer.clientHeight - 40;
            
            intervals.forEach((interval, index) => {
                const barHeight = (interval.frequency / maxFrequency) * (containerHeight - 30);
                
                const bar = document.createElement('div');
                bar.className = 'histogram-bar';
                bar.style.height = `${barHeight}px`;
                bar.style.setProperty('--target-height', `${barHeight}px`);
                bar.classList.add('bar-growing');
                
                const label = document.createElement('div');
                label.className = 'histogram-bar-label';
                label.textContent = `${interval.start}-${interval.end}`;
                bar.appendChild(label);
                
                const value = document.createElement('div');
                value.className = 'histogram-bar-value';
                value.textContent = interval.frequency;
                bar.appendChild(value);
                
                histogramContainer.appendChild(bar);
            });
            
            appState.currentHistogram = intervals;
        }

        function createEqualWidthHistogram() {
            const intervals = [
                { start: 0, end: 10, frequency: 3 },
                { start: 11, end: 20, frequency: 8 },
                { start: 21, end: 30, frequency: 12 },
                { start: 31, end: 40, frequency: 10 },
                { start: 41, end: 50, frequency: 7 }
            ];
            
            createHistogramFromData(intervals);
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Equal Width Histogram</h4>
                    <p style="color: var(--text-secondary);">All class intervals have equal width (10 units)</p>
                    <p style="color: var(--text-secondary);">Modal class: 21-30 (frequency 12)</p>
                    <p style="color: var(--text-secondary);">Total observations: 40</p>
                </div>
            `;
        }

        function createUnequalWidthHistogram() {
            const intervals = [
                { start: 0, end: 5, frequency: 2 },
                { start: 6, end: 15, frequency: 8 },
                { start: 16, end: 25, frequency: 12 },
                { start: 26, end: 40, frequency: 15 },
                { start: 41, end: 60, frequency: 10 }
            ];
            
            createHistogramFromData(intervals);
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Unequal Width Histogram</h4>
                    <p style="color: var(--text-secondary);">Class intervals have different widths</p>
                    <p style="color: var(--text-secondary);">Modal class: 26-40 (frequency 15)</p>
                    <p style="color: var(--text-secondary);">Widest class: 41-60 (width 20)</p>
                </div>
            `;
        }

        function interpretHistogram() {
            if (!appState.currentHistogram || appState.currentHistogram.length === 0) {
                alert("No histogram available. Create a histogram first.");
                return;
            }
            
            const frequencies = appState.currentHistogram.map(i => i.frequency);
            const maxFreq = Math.max(...frequencies);
            const minFreq = Math.min(...frequencies);
            const total = frequencies.reduce((sum, freq) => sum + freq, 0);
            
            const modalIndex = frequencies.indexOf(maxFreq);
            const modalClass = appState.currentHistogram[modalIndex];
            
            let interpretation = `Histogram Interpretation:\n\n`;
            interpretation += `Total observations: ${total}\n`;
            interpretation += `Number of classes: ${appState.currentHistogram.length}\n`;
            interpretation += `Modal class: ${modalClass.start}-${modalClass.end} (frequency: ${modalClass.frequency})\n`;
            interpretation += `Range of frequencies: ${minFreq} to ${maxFreq}\n\n`;
            
            if (maxFreq === modalClass.frequency && frequencies.filter(f => f === maxFreq).length === 1) {
                interpretation += `The distribution has one clear peak at ${modalClass.start}-${modalClass.end}.\n`;
            }
            
            if (frequencies[0] < frequencies[1] && frequencies[frequencies.length-2] > frequencies[frequencies.length-1]) {
                interpretation += `The distribution appears roughly symmetrical.`;
            } else if (frequencies[0] < frequencies[frequencies.length-1]) {
                interpretation += `The distribution is skewed to the right (positively skewed).`;
            } else {
                interpretation += `The distribution is skewed to the left (negatively skewed).`;
            }
            
            alert(interpretation);
        }

        function clearHistogram() {
            histogramContainer.innerHTML = '<div style="color: var(--text-secondary); text-align: center; margin-top: 80px;">Histogram cleared</div>';
            appState.currentHistogram = null;
        }

        // Averages functions
        window.showAverageDetail = function(average) {
            const avgInfo = averagesDetails[average];
            if (!avgInfo) return;
            
            let info = `${avgInfo.title}\n\n`;
            info += `Formula: ${avgInfo.formula}\n\n`;
            info += `Example:\n${avgInfo.example}\n\n`;
            
            if (average === 'mean') {
                info += "Advantages:\n";
                info += "â€¢ Uses all data values\n";
                info += "â€¢ Good for further calculations\n";
                info += "â€¢ Most commonly used\n\n";
                info += "Disadvantages:\n";
                info += "â€¢ Affected by extreme values";
            } else if (average === 'median') {
                info += "Advantages:\n";
                info += "â€¢ Not affected by extreme values\n";
                info += "â€¢ Good for skewed distributions\n";
                info += "â€¢ Easy to understand\n\n";
                info += "Disadvantages:\n";
                info += "â€¢ Doesn't use all data values";
            } else if (average === 'mode') {
                info += "Advantages:\n";
                info += "â€¢ Not affected by extreme values\n";
                info += "â€¢ Useful for categorical data\n";
                info += "â€¢ Easy to find for grouped data\n\n";
                info += "Disadvantages:\n";
                info += "â€¢ May not exist or be multiple";
            } else if (average === 'range') {
                info += "Purpose:\n";
                info += "â€¢ Measures spread of data\n";
                info += "â€¢ Simple to calculate\n";
                info += "â€¢ Shows variability\n\n";
                info += "Limitations:\n";
                info += "â€¢ Affected by extreme values\n";
                info += "â€¢ Doesn't show distribution shape";
            }
            
            alert(info);
        };

        function calculateAllAverages() {
            if (appState.currentDataset.length === 0) {
                alert("No data available. Generate a dataset first.");
                return;
            }
            
            const sortedData = [...appState.currentDataset].sort((a, b) => a - b);
            const sum = sortedData.reduce((total, value) => total + value, 0);
            const mean = sum / sortedData.length;
            
            let median;
            if (sortedData.length % 2 === 0) {
                const mid1 = sortedData[sortedData.length / 2 - 1];
                const mid2 = sortedData[sortedData.length / 2];
                median = (mid1 + mid2) / 2;
            } else {
                median = sortedData[Math.floor(sortedData.length / 2)];
            }
            
            // Calculate mode
            const frequency = {};
            sortedData.forEach(value => {
                frequency[value] = (frequency[value] || 0) + 1;
            });
            
            let maxFreq = 0;
            let modes = [];
            for (const [value, freq] of Object.entries(frequency)) {
                if (freq > maxFreq) {
                    maxFreq = freq;
                    modes = [parseFloat(value)];
                } else if (freq === maxFreq) {
                    modes.push(parseFloat(value));
                }
            }
            
            const mode = modes.length === 1 ? modes[0] : modes.length === sortedData.length ? "No mode (all unique)" : modes.join(", ");
            const range = Math.max(...sortedData) - Math.min(...sortedData);
            
            let result = `Data Analysis Results:\n\n`;
            result += `Data set (sorted): ${sortedData.join(', ')}\n\n`;
            result += `Mean = ${sum} Ã· ${sortedData.length} = ${mean.toFixed(2)}\n`;
            result += `Median = ${median}\n`;
            result += `Mode = ${mode}\n`;
            result += `Range = ${Math.max(...sortedData)} - ${Math.min(...sortedData)} = ${range}\n\n`;
            result += `Data size: ${sortedData.length} values`;
            
            alert(result);
            
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Averages Calculated</h4>
                    <p style="color: var(--text-secondary);">Mean: ${mean.toFixed(2)}</p>
                    <p style="color: var(--text-secondary);">Median: ${median}</p>
                    <p style="color: var(--text-secondary);">Mode: ${mode}</p>
                    <p style="color: var(--text-secondary);">Range: ${range}</p>
                </div>
            `;
        }

        // Calculator functions
        function calculateFromInput() {
            const input = dataInput.value.trim();
            if (!input) {
                alert("Please enter some numbers separated by commas.");
                return;
            }
            
            const numbers = input.split(',').map(num => parseFloat(num.trim())).filter(num => !isNaN(num));
            
            if (numbers.length === 0) {
                alert("Please enter valid numbers.");
                return;
            }
            
            const sorted = [...numbers].sort((a, b) => a - b);
            const sum = sorted.reduce((total, value) => total + value, 0);
            const mean = sum / sorted.length;
            
            let median;
            if (sorted.length % 2 === 0) {
                const mid1 = sorted[sorted.length / 2 - 1];
                const mid2 = sorted[sorted.length / 2];
                median = (mid1 + mid2) / 2;
            } else {
                median = sorted[Math.floor(sorted.length / 2)];
            }
            
            // Calculate mode
            const frequency = {};
            sorted.forEach(value => {
                frequency[value] = (frequency[value] || 0) + 1;
            });
            
            let maxFreq = 0;
            let modes = [];
            for (const [value, freq] of Object.entries(frequency)) {
                if (freq > maxFreq) {
                    maxFreq = freq;
                    modes = [parseFloat(value)];
                } else if (freq === maxFreq) {
                    modes.push(parseFloat(value));
                }
            }
            
            const mode = modes.length === 1 ? modes[0] : modes.length === sorted.length ? "No mode" : modes.join(", ");
            const range = Math.max(...sorted) - Math.min(...sorted);
            
            // Display results
            resultDataset.textContent = sorted.join(', ');
            resultMean.textContent = mean.toFixed(2);
            resultMedian.textContent = median;
            resultMode.textContent = mode;
            resultRange.textContent = range;
            
            // Update data container
            dataContainer.innerHTML = `
                <div style="color: var(--text-primary); padding: 10px;">
                    <h4 style="color: var(--accent-teal); margin-bottom: 10px;">Calculator Results</h4>
                    <p style="color: var(--text-secondary);">Input processed: ${numbers.length} values</p>
                    <p style="color: var(--text-secondary);">Mean: ${mean.toFixed(2)}</p>
                    <p style="color: var(--text-secondary);">Median: ${median}</p>
                    <p style="color: var(--text-secondary);">Mode: ${mode}</p>
                    <p style="color: var(--text-secondary);">Range: ${range}</p>
                </div>
            `;
        }

        function clearCalculator() {
            dataInput.value = '';
            resultDataset.textContent = '-';
            resultMean.textContent = '-';
            resultMedian.textContent = '-';
            resultMode.textContent = '-';
            resultRange.textContent = '-';
        }

        // Practice problems
        window.solveProblem = function(problemNum) {
            const problem = practiceProblems[problemNum];
            if (!problem) return;
            
            const answer = prompt(`Solve: ${problem.problem}\n\nEnter your answer:`);
            if (answer) {
                let correct = false;
                
                if (problemNum === 1 && (answer.includes("15") || answer === "15")) {
                    correct = true;
                } else if (problemNum === 2 && (answer.includes("10") || answer === "10")) {
                    correct = true;
                } else if (problemNum === 3 && (answer.includes("5") || answer === "5")) {
                    correct = true;
                } else if (problemNum === 4 && (answer.includes("38") || answer === "38")) {
                    correct = true;
                }
                
                if (correct) {
                    alert(`âœ… Correct!\n\n${problem.solution}`);
                } else {
                    alert(`âŒ Not quite right.\n\nCorrect solution:\n${problem.solution}`);
                }
            }
        };

        // Data analysis challenge
        window.showDataAnalysisChallenge = function() {
            const challenges = [
                "Challenge 1: A class has test scores: 65, 72, 78, 85, 92, 65, 78. Find mean, median, mode, and range.",
                "Challenge 2: Create a frequency table for: 12, 15, 18, 12, 20, 15, 12, 18, 20, 15 with intervals 11-13, 14-16, 17-20.",
                "Challenge 3: If mean of 5 numbers is 20, and four numbers are 15, 20, 25, 30, find the fifth number.",
                "Challenge 4: In a histogram, the bar for interval 21-30 has height representing 12 students. If total students are 60, what percentage is in this interval?"
            ];
            
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            let info = "ðŸ“Š Data Analysis Challenge ðŸ“Š\n\n";
            info += randomChallenge + "\n\n";
            info += "Use your statistics knowledge to solve it!\n\n";
            info += "Solutions:\n";
            info += "1. Mean=76.4, Median=78, Mode=65 & 78, Range=27\n";
            info += "2. 11-13:3, 14-16:3, 17-20:4\n";
            info += "3. Fifth number = 10 (sum must be 100 for mean 20)\n";
            info += "4. Percentage = (12/60)Ã—100 = 20%";
            
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
