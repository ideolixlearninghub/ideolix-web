<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 Science - Nutrition & Diet | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Nutrition Theme */
        :root {
            --primary-blue: #2962FF;
            --secondary-teal: #00BFA5;
            --accent-amber: #FFAB00;
            --accent-purple: #AA00FF;
            --accent-pink: #FF4081;
            --accent-green: #00C853;
            --accent-orange: #FF6D00;
            --accent-cyan: #00B8D4;
            --dark-bg: #0D1B2A;
            --dark-surface: #1B2B3A;
            --dark-card: #253447;
            --dark-border: #3A4A5A;
            --text-primary: #FFFFFF;
            --text-secondary: #B8D0E0;
            --text-muted: #7A94A8;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(41, 98, 255, 0.3);
            --nutrient-glow: 0 0 15px rgba(0, 191, 165, 0.4);
            --diet-glow: 0 0 15px rgba(255, 171, 0, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Nutrition Pattern Background */
        .nutrition-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(41, 98, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 191, 165, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 171, 0, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0D1B2A, #1B2B3A);
            opacity: 0.8;
        }

        .floating-text {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 1.5rem;
            font-weight: normal;
            animation: floatText 30s linear infinite;
            max-width: 200px;
            text-align: center;
            line-height: 1.3;
        }

        @keyframes floatText {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(5deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(-5deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(5deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 27, 42, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(41, 98, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(41, 98, 255, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.4);
        }

        .btn-primary:hover {
            background: #1A56DB;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(41, 98, 255, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 191, 165, 0.4);
        }

        .btn-secondary:hover {
            background: #009688;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 191, 165, 0.5);
        }

        .btn-amber {
            background: var(--accent-amber);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 171, 0, 0.4);
        }

        .btn-amber:hover {
            background: #FF9800;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 171, 0, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(41, 98, 255, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-purple);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(41, 98, 255, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-pink);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 200, 83, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-left: 5px solid var(--accent-pink);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-pink);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-pink);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Nutrition Display */
        .nutrition-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        /* Nutrition Skills Grid */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .skills-grid {
                grid-template-columns: 1fr;
            }
        }

        .skill-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .skill-card:hover {
            transform: translateY(-5px);
        }

        .skill-card.nutrients {
            border-color: var(--secondary-teal);
        }

        .skill-card.diet {
            border-color: var(--accent-amber);
        }

        .skill-card.digestion {
            border-color: var(--accent-purple);
        }

        .skill-card.health {
            border-color: var(--accent-pink);
        }

        .skill-card.food-groups {
            border-color: var(--accent-green);
        }

        .skill-card.deficiency {
            border-color: var(--accent-orange);
        }

        .skill-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .nutrients .skill-icon {
            color: var(--secondary-teal);
        }

        .diet .skill-icon {
            color: var(--accent-amber);
        }

        .digestion .skill-icon {
            color: var(--accent-purple);
        }

        .health .skill-icon {
            color: var(--accent-pink);
        }

        .food-groups .skill-icon {
            color: var(--accent-green);
        }

        .deficiency .skill-icon {
            color: var(--accent-orange);
        }

        .skill-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .nutrients .skill-title {
            color: var(--secondary-teal);
        }

        .diet .skill-title {
            color: var(--accent-amber);
        }

        .digestion .skill-title {
            color: var(--accent-purple);
        }

        .health .skill-title {
            color: var(--accent-pink);
        }

        .food-groups .skill-title {
            color: var(--accent-green);
        }

        .deficiency .skill-title {
            color: var(--accent-orange);
        }

        .skill-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        /* Nutrition Table */
        .nutrition-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .nutrition-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-purple);
            border-bottom: 2px solid var(--accent-purple);
        }

        .nutrition-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Nutrition Pattern Background -->
    <div class="nutrition-bg" id="nutritionBg"></div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 7 Science - Nutrition & Diet</h1>
            <p class="welcome-subtitle">Learn about essential nutrients, balanced diet, digestion, and health. Understand how proper nutrition supports growth, development, and overall well-being.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ü•ó üçé ü•¶ üí™ üß†</span>
                <span class="topic-name">Essential Nutrients & Healthy Eating</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Nutrition Learning</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 50</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 2%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Science fact display -->
                <div id="scienceFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Nutrition Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Practice Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other Science Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const nutritionBg = document.getElementById('nutritionBg');
            
            // Create floating text snippets
            const textSnippets = [
                "Nutrients",
                "Protein",
                "Carbohydrates",
                "Vitamins",
                "Minerals",
                "Diet",
                "Health",
                "Digestion",
                "Energy",
                "Growth"
            ];
            
            for (let i = 0; i < 15; i++) {
                const text = document.createElement('div');
                text.className = 'floating-text';
                text.textContent = textSnippets[Math.floor(Math.random() * textSnippets.length)];
                text.style.left = `${Math.random() * 100}%`;
                text.style.top = `${Math.random() * 100}%`;
                text.style.animationDelay = `${Math.random() * 5}s`;
                text.style.fontSize = `${1 + Math.random() * 1.5}rem`;
                
                // Color based on text content
                const colors = [
                    'rgba(0, 191, 165, 0.1)',    // Teal
                    'rgba(255, 171, 0, 0.1)',    // Amber
                    'rgba(170, 0, 255, 0.1)',    // Purple
                    'rgba(255, 64, 129, 0.1)',   // Pink
                    'rgba(0, 200, 83, 0.1)',     // Green
                    'rgba(41, 98, 255, 0.1)'     // Blue
                ];
                text.style.color = colors[Math.floor(Math.random() * colors.length)];
                
                nutritionBg.appendChild(text);
            }
        }

        // 50 Nutrition & Diet Questions
        const questions = [
            // Basics (1-5)
            {
                type: "basics",
                question: "What is nutrition?",
                options: ["The process of obtaining food for growth and health", "Only eating healthy food", "Counting calories", "Food preparation"],
                answer: "A",
                explanation: "Nutrition is the science of how organisms obtain and use food for growth, maintenance, and health."
            },
            {
                type: "basics",
                question: "What are nutrients?",
                options: ["Substances in food needed for growth and health", "Only vitamins and minerals", "Food additives", "Medicines in food"],
                answer: "A",
                explanation: "Nutrients are chemical substances in food that the body needs for growth, energy, and maintaining health."
            },
            // Macronutrients (6-15)
            {
                type: "macronutrients",
                question: "Which nutrient provides the most energy?",
                options: ["Carbohydrates", "Proteins", "Vitamins", "Water"],
                answer: "A",
                explanation: "Carbohydrates are the body's main source of energy, providing 4 calories per gram."
            },
            {
                type: "macronutrients",
                question: "What is the main function of proteins?",
                options: ["Growth and repair of body tissues", "Energy production", "Protection from diseases", "Digestion aid"],
                answer: "A",
                explanation: "Proteins are essential for growth, repair, and maintenance of body tissues."
            },
            {
                type: "macronutrients",
                question: "What do fats provide?",
                options: ["Energy storage and insulation", "Only energy", "Only insulation", "Only flavor"],
                answer: "A",
                explanation: "Fats provide concentrated energy, insulation, protection of organs, and help absorb fat-soluble vitamins."
            },
            // Micronutrients (16-25)
            {
                type: "micronutrients",
                question: "What are vitamins?",
                options: ["Organic compounds needed in small amounts", "Energy-giving nutrients", "Body building nutrients", "Only from fruits"],
                answer: "A",
                explanation: "Vitamins are organic compounds required in small amounts for various body functions."
            },
            {
                type: "micronutrients",
                question: "What are minerals?",
                options: ["Inorganic elements needed for body functions", "Organic compounds", "Energy sources", "Only from water"],
                answer: "A",
                explanation: "Minerals are inorganic elements like calcium and iron that the body needs for various functions."
            },
            {
                type: "micronutrients",
                question: "Which vitamin helps with vision?",
                options: ["Vitamin A", "Vitamin C", "Vitamin D", "Vitamin B"],
                answer: "A",
                explanation: "Vitamin A is essential for good vision, especially night vision."
            },
            // Balanced Diet (26-35)
            {
                type: "diet",
                question: "What is a balanced diet?",
                options: ["A diet containing all nutrients in right proportions", "Eating only vegetables", "Avoiding all fats", "Eating at fixed times"],
                answer: "A",
                explanation: "A balanced diet includes all essential nutrients in the right proportions for health."
            },
            {
                type: "diet",
                question: "Why is a balanced diet important?",
                options: ["For proper growth and health", "Only for weight loss", "Only for athletes", "To save money"],
                answer: "A",
                explanation: "A balanced diet provides all nutrients needed for growth, development, and maintaining health."
            },
            // Food Groups (36-45)
            {
                type: "food_groups",
                question: "Which food group provides carbohydrates?",
                options: ["Cereals and grains", "Meat and fish", "Dairy products", "Fruits"],
                answer: "A",
                explanation: "Cereals, grains, and starchy vegetables are rich sources of carbohydrates."
            },
            {
                type: "food_groups",
                question: "Which food is a protein source?",
                options: ["Eggs", "Bread", "Apple", "Butter"],
                answer: "A",
                explanation: "Eggs, meat, fish, pulses, and dairy products are good protein sources."
            },
            // Digestion (46-50)
            {
                type: "digestion",
                question: "What is digestion?",
                options: ["Breaking down food into absorbable form", "Eating food", "Cooking food", "Storing food"],
                answer: "A",
                explanation: "Digestion is the process of breaking down food into simpler forms that can be absorbed."
            },
            {
                type: "digestion",
                question: "Where does digestion begin?",
                options: ["Mouth", "Stomach", "Small intestine", "Esophagus"],
                answer: "A",
                explanation: "Digestion begins in the mouth with chewing and saliva mixing with food."
            },
            // Health & Diseases (51-55)
            {
                type: "health",
                question: "What is malnutrition?",
                options: ["Poor nutrition from inadequate diet", "Eating too much", "Only undernutrition", "Food allergies"],
                answer: "A",
                explanation: "Malnutrition results from inadequate or excessive intake of nutrients."
            },
            {
                type: "health",
                question: "What causes obesity?",
                options: ["Excess energy intake over expenditure", "Only genetic factors", "Only lack of exercise", "Drinking water"],
                answer: "A",
                explanation: "Obesity occurs when energy intake exceeds energy expenditure over time."
            },
            // Water & Fiber (56-60)
            {
                type: "water_fiber",
                question: "Why is water important?",
                options: ["For all body functions and temperature regulation", "Only for digestion", "Only for athletes", "To wash food down"],
                answer: "A",
                explanation: "Water is essential for all body functions, temperature regulation, and waste removal."
            },
            {
                type: "water_fiber",
                question: "What is dietary fiber?",
                options: ["Indigestible plant material that aids digestion", "A type of vitamin", "A mineral", "A protein"],
                answer: "A",
                explanation: "Dietary fiber is indigestible plant material that helps bowel movement and digestion."
            },
            // Additional questions to reach 50
            {
                type: "macronutrients",
                question: "Which nutrient builds muscles?",
                options: ["Proteins", "Carbohydrates", "Fats", "Vitamins"],
                answer: "A",
                explanation: "Proteins are the building blocks for muscles and tissues."
            },
            {
                type: "micronutrients",
                question: "Which mineral is needed for strong bones?",
                options: ["Calcium", "Iron", "Sodium", "Potassium"],
                answer: "A",
                explanation: "Calcium is essential for strong bones and teeth."
            },
            {
                type: "micronutrients",
                question: "Which vitamin prevents scurvy?",
                options: ["Vitamin C", "Vitamin A", "Vitamin D", "Vitamin B"],
                answer: "A",
                explanation: "Vitamin C deficiency causes scurvy."
            },
            {
                type: "diet",
                question: "What should a healthy diet include?",
                options: ["Variety of foods from all groups", "Only fruits", "Only proteins", "No carbohydrates"],
                answer: "A",
                explanation: "A healthy diet includes a variety of foods from all food groups."
            },
            {
                type: "food_groups",
                question: "Which food group provides calcium?",
                options: ["Dairy products", "Meat", "Grains", "Fruits"],
                answer: "A",
                explanation: "Dairy products like milk and cheese are rich in calcium."
            },
            {
                type: "digestion",
                question: "What does the stomach do in digestion?",
                options: ["Breaks down proteins with acid", "Absorbs nutrients", "Produces bile", "Makes insulin"],
                answer: "A",
                explanation: "The stomach uses acid and enzymes to break down proteins."
            },
            {
                type: "health",
                question: "What is anemia caused by?",
                options: ["Iron deficiency", "Calcium deficiency", "Vitamin C excess", "Too much protein"],
                answer: "A",
                explanation: "Anemia is often caused by iron deficiency affecting red blood cells."
            },
            {
                type: "water_fiber",
                question: "How much water should you drink daily?",
                options: ["6-8 glasses", "1-2 glasses", "Only when thirsty", "10+ glasses"],
                answer: "A",
                explanation: "6-8 glasses of water daily is generally recommended for proper hydration."
            }
        ];

        // Nutrition topics
        const nutritionTopics = [
            {
                name: "Essential Nutrients",
                description: "Basic nutrients needed for health",
                icon: "ü•ó",
                color: "#00BFA5"
            },
            {
                name: "Balanced Diet",
                description: "Proper food proportions for health",
                icon: "‚öñÔ∏è",
                color: "#FFAB00"
            },
            {
                name: "Food Groups",
                description: "Categories of foods by nutrient content",
                icon: "üìä",
                color: "#AA00FF"
            },
            {
                name: "Digestion",
                description: "Process of breaking down food",
                icon: "üîÑ",
                color: "#FF4081"
            },
            {
                name: "Health & Diseases",
                description: "Nutrition-related health issues",
                icon: "üí™",
                color: "#00C853"
            },
            {
                name: "Water & Fiber",
                description: "Importance of hydration and roughage",
                icon: "üíß",
                color: "#00B8D4"
            }
        ];

        // Science facts
        const scienceFacts = [
            "The human body is 60% water!",
            "Vitamin C is destroyed by heat during cooking!",
            "Calcium is the most abundant mineral in your body!",
            "Fiber helps prevent constipation!",
            "Proteins are made of amino acids!",
            "Carbohydrates provide quick energy!",
            "Iron carries oxygen in your blood!",
            "Vitamin D can be made by your skin in sunlight!"
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent nutrition knowledge!",
            "Perfect understanding of nutrients!",
            "Great diet analysis skills!",
            "Amazing! You're a nutrition champion!",
            "Perfect grasp of food groups!",
            "You're a future nutritionist in the making!",
            "Outstanding health awareness!",
            "Brilliant digestion understanding!",
            "You think like a health scientist!",
            "Nutrition mastery achieved!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceFact = document.getElementById('scienceFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade7Nutrition');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade7Nutrition', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade7Nutrition_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a nutrition expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent nutrition knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning about nutrition!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review nutrition concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Nutrition knowledge is essential for lifelong health!";
            }
        }

        // Create science fact display
        function createScienceFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'science-fact';
            
            factDiv.innerHTML = `<strong>Science Fact:</strong> ${scienceFacts[Math.floor(Math.random() * scienceFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "basics": "üìö",
                "macronutrients": "‚ö°",
                "micronutrients": "üíä",
                "diet": "‚öñÔ∏è",
                "food_groups": "üìä",
                "digestion": "üîÑ",
                "health": "üí™",
                "water_fiber": "üíß"
            };
            
            let conceptName = "Basics";
            let conceptIcon = "üìö";
            
            if (question.type.includes("basics")) {
                conceptName = "Nutrition Basics";
                conceptIcon = conceptIcons.basics;
            } else if (question.type.includes("macronutrients")) {
                conceptName = "Macronutrients";
                conceptIcon = conceptIcons.macronutrients;
            } else if (question.type.includes("micronutrients")) {
                conceptName = "Micronutrients";
                conceptIcon = conceptIcons.micronutrients;
            } else if (question.type.includes("diet")) {
                conceptName = "Balanced Diet";
                conceptIcon = conceptIcons.diet;
            } else if (question.type.includes("food_groups")) {
                conceptName = "Food Groups";
                conceptIcon = conceptIcons.food_groups;
            } else if (question.type.includes("digestion")) {
                conceptName = "Digestion";
                conceptIcon = conceptIcons.digestion;
            } else if (question.type.includes("health")) {
                conceptName = "Health";
                conceptIcon = conceptIcons.health;
            } else if (question.type.includes("water_fiber")) {
                conceptName = "Water & Fiber";
                conceptIcon = conceptIcons.water_fiber;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("basics")) {
                label.textContent = "Fundamentals of nutrition science";
            } else if (question.type.includes("macronutrients")) {
                label.textContent = "Carbohydrates, proteins, and fats";
            } else if (question.type.includes("micronutrients")) {
                label.textContent = "Vitamins and minerals";
            } else if (question.type.includes("diet")) {
                label.textContent = "Proper food proportions for health";
            } else if (question.type.includes("food_groups")) {
                label.textContent = "Categories of foods by nutrients";
            } else if (question.type.includes("digestion")) {
                label.textContent = "Process of breaking down food";
            } else if (question.type.includes("health")) {
                label.textContent = "Nutrition-related health issues";
            } else if (question.type.includes("water_fiber")) {
                label.textContent = "Hydration and digestive health";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create nutrition visualization
        function createNutritionVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">Nutrition & Diet Explorer</h3>
                
                <div class="nutrition-display">
                    <div class="display-title">Current Nutrition Concept</div>
                    <div style="padding: 20px; background: var(--dark-surface); border-radius: 8px; margin: 15px 0;">
                        <div style="font-size: 1.1rem; line-height: 1.6; color: var(--text-primary); margin-bottom: 20px;">
                            ${currentQuestion.question}
                        </div>
                        <div style="background: rgba(170, 0, 255, 0.1); padding: 10px; border-radius: 6px; border: 1px solid var(--accent-purple);">
                            <strong>Key Concept:</strong> <span style="color: var(--accent-purple); font-weight: bold;">${getNutritionConcept(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Nutrition Topics Grid -->
                <div class="skills-grid">
                    ${nutritionTopics.map(topic => `
                        <div class="skill-card ${topic.name.toLowerCase().replace(/ /g, '-')}" style="border-color: ${topic.color}">
                            <div class="skill-icon" style="color: ${topic.color}">${topic.icon}</div>
                            <div class="skill-title" style="color: ${topic.color}">${topic.name}</div>
                            <div class="skill-description">${topic.description}</div>
                        </div>
                    `).join('')}
                </div>
                
                <!-- Nutrient Types Table -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div class="display-title">Types of Nutrients</div>
                    <table class="nutrition-table">
                        <thead>
                            <tr>
                                <th>Nutrient Type</th>
                                <th>Function</th>
                                <th>Examples</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color: var(--secondary-teal); font-weight: bold;">Carbohydrates</td>
                                <td>Energy source</td>
                                <td>Rice, bread, potatoes</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-pink); font-weight: bold;">Proteins</td>
                                <td>Growth and repair</td>
                                <td>Eggs, meat, pulses</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-amber); font-weight: bold;">Fats</td>
                                <td>Energy storage</td>
                                <td>Butter, oil, nuts</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-purple); font-weight: bold;">Vitamins</td>
                                <td>Body functions</td>
                                <td>A, B, C, D vitamins</td>
                            </tr>
                            <tr>
                                <td style="color: var(--accent-green); font-weight: bold;">Minerals</td>
                                <td>Bone health, etc.</td>
                                <td>Calcium, iron, zinc</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Food Groups Overview -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid var(--accent-green);">
                    <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 15px; text-align: center;">Major Food Groups</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--secondary-teal); margin-bottom: 10px;">Energy Foods</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Carbohydrates: Grains, cereals, bread</div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--accent-pink); margin-bottom: 10px;">Body Building</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Proteins: Meat, fish, eggs, pulses</div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--accent-purple); margin-bottom: 10px;">Protective Foods</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Vitamins/Minerals: Fruits, vegetables</div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 10px;">Energy Storage</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Fats: Oils, butter, nuts</div>
                        </div>
                    </div>
                </div>
                
                <!-- Digestive System Overview -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div class="display-title">Digestive Process</div>
                    <div style="color: var(--text-secondary); line-height: 1.6;">
                        <strong>1. Mouth:</strong> Chewing and saliva mix<br>
                        <strong>2. Stomach:</strong> Acid breaks down proteins<br>
                        <strong>3. Small Intestine:</strong> Nutrient absorption<br>
                        <strong>4. Large Intestine:</strong> Water absorption<br>
                        <strong>5. Elimination:</strong> Waste removal
                    </div>
                </div>
                
                <!-- Health Tips -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid var(--accent-amber);">
                    <div style="color: var(--accent-amber); font-weight: bold; margin-bottom: 15px; text-align: center;">Healthy Eating Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                        ‚Ä¢ Eat a variety of foods<br>
                        ‚Ä¢ Include fruits and vegetables<br>
                        ‚Ä¢ Drink plenty of water<br>
                        ‚Ä¢ Limit sugar and salt<br>
                        ‚Ä¢ Eat regular meals<br>
                        ‚Ä¢ Practice portion control
                    </div>
                </div>
                
                <!-- Quick Reference -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div class="display-title">Quick Nutrition Reference</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                        <strong>Balanced Diet:</strong> All nutrients in right proportions<br>
                        <strong>Malnutrition:</strong> Poor nutrition from inadequate diet<br>
                        <strong>Obesity:</strong> Excess body fat from overeating<br>
                        <strong>Deficiency Diseases:</strong> From lack of specific nutrients<br>
                        <strong>Hydration:</strong> 6-8 glasses of water daily<br>
                        <strong>Fiber:</strong> Important for digestive health
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper functions
        function getNutritionConcept(typeString) {
            const conceptMap = {
                "basics": "Nutrition Basics - Understanding nutrition science",
                "macronutrients": "Macronutrients - Carbohydrates, proteins, and fats",
                "micronutrients": "Micronutrients - Vitamins and minerals",
                "diet": "Balanced Diet - Proper food proportions for health",
                "food_groups": "Food Groups - Categories of foods by nutrients",
                "digestion": "Digestion - Process of breaking down food",
                "health": "Health - Nutrition-related health issues",
                "water_fiber": "Water & Fiber - Hydration and digestive health"
            };
            
            return conceptMap[typeString] || "Nutrition Science";
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceFact.appendChild(createScienceFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createNutritionVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin your nutrition learning journey!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
