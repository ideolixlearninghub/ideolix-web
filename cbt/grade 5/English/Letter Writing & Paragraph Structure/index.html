<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 English - Letter Writing & Paragraph Structure | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for English/Language Arts Theme */
        :root {
            --primary-indigo: #3F51B5;
            --secondary-teal: #009688;
            --accent-orange: #FF9800;
            --accent-pink: #E91E63;
            --accent-purple: #9C27B0;
            --accent-green: #4CAF50;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(63, 81, 181, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-indigo), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(63, 81, 181, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-indigo);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-indigo);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-indigo);
            box-shadow: 0 0 0 3px rgba(63, 81, 181, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-indigo);
            color: white;
            box-shadow: 0 4px 15px rgba(63, 81, 181, 0.4);
        }

        .btn-primary:hover {
            background: #303F9F;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(63, 81, 181, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
        }

        .btn-secondary:hover {
            background: #00796B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-indigo);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-indigo), var(--secondary-teal));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(63, 81, 181, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .english-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-indigo), var(--accent-purple));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(63, 81, 181, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-indigo);
            background: rgba(63, 81, 181, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(63, 81, 181, 0.1);
            border-color: var(--primary-indigo);
            color: var(--primary-indigo);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--primary-indigo);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(63, 81, 181, 0.1);
            border-left: 5px solid var(--primary-indigo);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-indigo);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-indigo);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Letter Format Display */
        .letter-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid var(--secondary-teal);
            line-height: 1.6;
            font-size: 1.1rem;
            font-family: 'Courier New', monospace;
        }

        .letter-title {
            color: var(--secondary-teal);
            margin-bottom: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .letter-type {
            display: inline-block;
            padding: 5px 10px;
            background: var(--primary-indigo);
            color: white;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .formal-letter .letter-type { background: var(--accent-orange); }
        .informal-letter .letter-type { background: var(--accent-green); }

        /* Paragraph Structure Display */
        .paragraph-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-purple);
        }

        .paragraph-part {
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            position: relative;
        }

        .topic-sentence {
            background: rgba(255, 152, 0, 0.1);
            border-left: 4px solid var(--accent-orange);
        }

        .supporting-detail {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            margin-left: 20px;
        }

        .conclusion {
            background: rgba(156, 39, 176, 0.1);
            border-left: 4px solid var(--accent-purple);
        }

        .part-label {
            position: absolute;
            top: -10px;
            left: 10px;
            background: var(--dark-card);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .topic-sentence .part-label { color: var(--accent-orange); }
        .supporting-detail .part-label { color: var(--accent-green); }
        .conclusion .part-label { color: var(--accent-purple); }

        /* Comparison Display */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }
        }

        .letter-column {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid transparent;
        }

        .letter-column.formal {
            border-color: var(--accent-orange);
        }

        .letter-column.informal {
            border-color: var(--accent-green);
        }

        .column-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .letter-column.informal .column-title {
            color: var(--accent-green);
        }

        /* Features Display */
        .features-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .features-display {
                grid-template-columns: 1fr;
            }
        }

        .feature-item {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .feature-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--accent-pink);
        }

        .feature-title {
            font-weight: bold;
            color: var(--primary-indigo);
            margin-bottom: 8px;
        }

        .feature-example {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Rule Cards */
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .rules-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .rules-grid {
                grid-template-columns: 1fr;
            }
        }

        .rule-card {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
        }

        .rule-card:hover {
            transform: translateY(-3px);
        }

        .rule-card.active {
            border-color: var(--primary-indigo);
            background: rgba(63, 81, 181, 0.1);
        }

        .rule-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .rule-title {
            font-weight: bold;
            color: var(--primary-indigo);
            margin-bottom: 8px;
            text-align: center;
        }

        .rule-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Letter Parts Display */
        .letter-parts {
            margin: 20px 0;
        }

        .letter-part {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent-orange);
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .part-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--accent-orange);
            border-radius: 50%;
            font-weight: bold;
            flex-shrink: 0;
        }

        .part-content {
            flex: 1;
        }

        .part-title {
            font-weight: bold;
            color: var(--primary-indigo);
            margin-bottom: 5px;
        }

        .part-example {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
            margin-top: 5px;
        }

        /* Writing Tips Display */
        .writing-tips {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .tips-title {
            color: var(--accent-green);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .tips-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 6px;
        }

        .tip-icon {
            color: var(--accent-green);
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .tip-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Examples Table */
        .examples-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .examples-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--primary-indigo);
            border-bottom: 2px solid var(--primary-indigo);
        }

        .examples-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .examples-table tr:hover {
            background: rgba(63, 81, 181, 0.05);
        }

        .formal-cell {
            border-left: 4px solid var(--accent-orange);
        }

        .informal-cell {
            border-left: 4px solid var(--accent-green);
        }

        /* Practice Writing */
        .practice-writing {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .practice-title {
            color: var(--accent-orange);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .writing-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .input-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--dark-border);
            min-height: 100px;
        }

        .output-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--accent-green);
            min-height: 100px;
            color: var(--accent-green);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-indigo), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-indigo), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-indigo);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .rules-grid {
                grid-template-columns: 1fr;
            }
            
            .features-display {
                grid-template-columns: 1fr;
            }
            
            .tips-list {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes letterFlow {
            0% { transform: translateX(-10px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .letter-flow {
            animation: letterFlow 0.5s ease forwards;
        }
        
        @keyframes paragraphBuild {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .paragraph-build {
            animation: paragraphBuild 0.8s ease forwards;
        }
        
        @keyframes ruleHighlight {
            0%, 100% { background-color: rgba(63, 81, 181, 0.1); border-color: var(--primary-indigo); }
            50% { background-color: rgba(63, 81, 181, 0.3); border-color: var(--secondary-teal); }
        }
        
        .rule-highlight {
            animation: ruleHighlight 1s ease-in-out infinite;
        }
        
        @keyframes writingFlow {
            0% { color: var(--accent-orange); }
            50% { color: var(--accent-pink); }
            100% { color: var(--accent-green); }
        }
        
        .writing-flow {
            animation: writingFlow 2s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1456513080510-34499c43696c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1524578271613-d550eacf6090?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 English</h1>
            <p class="welcome-subtitle">Master letter writing and paragraph structure! Learn formal and informal letter formats, proper paragraph organization with topic sentences, supporting details, and strong conclusions. Develop clear, effective writing skills!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">‚úâÔ∏èüìù</span>
                <span class="topic-name">Letter Writing & Paragraph Structure</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Writing Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 130</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- English fact display -->
                <div id="englishFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Writing Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 130+ Grade 5 Letter Writing & Paragraph Structure questions
        const questions = [
            // Letter Format Basics (1-20)
            {
                type: "letter_parts",
                question: "What comes first in a formal letter?",
                options: ["Sender's address", "Date", "Recipient's address", "Greeting"],
                answer: "A",
                explanation: "A formal letter starts with the sender's address at the top right corner."
            },
            {
                type: "letter_parts",
                question: "Which part follows the date in a formal letter?",
                options: ["Recipient's address", "Subject line", "Greeting", "Body"],
                answer: "A",
                explanation: "After the date, write the recipient's address on the left side."
            },
            {
                type: "letter_parts",
                question: "What is the correct greeting for a formal letter to someone you don't know?",
                options: ["Dear Sir/Madam,", "Hi there,", "To whom it may concern,", "Hello,"],
                answer: "A",
                explanation: "Use 'Dear Sir/Madam,' for formal letters when you don't know the person's name."
            },
            {
                type: "letter_parts",
                question: "Where does the signature go in a letter?",
                options: ["After the closing", "After the body", "Before the greeting", "After the date"],
                answer: "A",
                explanation: "Sign your name after the closing phrase (like 'Sincerely') but before your typed name."
            },
            {
                type: "letter_parts",
                question: "Which is NOT a closing for a formal letter?",
                options: ["Love,", "Yours faithfully,", "Yours sincerely,", "Respectfully yours,"],
                answer: "A",
                explanation: "'Love,' is too personal for formal letters - it's for informal letters to close friends or family."
            },
            {
                type: "letter_parts",
                question: "What should you write before your signature in a formal letter?",
                options: ["Your full typed name", "Just your first name", "Your initials", "Your nickname"],
                answer: "A",
                explanation: "Always type your full name below your signature in formal letters."
            },
            {
                type: "letter_parts",
                question: "Where does the subject line go in a formal letter?",
                options: ["After recipient's address", "After the date", "Before the greeting", "In the body"],
                answer: "C",
                explanation: "Subject line comes right before the greeting to state what the letter is about."
            },
            {
                type: "letter_parts",
                question: "What is the correct format for date in formal letters?",
                options: ["15 October 2024", "Oct 15, 2024", "15/10/2024", "October 15th, 2024"],
                answer: "A",
                explanation: "Formal letters use day-month-year format without abbreviations: '15 October 2024'."
            },
            {
                type: "letter_parts",
                question: "How should you start an informal letter to a friend?",
                options: ["Dear [Friend's Name],", "To my dear friend,", "Hey!", "Hello friend,"],
                answer: "A",
                explanation: "Even informal letters usually start with 'Dear [Name],' though you can be more casual."
            },
            {
                type: "letter_parts",
                question: "Which closing is appropriate for an informal letter?",
                options: ["Best wishes,", "Yours faithfully,", "Respectfully,", "Sincerely,"],
                answer: "A",
                explanation: "'Best wishes,' is warm but not too formal for informal letters."
            },

            // Formal vs Informal Letters (21-40)
            {
                type: "formal_informal",
                question: "Which type of letter would you write to a government official?",
                options: ["Formal", "Informal", "Semi-formal", "Personal"],
                answer: "A",
                explanation: "Always use formal letters for government officials, businesses, or people you don't know well."
            },
            {
                type: "formal_informal",
                question: "To whom would you write an informal letter?",
                options: ["A close friend", "Your principal", "A company", "A newspaper editor"],
                answer: "A",
                explanation: "Informal letters are for people you know well: friends, family, close acquaintances."
            },
            {
                type: "formal_informal",
                question: "Which language style is used in formal letters?",
                options: ["Polite and respectful", "Casual and friendly", "Slang and abbreviations", "Emotional and personal"],
                answer: "A",
                explanation: "Formal letters use polite, respectful language without contractions or slang."
            },
            {
                type: "formal_informal",
                question: "What can you use in informal letters but NOT in formal ones?",
                options: ["Contractions (don't, can't)", "Complete sentences", "Proper grammar", "Clear paragraphs"],
                answer: "A",
                explanation: "Contractions like 'don't' or 'can't' are acceptable in informal letters but should be avoided in formal writing."
            },
            {
                type: "formal_informal",
                question: "Which shows formal letter language?",
                options: ["I am writing to inquire about...", "Just wanted to ask you about...", "Hey, got a question...", "What's up with..."],
                answer: "A",
                explanation: "Formal letters use complete sentences and formal phrases like 'I am writing to inquire...'"
            },
            {
                type: "formal_informal",
                question: "When would you use 'Yours faithfully'?",
                options: ["When you don't know the recipient's name", "To a family member", "To a close friend", "In an email to a classmate"],
                answer: "A",
                explanation: "'Yours faithfully' is used in formal letters when you began with 'Dear Sir/Madam'."
            },
            {
                type: "formal_informal",
                question: "When would you use 'Yours sincerely'?",
                options: ["When you know the recipient's name", "To a stranger", "In very formal business letters", "In postcards"],
                answer: "A",
                explanation: "'Yours sincerely' is used when you address the person by name (Dear Mr. Smith)."
            },
            {
                type: "formal_informal",
                question: "Which is a feature of informal letters?",
                options: ["Can include jokes or stories", "Must have a subject line", "Requires formal vocabulary", "Needs official letterhead"],
                answer: "A",
                explanation: "Informal letters can include personal stories, jokes, and casual conversation."
            },
            {
                type: "formal_informal",
                question: "What must formal letters have that informal ones don't?",
                options: ["Recipient's full address", "The writer's feelings", "Personal anecdotes", "Emoticons"],
                answer: "A",
                explanation: "Formal letters require the complete address of the recipient, while informal letters often don't."
            },
            {
                type: "formal_informal",
                question: "Which shows informal letter language?",
                options: ["Can't wait to see you soon!", "I look forward to your response.", "I am writing to apply for...", "Please find attached..."],
                answer: "A",
                explanation: "'Can't wait to see you soon!' shows excitement and uses a contraction - typical of informal letters."

            },
            // Paragraph Structure Basics (41-60)
            {
                type: "paragraph_structure",
                question: "What is the first sentence of a paragraph called?",
                options: ["Topic sentence", "Supporting sentence", "Concluding sentence", "Detail sentence"],
                answer: "A",
                explanation: "The topic sentence introduces the main idea of the paragraph."
            },
            {
                type: "paragraph_structure",
                question: "What do supporting sentences do?",
                options: ["Provide details and examples", "Introduce new topics", "End the paragraph", "Repeat the topic sentence"],
                answer: "A",
                explanation: "Supporting sentences give details, examples, facts, or explanations about the topic."
            },
            {
                type: "paragraph_structure",
                question: "What is the purpose of a concluding sentence?",
                options: ["Summarize or restate the main idea", "Introduce new information", "Ask a question", "Change the topic"],
                answer: "A",
                explanation: "The concluding sentence wraps up the paragraph by summarizing or restating the main idea."
            },
            {
                type: "paragraph_structure",
                question: "How many main ideas should a paragraph have?",
                options: ["One", "Two", "Three", "As many as needed"],
                answer: "A",
                explanation: "Each paragraph should focus on only one main idea or topic."
            },
            {
                type: "paragraph_structure",
                question: "What connects sentences in a paragraph?",
                options: ["Transition words", "Random ideas", "Different topics", "Short phrases"],
                answer: "A",
                explanation: "Transition words like 'first,' 'next,' 'however,' and 'therefore' connect ideas smoothly."
            },
            {
                type: "paragraph_structure",
                question: "Which is a good topic sentence?",
                options: ["Summer is my favorite season for three reasons.", "I like summer.", "There are many seasons.", "Sometimes it's hot."],
                answer: "A",
                explanation: "A strong topic sentence introduces the main idea and suggests what will follow."
            },
            {
                type: "paragraph_structure",
                question: "Which is a supporting detail?",
                options: ["For example, the weather is warm and sunny.", "In conclusion, summer is great.", "Summer has different months.", "What is your favorite season?"],
                answer: "A",
                explanation: "'For example' introduces a specific detail that supports the main idea."
            },
            {
                type: "paragraph_structure",
                question: "What makes a strong concluding sentence?",
                options: ["It reminds the reader of the main point", "It introduces new topics", "It asks unrelated questions", "It's the longest sentence"],
                answer: "A",
                explanation: "A good concluding sentence reinforces the paragraph's main idea without introducing new information."
            },
            {
                type: "paragraph_structure",
                question: "How many sentences should a paragraph have?",
                options: ["4-6 sentences", "Exactly 3 sentences", "At least 10 sentences", "Only 2 sentences"],
                answer: "A",
                explanation: "A well-developed paragraph typically has 4-6 sentences: topic sentence, 2-4 supporting sentences, and a conclusion."
            },
            {
                type: "paragraph_structure",
                question: "What should all sentences in a paragraph relate to?",
                options: ["The main idea", "Different topics", "Random thoughts", "Whatever comes to mind"],
                answer: "A",
                explanation: "Every sentence should support or relate to the paragraph's main idea for unity and clarity."
            },

            // Identifying Parts of Letters (61-80)
            {
                type: "identify_parts",
                question: "Identify the greeting in this letter part: 'Dear Aunt Mary,'",
                options: ["Greeting", "Closing", "Body", "Signature"],
                answer: "A",
                explanation: "'Dear Aunt Mary,' is the greeting that opens the letter."
            },
            {
                type: "identify_parts",
                question: "What part is: 'Sincerely yours,'?",
                options: ["Closing", "Greeting", "Body", "Address"],
                answer: "A",
                explanation: "'Sincerely yours,' is a closing phrase that comes before the signature."
            },
            {
                type: "identify_parts",
                question: "Identify: '123 Main Street, Springfield'",
                options: ["Address", "Date", "Greeting", "Subject"],
                answer: "A",
                explanation: "This is an address - either sender's or recipient's depending on placement."
            },
            {
                type: "identify_parts",
                question: "What is 'October 15, 2024' in a letter?",
                options: ["Date", "Greeting", "Closing", "Subject"],
                answer: "A",
                explanation: "This is the date when the letter was written."
            },
            {
                type: "identify_parts",
                question: "Identify: 'I hope this letter finds you well.'",
                options: ["Body opening", "Closing", "Greeting", "Address"],
                answer: "A",
                explanation: "This is a common opening sentence in the body of a formal letter."
            },
            {
                type: "identify_parts",
                question: "What is 'Looking forward to your reply.'?",
                options: ["Body closing", "Letter opening", "Greeting", "Date"],
                answer: "A",
                explanation: "This is typically found at the end of the body before the closing phrase."
            },
            {
                type: "identify_parts",
                question: "Identify: 'Your loving niece,'",
                options: ["Closing", "Greeting", "Body", "Address"],
                answer: "A",
                explanation: "This is a closing phrase showing the relationship between writer and recipient."
            },
            {
                type: "identify_parts",
                question: "What part is: 'Re: Summer Camp Registration'?",
                options: ["Subject line", "Greeting", "Closing", "Date"],
                answer: "A",
                explanation: "'Re:' indicates the subject or purpose of the letter."
            },
            {
                type: "identify_parts",
                question: "Identify: 'Please let me know if you need more information.'",
                options: ["Body sentence", "Greeting", "Closing", "Address"],
                answer: "A",
                explanation: "This is a sentence from the body of the letter."
            },
            {
                type: "identify_parts",
                question: "What is 'John Smith' below a signature?",
                options: ["Typed name", "Greeting", "Address", "Date"],
                answer: "A",
                explanation: "The typed name below the handwritten signature identifies the writer clearly."
            },

            // Identifying Paragraph Parts (81-100)
            {
                type: "identify_paragraph",
                question: "Which sentence is the topic sentence? 'Dogs make excellent pets. They are loyal companions who protect their families. Dogs can be trained to perform many useful tasks. For these reasons, dogs are wonderful animals to have at home.'",
                options: ["Dogs make excellent pets.", "They are loyal companions who protect their families.", "Dogs can be trained to perform many useful tasks.", "For these reasons, dogs are wonderful animals to have at home."],
                answer: "A",
                explanation: "The first sentence introduces the main idea: dogs make excellent pets."
            },
            {
                type: "identify_paragraph",
                question: "Which is a supporting detail? 'Reading books has many benefits. First, it improves vocabulary and language skills. Second, reading expands knowledge about different subjects. Finally, it provides entertainment and relaxation. Therefore, everyone should develop a reading habit.'",
                options: ["First, it improves vocabulary and language skills.", "Reading books has many benefits.", "Therefore, everyone should develop a reading habit.", "All of the above"],
                answer: "A",
                explanation: "This gives a specific detail (improves vocabulary) that supports the main idea about reading benefits."
            },
            {
                type: "identify_paragraph",
                question: "Identify the concluding sentence: 'Exercise is important for good health. Regular physical activity strengthens the heart and muscles. It also helps maintain a healthy weight. Furthermore, exercise reduces stress and improves mood. Clearly, making time for exercise is essential for overall wellbeing.'",
                options: ["Clearly, making time for exercise is essential for overall wellbeing.", "Exercise is important for good health.", "Regular physical activity strengthens the heart and muscles.", "It also helps maintain a healthy weight."],
                answer: "A",
                explanation: "This sentence summarizes and reinforces the main point about exercise importance."
            },
            {
                type: "identify_paragraph",
                question: "Which transition word introduces a supporting detail?",
                options: ["For example", "In conclusion", "Firstly", "However"],
                answer: "A",
                explanation: "'For example' introduces specific examples that support the main idea."
            },
            {
                type: "identify_paragraph",
                question: "What type of sentence is this? 'In summary, proper nutrition is crucial for children's growth and development.'",
                options: ["Concluding sentence", "Topic sentence", "Supporting detail", "Question"],
                answer: "A",
                explanation: "'In summary' signals a conclusion that restates the main point."
            },
            {
                type: "identify_paragraph",
                question: "Which sentence doesn't belong? 'My hometown has beautiful parks. The largest park has a lake with ducks. My favorite food is pizza. There are walking trails through wooded areas. Many families picnic there on weekends.'",
                options: ["My favorite food is pizza.", "My hometown has beautiful parks.", "The largest park has a lake with ducks.", "There are walking trails through wooded areas."],
                answer: "A",
                explanation: "This sentence about pizza doesn't relate to the main idea about parks in the hometown."
            },
            {
                type: "identify_paragraph",
                question: "What is the main idea of this paragraph? 'Learning to swim is an important life skill. It can prevent drowning accidents. Swimming is also excellent exercise for the whole body. Additionally, it's a fun activity that can be enjoyed at any age.'",
                options: ["Learning to swim is an important life skill.", "It can prevent drowning accidents.", "Swimming is also excellent exercise for the whole body.", "Additionally, it's a fun activity that can be enjoyed at any age."],
                answer: "A",
                explanation: "The first sentence states the main idea that the rest of the paragraph supports."
            },
            {
                type: "identify_paragraph",
                question: "Which is a good topic sentence for a paragraph about recycling?",
                options: ["Recycling helps protect our environment in several ways.", "I put paper in the blue bin.", "Plastic bottles can be recycled.", "Glass takes a long time to decompose."],
                answer: "A",
                explanation: "This introduces the topic (recycling benefits) and suggests the paragraph will give several ways."
            },
            {
                type: "identify_paragraph",
                question: "What makes this a weak topic sentence? 'There are things about weather.'",
                options: ["Too vague", "Too specific", "Gives examples", "States an opinion"],
                answer: "A",
                explanation: "It's too vague - doesn't tell what specific aspect of weather the paragraph will discuss."
            },
            {
                type: "identify_paragraph",
                question: "How could this sentence be improved as a topic sentence? 'I have a dog.'",
                options: ["Add what the paragraph will discuss about the dog", "Make it shorter", "Remove the subject", "Add more pronouns"],
                answer: "A",
                explanation: "A better topic sentence would be: 'My dog has several interesting habits' or 'Having a dog has taught me responsibility.'"
            },

            // Letter Writing Scenarios (101-120)
            {
                type: "letter_scenarios",
                question: "What type of letter would you write to complain about a broken product?",
                options: ["Formal complaint letter", "Informal note", "Friendly letter", "Postcard"],
                answer: "A",
                explanation: "Complaints to companies should be formal letters with clear details and polite language."
            },
            {
                type: "letter_scenarios",
                question: "How would you start a letter to the principal about starting a school club?",
                options: ["Dear Principal [Last Name],", "Hey Principal,", "To the Head of School,", "Hello there,"],
                answer: "A",
                explanation: "Use formal greeting with title and last name when writing to school officials."
            },
            {
                type: "letter_scenarios",
                question: "What would you include in a thank-you letter to a relative?",
                options: ["Specific thanks for the gift and how you'll use it", "Only 'thank you'", "Complaints about other gifts", "Formal business language"],
                answer: "A",
                explanation: "Thank-you letters should mention the specific gift and show appreciation genuinely."
            },
            {
                type: "letter_scenarios",
                question: "How should you end an invitation letter to a friend for a birthday party?",
                options: ["Hope you can come!", "Yours faithfully,", "Sincerely yours,", "Respectfully,"],
                answer: "A",
                explanation: "Informal invitations to friends can end with friendly phrases rather than formal closings."
            },
            {
                type: "letter_scenarios",
                question: "What's important in an application letter for a student council position?",
                options: ["Stating your qualifications clearly", "Using casual language", "Keeping it very short", "Adding jokes"],
                answer: "A",
                explanation: "Application letters should formally present your skills, experience, and reasons for applying."
            },
            {
                type: "letter_scenarios",
                question: "What would you write to a pen pal in another country?",
                options: ["Informal letter about your life and interests", "Very formal business letter", "Official complaint", "One-sentence note"],
                answer: "A",
                explanation: "Pen pal letters are informal and friendly, sharing personal experiences and asking questions."
            },
            {
                type: "letter_scenarios",
                question: "How would you request information from a museum about school visits?",
                options: ["Formal letter with clear questions", "Text message", "Informal note", "Verbal request only"],
                answer: "A",
                explanation: "Requests to organizations should be formal letters with polite, specific questions."
            },
            {
                type: "letter_scenarios",
                question: "What should a get-well letter to a friend include?",
                options: ["Wishes for recovery and cheerful news", "All your problems", "Formal business language", "Complaints"],
                answer: "A",
                explanation: "Get-well letters should be encouraging, positive, and show you care."
            },
            {
                type: "letter_scenarios",
                question: "How would you write to a company to suggest a product improvement?",
                options: ["Formal suggestion letter with reasons", "Angry complaint", "Informal chatty letter", "Text message"],
                answer: "A",
                explanation: "Suggestions to companies should be formal, polite, and explain the benefits of your idea."
            },
            {
                type: "letter_scenarios",
                question: "What's appropriate for a condolence letter to a friend?",
                options: ["Simple, sincere expression of sympathy", "Jokes to cheer them up", "Very long detailed letter", "Casual 'sorry' note"],
                answer: "A",
                explanation: "Condolence letters should be sincere, brief, and focus on expressing sympathy."
            },

            // Paragraph Writing Practice (121-140)
            {
                type: "paragraph_practice",
                question: "Which would make the best topic sentence for a paragraph about bicycle safety?",
                options: ["Following safety rules can prevent bicycle accidents.", "Bicycles have two wheels.", "I like to ride my bike.", "Some bikes are red."],
                answer: "A",
                explanation: "This introduces the specific topic (bicycle safety rules) that can be developed with supporting details."
            },
            {
                type: "paragraph_practice",
                question: "Choose the best supporting detail for this topic sentence: 'Reading daily improves vocabulary.'",
                options: ["For instance, encountering new words in context helps learn their meanings.", "Books have many pages.", "Some people prefer movies.", "Libraries are quiet places."],
                answer: "A",
                explanation: "This gives a specific example of HOW reading improves vocabulary."
            },
            {
                type: "paragraph_practice",
                question: "Which concluding sentence best matches this paragraph? 'Regular handwashing prevents illness. Germs on hands can enter the body through the mouth or eyes. Soap and water remove germs effectively.'",
                options: ["Therefore, making handwashing a habit protects your health.", "Some people like warm water.", "Illness can be serious.", "There are many types of soap."],
                answer: "A",
                explanation: "This summarizes the main point about handwashing importance for health protection."
            },
            {
                type: "paragraph_practice",
                question: "Arrange these sentences into logical order: 1. Finally, it's fun to share books with friends. 2. Reading offers many benefits. 3. Second, reading teaches about different places and cultures. 4. First, reading improves language skills.",
                options: ["2, 4, 3, 1", "1, 2, 3, 4", "4, 3, 2, 1", "3, 4, 1, 2"],
                answer: "A",
                explanation: "Start with topic sentence (2), then supporting points in order (4, 3), then conclusion (1)."
            },
            {
                type: "paragraph_practice",
                question: "Which transition word shows contrast?",
                options: ["However", "Additionally", "For example", "Similarly"],
                answer: "A",
                explanation: "'However' introduces a contrasting or different idea."
            },
            {
                type: "paragraph_practice",
                question: "Which sentence is off-topic in a paragraph about healthy eating?",
                options: ["Video games are popular with children.", "Fruits and vegetables provide essential vitamins.", "Drinking water is important for hydration.", "Whole grains give sustained energy."],
                answer: "A",
                explanation: "Video games don't relate to the paragraph's topic of healthy eating."
            },
            {
                type: "paragraph_practice",
                question: "What's missing from this paragraph? 'Swimming is good exercise. It uses all major muscle groups. The water supports your body.'",
                options: ["A concluding sentence", "More topic sentences", "Different topics", "Longer words"],
                answer: "A",
                explanation: "The paragraph needs a concluding sentence to wrap up the ideas about swimming benefits."
            },
            {
                type: "paragraph_practice",
                question: "How could this paragraph be improved? 'I have a cat. She is gray. She eats food. She sleeps a lot.'",
                options: ["Add more details and descriptive words", "Make sentences shorter", "Remove the topic sentence", "Change the subject"],
                answer: "A",
                explanation: "Add descriptive details: 'My cat is soft gray with green eyes. She enjoys salmon-flavored food and naps in sunny spots.'"
            },
            {
                type: "paragraph_practice",
                question: "Which topic sentence is too broad?",
                options: ["Animals exist.", "Dogs can be trained as service animals.", "Cats make independent pets.", "Rabbits need special care."],
                answer: "A",
                explanation: "'Animals exist.' is too broad - a paragraph couldn't adequately cover all animals."
            },
            {
                type: "paragraph_practice",
                question: "What makes a paragraph cohesive?",
                options: ["All sentences relate to the main idea", "Sentences are all different lengths", "It has exactly five sentences", "It includes many opinions"],
                answer: "A",
                explanation: "Cohesive paragraphs have unity - every sentence supports or relates to the main idea."
            },

            // Letter vs Email Differences (141-150)
            {
                type: "letter_email",
                question: "What do emails have that traditional letters don't?",
                options: ["Subject line in header", "Greeting", "Closing", "Body"],
                answer: "A",
                explanation: "Emails have a subject line in the header that letters usually place after the recipient's address."
            },
            {
                type: "letter_email",
                question: "What is acceptable in informal emails but not formal ones?",
                options: ["Emoticons :)", "Complete sentences", "Clear subject line", "Proper grammar"],
                answer: "A",
                explanation: "Emoticons are acceptable in informal emails to friends but not in formal business emails."
            },
            {
                type: "letter_email",
                question: "How is email greeting different from letter greeting?",
                options: ["Can be omitted in very informal emails", "Always required", "Must be very formal", "Placed at the end"],
                answer: "A",
                explanation: "Very informal emails to close friends might skip greetings, but letters always need them."
            },
            {
                type: "letter_email",
                question: "What should email closings include?",
                options: ["Your name and contact information", "Just your first name", "No signature", "Only initials"],
                answer: "A",
                explanation: "Email closings should include your full name and often your position/contact details."
            },
            {
                type: "letter_email",
                question: "Which is a formal email greeting?",
                options: ["Dear Professor Johnson,", "Hey Prof J!", "Hi there,", "Hello!"],
                answer: "A",
                explanation: "Formal emails use the same greetings as formal letters: 'Dear [Title] [Last Name],'"
            },

            // Address Format (151-155)
            {
                type: "address_format",
                question: "What is the correct order for a mailing address?",
                options: ["Name, Street, City, State, ZIP", "ZIP, State, City, Street, Name", "City, State, Street, Name, ZIP", "Name, City, State, Street, ZIP"],
                answer: "A",
                explanation: "Standard US format: Recipient's Name, Street Address, City, State, ZIP Code."
            },
            {
                type: "address_format",
                question: "Where does the ZIP code go?",
                options: ["After the state", "Before the city", "After the country", "Before the street"],
                answer: "A",
                explanation: "ZIP code follows the state abbreviation: Springfield, IL 62704"
            },
            {
                type: "address_format",
                question: "How should you write the state in an address?",
                options: ["Two-letter abbreviation", "Full name only", "No state needed", "First three letters"],
                answer: "A",
                explanation: "Use official two-letter abbreviations: CA for California, NY for New York, etc."
            },
            {
                type: "address_format",
                question: "What's missing? 'John Smith, 123 Oak Street, Springfield'",
                options: ["State and ZIP code", "Country", "Phone number", "Email address"],
                answer: "A",
                explanation: "Need state and ZIP code for proper mailing: Springfield, IL 62704"
            },
            {
                type: "address_format",
                question: "Where does 'Apartment 2B' go in an address?",
                options: ["On the same line as street or line above", "After the ZIP code", "Before the name", "After the city"],
                answer: "A",
                explanation: "Apartment/unit numbers go on the same line as street address or the line above: 123 Oak Street, Apartment 2B"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent writing skills!",
            "Fantastic paragraph structure knowledge!",
            "Great job! You're a letter writing expert!",
            "Amazing! Your format understanding is perfect!",
            "Well done! Perfect letter part identification!",
            "You're a formal/informal writing champion!",
            "Perfect! You understand writing conventions!",
            "Outstanding paragraph organization skills!",
            "Brilliant! You think like a writing expert!",
            "You're on fire! Great composition insight!"
        ];

        // Sample letters for visualization
        const sampleLetters = [
            {
                type: "formal",
                parts: [
                    {name: "Sender's Address", text: "123 Student Street\nSpringfield, IL 62704", position: "top-right"},
                    {name: "Date", text: "October 15, 2024", position: "below-address"},
                    {name: "Recipient's Address", text: "Principal Jane Smith\nSpringfield Elementary School\n456 Education Avenue\nSpringfield, IL 62704", position: "left"},
                    {name: "Subject", text: "Request for New Library Books", position: "left-after-address"},
                    {name: "Greeting", text: "Dear Principal Smith,", position: "left"},
                    {name: "Body Opening", text: "I am writing to request additional books for our school library.", position: "left"},
                    {name: "Body Details", text: "Many students are interested in science topics, but our library has few current science books. Adding recent publications would help students with research projects.", position: "left"},
                    {name: "Body Closing", text: "Thank you for considering this request. I look forward to your response.", position: "left"},
                    {name: "Closing", text: "Sincerely,", position: "center"},
                    {name: "Signature", text: "(Handwritten signature)", position: "center-below"},
                    {name: "Typed Name", text: "Alex Johnson\nGrade 5 Student", position: "center-below"}
                ]
            },
            {
                type: "informal",
                parts: [
                    {name: "Sender's Address", text: "123 Maple Street\nSpringfield, IL 62704", position: "top-right"},
                    {name: "Date", text: "October 15, 2024", position: "below-address"},
                    {name: "Greeting", text: "Dear Grandma,", position: "left"},
                    {name: "Body Opening", text: "Thank you so much for the wonderful birthday gift!", position: "left"},
                    {name: "Body Details", text: "The art set you sent is perfect. I've already used it to draw a picture of our dog. The colors are beautiful and the brushes work really well.", position: "left"},
                    {name: "Body Closing", text: "I can't wait to show you my drawings when you visit next month!", position: "left"},
                    {name: "Closing", text: "Love,", position: "center"},
                    {name: "Signature", text: "(Handwritten signature)", position: "center-below"},
                    {name: "Typed Name", text: "Sarah", position: "center-below"}
                ]
            }
        ];

        // Paragraph structure examples
        const paragraphExamples = [
            {
                topic: "The Benefits of Reading",
                topicSentence: "Reading regularly provides several important benefits for students.",
                supportingDetails: [
                    "First, reading improves vocabulary and language skills by exposing readers to new words and sentence structures.",
                    "Additionally, reading expands knowledge about different subjects, cultures, and perspectives.",
                    "Furthermore, reading for pleasure reduces stress and provides enjoyable entertainment."
                ],
                concludingSentence: "Therefore, making time for daily reading is valuable for both learning and relaxation."
            },
            {
                topic: "Importance of Recycling",
                topicSentence: "Recycling is crucial for protecting our environment.",
                supportingDetails: [
                    "Recycling reduces the amount of waste sent to landfills, which helps conserve space.",
                    "It also saves natural resources because recycled materials can be used instead of new ones.",
                    "Additionally, recycling often uses less energy than manufacturing products from raw materials."
                ],
                concludingSentence: "For these reasons, everyone should participate in recycling programs."
            }
        ];

        // Rules for letter writing
        const letterRules = [
            {
                title: "Formal Letters",
                icon: "üìÑ",
                description: "For officials, businesses, unknown recipients",
                examples: ["Use full addresses", "Formal language", "Specific subject"]
            },
            {
                title: "Informal Letters",
                icon: "‚úâÔ∏è",
                description: "For friends, family, close acquaintances",
                examples: ["Casual tone", "Personal news", "Friendly closings"]
            },
            {
                title: "Proper Format",
                icon: "üìã",
                description: "Correct placement of all parts",
                examples: ["Address top right", "Date below address", "Greeting left aligned"]
            },
            {
                title: "Clear Purpose",
                icon: "üéØ",
                description: "State reason for writing early",
                examples: ["Be specific", "Stay on topic", "Organize thoughts"]
            },
            {
                title: "Polite Tone",
                icon: "üôÇ",
                description: "Respectful language always",
                examples: ["Please and thank you", "Appropriate greetings", "Courteous closings"]
            },
            {
                title: "Proofread",
                icon: "üîç",
                description: "Check for errors before sending",
                examples: ["Spelling", "Grammar", "Clarity"]
            }
        ];

        // Paragraph rules
        const paragraphRules = [
            {
                title: "Topic Sentence",
                icon: "1Ô∏è‚É£",
                description: "Introduces main idea",
                examples: ["First sentence", "Clear focus", "Engaging start"]
            },
            {
                title: "Supporting Details",
                icon: "2Ô∏è‚É£",
                description: "Provide evidence/examples",
                examples: ["Facts", "Examples", "Explanations"]
            },
            {
                title: "Unity",
                icon: "üîó",
                description: "All sentences relate to topic",
                examples: ["Stay on topic", "Remove unrelated ideas", "Connect sentences"]
            },
            {
                title: "Coherence",
                icon: "üîÑ",
                description: "Logical flow of ideas",
                examples: ["Transition words", "Logical order", "Smooth connections"]
            },
            {
                title: "Concluding Sentence",
                icon: "üèÅ",
                description: "Wraps up the paragraph",
                examples: ["Summarizes", "Restates main idea", "Strong finish"]
            },
            {
                title: "Adequate Development",
                icon: "üìà",
                description: "Enough details to explain",
                examples: ["4-6 sentences", "Specific examples", "Complete thoughts"]
            }
        ];

        // Formal vs Informal differences
        const formalVsInformal = [
            {formal: "Dear Mr. Johnson,", informal: "Hi Alex,", feature: "Greeting"},
            {formal: "I am writing to inquire...", informal: "I wanted to ask...", feature: "Opening"},
            {formal: "Sincerely,", informal: "Best wishes,", feature: "Closing"},
            {formal: "Cannot, do not", informal: "Can't, don't", feature: "Contractions"},
            {formal: "Complete sentences", informal: "Fragments okay", feature: "Sentence Structure"},
            {formal: "Respectful tone", informal: "Casual/friendly", feature: "Tone"}
        ];

        // Writing tips
        const writingTips = [
            "Always proofread before sending",
            "Keep paragraphs focused on one main idea",
            "Use transition words to connect ideas",
            "Be specific with details and examples",
            "Match your tone to your audience",
            "Organize thoughts before writing",
            "Use proper formatting for clarity",
            "Stay positive and respectful",
            "Ask for what you need clearly",
            "Thank the reader for their time"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const englishFact = document.getElementById('englishFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5LetterWriting');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5LetterWriting', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5LetterWriting_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5LetterWriting_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a writing expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent writing skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a writing master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review writing rules and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Writing skills grow with practice!";
            }
        }

        // Create English fact display
        function createEnglishFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'english-fact';
            
            const facts = [
                "The oldest surviving personal letter was written on clay tablets in ancient Mesopotamia around 2400 BCE!",
                "Before envelopes, letters were folded and sealed with wax, often stamped with the sender's unique seal!",
                "The 'PS' in letters stands for 'postscript' meaning 'written after' - for something you forgot to include!",
                "The longest letter ever written was 1,402 pages long, written by a wife to her husband in the 19th century!",
                "Paragraph comes from Greek 'paragraphos' meaning 'to write beside' or 'written alongside'!",
                "The first email was sent in 1971 by Ray Tomlinson, who also chose the '@' symbol for email addresses!",
                "In Victorian times, the way you folded a letter could send secret messages before it was even opened!",
                "The art of letter writing is called 'epistolary' from the Greek word for letter, 'epistolƒì'!"
            ];
            
            factDiv.innerHTML = `<strong>Writing Fact:</strong> ${facts[Math.floor(Math.random() * facts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "letter_parts": "üìù",
                "formal_informal": "‚öñÔ∏è",
                "paragraph_structure": "üìÑ",
                "identify_parts": "üîç",
                "identify_paragraph": "üìä",
                "letter_scenarios": "üé≠",
                "paragraph_practice": "‚úçÔ∏è",
                "letter_email": "üìß",
                "address_format": "üè†"
            };
            
            let conceptName = "Letter Writing";
            let conceptIcon = "‚úâÔ∏è";
            
            if (question.type.includes("letter_parts")) {
                conceptName = "Letter Parts";
                conceptIcon = conceptIcons.letter_parts;
            } else if (question.type.includes("formal_informal")) {
                conceptName = "Formal vs Informal";
                conceptIcon = conceptIcons.formal_informal;
            } else if (question.type.includes("paragraph_structure")) {
                conceptName = "Paragraph Structure";
                conceptIcon = conceptIcons.paragraph_structure;
            } else if (question.type.includes("identify_parts")) {
                conceptName = "Identifying Parts";
                conceptIcon = conceptIcons.identify_parts;
            } else if (question.type.includes("identify_paragraph")) {
                conceptName = "Paragraph Analysis";
                conceptIcon = conceptIcons.identify_paragraph;
            } else if (question.type.includes("letter_scenarios")) {
                conceptName = "Writing Scenarios";
                conceptIcon = conceptIcons.letter_scenarios;
            } else if (question.type.includes("paragraph_practice")) {
                conceptName = "Paragraph Writing";
                conceptIcon = conceptIcons.paragraph_practice;
            } else if (question.type.includes("letter_email")) {
                conceptName = "Letters vs Emails";
                conceptIcon = conceptIcons.letter_email;
            } else if (question.type.includes("address_format")) {
                conceptName = "Address Format";
                conceptIcon = conceptIcons.address_format;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("letter_parts")) {
                label.textContent = "Understanding letter components and format";
            } else if (question.type.includes("formal_informal")) {
                label.textContent = "Choosing appropriate style for different situations";
            } else if (question.type.includes("paragraph_structure")) {
                label.textContent = "Organizing ideas with topic sentences and details";
            } else if (question.type.includes("identify_parts")) {
                label.textContent = "Recognizing different letter components";
            } else if (question.type.includes("identify_paragraph")) {
                label.textContent = "Analyzing paragraph organization and unity";
            } else if (question.type.includes("letter_scenarios")) {
                label.textContent = "Applying writing skills to real situations";
            } else if (question.type.includes("paragraph_practice")) {
                label.textContent = "Creating well-structured paragraphs";
            } else if (question.type.includes("letter_email")) {
                label.textContent = "Comparing traditional and digital communication";
            } else if (question.type.includes("address_format")) {
                label.textContent = "Proper mailing address formatting";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create writing visualization
        function createWritingVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const letter = sampleLetters[Math.floor(Math.random() * sampleLetters.length)];
            const paragraph = paragraphExamples[Math.floor(Math.random() * paragraphExamples.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-indigo);">Letter Writing & Paragraph Structure</h3>
                
                <div class="comparison-container">
                    <div class="letter-column formal">
                        <div class="column-title">Formal Letter</div>
                        <div class="letter-display formal-letter" style="font-size: 0.9rem; line-height: 1.4;">
                            <div style="text-align: right;">123 Student Street<br>Springfield, IL 62704</div>
                            <div style="text-align: right;">October 15, 2024</div>
                            <div style="margin-top: 20px;">
                                Principal Jane Smith<br>
                                Springfield Elementary School<br>
                                456 Education Avenue<br>
                                Springfield, IL 62704
                            </div>
                            <div style="margin-top: 10px;"><strong>Subject:</strong> Request for New Library Books</div>
                            <div style="margin-top: 20px;">Dear Principal Smith,</div>
                            <div style="margin-top: 15px; text-indent: 20px;">
                                I am writing to request additional books for our school library. Many students are interested in science topics, but our library has few current science books.
                            </div>
                            <div style="margin-top: 15px; text-indent: 20px;">
                                Adding recent publications would help students with research projects and encourage scientific curiosity.
                            </div>
                            <div style="margin-top: 15px; text-indent: 20px;">
                                Thank you for considering this request. I look forward to your response.
                            </div>
                            <div style="margin-top: 40px; text-align: center;">Sincerely,</div>
                            <div style="margin-top: 40px; text-align: center;">Alex Johnson<br>Grade 5 Student</div>
                        </div>
                    </div>
                    
                    <div class="letter-column informal">
                        <div class="column-title">Informal Letter</div>
                        <div class="letter-display informal-letter" style="font-size: 0.9rem; line-height: 1.4;">
                            <div style="text-align: right;">123 Maple Street<br>Springfield, IL 62704</div>
                            <div style="text-align: right;">October 15, 2024</div>
                            <div style="margin-top: 20px;">Dear Grandma,</div>
                            <div style="margin-top: 15px;">
                                Thank you so much for the wonderful birthday gift! The art set you sent is perfect.
                            </div>
                            <div style="margin-top: 15px;">
                                I've already used it to draw a picture of our dog. The colors are beautiful and the brushes work really well.
                            </div>
                            <div style="margin-top: 15px;">
                                I can't wait to show you my drawings when you visit next month!
                            </div>
                            <div style="margin-top: 40px; text-align: center;">Love,</div>
                            <div style="margin-top: 40px; text-align: center;">Sarah</div>
                        </div>
                    </div>
                </div>
                
                <div class="features-display">
                    <div class="feature-item letter-flow" style="animation-delay: 0s">
                        <div class="feature-icon">üìù</div>
                        <div class="feature-title">Formal Features</div>
                        <div class="feature-example">Full addresses, subject line, formal language</div>
                    </div>
                    <div class="feature-item letter-flow" style="animation-delay: 0.1s">
                        <div class="feature-icon">‚úâÔ∏è</div>
                        <div class="feature-title">Informal Features</div>
                        <div class="feature-example">Casual tone, personal news, friendly closing</div>
                    </div>
                    <div class="feature-item letter-flow" style="animation-delay: 0.2s">
                        <div class="feature-icon">üìç</div>
                        <div class="feature-title">Address Format</div>
                        <div class="feature-example">Name, Street, City, State, ZIP Code</div>
                    </div>
                    <div class="feature-item letter-flow" style="animation-delay: 0.3s">
                        <div class="feature-icon">üéØ</div>
                        <div class="feature-title">Clear Purpose</div>
                        <div class="feature-example">State reason early, stay focused</div>
                    </div>
                </div>
                
                <div class="paragraph-display">
                    <h4 style="color: var(--accent-purple); margin-bottom: 15px; text-align: center;">Example Paragraph Structure</h4>
                    
                    <div class="paragraph-part topic-sentence paragraph-build" style="animation-delay: 0s">
                        <div class="part-label">Topic Sentence</div>
                        ${paragraph.topicSentence}
                    </div>
                    
                    ${paragraph.supportingDetails.map((detail, index) => `
                        <div class="paragraph-part supporting-detail paragraph-build" style="animation-delay: ${0.2 + (index * 0.1)}s">
                            <div class="part-label">Supporting Detail ${index + 1}</div>
                            ${detail}
                        </div>
                    `).join('')}
                    
                    <div class="paragraph-part conclusion paragraph-build" style="animation-delay: 0.5s">
                        <div class="part-label">Concluding Sentence</div>
                        ${paragraph.concludingSentence}
                    </div>
                </div>
                
                <div class="rules-grid">
                    ${letterRules.map((rule, index) => `
                        <div class="rule-card rule-highlight" style="animation-delay: ${index * 0.1}s">
                            <div class="rule-icon">${rule.icon}</div>
                            <div class="rule-title">${rule.title}</div>
                            <div class="rule-description">${rule.description}</div>
                            <div style="font-size: 0.8rem; color: var(--accent-orange); margin-top: 8px;">
                                ${rule.examples.join(', ')}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="writing-tips">
                    <div class="tips-title">Writing Tips</div>
                    <div class="tips-list">
                        ${writingTips.slice(0, 6).map((tip, index) => `
                            <div class="tip-item writing-flow" style="animation-delay: ${index * 0.1}s">
                                <div class="tip-icon">‚úì</div>
                                <div class="tip-text">${tip}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <table class="examples-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Formal</th>
                            <th>Informal</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${formalVsInformal.map((item, index) => `
                            <tr>
                                <td>${item.feature}</td>
                                <td class="formal-cell">${item.formal}</td>
                                <td class="informal-cell">${item.informal}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="letter-parts">
                    <div class="letter-part">
                        <div class="part-number">1</div>
                        <div class="part-content">
                            <div class="part-title">Sender's Address</div>
                            <div class="part-example">Your address goes at the top right corner</div>
                        </div>
                    </div>
                    <div class="letter-part">
                        <div class="part-number">2</div>
                        <div class="part-content">
                            <div class="part-title">Date</div>
                            <div class="part-example">Below your address, write the full date</div>
                        </div>
                    </div>
                    <div class="letter-part">
                        <div class="part-number">3</div>
                        <div class="part-content">
                            <div class="part-title">Recipient's Address</div>
                            <div class="part-example">On the left, write who you're writing to</div>
                        </div>
                    </div>
                    <div class="letter-part">
                        <div class="part-number">4</div>
                        <div class="part-content">
                            <div class="part-title">Greeting</div>
                            <div class="part-example">Dear [Name], or Dear Sir/Madam, for formal</div>
                        </div>
                    </div>
                    <div class="letter-part">
                        <div class="part-number">5</div>
                        <div class="part-content">
                            <div class="part-title">Body</div>
                            <div class="part-example">State your purpose clearly in paragraphs</div>
                        </div>
                    </div>
                    <div class="letter-part">
                        <div class="part-number">6</div>
                        <div class="part-content">
                            <div class="part-title">Closing</div>
                            <div class="part-example">Sincerely, Yours faithfully, Love, Best wishes</div>
                        </div>
                    </div>
                    <div class="letter-part">
                        <div class="part-number">7</div>
                        <div class="part-content">
                            <div class="part-title">Signature</div>
                            <div class="part-example">Sign your name, then type it below</div>
                        </div>
                    </div>
                </div>
                
                <div class="practice-writing">
                    <div class="practice-title">Quick Practice</div>
                    <div class="writing-area">
                        <div class="input-box">
                            <strong>Write a topic sentence about:</strong><br>
                            "Why exercise is important"
                        </div>
                        <div class="output-box">
                            <strong>Example:</strong><br>
                            "Regular exercise provides three key benefits for overall health and wellbeing."
                        </div>
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            englishFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            englishFact.appendChild(createEnglishFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createWritingVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
