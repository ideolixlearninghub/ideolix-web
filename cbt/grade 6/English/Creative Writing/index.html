<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 English - Creative Writing | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Creative Writing Theme */
        :root {
            --primary-teal: #009688;
            --secondary-amber: #FFC107;
            --accent-purple: #673AB7;
            --accent-pink: #E91E63;
            --accent-blue: #2196F3;
            --accent-green: #4CAF50;
            --accent-orange: #FF9800;
            --accent-cream: #FFF8E1;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --story-glow: 0 0 20px rgba(0, 150, 136, 0.4);
            --description-glow: 0 0 20px rgba(255, 193, 7, 0.4);
            --letter-glow: 0 0 20px rgba(103, 58, 183, 0.4);
            --report-glow: 0 0 20px rgba(233, 30, 99, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Georgia', 'Palatino', serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            background-image: radial-gradient(circle at 20% 80%, rgba(0, 150, 136, 0.05) 0%, transparent 50%),
                              radial-gradient(circle at 80% 20%, rgba(255, 193, 7, 0.05) 0%, transparent 50%);
        }

        /* Creative Writing Pattern Background */
        .writing-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.1;
            background: 
                linear-gradient(90deg, transparent 95%, rgba(0, 150, 136, 0.1) 100%),
                linear-gradient(0deg, transparent 95%, rgba(255, 193, 7, 0.1) 100%);
            pointer-events: none;
        }

        .floating-element {
            position: absolute;
            font-size: 3rem;
            font-weight: bold;
            animation: floatElement 25s linear infinite;
            opacity: 0.1;
        }

        @keyframes floatElement {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.05; }
            25% { transform: translateY(-150px) translateX(100px) rotate(90deg); opacity: 0.03; }
            50% { transform: translateY(-50px) translateX(-150px) rotate(180deg); opacity: 0.05; }
            75% { transform: translateY(150px) translateX(50px) rotate(270deg); opacity: 0.03; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.05; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--story-glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.8rem;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber), var(--accent-pink), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 800;
            font-family: 'Georgia', serif;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .welcome-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 800px;
            line-height: 1.7;
            font-family: 'Palatino', serif;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 150, 136, 0.15);
            padding: 12px 24px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 2px solid var(--primary-teal);
            font-family: 'Segoe UI', sans-serif;
        }

        .topic-icon {
            font-size: 1.8rem;
        }

        .topic-name {
            font-weight: 700;
            color: var(--primary-teal);
            font-size: 1.2rem;
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
            font-family: 'Segoe UI', sans-serif;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
            font-family: 'Segoe UI', sans-serif;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-teal);
            box-shadow: 0 0 0 3px rgba(0, 150, 136, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-family: 'Segoe UI', sans-serif;
        }

        .btn-primary {
            background: var(--primary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
        }

        .btn-primary:hover {
            background: #00796B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-amber);
            color: #212121;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }

        .btn-secondary:hover {
            background: #FFA000;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-teal);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
            font-family: 'Segoe UI', sans-serif;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-teal), var(--secondary-amber), var(--accent-pink), var(--accent-purple));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 150, 136, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
            font-family: 'Georgia', serif;
        }

        .writing-tip {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-pink);
            font-style: italic;
            color: var(--text-secondary);
            font-family: 'Palatino', serif;
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-teal), var(--accent-purple));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            font-family: 'Georgia', serif;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
            font-family: 'Segoe UI', sans-serif;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            font-family: 'Segoe UI', sans-serif;
        }

        .option:hover {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 150, 136, 0.1);
            border-color: var(--primary-teal);
            color: var(--primary-teal);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-amber);
            color: #212121;
        }

        .option.correct .option-letter {
            background: var(--primary-teal);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 150, 136, 0.1);
            border-left: 5px solid var(--primary-teal);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-teal);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-teal);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
            font-family: 'Palatino', serif;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Creative Writing Display */
        .writing-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-pink);
            text-align: center;
        }

        .display-title {
            color: var(--primary-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
            font-family: 'Georgia', serif;
        }

        /* Writing Types */
        .writing-types-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-blue);
        }

        .writing-types {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }

        .writing-type-box {
            background: var(--dark-surface);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            min-width: 180px;
            transition: transform 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .writing-type-box.story {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        .writing-type-box.description {
            border-color: var(--secondary-amber);
            background: rgba(255, 193, 7, 0.1);
        }

        .writing-type-box.letter {
            border-color: var(--accent-purple);
            background: rgba(103, 58, 183, 0.1);
        }

        .writing-type-box.report {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.1);
        }

        .writing-type-box:hover {
            transform: scale(1.05);
        }

        .writing-type-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            font-family: 'Georgia', serif;
        }

        .writing-type-box.story .writing-type-name {
            color: var(--primary-teal);
        }

        .writing-type-box.description .writing-type-name {
            color: var(--secondary-amber);
        }

        .writing-type-box.letter .writing-type-name {
            color: var(--accent-purple);
        }

        .writing-type-box.report .writing-type-name {
            color: var(--accent-pink);
        }

        .writing-type-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        /* Story Elements */
        .story-elements-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-green);
        }

        .elements-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .elements-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .element-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .element-box:hover {
            transform: translateY(-3px);
        }

        .element-box.character {
            border-color: var(--accent-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .element-box.setting {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .element-box.plot {
            border-color: var(--accent-orange);
            background: rgba(255, 152, 0, 0.1);
        }

        .element-box.conflict {
            border-color: var(--accent-pink);
            background: rgba(233, 30, 99, 0.1);
        }

        .element-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .element-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-family: 'Georgia', serif;
        }

        .element-box.character .element-name {
            color: var(--accent-blue);
        }

        .element-box.setting .element-name {
            color: var(--accent-green);
        }

        .element-box.plot .element-name {
            color: var(--accent-orange);
        }

        .element-box.conflict .element-name {
            color: var(--accent-pink);
        }

        /* Descriptive Techniques */
        .techniques-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .techniques-methods {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }

        .technique-box {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 120px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .technique-box:hover {
            transform: scale(1.05);
            border-color: var(--accent-purple);
        }

        .technique-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .technique-name {
            font-weight: bold;
            color: var(--accent-purple);
            margin-bottom: 5px;
            font-family: 'Georgia', serif;
        }

        /* Letter Formats */
        .letter-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-orange);
        }

        .letter-parts {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .letter-parts {
                grid-template-columns: 1fr;
            }
        }

        .letter-part {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .letter-part:hover {
            transform: translateY(-3px);
        }

        .letter-part.formal {
            border-color: var(--accent-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .letter-part.informal {
            border-color: var(--accent-orange);
            background: rgba(255, 152, 0, 0.1);
        }

        .letter-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .letter-part-name {
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Georgia', serif;
        }

        .letter-part.formal .letter-part-name {
            color: var(--accent-blue);
        }

        .letter-part.informal .letter-part-name {
            color: var(--accent-orange);
        }

        /* Report Structure */
        .report-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-cream);
        }

        .report-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }

        .report-step {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            min-width: 150px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .report-step:hover {
            transform: scale(1.05);
        }

        .report-step.introduction {
            border-color: var(--primary-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        .report-step.body {
            border-color: var(--secondary-amber);
            background: rgba(255, 193, 7, 0.1);
        }

        .report-step.conclusion {
            border-color: var(--accent-purple);
            background: rgba(103, 58, 183, 0.1);
        }

        .report-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .report-step-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-family: 'Georgia', serif;
        }

        .report-step.introduction .report-step-name {
            color: var(--primary-teal);
        }

        .report-step.body .report-step-name {
            color: var(--secondary-amber);
        }

        .report-step.conclusion .report-step-name {
            color: var(--accent-purple);
        }

        /* Creative Writing Table */
        .writing-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .writing-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-pink);
            border-bottom: 2px solid var(--accent-pink);
            font-family: 'Georgia', serif;
        }

        .writing-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .writing-table tr:hover {
            background: rgba(233, 30, 99, 0.05);
        }

        /* Interactive Practice */
        .interactive-practice {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .practice-title {
            color: var(--accent-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-family: 'Georgia', serif;
        }

        .practice-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .practice-button {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-purple);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Segoe UI', sans-serif;
        }

        .practice-button:hover {
            background: rgba(103, 58, 183, 0.1);
            transform: translateY(-2px);
        }

        .practice-display {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Writing Canvas */
        .writing-canvas {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--primary-teal);
            min-height: 200px;
        }

        .canvas-title {
            color: var(--primary-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-family: 'Georgia', serif;
        }

        .canvas-content {
            min-height: 150px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            font-family: 'Georgia', serif;
            line-height: 1.6;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
            font-family: 'Georgia', serif;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-teal), var(--secondary-amber), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
            font-family: 'Palatino', serif;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-teal);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .letter-parts {
                grid-template-columns: 1fr;
            }
            
            .elements-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Creative Writing Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        .typewriter {
            animation: typewriter 3s steps(40) forwards;
            overflow: hidden;
            white-space: nowrap;
        }
        
        @keyframes wordFlow {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }
        
        .word-flow {
            animation: wordFlow 3s linear infinite;
        }
        
        @keyframes creativeGlow {
            0% { box-shadow: 0 0 20px rgba(0, 150, 136, 0.4); }
            33% { box-shadow: 0 0 20px rgba(255, 193, 7, 0.4); }
            66% { box-shadow: 0 0 20px rgba(103, 58, 183, 0.4); }
            100% { box-shadow: 0 0 20px rgba(0, 150, 136, 0.4); }
        }
        
        .creative-glow {
            animation: creativeGlow 5s linear infinite;
        }
        
        @keyframes inkDrop {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .ink-drop {
            animation: inkDrop 1s ease forwards;
        }
        
        @keyframes storyBuild {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(180deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .story-build {
            animation: storyBuild 3s linear infinite;
        }
        
        @keyframes descriptionFlow {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }
        
        .description-flow {
            background: linear-gradient(90deg, transparent, rgba(255, 193, 7, 0.2), transparent);
            background-size: 200% 100%;
            animation: descriptionFlow 3s linear infinite;
        }
    </style>
</head>
<body>
    <!-- Creative Writing Pattern Background -->
    <div class="writing-bg" id="writingBg">
        <!-- Elements will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Creative Writing Journey</h1>
            <p class="welcome-subtitle">Unlock your imagination and discover the power of words! Learn to craft compelling stories, vivid descriptions, heartfelt letters, and informative reports. Develop your unique writing voice and express your creativity through various writing forms. From fantastical adventures to persuasive arguments, become a confident and creative writer!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">‚úçÔ∏èüìö‚ú®</span>
                <span class="topic-name">Stories, Descriptions, Letters, Reports</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Begin Writing Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 120</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0.8%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Writing tip display -->
                <div id="writingTip"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Writing Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const writingBg = document.getElementById('writingBg');
            
            // Create floating writing symbols
            const elements = ['‚úçÔ∏è', 'üìù', 'üìö', 'üìñ', 'üìÑ', 'üìã', '‚ú®', 'üåü', 'üí≠', 'üó£Ô∏è', 'üé≠', 'üìú', 'üñãÔ∏è', 'üìì'];
            
            for (let i = 0; i < 25; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = elements[Math.floor(Math.random() * elements.length)];
                element.style.left = `${Math.random() * 100}%`;
                element.style.top = `${Math.random() * 100}%`;
                element.style.animationDelay = `${Math.random() * 20}s`;
                element.style.fontSize = `${2 + Math.random() * 3}rem`;
                
                // Color different writing concepts
                if (['‚úçÔ∏è', 'üìù', 'üñãÔ∏è', 'üìì'].includes(element.textContent)) {
                    element.style.color = 'rgba(0, 150, 136, 0.1)'; // Teal for writing
                } else if (['üìö', 'üìñ', 'üìú'].includes(element.textContent)) {
                    element.style.color = 'rgba(255, 193, 7, 0.1)'; // Amber for books
                } else if (['‚ú®', 'üåü', 'üí≠', 'üé≠'].includes(element.textContent)) {
                    element.style.color = 'rgba(233, 30, 99, 0.1)'; // Pink for creativity
                } else {
                    element.style.color = 'rgba(103, 58, 183, 0.1)'; // Purple for communication
                }
                
                writingBg.appendChild(element);
            }
        }

        // Questions array - 120+ Creative Writing questions
        const questions = [
            // Story Writing Basics (1-20)
            {
                type: "story_basics",
                question: "What is the beginning of a story called?",
                options: ["Exposition", "Climax", "Resolution", "Conflict"],
                answer: "A",
                explanation: "Exposition introduces characters, setting, and basic situation."
            },
            {
                type: "story_basics",
                question: "What creates tension and interest in a story?",
                options: ["Conflict", "Characters", "Setting", "Dialogue"],
                answer: "A",
                explanation: "Conflict = problem/struggle that drives the plot forward."
            },
            {
                type: "story_basics",
                question: "What is the most exciting part of a story?",
                options: ["Climax", "Introduction", "Conclusion", "Rising action"],
                answer: "A",
                explanation: "Climax = highest point of tension, turning point of story."
            },
            {
                type: "story_basics",
                question: "What should a good story opening do?",
                options: ["Hook the reader", "Introduce all characters", "Solve the conflict", "Describe the ending"],
                answer: "A",
                explanation: "Opening should grab attention and make reader want to continue."
            },
            {
                type: "story_basics",
                question: "What does 'show, don't tell' mean in writing?",
                options: ["Use actions/dialogue instead of explanations", "Tell everything directly", "Use only dialogue", "Avoid descriptions"],
                answer: "A",
                explanation: "Show through actions, senses, feelings rather than stating facts."
            },
            // Character Development (21-40)
            {
                type: "character_development",
                question: "What makes a character seem real?",
                options: ["Flaws and strengths", "Perfect personality", "Always being right", "Never changing"],
                answer: "A",
                explanation: "Real characters have both good qualities and weaknesses."
            },
            {
                type: "character_development",
                question: "What is character motivation?",
                options: ["Why characters do what they do", "How characters look", "Where characters live", "When characters appear"],
                answer: "A",
                explanation: "Motivation = reasons behind characters' actions/decisions."
            },
            {
                type: "character_development",
                question: "How can you reveal character traits?",
                options: ["Through actions, thoughts, dialogue", "Only through narration", "Only through dialogue", "Only through descriptions"],
                answer: "A",
                explanation: "Characters revealed by what they do, say, think, and how others see them."
            },
            // Descriptive Writing (41-60)
            {
                type: "descriptive_writing",
                question: "What is descriptive writing?",
                options: ["Painting pictures with words", "Listing facts", "Writing arguments", "Telling stories"],
                answer: "A",
                explanation: "Descriptive writing creates vivid images using sensory details."
            },
            {
                type: "descriptive_writing",
                question: "Which sense is often underused in descriptions?",
                options: ["Smell", "Sight", "Sound", "Touch"],
                answer: "A",
                explanation: "Smell can evoke strong memories and atmosphere."
            },
            {
                type: "descriptive_writing",
                question: "What are sensory details?",
                options: ["Details using five senses", "Only visual details", "Emotional descriptions", "Character thoughts"],
                answer: "A",
                explanation: "Sensory details = sight, sound, smell, taste, touch."
            },
            {
                type: "descriptive_writing",
                question: "What makes a description effective?",
                options: ["Specific, vivid details", "Long, complex words", "Many adjectives", "Technical language"],
                answer: "A",
                explanation: "Specific details create clearer, more memorable images."
            },
            // Letter Writing (61-80)
            {
                type: "letter_writing",
                question: "What is the main difference between formal and informal letters?",
                options: ["Tone and structure", "Length only", "Paper quality", "Pen color"],
                answer: "A",
                explanation: "Formal = respectful, structured; Informal = friendly, casual."
            },
            {
                type: "letter_writing",
                question: "Where does your address go in a formal letter?",
                options: ["Top right corner", "Bottom left", "Center top", "Nowhere"],
                answer: "A",
                explanation: "Sender's address at top right, date below it."
            },
            {
                type: "letter_writing",
                question: "How should you end a formal letter?",
                options: ["Yours sincerely/faithfully", "Love from", "See you soon", "Bye"],
                answer: "A",
                explanation: "Formal closings: Yours sincerely (if name known), Yours faithfully (if name unknown)."
            },
            // Report Writing (81-100)
            {
                type: "report_writing",
                question: "What is the purpose of a report?",
                options: ["Present information clearly", "Tell a story", "Persuade readers", "Entertain"],
                answer: "A",
                explanation: "Reports present facts, findings, information objectively."
            },
            {
                type: "report_writing",
                question: "What should a report introduction do?",
                options: ["State purpose and main points", "Give all details", "Ask questions", "Tell a joke"],
                answer: "A",
                explanation: "Introduction states what the report is about and what it will cover."
            },
            {
                type: "report_writing",
                question: "How should report information be organized?",
                options: ["Logically with headings", "Randomly", "Alphabetically", "By color"],
                answer: "A",
                explanation: "Clear organization with headings helps readers find information."
            },
            // Dialogue Writing (101-120)
            {
                type: "dialogue_writing",
                question: "What does good dialogue do?",
                options: ["Reveals character and moves plot", "Fills space", "Sounds fancy", "Is always polite"],
                answer: "A",
                explanation: "Dialogue should sound natural and serve purpose in story."
            },
            {
                type: "dialogue_writing",
                question: "How do you show who is speaking?",
                options: ["Dialogue tags and actions", "Different fonts", "Colors", "Only names"],
                answer: "A",
                explanation: "Use tags (he said) and character actions to identify speakers."
            },
            // Writing Techniques (121-140)
            {
                type: "writing_techniques",
                question: "What is a simile?",
                options: ["Comparison using 'like' or 'as'", "Giving human traits to objects", "Repeating sounds", "Exaggeration"],
                answer: "A",
                explanation: "Simile: 'as brave as a lion', 'like a shining star'."
            },
            {
                type: "writing_techniques",
                question: "What is personification?",
                options: ["Giving human traits to non-human things", "Comparing two things", "Repeating words", "Understatement"],
                answer: "A",
                explanation: "Personification: 'the wind whispered', 'the sun smiled'."
            },
            // Planning and Revising (141-160)
            {
                type: "planning_revising",
                question: "Why is planning important in writing?",
                options: ["Organizes thoughts and structure", "Makes writing faster", "Is required", "Looks professional"],
                answer: "A",
                explanation: "Planning helps organize ideas before writing."
            },
            {
                type: "planning_revising",
                question: "What should you check when revising?",
                options: ["Clarity, organization, details", "Only spelling", "Only length", "Only handwriting"],
                answer: "A",
                explanation: "Revising improves content, organization, and clarity."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent creative thinking!",
            "Perfect writing technique!",
            "Great storytelling skills!",
            "You're a creative writing expert!",
            "Brilliant descriptive language!",
            "You're a wordsmith in training!",
            "Outstanding narrative understanding!",
            "Masterful character development!",
            "You think like a published author!",
            "Writing mastery achieved!"
        ];

        // Creative writing tips
        const writingTips = [
            "The most powerful stories often come from personal experiences!",
            "Using specific details makes descriptions more memorable!",
            "Characters should want something - this drives your plot!",
            "Read your writing aloud to catch awkward phrasing!",
            "The best writers are voracious readers!",
            "Don't edit while you write - get the ideas down first!",
            "Every story needs conflict - no conflict, no story!",
            "Show emotions through actions, not just stating them!"
        ];

        // Story genres
        const storyGenres = [
            {
                genre: "Fantasy",
                description: "Magic, mythical creatures, imaginary worlds",
                examples: "Harry Potter, The Chronicles of Narnia",
                icon: "üßô"
            },
            {
                genre: "Adventure",
                description: "Exciting journeys, risks, exploration",
                examples: "Treasure Island, The Jungle Book",
                icon: "üó∫Ô∏è"
            },
            {
                genre: "Mystery",
                description: "Puzzles, clues, solving crimes",
                examples: "Sherlock Holmes, Nancy Drew",
                icon: "üïµÔ∏è"
            },
            {
                genre: "Science Fiction",
                description: "Future technology, space, aliens",
                examples: "Star Wars, The Martian",
                icon: "üöÄ"
            },
            {
                genre: "Realistic Fiction",
                description: "Could happen in real life",
                examples: "Bridge to Terabithia, Wonder",
                icon: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶"
            },
            {
                genre: "Historical Fiction",
                description: "Set in the past with real historical elements",
                examples: "Little House on the Prairie, Number the Stars",
                icon: "üèõÔ∏è"
            }
        ];

        // Story elements
        const storyElements = [
            {
                element: "Characters",
                description: "People/animals in the story",
                types: "Protagonist (hero), Antagonist (villain), Supporting characters",
                purpose: "Drive the action and create emotional connection",
                icon: "üë§"
            },
            {
                element: "Setting",
                description: "Where and when story happens",
                types: "Time period, Location, Environment",
                purpose: "Creates atmosphere and context",
                icon: "üåç"
            },
            {
                element: "Plot",
                description: "Sequence of events",
                types: "Exposition, Rising action, Climax, Falling action, Resolution",
                purpose: "Provides structure and builds tension",
                icon: "üìà"
            },
            {
                element: "Conflict",
                description: "Problem or struggle",
                types: "Character vs. Character, Character vs. Self, Character vs. Nature, Character vs. Society",
                purpose: "Creates interest and drives story forward",
                icon: "‚öîÔ∏è"
            },
            {
                element: "Theme",
                description: "Main message or lesson",
                types: "Friendship, Courage, Growing up, Justice",
                purpose: "Gives deeper meaning to story",
                icon: "üí°"
            },
            {
                element: "Point of View",
                description: "Who tells the story",
                types: "First person (I), Third person (he/she), Omniscient (all-knowing)",
                purpose: "Determines how readers experience story",
                icon: "üëÅÔ∏è"
            }
        ];

        // Descriptive techniques
        const descriptiveTechniques = [
            {
                technique: "Sensory Details",
                description: "Appealing to five senses",
                example: "The crunchy leaves smelled of autumn and earth.",
                icon: "üëÉ"
            },
            {
                technique: "Simile",
                description: "Comparison using 'like' or 'as'",
                example: "Her smile was as bright as the summer sun.",
                icon: "üîç"
            },
            {
                technique: "Metaphor",
                description: "Direct comparison",
                example: "The classroom was a zoo during break time.",
                icon: "‚û°Ô∏è"
            },
            {
                technique: "Personification",
                description: "Giving human traits to non-human things",
                example: "The wind whispered secrets through the trees.",
                icon: "üë§"
            },
            {
                technique: "Hyperbole",
                description: "Exaggeration for effect",
                example: "I've told you a million times to clean your room!",
                icon: "üìà"
            },
            {
                technique: "Onomatopoeia",
                description: "Words that sound like what they mean",
                example: "The bacon sizzled in the pan.",
                icon: "üîä"
            }
        ];

        // Letter types and formats
        const letterTypes = [
            {
                type: "Formal Letter",
                purpose: "Official/business communication",
                format: "Address, date, salutation, body, closing, signature",
                example: "Job application, Complaint letter, School letter",
                icon: "üìß"
            },
            {
                type: "Informal Letter",
                purpose: "Personal communication",
                format: "Greeting, body, closing, signature",
                example: "Letter to friend, Family letter, Thank you note",
                icon: "üíå"
            },
            {
                type: "Persuasive Letter",
                purpose: "Convince reader of something",
                format: "Introduction, arguments, conclusion",
                example: "Letter to editor, Proposal, Recommendation",
                icon: "üó£Ô∏è"
            },
            {
                type: "Descriptive Letter",
                purpose: "Share experiences vividly",
                format: "Greeting, descriptive body, closing",
                example: "Travel letter, Event description",
                icon: "üìù"
            }
        ];

        // Report types and structures
        const reportTypes = [
            {
                type: "Book Report",
                structure: "Introduction, Summary, Analysis, Conclusion",
                elements: "Title, author, characters, plot, personal response",
                icon: "üìö"
            },
            {
                type: "Science Report",
                structure: "Hypothesis, Method, Results, Conclusion",
                elements: "Title, purpose, procedure, findings, analysis",
                icon: "üî¨"
            },
            {
                type: "News Report",
                structure: "Headline, Lead, Body, Conclusion",
                elements: "Who, what, when, where, why, how",
                icon: "üì∞"
            },
            {
                type: "Event Report",
                structure: "Introduction, Description, Analysis, Recommendations",
                elements: "Event details, observations, outcomes, suggestions",
                icon: "üé≠"
            }
        ];

        // Writing prompts
        const writingPrompts = [
            {
                type: "Story",
                prompt: "Write about finding a mysterious key that opens a door to another world.",
                genre: "Fantasy/Adventure",
                elements: "Character discovery, magical setting, conflict with unknown"
            },
            {
                type: "Description",
                prompt: "Describe your favorite place using all five senses.",
                focus: "Sensory details, emotional connection, atmosphere"
            },
            {
                type: "Letter",
                prompt: "Write a letter to your future self 10 years from now.",
                tone: "Reflective, hopeful, personal"
            },
            {
                type: "Report",
                prompt: "Report on the most interesting thing you learned this week.",
                structure: "Introduction, facts, explanation, conclusion"
            }
        ];

        // Character archetypes
        const characterArchetypes = [
            {
                archetype: "The Hero",
                traits: "Brave, determined, faces challenges",
                examples: "Harry Potter, Wonder Woman, Luke Skywalker",
                icon: "ü¶∏"
            },
            {
                archetype: "The Mentor",
                traits: "Wise, guiding, teaches hero",
                examples: "Dumbledore, Obi-Wan Kenobi, Mr. Miyagi",
                icon: "üë¥"
            },
            {
                archetype: "The Villain",
                traits: "Opposes hero, has own motivations",
                examples: "Voldemort, Darth Vader, Captain Hook",
                icon: "üëπ"
            },
            {
                archetype: "The Sidekick",
                traits: "Loyal, supportive, sometimes comic relief",
                examples: "Ron Weasley, Samwise Gamgee, Donkey (Shrek)",
                icon: "ü§ù"
            },
            {
                archetype: "The Rebel",
                traits: "Challenges authority, independent thinker",
                examples: "Katniss Everdeen, Robin Hood, Ferris Bueller",
                icon: "‚úä"
            },
            {
                archetype: "The Innocent",
                traits: "Pure, optimistic, sees good in world",
                examples: "Forrest Gump, Dorothy (Wizard of Oz), Paddington Bear",
                icon: "üòá"
            }
        ];

        // Story beginnings examples
        const storyBeginnings = [
            "It was a dark and stormy night when the power went out.",
            "The map had been in my family for generations, but no one knew what it led to.",
            "I never expected to find a dragon egg in my backyard.",
            "The letter arrived on a Tuesday, marked with a strange symbol.",
            "Everyone in town knew the old house was haunted, but I had to find out for myself."
        ];

        // Vivid vocabulary for descriptions
        const vividVocabulary = {
            "Sight": ["glimmering", "shadowy", "radiant", "dazzling", "murky", "vibrant", "pale", "glossy"],
            "Sound": ["echoing", "muffled", "booming", "whispering", "screeching", "melodic", "hushed", "raspy"],
            "Smell": ["pungent", "fragrant", "musty", "aromatic", "acrid", "sweet", "earthy", "fresh"],
            "Touch": ["smooth", "coarse", "prickly", "silky", "gritty", "spongy", "slimy", "fuzzy"],
            "Taste": ["bitter", "savory", "tangy", "spicy", "bland", "juicy", "crisp", "creamy"]
        };

        // Letter templates
        const letterTemplates = {
            "Formal": `[Your Address]
[Date]

[Recipient's Address]

Dear [Title] [Last Name],

[Body of letter - state purpose clearly and politely]

Yours sincerely,

[Your Signature]
[Your Printed Name]`,

            "Informal": `Dear [First Name],

[Body of letter - friendly and personal]

Best wishes/Love,

[Your First Name]`
        };

        // Report templates
        const reportTemplates = {
            "Book Report": `Title: [Book Title]
Author: [Author Name]

Introduction:
[Brief introduction about the book]

Summary:
[What the book is about - main characters and plot]

Analysis:
[What you liked/disliked, characters' development, themes]

Conclusion:
[Your overall opinion and recommendation]`,

            "Science Report": `Title: [Experiment Title]
Date: [Date]

Purpose:
[What you wanted to find out]

Hypothesis:
[What you predicted would happen]

Method:
[Steps you followed]

Results:
[What actually happened]

Conclusion:
[What you learned and whether hypothesis was correct]`
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const writingTip = document.getElementById('writingTip');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6CreativeWriting');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6CreativeWriting', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6CreativeWriting_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6CreativeWriting_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a creative writing expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent writing skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing different writing forms!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review story elements and descriptive techniques!";
            } else {
                scoreMessage.textContent = "Keep exploring! Creative writing is about finding your unique voice!";
            }
        }

        // Create writing tip display
        function createWritingTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'writing-tip';
            
            tipDiv.innerHTML = `<strong>Writer's Tip:</strong> ${writingTips[Math.floor(Math.random() * writingTips.length)]}`;
            
            return tipDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "story_basics": "üìñ",
                "character_development": "üë§",
                "descriptive_writing": "üé®",
                "letter_writing": "üíå",
                "report_writing": "üìã",
                "dialogue_writing": "üó£Ô∏è",
                "writing_techniques": "‚ú®",
                "planning_revising": "üîç"
            };
            
            let conceptName = "Story Basics";
            let conceptIcon = "üìñ";
            
            if (question.type.includes("story_basics")) {
                conceptName = "Story Writing";
                conceptIcon = conceptIcons.story_basics;
            } else if (question.type.includes("character_development")) {
                conceptName = "Character Development";
                conceptIcon = conceptIcons.character_development;
            } else if (question.type.includes("descriptive_writing")) {
                conceptName = "Descriptive Writing";
                conceptIcon = conceptIcons.descriptive_writing;
            } else if (question.type.includes("letter_writing")) {
                conceptName = "Letter Writing";
                conceptIcon = conceptIcons.letter_writing;
            } else if (question.type.includes("report_writing")) {
                conceptName = "Report Writing";
                conceptIcon = conceptIcons.report_writing;
            } else if (question.type.includes("dialogue_writing")) {
                conceptName = "Dialogue Writing";
                conceptIcon = conceptIcons.dialogue_writing;
            } else if (question.type.includes("writing_techniques")) {
                conceptName = "Writing Techniques";
                conceptIcon = conceptIcons.writing_techniques;
            } else if (question.type.includes("planning_revising")) {
                conceptName = "Planning & Revising";
                conceptIcon = conceptIcons.planning_revising;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("story_basics")) {
                label.textContent = "Plot, structure, and narrative techniques";
            } else if (question.type.includes("character_development")) {
                label.textContent = "Creating believable characters with depth";
            } else if (question.type.includes("descriptive_writing")) {
                label.textContent = "Painting pictures with words and sensory details";
            } else if (question.type.includes("letter_writing")) {
                label.textContent = "Formal and informal communication";
            } else if (question.type.includes("report_writing")) {
                label.textContent = "Organizing and presenting information clearly";
            } else if (question.type.includes("dialogue_writing")) {
                label.textContent = "Writing natural conversations that reveal character";
            } else if (question.type.includes("writing_techniques")) {
                label.textContent = "Figurative language and stylistic devices";
            } else if (question.type.includes("planning_revising")) {
                label.textContent = "Organizing ideas and improving drafts";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create creative writing visualization
        function createWritingVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const randomStoryBeginning = storyBeginnings[Math.floor(Math.random() * storyBeginnings.length)];
            const randomGenre = storyGenres[Math.floor(Math.random() * storyGenres.length)];
            const randomCharacter = characterArchetypes[Math.floor(Math.random() * characterArchetypes.length)];
            const randomPrompt = writingPrompts[Math.floor(Math.random() * writingPrompts.length)];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-pink); font-family: 'Georgia', serif;">Creative Writing Workshop</h3>
                
                <div class="writing-types-container creative-glow">
                    <div class="display-title">Four Types of Creative Writing</div>
                    
                    <div class="writing-types">
                        <div class="writing-type-box story" onclick="showWritingType('Story')">
                            <div class="writing-type-icon">üìñ</div>
                            <div class="writing-type-name">Story Writing</div>
                            <div class="writing-type-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                                Narratives with plot & characters
                            </div>
                        </div>
                        <div class="writing-type-box description" onclick="showWritingType('Description')">
                            <div class="writing-type-icon">üé®</div>
                            <div class="writing-type-name">Descriptive Writing</div>
                            <div class="writing-type-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                                Vivid images using senses
                            </div>
                        </div>
                        <div class="writing-type-box letter" onclick="showWritingType('Letter')">
                            <div class="writing-type-icon">üíå</div>
                            <div class="writing-type-name">Letter Writing</div>
                            <div class="writing-type-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                                Formal & informal communication
                            </div>
                        </div>
                        <div class="writing-type-box report" onclick="showWritingType('Report')">
                            <div class="writing-type-icon">üìã</div>
                            <div class="writing-type-name">Report Writing</div>
                            <div class="writing-type-label" style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">
                                Organized information presentation
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="writing-display">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--primary-teal); font-weight: bold;">Writing Prompt of the Day</div>
                    <div style="font-size: 1.2rem; margin-bottom: 15px; font-style: italic; color: var(--text-primary);">
                        "${randomPrompt.prompt}"
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        Type: ${randomPrompt.type} | ${randomPrompt.genre || randomPrompt.focus || randomPrompt.tone || randomPrompt.structure}
                    </div>
                </div>
                
                <div class="story-elements-container">
                    <div class="display-title">Essential Story Elements</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Click on elements to learn about building great stories
                    </div>
                    
                    <div class="elements-grid">
                        ${storyElements.map((element, idx) => `
                            <div class="element-box ${element.element.toLowerCase()}" onclick="showStoryElement('${element.element}')">
                                <div class="element-icon">${element.icon}</div>
                                <div class="element-name">${element.element}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">${element.description}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="techniques-container">
                    <div class="display-title">Descriptive Writing Techniques</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Tools for painting vivid pictures with words
                    </div>
                    
                    <div class="techniques-methods">
                        ${descriptiveTechniques.slice(0, 6).map((technique, idx) => `
                            <div class="technique-box" onclick="showDescriptiveTechnique('${technique.technique}')">
                                <div class="technique-icon">${technique.icon}</div>
                                <div class="technique-name">${technique.technique}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">${technique.description}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="letter-container">
                    <div class="display-title">Letter Writing Formats</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        When to use formal vs. informal styles
                    </div>
                    
                    <div class="letter-parts">
                        ${letterTypes.map((letter, idx) => `
                            <div class="letter-part ${letter.type.includes('Formal') ? 'formal' : 'informal'}" onclick="showLetterType('${letter.type}')">
                                <div class="letter-icon">${letter.icon}</div>
                                <div class="letter-part-name">${letter.type}</div>
                                <div style="font-size: 0.9rem; margin: 10px 0;">${letter.purpose}</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Example: ${letter.example}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="report-container">
                    <div class="display-title">Report Writing Structure</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Organized presentation of information
                    </div>
                    
                    <div class="report-steps">
                        ${reportTypes.map((report, idx) => `
                            <div class="report-step ${report.type.includes('Book') ? 'introduction' : report.type.includes('Science') ? 'body' : 'conclusion'}" onclick="showReportType('${report.type}')">
                                <div class="report-icon">${report.icon}</div>
                                <div class="report-step-name">${report.type}</div>
                                <div style="font-size: 0.9rem; margin: 10px 0;">Structure: ${report.structure}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="writing-canvas ink-drop">
                    <div class="canvas-title">Story Starter</div>
                    <div class="canvas-content">
                        <div style="margin-bottom: 15px;">
                            <strong>Genre:</strong> ${randomGenre.genre}<br>
                            <strong>Character:</strong> ${randomCharacter.archetype}<br>
                            <strong>Opening:</strong> "${randomStoryBeginning}"
                        </div>
                        <div style="font-style: italic; color: var(--text-secondary);">
                            Try continuing this story! What happens next? Who is the main character? What problem do they face?
                        </div>
                    </div>
                </div>
                
                <table class="writing-table">
                    <thead>
                        <tr>
                            <th>Story Genre</th>
                            <th>Key Features</th>
                            <th>Examples</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${storyGenres.slice(0, 4).map((genre, idx) => `
                            <tr>
                                <td style="font-weight: bold; color: ${genre.genre === 'Fantasy' ? 'var(--primary-teal)' : genre.genre === 'Adventure' ? 'var(--secondary-amber)' : genre.genre === 'Mystery' ? 'var(--accent-purple)' : 'var(--accent-blue)'};">${genre.genre}</td>
                                <td>${genre.description}</td>
                                <td style="font-style: italic;">${genre.examples}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="real-world-example" style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid var(--accent-orange); font-style: italic; color: var(--text-secondary);">
                    <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Real-World Writing Application:</div>
                    "Imagine writing a story about a young detective solving a school mystery. Start with exposition (introduce detective, school setting). Add rising action (mysterious events, clues). Build to climax (detective confronts culprit). Add falling action (explanation of mystery). End with resolution (lesson learned, return to normal). Use descriptive language for settings (musty library, echoing halls) and characters (determined detective, nervous suspect). Include realistic dialogue. This shows how all writing elements work together!"
                    <div style="margin-top: 10px;">
                        <strong>Key concepts:</strong> Every story needs structure. Descriptions create atmosphere. Characters drive plot. Revision improves clarity.
                    </div>
                </div>
                
                <div class="interactive-practice">
                    <div class="practice-title">Interactive Writing Practice</div>
                    <div class="practice-controls">
                        <div class="practice-button" onclick="identifyWritingType()">Identify Writing Type</div>
                        <div class="practice-button" onclick="improveDescription()">Improve Description</div>
                        <div class="practice-button" onclick="writeDialogue()">Write Dialogue</div>
                        <div class="practice-button" onclick="planStory()">Plan a Story</div>
                    </div>
                    <div class="practice-display" id="practiceDisplay">
                        Click buttons above to practice creative writing
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-pink);">
                    <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 10px;">Quick Writing Practice:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Write an opening sentence for a mystery story.<br>
                        2. Describe your classroom using three different senses.<br>
                        3. Write the greeting for a formal letter to your principal.<br>
                        4. What are the main parts of a book report?<br>
                        5. Give an example of personification.
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--primary-teal);">
                    <div style="color: var(--primary-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Writer's Checklist</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Stories:</strong> Characters + Setting + Plot + Conflict + Resolution<br>
                        <strong>Descriptions:</strong> Use all five senses + Show don't tell<br>
                        <strong>Letters:</strong> Appropriate tone + Clear purpose + Correct format<br>
                        <strong>Reports:</strong> Clear structure + Facts + Logical organization
                    </div>
                </div>
                
                <div class="vivid-vocabulary" style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--secondary-amber);">
                    <div class="display-title">Vivid Vocabulary Bank</div>
                    <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary);">
                        Words to make your writing more descriptive
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
                        <div>
                            <div style="color: var(--accent-blue); font-weight: bold; margin-bottom: 5px;">Sight Words:</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">${vividVocabulary.Sight.slice(0, 4).join(', ')}</div>
                        </div>
                        <div>
                            <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 5px;">Sound Words:</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">${vividVocabulary.Sound.slice(0, 4).join(', ')}</div>
                        </div>
                        <div>
                            <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 5px;">Touch Words:</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">${vividVocabulary.Touch.slice(0, 4).join(', ')}</div>
                        </div>
                        <div>
                            <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 5px;">Taste Words:</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">${vividVocabulary.Taste.slice(0, 4).join(', ')}</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; color: var(--text-secondary); font-size: 0.8rem; margin-top: 10px;">
                        Tip: Use specific words instead of general ones (e.g., "sprinted" instead of "ran fast")
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper functions
        function getIconForGenre(genreName) {
            const iconMap = {
                "Fantasy": "üßô",
                "Adventure": "üó∫Ô∏è",
                "Mystery": "üïµÔ∏è",
                "Science Fiction": "üöÄ",
                "Realistic Fiction": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶",
                "Historical Fiction": "üèõÔ∏è"
            };
            return iconMap[genreName] || "üìñ";
        }

        // Global functions for interactive practice
        window.showWritingType = function(typeName) {
            let info = "";
            
            if (typeName === "Story") {
                info = "Story Writing\n\nPurpose: To entertain, engage, and sometimes teach through narrative.\n\nKey Elements:\n‚Ä¢ Characters (who)\n‚Ä¢ Setting (where/when)\n‚Ä¢ Plot (what happens)\n‚Ä¢ Conflict (problem)\n‚Ä¢ Resolution (solution)\n\nTips:\n‚Ä¢ Start with an interesting hook\n‚Ä¢ Show, don't tell\n‚Ä¢ Create believable characters\n‚Ä¢ Build tension toward climax";
            } else if (typeName === "Description") {
                info = "Descriptive Writing\n\nPurpose: To create vivid images and sensory experiences.\n\nKey Techniques:\n‚Ä¢ Sensory details (5 senses)\n‚Ä¢ Figurative language (similes, metaphors)\n‚Ä¢ Specific, concrete details\n‚Ä¢ Show emotions through descriptions\n\nTips:\n‚Ä¢ Use all five senses\n‚Ä¢ Be specific, not general\n‚Ä¢ Create mood through word choice\n‚Ä¢ Show, don't tell";
            } else if (typeName === "Letter") {
                info = "Letter Writing\n\nPurpose: To communicate formally or informally.\n\nTypes:\n‚Ä¢ Formal: Official, respectful tone\n‚Ä¢ Informal: Friendly, personal tone\n‚Ä¢ Persuasive: Convince reader\n‚Ä¢ Descriptive: Share experiences\n\nFormat:\n‚Ä¢ Greeting/Salutation\n‚Ä¢ Body (main content)\n‚Ä¢ Closing\n‚Ä¢ Signature";
            } else if (typeName === "Report") {
                info = "Report Writing\n\nPurpose: To present information clearly and objectively.\n\nStructure:\n‚Ä¢ Introduction (what and why)\n‚Ä¢ Body (facts, findings)\n‚Ä¢ Conclusion (summary, recommendations)\n\nTypes:\n‚Ä¢ Book reports\n‚Ä¢ Science reports\n‚Ä¢ News reports\n‚Ä¢ Event reports\n\nTips:\n‚Ä¢ Use clear headings\n‚Ä¢ Present facts objectively\n‚Ä¢ Organize logically\n‚Ä¢ Include evidence";
            }
            
            alert(`${typeName} Writing\n\n${info}`);
        };

        window.showStoryElement = function(elementName) {
            const element = storyElements.find(e => e.element === elementName);
            if (!element) return;
            
            alert(`${element.element}\n\nDescription: ${element.description}\n\nTypes: ${element.types}\n\nPurpose: ${element.purpose}\n\nExample: In 'Harry Potter':\n‚Ä¢ Characters: Harry, Hermione, Ron, Voldemort\n‚Ä¢ Setting: Hogwarts, magical world\n‚Ä¢ Plot: Harry's journey to defeat Voldemort\n‚Ä¢ Conflict: Good vs. evil, wizard vs. dark forces\n‚Ä¢ Theme: Friendship, courage, choice`);
        };

        window.showDescriptiveTechnique = function(techniqueName) {
            const technique = descriptiveTechniques.find(t => t.technique === techniqueName);
            if (!technique) return;
            
            alert(`${technique.technique}\n\nDescription: ${technique.description}\n\nExample: ${technique.example}\n\nHow to use: ${getTechniqueUsage(techniqueName)}`);
        };

        function getTechniqueUsage(techniqueName) {
            const usage = {
                "Sensory Details": "Instead of 'The food was good,' try 'The warm, buttery popcorn melted in my mouth with a satisfying crunch.'",
                "Simile": "Creates vivid comparisons: 'Her voice was like music' or 'He ran as fast as a cheetah.'",
                "Metaphor": "Stronger than simile: 'The classroom was a beehive of activity' or 'Time is a thief.'",
                "Personification": "Makes descriptions more engaging: 'The old house groaned in the wind' or 'The flowers danced in the breeze.'",
                "Hyperbole": "Adds humor or emphasis: 'I'm so hungry I could eat a horse' or 'This bag weighs a ton.'",
                "Onomatopoeia": "Brings sounds to life: 'The bacon sizzled,' 'The leaves crunched,' 'The bee buzzed.'"
            };
            return usage[techniqueName] || "Use to make your writing more vivid and engaging.";
        }

        window.showLetterType = function(typeName) {
            const letter = letterTypes.find(l => l.type === typeName);
            if (!letter) return;
            
            const template = letterTemplates[typeName.includes("Formal") ? "Formal" : "Informal"];
            
            alert(`${letter.type}\n\nPurpose: ${letter.purpose}\n\nFormat: ${letter.format}\n\nExample: ${letter.example}\n\nTemplate:\n\n${template}`);
        };

        window.showReportType = function(typeName) {
            const report = reportTypes.find(r => r.type === typeName);
            if (!report) return;
            
            const template = reportTemplates[typeName];
            
            alert(`${report.type}\n\nStructure: ${report.structure}\n\nElements: ${report.elements}\n\nTemplate:\n\n${template}`);
        };

        window.identifyWritingType = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const examples = [
                {
                    text: "Dear Grandma, I had such a wonderful time visiting you last weekend. The cookies were delicious and I loved helping in your garden.",
                    type: "Informal Letter",
                    explanation: "Personal letter to family member with friendly tone"
                },
                {
                    text: "The ancient forest was alive with whispering leaves and dancing shadows. Sunlight filtered through the canopy like liquid gold.",
                    type: "Descriptive Writing",
                    explanation: "Vivid sensory description creating atmosphere"
                },
                {
                    text: "Book Report: 'The Secret Garden' by Frances Hodgson Burnett. This classic novel tells the story of Mary Lennox...",
                    type: "Report Writing",
                    explanation: "Structured presentation of information about a book"
                },
                {
                    text: "When Maya found the mysterious locket, she never imagined it would unlock secrets about her family's past.",
                    type: "Story Writing",
                    explanation: "Narrative opening with character and potential conflict"
                }
            ];
            
            const currentExample = examples[Math.floor(Math.random() * examples.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--primary-teal);">Identify the Writing Type</div>
                    <div style="font-size: 1.2rem; margin-bottom: 15px; font-style: italic; color: var(--text-primary); padding: 15px; background: rgba(0, 150, 136, 0.1); border-radius: 8px;">
                        "${currentExample.text}"
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin: 20px 0;">
                        ${["Story Writing", "Descriptive Writing", "Informal Letter", "Formal Letter", "Report Writing", "Persuasive Writing"].map((type, idx) => `
                            <div class="option" onclick="checkWritingType(this, '${type}', '${currentExample.type}')">
                                <div class="option-letter">${String.fromCharCode(65 + idx)}</div>
                                <div class="option-text">${type}</div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div id="writingTypeResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                    <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Hint:</strong> Look at purpose, tone, and structure of the writing.
                    </div>
                </div>
            `;
            
            window.currentWritingExplanation = currentExample.explanation;
        };

        window.checkWritingType = function(element, selectedType, correctType) {
            const resultDiv = document.getElementById('writingTypeResult');
            if (!resultDiv) return;
            
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            if (selectedType === correctType) {
                element.classList.add('correct');
                resultDiv.textContent = `Correct! This is ${correctType}. ${window.currentWritingExplanation}`;
                resultDiv.style.color = 'var(--primary-teal)';
            } else {
                element.classList.add('incorrect');
                // Find and highlight correct option
                options.forEach(opt => {
                    if (opt.querySelector('.option-text').textContent === correctType) {
                        opt.classList.add('correct');
                    }
                });
                resultDiv.textContent = `Incorrect. This is ${correctType}. ${window.currentWritingExplanation}`;
                resultDiv.style.color = 'var(--accent-orange)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.improveDescription = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const weakDescriptions = [
                {
                    weak: "The room was nice.",
                    improved: "The cozy room was filled with warm sunlight that danced on the polished wooden floors.",
                    explanation: "Added sensory details (cozy, warm sunlight, polished) and action (danced)"
                },
                {
                    weak: "The dog was big.",
                    improved: "The enormous dog stood as tall as my waist, with fur as soft as velvet and eyes that sparkled with intelligence.",
                    explanation: "Added specific size comparison, touch detail (velvet), and character detail (intelligent eyes)"
                },
                {
                    weak: "It was a rainy day.",
                    improved: "Raindrops tapped rhythmically against the windowpane while gray clouds blanketed the sky, casting a soft, melancholic light over the street.",
                    explanation: "Added sound (tapped), visual details (gray clouds, soft light), and mood (melancholic)"
                }
            ];
            
            const currentDescription = weakDescriptions[Math.floor(Math.random() * weakDescriptions.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--secondary-amber);">Improve the Description</div>
                    <div style="margin-bottom: 15px;">
                        <div style="font-weight: bold; color: var(--accent-orange); margin-bottom: 10px;">Weak Description:</div>
                        <div style="font-size: 1.2rem; font-style: italic; color: var(--text-primary); padding: 15px; background: rgba(255, 152, 0, 0.1); border-radius: 8px;">
                            "${currentDescription.weak}"
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <textarea id="improvedDescription" placeholder="Write your improved version here..." style="width: 100%; min-height: 100px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; resize: vertical;"></textarea>
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkImprovedDescription('${currentDescription.improved.replace(/'/g, "\\'")}')">Check Improvement</button>
                        <button class="btn btn-small btn-outline" onclick="showDescriptionTips()">Tips for Improvement</button>
                        <button class="btn btn-small btn-outline" onclick="showImprovedExample('${currentDescription.improved.replace(/'/g, "\\'")}', '${currentDescription.explanation.replace(/'/g, "\\'")}')">Example</button>
                    </div>
                    
                    <div id="descriptionResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        window.checkImprovedDescription = function(exampleImproved) {
            const descriptionInput = document.getElementById('improvedDescription');
            const resultDiv = document.getElementById('descriptionResult');
            
            if (!descriptionInput || !resultDiv) return;
            
            const userDescription = descriptionInput.value.trim();
            
            if (userDescription.length < 10) {
                resultDiv.textContent = "Try writing a longer, more detailed description!";
                resultDiv.style.color = 'var(--accent-orange)';
            } else if (userDescription.split(' ').length < 8) {
                resultDiv.textContent = "Good start! Try adding more descriptive words and details.";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else {
                // Check for descriptive elements
                const wordCount = userDescription.split(' ').length;
                const originalWordCount = exampleImproved.split(' ').length;
                
                if (wordCount >= originalWordCount * 0.7) {
                    resultDiv.textContent = "Excellent! You've added vivid details to improve the description!";
                    resultDiv.style.color = 'var(--primary-teal)';
                } else {
                    resultDiv.textContent = "Good improvement! Remember: more specific details = better description.";
                    resultDiv.style.color = 'var(--secondary-amber)';
                }
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showDescriptionTips = function() {
            const resultDiv = document.getElementById('descriptionResult');
            if (resultDiv) {
                resultDiv.innerHTML = `
                    <div style="text-align: left;">
                        <strong>Tips for Better Descriptions:</strong><br>
                        1. Use specific details instead of general words<br>
                        2. Include sensory details (sight, sound, smell, touch, taste)<br>
                        3. Use similes and metaphors for comparison<br>
                        4. Show emotions through descriptions<br>
                        5. Create atmosphere with word choice
                    </div>
                `;
                resultDiv.style.color = 'var(--secondary-amber)';
            }
        };

        window.showImprovedExample = function(improved, explanation) {
            const resultDiv = document.getElementById('descriptionResult');
            if (resultDiv) {
                resultDiv.innerHTML = `
                    <div style="text-align: left;">
                        <strong>Example Improved Version:</strong><br>
                        "${improved}"<br><br>
                        <strong>Why it's better:</strong> ${explanation}
                    </div>
                `;
                resultDiv.style.color = 'var(--accent-purple)';
            }
        };

        window.writeDialogue = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const scenarios = [
                {
                    scenario: "Two friends discovering a hidden room in their school",
                    characters: "Alex and Jordan",
                    prompt: "Write dialogue showing their surprise and curiosity"
                },
                {
                    scenario: "A student trying to convince a teacher to extend a deadline",
                    characters: "Student and Teacher",
                    prompt: "Write persuasive yet respectful dialogue"
                },
                {
                    scenario: "Siblings arguing about who should do the dishes",
                    characters: "Older sibling and younger sibling",
                    prompt: "Write realistic sibling argument with resolution"
                }
            ];
            
            const currentScenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-purple);">Write Dialogue</div>
                    <div style="margin-bottom: 15px;">
                        <div style="font-weight: bold; color: var(--accent-blue); margin-bottom: 10px;">Scenario:</div>
                        <div style="font-size: 1.1rem; color: var(--text-primary);">
                            ${currentScenario.scenario}
                        </div>
                        <div style="font-weight: bold; color: var(--accent-green); margin: 10px 0;">Characters:</div>
                        <div style="color: var(--text-secondary);">${currentScenario.characters}</div>
                        <div style="font-weight: bold; color: var(--accent-orange); margin: 10px 0;">Prompt:</div>
                        <div style="color: var(--text-secondary); font-style: italic;">${currentScenario.prompt}</div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <textarea id="dialogueWriting" placeholder="Write your dialogue here. Remember to use quotation marks and dialogue tags." style="width: 100%; min-height: 150px; padding: 15px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 8px; color: var(--text-primary); font-size: 1rem; resize: vertical;"></textarea>
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkDialogue()">Check Dialogue</button>
                        <button class="btn btn-small btn-outline" onclick="showDialogueTips()">Dialogue Tips</button>
                    </div>
                    
                    <div id="dialogueResult" style="margin-top: 20px; min-height: 30px; font-weight: bold;"></div>
                </div>
            `;
        };

        window.checkDialogue = function() {
            const dialogueInput = document.getElementById('dialogueWriting');
            const resultDiv = document.getElementById('dialogueResult');
            
            if (!dialogueInput || !resultDiv) return;
            
            const userDialogue = dialogueInput.value.trim();
            
            // Basic checks
            const hasQuotes = userDialogue.includes('"') || userDialogue.includes("'");
            const hasDialogueTags = /said|asked|replied|exclaimed|whispered|shouted/i.test(userDialogue);
            const lineCount = (userDialogue.match(/\n/g) || []).length;
            
            if (userDialogue.length < 20) {
                resultDiv.textContent = "Try writing more dialogue - conversations usually have at least a few exchanges!";
                resultDiv.style.color = 'var(--accent-orange)';
            } else if (!hasQuotes) {
                resultDiv.textContent = "Remember to use quotation marks around spoken words!";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else if (!hasDialogueTags && lineCount > 1) {
                resultDiv.textContent = "Good dialogue! Consider adding dialogue tags (said, asked) so readers know who's speaking.";
                resultDiv.style.color = 'var(--secondary-amber)';
            } else {
                resultDiv.textContent = "Excellent dialogue writing! You've created realistic conversation with proper formatting!";
                resultDiv.style.color = 'var(--primary-teal)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showDialogueTips = function() {
            const resultDiv = document.getElementById('dialogueResult');
            if (resultDiv) {
                resultDiv.innerHTML = `
                    <div style="text-align: left;">
                        <strong>Dialogue Writing Tips:</strong><br>
                        1. Use quotation marks for spoken words<br>
                        2. Start new paragraph for each speaker<br>
                        3. Use dialogue tags (said, asked) to identify speakers<br>
                        4. Make dialogue sound natural - people don't always speak in perfect sentences<br>
                        5. Use actions to show who's speaking: <em>Sarah folded her arms. "I don't believe you."</em><br>
                        6. Dialogue should reveal character and move the story forward
                    </div>
                `;
                resultDiv.style.color = 'var(--accent-purple)';
            }
        };

        window.planStory = function() {
            const practiceDisplay = document.getElementById('practiceDisplay');
            if (!practiceDisplay) return;
            
            const storyPrompts = [
                "A character discovers they can talk to animals",
                "A mysterious package arrives with no return address",
                "Someone finds a map to a place that shouldn't exist",
                "A character wakes up with a strange new ability"
            ];
            
            const currentPrompt = storyPrompts[Math.floor(Math.random() * storyPrompts.length)];
            
            practiceDisplay.innerHTML = `
                <div style="text-align: center; width: 100%;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px; color: var(--accent-pink);">Plan a Story</div>
                    <div style="margin-bottom: 15px;">
                        <div style="font-weight: bold; color: var(--accent-teal); margin-bottom: 10px;">Story Prompt:</div>
                        <div style="font-size: 1.2rem; font-style: italic; color: var(--text-primary); padding: 15px; background: rgba(233, 30, 99, 0.1); border-radius: 8px;">
                            "${currentPrompt}"
                        </div>
                    </div>
                    
                    <div style="text-align: left; margin: 20px 0;">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--accent-blue); font-weight: bold;">Main Character:</label>
                            <input type="text" id="storyCharacter" placeholder="Who is your main character?" style="width: 100%; padding: 10px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--accent-green); font-weight: bold;">Setting:</label>
                            <input type="text" id="storySetting" placeholder="Where and when does the story happen?" style="width: 100%; padding: 10px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: var(--accent-orange); font-weight: bold;">Main Conflict:</label>
                            <input type="text" id="storyConflict" placeholder="What problem does the character face?" style="width: 100%; padding: 10px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: var(--accent-purple); font-weight: bold;">How it ends:</label>
                            <input type="text" id="storyEnding" placeholder="How is the conflict resolved?" style="width: 100%; padding: 10px; background: var(--dark-surface); border: 2px solid var(--dark-border); border-radius: 6px; color: var(--text-primary);">
                        </div>
                    </div>
                    
                    <div>
                        <button class="btn btn-small btn-secondary" onclick="checkStoryPlan()">Check Story Plan</button>
                        <button class="btn btn-small btn-outline" onclick="showStoryPlanExample()">Example Plan</button>
                    </div>
                    
                    <div id="storyPlanResult" style="margin-top: 20px; min-height: 30px; font-weight: bold; text-align: left;"></div>
                </div>
            `;
        };

        window.checkStoryPlan = function() {
            const character = document.getElementById('storyCharacter')?.value.trim() || '';
            const setting = document.getElementById('storySetting')?.value.trim() || '';
            const conflict = document.getElementById('storyConflict')?.value.trim() || '';
            const ending = document.getElementById('storyEnding')?.value.trim() || '';
            const resultDiv = document.getElementById('storyPlanResult');
            
            if (!resultDiv) return;
            
            let filledCount = 0;
            if (character) filledCount++;
            if (setting) filledCount++;
            if (conflict) filledCount++;
            if (ending) filledCount++;
            
            if (filledCount === 0) {
                resultDiv.textContent = "Start planning your story by filling in the boxes above!";
                resultDiv.style.color = 'var(--accent-orange)';
            } else if (filledCount < 4) {
                resultDiv.textContent = `Good start! You've filled ${filledCount} out of 4 story elements. Try to complete all parts for a strong story plan.`;
                resultDiv.style.color = 'var(--secondary-amber)';
            } else {
                resultDiv.innerHTML = `
                    <strong>Excellent story plan! Here's your story outline:</strong><br><br>
                    <strong>Character:</strong> ${character}<br>
                    <strong>Setting:</strong> ${setting}<br>
                    <strong>Conflict:</strong> ${conflict}<br>
                    <strong>Resolution:</strong> ${ending}<br><br>
                    You have all the key elements for a great story! Now you can start writing.
                `;
                resultDiv.style.color = 'var(--primary-teal)';
            }
            
            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        };

        window.showStoryPlanExample = function() {
            const resultDiv = document.getElementById('storyPlanResult');
            if (resultDiv) {
                resultDiv.innerHTML = `
                    <strong>Example Story Plan:</strong><br><br>
                    <strong>Prompt:</strong> A character discovers they can talk to animals<br><br>
                    <strong>Character:</strong> Lily, a shy 12-year-old who loves nature but struggles to make friends<br>
                    <strong>Setting:</strong> Modern city, Lily's school and local park<br>
                    <strong>Conflict:</strong> Lily discovers she can understand animals but doesn't know how to use this power or who to tell<br>
                    <strong>Resolution:</strong> Lily uses her ability to help solve a mystery at school, gains confidence, and makes her first human friend<br><br>
                    Notice how each element connects to create a complete story idea!
                `;
                resultDiv.style.color = 'var(--accent-purple)';
            }
        };

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            writingTip.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            writingTip.appendChild(createWritingTip());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createWritingVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
