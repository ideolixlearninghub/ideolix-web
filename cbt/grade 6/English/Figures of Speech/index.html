<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 English - Figures of Speech | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Literary Theme */
        :root {
            --primary-gold: #FFD700;
            --secondary-silver: #C0C0C0;
            --accent-ruby: #E0115F;
            --accent-sapphire: #0F52BA;
            --accent-emerald: #50C878;
            --accent-amethyst: #9966CC;
            --dark-bg: #1A1A2E;
            --dark-surface: #2A2A3E;
            --dark-card: #353548;
            --dark-border: #4A4A5E;
            --text-primary: #FFFFFF;
            --text-secondary: #E6E6FA;
            --text-muted: #B0B0C0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(255, 215, 0, 0.3);
            --simile-glow: 0 0 15px rgba(255, 215, 0, 0.4);
            --metaphor-glow: 0 0 15px rgba(224, 17, 95, 0.4);
            --personification-glow: 0 0 15px rgba(15, 82, 186, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Georgia', 'Times New Roman', serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Literary Pattern Background */
        .literary-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(224, 17, 95, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(15, 82, 186, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #1A1A2E, #2A2A3E);
            opacity: 0.8;
        }

        .floating-symbols {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 3rem;
            font-weight: bold;
            animation: floatSymbols 20s linear infinite;
        }

        @keyframes floatSymbols {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(90deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(180deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(270deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(360deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 46, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-gold), var(--accent-ruby), var(--accent-sapphire));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
            font-family: 'Georgia', serif;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 215, 0, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-gold);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-gold);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-gold);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-gold);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        .btn-primary:hover {
            background: #FFC800;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
        }

        .btn-secondary {
            background: var(--accent-ruby);
            color: white;
            box-shadow: 0 4px 15px rgba(224, 17, 95, 0.4);
        }

        .btn-secondary:hover {
            background: #C8105E;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(224, 17, 95, 0.5);
        }

        .btn-sapphire {
            background: var(--accent-sapphire);
            color: white;
            box-shadow: 0 4px 15px rgba(15, 82, 186, 0.4);
        }

        .btn-sapphire:hover {
            background: #0A4492;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(15, 82, 186, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-gold);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-gold), var(--accent-ruby), var(--accent-sapphire));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
            font-family: 'Georgia', serif;
        }

        .literary-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-emerald);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-gold), var(--accent-ruby), var(--accent-sapphire));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-gold);
            background: rgba(255, 215, 0, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(80, 200, 120, 0.1);
            border-color: var(--accent-emerald);
            color: var(--accent-emerald);
        }

        .option.incorrect {
            background: rgba(224, 17, 95, 0.1);
            border-color: var(--accent-ruby);
            color: var(--accent-ruby);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--accent-sapphire);
        }

        .option.correct .option-letter {
            background: var(--accent-emerald);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-ruby);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(80, 200, 120, 0.1);
            border-left: 5px solid var(--accent-emerald);
        }

        .feedback-incorrect {
            background: rgba(224, 17, 95, 0.1);
            border-left: 5px solid var(--accent-ruby);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-emerald);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-ruby);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-emerald);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-ruby);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Figures of Speech Display */
        .figures-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-gold);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .literary-container {
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-emerald);
        }

        .literary-scenario {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .literary-highlight {
            background: rgba(80, 200, 120, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid var(--accent-emerald);
        }

        .highlight-text {
            color: var(--accent-emerald);
            font-weight: bold;
        }

        /* Figures of Speech Diagram */
        .figures-diagram {
            width: 100%;
            height: 250px;
            background: var(--dark-surface);
            border-radius: 12px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--primary-gold);
            padding: 20px;
        }

        .figure-element {
            position: absolute;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .figure-element:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .connection-line {
            position: absolute;
            background: var(--primary-gold);
            height: 3px;
            border-radius: 2px;
            opacity: 0.6;
        }

        /* Figures Grid */
        .figures-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .figures-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .figures-grid {
                grid-template-columns: 1fr;
            }
        }

        .figure-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .figure-card:hover {
            transform: translateY(-5px);
        }

        .figure-card.simile {
            border-color: var(--primary-gold);
        }

        .figure-card.metaphor {
            border-color: var(--accent-ruby);
        }

        .figure-card.personification {
            border-color: var(--accent-sapphire);
        }

        .figure-card.alliteration {
            border-color: var(--accent-emerald);
        }

        .figure-card.hyperbole {
            border-color: var(--accent-amethyst);
        }

        .figure-card.onomatopoeia {
            border-color: var(--secondary-silver);
        }

        .figure-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .simile .figure-icon {
            color: var(--primary-gold);
        }

        .metaphor .figure-icon {
            color: var(--accent-ruby);
        }

        .personification .figure-icon {
            color: var(--accent-sapphire);
        }

        .alliteration .figure-icon {
            color: var(--accent-emerald);
        }

        .hyperbole .figure-icon {
            color: var(--accent-amethyst);
        }

        .onomatopoeia .figure-icon {
            color: var(--secondary-silver);
        }

        .figure-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .simile .figure-title {
            color: var(--primary-gold);
        }

        .metaphor .figure-title {
            color: var(--accent-ruby);
        }

        .personification .figure-title {
            color: var(--accent-sapphire);
        }

        .alliteration .figure-title {
            color: var(--accent-emerald);
        }

        .hyperbole .figure-title {
            color: var(--accent-amethyst);
        }

        .onomatopoeia .figure-title {
            color: var(--secondary-silver);
        }

        .figure-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .figure-examples {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 10px;
            background: var(--dark-surface);
            padding: 8px;
            border-radius: 4px;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-emerald);
            border-bottom: 2px solid var(--accent-emerald);
        }

        .comparison-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .comparison-table tr:hover {
            background: rgba(80, 200, 120, 0.05);
        }

        /* Simile Display */
        .simile-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--primary-gold);
        }

        .simile-title {
            color: var(--primary-gold);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .simile-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .simile-grid {
                grid-template-columns: 1fr;
            }
        }

        .simile-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .simile-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary-gold);
        }

        .simile-example {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-gold);
        }

        .simile-explanation {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Metaphor Display */
        .metaphor-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-ruby);
        }

        .metaphor-title {
            color: var(--accent-ruby);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .metaphor-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .metaphor-grid {
                grid-template-columns: 1fr;
            }
        }

        .metaphor-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .metaphor-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-ruby);
        }

        .metaphor-example {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-ruby);
        }

        .metaphor-explanation {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Personification Display */
        .personification-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-sapphire);
        }

        .personification-title {
            color: var(--accent-sapphire);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .personification-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .personification-grid {
                grid-template-columns: 1fr;
            }
        }

        .personification-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .personification-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-sapphire);
        }

        .personification-example {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-sapphire);
        }

        .personification-explanation {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Interactive Figure Creator */
        .creator-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-amethyst);
        }

        .creator-title {
            color: var(--accent-amethyst);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .creator-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .creator-select {
            padding: 10px 15px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-amethyst);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .creator-input {
            padding: 15px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-amethyst);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            resize: vertical;
            min-height: 80px;
        }

        .creator-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .creator-btn {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--accent-amethyst);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .creator-btn:hover {
            background: rgba(153, 102, 204, 0.1);
            transform: translateY(-2px);
        }

        .creator-display {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Other Figures Display */
        .other-figures-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .other-figures-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .other-figures-grid {
                grid-template-columns: 1fr;
            }
        }

        .other-figure-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--accent-emerald);
        }

        .other-figure-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-emerald);
        }

        .other-figure-name {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent-emerald);
        }

        .other-figure-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-gold), var(--accent-ruby), var(--accent-sapphire));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-gold), var(--accent-ruby), var(--accent-sapphire));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-gold);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .figures-grid {
                grid-template-columns: 1fr;
            }
            
            .simile-grid {
                grid-template-columns: 1fr;
            }
            
            .metaphor-grid {
                grid-template-columns: 1fr;
            }
            
            .personification-grid {
                grid-template-columns: 1fr;
            }
            
            .other-figures-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes literaryReveal {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .literary-reveal {
            animation: literaryReveal 0.5s ease forwards;
        }
        
        @keyframes simileGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(255, 215, 0, 0.2); }
        }
        
        .simile-glow {
            animation: simileGlow 2s ease-in-out infinite;
        }
        
        @keyframes metaphorGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(224, 17, 95, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(224, 17, 95, 0.2); }
        }
        
        .metaphor-glow {
            animation: metaphorGlow 2s ease-in-out infinite;
        }
        
        @keyframes personificationGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(15, 82, 186, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(15, 82, 186, 0.2); }
        }
        
        .personification-glow {
            animation: personificationGlow 2s ease-in-out infinite;
        }
        
        @keyframes floatSymbol {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .float-symbol {
            animation: floatSymbol 3s ease-in-out infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .sparkle {
            animation: sparkle 1.5s infinite;
        }
    </style>
</head>
<body>
    <!-- Literary Pattern Background -->
    <div class="literary-bg" id="literaryBg">
        <!-- Literary symbols will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 6 English - Figures of Speech</h1>
            <p class="welcome-subtitle">Unlock the magic of language! Explore similes, metaphors, personification, and other literary devices that make writing colorful and expressive. Learn to identify, create, and appreciate the beauty of figurative language in literature and everyday communication!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">‚ú®üìöüñãÔ∏èüåàüé≠</span>
                <span class="topic-name">Simile, Metaphor, Personification & More</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Literary Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Literary fact display -->
                <div id="literaryFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Literary Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Explore Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other English Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const literaryBg = document.getElementById('literaryBg');
            
            // Create floating literary symbols
            const symbols = ['‚ú®', 'üìö', 'üñãÔ∏è', 'üåà', 'üé≠', 'üìñ', 'üî§', 'üí≠', 'üåü', 'üé®', '‚úèÔ∏è', 'üí°'];
            
            for (let i = 0; i < 20; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'floating-symbols float-symbol';
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.left = `${Math.random() * 100}%`;
                symbol.style.top = `${Math.random() * 100}%`;
                symbol.style.animationDelay = `${Math.random() * 5}s`;
                symbol.style.fontSize = `${2 + Math.random() * 4}rem`;
                
                // Color based on symbol type
                if (symbol.textContent === '‚ú®' || symbol.textContent === 'üåü') {
                    symbol.style.color = 'rgba(255, 215, 0, 0.1)';
                } else if (symbol.textContent === 'üìö' || symbol.textContent === 'üìñ') {
                    symbol.style.color = 'rgba(224, 17, 95, 0.1)';
                } else if (symbol.textContent === 'üñãÔ∏è' || symbol.textContent === '‚úèÔ∏è') {
                    symbol.style.color = 'rgba(15, 82, 186, 0.1)';
                } else {
                    symbol.style.color = 'rgba(80, 200, 120, 0.1)';
                }
                
                literaryBg.appendChild(symbol);
            }
        }

        // Questions array - 80+ Grade 6 Figures of Speech Questions
        const questions = [
            // Simile Basics (1-20)
            {
                type: "simile_basics",
                question: "What is a simile?",
                options: ["A comparison using 'like' or 'as'", "A direct comparison without 'like' or 'as'", "Giving human qualities to non-human things", "Repeating consonant sounds"],
                answer: "A",
                explanation: "A simile is a figure of speech that compares two different things using the words 'like' or 'as'."
            },
            {
                type: "simile_basics",
                question: "Which of these is a simile?",
                options: ["Her smile was as bright as the sun.", "Time is a thief.", "The wind whispered through the trees.", "Peter Piper picked a peck of pickled peppers."],
                answer: "A",
                explanation: "This uses 'as...as' to compare a smile to the sun, making it a simile."
            },
            {
                type: "simile_basics",
                question: "Complete the simile: 'As brave as a ___'",
                options: ["lion", "mouse", "turtle", "rabbit"],
                answer: "A",
                explanation: "'As brave as a lion' is a common simile comparing bravery to a lion's courage."
            },
            {
                type: "simile_basics",
                question: "Which word indicates a simile?",
                options: ["like", "is", "has", "the"],
                answer: "A",
                explanation: "The word 'like' (or 'as') is a key indicator of a simile."
            },
            // Metaphor Basics (21-40)
            {
                type: "metaphor_basics",
                question: "What is a metaphor?",
                options: ["A direct comparison saying one thing IS another", "A comparison using 'like' or 'as'", "Giving human qualities to objects", "An exaggeration"],
                answer: "A",
                explanation: "A metaphor directly states that one thing is another, without using 'like' or 'as'."
            },
            {
                type: "metaphor_basics",
                question: "Which of these is a metaphor?",
                options: ["The world is a stage.", "He runs like the wind.", "The stars were like diamonds.", "As cold as ice."],
                answer: "A",
                explanation: "This directly states 'the world is a stage' without using 'like' or 'as', making it a metaphor."
            },
            {
                type: "metaphor_basics",
                question: "What does this metaphor mean: 'He has a heart of stone'?",
                options: ["He is unfeeling or cruel", "He has a medical condition", "He is very strong", "He collects rocks"],
                answer: "A",
                explanation: "This metaphor means the person is unemotional or cruel, comparing their heart to stone."
            },
            // Personification Basics (41-60)
            {
                type: "personification_basics",
                question: "What is personification?",
                options: ["Giving human qualities to non-human things", "Comparing two things using 'like'", "Saying one thing is another", "Repeating vowel sounds"],
                answer: "A",
                explanation: "Personification gives human characteristics, emotions, or abilities to animals, objects, or ideas."
            },
            {
                type: "personification_basics",
                question: "Which of these shows personification?",
                options: ["The flowers danced in the breeze.", "The flowers were like dancers.", "The flowers were colorful dancers.", "The flowers moved in the breeze."],
                answer: "A",
                explanation: "Flowers 'dancing' gives them human action, which is personification."
            },
            {
                type: "personification_basics",
                question: "What human quality is given here: 'The sun smiled down on us'?",
                options: ["Smiling", "Crying", "Running", "Sleeping"],
                answer: "A",
                explanation: "The sun is given the human ability to smile."
            },
            // Identifying Figures of Speech (61-80)
            {
                type: "identification",
                question: "Identify: 'Her eyes were sparkling diamonds.'",
                options: ["Metaphor", "Simile", "Personification", "Alliteration"],
                answer: "A",
                explanation: "This is a metaphor because it directly states eyes ARE diamonds (without 'like' or 'as')."
            },
            {
                type: "identification",
                question: "Identify: 'The wind howled like a wolf.'",
                options: ["Simile", "Metaphor", "Personification", "Hyperbole"],
                answer: "A",
                explanation: "This uses 'like' to compare wind to a wolf, making it a simile."
            },
            {
                type: "identification",
                question: "Identify: 'The trees whispered secrets to each other.'",
                options: ["Personification", "Simile", "Metaphor", "Onomatopoeia"],
                answer: "A",
                explanation: "Trees are given the human ability to whisper and share secrets."
            },
            // Alliteration (81-100)
            {
                type: "alliteration",
                question: "What is alliteration?",
                options: ["Repetition of beginning consonant sounds", "Comparison using 'like' or 'as'", "Giving human qualities", "Extreme exaggeration"],
                answer: "A",
                explanation: "Alliteration is the repetition of the same consonant sound at the beginning of nearby words."
            },
            {
                type: "alliteration",
                question: "Which shows alliteration?",
                options: ["Sally sells seashells by the seashore.", "The cat sat on the mat.", "Run like the wind.", "Time flies."],
                answer: "A",
                explanation: "This repeats the 's' sound at the beginning of multiple words."
            },
            // Hyperbole (101-120)
            {
                type: "hyperbole",
                question: "What is hyperbole?",
                options: ["Extreme exaggeration for effect", "Comparing two things", "Giving human qualities", "Sound words"],
                answer: "A",
                explanation: "Hyperbole is deliberate exaggeration for emphasis or humorous effect."
            },
            {
                type: "hyperbole",
                question: "Which is hyperbole?",
                options: ["I'm so hungry I could eat a horse!", "I'm a little hungry.", "Hunger is a beast.", "My stomach growled."],
                answer: "A",
                explanation: "This exaggerates hunger to an impossible extreme for effect."
            },
            // Onomatopoeia (121-140)
            {
                type: "onomatopoeia",
                question: "What is onomatopoeia?",
                options: ["Words that imitate sounds", "Repetition of sounds", "Human qualities", "Direct comparison"],
                answer: "A",
                explanation: "Onomatopoeia refers to words that imitate the natural sounds of things."
            },
            {
                type: "onomatopoeia",
                question: "Which word is onomatopoeia?",
                options: ["Buzz", "Beautiful", "Bright", "Big"],
                answer: "A",
                explanation: "'Buzz' imitates the sound of bees or electricity."
            },
            // Creating Figures of Speech (141-160)
            {
                type: "creation",
                question: "Complete this simile: 'As quiet as a ___'",
                options: ["mouse", "lion", "thunder", "siren"],
                answer: "A",
                explanation: "'As quiet as a mouse' is a common simile for extreme quietness."
            },
            {
                type: "creation",
                question: "Create a metaphor for happiness: 'Happiness is ___'",
                options: ["a warm hug", "like a warm hug", "hugging you", "hugged"],
                answer: "A",
                explanation: "This directly states happiness IS something, making it a metaphor."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent literary analysis!",
            "Perfect understanding of figures of speech!",
            "Great job identifying literary devices!",
            "Amazing! You're a language artist!",
            "Perfect recall of figurative language!",
            "You're a future poet in the making!",
            "Outstanding literary comprehension!",
            "Brilliant figure of speech identification!",
            "You think like a literary expert!",
            "Literary mastery achieved!"
        ];

        // Figures of speech concepts
        const figureConcepts = [
            {
                name: "Simile",
                description: "Comparison using 'like' or 'as'",
                icon: "‚ú®"
            },
            {
                name: "Metaphor",
                description: "Direct comparison without 'like' or 'as'",
                icon: "üî•"
            },
            {
                name: "Personification",
                description: "Giving human qualities to non-human things",
                icon: "üë§"
            },
            {
                name: "Alliteration",
                description: "Repetition of beginning consonant sounds",
                icon: "üî§"
            },
            {
                name: "Hyperbole",
                description: "Extreme exaggeration for effect",
                icon: "üöÄ"
            },
            {
                name: "Onomatopoeia",
                description: "Words that imitate sounds",
                icon: "üîä"
            }
        ];

        // Figures of speech types
        const figureTypes = [
            {
                name: "Simile",
                description: "Comparison using 'like' or 'as'",
                examples: "As brave as a lion, Runs like the wind, Sweet like honey",
                characteristics: "Uses comparison words, shows similarity between two things",
                icon: "‚ú®",
                color: "#FFD700"
            },
            {
                name: "Metaphor",
                description: "Direct comparison saying one thing IS another",
                examples: "Time is money, The world is a stage, He has a heart of gold",
                characteristics: "Direct statement, no 'like' or 'as', creates vivid imagery",
                icon: "üî•",
                color: "#E0115F"
            },
            {
                name: "Personification",
                description: "Giving human qualities to non-human things",
                examples: "The wind whispered, The sun smiled, Opportunity knocked",
                characteristics: "Human actions/emotions to objects/animals, makes writing lively",
                icon: "üë§",
                color: "#0F52BA"
            },
            {
                name: "Alliteration",
                description: "Repetition of beginning consonant sounds",
                examples: "Peter Piper picked, She sells seashells, Big blue balloons",
                characteristics: "Sound repetition, creates rhythm, often tongue-twisters",
                icon: "üî§",
                color: "#50C878"
            },
            {
                name: "Hyperbole",
                description: "Extreme exaggeration for effect",
                examples: "I'm so hungry I could eat a horse, I've told you a million times",
                characteristics: "Deliberate exaggeration, not meant literally, creates emphasis",
                icon: "üöÄ",
                color: "#9966CC"
            },
            {
                name: "Onomatopoeia",
                description: "Words that imitate natural sounds",
                examples: "Buzz, pop, crash, meow, sizzle, boom",
                characteristics: "Sound-imitating words, adds sensory detail to writing",
                icon: "üîä",
                color: "#C0C0C0"
            }
        ];

        // Simile examples
        const simileExamples = [
            {
                example: "As busy as a bee",
                explanation: "Comparing someone's activity level to a bee's constant work"
            },
            {
                example: "Cool as a cucumber",
                explanation: "Comparing calmness to the cool temperature of a cucumber"
            },
            {
                example: "Light as a feather",
                explanation: "Comparing lightness in weight to a feather"
            },
            {
                example: "Slept like a log",
                explanation: "Comparing deep sleep to an unmoving log"
            },
            {
                example: "Quick like lightning",
                explanation: "Comparing speed to lightning's instant flash"
            },
            {
                example: "Sweet like chocolate",
                explanation: "Comparing sweetness or pleasantness to chocolate"
            }
        ];

        // Metaphor examples
        const metaphorExamples = [
            {
                example: "He is a night owl",
                explanation: "Comparing someone who stays up late to an owl"
            },
            {
                example: "She has a heart of gold",
                explanation: "Comparing kindness and generosity to precious gold"
            },
            {
                example: "Life is a roller coaster",
                explanation: "Comparing life's ups and downs to a roller coaster ride"
            },
            {
                example: "The classroom was a zoo",
                explanation: "Comparing chaotic classroom to a zoo"
            },
            {
                example: "Her voice is music to my ears",
                explanation: "Comparing pleasant voice to enjoyable music"
            },
            {
                example: "Time is a thief",
                explanation: "Comparing time's passage to a thief stealing moments"
            }
        ];

        // Personification examples
        const personificationExamples = [
            {
                example: "The wind whispered through the trees",
                explanation: "Giving wind the human ability to whisper"
            },
            {
                example: "The sun smiled down on us",
                explanation: "Giving sun the human ability to smile"
            },
            {
                example: "Opportunity knocked on his door",
                explanation: "Giving opportunity the human action of knocking"
            },
            {
                example: "The flowers danced in the breeze",
                explanation: "Giving flowers the human action of dancing"
            },
            {
                example: "Time flies when you're having fun",
                explanation: "Giving time the ability to fly like a bird"
            },
            {
                example: "The car coughed and sputtered",
                explanation: "Giving car human actions of coughing and sputtering"
            }
        ];

        // Other figures of speech
        const otherFigures = [
            {
                name: "Alliteration",
                description: "Repetition of beginning consonant sounds",
                examples: "Peter Piper picked a peck of pickled peppers",
                purpose: "Creates rhythm and musical quality"
            },
            {
                name: "Hyperbole",
                description: "Extreme exaggeration for emphasis",
                examples: "I've told you a million times",
                purpose: "Creates strong impression or humorous effect"
            },
            {
                name: "Onomatopoeia",
                description: "Words that imitate sounds",
                examples: "Buzz, crash, woof, meow",
                purpose: "Brings sounds to life in writing"
            },
            {
                name: "Idiom",
                description: "Phrase with figurative meaning",
                examples: "Break a leg, It's raining cats and dogs",
                purpose: "Cultural expression with hidden meaning"
            }
        ];

        // Literary facts
        const literaryFacts = [
            "Shakespeare used over 3,000 different figures of speech in his plays!",
            "The word 'metaphor' comes from Greek meaning 'to transfer'!",
            "Similes have been used in poetry for over 4,000 years!",
            "Personification helps readers connect with non-human elements!",
            "Alliteration is often used in brand names and advertising!",
            "Hyperbole makes writing more dramatic and memorable!",
            "Onomatopoeia words vary between languages - what sounds do animals make in other countries?",
            "Figures of speech make language more colorful and expressive!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const literaryFact = document.getElementById('literaryFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade6FiguresOfSpeech');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade6FiguresOfSpeech', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade6FiguresOfSpeech_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade6FiguresOfSpeech_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a figurative language expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent literary analysis skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep exploring the beauty of language!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review the concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Understanding figurative language opens new worlds!";
            }
        }

        // Create literary fact display
        function createLiteraryFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'literary-fact';
            
            factDiv.innerHTML = `<strong>Interesting Literary Fact:</strong> ${literaryFacts[Math.floor(Math.random() * literaryFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "simile_basics": "‚ú®",
                "metaphor_basics": "üî•",
                "personification_basics": "üë§",
                "identification": "üîç",
                "alliteration": "üî§",
                "hyperbole": "üöÄ",
                "onomatopoeia": "üîä",
                "creation": "üñãÔ∏è"
            };
            
            let conceptName = "Simile Basics";
            let conceptIcon = "‚ú®";
            
            if (question.type.includes("simile_basics")) {
                conceptName = "Simile Basics";
                conceptIcon = conceptIcons.simile_basics;
            } else if (question.type.includes("metaphor_basics")) {
                conceptName = "Metaphor Basics";
                conceptIcon = conceptIcons.metaphor_basics;
            } else if (question.type.includes("personification_basics")) {
                conceptName = "Personification Basics";
                conceptIcon = conceptIcons.personification_basics;
            } else if (question.type.includes("identification")) {
                conceptName = "Figure Identification";
                conceptIcon = conceptIcons.identification;
            } else if (question.type.includes("alliteration")) {
                conceptName = "Alliteration";
                conceptIcon = conceptIcons.alliteration;
            } else if (question.type.includes("hyperbole")) {
                conceptName = "Hyperbole";
                conceptIcon = conceptIcons.hyperbole;
            } else if (question.type.includes("onomatopoeia")) {
                conceptName = "Onomatopoeia";
                conceptIcon = conceptIcons.onomatopoeia;
            } else if (question.type.includes("creation")) {
                conceptName = "Figure Creation";
                conceptIcon = conceptIcons.creation;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("simile_basics")) {
                label.textContent = "Comparison using 'like' or 'as'";
            } else if (question.type.includes("metaphor_basics")) {
                label.textContent = "Direct comparison saying one thing IS another";
            } else if (question.type.includes("personification_basics")) {
                label.textContent = "Giving human qualities to non-human things";
            } else if (question.type.includes("identification")) {
                label.textContent = "Identifying different figures of speech";
            } else if (question.type.includes("alliteration")) {
                label.textContent = "Repetition of beginning consonant sounds";
            } else if (question.type.includes("hyperbole")) {
                label.textContent = "Extreme exaggeration for effect";
            } else if (question.type.includes("onomatopoeia")) {
                label.textContent = "Words that imitate natural sounds";
            } else if (question.type.includes("creation")) {
                label.textContent = "Creating your own figures of speech";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create figures of speech visualization
        function createFiguresVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-gold);">Figures of Speech Explorer</h3>
                
                <div class="figures-display">
                    <div class="display-title">Current Literary Concept</div>
                    <div class="literary-container">
                        <div class="literary-scenario">${currentQuestion.question}</div>
                        <div class="literary-highlight">
                            <strong>Key Concept:</strong> <span class="highlight-text">${getFigureConcept(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Figures of Speech Diagram -->
                <div class="figures-diagram" id="figuresDiagram">
                    <!-- Figures diagram will be animated by JavaScript -->
                </div>
                <div style="text-align: center; margin-bottom: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                    Interactive Figures of Speech Model - Click on figures for details
                </div>
                
                <div class="figures-grid">
                    ${figureTypes.map(type => `
                        <div class="figure-card ${type.name.toLowerCase()} ${type.name.toLowerCase()}-glow" style="border-color: ${type.color}" onclick="showFigureDemo('${type.name}')">
                            <div class="figure-icon sparkle" style="color: ${type.color}">${type.icon}</div>
                            <div class="figure-title" style="color: ${type.color}">${type.name}</div>
                            <div class="figure-description">${type.description}</div>
                            <div class="figure-examples">
                                <strong>Examples:</strong> ${type.examples}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Figure of Speech</th>
                            <th>Definition</th>
                            <th>Key Word/Feature</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${figureTypes.slice(0, 3).map(figure => `
                            <tr>
                                <td style="font-weight: bold; color: ${figure.color};">${figure.name}</td>
                                <td>${figure.description}</td>
                                <td style="color: var(--accent-emerald);">${figure.name === 'Simile' ? 'like/as' : figure.name === 'Metaphor' ? 'is/are' : 'human actions'}</td>
                                <td style="font-style: italic; color: ${figure.color};">${figure.examples.split(', ')[0]}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="simile-container simile-glow">
                    <div class="simile-title">Simile Examples</div>
                    <div class="simile-grid">
                        ${simileExamples.slice(0, 4).map(simile => `
                            <div class="simile-card">
                                <div class="simile-icon">‚ú®</div>
                                <div class="simile-example">"${simile.example}"</div>
                                <div class="simile-explanation">
                                    ${simile.explanation}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="metaphor-container metaphor-glow">
                    <div class="metaphor-title">Metaphor Examples</div>
                    <div class="metaphor-grid">
                        ${metaphorExamples.slice(0, 4).map(metaphor => `
                            <div class="metaphor-card">
                                <div class="metaphor-icon">üî•</div>
                                <div class="metaphor-example">"${metaphor.example}"</div>
                                <div class="metaphor-explanation">
                                    ${metaphor.explanation}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="personification-container personification-glow">
                    <div class="personification-title">Personification Examples</div>
                    <div class="personification-grid">
                        ${personificationExamples.slice(0, 4).map(person => `
                            <div class="personification-card">
                                <div class="personification-icon">üë§</div>
                                <div class="personification-example">"${person.example}"</div>
                                <div class="personification-explanation">
                                    ${person.explanation}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="creator-container">
                    <div class="creator-title">Interactive Figure Creator</div>
                    <div class="creator-controls">
                        <select class="creator-select" id="figureType">
                            <option value="">Select Figure Type</option>
                            <option value="simile">Simile</option>
                            <option value="metaphor">Metaphor</option>
                            <option value="personification">Personification</option>
                            <option value="alliteration">Alliteration</option>
                            <option value="hyperbole">Hyperbole</option>
                        </select>
                        <textarea class="creator-input" id="figureInput" placeholder="Enter your idea here... Example for simile: Her smile was like..."></textarea>
                        <div class="creator-buttons">
                            <button class="creator-btn" onclick="createFigure()">Create Figure</button>
                            <button class="creator-btn" onclick="getInspiration()">Get Inspiration</button>
                            <button class="creator-btn" onclick="clearCreator()">Clear</button>
                        </div>
                    </div>
                    <div class="creator-display" id="creatorDisplay">
                        Your created figure of speech will appear here...
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-emerald);">
                    <div style="color: var(--accent-emerald); font-weight: bold; margin-bottom: 10px;">Quick Figures Guide:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        1. Simile: Uses "like" or "as" to compare<br>
                        2. Metaphor: Direct comparison (IS/ARE)<br>
                        3. Personification: Human qualities to non-human<br>
                        4. Alliteration: Repeated beginning sounds<br>
                        5. Hyperbole: Extreme exaggeration<br>
                        6. Onomatopoeia: Sound-imitating words
                    </div>
                </div>
                
                <div class="other-figures-container">
                    <div class="display-title">Other Common Figures of Speech</div>
                    <div class="other-figures-grid">
                        ${otherFigures.map(figure => `
                            <div class="other-figure-card">
                                <div class="other-figure-icon">${getFigureIcon(figure.name)}</div>
                                <div class="other-figure-name">${figure.name}</div>
                                <div class="other-figure-description">
                                    <strong>Definition:</strong> ${figure.description}<br>
                                    <strong>Example:</strong> ${figure.examples}<br>
                                    <strong>Purpose:</strong> ${figure.purpose}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="solution-container">
                    <div class="display-title">Step-by-Step Learning Path</div>
                    <div class="solution-steps" id="solutionSteps">
                        ${generateLearningPath(currentQuestion)}
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--accent-ruby);">
                    <div style="color: var(--accent-ruby); font-weight: bold; margin-bottom: 10px; text-align: center;">Creative Writing Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Observe:</strong> Notice how authors use figures of speech in books<br>
                        <strong>Practice:</strong> Try creating your own similes and metaphors<br>
                        <strong>Read Aloud:</strong> Hear the rhythm of alliteration and onomatopoeia<br>
                        <strong>Be Creative:</strong> Don't be afraid to invent new comparisons<br>
                        <strong>Revise:</strong> Make your figures of speech clearer and more vivid<br>
                        <em>Figures of speech turn ordinary language into extraordinary art!</em>
                    </div>
                </div>
            `;
            
            // Initialize figures diagram
            initializeFiguresDiagram();
            
            return vizDiv;
        }

        // Helper functions
        function getFigureConcept(typeString) {
            const conceptMap = {
                "simile_basics": "Simile - Comparison using 'like' or 'as'",
                "metaphor_basics": "Metaphor - Direct comparison without 'like' or 'as'",
                "personification_basics": "Personification - Giving human qualities to non-human things",
                "identification": "Identifying different figures of speech",
                "alliteration": "Alliteration - Repetition of beginning consonant sounds",
                "hyperbole": "Hyperbole - Extreme exaggeration for effect",
                "onomatopoeia": "Onomatopoeia - Words that imitate natural sounds",
                "creation": "Creating original figures of speech"
            };
            
            return conceptMap[typeString] || "Literary Devices";
        }

        function getFigureIcon(figureName) {
            const iconMap = {
                "Alliteration": "üî§",
                "Hyperbole": "üöÄ",
                "Onomatopoeia": "üîä",
                "Idiom": "üí≠"
            };
            return iconMap[figureName] || "‚ú®";
        }

        function generateLearningPath(question) {
            let steps = [];
            
            if (question.type.includes("simile_basics")) {
                steps = [
                    "Step 1: Look for comparison words 'like' or 'as'",
                    "Step 2: Identify the two things being compared",
                    "Step 3: Check if it shows similarity between different things",
                    "Step 4: Verify it's not a direct statement (that would be metaphor)",
                    "Step 5: Select the correct simile example or definition"
                ];
            } else if (question.type.includes("metaphor_basics")) {
                steps = [
                    "Step 1: Look for direct comparison without 'like' or 'as'",
                    "Step 2: Identify if one thing IS another thing",
                    "Step 3: Check for vivid, imaginative language",
                    "Step 4: Verify it's not using comparison words",
                    "Step 5: Select the correct metaphor example or definition"
                ];
            } else if (question.type.includes("personification_basics")) {
                steps = [
                    "Step 1: Look for human qualities given to non-human things",
                    "Step 2: Identify human actions, emotions, or characteristics",
                    "Step 3: Check if objects/animals are acting like people",
                    "Step 4: Verify it's not just description but human-like behavior",
                    "Step 5: Select the correct personification example"
                ];
            } else if (question.type.includes("identification")) {
                steps = [
                    "Step 1: Read the sentence carefully",
                    "Step 2: Look for key indicators (like/as for simile, human actions for personification, etc.)",
                    "Step 3: Check each figure of speech definition",
                    "Step 4: Match the sentence to the correct figure",
                    "Step 5: Select the identified figure of speech"
                ];
            } else {
                steps = [
                    "Step 1: Read the question carefully",
                    "Step 2: Identify the figure of speech concept being tested",
                    "Step 3: Recall the definition and characteristics",
                    "Step 4: Apply your knowledge to the options",
                    "Step 5: Select the most accurate answer"
                ];
            }
            
            return steps.map((step, index) => `
                <div class="solution-step literary-reveal" style="animation-delay: ${index * 0.1}s">
                    <span class="step-number">${index + 1}</span>
                    <span class="step-description">${step}</span>
                    ${index === steps.length - 1 ? `
                        <div class="step-calculation">
                            <strong>Correct Answer:</strong> ${question.options[question.answer.charCodeAt(0) - 65]}
                        </div>
                        <div class="step-explanation">
                            ${question.explanation}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Global functions for interactive features
        window.showFigureDemo = function(figureName) {
            const figuresDiagram = document.getElementById('figuresDiagram');
            if (!figuresDiagram) return;
            
            const figure = figureTypes.find(f => f.name === figureName);
            if (!figure) return;
            
            // Show the selected figure
            figuresDiagram.innerHTML = '';
            
            figuresDiagram.innerHTML = `
                <div class="figure-element ${figure.name.toLowerCase()}-glow" style="background-color: ${figure.color}; width: 80%; height: 80px; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                    <div style="font-size: 1.5rem;">${figure.icon}</div>
                    <div style="font-size: 1.2rem; margin-top: 5px;">${figure.name}</div>
                    <div style="font-size: 0.9rem; margin-top: 5px;">${figure.description}</div>
                </div>
                
                <div style="position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; color: var(--text-secondary);">
                    <strong>Example:</strong> ${figure.examples.split(', ')[0]}
                </div>
                
                <div style="position: absolute; bottom: 40px; left: 0; right: 0; text-align: center; color: var(--text-muted); font-size: 0.8rem;">
                    Click other figure cards to explore different figures of speech
                </div>
            `;
        };

        window.createFigure = function() {
            const figureTypeSelect = document.getElementById('figureType');
            const figureInput = document.getElementById('figureInput');
            const creatorDisplay = document.getElementById('creatorDisplay');
            
            if (!figureTypeSelect || !figureInput || !creatorDisplay) return;
            
            const figureType = figureTypeSelect.value;
            const userInput = figureInput.value.trim();
            
            if (!figureType) {
                creatorDisplay.innerHTML = "Please select a figure of speech type.";
                return;
            }
            
            if (!userInput) {
                creatorDisplay.innerHTML = "Please enter your idea or phrase.";
                return;
            }
            
            const figureData = {
                simile: {
                    title: "Simile Created!",
                    color: "#FFD700",
                    icon: "‚ú®",
                    requirements: "Should include 'like' or 'as' to compare two different things",
                    tips: "Try: As [adjective] as a [noun], or [subject] [verb] like a [noun]"
                },
                metaphor: {
                    title: "Metaphor Created!",
                    color: "#E0115F",
                    icon: "üî•",
                    requirements: "Should directly state one thing IS another without 'like' or 'as'",
                    tips: "Try: [Subject] is a [noun], or [Subject] has a [noun] of [noun]"
                },
                personification: {
                    title: "Personification Created!",
                    color: "#0F52BA",
                    icon: "üë§",
                    requirements: "Should give human qualities to non-human things",
                    tips: "Try: The [object] [human action], or [Animal] [human emotion]"
                },
                alliteration: {
                    title: "Alliteration Created!",
                    color: "#50C878",
                    icon: "üî§",
                    requirements: "Should repeat the same beginning consonant sound",
                    tips: "Try repeating words starting with the same letter: [B]ig [b]rown [b]ear"
                },
                hyperbole: {
                    title: "Hyperbole Created!",
                    color: "#9966CC",
                    icon: "üöÄ",
                    requirements: "Should be an extreme exaggeration not meant literally",
                    tips: "Try: I'm so [adjective] I could [impossible action], or It took [huge number]"
                }
            };
            
            const data = figureData[figureType];
            if (!data) {
                creatorDisplay.innerHTML = "Invalid figure type selected.";
                return;
            }
            
            // Check if the input matches the figure type (basic check)
            let isValid = false;
            let feedback = "";
            
            switch(figureType) {
                case "simile":
                    isValid = userInput.toLowerCase().includes("like") || userInput.toLowerCase().includes("as");
                    feedback = isValid ? "Great! You used 'like' or 'as' for comparison." : "Remember to use 'like' or 'as' for a simile.";
                    break;
                case "metaphor":
                    isValid = !userInput.toLowerCase().includes("like") && !userInput.toLowerCase().includes("as") && 
                              (userInput.toLowerCase().includes(" is ") || userInput.toLowerCase().includes(" are ") || 
                               userInput.toLowerCase().includes(" was ") || userInput.toLowerCase().includes(" were "));
                    feedback = isValid ? "Perfect! You made a direct comparison." : "Try saying one thing IS another without 'like' or 'as'.";
                    break;
                case "personification":
                    const humanActions = ['whispered', 'danced', 'smiled', 'cried', 'laughed', 'sang', 'whispered', 'shouted', 'ran', 'walked', 'thought', 'felt'];
                    isValid = humanActions.some(action => userInput.toLowerCase().includes(action));
                    feedback = isValid ? "Excellent! You gave human qualities to something non-human." : "Try giving a human action to an object or animal.";
                    break;
                case "alliteration":
                    const words = userInput.toLowerCase().split(' ');
                    if (words.length >= 3) {
                        const firstLetters = words.map(word => word.charAt(0));
                        const uniqueFirstLetters = [...new Set(firstLetters)];
                        isValid = uniqueFirstLetters.length <= 2; // Allow some variation
                    }
                    feedback = isValid ? "Nice! You repeated beginning sounds." : "Try repeating the same beginning sound in multiple words.";
                    break;
                case "hyperbole":
                    const exaggerationWords = ['million', 'billion', 'forever', 'never', 'always', 'huge', 'giant', 'massive', 'endless', 'infinite'];
                    isValid = exaggerationWords.some(word => userInput.toLowerCase().includes(word)) || 
                              userInput.toLowerCase().includes("so ") || 
                              userInput.toLowerCase().includes("very ");
                    feedback = isValid ? "Awesome! You used extreme exaggeration." : "Try making an impossible or extreme statement for effect.";
                    break;
            }
            
            creatorDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; margin-bottom: 10px; color: ${data.color};">
                        ${data.icon} ${data.title}
                    </div>
                    
                    <div style="background: var(--dark-surface); padding: 15px; border-radius: 8px; margin: 10px 0;">
                        <strong>Your Creation:</strong><br>
                        <span style="color: ${data.color}; font-style: italic; font-size: 1.2rem;">"${userInput}"</span>
                    </div>
                    
                    <div style="background: rgba(${parseInt(data.color.slice(1,3), 16)}, ${parseInt(data.color.slice(3,5), 16)}, ${parseInt(data.color.slice(5,7), 16)}, 0.1); padding: 15px; border-radius: 8px; margin: 10px 0; border: 1px solid ${data.color};">
                        <strong style="color: ${data.color};">Feedback:</strong> ${feedback}<br>
                        <strong style="color: ${data.color};">Requirements:</strong> ${data.requirements}<br>
                        <strong style="color: ${data.color};">Tips:</strong> ${data.tips}
                    </div>
                    
                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 15px;">
                        <strong>Keep practicing!</strong> The more you create, the better you'll become at using figures of speech!
                    </div>
                </div>
            `;
        };

        window.getInspiration = function() {
            const figureTypeSelect = document.getElementById('figureType');
            const figureInput = document.getElementById('figureInput');
            
            if (!figureTypeSelect || !figureInput) return;
            
            const figureType = figureTypeSelect.value;
            
            if (!figureType) {
                alert("Please select a figure of speech type first!");
                return;
            }
            
            const inspirations = {
                simile: [
                    "Her smile was as bright as...",
                    "He runs like...",
                    "As cold as...",
                    "Sweet like...",
                    "Quick like..."
                ],
                metaphor: [
                    "Time is...",
                    "Her heart is...",
                    "Life is...",
                    "His mind is...",
                    "The classroom was..."
                ],
                personification: [
                    "The wind... through the trees",
                    "The sun... down on us",
                    "The flowers... in the breeze",
                    "The car... and...",
                    "The moon... at night"
                ],
                alliteration: [
                    "Big beautiful...",
                    "Silly smiling...",
                    "Running red...",
                    "Quiet quick...",
                    "Many marvelous..."
                ],
                hyperbole: [
                    "I'm so hungry I could...",
                    "I've told you... times",
                    "This bag weighs...",
                    "I waited for...",
                    "She has... things to do"
                ]
            };
            
            const figureInspirations = inspirations[figureType];
            if (figureInspirations) {
                const randomInspiration = figureInspirations[Math.floor(Math.random() * figureInspirations.length)];
                figureInput.value = randomInspiration;
                figureInput.focus();
            }
        };

        window.clearCreator = function() {
            const figureInput = document.getElementById('figureInput');
            const creatorDisplay = document.getElementById('creatorDisplay');
            
            if (figureInput) figureInput.value = '';
            if (creatorDisplay) {
                creatorDisplay.innerHTML = "Your created figure of speech will appear here...";
            }
        };

        function initializeFiguresDiagram() {
            const figuresDiagram = document.getElementById('figuresDiagram');
            if (!figuresDiagram) return;
            
            // Create an interactive figures of speech diagram
            figuresDiagram.innerHTML = `
                <!-- Simile -->
                <div class="figure-element simile-glow" style="background-color: ${figureTypes[0].color}; width: 120px; height: 60px; top: 30%; left: 20%;" onclick="showFigureDemo('Simile')">
                    <div style="font-size: 1.2rem;">${figureTypes[0].icon}</div>
                    <div style="font-size: 0.8rem;">${figureTypes[0].name}</div>
                </div>
                
                <!-- Metaphor -->
                <div class="figure-element metaphor-glow" style="background-color: ${figureTypes[1].color}; width: 120px; height: 60px; top: 30%; right: 20%;" onclick="showFigureDemo('Metaphor')">
                    <div style="font-size: 1.2rem;">${figureTypes[1].icon}</div>
                    <div style="font-size: 0.8rem;">${figureTypes[1].name}</div>
                </div>
                
                <!-- Personification -->
                <div class="figure-element personification-glow" style="background-color: ${figureTypes[2].color}; width: 120px; height: 60px; bottom: 30%; left: 35%;" onclick="showFigureDemo('Personification')">
                    <div style="font-size: 1.2rem;">${figureTypes[2].icon}</div>
                    <div style="font-size: 0.8rem;">${figureTypes[2].name}</div>
                </div>
                
                <!-- Connections -->
                <div class="connection-line" style="width: 40%; top: 35%; left: 30%; transform: rotate(15deg);"></div>
                <div class="connection-line" style="width: 30%; top: 35%; left: 45%; transform: rotate(-15deg);"></div>
                
                <!-- Center Text -->
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                    <div style="font-size: 1.5rem; color: var(--primary-gold);">Figures of Speech</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">Click on each figure to learn more</div>
                </div>
                
                <!-- Examples -->
                <div style="position: absolute; top: 40%; left: 15%; color: var(--text-secondary); font-size: 0.7rem; width: 130px;">
                    <strong>Example:</strong><br>
                    "Like a lion"
                </div>
                
                <div style="position: absolute; top: 40%; right: 15%; color: var(--text-secondary); font-size: 0.7rem; width: 130px; text-align: right;">
                    <strong>Example:</strong><br>
                    "Is a lion"
                </div>
                
                <div style="position: absolute; bottom: 40%; left: 30%; color: var(--text-secondary); font-size: 0.7rem; width: 140px; text-align: center;">
                    <strong>Example:</strong><br>
                    "The wind whispers"
                </div>
            `;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            literaryFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            literaryFact.appendChild(createLiteraryFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createFiguresVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin your literary adventure!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
