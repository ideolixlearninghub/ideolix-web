<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 Science - States of Matter & Separation | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Science Theme */
        :root {
            --primary-blue: #2962FF;
            --secondary-teal: #00BFA5;
            --accent-amber: #FFAB00;
            --accent-purple: #AA00FF;
            --accent-pink: #FF4081;
            --accent-green: #00C853;
            --accent-orange: #FF6D00;
            --accent-cyan: #00B8D4;
            --dark-bg: #0D1B2A;
            --dark-surface: #1B2B3A;
            --dark-card: #253447;
            --dark-border: #3A4A5A;
            --text-primary: #FFFFFF;
            --text-secondary: #B8D0E0;
            --text-muted: #7A94A8;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(41, 98, 255, 0.3);
            --solid-glow: 0 0 15px rgba(0, 191, 165, 0.4);
            --liquid-glow: 0 0 15px rgba(255, 171, 0, 0.4);
            --gas-glow: 0 0 15px rgba(170, 0, 255, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Science Pattern Background */
        .science-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(41, 98, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 191, 165, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 171, 0, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0D1B2A, #1B2B3A);
            opacity: 0.8;
        }

        .floating-text {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 1.5rem;
            font-weight: normal;
            animation: floatText 30s linear infinite;
            max-width: 200px;
            text-align: center;
            line-height: 1.3;
        }

        @keyframes floatText {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(5deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(-5deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(5deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 27, 42, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(41, 98, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(41, 98, 255, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.4);
        }

        .btn-primary:hover {
            background: #1A56DB;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(41, 98, 255, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 191, 165, 0.4);
        }

        .btn-secondary:hover {
            background: #009688;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 191, 165, 0.5);
        }

        .btn-amber {
            background: var(--accent-amber);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 171, 0, 0.4);
        }

        .btn-amber:hover {
            background: #FF9800;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 171, 0, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(41, 98, 255, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-purple);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(41, 98, 255, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-pink);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 200, 83, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-left: 5px solid var(--accent-pink);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-pink);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-pink);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Science Display */
        .science-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        /* Skills Grid */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .skills-grid {
                grid-template-columns: 1fr;
            }
        }

        .skill-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .skill-card:hover {
            transform: translateY(-5px);
        }

        .skill-card.solid {
            border-color: var(--secondary-teal);
        }

        .skill-card.liquid {
            border-color: var(--accent-amber);
        }

        .skill-card.gas {
            border-color: var(--accent-purple);
        }

        .skill-card.separation {
            border-color: var(--accent-pink);
        }

        .skill-card.properties {
            border-color: var(--accent-green);
        }

        .skill-card.changes {
            border-color: var(--accent-orange);
        }

        .skill-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .solid .skill-icon {
            color: var(--secondary-teal);
        }

        .liquid .skill-icon {
            color: var(--accent-amber);
        }

        .gas .skill-icon {
            color: var(--accent-purple);
        }

        .separation .skill-icon {
            color: var(--accent-pink);
        }

        .properties .skill-icon {
            color: var(--accent-green);
        }

        .changes .skill-icon {
            color: var(--accent-orange);
        }

        .skill-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .solid .skill-title {
            color: var(--secondary-teal);
        }

        .liquid .skill-title {
            color: var(--accent-amber);
        }

        .gas .skill-title {
            color: var(--accent-purple);
        }

        .separation .skill-title {
            color: var(--accent-pink);
        }

        .properties .skill-title {
            color: var(--accent-green);
        }

        .changes .skill-title {
            color: var(--accent-orange);
        }

        .skill-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Science Pattern Background -->
    <div class="science-bg" id="scienceBg"></div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 7 Science - States of Matter & Separation Techniques</h1>
            <p class="welcome-subtitle">Learn about solids, liquids, gases, and how to separate mixtures. Understand particle theory and practical separation methods used in science and industry.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üßä üíß üí® üî¨ ‚öóÔ∏è</span>
                <span class="topic-name">Matter Properties & Separation Methods</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Science Learning</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 50</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 2%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Science fact display -->
                <div id="scienceFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Science Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Practice Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other Science Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const scienceBg = document.getElementById('scienceBg');
            
            // Create floating text snippets
            const textSnippets = [
                "Solid",
                "Liquid",
                "Gas",
                "Melting",
                "Freezing",
                "Evaporation",
                "Filtration",
                "Distillation",
                "Mixture",
                "Particles"
            ];
            
            for (let i = 0; i < 15; i++) {
                const text = document.createElement('div');
                text.className = 'floating-text';
                text.textContent = textSnippets[Math.floor(Math.random() * textSnippets.length)];
                text.style.left = `${Math.random() * 100}%`;
                text.style.top = `${Math.random() * 100}%`;
                text.style.animationDelay = `${Math.random() * 5}s`;
                text.style.fontSize = `${1 + Math.random() * 1.5}rem`;
                
                const colors = [
                    'rgba(0, 191, 165, 0.1)',
                    'rgba(255, 171, 0, 0.1)',
                    'rgba(170, 0, 255, 0.1)',
                    'rgba(255, 64, 129, 0.1)',
                    'rgba(0, 200, 83, 0.1)',
                    'rgba(41, 98, 255, 0.1)'
                ];
                text.style.color = colors[Math.floor(Math.random() * colors.length)];
                
                scienceBg.appendChild(text);
            }
        }

        // 50 States of Matter & Separation Techniques Questions
        const questions = [
            // States of Matter Basics (1-10)
            {
                type: "basics",
                question: "What are the three main states of matter?",
                options: ["Solid, liquid, gas", "Hot, cold, warm", "Hard, soft, medium", "Heavy, light, medium"],
                answer: "A",
                explanation: "The three main states of matter are solid, liquid, and gas."
            },
            {
                type: "basics",
                question: "Which state of matter has definite shape and volume?",
                options: ["Solid", "Liquid", "Gas", "Plasma"],
                answer: "A",
                explanation: "Solids have definite shape and definite volume."
            },
            {
                type: "basics",
                question: "Which state of matter takes the shape of its container?",
                options: ["Liquid", "Solid", "Gas", "Both liquid and gas"],
                answer: "D",
                explanation: "Both liquids and gases take the shape of their containers."
            },
            // Properties (11-20)
            {
                type: "properties",
                question: "What property allows liquids to flow?",
                options: ["Fluidity", "Rigidity", "Elasticity", "Brittleness"],
                answer: "A",
                explanation: "Fluidity is the property that allows liquids to flow."
            },
            {
                type: "properties",
                question: "Which state is most compressible?",
                options: ["Gas", "Liquid", "Solid", "All equally"],
                answer: "A",
                explanation: "Gases are highly compressible due to large spaces between particles."
            },
            {
                type: "properties",
                question: "Which has definite volume but no definite shape?",
                options: ["Liquid", "Solid", "Gas", "Plasma"],
                answer: "A",
                explanation: "Liquids have definite volume but take the shape of their container."
            },
            // Particle Theory (21-30)
            {
                type: "particles",
                question: "What is particle theory?",
                options: ["All matter is made of tiny particles", "Particles are always moving", "Particles have spaces between them", "All of these"],
                answer: "D",
                explanation: "Particle theory states all matter is made of particles that are always moving with spaces between them."
            },
            {
                type: "particles",
                question: "In which state are particles closest together?",
                options: ["Solid", "Liquid", "Gas", "Same in all"],
                answer: "A",
                explanation: "Particles are closest together in solids."
            },
            {
                type: "particles",
                question: "In which state do particles move fastest?",
                options: ["Gas", "Liquid", "Solid", "Same in all"],
                answer: "A",
                explanation: "Gas particles move fastest due to highest kinetic energy."
            },
            // State Changes (31-40)
            {
                type: "changes",
                question: "What is melting?",
                options: ["Solid to liquid", "Liquid to gas", "Gas to liquid", "Liquid to solid"],
                answer: "A",
                explanation: "Melting is the change from solid to liquid state."
            },
            {
                type: "changes",
                question: "What is evaporation?",
                options: ["Liquid to gas", "Solid to liquid", "Gas to liquid", "Solid to gas"],
                answer: "A",
                explanation: "Evaporation is the change from liquid to gas at the surface."
            },
            {
                type: "changes",
                question: "What is condensation?",
                options: ["Gas to liquid", "Liquid to gas", "Solid to liquid", "Liquid to solid"],
                answer: "A",
                explanation: "Condensation is the change from gas to liquid."
            },
            {
                type: "changes",
                question: "What is freezing?",
                options: ["Liquid to solid", "Solid to liquid", "Gas to liquid", "Solid to gas"],
                answer: "A",
                explanation: "Freezing is the change from liquid to solid."
            },
            {
                type: "changes",
                question: "What is sublimation?",
                options: ["Solid to gas", "Gas to solid", "Liquid to gas", "Gas to liquid"],
                answer: "A",
                explanation: "Sublimation is the direct change from solid to gas."
            },
            // Separation Basics (41-50)
            {
                type: "separation",
                question: "What is a mixture?",
                options: ["Two or more substances mixed together", "A pure substance", "Only solids mixed", "Only liquids mixed"],
                answer: "A",
                explanation: "A mixture contains two or more substances physically combined."
            },
            {
                type: "separation",
                question: "What separation method uses a filter?",
                options: ["Filtration", "Evaporation", "Distillation", "Chromatography"],
                answer: "A",
                explanation: "Filtration uses a filter to separate solids from liquids."
            },
            {
                type: "separation",
                question: "Which method separates liquids based on boiling points?",
                options: ["Distillation", "Filtration", "Evaporation", "Decantation"],
                answer: "A",
                explanation: "Distillation separates liquids based on different boiling points."
            },
            {
                type: "separation",
                question: "What separates insoluble solids from liquids?",
                options: ["Filtration", "Evaporation", "Distillation", "Chromatography"],
                answer: "A",
                explanation: "Filtration separates insoluble solids from liquids."
            },
            {
                type: "separation",
                question: "What method separates dissolved solids from liquids?",
                options: ["Evaporation", "Filtration", "Distillation", "Decantation"],
                answer: "A",
                explanation: "Evaporation separates dissolved solids by boiling off the liquid."
            },
            // Additional questions to reach 50
            {
                type: "properties",
                question: "Which has the highest density?",
                options: ["Solid", "Liquid", "Gas", "Depends on material"],
                answer: "D",
                explanation: "Density depends on the material, not just the state."
            },
            {
                type: "particles",
                question: "What happens to particles when heated?",
                options: ["Move faster", "Move slower", "Stop moving", "Get smaller"],
                answer: "A",
                explanation: "When heated, particles gain energy and move faster."
            },
            {
                type: "changes",
                question: "What is boiling point?",
                options: ["Temperature when liquid becomes gas", "Temperature when solid becomes liquid", "Temperature when gas becomes liquid", "Freezing temperature"],
                answer: "A",
                explanation: "Boiling point is the temperature at which a liquid becomes gas throughout."
            },
            {
                type: "separation",
                question: "What method uses a magnet?",
                options: ["Magnetic separation", "Filtration", "Evaporation", "Distillation"],
                answer: "A",
                explanation: "Magnetic separation uses magnets to separate magnetic materials."
            },
            {
                type: "separation",
                question: "What separates immiscible liquids?",
                options: ["Separating funnel", "Filtration", "Evaporation", "Distillation"],
                answer: "A",
                explanation: "A separating funnel separates immiscible liquids (liquids that don't mix)."
            },
            {
                type: "basics",
                question: "Which can be poured?",
                options: ["Liquid", "Solid", "Gas", "Both liquid and gas"],
                answer: "A",
                explanation: "Liquids can be poured due to their fluidity."
            },
            {
                type: "properties",
                question: "Which has particles that vibrate in place?",
                options: ["Solid", "Liquid", "Gas", "All of them"],
                answer: "A",
                explanation: "Solid particles vibrate in fixed positions."
            },
            {
                type: "changes",
                question: "What is deposition?",
                options: ["Gas to solid", "Solid to gas", "Liquid to gas", "Solid to liquid"],
                answer: "A",
                explanation: "Deposition is the direct change from gas to solid."
            },
            {
                type: "separation",
                question: "What method separates colored substances?",
                options: ["Chromatography", "Filtration", "Evaporation", "Distillation"],
                answer: "A",
                explanation: "Chromatography separates colored substances based on solubility."
            },
            {
                type: "separation",
                question: "What method separates by settling?",
                options: ["Sedimentation and decantation", "Filtration", "Evaporation", "Distillation"],
                answer: "A",
                explanation: "Sedimentation allows solids to settle, then decantation pours off liquid."
            }
        ];

        // Science topics
        const scienceTopics = [
            {
                name: "Solids",
                description: "Definite shape and volume",
                icon: "üßä",
                color: "#00BFA5"
            },
            {
                name: "Liquids",
                description: "Definite volume, no definite shape",
                icon: "üíß",
                color: "#FFAB00"
            },
            {
                name: "Gases",
                description: "No definite shape or volume",
                icon: "üí®",
                color: "#AA00FF"
            },
            {
                name: "State Changes",
                description: "Melting, freezing, evaporation",
                icon: "üîÑ",
                color: "#FF4081"
            },
            {
                name: "Separation Methods",
                description: "Filtration, distillation, evaporation",
                icon: "‚öóÔ∏è",
                color: "#00C853"
            },
            {
                name: "Particle Theory",
                description: "All matter is made of particles",
                icon: "üî¨",
                color: "#00B8D4"
            }
        ];

        // Science facts
        const scienceFacts = [
            "Water is the only substance that exists naturally in all three states on Earth!",
            "Dry ice is solid carbon dioxide that sublimates at room temperature!",
            "Plasma is the most common state of matter in the universe!",
            "Evaporation occurs at all temperatures, not just boiling point!",
            "Gases are mostly empty space between particles!",
            "Solids expand slightly when heated due to increased particle vibration!",
            "Liquids are nearly incompressible due to close particle spacing!",
            "Boiling occurs throughout a liquid, evaporation only at the surface!"
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent science knowledge!",
            "Perfect understanding of states of matter!",
            "Great separation technique skills!",
            "Amazing! You're a science champion!",
            "Perfect grasp of particle theory!",
            "You're a future chemist in the making!",
            "Outstanding matter properties knowledge!",
            "Brilliant state change understanding!",
            "You think like a materials scientist!",
            "Science mastery achieved!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceFact = document.getElementById('scienceFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade7Matter');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade7Matter', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade7Matter_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a matter and separation expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent science knowledge!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep learning about states of matter!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review matter concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Understanding matter is fundamental to all sciences!";
            }
        }

        // Create science fact display
        function createScienceFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'science-fact';
            
            factDiv.innerHTML = `<strong>Science Fact:</strong> ${scienceFacts[Math.floor(Math.random() * scienceFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "basics": "üìö",
                "properties": "üìä",
                "particles": "üî¨",
                "changes": "üîÑ",
                "separation": "‚öóÔ∏è"
            };
            
            let conceptName = "Basics";
            let conceptIcon = "üìö";
            
            if (question.type.includes("basics")) {
                conceptName = "Matter Basics";
                conceptIcon = conceptIcons.basics;
            } else if (question.type.includes("properties")) {
                conceptName = "Properties";
                conceptIcon = conceptIcons.properties;
            } else if (question.type.includes("particles")) {
                conceptName = "Particle Theory";
                conceptIcon = conceptIcons.particles;
            } else if (question.type.includes("changes")) {
                conceptName = "State Changes";
                conceptIcon = conceptIcons.changes;
            } else if (question.type.includes("separation")) {
                conceptName = "Separation";
                conceptIcon = conceptIcons.separation;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("basics")) {
                label.textContent = "Fundamentals of states of matter";
            } else if (question.type.includes("properties")) {
                label.textContent = "Properties of solids, liquids, gases";
            } else if (question.type.includes("particles")) {
                label.textContent = "Particle theory of matter";
            } else if (question.type.includes("changes")) {
                label.textContent = "Changes between states of matter";
            } else if (question.type.includes("separation")) {
                label.textContent = "Methods to separate mixtures";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create science visualization
        function createScienceVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">States of Matter & Separation Explorer</h3>
                
                <div class="science-display">
                    <div class="display-title">Current Science Concept</div>
                    <div style="padding: 20px; background: var(--dark-surface); border-radius: 8px; margin: 15px 0;">
                        <div style="font-size: 1.1rem; line-height: 1.6; color: var(--text-primary); margin-bottom: 20px;">
                            ${currentQuestion.question}
                        </div>
                        <div style="background: rgba(170, 0, 255, 0.1); padding: 10px; border-radius: 6px; border: 1px solid var(--accent-purple);">
                            <strong>Key Concept:</strong> <span style="color: var(--accent-purple); font-weight: bold;">${getScienceConcept(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Science Topics Grid -->
                <div class="skills-grid">
                    ${scienceTopics.map(topic => `
                        <div class="skill-card ${topic.name.toLowerCase()}" style="border-color: ${topic.color}">
                            <div class="skill-icon" style="color: ${topic.color}">${topic.icon}</div>
                            <div class="skill-title" style="color: ${topic.color}">${topic.name}</div>
                            <div class="skill-description">${topic.description}</div>
                        </div>
                    `).join('')}
                </div>
                
                <!-- States Comparison -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div class="display-title">Comparison of States of Matter</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 20px;">
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px; border: 2px solid var(--secondary-teal);">
                            <div style="font-weight: bold; color: var(--secondary-teal); margin-bottom: 10px;">SOLID</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                ‚Ä¢ Definite shape<br>
                                ‚Ä¢ Definite volume<br>
                                ‚Ä¢ Cannot flow<br>
                                ‚Ä¢ Not compressible
                            </div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px; border: 2px solid var(--accent-amber);">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 10px;">LIQUID</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                ‚Ä¢ No definite shape<br>
                                ‚Ä¢ Definite volume<br>
                                ‚Ä¢ Can flow<br>
                                ‚Ä¢ Slightly compressible
                            </div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px; border: 2px solid var(--accent-purple);">
                            <div style="font-weight: bold; color: var(--accent-purple); margin-bottom: 10px;">GAS</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                ‚Ä¢ No definite shape<br>
                                ‚Ä¢ No definite volume<br>
                                ‚Ä¢ Can flow<br>
                                ‚Ä¢ Highly compressible
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- State Changes Diagram -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid var(--accent-pink);">
                    <div style="color: var(--accent-pink); font-weight: bold; margin-bottom: 15px; text-align: center;">State Changes</div>
                    <div style="text-align: center; color: var(--text-secondary); line-height: 1.6;">
                        <div style="margin-bottom: 10px;">
                            <span style="color: var(--secondary-teal); font-weight: bold;">SOLID</span>
                            <span style="margin: 0 10px;">‚áÑ</span>
                            <span style="color: var(--accent-amber); font-weight: bold;">LIQUID</span>
                            <br>
                            <small>Melting/Freezing</small>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <span style="color: var(--accent-amber); font-weight: bold;">LIQUID</span>
                            <span style="margin: 0 10px;">‚áÑ</span>
                            <span style="color: var(--accent-purple); font-weight: bold;">GAS</span>
                            <br>
                            <small>Evaporation/Condensation</small>
                        </div>
                        <div>
                            <span style="color: var(--secondary-teal); font-weight: bold;">SOLID</span>
                            <span style="margin: 0 10px;">‚áÑ</span>
                            <span style="color: var(--accent-purple); font-weight: bold;">GAS</span>
                            <br>
                            <small>Sublimation/Deposition</small>
                        </div>
                    </div>
                </div>
                
                <!-- Separation Methods -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div class="display-title">Separation Techniques</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 10px;">Filtration</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Separates insoluble solids from liquids using a filter</div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 10px;">Evaporation</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Separates dissolved solids by boiling off liquid</div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 10px;">Distillation</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Separates liquids based on different boiling points</div>
                        </div>
                        <div style="padding: 15px; background: var(--dark-surface); border-radius: 8px;">
                            <div style="font-weight: bold; color: var(--accent-green); margin-bottom: 10px;">Chromatography</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Separates colored substances based on solubility</div>
                        </div>
                    </div>
                </div>
                
                <!-- Particle Theory Overview -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid var(--accent-cyan);">
                    <div style="color: var(--accent-cyan); font-weight: bold; margin-bottom: 15px; text-align: center;">Particle Theory Principles</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                        ‚Ä¢ All matter is made of tiny particles<br>
                        ‚Ä¢ Particles are constantly moving<br>
                        ‚Ä¢ Particles have spaces between them<br>
                        ‚Ä¢ Heating increases particle motion<br>
                        ‚Ä¢ Particles attract each other
                    </div>
                </div>
                
                <!-- Quick Reference -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div class="display-title">Quick Science Reference</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                        <strong>Melting Point:</strong> Solid ‚Üí Liquid temperature<br>
                        <strong>Boiling Point:</strong> Liquid ‚Üí Gas temperature<br>
                        <strong>Freezing Point:</strong> Liquid ‚Üí Solid temperature<br>
                        <strong>Sublimation:</strong> Solid ‚Üí Gas directly<br>
                        <strong>Condensation:</strong> Gas ‚Üí Liquid<br>
                        <strong>Evaporation:</strong> Liquid ‚Üí Gas at surface<br>
                        <strong>Mixture:</strong> Two+ substances physically combined<br>
                        <strong>Pure Substance:</strong> Single type of particle
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper functions
        function getScienceConcept(typeString) {
            const conceptMap = {
                "basics": "Matter Basics - Understanding states of matter",
                "properties": "Properties - Characteristics of solids, liquids, gases",
                "particles": "Particle Theory - Particles that make up matter",
                "changes": "State Changes - Transitions between states",
                "separation": "Separation - Methods to separate mixtures"
            };
            
            return conceptMap[typeString] || "Science Concept";
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceFact.appendChild(createScienceFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createScienceVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin your science learning journey!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
