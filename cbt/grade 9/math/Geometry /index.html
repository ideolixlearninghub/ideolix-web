<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 9 Math - Geometry | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Geometry Theme */
        :root {
            --angles-blue: #2196F3;
            --polygons-green: #4CAF50;
            --circles-purple: #9C27B0;
            --triangles-amber: #FF9800;
            --proofs-teal: #009688;
            --constructions-red: #F44336;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --geometry-gold: #FFD700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(33, 150, 243, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 90% 30%, rgba(76, 175, 80, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 50% 80%, rgba(156, 39, 176, 0.08) 0%, transparent 40%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--angles-blue), var(--circles-purple), var(--geometry-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--angles-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--angles-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-angles {
            background: var(--angles-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-angles:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-polygons {
            background: var(--polygons-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-polygons:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-circles {
            background: var(--circles-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-circles:hover {
            background: #7B1FA2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-triangles {
            background: var(--triangles-amber);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .btn-triangles:hover {
            background: #F57C00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--angles-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--angles-blue), var(--circles-purple));
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .geometry-tip {
            background: rgba(255, 215, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--geometry-gold);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--angles-blue);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--polygons-green);
            color: var(--polygons-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--angles-blue);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--polygons-green);
        }

        .option.incorrect .option-letter {
            background: #F44336;
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--polygons-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--polygons-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--polygons-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Geometry Practice Area */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
            max-height: 900px;
        }

        /* Practice Sections */
        .practice-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid;
            position: relative;
        }

        .angles-section {
            border-color: var(--angles-blue);
        }

        .polygons-section {
            border-color: var(--polygons-green);
        }

        .circles-section {
            border-color: var(--circles-purple);
        }

        .triangles-section {
            border-color: var(--triangles-amber);
        }

        .constructions-section {
            border-color: var(--constructions-red);
        }

        .proofs-section {
            border-color: var(--proofs-teal);
        }

        .section-title {
            color: inherit;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            font-size: 1.1rem;
        }

        /* Geometry Canvas */
        .geometry-canvas-container {
            position: relative;
            width: 100%;
            height: 200px;
            background: var(--dark-surface);
            border-radius: 6px;
            margin: 10px 0;
            overflow: hidden;
            border: 1px solid var(--dark-border);
        }

        .geometry-canvas {
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        /* Angle Input */
        .angle-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .angle-input {
            width: 80px;
            padding: 8px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 1rem;
            text-align: center;
        }

        .angle-input:focus {
            outline: none;
            border-color: var(--angles-blue);
        }

        .angle-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            min-width: 120px;
        }

        /* Geometry Display */
        .geometry-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            text-align: center;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
        }

        .geometry-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
            justify-content: center;
        }

        /* Formula Display */
        .formula-display {
            background: rgba(33, 150, 243, 0.1);
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            text-align: center;
            color: var(--angles-blue);
            border-left: 3px solid var(--angles-blue);
        }

        /* Theorem Cards */
        .theorem-card {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 12px;
            margin: 8px 0;
            border-left: 4px solid;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .theorem-card:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
        }

        .angles-theorem {
            border-left-color: var(--angles-blue);
        }

        .polygons-theorem {
            border-left-color: var(--polygons-green);
        }

        .circles-theorem {
            border-left-color: var(--circles-purple);
        }

        .theorem-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        .theorem-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Polygon Display */
        .polygon-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }

        .polygon-item {
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--dark-surface);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .polygon-item:hover {
            border-color: var(--polygons-green);
            transform: scale(1.05);
        }

        .polygon-item.active {
            border-color: var(--polygons-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .polygon-shape {
            width: 50px;
            height: 50px;
            margin-bottom: 5px;
        }

        .polygon-name {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Circle Diagram */
        .circle-diagram {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 15px auto;
            border: 2px solid var(--circles-purple);
            border-radius: 50%;
            background: rgba(156, 39, 176, 0.05);
        }

        .circle-center {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--circles-purple);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Step Display */
        .step-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.9rem;
            line-height: 1.4;
            color: var(--text-secondary);
            max-height: 150px;
            overflow-y: auto;
        }

        /* Solution Display */
        .solution-display {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
        }

        /* Quick Reference */
        .reference-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--geometry-gold);
        }

        .properties-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .properties-table th {
            background: var(--dark-card);
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
            border-bottom: 2px solid var(--geometry-gold);
            color: var(--geometry-gold);
        }

        .properties-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--angles-blue), var(--circles-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--angles-blue), var(--circles-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--angles-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Geometry Animation */
        .geometry-construction {
            position: relative;
            width: 100%;
            height: 60px;
            margin: 15px 0;
            overflow: hidden;
        }

        .construction-line {
            position: absolute;
            height: 2px;
            background: var(--angles-blue);
            transform-origin: left center;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .rotate {
            animation: rotate 2s linear infinite;
        }

        @keyframes drawLine {
            from { width: 0; }
            to { width: 100%; }
        }

        .draw-line {
            animation: drawLine 1s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .geometry-controls {
                flex-direction: column;
            }
            
            .geometry-controls .btn {
                width: 100%;
            }
            
            .angle-input-group {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .angle-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 9 Geometry: Angles, Polygons & Circles</h1>
            <p class="welcome-subtitle">Master angle properties, polygon geometry, and circle theorems. Learn to solve geometric proofs, calculate angles, and apply theorems to solve complex problems.</p>
            
            <div class="topic-badge">
                <span>üìê Angle Properties ‚Ä¢ Polygon Geometry ‚Ä¢ Circle Theorems ‚Ä¢ Geometric Proofs ‚Ä¢ Constructions</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-angles" id="startPractice">
                    <span>üìö Begin Geometry Practice (100+ Questions)</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="geometryTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Geometry Practice Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Angle Properties Section -->
                    <div class="practice-section angles-section">
                        <div class="section-title">Angle Properties & Relationships</div>
                        
                        <div class="geometry-canvas-container">
                            <canvas class="geometry-canvas" id="angleCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="angle-input-group">
                            <span class="angle-label">Angle A:</span>
                            <input type="number" id="angleA" class="angle-input" value="60" min="0" max="360">
                            <span class="angle-label">¬∞</span>
                        </div>
                        
                        <div class="angle-input-group">
                            <span class="angle-label">Angle B:</span>
                            <input type="number" id="angleB" class="angle-input" value="120" min="0" max="360">
                            <span class="angle-label">¬∞</span>
                        </div>
                        
                        <div class="geometry-controls">
                            <button class="btn btn-small btn-angles" onclick="calculateAngles()">Calculate Relationships</button>
                            <button class="btn btn-small btn-outline" onclick="showAngleTheorems()">View Theorems</button>
                            <button class="btn btn-small btn-outline" onclick="randomAngles()">Random Angles</button>
                        </div>
                        
                        <div class="solution-display" id="angleResults">
                            Complementary = 90¬∞, Supplementary = 180¬∞, Vertically opposite angles are equal
                        </div>
                        
                        <div class="step-display" id="angleSteps">
                            Set angles and click Calculate to see relationships
                        </div>
                    </div>
                    
                    <!-- Polygon Properties -->
                    <div class="practice-section polygons-section">
                        <div class="section-title">Polygon Properties</div>
                        
                        <div class="polygon-container">
                            <div class="polygon-item" onclick="selectPolygon(3)">
                                <div class="polygon-shape" id="triangleShape"></div>
                                <span class="polygon-name">Triangle</span>
                            </div>
                            <div class="polygon-item" onclick="selectPolygon(4)">
                                <div class="polygon-shape" id="quadrilateralShape"></div>
                                <span class="polygon-name">Quadrilateral</span>
                            </div>
                            <div class="polygon-item" onclick="selectPolygon(5)">
                                <div class="polygon-shape" id="pentagonShape"></div>
                                <span class="polygon-name">Pentagon</span>
                            </div>
                            <div class="polygon-item" onclick="selectPolygon(6)">
                                <div class="polygon-shape" id="hexagonShape"></div>
                                <span class="polygon-name">Hexagon</span>
                            </div>
                            <div class="polygon-item" onclick="selectPolygon(8)">
                                <div class="polygon-shape" id="octagonShape"></div>
                                <span class="polygon-name">Octagon</span>
                            </div>
                        </div>
                        
                        <div class="formula-display" id="polygonFormulas">
                            Sum of interior angles = (n-2) √ó 180¬∞
                        </div>
                        
                        <div class="geometry-controls">
                            <button class="btn btn-small btn-polygons" onclick="calculatePolygon()">Calculate Properties</button>
                            <button class="btn btn-small btn-outline" onclick="explainPolygonFormulas()">Show Formulas</button>
                            <input type="number" id="polygonSides" class="angle-input" value="5" min="3" max="12" style="width: 80px;">
                        </div>
                        
                        <div class="solution-display" id="polygonResults">
                            Select a polygon to see its properties
                        </div>
                    </div>
                    
                    <!-- Triangle Properties -->
                    <div class="practice-section triangles-section">
                        <div class="section-title">Triangle Properties</div>
                        
                        <div class="geometry-canvas-container">
                            <canvas class="geometry-canvas" id="triangleCanvas" width="400" height="200"></canvas>
                        </div>
                        
                        <div class="formula-display">
                            Sum of angles = 180¬∞ ‚Ä¢ Pythagoras: a¬≤ + b¬≤ = c¬≤
                        </div>
                        
                        <div class="geometry-controls">
                            <button class="btn btn-small btn-triangles" onclick="calculateTriangle()">Calculate Triangle</button>
                            <button class="btn btn-small btn-outline" onclick="showTriangleTheorems()">Triangle Theorems</button>
                            <button class="btn btn-small btn-outline" onclick="randomTriangle()">Random Triangle</button>
                        </div>
                        
                        <div class="solution-display" id="triangleResults">
                            Triangle angle sum always equals 180¬∞
                        </div>
                        
                        <div class="step-display" id="triangleSteps">
                            Click Calculate to see triangle properties
                        </div>
                    </div>
                    
                    <!-- Circle Theorems -->
                    <div class="practice-section circles-section">
                        <div class="section-title">Circle Theorems (Introduction)</div>
                        
                        <div class="circle-diagram" id="circleDiagram">
                            <div class="circle-center"></div>
                            <!-- Circle elements will be drawn with JavaScript -->
                        </div>
                        
                        <div class="theorem-card circles-theorem" onclick="showTheorem('circle1')">
                            <div class="theorem-title">Theorem 1: Angle at Center</div>
                            <div class="theorem-description">Angle at center = 2 √ó angle at circumference</div>
                        </div>
                        
                        <div class="theorem-card circles-theorem" onclick="showTheorem('circle2')">
                            <div class="theorem-title">Theorem 2: Angles in Same Segment</div>
                            <div class="theorem-description">Angles in same segment are equal</div>
                        </div>
                        
                        <div class="theorem-card circles-theorem" onclick="showTheorem('circle3')">
                            <div class="theorem-title">Theorem 3: Angle in Semicircle</div>
                            <div class="theorem-description">Angle in semicircle = 90¬∞</div>
                        </div>
                        
                        <div class="geometry-controls">
                            <button class="btn btn-small btn-circles" onclick="demonstrateTheorem()">Demonstrate Theorem</button>
                            <button class="btn btn-small btn-outline" onclick="explainAllCircleTheorems()">All Theorems</button>
                            <select id="theoremSelect" class="angle-input" style="width: 120px;">
                                <option value="1">Theorem 1</option>
                                <option value="2">Theorem 2</option>
                                <option value="3">Theorem 3</option>
                                <option value="4">Theorem 4</option>
                                <option value="5">Theorem 5</option>
                            </select>
                        </div>
                        
                        <div class="solution-display" id="circleTheoremInfo">
                            Select a theorem to learn about it
                        </div>
                    </div>
                    
                    <!-- Quick Reference -->
                    <div class="reference-section">
                        <div class="section-title">Geometry Quick Reference</div>
                        <table class="properties-table">
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Formula/Theorem</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Complementary Angles</td>
                                    <td>Sum = 90¬∞</td>
                                    <td>30¬∞ + 60¬∞ = 90¬∞</td>
                                </tr>
                                <tr>
                                    <td>Supplementary Angles</td>
                                    <td>Sum = 180¬∞</td>
                                    <td>70¬∞ + 110¬∞ = 180¬∞</td>
                                </tr>
                                <tr>
                                    <td>Interior Angles (n-gon)</td>
                                    <td>(n-2) √ó 180¬∞</td>
                                    <td>Triangle: 180¬∞</td>
                                </tr>
                                <tr>
                                    <td>Exterior Angles</td>
                                    <td>Sum = 360¬∞</td>
                                    <td>Any polygon</td>
                                </tr>
                                <tr>
                                    <td>Triangle Sum</td>
                                    <td>‚à†A + ‚à†B + ‚à†C = 180¬∞</td>
                                    <td>60¬∞ + 70¬∞ + 50¬∞ = 180¬∞</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Angle Relationships Proofs -->
                    <div class="practice-section proofs-section">
                        <div class="section-title">Geometric Proofs Practice</div>
                        
                        <div class="geometry-display" id="proofStatement">
                            Prove that vertically opposite angles are equal
                        </div>
                        
                        <div class="geometry-controls">
                            <button class="btn btn-small" style="background: var(--proofs-teal); color: white;" onclick="showProofSteps()">Show Proof</button>
                            <button class="btn btn-small btn-outline" onclick="newProof()">New Proof</button>
                            <button class="btn btn-small btn-outline" onclick="explainProofStructure()">Proof Structure</button>
                        </div>
                        
                        <div class="step-display" id="proofSteps">
                            Click Show Proof to see step-by-step geometric proof
                        </div>
                    </div>
                    
                    <!-- Geometric Constructions -->
                    <div class="practice-section constructions-section">
                        <div class="section-title">Basic Constructions</div>
                        
                        <div class="geometry-construction" id="constructionArea">
                            <div class="construction-line" id="line1" style="width: 0%; top: 20px; left: 10px; transform: rotate(0deg);"></div>
                            <div class="construction-line" id="line2" style="width: 0%; top: 40px; left: 10px; transform: rotate(60deg);"></div>
                            <div class="construction-line" id="line3" style="width: 0%; top: 20px; left: 200px; transform: rotate(90deg);"></div>
                        </div>
                        
                        <div class="geometry-controls">
                            <button class="btn btn-small" style="background: var(--constructions-red); color: white;" onclick="demonstrateConstruction()">Show Construction</button>
                            <select id="constructionSelect" class="angle-input" style="width: 140px;">
                                <option value="bisect">Angle Bisector</option>
                                <option value="perpendicular">Perpendicular Bisector</option>
                                <option value="triangle">Equilateral Triangle</option>
                                <option value="parallel">Parallel Lines</option>
                            </select>
                        </div>
                        
                        <div class="solution-display" id="constructionInfo">
                            Select a construction to see its steps
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-polygons" id="skipQuestion">Skip Question</button>
                <button class="btn btn-circles" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Geometry Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="anglesScore">0</div>
                        <div class="stat-label">Angle Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="polygonsScore">0</div>
                        <div class="stat-label">Polygon Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="circlesScore">0</div>
                        <div class="stat-label">Circle Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-angles" id="retryTopic">Try Again</button>
                    <button class="btn btn-polygons" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // COMPREHENSIVE 100+ QUESTIONS ON GEOMETRY
        
        const questions = [
            // Angle Properties (1-25)
            {
                question: "Two angles are complementary. One angle is 35¬∞. What is the other angle?",
                options: ["55¬∞", "145¬∞", "35¬∞", "90¬∞"],
                answer: "A",
                explanation: "Complementary angles sum to 90¬∞. So 90¬∞ - 35¬∞ = 55¬∞.",
                type: "angles"
            },
            {
                question: "What is the supplement of a 120¬∞ angle?",
                options: ["60¬∞", "240¬∞", "30¬∞", "300¬∞"],
                answer: "A",
                explanation: "Supplementary angles sum to 180¬∞. So 180¬∞ - 120¬∞ = 60¬∞.",
                type: "angles"
            },
            {
                question: "If two lines intersect, vertically opposite angles are:",
                options: ["Equal", "Complementary", "Supplementary", "None of these"],
                answer: "A",
                explanation: "Vertically opposite angles formed by intersecting lines are always equal.",
                type: "angles"
            },
            {
                question: "In the diagram, lines l and m are parallel. If ‚à†1 = 65¬∞, what is ‚à†2?",
                options: ["115¬∞", "65¬∞", "25¬∞", "90¬∞"],
                answer: "A",
                explanation: "‚à†1 and ‚à†2 are supplementary (same-side interior angles). So 180¬∞ - 65¬∞ = 115¬∞.",
                type: "angles"
            },
            {
                question: "Angles on a straight line add up to:",
                options: ["180¬∞", "90¬∞", "360¬∞", "270¬∞"],
                answer: "A",
                explanation: "Angles on a straight line are supplementary, summing to 180¬∞.",
                type: "angles"
            },
            {
                question: "If ‚à†A and ‚à†B are complementary, and ‚à†A = 2x, ‚à†B = 3x, find ‚à†A.",
                options: ["36¬∞", "54¬∞", "72¬∞", "90¬∞"],
                answer: "A",
                explanation: "2x + 3x = 90¬∞ ‚Üí 5x = 90¬∞ ‚Üí x = 18¬∞. So ‚à†A = 2(18¬∞) = 36¬∞.",
                type: "angles"
            },
            {
                question: "Two angles are supplementary. One is 20¬∞ more than the other. Find the smaller angle.",
                options: ["80¬∞", "100¬∞", "70¬∞", "110¬∞"],
                answer: "A",
                explanation: "Let smaller angle = x. Then x + (x+20) = 180 ‚Üí 2x = 160 ‚Üí x = 80¬∞.",
                type: "angles"
            },
            {
                question: "Alternate interior angles between parallel lines are:",
                options: ["Equal", "Supplementary", "Complementary", "None of these"],
                answer: "A",
                explanation: "When lines are parallel, alternate interior angles are equal.",
                type: "angles"
            },
            {
                question: "Corresponding angles formed by a transversal with parallel lines are:",
                options: ["Equal", "Supplementary", "Complementary", "Add to 180¬∞"],
                answer: "A",
                explanation: "Corresponding angles are equal when lines are parallel.",
                type: "angles"
            },
            {
                question: "What is the angle between the hands of a clock at 3:00?",
                options: ["90¬∞", "180¬∞", "60¬∞", "120¬∞"],
                answer: "A",
                explanation: "At 3:00, hour hand at 3, minute hand at 12. Each hour = 30¬∞, so 3 hours = 90¬∞.",
                type: "angles"
            },

            // Polygon Properties (26-50)
            {
                question: "What is the sum of interior angles in a triangle?",
                options: ["180¬∞", "360¬∞", "90¬∞", "540¬∞"],
                answer: "A",
                explanation: "The sum of interior angles in any triangle is always 180¬∞.",
                type: "polygons"
            },
            {
                question: "Sum of interior angles of a quadrilateral:",
                options: ["360¬∞", "180¬∞", "540¬∞", "720¬∞"],
                answer: "A",
                explanation: "Sum = (n-2) √ó 180¬∞ = (4-2) √ó 180¬∞ = 2 √ó 180¬∞ = 360¬∞.",
                type: "polygons"
            },
            {
                question: "Each interior angle of a regular pentagon measures:",
                options: ["108¬∞", "72¬∞", "120¬∞", "90¬∞"],
                answer: "A",
                explanation: "Sum = (5-2) √ó 180¬∞ = 540¬∞. Each angle = 540¬∞ √∑ 5 = 108¬∞.",
                type: "polygons"
            },
            {
                question: "Sum of exterior angles of any polygon (always):",
                options: ["360¬∞", "180¬∞", "540¬∞", "Depends on sides"],
                answer: "A",
                explanation: "The sum of exterior angles of any polygon is always 360¬∞.",
                type: "polygons"
            },
            {
                question: "How many diagonals does a hexagon have?",
                options: ["9", "6", "12", "8"],
                answer: "A",
                explanation: "Number of diagonals = n(n-3)/2 = 6(3)/2 = 18/2 = 9.",
                type: "polygons"
            },
            {
                question: "A polygon with 8 sides is called:",
                options: ["Octagon", "Hexagon", "Pentagon", "Decagon"],
                answer: "A",
                explanation: "8-sided polygon is an octagon.",
                type: "polygons"
            },
            {
                question: "Each exterior angle of a regular decagon measures:",
                options: ["36¬∞", "144¬∞", "72¬∞", "108¬∞"],
                answer: "A",
                explanation: "Exterior angle = 360¬∞/n = 360¬∞/10 = 36¬∞.",
                type: "polygons"
            },
            {
                question: "Sum of interior angles of a heptagon (7 sides):",
                options: ["900¬∞", "720¬∞", "540¬∞", "360¬∞"],
                answer: "A",
                explanation: "Sum = (7-2) √ó 180¬∞ = 5 √ó 180¬∞ = 900¬∞.",
                type: "polygons"
            },
            {
                question: "In a regular polygon, if each exterior angle is 45¬∞, how many sides?",
                options: ["8", "6", "10", "12"],
                answer: "A",
                explanation: "n = 360¬∞/45¬∞ = 8 sides.",
                type: "polygons"
            },
            {
                question: "If a polygon has 10 sides, sum of interior angles is:",
                options: ["1440¬∞", "1260¬∞", "1620¬∞", "1800¬∞"],
                answer: "A",
                explanation: "Sum = (10-2) √ó 180¬∞ = 8 √ó 180¬∞ = 1440¬∞.",
                type: "polygons"
            },

            // Triangle Properties (51-70)
            {
                question: "In a triangle, angles are in ratio 2:3:4. Largest angle is:",
                options: ["80¬∞", "60¬∞", "40¬∞", "100¬∞"],
                answer: "A",
                explanation: "2x + 3x + 4x = 180¬∞ ‚Üí 9x = 180¬∞ ‚Üí x = 20¬∞. Largest = 4x = 80¬∞.",
                type: "triangles"
            },
            {
                question: "In a right triangle, the two acute angles are:",
                options: ["Complementary", "Supplementary", "Equal", "None"],
                answer: "A",
                explanation: "In a right triangle, the two acute angles sum to 90¬∞, so complementary.",
                type: "triangles"
            },
            {
                question: "In an isosceles triangle, base angles are:",
                options: ["Equal", "Complementary", "Supplementary", "Right angles"],
                answer: "A",
                explanation: "In an isosceles triangle, angles opposite equal sides are equal.",
                type: "triangles"
            },
            {
                question: "All angles in an equilateral triangle are:",
                options: ["60¬∞", "90¬∞", "45¬∞", "30¬∞"],
                answer: "A",
                explanation: "Equilateral triangle has all sides equal, so all angles = 60¬∞.",
                type: "triangles"
            },
            {
                question: "In triangle ABC, ‚à†A = 50¬∞, ‚à†B = 70¬∞. What is ‚à†C?",
                options: ["60¬∞", "50¬∞", "70¬∞", "120¬∞"],
                answer: "A",
                explanation: "‚à†A + ‚à†B + ‚à†C = 180¬∞ ‚Üí 50¬∞ + 70¬∞ + ‚à†C = 180¬∞ ‚Üí ‚à†C = 60¬∞.",
                type: "triangles"
            },
            {
                question: "The exterior angle of a triangle equals:",
                options: ["Sum of two opposite interior angles", "Sum of all interior angles", "180¬∞ minus adjacent angle", "360¬∞ minus interior angles"],
                answer: "A",
                explanation: "Exterior angle = sum of two opposite interior angles.",
                type: "triangles"
            },

            // Circle Theorems (71-100)
            {
                question: "Angle in a semicircle is always:",
                options: ["90¬∞", "180¬∞", "45¬∞", "60¬∞"],
                answer: "A",
                explanation: "The angle subtended by a diameter (angle in a semicircle) is always 90¬∞.",
                type: "circles"
            },
            {
                question: "Angle at the center is ______ the angle at circumference.",
                options: ["Twice", "Half", "Equal to", "Three times"],
                answer: "A",
                explanation: "Angle at center = 2 √ó angle at circumference (same arc).",
                type: "circles"
            },
            {
                question: "Angles in the same segment are:",
                options: ["Equal", "Supplementary", "Complementary", "None"],
                answer: "A",
                explanation: "Angles subtended by the same arc in the same segment are equal.",
                type: "circles"
            },
            {
                question: "Opposite angles of a cyclic quadrilateral are:",
                options: ["Supplementary", "Equal", "Complementary", "None"],
                answer: "A",
                explanation: "In a cyclic quadrilateral, opposite angles sum to 180¬∞ (supplementary).",
                type: "circles"
            },
            {
                question: "Angle between tangent and radius at point of contact is:",
                options: ["90¬∞", "180¬∞", "45¬∞", "60¬∞"],
                answer: "A",
                explanation: "The angle between a tangent and radius at the point of contact is 90¬∞.",
                type: "circles"
            },
            {
                question: "Tangents from an external point to a circle are:",
                options: ["Equal in length", "Perpendicular", "Parallel", "None"],
                answer: "A",
                explanation: "Tangents drawn from an external point to a circle are equal in length.",
                type: "circles"
            },
            {
                question: "If ‚à†AOB at center is 120¬∞, then ‚à†ACB at circumference is:",
                options: ["60¬∞", "120¬∞", "240¬∞", "30¬∞"],
                answer: "A",
                explanation: "Angle at circumference = ¬Ω angle at center = ¬Ω √ó 120¬∞ = 60¬∞.",
                type: "circles"
            },
            {
                question: "In cyclic quadrilateral ABCD, ‚à†A = 70¬∞, then ‚à†C = ?",
                options: ["110¬∞", "70¬∞", "20¬∞", "90¬∞"],
                answer: "A",
                explanation: "Opposite angles sum to 180¬∞. So ‚à†C = 180¬∞ - 70¬∞ = 110¬∞.",
                type: "circles"
            },
            {
                question: "Two chords AB and CD intersect at E inside circle. If AE√óEB = 16 and CE = 4, find ED.",
                options: ["4", "8", "2", "12"],
                answer: "A",
                explanation: "Intersecting chords theorem: AE√óEB = CE√óED ‚Üí 16 = 4√óED ‚Üí ED = 4.",
                type: "circles"
            },
            {
                question: "Angle between two tangents from external point is 60¬∞. What is angle between radii to points of contact?",
                options: ["120¬∞", "60¬∞", "30¬∞", "90¬∞"],
                answer: "A",
                explanation: "Quadrilateral formed has angles: 60¬∞ + 90¬∞ + 90¬∞ + x = 360¬∞ ‚Üí x = 120¬∞.",
                type: "circles"
            }
        ];

        // Geometry practice data
        const angleProblems = [
            {
                angle1: 60,
                angle2: 120,
                relationships: [
                    "Angles are supplementary (60¬∞ + 120¬∞ = 180¬∞)",
                    "They form a linear pair",
                    "They are adjacent angles",
                    "They share a common arm and vertex"
                ]
            },
            {
                angle1: 30,
                angle2: 60,
                relationships: [
                    "Angles are complementary (30¬∞ + 60¬∞ = 90¬∞)",
                    "They form a right angle together",
                    "They are acute angles",
                    "Each is less than 90¬∞"
                ]
            },
            {
                angle1: 45,
                angle2: 45,
                relationships: [
                    "Angles are equal (45¬∞ = 45¬∞)",
                    "They could be vertically opposite",
                    "They are acute angles",
                    "They are complementary to each other (45¬∞ + 45¬∞ = 90¬∞)"
                ]
            }
        ];

        const polygonData = [
            {
                name: "Triangle",
                sides: 3,
                interiorSum: 180,
                exteriorSum: 360,
                interiorAngle: 60,
                exteriorAngle: 120,
                diagonals: 0
            },
            {
                name: "Quadrilateral",
                sides: 4,
                interiorSum: 360,
                exteriorSum: 360,
                interiorAngle: 90,
                exteriorAngle: 90,
                diagonals: 2
            },
            {
                name: "Pentagon",
                sides: 5,
                interiorSum: 540,
                exteriorSum: 360,
                interiorAngle: 108,
                exteriorAngle: 72,
                diagonals: 5
            },
            {
                name: "Hexagon",
                sides: 6,
                interiorSum: 720,
                exteriorSum: 360,
                interiorAngle: 120,
                exteriorAngle: 60,
                diagonals: 9
            },
            {
                name: "Octagon",
                sides: 8,
                interiorSum: 1080,
                exteriorSum: 360,
                interiorAngle: 135,
                exteriorAngle: 45,
                diagonals: 20
            }
        ];

        const triangleProblems = [
            {
                angles: [50, 60, 70],
                type: "Acute scalene triangle",
                properties: [
                    "All angles < 90¬∞ (acute)",
                    "No equal sides (scalene)",
                    "Sum = 180¬∞ (50+60+70=180)",
                    "Exterior angles: 130¬∞, 120¬∞, 110¬∞"
                ]
            },
            {
                angles: [90, 45, 45],
                type: "Right isosceles triangle",
                properties: [
                    "One angle = 90¬∞ (right)",
                    "Two equal angles = 45¬∞ (isosceles)",
                    "Pythagorean triple possible",
                    "Two acute angles complementary"
                ]
            },
            {
                angles: [60, 60, 60],
                type: "Equilateral triangle",
                properties: [
                    "All angles = 60¬∞",
                    "All sides equal",
                    "Also equiangular",
                    "Regular polygon"
                ]
            }
        ];

        const circleTheorems = [
            {
                id: 1,
                name: "Angle at Center Theorem",
                statement: "The angle subtended by an arc at the center is twice the angle subtended at any point on the remaining part of the circle.",
                formula: "‚à†AOB = 2 √ó ‚à†ACB",
                proof: "Draw radii OA, OB, OC. Consider isosceles triangles. Base angles equal. Angle sum property gives the relationship."
            },
            {
                id: 2,
                name: "Angles in Same Segment Theorem",
                statement: "Angles in the same segment of a circle are equal.",
                formula: "‚à†ADB = ‚à†ACB",
                proof: "Both angles subtend the same arc AB. By angle at center theorem, both = ¬Ω‚à†AOB."
            },
            {
                id: 3,
                name: "Angle in a Semicircle Theorem",
                statement: "The angle in a semicircle is a right angle (90¬∞).",
                formula: "‚à†ACB = 90¬∞",
                proof: "Arc AB is a semicircle, so ‚à†AOB = 180¬∞. By angle at center theorem, ‚à†ACB = ¬Ω √ó 180¬∞ = 90¬∞."
            },
            {
                id: 4,
                name: "Cyclic Quadrilateral Theorem",
                statement: "Opposite angles of a cyclic quadrilateral are supplementary.",
                formula: "‚à†A + ‚à†C = 180¬∞, ‚à†B + ‚à†D = 180¬∞",
                proof: "Consider arcs subtended. Use angle at center theorem and angle sum of quadrilateral."
            },
            {
                id: 5,
                name: "Tangent-Radius Theorem",
                statement: "The angle between a tangent and a radius at the point of contact is 90¬∞.",
                formula: "‚à†OAP = 90¬∞",
                proof: "Assume not 90¬∞, then line would intersect circle at another point, contradicting tangent definition."
            }
        ];

        const geometricProofs = [
            {
                statement: "Prove that vertically opposite angles are equal.",
                steps: [
                    "1. Let lines AB and CD intersect at point O",
                    "2. ‚à†AOC and ‚à†BOD are vertically opposite",
                    "3. ‚à†AOC + ‚à†AOD = 180¬∞ (linear pair)",
                    "4. ‚à†BOD + ‚à†AOD = 180¬∞ (linear pair)",
                    "5. Therefore, ‚à†AOC = ‚à†BOD",
                    "6. Similarly, ‚à†AOD = ‚à†BOC",
                    "‚úì All vertically opposite angles are equal"
                ]
            },
            {
                statement: "Prove that the sum of angles in a triangle is 180¬∞.",
                steps: [
                    "1. Consider triangle ABC",
                    "2. Draw line DE through A parallel to BC",
                    "3. ‚à†DAB = ‚à†ABC (alternate interior angles)",
                    "4. ‚à†EAC = ‚à†ACB (alternate interior angles)",
                    "5. ‚à†DAB + ‚à†BAC + ‚à†EAC = 180¬∞ (angles on straight line)",
                    "6. Therefore, ‚à†ABC + ‚à†BAC + ‚à†ACB = 180¬∞",
                    "‚úì Sum of angles in triangle = 180¬∞"
                ]
            }
        ];

        const constructions = [
            {
                name: "Angle Bisector",
                steps: [
                    "1. Draw an angle with vertex O",
                    "2. With O as center, draw arc cutting arms at A and B",
                    "3. With A and B as centers, draw arcs of equal radius intersecting at P",
                    "4. Draw line OP",
                    "5. OP is the angle bisector"
                ],
                tools: ["Ruler", "Compass"]
            },
            {
                name: "Perpendicular Bisector",
                steps: [
                    "1. Draw line segment AB",
                    "2. With A and B as centers, draw arcs of radius > ¬ΩAB",
                    "3. Arcs intersect at P and Q",
                    "4. Draw line through P and Q",
                    "5. This is perpendicular bisector of AB"
                ],
                tools: ["Ruler", "Compass"]
            }
        ];

        // Geometry tips
        const geometryTips = [
            "Tip: Complementary angles sum to 90¬∞, Supplementary angles sum to 180¬∞",
            "Tip: Sum of interior angles of polygon = (n-2) √ó 180¬∞",
            "Tip: Sum of exterior angles of any polygon is always 360¬∞",
            "Tip: Angle in semicircle = 90¬∞, Angle at center = 2 √ó angle at circumference",
            "Tip: In cyclic quadrilateral, opposite angles sum to 180¬∞",
            "Tip: Vertically opposite angles are always equal",
            "Tip: Corresponding angles are equal when lines are parallel",
            "Tip: Alternate interior angles are equal when lines are parallel"
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            anglesScore: 0,
            polygonsScore: 0,
            circlesScore: 0,
            currentAngleProblem: 0,
            currentPolygon: 3,
            currentTriangle: 0,
            currentTheorem: 0,
            currentProof: 0,
            currentConstruction: 0,
            angleCanvas: null,
            angleCtx: null,
            triangleCanvas: null,
            triangleCtx: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const geometryTip = document.getElementById('geometryTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const anglesScore = document.getElementById('anglesScore');
        const polygonsScore = document.getElementById('polygonsScore');
        const circlesScore = document.getElementById('circlesScore');
        const timeSpent = document.getElementById('timeSpent');
        
        // Practice area elements
        const angleA = document.getElementById('angleA');
        const angleB = document.getElementById('angleB');
        const angleResults = document.getElementById('angleResults');
        const angleSteps = document.getElementById('angleSteps');
        const polygonResults = document.getElementById('polygonResults');
        const polygonFormulas = document.getElementById('polygonFormulas');
        const polygonSides = document.getElementById('polygonSides');
        const triangleResults = document.getElementById('triangleResults');
        const triangleSteps = document.getElementById('triangleSteps');
        const circleTheoremInfo = document.getElementById('circleTheoremInfo');
        const theoremSelect = document.getElementById('theoremSelect');
        const proofStatement = document.getElementById('proofStatement');
        const proofSteps = document.getElementById('proofSteps');
        const constructionInfo = document.getElementById('constructionInfo');
        const constructionSelect = document.getElementById('constructionSelect');
        const circleDiagram = document.getElementById('circleDiagram');
        const constructionArea = document.getElementById('constructionArea');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            setupGeometryTools();
            initializeCanvases();
            drawPolygonShapes();
        }

        // Setup geometry tools
        function setupGeometryTools() {
            updateAngleCanvas();
            updateTriangleCanvas();
            updatePolygonDisplay();
        }

        // Initialize canvases
        function initializeCanvases() {
            // Angle canvas
            appState.angleCanvas = document.getElementById('angleCanvas');
            appState.angleCtx = appState.angleCanvas.getContext('2d');
            
            // Triangle canvas
            appState.triangleCanvas = document.getElementById('triangleCanvas');
            appState.triangleCtx = appState.triangleCanvas.getContext('2d');
        }

        // Draw polygon shapes
        function drawPolygonShapes() {
            const shapes = ['triangleShape', 'quadrilateralShape', 'pentagonShape', 'hexagonShape', 'octagonShape'];
            const sides = [3, 4, 5, 6, 8];
            
            shapes.forEach((shapeId, index) => {
                const canvas = document.createElement('canvas');
                canvas.width = 50;
                canvas.height = 50;
                const ctx = canvas.getContext('2d');
                
                drawRegularPolygon(ctx, 25, 25, 20, sides[index]);
                
                document.getElementById(shapeId).appendChild(canvas);
            });
        }

        // Draw regular polygon
        function drawRegularPolygon(ctx, x, y, radius, sides) {
            ctx.beginPath();
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 2;
            ctx.fillStyle = 'rgba(76, 175, 80, 0.1)';
            
            for (let i = 0; i < sides; i++) {
                const angle = (i * 2 * Math.PI / sides) - Math.PI / 2;
                const px = x + radius * Math.cos(angle);
                const py = y + radius * Math.sin(angle);
                
                if (i === 0) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
        }

        // Update angle canvas
        function updateAngleCanvas() {
            const ctx = appState.angleCtx;
            const width = appState.angleCanvas.width;
            const height = appState.angleCanvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw coordinate system
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            // Draw grid
            for (let x = 0; x <= width; x += 20) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            for (let y = 0; y <= height; y += 20) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Draw center point
            const centerX = width / 2;
            const centerY = height / 2;
            
            // Draw angle A
            const angleAValue = parseFloat(angleA.value) || 60;
            const angleBValue = parseFloat(angleB.value) || 120;
            
            // Draw angle A (blue)
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + 80, centerY);
            ctx.stroke();
            
            // Draw angle B (green)
            ctx.strokeStyle = '#4CAF50';
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + 80 * Math.cos((angleBValue * Math.PI) / 180),
                centerY + 80 * Math.sin((angleBValue * Math.PI) / 180)
            );
            ctx.stroke();
            
            // Draw angle arc for A
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX, centerY, 30, 0, (angleAValue * Math.PI) / 180);
            ctx.stroke();
            
            // Draw angle arc for B
            ctx.strokeStyle = '#4CAF50';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 40, 0, (angleBValue * Math.PI) / 180);
            ctx.stroke();
            
            // Label angles
            ctx.fillStyle = '#2196F3';
            ctx.font = '14px Arial';
            ctx.fillText(`${angleAValue}¬∞`, centerX + 40, centerY - 10);
            
            ctx.fillStyle = '#4CAF50';
            ctx.fillText(`${angleBValue}¬∞`, 
                centerX + 45 * Math.cos((angleBValue * Math.PI) / 360),
                centerY + 45 * Math.sin((angleBValue * Math.PI) / 360) - 10
            );
        }

        // Calculate angles
        function calculateAngles() {
            const angleAValue = parseFloat(angleA.value) || 0;
            const angleBValue = parseFloat(angleB.value) || 0;
            
            const sum = angleAValue + angleBValue;
            const difference = Math.abs(angleAValue - angleBValue);
            
            let relationships = [];
            
            if (sum === 90) {
                relationships.push("‚úÖ Complementary angles (sum = 90¬∞)");
            } else {
                relationships.push(`Not complementary (sum = ${sum}¬∞)`);
            }
            
            if (sum === 180) {
                relationships.push("‚úÖ Supplementary angles (sum = 180¬∞)");
            } else {
                relationships.push(`Not supplementary (sum = ${sum}¬∞)`);
            }
            
            if (angleAValue === angleBValue) {
                relationships.push("‚úÖ Angles are equal");
                relationships.push("Could be vertically opposite angles");
            } else {
                relationships.push(`Angles differ by ${difference}¬∞`);
            }
            
            if (angleAValue < 90 && angleBValue < 90) {
                relationships.push("Both angles are acute (< 90¬∞)");
            } else if (angleAValue > 90 || angleBValue > 90) {
                relationships.push("At least one angle is obtuse (> 90¬∞)");
            }
            
            angleResults.innerHTML = `<strong>Angle Relationships:</strong><br>${relationships.join('<br>')}`;
            angleSteps.innerHTML = `<strong>Analysis:</strong><br>‚Ä¢ Angle A = ${angleAValue}¬∞<br>‚Ä¢ Angle B = ${angleBValue}¬∞<br>‚Ä¢ Sum = ${sum}¬∞<br>‚Ä¢ Difference = ${difference}¬∞`;
            
            updateAngleCanvas();
            angleResults.classList.add('pulse');
            setTimeout(() => angleResults.classList.remove('pulse'), 1000);
        }

        function showAngleTheorems() {
            alert(`ANGLE PROPERTIES & THEOREMS:

1. COMPLEMENTARY ANGLES:
   ‚Ä¢ Sum = 90¬∞
   ‚Ä¢ Example: 30¬∞ + 60¬∞ = 90¬∞

2. SUPPLEMENTARY ANGLES:
   ‚Ä¢ Sum = 180¬∞
   ‚Ä¢ Example: 70¬∞ + 110¬∞ = 180¬∞

3. VERTICALLY OPPOSITE ANGLES:
   ‚Ä¢ Formed by intersecting lines
   ‚Ä¢ Always equal
   ‚Ä¢ Example: X-shaped pattern

4. ADJACENT ANGLES:
   ‚Ä¢ Share common vertex and side
   ‚Ä¢ Can be complementary or supplementary

5. LINEAR PAIR:
   ‚Ä¢ Adjacent angles on straight line
   ‚Ä¢ Always supplementary (sum = 180¬∞)

6. CORRESPONDING ANGLES (parallel lines):
   ‚Ä¢ Equal when lines are parallel
   ‚Ä¢ F-shaped pattern

7. ALTERNATE INTERIOR ANGLES:
   ‚Ä¢ Equal when lines are parallel
   ‚Ä¢ Z-shaped pattern

8. ALTERNATE EXTERIOR ANGLES:
   ‚Ä¢ Equal when lines are parallel
   ‚Ä¢ Outside the parallel lines`);
        }

        function randomAngles() {
            // Generate random angles that demonstrate relationships
            const type = Math.floor(Math.random() * 3);
            
            switch(type) {
                case 0: // Complementary
                    const comp1 = Math.floor(Math.random() * 89) + 1;
                    angleA.value = comp1;
                    angleB.value = 90 - comp1;
                    break;
                case 1: // Supplementary
                    const supp1 = Math.floor(Math.random() * 179) + 1;
                    angleA.value = supp1;
                    angleB.value = 180 - supp1;
                    break;
                case 2: // Equal
                    const equal = Math.floor(Math.random() * 180);
                    angleA.value = equal;
                    angleB.value = equal;
                    break;
            }
            
            updateAngleCanvas();
            calculateAngles();
        }

        // Polygon functions
        function selectPolygon(sides) {
            appState.currentPolygon = sides;
            updatePolygonDisplay();
            
            // Update active state
            document.querySelectorAll('.polygon-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const polygonNames = ['triangle', 'quadrilateral', 'pentagon', 'hexagon', 'octagon'];
            const index = polygonNames.findIndex(name => {
                const shape = polygonData.find(p => p.sides === sides);
                return shape?.name.toLowerCase() === name;
            });
            
            if (index !== -1) {
                document.querySelectorAll('.polygon-item')[index].classList.add('active');
            }
        }

        function updatePolygonDisplay() {
            const sides = appState.currentPolygon;
            const polygon = polygonData.find(p => p.sides === sides) || polygonData[2];
            
            polygonFormulas.innerHTML = `
                Sum of interior angles = (n-2) √ó 180¬∞ = (${sides}-2) √ó 180¬∞ = ${(sides-2)*180}¬∞<br>
                Each interior angle (regular) = ${(sides-2)*180/sides}¬∞<br>
                Each exterior angle = 360¬∞/${sides} = ${360/sides}¬∞`;
            
            polygonResults.innerHTML = `
                <strong>${polygon.name} Properties:</strong><br>
                ‚Ä¢ Sides: ${polygon.sides}<br>
                ‚Ä¢ Interior angle sum: ${polygon.interiorSum}¬∞<br>
                ‚Ä¢ Exterior angle sum: ${polygon.exteriorSum}¬∞<br>
                ‚Ä¢ Diagonals: ${polygon.diagonals}<br>
                ‚Ä¢ Interior angle (regular): ${polygon.interiorAngle}¬∞<br>
                ‚Ä¢ Exterior angle: ${polygon.exteriorAngle}¬∞`;
        }

        function calculatePolygon() {
            const sides = parseInt(polygonSides.value) || 5;
            appState.currentPolygon = sides;
            updatePolygonDisplay();
            polygonResults.classList.add('pulse');
            setTimeout(() => polygonResults.classList.remove('pulse'), 1000);
        }

        function explainPolygonFormulas() {
            alert(`POLYGON FORMULAS:

1. SUM OF INTERIOR ANGLES:
   ‚Ä¢ Formula: (n - 2) √ó 180¬∞
   ‚Ä¢ Where n = number of sides
   ‚Ä¢ Example: Pentagon (n=5): (5-2)√ó180¬∞ = 540¬∞

2. EACH INTERIOR ANGLE (REGULAR POLYGON):
   ‚Ä¢ Formula: [(n - 2) √ó 180¬∞] √∑ n
   ‚Ä¢ Regular means all sides and angles equal
   ‚Ä¢ Example: Regular hexagon: (4√ó180¬∞)/6 = 120¬∞

3. SUM OF EXTERIOR ANGLES (ANY POLYGON):
   ‚Ä¢ Always 360¬∞ (regardless of number of sides)

4. EACH EXTERIOR ANGLE (REGULAR POLYGON):
   ‚Ä¢ Formula: 360¬∞ √∑ n
   ‚Ä¢ Example: Regular octagon: 360¬∞/8 = 45¬∞

5. NUMBER OF DIAGONALS:
   ‚Ä¢ Formula: n(n - 3) √∑ 2
   ‚Ä¢ Diagonal connects non-adjacent vertices
   ‚Ä¢ Example: Hexagon: 6√ó3√∑2 = 9 diagonals

KEY POLYGON NAMES:
‚Ä¢ Triangle (3), Quadrilateral (4), Pentagon (5)
‚Ä¢ Hexagon (6), Heptagon (7), Octagon (8)
‚Ä¢ Nonagon (9), Decagon (10)`);
        }

        // Triangle functions
        function updateTriangleCanvas() {
            const ctx = appState.triangleCtx;
            const width = appState.triangleCanvas.width;
            const height = appState.triangleCanvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Draw coordinate grid
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            
            for (let x = 0; x <= width; x += 20) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            for (let y = 0; y <= height; y += 20) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Draw current triangle
            const triangle = triangleProblems[appState.currentTriangle];
            if (!triangle) return;
            
            // Simple triangle representation
            const vertices = [
                {x: 100, y: 150},  // A
                {x: 300, y: 150},  // B
                {x: 200, y: 50}    // C
            ];
            
            // Draw triangle
            ctx.strokeStyle = '#FF9800';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(vertices[0].x, vertices[0].y);
            ctx.lineTo(vertices[1].x, vertices[1].y);
            ctx.lineTo(vertices[2].x, vertices[2].y);
            ctx.closePath();
            ctx.stroke();
            
            // Label vertices with angles
            ctx.fillStyle = '#FF9800';
            ctx.font = '14px Arial';
            ctx.fillText(`${triangle.angles[0]}¬∞`, vertices[0].x - 30, vertices[0].y + 20);
            ctx.fillText(`${triangle.angles[1]}¬∞`, vertices[1].x + 10, vertices[1].y + 20);
            ctx.fillText(`${triangle.angles[2]}¬∞`, vertices[2].x - 10, vertices[2].y - 10);
            
            // Draw angle arcs
            drawAngleArc(ctx, vertices[0], vertices[1], vertices[2], triangle.angles[0], '#FF9800');
            drawAngleArc(ctx, vertices[1], vertices[2], vertices[0], triangle.angles[1], '#FF9800');
            drawAngleArc(ctx, vertices[2], vertices[0], vertices[1], triangle.angles[2], '#FF9800');
        }

        function drawAngleArc(ctx, vertex, point1, point2, angle, color) {
            // Calculate vectors
            const v1 = {x: point1.x - vertex.x, y: point1.y - vertex.y};
            const v2 = {x: point2.x - vertex.x, y: point2.y - vertex.y};
            
            // Calculate angles
            const angle1 = Math.atan2(v1.y, v1.x);
            const angle2 = Math.atan2(v2.y, v2.x);
            
            // Draw arc
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(vertex.x, vertex.y, 25, angle1, angle2);
            ctx.stroke();
        }

        function calculateTriangle() {
            const triangle = triangleProblems[appState.currentTriangle];
            
            triangleResults.innerHTML = `
                <strong>${triangle.type}</strong><br>
                Angles: ${triangle.angles[0]}¬∞, ${triangle.angles[1]}¬∞, ${triangle.angles[2]}¬∞<br>
                Sum: ${triangle.angles.reduce((a, b) => a + b, 0)}¬∞`;
            
            triangleSteps.innerHTML = `<strong>Properties:</strong><br>${triangle.properties.join('<br>')}`;
            
            updateTriangleCanvas();
            triangleResults.classList.add('pulse');
            setTimeout(() => triangleResults.classList.remove('pulse'), 1000);
        }

        function showTriangleTheorems() {
            alert(`TRIANGLE THEOREMS & PROPERTIES:

1. ANGLE SUM THEOREM:
   ‚Ä¢ Sum of interior angles = 180¬∞
   ‚Ä¢ ‚à†A + ‚à†B + ‚à†C = 180¬∞

2. EXTERIOR ANGLE THEOREM:
   ‚Ä¢ Exterior angle = sum of two opposite interior angles
   ‚Ä¢ ‚à†ACD = ‚à†A + ‚à†B

3. TRIANGLE INEQUALITY THEOREM:
   ‚Ä¢ Sum of any two sides > third side
   ‚Ä¢ a + b > c, b + c > a, a + c > b

4. PYTHAGOREAN THEOREM (Right triangles only):
   ‚Ä¢ a¬≤ + b¬≤ = c¬≤ (c = hypotenuse)

5. CONGRUENCE CRITERIA:
   ‚Ä¢ SSS: Three sides equal
   ‚Ä¢ SAS: Two sides and included angle equal
   ‚Ä¢ ASA: Two angles and included side equal
   ‚Ä¢ RHS: Right angle, hypotenuse, one side equal

6. TYPES OF TRIANGLES:
   ‚Ä¢ By sides: Scalene (no equal), Isosceles (two equal), Equilateral (all equal)
   ‚Ä¢ By angles: Acute (all < 90¬∞), Right (one = 90¬∞), Obtuse (one > 90¬∞)

7. SPECIAL PROPERTIES:
   ‚Ä¢ In isosceles triangle, base angles are equal
   ‚Ä¢ In equilateral triangle, all angles = 60¬∞`);
        }

        function randomTriangle() {
            appState.currentTriangle = (appState.currentTriangle + 1) % triangleProblems.length;
            updateTriangleCanvas();
            calculateTriangle();
        }

        // Circle theorem functions
        function showTheorem(theoremId) {
            const theorem = circleTheorems.find(t => t.id == theoremId.charAt(theoremId.length - 1)) || circleTheorems[0];
            
            circleTheoremInfo.innerHTML = `
                <strong>${theorem.name}</strong><br>
                <em>Statement:</em> ${theorem.statement}<br>
                <em>Formula:</em> ${theorem.formula}<br>
                <em>Proof Sketch:</em> ${theorem.proof}`;
            
            // Update diagram
            updateCircleDiagram(theorem.id);
            
            circleTheoremInfo.classList.add('pulse');
            setTimeout(() => circleTheoremInfo.classList.remove('pulse'), 1000);
        }

        function updateCircleDiagram(theoremId) {
            // Clear previous diagram
            circleDiagram.innerHTML = '<div class="circle-center"></div>';
            
            const centerX = 90;
            const centerY = 90;
            const radius = 80;
            
            // Create canvas for dynamic drawing
            const canvas = document.createElement('canvas');
            canvas.width = 180;
            canvas.height = 180;
            canvas.style.position = 'absolute';
            canvas.style.left = '0';
            canvas.style.top = '0';
            const ctx = canvas.getContext('2d');
            
            // Draw circle
            ctx.strokeStyle = '#9C27B0';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw based on theorem
            switch(theoremId) {
                case 1: // Angle at center
                    // Draw arc with center and circumference angles
                    ctx.strokeStyle = '#2196F3';
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, 0.5, 1.5);
                    ctx.stroke();
                    
                    // Draw center angle
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.lineTo(centerX + radius * Math.cos(0.5), centerY + radius * Math.sin(0.5));
                    ctx.moveTo(centerX, centerY);
                    ctx.lineTo(centerX + radius * Math.cos(1.5), centerY + radius * Math.sin(1.5));
                    ctx.stroke();
                    
                    // Draw circumference angle
                    const circumX = centerX + radius * Math.cos(1);
                    const circumY = centerY + radius * Math.sin(1) + 20;
                    ctx.beginPath();
                    ctx.moveTo(circumX - 30, circumY);
                    ctx.lineTo(circumX + 30, circumY);
                    ctx.moveTo(circumX, circumY - 30);
                    ctx.lineTo(circumX, circumY + 30);
                    ctx.stroke();
                    break;
                    
                case 3: // Angle in semicircle
                    // Draw diameter
                    ctx.strokeStyle = '#FF9800';
                    ctx.beginPath();
                    ctx.moveTo(centerX - radius, centerY);
                    ctx.lineTo(centerX + radius, centerY);
                    ctx.stroke();
                    
                    // Draw right angle symbol
                    ctx.beginPath();
                    ctx.moveTo(centerX - 20, centerY - radius + 20);
                    ctx.lineTo(centerX - 20, centerY - radius);
                    ctx.lineTo(centerX, centerY - radius);
                    ctx.stroke();
                    break;
            }
            
            circleDiagram.appendChild(canvas);
        }

        function demonstrateTheorem() {
            const theoremId = theoremSelect.value;
            const theorem = circleTheorems.find(t => t.id == theoremId) || circleTheorems[0];
            
            alert(`DEMONSTRATING ${theorem.name.toUpperCase()}:

${theorem.statement}

FORMULA: ${theorem.formula}

EXAMPLE:
${getTheoremExample(theoremId)}

PROOF STEPS:
${theorem.proof}`);
        }

        function getTheoremExample(theoremId) {
            switch(theoremId) {
                case '1': return "If arc AB subtends 80¬∞ at center O, then any point C on remaining circle has ‚à†ACB = 40¬∞ (half of 80¬∞)";
                case '2': return "Points C and D on same arc AB: ‚à†ACB = ‚à†ADB";
                case '3': return "If AB is diameter, then any point C on circle has ‚à†ACB = 90¬∞";
                case '4': return "In cyclic quadrilateral ABCD: ‚à†A + ‚à†C = 180¬∞, ‚à†B + ‚à†D = 180¬∞";
                case '5': return "Tangent at point P to circle with center O: ‚à†OPA = 90¬∞";
                default: return "Example not available";
            }
        }

        function explainAllCircleTheorems() {
            alert(`ALL CIRCLE THEOREMS (INTRODUCTION):

1. ANGLE AT CENTER THEOREM
   ‚Ä¢ Angle at center = 2 √ó angle at circumference
   ‚Ä¢ Same arc subtends both angles

2. ANGLES IN SAME SEGMENT THEOREM
   ‚Ä¢ Angles in same segment are equal
   ‚Ä¢ Both subtend same arc

3. ANGLE IN SEMICIRCLE THEOREM
   ‚Ä¢ Angle in semicircle = 90¬∞
   ‚Ä¢ Subtended by diameter

4. CYCLIC QUADRILATERAL THEOREM
   ‚Ä¢ Opposite angles sum to 180¬∞
   ‚Ä¢ All vertices lie on circle

5. TANGENT-RADIUS THEOREM
   ‚Ä¢ Tangent perpendicular to radius
   ‚Ä¢ At point of contact

6. TANGENTS FROM EXTERNAL POINT
   ‚Ä¢ Tangents from same point are equal
   ‚Ä¢ Form congruent triangles

7. ALTERNATE SEGMENT THEOREM
   ‚Ä¢ Angle between tangent and chord
   ‚Ä¢ Equals angle in alternate segment

8. INTERSECTING CHORDS THEOREM
   ‚Ä¢ For chords intersecting inside circle
   ‚Ä¢ AE √ó EB = CE √ó ED`);
        }

        // Proof functions
        function showProofSteps() {
            const proof = geometricProofs[appState.currentProof];
            proofSteps.innerHTML = `<strong>Proof Steps:</strong><br>${proof.steps.join('<br>')}`;
            proofSteps.classList.add('pulse');
            setTimeout(() => proofSteps.classList.remove('pulse'), 1000);
        }

        function newProof() {
            appState.currentProof = (appState.currentProof + 1) % geometricProofs.length;
            const proof = geometricProofs[appState.currentProof];
            proofStatement.textContent = proof.statement;
            proofSteps.textContent = "Click Show Proof to see step-by-step geometric proof";
        }

        function explainProofStructure() {
            alert(`STRUCTURE OF GEOMETRIC PROOFS:

1. GIVEN:
   ‚Ä¢ State what information is provided
   ‚Ä¢ List known facts and conditions

2. TO PROVE:
   ‚Ä¢ Clearly state what needs to be proven

3. CONSTRUCTION:
   ‚Ä¢ Add any necessary lines, points, or shapes
   ‚Ä¢ Use dotted lines for constructions

4. PROOF:
   ‚Ä¢ Step-by-step logical reasoning
   ‚Ä¢ Each step must be justified
   ‚Ä¢ Use known theorems and properties
   ‚Ä¢ Number each statement

5. CONCLUSION:
   ‚Ä¢ Restate what was proven
   ‚Ä¢ Use Q.E.D. or checkmark (‚úì)

COMMON JUSTIFICATIONS:
‚Ä¢ Given information
‚Ä¢ Definition of terms
‚Ä¢ Previously proven theorems
‚Ä¢ Angle properties
‚Ä¢ Congruence criteria
‚Ä¢ Algebraic manipulation

TIPS FOR PROOFS:
‚Ä¢ Start with what you know
‚Ä¢ Work backwards from what you want to prove
‚Ä¢ Look for patterns and relationships
‚Ä¢ Draw clear diagrams
‚Ä¢ Label all points and angles`);
        }

        // Construction functions
        function demonstrateConstruction() {
            const constructionType = constructionSelect.value;
            const construction = constructions.find(c => c.name.toLowerCase().includes(constructionType)) || constructions[0];
            
            // Animate construction lines
            const lines = document.querySelectorAll('.construction-line');
            lines.forEach((line, index) => {
                line.style.width = '0%';
                setTimeout(() => {
                    line.style.width = '100%';
                    line.style.transition = 'width 1s ease';
                }, index * 500);
            });
            
            constructionInfo.innerHTML = `
                <strong>${construction.name} Construction</strong><br>
                <em>Tools needed:</em> ${construction.tools.join(', ')}<br>
                <em>Steps:</em><br>${construction.steps.join('<br>')}`;
            
            constructionInfo.classList.add('pulse');
            setTimeout(() => constructionInfo.classList.remove('pulse'), 1000);
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other math topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
            
            // Add angle input listeners
            angleA.addEventListener('change', updateAngleCanvas);
            angleB.addEventListener('change', updateAngleCanvas);
            angleA.addEventListener('input', updateAngleCanvas);
            angleB.addEventListener('input', updateAngleCanvas);
            
            // Add polygon sides listener
            polygonSides.addEventListener('change', calculatePolygon);
        }

        // Create geometry tip display
        function createGeometryTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'geometry-tip';
            tipDiv.innerHTML = `<strong>Geometry Tip:</strong> ${geometryTips[Math.floor(Math.random() * geometryTips.length)]}`;
            return tipDiv;
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            anglesScore.textContent = appState.anglesScore;
            polygonsScore.textContent = appState.polygonsScore;
            circlesScore.textContent = appState.circlesScore;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You've mastered geometry concepts!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great work! Strong understanding of geometry!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good job! Keep practicing to improve further!";
            } else {
                scoreMessage.textContent = "Keep practicing! Focus on angle properties and theorems!";
            }
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            geometryTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            geometryTip.appendChild(createGeometryTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                
                // Track scores by question type
                if (question.type === 'angles') appState.anglesScore++;
                if (question.type === 'polygons') appState.polygonsScore++;
                if (question.type === 'circles') appState.circlesScore++;
                
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.anglesScore = 0;
            appState.polygonsScore = 0;
            appState.circlesScore = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin geometry practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            appState.anglesScore = 0;
            appState.polygonsScore = 0;
            appState.circlesScore = 0;
            
            showPracticePage();
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
