<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Math - Ratio, Rates & Proportion | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Math Theme */
        :root {
            --primary-blue: #2196F3;
            --primary-purple: #9C27B0;
            --primary-green: #4CAF50;
            --accent-orange: #FF9800;
            --accent-red: #F44336;
            --accent-teal: #009688;
            --accent-yellow: #FFC107;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --ratio-glow: 0 0 20px rgba(33, 150, 243, 0.4);
            --rate-glow: 0 0 20px rgba(156, 39, 176, 0.4);
            --proportion-glow: 0 0 20px rgba(76, 175, 80, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(156, 39, 176, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-yellow), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover {
            background: #0b7dda;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-secondary {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }

        .btn-secondary:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Math Types Grid */
        .math-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .math-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .math-grid {
                grid-template-columns: 1fr;
            }
        }

        .type-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .type-card.ratio {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .type-card.rate {
            border-color: var(--primary-purple);
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), transparent);
        }

        .type-card.proportion {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .type-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .type-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .type-card.ratio .type-title {
            color: var(--primary-blue);
        }

        .type-card.rate .type-title {
            color: var(--primary-purple);
        }

        .type-card.proportion .type-title {
            color: var(--primary-green);
        }

        .type-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .type-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--primary-purple), var(--primary-green));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--accent-teal);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
        }

        .option.incorrect .option-letter {
            background: #F44336;
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Side */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Ratio Visualization */
        .ratio-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .section-title {
            color: var(--primary-blue);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .ratio-container {
            width: 100%;
            height: 180px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ratio-bar {
            height: 40px;
            border-radius: 4px;
            margin: 5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ratio-bar:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        /* Rate Visualization */
        .rate-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-purple);
        }

        .rate-container {
            width: 100%;
            height: 180px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .rate-item {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .rate-item:hover {
            transform: scale(1.2);
        }

        /* Proportion Visualization */
        .proportion-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .proportion-container {
            width: 100%;
            height: 180px;
            position: relative;
            background: #1a1a1a;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .proportion-scale {
            position: absolute;
            background: rgba(255, 255, 255, 0.5);
            transform-origin: 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .proportion-scale:hover {
            transform: scaleY(1.1);
        }

        /* Comparison Tables */
        .comparison-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-orange);
        }

        .comparison-tables {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .comparison-tables {
                grid-template-columns: 1fr;
            }
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
        }

        .comparison-table th {
            background: var(--dark-card);
            padding: 10px;
            text-align: left;
            color: var(--accent-orange);
            border-bottom: 2px solid var(--accent-orange);
        }

        .comparison-table td {
            padding: 8px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        /* Real-World Applications */
        .application-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .application-items {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .application-item {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            width: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .application-item:hover {
            transform: translateY(-5px);
            background: rgba(244, 67, 54, 0.1);
        }

        .item-icon {
            font-weight: bold;
            color: var(--accent-red);
            margin-bottom: 5px;
        }

        /* Math Tools */
        .tools-section {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-yellow);
        }

        .tool-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-yellow), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-yellow), var(--primary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Formula Display */
        .formula-display {
            background: rgba(33, 150, 243, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid var(--primary-blue);
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            text-align: center;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes calculate {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .calculate {
            animation: calculate 0.5s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .math-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .comparison-tables {
                grid-template-columns: 1fr;
            }
            
            .application-items {
                justify-content: center;
                gap: 10px;
            }
            
            .tool-buttons {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Math: Ratio, Rates & Proportion</h1>
            <p class="welcome-subtitle">Master the mathematics of comparison and relationship! Learn how ratios compare quantities, how rates measure change over time, and how proportions maintain equal relationships. Discover how these concepts apply to everyday life from cooking to finance!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìä‚ö°üîó</span>
                <span class="topic-name">Mathematical Relationships and Comparisons</span>
            </div>
            
            <div class="math-grid">
                <div class="type-card ratio" onclick="showMathType('ratio')">
                    <div class="type-icon">üìä</div>
                    <h3 class="type-title">Ratios</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Comparing two or more quantities of the same kind</p>
                    <div class="type-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>a:b or a/b notation</li>
                            <li>Equivalent ratios</li>
                            <li>Simplest form</li>
                            <li>Scale and scaling</li>
                        </ul>
                    </div>
                </div>
                
                <div class="type-card rate" onclick="showMathType('rate')">
                    <div class="type-icon">‚ö°</div>
                    <h3 class="type-title">Rates</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Comparing different kinds of quantities with units</p>
                    <div class="type-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Unit rates</li>
                            <li>Speed = distance/time</li>
                            <li>Price per unit</li>
                            <li>Rate of change</li>
                        </ul>
                    </div>
                </div>
                
                <div class="type-card proportion" onclick="showMathType('proportion')">
                    <div class="type-icon">üîó</div>
                    <h3 class="type-title">Proportions</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Equality of two ratios</p>
                    <div class="type-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>a:b = c:d</li>
                            <li>Cross-multiplication</li>
                            <li>Direct proportion</li>
                            <li>Inverse proportion</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üßÆ Begin Math Practice</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="mathTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <div class="ratio-section">
                        <div class="section-title">Ratio Visualization</div>
                        <div class="ratio-container" id="ratioContainer">
                            <!-- Ratio bars will be generated by JavaScript -->
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showRatioExamples()">Ratio Examples</button>
                            <button class="btn btn-small btn-secondary" onclick="calculateRatio()">Calculate Ratio</button>
                        </div>
                    </div>
                    
                    <div class="rate-section">
                        <div class="section-title">Rate Visualization</div>
                        <div class="rate-container" id="rateContainer">
                            <!-- Rate visualization will be generated by JavaScript -->
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showRateExamples()">Rate Examples</button>
                            <button class="btn btn-small btn-secondary" onclick="calculateRate()">Calculate Rate</button>
                        </div>
                    </div>
                    
                    <div class="proportion-section">
                        <div class="section-title">Proportion Visualization</div>
                        <div class="proportion-container" id="proportionContainer">
                            <!-- Proportion visualization will be generated by JavaScript -->
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showProportionExamples()">Proportion Examples</button>
                            <button class="btn btn-small btn-secondary" onclick="solveProportion()">Solve Proportion</button>
                        </div>
                    </div>
                    
                    <div class="comparison-section">
                        <div class="section-title">Comparison: Ratio vs Rate vs Proportion</div>
                        <div class="comparison-tables">
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Ratios</th>
                                        <th>Characteristics</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showDetail('ratio_basics')" style="cursor: pointer;">
                                        <td>Comparison</td>
                                        <td>Same units</td>
                                    </tr>
                                    <tr onclick="showDetail('ratio_examples')" style="cursor: pointer;">
                                        <td>Examples</td>
                                        <td>3:4, 2/5</td>
                                    </tr>
                                    <tr onclick="showDetail('ratio_uses')" style="cursor: pointer;">
                                        <td>Uses</td>
                                        <td>Scaling, mixing</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Rates</th>
                                        <th>Characteristics</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showDetail('rate_basics')" style="cursor: pointer;">
                                        <td>Comparison</td>
                                        <td>Different units</td>
                                    </tr>
                                    <tr onclick="showDetail('rate_examples')" style="cursor: pointer;">
                                        <td>Examples</td>
                                        <td>60 km/h, $5/kg</td>
                                    </tr>
                                    <tr onclick="showDetail('rate_uses')" style="cursor: pointer;">
                                        <td>Uses</td>
                                        <td>Speed, prices</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Proportions</th>
                                        <th>Characteristics</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr onclick="showDetail('proportion_basics')" style="cursor: pointer;">
                                        <td>Relationship</td>
                                        <td>Equal ratios</td>
                                    </tr>
                                    <tr onclick="showDetail('proportion_examples')" style="cursor: pointer;">
                                        <td>Examples</td>
                                        <td>2/3 = 4/6</td>
                                    </tr>
                                    <tr onclick="showDetail('proportion_uses')" style="cursor: pointer;">
                                        <td>Uses</td>
                                        <td>Scaling, maps</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="application-section">
                        <div class="section-title">Real-World Applications</div>
                        <div class="application-items">
                            <div class="application-item" onclick="showApplication('cooking')">
                                <div class="item-icon">üë®‚Äçüç≥</div>
                                <div style="font-size: 0.7rem;">Cooking</div>
                            </div>
                            <div class="application-item" onclick="showApplication('maps')">
                                <div class="item-icon">üó∫Ô∏è</div>
                                <div style="font-size: 0.7rem;">Maps</div>
                            </div>
                            <div class="application-item" onclick="showApplication('shopping')">
                                <div class="item-icon">üõí</div>
                                <div style="font-size: 0.7rem;">Shopping</div>
                            </div>
                            <div class="application-item" onclick="showApplication('travel')">
                                <div class="item-icon">üöó</div>
                                <div style="font-size: 0.7rem;">Travel</div>
                            </div>
                            <div class="application-item" onclick="showApplication('finance')">
                                <div class="item-icon">üí∞</div>
                                <div style="font-size: 0.7rem;">Finance</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tools-section">
                        <div class="section-title">Math Tools</div>
                        <div class="tool-buttons">
                            <button class="btn btn-small btn-secondary" onclick="showFormula('ratio')">Ratio Formulas</button>
                            <button class="btn btn-small btn-secondary" onclick="showFormula('rate')">Rate Formulas</button>
                            <button class="btn btn-small btn-secondary" onclick="showFormula('proportion')">Proportion Formulas</button>
                            <button class="btn btn-small btn-secondary" onclick="showConversion()">Unit Conversion</button>
                        </div>
                        <div id="formulaDisplay" class="formula-display" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Math Practice Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Ratio, Rates, and Proportion
        const questions = [
            {
                question: "What is the ratio of 12 to 18 in simplest form?",
                options: ["2:3", "3:2", "4:6", "6:9"],
                answer: "A",
                explanation: "12:18 simplifies to 2:3 by dividing both numbers by 6 (their greatest common factor)."
            },
            {
                question: "If a car travels 240 km in 4 hours, what is its speed in km/h?",
                options: ["60 km/h", "80 km/h", "120 km/h", "240 km/h"],
                answer: "A",
                explanation: "Speed = Distance √∑ Time = 240 km √∑ 4 h = 60 km/h"
            },
            {
                question: "If 3:5 = x:20, what is the value of x?",
                options: ["12", "15", "8", "10"],
                answer: "A",
                explanation: "3/5 = x/20 ‚Üí Cross multiply: 5x = 60 ‚Üí x = 12"
            },
            {
                question: "What is the unit rate if 8 apples cost $12?",
                options: ["$1.50 per apple", "$0.67 per apple", "$1.33 per apple", "$2.00 per apple"],
                answer: "A",
                explanation: "Unit rate = Total cost √∑ Quantity = $12 √∑ 8 = $1.50 per apple"
            },
            {
                question: "Simplify the ratio 24:36:60",
                options: ["2:3:5", "4:6:10", "6:9:15", "12:18:30"],
                answer: "A",
                explanation: "Divide all terms by 12 (their greatest common factor): 24√∑12=2, 36√∑12=3, 60√∑12=5"
            },
            {
                question: "If y is directly proportional to x and y = 15 when x = 5, what is y when x = 8?",
                options: ["24", "40", "12", "20"],
                answer: "A",
                explanation: "Constant of proportionality k = y/x = 15/5 = 3. When x=8, y = 3√ó8 = 24"
            },
            {
                question: "What is the ratio equivalent to 2/3 with denominator 21?",
                options: ["14/21", "7/21", "6/21", "12/21"],
                answer: "A",
                explanation: "2/3 = x/21 ‚Üí 3√ó7=21, so 2√ó7=14 ‚Üí 14/21"
            },
            {
                question: "A recipe uses flour and sugar in ratio 3:2. If you use 9 cups of flour, how much sugar is needed?",
                options: ["6 cups", "4.5 cups", "13.5 cups", "3 cups"],
                answer: "A",
                explanation: "3:2 = 9:x ‚Üí 3/2 = 9/x ‚Üí 3x = 18 ‚Üí x = 6 cups"
            },
            {
                question: "Convert 72 km/h to m/s",
                options: ["20 m/s", "25 m/s", "18 m/s", "30 m/s"],
                answer: "A",
                explanation: "72 km/h = 72 √ó (1000 m / 3600 s) = 72000/3600 = 20 m/s"
            },
            {
                question: "If 4 workers can complete a job in 6 days, how long would 8 workers take?",
                options: ["3 days", "12 days", "4 days", "2 days"],
                answer: "A",
                explanation: "More workers means less time (inverse proportion). 4√ó6 = 8√óx ‚Üí 24 = 8x ‚Üí x = 3 days"
            },
            {
                question: "What is the ratio of the area of two circles with radii 2 cm and 4 cm?",
                options: ["1:4", "1:2", "2:1", "4:1"],
                answer: "A",
                explanation: "Area ratio = (radius1)¬≤:(radius2)¬≤ = 2¬≤:4¬≤ = 4:16 = 1:4"
            },
            {
                question: "A map scale is 1:50,000. What actual distance is represented by 4 cm on the map?",
                options: ["2 km", "200 m", "20 km", "0.5 km"],
                answer: "A",
                explanation: "4 cm √ó 50,000 = 200,000 cm = 2,000 m = 2 km"
            },
            {
                question: "If a:b = 3:4 and b:c = 2:5, what is a:c?",
                options: ["3:10", "6:20", "3:20", "2:5"],
                answer: "A",
                explanation: "Make b the same: a:b = 3:4 = 3:4, b:c = 2:5 = 4:10 ‚Üí a:c = 3:10"
            },
            {
                question: "What is the average speed if you travel 120 km in 2 hours and then 180 km in 3 hours?",
                options: ["60 km/h", "50 km/h", "65 km/h", "55 km/h"],
                answer: "A",
                explanation: "Total distance = 120+180 = 300 km. Total time = 2+3 = 5 h. Average speed = 300/5 = 60 km/h"
            },
            {
                question: "Share $240 in the ratio 3:5",
                options: ["$90 and $150", "$80 and $160", "$100 and $140", "$120 and $120"],
                answer: "A",
                explanation: "Total parts = 3+5 = 8. First share = 3/8 √ó $240 = $90. Second share = 5/8 √ó $240 = $150"
            },
            {
                question: "If 500 ml of juice costs $3, what is the cost per liter?",
                options: ["$6 per liter", "$5 per liter", "$4 per liter", "$3 per liter"],
                answer: "A",
                explanation: "500 ml = 0.5 L. Cost per liter = $3 √∑ 0.5 = $6 per liter"
            },
            {
                question: "Solve for x: (x+2)/5 = 3/4",
                options: ["7/4 or 1.75", "13/4 or 3.25", "17/4 or 4.25", "23/4 or 5.75"],
                answer: "A",
                explanation: "Cross multiply: 4(x+2) = 15 ‚Üí 4x+8=15 ‚Üí 4x=7 ‚Üí x=7/4"
            },
            {
                question: "Convert 5 m/s to km/h",
                options: ["18 km/h", "15 km/h", "20 km/h", "12 km/h"],
                answer: "A",
                explanation: "5 m/s = 5 √ó (3600 s / 1000 m) = 5 √ó 3.6 = 18 km/h"
            },
            {
                question: "If 12 books weigh 9 kg, how many books weigh 15 kg?",
                options: ["20 books", "18 books", "16 books", "24 books"],
                answer: "A",
                explanation: "Weight per book = 9/12 = 0.75 kg. Number of books for 15 kg = 15 √∑ 0.75 = 20"
            },
            {
                question: "What is the compound ratio of 2:3 and 4:5?",
                options: ["8:15", "6:8", "2:5", "4:3"],
                answer: "A",
                explanation: "Compound ratio = (2√ó4):(3√ó5) = 8:15"
            },
            {
                question: "A train travels at 80 km/h. How far will it travel in 45 minutes?",
                options: ["60 km", "40 km", "50 km", "70 km"],
                answer: "A",
                explanation: "45 minutes = 0.75 hours. Distance = Speed √ó Time = 80 √ó 0.75 = 60 km"
            },
            {
                question: "Divide 84 into three parts in ratio 1:2:4",
                options: ["12, 24, 48", "14, 28, 42", "21, 21, 42", "16, 32, 36"],
                answer: "A",
                explanation: "Total parts = 1+2+4 = 7. First = 1/7√ó84=12, second=2/7√ó84=24, third=4/7√ó84=48"
            },
            {
                question: "If 20% of x = 30% of y, what is x:y?",
                options: ["3:2", "2:3", "3:4", "4:3"],
                answer: "A",
                explanation: "0.2x = 0.3y ‚Üí x/y = 0.3/0.2 = 3/2 ‚Üí x:y = 3:2"
            },
            {
                question: "A car uses 8 liters of petrol for 100 km. How much for 250 km?",
                options: ["20 liters", "25 liters", "30 liters", "15 liters"],
                answer: "A",
                explanation: "Fuel per km = 8/100 = 0.08 L/km. For 250 km = 0.08 √ó 250 = 20 liters"
            },
            {
                question: "Why are ratios, rates, and proportions important in real life?",
                options: ["They help compare quantities and make predictions", "They are only for math tests", "They make math complicated", "They have no practical use"],
                answer: "A",
                explanation: "These concepts are essential for cooking, shopping, traveling, building, and many daily activities involving comparison and scaling."
            }
        ];

        // Math tips
        const mathTips = [
            "Remember: Ratios compare quantities of the same kind, while rates compare different kinds of quantities!",
            "A unit rate always has a denominator of 1 (like $3.50 per liter, 60 km per hour).",
            "When solving proportions, cross-multiplication is your best friend: a/b = c/d ‚Üí ad = bc",
            "For speed calculations: Speed = Distance √∑ Time, Distance = Speed √ó Time, Time = Distance √∑ Speed",
            "Inverse proportion means when one quantity increases, the other decreases (like more workers = less time).",
            "Always simplify ratios to their lowest terms by dividing by the greatest common factor.",
            "When comparing ratios, convert them to equivalent ratios with the same denominator.",
            "Remember unit conversions: 1 km = 1000 m, 1 hour = 60 minutes = 3600 seconds"
        ];

        // Common ratios
        const commonRatios = {
            '1:2': { example: "Mixing paint", description: "1 part color to 2 parts white" },
            '2:3': { example: "Screen aspect ratio", description: "Common in older TVs and monitors" },
            '3:4': { example: "Traditional photos", description: "Standard photo print ratio" },
            '16:9': { example: "HD screens", description: "Modern TV and monitor aspect ratio" },
            '1:1': { example: "Square photos", description: "Instagram square format" }
        };

        // Common rates
        const commonRates = {
            speed: { example: "Car speed", typical: "60-100 km/h" },
            price: { example: "Grocery prices", typical: "$/kg or $/L" },
            flow: { example: "Water flow", typical: "Liters per minute" },
            wage: { example: "Hourly wage", typical: "$ per hour" },
            consumption: { example: "Fuel efficiency", typical: "km per liter" }
        };

        // Proportion types
        const proportionTypes = {
            direct: { example: "More workers = more work", formula: "y = kx" },
            inverse: { example: "More workers = less time", formula: "y = k/x" },
            compound: { example: "Combined ratios", formula: "a:b and c:d ‚Üí ac:bd" },
            continued: { example: "Chain of ratios", formula: "a:b, b:c, c:d" }
        };

        // Real-world applications
        const applications = {
            cooking: {
                title: "Cooking with Ratios",
                examples: ["Recipe scaling", "Mixing ingredients", "Portion sizes"]
            },
            maps: {
                title: "Maps and Scales",
                examples: ["Map distances", "Scale models", "Blueprints"]
            },
            shopping: {
                title: "Smart Shopping",
                examples: ["Price comparisons", "Unit prices", "Best deals"]
            },
            travel: {
                title: "Travel Planning",
                examples: ["Speed calculations", "Travel time", "Fuel costs"]
            },
            finance: {
                title: "Financial Math",
                examples: ["Interest rates", "Exchange rates", "Profit margins"]
            }
        };

        // Formulas
        const formulas = {
            ratio: {
                title: "Ratio Formulas",
                list: [
                    "Ratio: a:b or a/b",
                    "Equivalent ratios: a/b = ka/kb",
                    "Simplifying: divide by GCF",
                    "Comparing: make denominators same"
                ]
            },
            rate: {
                title: "Rate Formulas",
                list: [
                    "Rate: quantity1 per quantity2",
                    "Unit rate: √∑ by second quantity",
                    "Speed = Distance √∑ Time",
                    "Price per unit = Total cost √∑ Quantity"
                ]
            },
            proportion: {
                title: "Proportion Formulas",
                list: [
                    "Proportion: a/b = c/d",
                    "Cross multiplication: ad = bc",
                    "Direct: y = kx",
                    "Inverse: y = k/x"
                ]
            }
        };

        // Detailed information for comparison
        const details = {
            ratio_basics: {
                title: "Ratio Basics",
                info: "A ratio compares quantities of the SAME kind. Example: The ratio of boys to girls in a class is 3:2."
            },
            ratio_examples: {
                title: "Ratio Examples",
                info: "Common ratios: 1:2 (mixing), 3:4 (photos), 16:9 (TVs), 1:1 (squares)."
            },
            ratio_uses: {
                title: "Uses of Ratios",
                info: "Used in cooking recipes, mixing paints, scaling drawings, and comparing quantities."
            },
            rate_basics: {
                title: "Rate Basics",
                info: "A rate compares quantities of DIFFERENT kinds with units. Example: 60 km/h (distance per time)."
            },
            rate_examples: {
                title: "Rate Examples",
                info: "Speed (km/h), price ($/kg), wage ($/h), fuel efficiency (km/L), flow rate (L/min)."
            },
            rate_uses: {
                title: "Uses of Rates",
                info: "Essential for speed calculations, price comparisons, work rates, and measurements."
            },
            proportion_basics: {
                title: "Proportion Basics",
                info: "A proportion states that two ratios are equal. Example: 2/3 = 4/6 or 2:3 = 4:6."
            },
            proportion_examples: {
                title: "Proportion Examples",
                info: "Scaling recipes (2 cups flour for 4 people = 3 cups for 6 people), map scales."
            },
            proportion_uses: {
                title: "Uses of Proportions",
                info: "Used for scaling up/down, solving missing values, map reading, and model building."
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathTip = document.getElementById('mathTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const ratioContainer = document.getElementById('ratioContainer');
        const rateContainer = document.getElementById('rateContainer');
        const proportionContainer = document.getElementById('proportionContainer');
        const formulaDisplay = document.getElementById('formulaDisplay');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            createRatioVisualization();
            createRateVisualization();
            createProportionVisualization();
        }

        // Create ratio visualization
        function createRatioVisualization() {
            const ratios = [
                {label: "2:3", value: 2/3, color: 'rgba(33, 150, 243, 0.7)'},
                {label: "3:4", value: 3/4, color: 'rgba(33, 150, 243, 0.8)'},
                {label: "1:2", value: 1/2, color: 'rgba(33, 150, 243, 0.6)'},
                {label: "4:5", value: 4/5, color: 'rgba(33, 150, 243, 0.9)'}
            ];
            
            ratioContainer.innerHTML = '';
            
            ratios.forEach((ratio, index) => {
                const bar = document.createElement('div');
                bar.className = 'ratio-bar';
                bar.textContent = ratio.label;
                bar.style.backgroundColor = ratio.color;
                bar.style.width = `${ratio.value * 100}%`;
                bar.style.height = '30px';
                bar.title = `Ratio ${ratio.label} = ${ratio.value.toFixed(3)}`;
                bar.onclick = () => showRatioInfo(ratio.label);
                ratioContainer.appendChild(bar);
            });
        }

        // Create rate visualization
        function createRateVisualization() {
            rateContainer.innerHTML = '';
            
            // Create moving rate indicators
            const rates = [
                {label: "60 km/h", speed: 60, color: 'rgba(156, 39, 176, 0.7)'},
                {label: "80 km/h", speed: 80, color: 'rgba(156, 39, 176, 0.8)'},
                {label: "100 km/h", speed: 100, color: 'rgba(156, 39, 176, 0.9)'}
            ];
            
            rates.forEach((rate, index) => {
                const item = document.createElement('div');
                item.className = 'rate-item';
                item.textContent = rate.label;
                item.style.backgroundColor = rate.color;
                item.style.width = '50px';
                item.style.height = '50px';
                item.style.left = `${20 + index * 60}px`;
                item.style.top = `${60 - index * 10}px`;
                item.title = `Speed: ${rate.label}`;
                item.onclick = () => showRateInfo(rate.label);
                
                // Add animation
                item.style.animation = `moveRight ${3 - index * 0.5}s linear infinite`;
                item.style.animationDelay = `${index * 0.5}s`;
                
                rateContainer.appendChild(item);
            });
            
            // Add CSS for animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes moveRight {
                    0% { left: 20px; }
                    50% { left: calc(100% - 70px); }
                    100% { left: 20px; }
                }
            `;
            document.head.appendChild(style);
        }

        // Create proportion visualization
        function createProportionVisualization() {
            proportionContainer.innerHTML = '';
            
            // Create proportional scales
            const proportions = [
                {ratio: "1:2", height: 50, color: 'rgba(76, 175, 80, 0.6)'},
                {ratio: "2:4", height: 100, color: 'rgba(76, 175, 80, 0.7)'},
                {ratio: "3:6", height: 150, color: 'rgba(76, 175, 80, 0.8)'},
                {ratio: "4:8", height: 200, color: 'rgba(76, 175, 80, 0.9)'}
            ];
            
            proportions.forEach((prop, index) => {
                const scale = document.createElement('div');
                scale.className = 'proportion-scale';
                scale.style.backgroundColor = prop.color;
                scale.style.width = '40px';
                scale.style.height = `${prop.height}px`;
                scale.style.left = `${20 + index * 60}px`;
                scale.style.bottom = '20px';
                scale.title = `Proportion ${prop.ratio}`;
                scale.onclick = () => showProportionInfo(prop.ratio);
                proportionContainer.appendChild(scale);
                
                // Add label
                const label = document.createElement('div');
                label.textContent = prop.ratio;
                label.style.position = 'absolute';
                label.style.left = `${20 + index * 60}px`;
                label.style.bottom = '0px';
                label.style.color = 'white';
                label.style.fontSize = '0.8rem';
                label.style.textAlign = 'center';
                label.style.width = '40px';
                proportionContainer.appendChild(label);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            viewTopicsBtn.addEventListener('click', () => alert("Other math topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a ratio, rate, and proportion master!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand mathematical relationships well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of ratios and proportions!";
            } else {
                scoreMessage.textContent = "Keep practicing! Math relationships are everywhere - try again!";
            }
        }

        // Create math tip display
        function createMathTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'math-tip';
            tipDiv.innerHTML = `<strong>Math Tip:</strong> ${mathTips[Math.floor(Math.random() * mathTips.length)]}`;
            return tipDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathTip.appendChild(createMathTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin math practice!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Interactive functions
        window.showMathType = function(type) {
            let info = '';
            if (type === 'ratio') {
                info = "üìä Ratios üìä\n\n";
                info += "‚Ä¢ Compare quantities of SAME kind\n";
                info += "‚Ä¢ Written as a:b or a/b\n";
                info += "‚Ä¢ No units needed\n";
                info += "‚Ä¢ Can be simplified\n";
                info += "‚Ä¢ Examples: 3:4, 2/5, 1:2:3\n";
                info += "‚Ä¢ Used in: Recipes, mixing, scaling";
            } else if (type === 'rate') {
                info = "‚ö° Rates ‚ö°\n\n";
                info += "‚Ä¢ Compare quantities of DIFFERENT kinds\n";
                info += "‚Ä¢ Always have units\n";
                info += "‚Ä¢ Unit rate has denominator 1\n";
                info += "‚Ä¢ Examples: 60 km/h, $5/kg\n";
                info += "‚Ä¢ Speed = Distance √∑ Time\n";
                info += "‚Ä¢ Used in: Speed, prices, wages";
            } else {
                info = "üîó Proportions üîó\n\n";
                info += "‚Ä¢ Equality of two ratios\n";
                info += "‚Ä¢ a:b = c:d or a/b = c/d\n";
                info += "‚Ä¢ Solve using cross-multiplication\n";
                info += "‚Ä¢ Direct: y = kx (both increase)\n";
                info += "‚Ä¢ Inverse: y = k/x (one increases, other decreases)\n";
                info += "‚Ä¢ Used in: Scaling, maps, models";
            }
            alert(info);
        };

        window.showRatioInfo = function(ratio) {
            const ratioInfo = commonRatios[ratio];
            let info = `Ratio ${ratio}\n\n`;
            if (ratioInfo) {
                info += `Example: ${ratioInfo.example}\n`;
                info += `Description: ${ratioInfo.description}\n\n`;
            }
            info += `As fraction: ${ratio.split(':')[0]}/${ratio.split(':')[1]}\n`;
            info += `Decimal: ${(parseInt(ratio.split(':')[0]) / parseInt(ratio.split(':')[1])).toFixed(3)}`;
            alert(info);
        };

        window.showRateInfo = function(rate) {
            let info = `Rate: ${rate}\n\n`;
            
            if (rate.includes('km/h')) {
                const speed = parseInt(rate);
                info += `Speed: ${speed} kilometers per hour\n`;
                info += `Equivalent to:\n`;
                info += `‚Ä¢ ${(speed / 3.6).toFixed(2)} m/s\n`;
                info += `‚Ä¢ ${(speed * 0.621).toFixed(2)} mph\n`;
                info += `‚Ä¢ ${(speed / 60).toFixed(2)} km/min`;
            } else if (rate.includes('$')) {
                info += `Price rate\n`;
                info += `Use for: Comparing prices\n`;
                info += `Lower unit rate = better value`;
            }
            
            alert(info);
        };

        window.showProportionInfo = function(proportion) {
            const [a, b] = proportion.split(':');
            let info = `Proportion ${proportion}\n\n`;
            info += `As fraction: ${a}/${b}\n`;
            info += `Decimal: ${(a/b).toFixed(3)}\n\n`;
            info += `Equivalent proportions:\n`;
            info += `‚Ä¢ ${a}:${b} = ${a*2}:${b*2}\n`;
            info += `‚Ä¢ ${a}:${b} = ${a*3}:${b*3}\n`;
            info += `‚Ä¢ ${a}:${b} = ${a*4}:${b*4}\n\n`;
            info += `This shows the concept of equivalent ratios!`;
            alert(info);
        };

        window.showRatioExamples = function() {
            let info = "Common Ratio Examples:\n\n";
            info += "Cooking:\n‚Ä¢ 1:2 flour to sugar\n‚Ä¢ 2:3 water to juice\n\n";
            info += "Photos:\n‚Ä¢ 3:4 standard prints\n‚Ä¢ 16:9 widescreen\n‚Ä¢ 1:1 Instagram\n\n";
            info += "Maps:\n‚Ä¢ 1:50,000 map scale\n‚Ä¢ 1 cm = 0.5 km\n\n";
            info += "Mixing:\n‚Ä¢ 1:3 paint thinner\n‚Ä¢ 4:1 cement mix";
            alert(info);
        };

        window.calculateRatio = function() {
            const a = Math.floor(Math.random() * 20) + 1;
            const b = Math.floor(Math.random() * 20) + 1;
            const gcd = (x, y) => y === 0 ? x : gcd(y, x % y);
            const divisor = gcd(a, b);
            
            let info = `Calculate this ratio:\n\n`;
            info += `Simplify ${a}:${b}\n\n`;
            info += `Step 1: Find GCF of ${a} and ${b}\n`;
            info += `Step 2: Divide both by GCF\n`;
            info += `Step 3: ${a} √∑ ${divisor} = ${a/divisor}\n`;
            info += `        ${b} √∑ ${divisor} = ${b/divisor}\n\n`;
            info += `Answer: ${a/divisor}:${b/divisor}`;
            
            alert(info);
        };

        window.showRateExamples = function() {
            let info = "Common Rate Examples:\n\n";
            info += "Speed:\n‚Ä¢ Walking: 5 km/h\n‚Ä¢ Cycling: 15 km/h\n‚Ä¢ Driving: 60 km/h\n‚Ä¢ Flying: 900 km/h\n\n";
            info += "Prices:\n‚Ä¢ Apples: $3/kg\n‚Ä¢ Gasoline: $1.50/L\n‚Ä¢ Movie ticket: $12/person\n\n";
            info += "Work:\n‚Ä¢ Wage: $15/hour\n‚Ä¢ Typing: 60 words/minute\n‚Ä¢ Reading: 2 pages/minute";
            alert(info);
        };

        window.calculateRate = function() {
            const distance = Math.floor(Math.random() * 400) + 100;
            const time = Math.floor(Math.random() * 6) + 2;
            const speed = distance / time;
            
            let info = `Calculate this rate:\n\n`;
            info += `A car travels ${distance} km in ${time} hours.\n`;
            info += `What is its speed in km/h?\n\n`;
            info += `Formula: Speed = Distance √∑ Time\n`;
            info += `Calculation: ${distance} √∑ ${time}\n`;
            info += `Answer: ${speed.toFixed(1)} km/h`;
            
            alert(info);
        };

        window.showProportionExamples = function() {
            let info = "Proportion Examples:\n\n";
            info += "Direct Proportion:\n‚Ä¢ More workers = more work done\n‚Ä¢ More ingredients = more food\n‚Ä¢ Longer distance = more time\n\n";
            info += "Inverse Proportion:\n‚Ä¢ More workers = less time needed\n‚Ä¢ Faster speed = less travel time\n‚Ä¢ Larger pipe = slower flow rate\n\n";
            info += "Real Examples:\n‚Ä¢ Recipe scaling\n‚Ä¢ Map distances\n‚Ä¢ Model building";
            alert(info);
        };

        window.solveProportion = function() {
            const a = Math.floor(Math.random() * 8) + 2;
            const b = Math.floor(Math.random() * 8) + 2;
            const c = Math.floor(Math.random() * 12) + 3;
            const d = (b * c / a).toFixed(1);
            
            let info = `Solve this proportion:\n\n`;
            info += `${a}/${b} = ${c}/x\n\n`;
            info += `Step 1: Cross multiply\n`;
            info += `${a} √ó x = ${b} √ó ${c}\n`;
            info += `${a}x = ${b * c}\n\n`;
            info += `Step 2: Divide both sides by ${a}\n`;
            info += `x = ${b * c} √∑ ${a}\n`;
            info += `x = ${d}\n\n`;
            info += `Answer: x = ${d}`;
            
            alert(info);
        };

        window.showApplication = function(app) {
            const appInfo = applications[app];
            if (!appInfo) return;
            
            let info = `${appInfo.title}\n\n`;
            info += `Examples:\n`;
            appInfo.examples.forEach(example => {
                info += `‚Ä¢ ${example}\n`;
            });
            info += `\nHow ratios/rates/proportions help:\n`;
            
            if (app === 'cooking') {
                info += "‚Ä¢ Scale recipes up or down\n";
                info += "‚Ä¢ Maintain ingredient proportions\n";
                info += "‚Ä¢ Convert between measurement units";
            } else if (app === 'maps') {
                info += "‚Ä¢ Calculate real distances\n";
                info += "‚Ä¢ Create scale models\n";
                info += "‚Ä¢ Read blueprints accurately";
            } else if (app === 'shopping') {
                info += "‚Ä¢ Compare unit prices\n";
                info += "‚Ä¢ Calculate best deals\n";
                info += "‚Ä¢ Budget effectively";
            } else if (app === 'travel') {
                info += "‚Ä¢ Calculate travel time\n";
                info += "‚Ä¢ Estimate fuel costs\n";
                info += "‚Ä¢ Plan routes efficiently";
            } else {
                info += "‚Ä¢ Calculate interest\n";
                info += "‚Ä¢ Compare exchange rates\n";
                info += "‚Ä¢ Determine profit margins";
            }
            
            alert(info);
        };

        window.showFormula = function(type) {
            const formulaInfo = formulas[type];
            if (!formulaInfo) return;
            
            formulaDisplay.innerHTML = `<strong>${formulaInfo.title}</strong><br>`;
            formulaInfo.list.forEach(item => {
                formulaDisplay.innerHTML += `‚Ä¢ ${item}<br>`;
            });
            formulaDisplay.style.display = 'block';
            formulaDisplay.classList.add('calculate');
            
            // Remove animation class after animation completes
            setTimeout(() => {
                formulaDisplay.classList.remove('calculate');
            }, 500);
        };

        window.showConversion = function() {
            let info = "Common Unit Conversions:\n\n";
            info += "Length:\n‚Ä¢ 1 km = 1000 m\n‚Ä¢ 1 m = 100 cm\n‚Ä¢ 1 cm = 10 mm\n\n";
            info += "Time:\n‚Ä¢ 1 hour = 60 minutes\n‚Ä¢ 1 minute = 60 seconds\n‚Ä¢ 1 day = 24 hours\n\n";
            info += "Speed:\n‚Ä¢ 1 km/h = 0.278 m/s\n‚Ä¢ 1 m/s = 3.6 km/h\n‚Ä¢ 1 mph = 1.609 km/h\n\n";
            info += "Tip: Use unit rates to convert between units!";
            alert(info);
        };

        window.showDetail = function(detail) {
            const detailInfo = details[detail];
            if (!detailInfo) return;
            
            let info = `${detailInfo.title}\n\n`;
            info += `${detailInfo.info}`;
            
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
