<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 English - Main Ideas & Supporting Details | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for English Theme */
        :root {
            --primary-blue: #2196F3;
            --secondary-teal: #009688;
            --accent-amber: #FFC107;
            --accent-purple: #9C27B0;
            --accent-pink: #E91E63;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(33, 150, 243, 0.3);
            --highlight-yellow: rgba(255, 235, 59, 0.15);
            --highlight-blue: rgba(33, 150, 243, 0.15);
            --highlight-green: rgba(76, 175, 80, 0.15);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(33, 150, 243, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 150, 136, 0.4);
        }

        .btn-secondary:hover {
            background: #00796B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-teal));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        /* New Compact Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        /* Text Passage Styling */
        .passage-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            max-height: 300px;
            overflow-y: auto;
            line-height: 1.6;
        }

        .passage-title {
            color: var(--accent-amber);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--accent-amber);
            padding-bottom: 8px;
        }

        .passage-text {
            color: var(--text-primary);
            font-size: 1.1rem;
            text-align: justify;
        }

        .highlight-main-idea {
            background-color: var(--highlight-yellow);
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .highlight-supporting-detail {
            background-color: var(--highlight-blue);
            padding: 2px 4px;
            border-radius: 3px;
        }

        .highlight-evidence {
            background-color: var(--highlight-green);
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* Question Types */
        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .english-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-pink);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Options Styling */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--primary-blue);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(33, 150, 243, 0.1);
            border-left: 5px solid var(--primary-blue);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-blue);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-blue);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Concept Display */
        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        /* Main Idea Visualizations */
        .main-idea-pyramid {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .pyramid-level {
            text-align: center;
            padding: 15px 30px;
            margin: 5px 0;
            border-radius: 8px;
            font-weight: bold;
            width: 80%;
            transition: all 0.3s ease;
        }

        .pyramid-top {
            background: linear-gradient(135deg, var(--accent-amber), #FF9800);
            width: 40%;
            font-size: 1.2rem;
        }

        .pyramid-middle {
            background: linear-gradient(135deg, var(--primary-blue), #2196F3);
            width: 60%;
            font-size: 1.1rem;
        }

        .pyramid-base {
            background: linear-gradient(135deg, var(--secondary-teal), #009688);
            width: 80%;
            font-size: 1rem;
        }

        /* Supporting Details Grid */
        .details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .detail-card {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .detail-card.important {
            border-color: var(--accent-amber);
            background: rgba(255, 193, 7, 0.1);
        }

        .detail-card.supporting {
            border-color: var(--primary-blue);
            background: rgba(33, 150, 243, 0.1);
        }

        .detail-card.evidence {
            border-color: var(--secondary-teal);
            background: rgba(0, 150, 136, 0.1);
        }

        .detail-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        /* Summary Box */
        .summary-box {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid var(--accent-amber);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .summary-title {
            color: var(--accent-amber);
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Text Structure Visualization */
        .text-structure {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .structure-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: var(--dark-card);
            border-radius: 8px;
            border-left: 4px solid var(--accent-purple);
        }

        .structure-number {
            width: 25px;
            height: 25px;
            background: var(--accent-purple);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        /* Key Words Display */
        .keywords-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .keyword {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-pink));
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* Reading Strategy Cards */
        .strategy-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .strategy-card {
            background: var(--dark-card);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .strategy-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .strategy-name {
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .strategy-tip {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
            }
            
            .strategy-cards {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes highlight {
            0%, 100% { background-color: var(--highlight-yellow); }
            50% { background-color: rgba(255, 235, 59, 0.3); }
        }
        
        .highlight-animation {
            animation: highlight 1s ease-in-out 2;
        }
        
        @keyframes pyramidBuild {
            0% { transform: translateY(50px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        
        .pyramid-build {
            animation: pyramidBuild 0.5s ease forwards;
        }
        
        @keyframes cardFlip {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .card-flip {
            animation: cardFlip 0.8s ease;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1456513080510-3449c76e0d1a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 English</h1>
            <p class="welcome-subtitle">Master the art of finding main ideas and supporting details! Learn to identify key points, summarize texts, and distinguish between important information and supporting evidence. Develop critical reading skills that will help you in all subjects!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìö‚ú®üîç</span>
                <span class="topic-name">Main Ideas & Supporting Details</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Reading Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- English fact display -->
                <div id="englishFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Passage Display (for reading comprehension questions) -->
                <div id="passageContainer"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Reading Comprehension Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Sample passages for reading comprehension
        const passages = [
            {
                title: "The Solar System",
                text: "Our solar system consists of the Sun and everything that orbits around it. This includes eight planets, their moons, dwarf planets, asteroids, and comets. The Sun, a massive star at the center, provides light and heat to all the planets. The four inner planets‚ÄîMercury, Venus, Earth, and Mars‚Äîare rocky and relatively small. The four outer planets‚ÄîJupiter, Saturn, Uranus, and Neptune‚Äîare gas giants, much larger than the inner planets. Earth is the only planet known to support life, with its perfect distance from the Sun and presence of water."
            },
            {
                title: "Rainforests: Earth's Lungs",
                text: "Rainforests are dense forests found in tropical regions with heavy rainfall. They are often called 'Earth's lungs' because they produce about 20% of the world's oxygen. Rainforests are home to more than half of the world's plant and animal species, many of which haven't even been discovered yet. These forests have several layers: the emergent layer with tallest trees, the canopy layer forming a roof, the understory with smaller plants, and the forest floor. Rainforests also help regulate Earth's climate and water cycle."
            },
            {
                title: "The Invention of the Telephone",
                text: "Alexander Graham Bell invented the telephone in 1876. He was trying to improve the telegraph when he discovered he could transmit voice over wires. Bell's first words on the telephone were to his assistant: 'Mr. Watson, come here. I want to see you.' This invention revolutionized communication, allowing people to speak to each other over long distances. Before the telephone, people relied on letters or telegrams, which took much longer. Today's smartphones are distant relatives of Bell's original invention."
            },
            {
                title: "Honeybees: Nature's Pollinators",
                text: "Honeybees play a crucial role in pollination, helping plants reproduce. A single hive can contain up to 60,000 bees, each with a specific job. Worker bees collect nectar and pollen, drone bees mate with the queen, and the queen bee lays eggs. Bees communicate through dances to tell others where to find food. They produce honey by digesting nectar and storing it in honeycombs. Without bees, many fruits and vegetables we eat wouldn't exist because they wouldn't be pollinated."
            },
            {
                title: "The Water Cycle",
                text: "The water cycle describes how water moves continuously between Earth's surface and the atmosphere. It begins with evaporation, when the sun heats water in oceans, lakes, and rivers, turning it into water vapor. This vapor rises and cools, forming clouds through condensation. When clouds become heavy with water droplets, precipitation occurs as rain, snow, or hail. The water then returns to bodies of water through runoff or seeps into the ground as groundwater. This cycle has been repeating for billions of years."
            }
        ];

        // Questions array - 100+ Grade 5 English Main Ideas & Supporting Details questions
        const questions = [
            // Main Idea Identification (1-25)
            {
                type: "main_idea",
                passage: passages[0],
                question: "What is the main idea of the passage about the solar system?",
                options: [
                    "The solar system has eight planets orbiting the Sun",
                    "Earth is the only planet that supports life",
                    "The solar system consists of the Sun and everything that orbits it",
                    "There are inner rocky planets and outer gas giants"
                ],
                answer: "C",
                explanation: "The main idea is usually found in the first sentence: 'Our solar system consists of the Sun and everything that orbits around it.'"
            },
            {
                type: "main_idea",
                passage: passages[1],
                question: "What is the main idea of the rainforest passage?",
                options: [
                    "Rainforests have different layers",
                    "Rainforests are important ecosystems that produce oxygen and host biodiversity",
                    "Rainforests are found in tropical regions",
                    "Many species in rainforests haven't been discovered"
                ],
                answer: "B",
                explanation: "The main idea is that rainforests are crucial ecosystems that produce oxygen and contain most of Earth's biodiversity."
            },
            {
                type: "main_idea",
                passage: passages[2],
                question: "What is the main idea about the telephone invention?",
                options: [
                    "Alexander Graham Bell was an inventor",
                    "The telephone allowed voice communication over distance",
                    "Bell's first words were to his assistant",
                    "Smartphones developed from Bell's invention"
                ],
                answer: "B",
                explanation: "The main idea is that Bell's invention revolutionized communication by allowing voice transmission over wires."
            },
            {
                type: "main_idea",
                passage: passages[3],
                question: "What is the main idea about honeybees?",
                options: [
                    "Bees live in hives with specific roles",
                    "Bees communicate through dance",
                    "Honeybees are essential pollinators for many plants",
                    "Bees produce honey from nectar"
                ],
                answer: "C",
                explanation: "The passage emphasizes bees' crucial role as pollinators for food production."
            },
            {
                type: "main_idea",
                passage: passages[4],
                question: "What is the main idea of the water cycle passage?",
                options: [
                    "Water evaporates when heated by the sun",
                    "The water cycle describes continuous water movement between Earth and atmosphere",
                    "Clouds form through condensation",
                    "Water returns to Earth as precipitation"
                ],
                answer: "B",
                explanation: "The main idea is the continuous movement of water through evaporation, condensation, and precipitation."
            },

            // Supporting Details (26-50)
            {
                type: "supporting_details",
                passage: passages[0],
                question: "Which detail supports that Earth is unique in the solar system?",
                options: [
                    "The Sun provides light and heat to planets",
                    "Earth is the only planet known to support life",
                    "There are eight planets in the solar system",
                    "The outer planets are gas giants"
                ],
                answer: "B",
                explanation: "The statement 'Earth is the only planet known to support life' is a supporting detail about Earth's uniqueness."
            },
            {
                type: "supporting_details",
                passage: passages[1],
                question: "Which detail supports why rainforests are called 'Earth's lungs'?",
                options: [
                    "They are found in tropical regions",
                    "They produce about 20% of the world's oxygen",
                    "They have multiple layers",
                    "They regulate climate"
                ],
                answer: "B",
                explanation: "The oxygen production percentage directly supports the 'lungs' metaphor."
            },
            {
                type: "supporting_details",
                passage: passages[2],
                question: "Which detail supports that the telephone was a major invention?",
                options: [
                    "Bell was trying to improve the telegraph",
                    "Bell spoke to his assistant first",
                    "It revolutionized communication over long distances",
                    "Today's smartphones developed from it"
                ],
                answer: "C",
                explanation: "The statement about revolutionizing communication supports its importance."
            },

            // Summarizing Texts (51-75)
            {
                type: "summarizing",
                passage: passages[0],
                question: "Which is the best summary of the solar system passage?",
                options: [
                    "The solar system has eight planets and the Sun at the center, with Earth being unique for supporting life",
                    "There are rocky planets and gas giants in space",
                    "The Sun is a star that gives light",
                    "Planets orbit around stars in space"
                ],
                answer: "A",
                explanation: "A good summary includes the main idea (solar system structure) and key supporting details (Earth's uniqueness)."
            },
            {
                type: "summarizing",
                passage: passages[3],
                question: "What is the best summary about honeybees?",
                options: [
                    "Honeybees are crucial pollinators that live in organized hives and produce honey, essential for many food crops",
                    "Bees make honey and live in hives",
                    "There are different types of bees with different jobs",
                    "Bees are important insects"
                ],
                answer: "A",
                explanation: "The best summary includes their importance, social structure, and products."
            },

            // Distinguishing Main Idea from Details (76-100)
            {
                type: "distinguish",
                passage: passages[4],
                question: "Which statement is a supporting detail, not the main idea?",
                options: [
                    "The water cycle describes water movement between Earth and atmosphere",
                    "Evaporation happens when sun heats water",
                    "Water continuously cycles through evaporation, condensation, and precipitation",
                    "The water cycle is an ongoing natural process"
                ],
                answer: "B",
                explanation: "Evaporation is one part (detail) of the cycle, not the overall main idea."
            },
            {
                type: "distinguish",
                passage: passages[1],
                question: "Which is NOT a supporting detail about rainforest importance?",
                options: [
                    "They produce 20% of world's oxygen",
                    "They contain most plant and animal species",
                    "They help regulate climate",
                    "They are forests with heavy rainfall"
                ],
                answer: "D",
                explanation: "Heavy rainfall describes where they're found, not why they're important."
            },

            // Topic Sentences (101-110)
            {
                type: "topic_sentence",
                passage: null,
                question: "Which sentence would make the best topic sentence for a paragraph about recycling?",
                options: [
                    "Recycling is an important practice that helps protect our environment",
                    "Paper can be recycled into new paper products",
                    "Some cities have recycling programs",
                    "Plastic bottles take a long time to decompose"
                ],
                answer: "A",
                explanation: "A topic sentence states the main idea of a paragraph."
            },
            {
                type: "topic_sentence",
                passage: null,
                question: "Which would be the best topic sentence for a paragraph about exercise benefits?",
                options: [
                    "Exercise makes people healthier and happier",
                    "Running is a popular form of exercise",
                    "Some people exercise in the morning",
                    "Exercise requires proper shoes"
                ],
                answer: "A",
                explanation: "This introduces the main idea about exercise benefits."
            },

            // Finding Evidence (111-125)
            {
                type: "evidence",
                passage: passages[2],
                question: "Which sentence provides evidence that the telephone changed communication?",
                options: [
                    "Alexander Graham Bell invented the telephone in 1876",
                    "This invention revolutionized communication",
                    "Bell's first words were to his assistant",
                    "Today's smartphones are distant relatives"
                ],
                answer: "B",
                explanation: "The word 'revolutionized' provides evidence of significant change."
            },

            // Real-world Application (126-150)
            {
                type: "application",
                passage: {
                    title: "School Announcement",
                    text: "The school library will be closed next Monday for renovations. Students should return all borrowed books by Friday. The library will reopen on Tuesday with new computers and more study areas. During the closure, students can use the public library nearby."
                },
                question: "What is the main purpose of this announcement?",
                options: [
                    "To inform students about library closure and renovations",
                    "To encourage book returns",
                    "To promote the public library",
                    "To announce new computers"
                ],
                answer: "A",
                explanation: "The main purpose is to inform about the closure and renovations."
            },
            {
                type: "application",
                passage: {
                    title: "Recipe Instructions",
                    text: "First, preheat the oven to 350¬∞F. Then, mix the flour, sugar, and eggs in a bowl. Add chocolate chips and stir gently. Pour the batter into a greased pan. Bake for 25 minutes or until golden brown. Let cool before serving."
                },
                question: "What is the main idea of these instructions?",
                options: [
                    "How to make chocolate chip cookies",
                    "The oven should be preheated",
                    "Ingredients need to be mixed",
                    "Cookies should cool before eating"
                ],
                answer: "A",
                explanation: "The overall main idea is the process of making cookies."
            }
        ];

        // Add more questions to reach 100+
        for (let i = 151; i <= 200; i++) {
            const passageIndex = i % passages.length;
            const questionTypes = ["main_idea", "supporting_details", "summarizing", "distinguish", "evidence"];
            const qType = questionTypes[i % questionTypes.length];
            
            let question, options, answer;
            
            switch(qType) {
                case "main_idea":
                    question = `What is the main idea of this passage about ${passages[passageIndex].title.toLowerCase()}?`;
                    options = [
                        `The main idea about ${passages[passageIndex].title}`,
                        `A supporting detail from the passage`,
                        `Another supporting detail`,
                        `An unrelated fact`
                    ];
                    answer = "A";
                    break;
                    
                case "supporting_details":
                    question = `Which detail from the ${passages[passageIndex].title} passage supports the main idea?`;
                    options = [
                        `A key supporting detail`,
                        `The main idea itself`,
                        `An unrelated fact`,
                        `A minor detail`
                    ];
                    answer = "A";
                    break;
                    
                case "summarizing":
                    question = `What is the best summary of the ${passages[passageIndex].title} passage?`;
                    options = [
                        `A complete summary including main idea and key details`,
                        `Only the main idea`,
                        `Only minor details`,
                        `An unrelated summary`
                    ];
                    answer = "A";
                    break;
            }
            
            questions.push({
                type: qType,
                passage: passages[passageIndex],
                question: question,
                options: options,
                answer: answer,
                explanation: `This question tests your ability to identify ${qType.replace('_', ' ')} in reading comprehension.`
            });
        }

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent reading comprehension!",
            "Fantastic analysis of the text!",
            "Great job identifying the main idea!",
            "Amazing! You really understand supporting details!",
            "Well done! Perfect summary!",
            "You're a reading comprehension champion!",
            "Perfect! You can distinguish main ideas from details!",
            "Outstanding critical thinking!",
            "Brilliant! You think like a skilled reader!",
            "You're on fire! Great text analysis!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const englishFact = document.getElementById('englishFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const passageContainer = document.getElementById('passageContainer');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5English');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5English', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            // Use the first 100 questions for practice
            appState.currentQuestions = [...questions.slice(0, 100)];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5English_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5English_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a reading comprehension expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent text analysis skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a reading master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review main ideas and supporting details!";
            } else {
                scoreMessage.textContent = "Keep learning! Reading skills grow with practice!";
            }
        }

        // Create English fact display
        function createEnglishFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'english-fact';
            
            const facts = [
                "The main idea is what the passage is mostly about - it's the big picture!",
                "Supporting details are facts, examples, or evidence that explain or prove the main idea.",
                "A good summary includes the main idea and the most important supporting details.",
                "Topic sentences usually come at the beginning of paragraphs and state the main idea.",
                "Good readers ask themselves: 'What is this mostly about?' to find the main idea.",
                "Concluding sentences often restate the main idea in different words.",
                "Transition words like 'first,' 'next,' and 'finally' help organize supporting details.",
                "About 60% of reading comprehension depends on identifying main ideas and details!"
            ];
            
            factDiv.innerHTML = `<strong>Reading Tip:</strong> ${facts[Math.floor(Math.random() * facts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "main_idea": "üí°",
                "supporting_details": "üîç",
                "summarizing": "üìù",
                "distinguish": "‚öñÔ∏è",
                "evidence": "üìö",
                "topic_sentence": "üìÑ",
                "application": "üè´"
            };
            
            let conceptName = "Reading Comprehension";
            let conceptIcon = "üìñ";
            
            if (question.type === "main_idea") {
                conceptName = "Main Idea";
                conceptIcon = conceptIcons.main_idea;
            } else if (question.type === "supporting_details") {
                conceptName = "Supporting Details";
                conceptIcon = conceptIcons.supporting_details;
            } else if (question.type === "summarizing") {
                conceptName = "Summarizing";
                conceptIcon = conceptIcons.summarizing;
            } else if (question.type === "distinguish") {
                conceptName = "Distinguishing Ideas";
                conceptIcon = conceptIcons.distinguish;
            } else if (question.type === "evidence") {
                conceptName = "Finding Evidence";
                conceptIcon = conceptIcons.evidence;
            } else if (question.type === "topic_sentence") {
                conceptName = "Topic Sentences";
                conceptIcon = conceptIcons.topic_sentence;
            } else if (question.type === "application") {
                conceptName = "Real-World Application";
                conceptIcon = conceptIcons.application;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type === "main_idea") {
                label.textContent = "Identifying the central message or primary point";
            } else if (question.type === "supporting_details") {
                label.textContent = "Finding facts, examples, and evidence";
            } else if (question.type === "summarizing") {
                label.textContent = "Condensing text to main points";
            } else if (question.type === "distinguish") {
                label.textContent = "Separating main ideas from details";
            } else if (question.type === "evidence") {
                label.textContent = "Locating proof for claims";
            } else if (question.type === "topic_sentence") {
                label.textContent = "Identifying paragraph introductions";
            } else if (question.type === "application") {
                label.textContent = "Applying skills to real texts";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create passage display
        function createPassageDisplay() {
            const container = document.createElement('div');
            container.className = 'passage-container';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.passage) {
                const title = document.createElement('div');
                title.className = 'passage-title';
                title.textContent = question.passage.title;
                
                const text = document.createElement('div');
                text.className = 'passage-text';
                
                // Add highlighting for main ideas and details
                let passageText = question.passage.text;
                
                // Simple highlighting simulation
                const sentences = passageText.split('. ');
                if (sentences.length > 0) {
                    // Highlight first sentence (often contains main idea)
                    sentences[0] = `<span class="highlight-main-idea">${sentences[0]}</span>`;
                    
                    // Highlight some supporting details
                    for (let i = 1; i < Math.min(3, sentences.length); i++) {
                        sentences[i] = `<span class="highlight-supporting-detail">${sentences[i]}</span>`;
                    }
                }
                
                text.innerHTML = sentences.join('. ') + (passageText.endsWith('.') ? '' : '.');
                
                container.appendChild(title);
                container.appendChild(text);
            } else {
                container.innerHTML = '<div class="passage-title">No passage required for this question type</div>';
            }
            
            return container;
        }

        // Create reading visualization
        function createReadingVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type === "main_idea") {
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-amber);">Main Idea Pyramid</h3>
                    
                    <div class="main-idea-pyramid">
                        <div class="pyramid-level pyramid-top pyramid-build" style="animation-delay: 0.1s">
                            MAIN IDEA
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">The big picture</div>
                        </div>
                        <div class="pyramid-level pyramid-middle pyramid-build" style="animation-delay: 0.3s">
                            KEY SUPPORTING DETAILS
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Important facts & examples</div>
                        </div>
                        <div class="pyramid-level pyramid-base pyramid-build" style="animation-delay: 0.5s">
                            SPECIFIC EVIDENCE
                            <div style="font-size: 0.8rem; font-weight: normal; margin-top: 5px;">Quotes, statistics, details</div>
                        </div>
                    </div>
                    
                    <div class="summary-box">
                        <div class="summary-title">
                            <span>üìå</span> How to Find the Main Idea:
                        </div>
                        <div class="text-structure">
                            <div class="structure-item">
                                <div class="structure-number">1</div>
                                Look at the title and first sentence
                            </div>
                            <div class="structure-item">
                                <div class="structure-number">2</div>
                                Ask: "What is this mostly about?"
                            </div>
                            <div class="structure-item">
                                <div class="structure-number">3</div>
                                Identify repeated ideas or words
                            </div>
                            <div class="structure-item">
                                <div class="structure-number">4</div>
                                Check what all details have in common
                            </div>
                        </div>
                    </div>
                    
                    <div class="keywords-container">
                        <div class="keyword">Mainly</div>
                        <div class="keyword">Mostly</div>
                        <div class="keyword">Central</div>
                        <div class="keyword">Primary</div>
                        <div class="keyword">Overall</div>
                        <div class="keyword">Essential</div>
                    </div>
                    
                    <div class="strategy-cards">
                        <div class="strategy-card">
                            <div class="strategy-icon">üëÅÔ∏è</div>
                            <div class="strategy-name">Look for Repetition</div>
                            <div class="strategy-tip">Repeated words often indicate main ideas</div>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-icon">ü§î</div>
                            <div class="strategy-name">Ask Questions</div>
                            <div class="strategy-tip">"What's the point?" "Why was this written?"</div>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-icon">üìù</div>
                            <div class="strategy-name">One-Sentence Summary</div>
                            <div class="strategy-tip">Try to summarize in one sentence</div>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-icon">üîç</div>
                            <div class="strategy-name">Topic Sentences</div>
                            <div class="strategy-tip">First sentences often state main ideas</div>
                        </div>
                    </div>
                `;
                
            } else if (question.type === "supporting_details") {
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">Supporting Details Analysis</h3>
                    
                    <div class="details-grid">
                        <div class="detail-card important card-flip">
                            <div class="detail-icon">‚≠ê</div>
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Important Details</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Directly support the main idea with facts or examples</div>
                        </div>
                        <div class="detail-card supporting card-flip" style="animation-delay: 0.2s">
                            <div class="detail-icon">üìä</div>
                            <div style="font-weight: bold; color: var(--primary-blue); margin-bottom: 5px;">Supporting Facts</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Statistics, dates, names that back up claims</div>
                        </div>
                        <div class="detail-card evidence card-flip" style="animation-delay: 0.4s">
                            <div class="detail-icon">üî¨</div>
                            <div style="font-weight: bold; color: var(--secondary-teal); margin-bottom: 5px;">Evidence</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Quotes, research findings, observations</div>
                        </div>
                        <div class="detail-card card-flip" style="animation-delay: 0.6s">
                            <div class="detail-icon">üí¨</div>
                            <div style="font-weight: bold; color: var(--accent-pink); margin-bottom: 5px;">Examples</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Specific cases that illustrate the point</div>
                        </div>
                    </div>
                    
                    <div class="summary-box">
                        <div class="summary-title">
                            <span>üîç</span> How to Identify Supporting Details:
                        </div>
                        <div class="text-structure">
                            <div class="structure-item">
                                <div class="structure-number">1</div>
                                Look for facts, numbers, and examples
                            </div>
                            <div class="structure-item">
                                <div class="structure-number">2</div>
                                Find quotes or direct evidence
                            </div>
                            <div class="structure-item">
                                <div class="structure-number">3</div>
                                Identify descriptions and explanations
                            </div>
                            <div class="structure-item">
                                <div class="structure-number">4</div>
                                Note transition words: for example, specifically, such as
                            </div>
                        </div>
                    </div>
                    
                    <div class="keywords-container">
                        <div class="keyword">For example</div>
                        <div class="keyword">Specifically</div>
                        <div class="keyword">In fact</div>
                        <div class="keyword">According to</div>
                        <div class="keyword">Evidence shows</div>
                        <div class="keyword">Statistics indicate</div>
                    </div>
                `;
                
            } else if (question.type === "summarizing") {
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--secondary-teal);">Summarizing Strategy</h3>
                    
                    <div class="text-structure">
                        <div class="structure-item">
                            <div class="structure-number">1</div>
                            <strong>Identify the Main Idea:</strong> What is the passage mostly about?
                        </div>
                        <div class="structure-item">
                            <div class="structure-number">2</div>
                            <strong>Find Key Details:</strong> What are the most important supporting points?
                        </div>
                        <div class="structure-item">
                            <div class="structure-number">3</div>
                            <strong>Remove Extra Information:</strong> Eliminate minor details and examples
                        </div>
                        <div class="structure-item">
                            <div class="structure-number">4</div>
                            <strong>Combine in Your Own Words:</strong> Write a brief version without copying
                        </div>
                        <div class="structure-item">
                            <div class="structure-number">5</div>
                            <strong>Check for Accuracy:</strong> Does your summary capture the main points?
                        </div>
                    </div>
                    
                    <div class="summary-box">
                        <div class="summary-title">
                            <span>üìù</span> Good Summary Checklist:
                        </div>
                        <div style="padding: 10px;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <span style="color: var(--secondary-teal); margin-right: 10px;">‚úì</span>
                                <span>Includes the main idea</span>
                            </div>
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <span style="color: var(--secondary-teal); margin-right: 10px;">‚úì</span>
                                <span>Includes 2-3 key supporting details</span>
                            </div>
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <span style="color: var(--secondary-teal); margin-right: 10px;">‚úì</span>
                                <span>Uses your own words</span>
                            </div>
                            <div style="display: flex; align-items: center;">
                                <span style="color: var(--secondary-teal); margin-right: 10px;">‚úì</span>
                                <span>Is much shorter than the original</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="strategy-cards">
                        <div class="strategy-card">
                            <div class="strategy-icon">‚úÇÔ∏è</div>
                            <div class="strategy-name">Cut the Fat</div>
                            <div class="strategy-tip">Remove examples and repetitions</div>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-icon">üîÑ</div>
                            <div class="strategy-name">Paraphrase</div>
                            <div class="strategy-tip">Use different words to say the same thing</div>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-icon">üéØ</div>
                            <div class="strategy-name">Focus on Key Points</div>
                            <div class="strategy-tip">What MUST the reader know?</div>
                        </div>
                        <div class="strategy-card">
                            <div class="strategy-icon">üìè</div>
                            <div class="strategy-name">Be Brief</div>
                            <div class="strategy-tip">A summary should be 25% or less of original</div>
                        </div>
                    </div>
                `;
                
            } else {
                // General reading comprehension visualization
                vizDiv.innerHTML = `
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--accent-purple);">Reading Comprehension Tools</h3>
                    
                    <div class="details-grid">
                        <div class="detail-card">
                            <div class="detail-icon">üí°</div>
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Main Idea</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">The most important point</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">üîç</div>
                            <div style="font-weight: bold; color: var(--primary-blue); margin-bottom: 5px;">Details</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Facts that support the idea</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">üìù</div>
                            <div style="font-weight: bold; color: var(--secondary-teal); margin-bottom: 5px;">Summary</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Brief restatement of key points</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">üéØ</div>
                            <div style="font-weight: bold; color: var(--accent-pink); margin-bottom: 5px;">Purpose</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Why the text was written</div>
                        </div>
                    </div>
                    
                    <div class="summary-box">
                        <div class="summary-title">
                            <span>üß†</span> Critical Reading Questions:
                        </div>
                        <div style="padding: 10px;">
                            <div style="margin-bottom: 10px; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                                <strong>Q:</strong> What is this mostly about?
                            </div>
                            <div style="margin-bottom: 10px; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                                <strong>Q:</strong> What evidence supports this?
                            </div>
                            <div style="margin-bottom: 10px; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                                <strong>Q:</strong> What are the key points?
                            </div>
                            <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 6px;">
                                <strong>Q:</strong> How could I summarize this?
                            </div>
                        </div>
                    </div>
                    
                    <div class="keywords-container">
                        <div class="keyword">Analyze</div>
                        <div class="keyword">Interpret</div>
                        <div class="keyword">Evaluate</div>
                        <div class="keyword">Infer</div>
                        <div class="keyword">Conclude</div>
                        <div class="keyword">Synthesize</div>
                    </div>
                `;
            }
            
            return vizDiv;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            englishFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            passageContainer.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            englishFact.appendChild(createEnglishFact());
            conceptDisplay.appendChild(createConceptDisplay());
            
            if (question.passage) {
                passageContainer.appendChild(createPassageDisplay());
            }
            
            visualizationContainer.appendChild(createReadingVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
