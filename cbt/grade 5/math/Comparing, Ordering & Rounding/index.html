<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 5 Math - Comparing, Ordering & Rounding | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Math Theme */
        :root {
            --primary-purple: #9C27B0;
            --secondary-pink: #E91E63;
            --accent-teal: #00BCD4;
            --accent-amber: #FFC107;
            --accent-lime: #CDDC39;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(156, 39, 176, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Background Slideshow */
        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(156, 39, 176, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-purple);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-purple);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-primary:hover {
            background: #7B1FA2;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-pink);
            color: white;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }

        .btn-secondary:hover {
            background: #C2185B;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-purple);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-purple), var(--secondary-pink));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .math-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            color: var(--text-secondary);
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-teal));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-purple);
            background: rgba(156, 39, 176, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: #F44336;
            color: #F44336;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-pink);
        }

        .option.correct .option-letter {
            background: var(--primary-purple);
            color: white;
        }

        .option.incorrect .option-letter {
            background: #F44336;
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: none;
        }

        .feedback-correct {
            background: rgba(156, 39, 176, 0.1);
            border-left: 5px solid var(--primary-purple);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid #F44336;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-purple);
        }

        .feedback-incorrect .feedback-icon {
            background: #F44336;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-purple);
        }

        .feedback-incorrect .feedback-title {
            color: #F44336;
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
        }

        /* Number Line Display */
        .number-line {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 30px 20px;
            overflow-x: auto;
            position: relative;
        }

        .number-line-track {
            width: 100%;
            height: 4px;
            background: var(--dark-border);
            position: relative;
            margin: 40px 0;
        }

        .number-line-marker {
            position: absolute;
            top: -15px;
            transform: translateX(-50%);
            text-align: center;
            min-width: 40px;
        }

        .number-line-tick {
            position: absolute;
            width: 2px;
            height: 10px;
            background: var(--text-secondary);
            top: -3px;
        }

        .number-line-number {
            position: absolute;
            top: -30px;
            transform: translateX(-50%);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .number-line-point {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--secondary-pink);
            border-radius: 50%;
            top: -8px;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(233, 30, 99, 0.5);
            cursor: pointer;
        }

        .number-line-label {
            position: absolute;
            top: 25px;
            transform: translateX(-50%);
            font-size: 0.9rem;
            color: var(--accent-teal);
            font-weight: bold;
        }

        /* Comparison Display */
        .comparison-display {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .comparison-item {
            background: rgba(255, 193, 7, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-amber);
            font-size: 1.1rem;
            text-align: center;
            min-width: 150px;
        }

        /* Rounding Process Display */
        .rounding-process {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .rounding-step {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 10px;
            min-width: 220px;
            text-align: center;
            border: 2px solid transparent;
        }

        .rounding-step.active {
            border-color: var(--primary-purple);
        }

        .rounding-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .rounding-title {
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 10px;
        }

        /* Number Display */
        .number-display {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: var(--primary-purple);
            padding: 20px;
            background: rgba(156, 39, 176, 0.1);
            border-radius: 12px;
            border: 2px solid var(--primary-purple);
        }

        /* Decimal Place Chart */
        .decimal-chart {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .decimal-place {
            background: rgba(0, 188, 212, 0.1);
            padding: 15px;
            border-radius: 8px;
            min-width: 80px;
            text-align: center;
            border: 1px solid var(--accent-teal);
        }

        .decimal-digit {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-primary);
        }

        .decimal-label {
            font-size: 0.8rem;
            color: var(--accent-teal);
            margin-top: 5px;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-purple);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Process Display */
        .process-display {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .process-step {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            min-width: 200px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .process-step.active {
            border-color: var(--primary-purple);
            box-shadow: 0 0 15px rgba(156, 39, 176, 0.3);
        }

        .step-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-purple);
        }

        .step-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .process-display {
                flex-direction: column;
                align-items: center;
            }
            
            .number-display {
                font-size: 2rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes countUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .count-up {
            animation: countUp 0.5s ease forwards;
        }
        
        @keyframes numberLineMove {
            0% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
            100% { transform: translateX(-50%) translateY(0); }
        }
        
        .number-line-bounce {
            animation: numberLineMove 1s ease-in-out infinite;
        }
        
        @keyframes roundingHighlight {
            0%, 100% { background-color: transparent; }
            50% { background-color: rgba(156, 39, 176, 0.2); }
        }
        
        .rounding-highlight {
            animation: roundingHighlight 1s ease-in-out;
        }
        
        @keyframes comparisonGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 193, 7, 0.3); }
            50% { box-shadow: 0 0 20px rgba(255, 193, 7, 0.6); }
        }
        
        .comparison-glow {
            animation: comparisonGlow 2s ease-in-out infinite;
        }
        
        @keyframes decimalSlide {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .decimal-slide {
            animation: decimalSlide 0.5s ease forwards;
        }
        
        @keyframes orderingSequence {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .ordering-sequence {
            animation: orderingSequence 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Background Slideshow -->
    <div class="slideshow" id="slideshow">
        <div class="slide active" style="background-image: url('https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1509228468518-180dd4864904?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1589256469067-ea99122bbdc4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
        <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1532094349884-543bc11b234d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')"></div>
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 5 Mathematics</h1>
            <p class="welcome-subtitle">Master the art of comparing, ordering, and rounding numbers! Learn to compare whole numbers and decimals, order numbers from least to greatest (or greatest to least), and round numbers to any place value. Build essential number sense skills!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">⚖️</span>
                <span class="topic-name">Comparing, Ordering & Rounding Numbers</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Math Adventure</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1%"></div>
                </div>
            </div>

            <div class="question-container">
                <h2 class="question-text" id="questionText"></h2>
                
                <!-- Math fact display -->
                <div id="mathFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Number line display -->
                <div id="numberLineDisplay"></div>
                
                <!-- Number display -->
                <div id="numberDisplay"></div>
                
                <!-- Process display -->
                <div id="processDisplay"></div>
                
                <!-- Decimal chart display -->
                <div id="decimalChartDisplay"></div>
                
                <!-- Comparison display -->
                <div id="comparisonDisplay"></div>
                
                <!-- Rounding process display -->
                <div id="roundingProcessDisplay"></div>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-message"></div>
                    <div class="feedback-explanation"></div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Math Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-secondary" id="viewTopics">Explore Other Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize slideshow
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        // Questions array - 120 Grade 5 Math questions covering Comparing, Ordering & Rounding
        const questions = [
            // Comparing Whole Numbers (1-20)
            {
                type: "comparing_whole",
                question: "Which symbol makes this true: 4,567 ___ 4,657?",
                options: ["<", ">", "=", "≥"],
                answer: "A",
                explanation: "4,567 < 4,657 because comparing hundreds place: 5 < 6"
            },
            {
                type: "comparing_whole",
                question: "Compare: 23,456 ___ 23,546",
                options: ["<", ">", "=", "≠"],
                answer: "A",
                explanation: "23,456 < 23,546 because in the hundreds place: 4 < 5"
            },
            {
                type: "comparing_whole",
                question: "Which is greater: 123,456 or 123,465?",
                options: ["123,465", "123,456", "They are equal", "Cannot compare"],
                answer: "A",
                explanation: "123,465 > 123,456 because in the tens place: 6 > 5"
            },
            {
                type: "comparing_whole",
                question: "Which number makes this true: 89,0_5 > 89,095?",
                options: ["9", "0", "1", "No digit works"],
                answer: "D",
                explanation: "No single digit works because 89,095 has 9 in tens place, and we need a number > 9 in the tens place to be greater"
            },
            {
                type: "comparing_whole",
                question: "Compare: 1,234,567 ___ 1,234,657",
                options: ["<", ">", "=", "≈"],
                answer: "A",
                explanation: "1,234,567 < 1,234,657 because comparing hundreds place: 5 < 6"
            },
            {
                type: "comparing_whole",
                question: "Which symbol: 450,789 ___ 450,798?",
                options: ["<", ">", "=", "≤"],
                answer: "A",
                explanation: "450,789 < 450,798 because in the tens place: 8 < 9"
            },
            {
                type: "comparing_whole",
                question: "True or false: 999,999 > 1,000,000",
                options: ["False", "True", "Equal", "Cannot determine"],
                answer: "A",
                explanation: "999,999 < 1,000,000 because 1 million is larger than any 6-digit number"
            },
            {
                type: "comparing_whole",
                question: "Which is smaller: 345,678 or 345,687?",
                options: ["345,678", "345,687", "They are equal", "Cannot determine"],
                answer: "A",
                explanation: "345,678 < 345,687 because in the ones place: 8 < 7? Wait, actually 8 > 7, so 345,678 is smaller"
            },
            {
                type: "comparing_whole",
                question: "Compare: 7,890,123 ___ 7,890,132",
                options: ["<", ">", "=", "≥"],
                answer: "A",
                explanation: "7,890,123 < 7,890,132 because in the tens place: 2 < 3"
            },
            {
                type: "comparing_whole",
                question: "Which symbol: 12,345,678 ___ 12,345,768?",
                options: ["<", ">", "=", "≠"],
                answer: "A",
                explanation: "12,345,678 < 12,345,768 because in the hundreds place: 6 < 7"
            },

            // Ordering Numbers (21-40)
            {
                type: "ordering_numbers",
                question: "Order from least to greatest: 45,678; 45,768; 45,687",
                options: ["45,678; 45,687; 45,768", "45,768; 45,687; 45,678", "45,687; 45,678; 45,768", "45,678; 45,768; 45,687"],
                answer: "A",
                explanation: "Compare hundreds then tens: 45,678 (hundreds=6, tens=7); 45,687 (hundreds=6, tens=8); 45,768 (hundreds=7)"
            },
            {
                type: "ordering_numbers",
                question: "Order from greatest to least: 99,999; 100,000; 99,990",
                options: ["100,000; 99,999; 99,990", "99,999; 100,000; 99,990", "99,990; 99,999; 100,000", "100,000; 99,990; 99,999"],
                answer: "A",
                explanation: "100,000 > 99,999 > 99,990 (100,000 is larger than any 5-digit number)"
            },
            {
                type: "ordering_numbers",
                question: "Which number comes between 456,789 and 456,799?",
                options: ["456,795", "456,790", "456,800", "456,788"],
                answer: "B",
                explanation: "456,790 is between 456,789 and 456,799"
            },
            {
                type: "ordering_numbers",
                question: "Arrange in ascending order: 234,567; 234,657; 234,576",
                options: ["234,567; 234,576; 234,657", "234,657; 234,576; 234,567", "234,576; 234,567; 234,657", "234,567; 234,657; 234,576"],
                answer: "A",
                explanation: "Ascending means least to greatest: 234,567 < 234,576 < 234,657"
            },
            {
                type: "ordering_numbers",
                question: "Order from greatest: 890,123; 809,123; 890,132",
                options: ["890,132; 890,123; 809,123", "890,123; 890,132; 809,123", "809,123; 890,123; 890,132", "890,132; 809,123; 890,123"],
                answer: "A",
                explanation: "890,132 > 890,123 > 809,123 (compare ten thousands then hundreds)"
            },
            {
                type: "ordering_numbers",
                question: "Which number would come first if ordered from least to greatest: 345,678; 345,687; 345,679?",
                options: ["345,678", "345,679", "345,687", "All equal"],
                answer: "A",
                explanation: "345,678 < 345,679 < 345,687"
            },
            {
                type: "ordering_numbers",
                question: "Arrange in descending order: 1,234,567; 1,234,657; 1,234,576",
                options: ["1,234,657; 1,234,576; 1,234,567", "1,234,567; 1,234,576; 1,234,657", "1,234,576; 1,234,657; 1,234,567", "1,234,657; 1,234,567; 1,234,576"],
                answer: "A",
                explanation: "Descending means greatest to least: 1,234,657 > 1,234,576 > 1,234,567"
            },
            {
                type: "ordering_numbers",
                question: "Find the missing number in this ordered sequence: 456,789; ______; 456,791; 456,792",
                options: ["456,790", "456,788", "456,793", "456,787"],
                answer: "A",
                explanation: "The sequence increases by 1 each time, so 456,789 + 1 = 456,790"
            },
            {
                type: "ordering_numbers",
                question: "Order from least: 78,901; 78,910; 78,091; 78,109",
                options: ["78,091; 78,901; 78,109; 78,910", "78,091; 78,109; 78,901; 78,910", "78,901; 78,910; 78,091; 78,109", "78,091; 78,109; 78,910; 78,901"],
                answer: "B",
                explanation: "78,091 < 78,109 < 78,901 < 78,910 (compare thousands then hundreds)"
            },
            {
                type: "ordering_numbers",
                question: "Which set is correctly ordered from greatest to least?",
                options: ["999,999; 99,999; 9,999", "9,999; 99,999; 999,999", "99,999; 9,999; 999,999", "9,999; 999,999; 99,999"],
                answer: "A",
                explanation: "999,999 > 99,999 > 9,999"
            },

            // Comparing Decimals (41-60)
            {
                type: "comparing_decimals",
                question: "Which is greater: 0.5 or 0.50?",
                options: ["They are equal", "0.5", "0.50", "Cannot compare"],
                answer: "A",
                explanation: "0.5 = 0.50 because adding zeros at the end of a decimal doesn't change its value"
            },
            {
                type: "comparing_decimals",
                question: "Compare: 3.45 ___ 3.54",
                options: ["<", ">", "=", "≥"],
                answer: "A",
                explanation: "3.45 < 3.54 because comparing tenths place: 4 < 5"
            },
            {
                type: "comparing_decimals",
                question: "Which is smaller: 7.89 or 7.98?",
                options: ["7.89", "7.98", "They are equal", "Cannot determine"],
                answer: "A",
                explanation: "7.89 < 7.98 because in the tenths place: 8 < 9"
            },
            {
                type: "comparing_decimals",
                question: "Compare: 12.345 ___ 12.354",
                options: ["<", ">", "=", "≠"],
                answer: "A",
                explanation: "12.345 < 12.354 because comparing hundredths place: 4 < 5"
            },
            {
                type: "comparing_decimals",
                question: "Which symbol: 0.678 ___ 0.687?",
                options: ["<", ">", "=", "≈"],
                answer: "A",
                explanation: "0.678 < 0.687 because in the hundredths place: 7 < 8"
            },
            {
                type: "comparing_decimals",
                question: "True or false: 5.60 > 5.6",
                options: ["False", "True", "Equal", "Cannot determine"],
                answer: "A",
                explanation: "5.60 = 5.6, so 5.60 is not greater than 5.6"
            },
            {
                type: "comparing_decimals",
                question: "Compare: 9.999 ___ 10.001",
                options: ["<", ">", "=", "≤"],
                answer: "A",
                explanation: "9.999 < 10.001 because 9 < 10 (compare whole number part first)"
            },
            {
                type: "comparing_decimals",
                question: "Which is greater: 4.567 or 4.576?",
                options: ["4.576", "4.567", "They are equal", "Cannot compare"],
                answer: "A",
                explanation: "4.576 > 4.567 because in the hundredths place: 7 > 6"
            },
            {
                type: "comparing_decimals",
                question: "Compare: 0.1234 ___ 0.1243",
                options: ["<", ">", "=", "≥"],
                answer: "A",
                explanation: "0.1234 < 0.1243 because in the thousandths place: 3 < 4"
            },
            {
                type: "comparing_decimals",
                question: "Which symbol: 99.99 ___ 100.00?",
                options: ["<", ">", "=", "≠"],
                answer: "A",
                explanation: "99.99 < 100.00 because 99 < 100 (compare whole number part)"
            },

            // Ordering Decimals (61-80)
            {
                type: "ordering_decimals",
                question: "Order from least to greatest: 4.56, 4.65, 4.06",
                options: ["4.06, 4.56, 4.65", "4.56, 4.65, 4.06", "4.65, 4.56, 4.06", "4.06, 4.65, 4.56"],
                answer: "A",
                explanation: "4.06 < 4.56 < 4.65 (compare ones then tenths)"
            },
            {
                type: "ordering_decimals",
                question: "Arrange in descending order: 7.89, 7.98, 7.099",
                options: ["7.98, 7.89, 7.099", "7.89, 7.98, 7.099", "7.099, 7.89, 7.98", "7.98, 7.099, 7.89"],
                answer: "A",
                explanation: "7.98 > 7.89 > 7.099"
            },
            {
                type: "ordering_decimals",
                question: "Which decimal comes between 3.45 and 3.54?",
                options: ["3.50", "3.40", "3.55", "3.44"],
                answer: "A",
                explanation: "3.50 is between 3.45 and 3.54"
            },
            {
                type: "ordering_decimals",
                question: "Order from greatest: 0.999, 0.99, 0.9",
                options: ["0.999, 0.99, 0.9", "0.9, 0.99, 0.999", "0.99, 0.9, 0.999", "0.999, 0.9, 0.99"],
                answer: "A",
                explanation: "0.999 > 0.99 > 0.9"
            },
            {
                type: "ordering_decimals",
                question: "Arrange in ascending order: 12.34, 12.43, 12.04",
                options: ["12.04, 12.34, 12.43", "12.34, 12.43, 12.04", "12.43, 12.34, 12.04", "12.04, 12.43, 12.34"],
                answer: "A",
                explanation: "12.04 < 12.34 < 12.43"
            },
            {
                type: "ordering_decimals",
                question: "Which set is correctly ordered from least to greatest?",
                options: ["0.05, 0.5, 0.55", "0.5, 0.05, 0.55", "0.55, 0.5, 0.05", "0.05, 0.55, 0.5"],
                answer: "A",
                explanation: "0.05 < 0.5 < 0.55"
            },
            {
                type: "ordering_decimals",
                question: "Find the missing number: 5.67, ______, 5.69, 5.70",
                options: ["5.68", "5.66", "5.71", "5.65"],
                answer: "A",
                explanation: "The sequence increases by 0.01 each time, so 5.67 + 0.01 = 5.68"
            },
            {
                type: "ordering_decimals",
                question: "Order from greatest to least: 99.99, 100.00, 99.9",
                options: ["100.00, 99.99, 99.9", "99.99, 100.00, 99.9", "99.9, 99.99, 100.00", "100.00, 99.9, 99.99"],
                answer: "A",
                explanation: "100.00 > 99.99 > 99.9"
            },
            {
                type: "ordering_decimals",
                question: "Which decimal would be second when ordered from least to greatest: 8.76, 8.67, 8.7?",
                options: ["8.7", "8.76", "8.67", "All equal"],
                answer: "A",
                explanation: "8.67 < 8.7 < 8.76, so 8.7 is second"
            },
            {
                type: "ordering_decimals",
                question: "Arrange: 0.123, 0.132, 0.113, 0.121",
                options: ["0.113, 0.121, 0.123, 0.132", "0.121, 0.113, 0.123, 0.132", "0.132, 0.123, 0.121, 0.113", "0.113, 0.123, 0.121, 0.132"],
                answer: "A",
                explanation: "0.113 < 0.121 < 0.123 < 0.132 (compare hundredths then thousandths)"
            },

            // Rounding Whole Numbers (81-100)
            {
                type: "rounding_whole",
                question: "Round 4,567 to the nearest hundred",
                options: ["4,600", "4,500", "4,570", "4,6000"],
                answer: "A",
                explanation: "Look at tens digit (6): 6 ≥ 5, so round up: 4,567 → 4,600"
            },
            {
                type: "rounding_whole",
                question: "Round 8,432 to the nearest thousand",
                options: ["8,000", "8,400", "8,430", "9,000"],
                answer: "A",
                explanation: "Look at hundreds digit (4): 4 < 5, so round down: 8,432 → 8,000"
            },
            {
                type: "rounding_whole",
                question: "Round 123,456 to the nearest ten thousand",
                options: ["120,000", "123,000", "130,000", "123,500"],
                answer: "A",
                explanation: "Look at thousands digit (3): 3 < 5, so round down: 123,456 → 120,000"
            },
            {
                type: "rounding_whole",
                question: "Round 987,654 to the nearest hundred",
                options: ["987,700", "987,600", "987,650", "988,000"],
                answer: "A",
                explanation: "Look at tens digit (5): 5 ≥ 5, so round up: 987,654 → 987,700"
            },
            {
                type: "rounding_whole",
                question: "What is 56,789 rounded to the nearest thousand?",
                options: ["57,000", "56,000", "56,700", "56,800"],
                answer: "A",
                explanation: "Look at hundreds digit (7): 7 ≥ 5, so round up: 56,789 → 57,000"
            },
            {
                type: "rounding_whole",
                question: "Round 1,234,567 to the nearest hundred thousand",
                options: ["1,200,000", "1,230,000", "1,235,000", "1,300,000"],
                answer: "A",
                explanation: "Look at ten thousands digit (3): 3 < 5, so round down: 1,234,567 → 1,200,000"
            },
            {
                type: "rounding_whole",
                question: "What is 450,000 rounded to the nearest million?",
                options: ["0", "1,000,000", "500,000", "400,000"],
                answer: "A",
                explanation: "450,000 is less than 500,000, so it rounds down to 0 million"
            },
            {
                type: "rounding_whole",
                question: "Round 999,999 to the nearest thousand",
                options: ["1,000,000", "999,000", "1,000", "999,999"],
                answer: "A",
                explanation: "Look at hundreds digit (9): 9 ≥ 5, round up: 999,999 → 1,000,000"
            },
            {
                type: "rounding_whole",
                question: "What is 3,450,000 rounded to the nearest million?",
                options: ["3,000,000", "3,500,000", "4,000,000", "3,000"],
                answer: "A",
                explanation: "Look at hundred thousands digit (4): 4 < 5, round down: 3,450,000 → 3,000,000"
            },
            {
                type: "rounding_whole",
                question: "Round 125,678 to the nearest ten",
                options: ["125,680", "125,670", "125,700", "125,600"],
                answer: "A",
                explanation: "Look at ones digit (8): 8 ≥ 5, round up: 125,678 → 125,680"
            },

            // Rounding Decimals (101-120)
            {
                type: "rounding_decimals",
                question: "Round 4.567 to the nearest tenth",
                options: ["4.6", "4.5", "4.57", "4.56"],
                answer: "A",
                explanation: "Look at hundredths digit (6): 6 ≥ 5, so round up: 4.567 → 4.6"
            },
            {
                type: "rounding_decimals",
                question: "Round 3.14159 to the nearest hundredth",
                options: ["3.14", "3.15", "3.141", "3.142"],
                answer: "A",
                explanation: "Look at thousandths digit (1): 1 < 5, so round down: 3.14159 → 3.14"
            },
            {
                type: "rounding_decimals",
                question: "What is 7.895 rounded to the nearest hundredth?",
                options: ["7.90", "7.89", "7.9", "7.895"],
                answer: "A",
                explanation: "Look at thousandths digit (5): 5 ≥ 5, so round up: 7.895 → 7.90"
            },
            {
                type: "rounding_decimals",
                question: "Round 0.999 to the nearest tenth",
                options: ["1.0", "0.9", "1", "0.10"],
                answer: "A",
                explanation: "Look at hundredths digit (9): 9 ≥ 5, so round up: 0.999 → 1.0"
            },
            {
                type: "rounding_decimals",
                question: "What is 12.3456 rounded to the nearest thousandth?",
                options: ["12.346", "12.345", "12.35", "12.34"],
                answer: "A",
                explanation: "Look at ten-thousandths digit (6): 6 ≥ 5, so round up: 12.3456 → 12.346"
            },
            {
                type: "rounding_decimals",
                question: "Round 99.999 to the nearest whole number",
                options: ["100", "99", "99.9", "100.0"],
                answer: "A",
                explanation: "Look at tenths digit (9): 9 ≥ 5, so round up: 99.999 → 100"
            },
            {
                type: "rounding_decimals",
                question: "What is 0.055 rounded to the nearest hundredth?",
                options: ["0.06", "0.05", "0.055", "0.06"],
                answer: "A",
                explanation: "Look at thousandths digit (5): 5 ≥ 5, so round up: 0.055 → 0.06"
            },
            {
                type: "rounding_decimals",
                question: "Round 8.7654 to the nearest thousandth",
                options: ["8.765", "8.766", "8.77", "8.76"],
                answer: "A",
                explanation: "Look at ten-thousandths digit (4): 4 < 5, so round down: 8.7654 → 8.765"
            },
            {
                type: "rounding_decimals",
                question: "What is 123.456789 rounded to the nearest ten-thousandth?",
                options: ["123.4568", "123.4567", "123.45679", "123.4568"],
                answer: "A",
                explanation: "Look at hundred-thousandths digit (8): 8 ≥ 5, so round up: 123.456789 → 123.4568"
            },
            {
                type: "rounding_decimals",
                question: "Round 0.00499 to the nearest thousandth",
                options: ["0.005", "0.004", "0.0050", "0.0049"],
                answer: "A",
                explanation: "Look at ten-thousandths digit (9): 9 ≥ 5, so round up: 0.00499 → 0.005"
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent number sense!",
            "Fantastic comparison skills!",
            "Great job! You're a rounding expert!",
            "Amazing! Your decimal understanding is impressive!",
            "Well done! Perfect ordering!",
            "You're a number comparison champion!",
            "Perfect! You understand place value relationships!",
            "Outstanding mathematical thinking!",
            "Brilliant! You think like a mathematician!",
            "You're on fire! Great math insight!"
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const mathFact = document.getElementById('mathFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const numberLineDisplay = document.getElementById('numberLineDisplay');
        const numberDisplay = document.getElementById('numberDisplay');
        const processDisplay = document.getElementById('processDisplay');
        const decimalChartDisplay = document.getElementById('decimalChartDisplay');
        const comparisonDisplay = document.getElementById('comparisonDisplay');
        const roundingProcessDisplay = document.getElementById('roundingProcessDisplay');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Format number with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Initialize the app
        function initApp() {
            initSlideshow();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade5MathCompareRound');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade5MathCompareRound', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade5MathCompareRound_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (appState.score > highest) {
                localStorage.setItem('ideolixGrade5MathCompareRound_highestScore', appState.score);
            }
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a comparison and rounding expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent number sense!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing to become a math master!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review number concepts and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Math skills grow with practice!";
            }
        }

        // Create math fact display
        function createMathFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'math-fact';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const facts = [
                "The symbols < and > were invented by British mathematician Thomas Harriot in the 1630s!",
                "Rounding numbers makes them easier to work with. Ancient Babylonians used rounding 4,000 years ago!",
                "When comparing decimals, you can add zeros to make them have the same number of decimal places!",
                "The number line was invented by John Wallis in the 17th century to visualize number relationships!",
                "In some cultures, numbers are compared differently - ancient Romans compared by counting symbols!",
                "Rounding to the nearest even number is called 'banker's rounding' and is used in finance!",
                "The decimal point was invented by Scottish mathematician John Napier in the early 1600s!",
                "When ordering numbers, you're actually comparing place values from left to right!"
            ];
            
            factDiv.innerHTML = `<strong>Math Fact:</strong> ${facts[Math.floor(Math.random() * facts.length)]}`;
            
            return factDiv;
        }

        // Create number line visualization
        function createNumberLine() {
            const lineDiv = document.createElement('div');
            lineDiv.className = 'number-line';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("ordering") || question.type.includes("comparing")) {
                let start, end, values;
                
                if (question.type.includes("decimals")) {
                    // For decimals, show a smaller range
                    start = 0;
                    end = 10;
                    values = [3.4, 3.5, 3.6, 3.7, 3.8, 3.9, 4.0, 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8, 4.9, 5.0];
                } else {
                    // For whole numbers
                    start = 45000;
                    end = 46000;
                    values = [45500, 45600, 45700, 45800, 45900, 46000];
                }
                
                const numPoints = 11; // Number of markers on the line
                let lineHTML = `<div class="number-line-track">`;
                
                // Add tick marks and numbers
                for (let i = 0; i <= numPoints; i++) {
                    const position = (i / numPoints) * 100;
                    const value = start + ((end - start) * i) / numPoints;
                    
                    lineHTML += `
                        <div class="number-line-tick" style="left: ${position}%;"></div>
                        <div class="number-line-number" style="left: ${position}%;">${formatNumber(Math.round(value))}</div>
                    `;
                }
                
                // Add some random points for comparison
                const point1 = start + Math.random() * (end - start);
                const point2 = start + Math.random() * (end - start);
                
                lineHTML += `
                    <div class="number-line-point number-line-bounce" style="left: ${((point1 - start) / (end - start)) * 100}%; background: var(--secondary-pink);"></div>
                    <div class="number-line-label" style="left: ${((point1 - start) / (end - start)) * 100}%;">A: ${point1.toFixed(2)}</div>
                    
                    <div class="number-line-point number-line-bounce" style="left: ${((point2 - start) / (end - start)) * 100}%; background: var(--accent-teal); animation-delay: 0.5s;"></div>
                    <div class="number-line-label" style="left: ${((point2 - start) / (end - start)) * 100}%;">B: ${point2.toFixed(2)}</div>
                `;
                
                lineHTML += `</div>`;
                lineHTML += `<div style="text-align: center; margin-top: 20px; color: var(--text-secondary);">Which point is greater? Compare A and B.</div>`;
                
                lineDiv.innerHTML = lineHTML;
            }
            
            return lineDiv;
        }

        // Create decimal place chart
        function createDecimalChart() {
            const chartDiv = document.createElement('div');
            chartDiv.className = 'decimal-chart';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("decimal")) {
                // Generate a random decimal number
                const whole = Math.floor(Math.random() * 10) + 1;
                const decimal = Math.floor(Math.random() * 1000);
                const decimalStr = decimal.toString().padStart(3, '0');
                const number = parseFloat(`${whole}.${decimalStr}`);
                
                const places = [
                    { label: "Ones", digit: whole.toString() },
                    { label: "Tenths", digit: decimalStr[0] || "0" },
                    { label: "Hundredths", digit: decimalStr[1] || "0" },
                    { label: "Thousandths", digit: decimalStr[2] || "0" }
                ];
                
                let chartHTML = '';
                
                // Whole number part
                chartHTML += `
                    <div class="decimal-place">
                        <div class="decimal-digit">${places[0].digit}</div>
                        <div class="decimal-label">${places[0].label}</div>
                    </div>
                    <div style="align-self: center; font-size: 1.5rem;">.</div>
                `;
                
                // Decimal parts
                for (let i = 1; i < places.length; i++) {
                    chartHTML += `
                        <div class="decimal-place decimal-slide" style="animation-delay: ${i * 0.1}s;">
                            <div class="decimal-digit">${places[i].digit}</div>
                            <div class="decimal-label">${places[i].label}</div>
                        </div>
                    `;
                }
                
                chartHTML += `
                    <div style="grid-column: 1 / -1; text-align: center; margin-top: 15px; color: var(--primary-purple); font-weight: bold;">
                        Number: ${number.toFixed(3)}
                    </div>
                `;
                
                chartDiv.innerHTML = chartHTML;
            }
            
            return chartDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "comparing_whole": "⚖️",
                "ordering_numbers": "📊",
                "comparing_decimals": "🔍",
                "ordering_decimals": "↕️",
                "rounding_whole": "🎯",
                "rounding_decimals": "🎯"
            };
            
            let conceptName = "Comparing Numbers";
            let conceptIcon = "⚖️";
            
            if (question.type.includes("comparing_whole")) {
                conceptName = "Comparing Whole Numbers";
                conceptIcon = conceptIcons.comparing_whole;
            } else if (question.type.includes("ordering_numbers")) {
                conceptName = "Ordering Numbers";
                conceptIcon = conceptIcons.ordering_numbers;
            } else if (question.type.includes("comparing_decimals")) {
                conceptName = "Comparing Decimals";
                conceptIcon = conceptIcons.comparing_decimals;
            } else if (question.type.includes("ordering_decimals")) {
                conceptName = "Ordering Decimals";
                conceptIcon = conceptIcons.ordering_decimals;
            } else if (question.type.includes("rounding_whole")) {
                conceptName = "Rounding Whole Numbers";
                conceptIcon = conceptIcons.rounding_whole;
            } else if (question.type.includes("rounding_decimals")) {
                conceptName = "Rounding Decimals";
                conceptIcon = conceptIcons.rounding_decimals;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("comparing")) {
                label.textContent = "Use <, >, or = to compare values";
            } else if (question.type.includes("ordering")) {
                label.textContent = "Arrange numbers in increasing or decreasing order";
            } else if (question.type.includes("rounding")) {
                label.textContent = "Round numbers to specific place values";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create number display
        function createNumberDisplay() {
            const display = document.createElement('div');
            display.className = 'number-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("rounding")) {
                if (question.type.includes("whole")) {
                    const num = Math.floor(Math.random() * 1000000);
                    display.textContent = formatNumber(num);
                    display.classList.add('number-glow');
                } else {
                    const num = (Math.random() * 100).toFixed(4);
                    display.textContent = num;
                    display.classList.add('number-glow');
                }
            } else if (question.type.includes("comparing")) {
                const num1 = question.type.includes("whole") ? 
                    Math.floor(Math.random() * 10000) : 
                    (Math.random() * 10).toFixed(2);
                const num2 = question.type.includes("whole") ? 
                    Math.floor(Math.random() * 10000) : 
                    (Math.random() * 10).toFixed(2);
                
                display.innerHTML = `
                    <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                        <div class="comparison-glow" style="padding: 15px; background: rgba(156, 39, 176, 0.1); border-radius: 10px;">
                            <div style="font-size: 1rem; color: var(--text-secondary);">Number A</div>
                            <div style="font-size: 2rem;">${question.type.includes("whole") ? formatNumber(num1) : num1}</div>
                        </div>
                        <div style="align-self: center; font-size: 3rem; color: var(--accent-amber);">?</div>
                        <div class="comparison-glow" style="padding: 15px; background: rgba(0, 188, 212, 0.1); border-radius: 10px; animation-delay: 1s;">
                            <div style="font-size: 1rem; color: var(--text-secondary);">Number B</div>
                            <div style="font-size: 2rem;">${question.type.includes("whole") ? formatNumber(num2) : num2}</div>
                        </div>
                    </div>
                `;
            }
            
            return display;
        }

        // Create process display
        function createProcessDisplay() {
            const display = document.createElement('div');
            display.className = 'process-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("comparing")) {
                display.innerHTML = `
                    <div class="process-step">
                        <div class="step-icon">🔍</div>
                        <div class="step-title">Step 1: Align</div>
                        <div class="step-description">Write numbers with same place values aligned</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">👈</div>
                        <div class="step-title">Step 2: Compare</div>
                        <div class="step-description">Start from leftmost (highest) place value</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">📊</div>
                        <div class="step-title">Step 3: Find Difference</div>
                        <div class="step-description">Move right until digits differ</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">✅</div>
                        <div class="step-title">Step 4: Determine</div>
                        <div class="step-description">Larger digit means larger number</div>
                    </div>
                `;
            } else if (question.type.includes("ordering")) {
                display.innerHTML = `
                    <div class="process-step">
                        <div class="step-icon">📋</div>
                        <div class="step-title">Step 1: List</div>
                        <div class="step-description">Write all numbers in a list</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">🔍</div>
                        <div class="step-title">Step 2: Compare</div>
                        <div class="step-description">Compare each pair of numbers</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">🔄</div>
                        <div class="step-title">Step 3: Arrange</div>
                        <div class="step-description">Swap numbers into correct order</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">✅</div>
                        <div class="step-title">Step 4: Verify</div>
                        <div class="step-description">Check that order is correct</div>
                    </div>
                `;
            } else if (question.type.includes("rounding")) {
                display.innerHTML = `
                    <div class="process-step">
                        <div class="step-icon">🎯</div>
                        <div class="step-title">Step 1: Identify Place</div>
                        <div class="step-description">Find the digit in the place you're rounding to</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">👉</div>
                        <div class="step-title">Step 2: Look Right</div>
                        <div class="step-description">Look at the digit immediately to the right</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">📈</div>
                        <div class="step-title">Step 3: 5 or More?</div>
                        <div class="step-description">If digit is 5 or more, round up</div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">📉</div>
                        <div class="step-title">Step 4: 4 or Less?</div>
                        <div class="step-description">If digit is 4 or less, round down</div>
                    </div>
                `;
            }
            
            return display;
        }

        // Create comparison display
        function createComparisonDisplay() {
            const display = document.createElement('div');
            display.className = 'comparison-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("comparing")) {
                const symbols = ["<", ">", "="];
                let symbolHTML = '';
                
                symbols.forEach((symbol, index) => {
                    symbolHTML += `
                        <div class="comparison-item comparison-glow" style="animation-delay: ${index * 0.3}s;">
                            <div style="font-size: 2rem;">${symbol}</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">
                                ${symbol === "<" ? "less than" : symbol === ">" ? "greater than" : "equal to"}
                            </div>
                        </div>
                    `;
                });
                
                display.innerHTML = symbolHTML;
            }
            
            return display;
        }

        // Create rounding process display
        function createRoundingProcessDisplay() {
            const display = document.createElement('div');
            display.className = 'rounding-process';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("rounding")) {
                // Example rounding problem
                let exampleNum, place, result;
                
                if (question.type.includes("whole")) {
                    exampleNum = Math.floor(Math.random() * 10000);
                    const places = ["tens", "hundreds", "thousands"];
                    place = places[Math.floor(Math.random() * places.length)];
                    
                    if (place === "tens") {
                        const tensDigit = Math.floor(exampleNum / 10) % 10;
                        const onesDigit = exampleNum % 10;
                        result = onesDigit >= 5 ? 
                            (Math.floor(exampleNum / 100) * 100) + ((tensDigit + 1) * 10) :
                            (Math.floor(exampleNum / 100) * 100) + (tensDigit * 10);
                    } else if (place === "hundreds") {
                        const hundredsDigit = Math.floor(exampleNum / 100) % 10;
                        const tensDigit = Math.floor(exampleNum / 10) % 10;
                        result = tensDigit >= 5 ? 
                            (Math.floor(exampleNum / 1000) * 1000) + ((hundredsDigit + 1) * 100) :
                            (Math.floor(exampleNum / 1000) * 1000) + (hundredsDigit * 100);
                    } else {
                        const thousandsDigit = Math.floor(exampleNum / 1000);
                        const hundredsDigit = Math.floor(exampleNum / 100) % 10;
                        result = hundredsDigit >= 5 ? 
                            (thousandsDigit + 1) * 1000 :
                            thousandsDigit * 1000;
                    }
                } else {
                    exampleNum = (Math.random() * 100).toFixed(3);
                    const places = ["tenths", "hundredths", "whole number"];
                    place = places[Math.floor(Math.random() * places.length)];
                    
                    if (place === "tenths") {
                        result = Math.round(parseFloat(exampleNum) * 10) / 10;
                    } else if (place === "hundredths") {
                        result = Math.round(parseFloat(exampleNum) * 100) / 100;
                    } else {
                        result = Math.round(parseFloat(exampleNum));
                    }
                }
                
                display.innerHTML = `
                    <div class="rounding-step">
                        <div class="rounding-icon">🔢</div>
                        <div class="rounding-title">Original Number</div>
                        <div style="font-size: 1.5rem; color: var(--primary-purple);">${question.type.includes("whole") ? formatNumber(exampleNum) : exampleNum}</div>
                    </div>
                    <div class="rounding-step">
                        <div class="rounding-icon">🎯</div>
                        <div class="rounding-title">Round to Nearest</div>
                        <div style="font-size: 1.5rem; color: var(--accent-amber);">${place}</div>
                    </div>
                    <div class="rounding-step">
                        <div class="rounding-icon">➡️</div>
                        <div class="rounding-title">Result</div>
                        <div style="font-size: 1.5rem; color: var(--accent-teal);">${question.type.includes("whole") ? formatNumber(result) : result}</div>
                    </div>
                `;
            }
            
            return display;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            mathFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            numberLineDisplay.innerHTML = '';
            numberDisplay.innerHTML = '';
            processDisplay.innerHTML = '';
            decimalChartDisplay.innerHTML = '';
            comparisonDisplay.innerHTML = '';
            roundingProcessDisplay.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            mathFact.appendChild(createMathFact());
            conceptDisplay.appendChild(createConceptDisplay());
            
            // Show appropriate visualizations based on question type
            if (question.type.includes("ordering") || question.type.includes("comparing")) {
                numberLineDisplay.appendChild(createNumberLine());
            }
            
            numberDisplay.appendChild(createNumberDisplay());
            processDisplay.appendChild(createProcessDisplay());
            
            if (question.type.includes("decimal")) {
                decimalChartDisplay.appendChild(createDecimalChart());
            }
            
            if (question.type.includes("comparing")) {
                comparisonDisplay.appendChild(createComparisonDisplay());
            }
            
            if (question.type.includes("rounding")) {
                roundingProcessDisplay.appendChild(createRoundingProcessDisplay());
            }
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '✓';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '✗';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
