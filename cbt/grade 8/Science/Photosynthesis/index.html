<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Science - Photosynthesis | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Biology/Photosynthesis Theme */
        :root {
            --primary-green: #4CAF50;
            --primary-blue: #2196F3;
            --primary-orange: #FF9800;
            --primary-yellow: #FFC107;
            --accent-teal: #009688;
            --accent-red: #F44336;
            --accent-purple: #9C27B0;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --chlorophyll-green: rgba(76, 175, 80, 0.3);
            --sunlight-yellow: rgba(255, 193, 7, 0.3);
            --water-blue: rgba(33, 150, 243, 0.3);
            --co2-gray: rgba(158, 158, 158, 0.3);
            --oxygen-red: rgba(244, 67, 54, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(76, 175, 80, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 193, 7, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(33, 150, 243, 0.05) 0%, transparent 70%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 30px 20px;
        }

        .welcome-title {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            max-width: 800px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(76, 175, 80, 0.15);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid var(--primary-green);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-green);
        }

        .input-group {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-primary:hover {
            background: #3d8b40;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        .btn-secondary {
            background: var(--primary-yellow);
            color: #333;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        }

        .btn-secondary:hover {
            background: #e6ac00;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 193, 7, 0.4);
        }

        .btn-blue {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-blue:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-green);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Topics Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .topics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .topic-card.process {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), transparent);
        }

        .topic-card.factors {
            border-color: var(--primary-yellow);
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), transparent);
        }

        .topic-card.nutrition {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), transparent);
        }

        .topic-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .topic-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .topic-card.process .topic-title {
            color: var(--primary-green);
        }

        .topic-card.factors .topic-title {
            color: var(--primary-yellow);
        }

        .topic-card.nutrition .topic-title {
            color: var(--primary-blue);
        }

        .topic-features {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--dark-border);
        }

        .topic-features h4 {
            font-size: 0.9rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .feature-list {
            list-style-type: none;
        }

        .feature-list li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }

        .feature-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-teal);
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-surface);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-green), var(--primary-yellow), var(--primary-blue));
            border-radius: 8px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .question-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .science-tip {
            background: rgba(255, 152, 0, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-orange);
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Options */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            padding: 15px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-green);
            background: rgba(76, 175, 80, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 25px;
            height: 25px;
            background: var(--primary-green);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: bold;
            color: white;
        }

        .option.correct .option-letter {
            background: var(--primary-green);
        }

        .option.incorrect .option-letter {
            background: var(--accent-red);
        }

        /* Feedback */
        .feedback-container {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback-correct .feedback-title {
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Visualization Area */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--dark-border);
            overflow: auto;
        }

        /* Photosynthesis Process Visualizer */
        .process-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-green);
        }

        .visualizer-title {
            color: var(--primary-green);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .process-canvas-container {
            width: 100%;
            height: 300px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .process-canvas {
            width: 100%;
            height: 100%;
        }

        .process-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .process-controls {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .process-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .process-btn:hover {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
        }

        .process-btn.active {
            background: var(--primary-green);
            color: white;
        }

        /* Leaf Structure Visualizer */
        .leaf-visualizer {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-teal);
        }

        .leaf-canvas-container {
            width: 100%;
            height: 250px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .leaf-canvas {
            width: 100%;
            height: 100%;
        }

        .leaf-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .leaf-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .leaf-btn:hover {
            background: rgba(0, 150, 136, 0.1);
            border-color: var(--accent-teal);
        }

        .leaf-btn.active {
            background: var(--accent-teal);
            color: white;
        }

        /* Equation Display */
        .equation-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-yellow);
        }

        .equation-box {
            background: var(--dark-surface);
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 1.2rem;
            color: var(--primary-yellow);
            border: 1px solid var(--dark-border);
        }

        .equation-explanation {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-top: 10px;
        }

        /* Factors Affecting Photosynthesis */
        .factors-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-blue);
        }

        .factors-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .factors-grid {
                grid-template-columns: 1fr;
            }
        }

        .factor-card {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .factor-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .factor-card.light {
            border-left-color: var(--primary-yellow);
        }

        .factor-card.co2 {
            border-left-color: #9E9E9E;
        }

        .factor-card.water {
            border-left-color: var(--primary-blue);
        }

        .factor-card.temperature {
            border-left-color: var(--accent-red);
        }

        .factor-card.chlorophyll {
            border-left-color: var(--primary-green);
        }

        .factor-title {
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .factor-value {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Plant Nutrition Display */
        .nutrition-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--primary-orange);
        }

        .nutrients-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .nutrients-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .nutrient-card {
            background: var(--dark-surface);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nutrient-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .nutrient-card.macro {
            border: 2px solid var(--primary-orange);
        }

        .nutrient-card.micro {
            border: 2px solid var(--accent-purple);
        }

        .nutrient-symbol {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .nutrient-name {
            font-size: 0.8rem;
            color: var(--text-primary);
            margin-bottom: 3px;
        }

        .nutrient-role {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* Experiment Simulator */
        .experiment-simulator {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-purple);
        }

        .experiment-container {
            width: 100%;
            height: 200px;
            position: relative;
            background: var(--dark-surface);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid var(--dark-border);
        }

        .experiment-canvas {
            width: 100%;
            height: 100%;
        }

        .experiment-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .experiment-btn {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .experiment-btn:hover {
            background: rgba(156, 39, 176, 0.1);
            border-color: var(--accent-purple);
        }

        .experiment-btn.active {
            background: var(--accent-purple);
            color: white;
        }

        /* Interactive Quiz */
        .interactive-quiz {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--accent-red);
        }

        .quiz-question {
            margin: 10px 0;
            color: var(--text-primary);
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 5px;
            margin: 10px 0;
        }

        .quiz-option {
            padding: 8px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 30px 20px;
        }

        .results-title {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes moleculeAnimation {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .molecule-animate {
            animation: moleculeAnimation 0.5s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 1.8rem;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .process-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .experiment-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .nutrients-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <h1 class="welcome-title">Grade 8 Science: Photosynthesis</h1>
            <p class="welcome-subtitle">Discover how plants convert sunlight into life! Explore the magical process of photosynthesis, understand plant nutrition, and learn how plants sustain life on Earth through interactive simulations and experiments.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üåø‚òÄÔ∏è</span>
                <span class="topic-name">Plant Biology & Energy Conversion</span>
            </div>
            
            <div class="topics-grid">
                <div class="topic-card process" onclick="showTopicInfo('process')">
                    <div class="topic-icon">üîÑ</div>
                    <h3 class="topic-title">Photosynthesis Process</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">How plants make food using sunlight</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Light & dark reactions</li>
                            <li>Chlorophyll role</li>
                            <li>Chemical equation</li>
                            <li>Energy conversion</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card factors" onclick="showTopicInfo('factors')">
                    <div class="topic-icon">üìä</div>
                    <h3 class="topic-title">Factors Affecting Rate</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">What influences photosynthesis speed</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Light intensity</li>
                            <li>CO‚ÇÇ concentration</li>
                            <li>Temperature</li>
                            <li>Water availability</li>
                        </ul>
                    </div>
                </div>
                
                <div class="topic-card nutrition" onclick="showTopicInfo('nutrition')">
                    <div class="topic-icon">ü•ó</div>
                    <h3 class="topic-title">Plant Nutrition</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">Essential nutrients for plant growth</p>
                    <div class="topic-features">
                        <h4>Key Concepts:</h4>
                        <ul class="feature-list">
                            <li>Macronutrients</li>
                            <li>Micronutrients</li>
                            <li>Mineral absorption</li>
                            <li>Deficiency symptoms</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your name:</label>
                <input type="text" id="studentName" placeholder="Your name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>üåø Begin Photosynthesis Study</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 4%"></div>
                </div>
            </div>

            <div class="question-container">
                <div id="scienceTip"></div>
                
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation" id="feedbackExplanation"></div>
                </div>
            </div>
            
            <!-- Visualization Area -->
            <div class="content-wrapper">
                <div class="visualization-container">
                    <!-- Photosynthesis Process Visualizer -->
                    <div class="process-visualizer">
                        <div class="visualizer-title">Photosynthesis Process</div>
                        <div class="process-canvas-container">
                            <canvas class="process-canvas" id="processCanvas"></canvas>
                        </div>
                        <div class="process-controls">
                            <div class="process-btn active" onclick="showProcess('overview')">Overview</div>
                            <div class="process-btn" onclick="showProcess('light')">Light Reactions</div>
                            <div class="process-btn" onclick="showProcess('dark')">Dark Reactions</div>
                            <div class="process-btn" onclick="showProcess('chlorophyll')">Chlorophyll</div>
                            <div class="process-btn" onclick="toggleAnimation()">Animation: On</div>
                            <div class="process-btn" onclick="speedUp()">Speed Up</div>
                            <div class="process-btn" onclick="slowDown()">Slow Down</div>
                            <div class="process-btn" onclick="resetAnimation()">Reset</div>
                        </div>
                    </div>
                    
                    <!-- Equation Display -->
                    <div class="equation-display">
                        <div class="visualizer-title">Photosynthesis Equation</div>
                        <div class="equation-box" id="equationBox">
                            6CO‚ÇÇ + 6H‚ÇÇO + Light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ
                        </div>
                        <div class="equation-explanation">
                            Carbon dioxide + Water + Sunlight ‚Üí Glucose + Oxygen
                        </div>
                        <div class="process-controls">
                            <button class="process-btn" onclick="explainEquation()">Explain Equation</button>
                            <button class="process-btn" onclick="showWordEquation()">Word Equation</button>
                            <button class="process-btn" onclick="balanceEquation()">Balance Equation</button>
                        </div>
                    </div>
                    
                    <!-- Leaf Structure Visualizer -->
                    <div class="leaf-visualizer">
                        <div class="visualizer-title">Leaf Structure & Function</div>
                        <div class="leaf-canvas-container">
                            <canvas class="leaf-canvas" id="leafCanvas"></canvas>
                        </div>
                        <div class="leaf-controls">
                            <div class="leaf-btn active" onclick="showLeafPart('cross')">Cross Section</div>
                            <div class="leaf-btn" onclick="showLeafPart('stomata')">Stomata</div>
                            <div class="leaf-btn" onclick="showLeafPart('chloroplast')">Chloroplast</div>
                            <div class="leaf-btn" onclick="showLeafPart('veins')">Veins</div>
                            <div class="leaf-btn" onclick="showLeafPart('adaptations')">Adaptations</div>
                            <div class="leaf-btn" onclick="toggleLabels()">Labels: On</div>
                        </div>
                    </div>
                    
                    <!-- Interactive Quiz -->
                    <div class="interactive-quiz">
                        <div class="visualizer-title">Quick Knowledge Check</div>
                        <div class="quiz-question" id="quizQuestion">What is the main pigment in photosynthesis?</div>
                        <div class="quiz-options" id="quizOptions">
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'A')">A) Chlorophyll</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'B')">B) Hemoglobin</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'C')">C) Melanin</div>
                            <div class="quiz-option" onclick="checkQuizAnswer(this, 'D')">D) Carotene</div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="nextQuizQuestion()">Next Question</button>
                        </div>
                    </div>
                </div>
                
                <div class="visualization-container">
                    <!-- Factors Affecting Photosynthesis -->
                    <div class="factors-display">
                        <div class="visualizer-title">Factors Affecting Photosynthesis Rate</div>
                        <div class="factors-grid">
                            <div class="factor-card light" onclick="showFactor('light')">
                                <div class="factor-title">‚òÄÔ∏è Light Intensity</div>
                                <div class="factor-value">Increases rate up to light saturation point</div>
                            </div>
                            <div class="factor-card co2" onclick="showFactor('co2')">
                                <div class="factor-title">üå´Ô∏è CO‚ÇÇ Concentration</div>
                                <div class="factor-value">Higher CO‚ÇÇ = faster rate (up to limit)</div>
                            </div>
                            <div class="factor-card water" onclick="showFactor('water')">
                                <div class="factor-title">üíß Water Availability</div>
                                <div class="factor-value">Essential raw material & plant structure</div>
                            </div>
                            <div class="factor-card temperature" onclick="showFactor('temperature')">
                                <div class="factor-title">üå°Ô∏è Temperature</div>
                                <div class="factor-value">Optimal: 20-35¬∞C (enzyme activity)</div>
                            </div>
                            <div class="factor-card chlorophyll" onclick="showFactor('chlorophyll')">
                                <div class="factor-title">üçÉ Chlorophyll Amount</div>
                                <div class="factor-value">More chlorophyll = more light absorption</div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showGraphs()">View Graphs</button>
                            <button class="btn btn-small btn-blue" onclick="runFactorExperiment()">Test Factors</button>
                        </div>
                    </div>
                    
                    <!-- Plant Nutrition Display -->
                    <div class="nutrition-display">
                        <div class="visualizer-title">Essential Plant Nutrients</div>
                        <div class="nutrients-grid">
                            <div class="nutrient-card macro" onclick="showNutrient('nitrogen')">
                                <div class="nutrient-symbol">N</div>
                                <div class="nutrient-name">Nitrogen</div>
                                <div class="nutrient-role">Protein synthesis</div>
                            </div>
                            <div class="nutrient-card macro" onclick="showNutrient('phosphorus')">
                                <div class="nutrient-symbol">P</div>
                                <div class="nutrient-name">Phosphorus</div>
                                <div class="nutrient-role">Energy transfer</div>
                            </div>
                            <div class="nutrient-card macro" onclick="showNutrient('potassium')">
                                <div class="nutrient-symbol">K</div>
                                <div class="nutrient-name">Potassium</div>
                                <div class="nutrient-role">Enzyme activation</div>
                            </div>
                            <div class="nutrient-card macro" onclick="showNutrient('calcium')">
                                <div class="nutrient-symbol">Ca</div>
                                <div class="nutrient-name">Calcium</div>
                                <div class="nutrient-role">Cell wall strength</div>
                            </div>
                            <div class="nutrient-card macro" onclick="showNutrient('magnesium')">
                                <div class="nutrient-symbol">Mg</div>
                                <div class="nutrient-name">Magnesium</div>
                                <div class="nutrient-role">Chlorophyll core</div>
                            </div>
                            <div class="nutrient-card macro" onclick="showNutrient('sulfur')">
                                <div class="nutrient-symbol">S</div>
                                <div class="nutrient-name">Sulfur</div>
                                <div class="nutrient-role">Amino acids</div>
                            </div>
                            <div class="nutrient-card micro" onclick="showNutrient('iron')">
                                <div class="nutrient-symbol">Fe</div>
                                <div class="nutrient-name">Iron</div>
                                <div class="nutrient-role">Chlorophyll synthesis</div>
                            </div>
                            <div class="nutrient-card micro" onclick="showNutrient('zinc')">
                                <div class="nutrient-symbol">Zn</div>
                                <div class="nutrient-name">Zinc</div>
                                <div class="nutrient-role">Enzyme systems</div>
                            </div>
                            <div class="nutrient-card micro" onclick="showNutrient('copper')">
                                <div class="nutrient-symbol">Cu</div>
                                <div class="nutrient-name">Copper</div>
                                <div class="nutrient-role">Respiration</div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <div style="display: flex; justify-content: center; gap: 10px;">
                                <div style="display: flex; align-items: center; gap: 5px;">
                                    <div style="width: 12px; height: 12px; background: var(--primary-orange); border-radius: 2px;"></div>
                                    <span style="font-size: 0.8rem; color: var(--text-secondary);">Macronutrients</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 5px;">
                                    <div style="width: 12px; height: 12px; background: var(--accent-purple); border-radius: 2px;"></div>
                                    <span style="font-size: 0.8rem; color: var(--text-secondary);">Micronutrients</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Experiment Simulator -->
                    <div class="experiment-simulator">
                        <div class="visualizer-title">Photosynthesis Experiments</div>
                        <div class="experiment-container">
                            <canvas class="experiment-canvas" id="experimentCanvas"></canvas>
                        </div>
                        <div class="experiment-controls">
                            <div class="experiment-btn active" onclick="runExperiment('oxygen')">Oxygen Production</div>
                            <div class="experiment-btn" onclick="runExperiment('starch')">Starch Test</div>
                            <div class="experiment-btn" onclick="runExperiment('variegated')">Variegated Leaf</div>
                            <div class="experiment-btn" onclick="runExperiment('pondweed')">Pondweed Rate</div>
                            <div class="experiment-btn" onclick="runExperiment('destarch')">Destarching</div>
                            <div class="experiment-btn" onclick="runExperiment('lightColor')">Light Color</div>
                            <div class="experiment-btn" onclick="pauseExperiment()">Pause</div>
                            <div class="experiment-btn" onclick="resetExperiment()">Reset</div>
                        </div>
                    </div>
                    
                    <!-- Importance of Photosynthesis -->
                    <div class="process-visualizer" style="border-color: var(--accent-teal);">
                        <div class="visualizer-title">Importance of Photosynthesis</div>
                        <div style="margin: 10px 0; padding: 10px; background: var(--dark-surface); border-radius: 6px;">
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">üåç Oxygen Production</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Produces oxygen for respiration</div>
                                </div>
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">üåø Food Production</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Base of food chains</div>
                                </div>
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">üí® CO‚ÇÇ Absorption</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Reduces greenhouse gases</div>
                                </div>
                                <div style="padding: 8px; background: rgba(0, 150, 136, 0.1); border-radius: 4px;">
                                    <div style="font-weight: bold; color: var(--accent-teal);">üõ¢Ô∏è Fossil Fuels</div>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Source of coal, oil, gas</div>
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button class="btn btn-small btn-secondary" onclick="showEcosystemRole()">Ecosystem Role</button>
                            <button class="btn btn-small btn-blue" onclick="showCarbonCycle()">Carbon Cycle</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="btn btn-secondary" id="skipQuestion">Skip Question</button>
                <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Photosynthesis Study Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                </div>
                
                <div class="btn-group" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="retryTopic">Try Again</button>
                    <button class="btn btn-secondary" id="viewTopics">Other Topics</button>
                    <button class="btn btn-blue" id="printCertificate">Print Certificate</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions array - 25 focused questions on Photosynthesis
        const questions = [
            {
                question: "What is the main pigment involved in photosynthesis?",
                options: ["Chlorophyll", "Hemoglobin", "Melanin", "Carotene"],
                answer: "A",
                explanation: "Chlorophyll is the green pigment in plants that absorbs sunlight for photosynthesis."
            },
            {
                question: "What are the raw materials for photosynthesis?",
                options: ["Carbon dioxide and water", "Oxygen and glucose", "Nitrogen and water", "Carbon dioxide and oxygen"],
                answer: "A",
                explanation: "Photosynthesis uses carbon dioxide (CO‚ÇÇ) and water (H‚ÇÇO) as raw materials to produce glucose and oxygen."
            },
            {
                question: "What is the chemical equation for photosynthesis?",
                options: ["6CO‚ÇÇ + 6H‚ÇÇO ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ", "C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ ‚Üí 6CO‚ÇÇ + 6H‚ÇÇO", "2H‚ÇÇ + O‚ÇÇ ‚Üí 2H‚ÇÇO", "CaCO‚ÇÉ ‚Üí CaO + CO‚ÇÇ"],
                answer: "A",
                explanation: "6CO‚ÇÇ + 6H‚ÇÇO + sunlight ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ (carbon dioxide + water ‚Üí glucose + oxygen)"
            },
            {
                question: "Where does photosynthesis occur in plant cells?",
                options: ["Chloroplasts", "Mitochondria", "Nucleus", "Vacuole"],
                answer: "A",
                explanation: "Photosynthesis occurs in chloroplasts, which contain chlorophyll and other pigments."
            },
            {
                question: "What is the primary source of energy for photosynthesis?",
                options: ["Sunlight", "Chemical energy", "Heat", "Electricity"],
                answer: "A",
                explanation: "Sunlight provides the energy needed to convert carbon dioxide and water into glucose."
            },
            {
                question: "What gas is released during photosynthesis?",
                options: ["Oxygen", "Carbon dioxide", "Nitrogen", "Hydrogen"],
                answer: "A",
                explanation: "Oxygen (O‚ÇÇ) is released as a byproduct of photosynthesis."
            },
            {
                question: "What are the tiny openings on leaves called?",
                options: ["Stomata", "Lenticels", "Pores", "Veins"],
                answer: "A",
                explanation: "Stomata are small openings on leaves that allow gas exchange (CO‚ÇÇ in, O‚ÇÇ out)."
            },
            {
                question: "What is the name of the process where plants lose water vapor?",
                options: ["Transpiration", "Respiration", "Evaporation", "Condensation"],
                answer: "A",
                explanation: "Transpiration is the loss of water vapor from plants, mainly through stomata."
            },
            {
                question: "Which factor does NOT affect the rate of photosynthesis?",
                options: ["Sound intensity", "Light intensity", "CO‚ÇÇ concentration", "Temperature"],
                answer: "A",
                explanation: "Sound intensity does not affect photosynthesis rate. Light, CO‚ÇÇ, temperature, and water do."
            },
            {
                question: "What is the optimal temperature range for photosynthesis?",
                options: ["20-35¬∞C", "0-10¬∞C", "40-50¬∞C", "10-20¬∞C"],
                answer: "A",
                explanation: "Most plants photosynthesize best between 20-35¬∞C, as enzymes work optimally in this range."
            },
            {
                question: "Which mineral is a component of chlorophyll?",
                options: ["Magnesium", "Iron", "Calcium", "Potassium"],
                answer: "A",
                explanation: "Magnesium (Mg) is the central atom in the chlorophyll molecule."
            },
            {
                question: "What test is used to detect starch in leaves?",
                options: ["Iodine test", "Benedict's test", "Biuret test", "Sudan III test"],
                answer: "A",
                explanation: "Iodine solution turns blue-black in the presence of starch."
            },
            {
                question: "What color of light is most effective for photosynthesis?",
                options: ["Red and blue", "Green and yellow", "Orange and purple", "All colors equally"],
                answer: "A",
                explanation: "Chlorophyll absorbs red and blue light most effectively, reflecting green light."
            },
            {
                question: "What is the main product of photosynthesis?",
                options: ["Glucose", "Oxygen", "Water", "Carbon dioxide"],
                answer: "A",
                explanation: "Glucose (C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ) is the main organic product, which plants use for energy and growth."
            },
            {
                question: "Where does the dark reaction (Calvin cycle) occur?",
                options: ["Stroma of chloroplast", "Thylakoid membrane", "Cytoplasm", "Mitochondria"],
                answer: "A",
                explanation: "The dark reaction (Calvin cycle) occurs in the stroma of chloroplasts."
            },
            {
                question: "What happens to the rate of photosynthesis when light intensity increases?",
                options: ["Increases then plateaus", "Decreases", "Stays the same", "Becomes zero"],
                answer: "A",
                explanation: "Rate increases with light intensity until it reaches the light saturation point, then plateaus."
            },
            {
                question: "Which plant adaptation maximizes photosynthesis?",
                options: ["Broad, thin leaves", "Thick, small leaves", "No leaves", "Transparent leaves"],
                answer: "A",
                explanation: "Broad, thin leaves have large surface area for light absorption and are thin for gas diffusion."
            },
            {
                question: "What is the role of NADPH in photosynthesis?",
                options: ["Carries hydrogen atoms", "Absorbs light", "Transports oxygen", "Breaks down glucose"],
                answer: "A",
                explanation: "NADPH carries hydrogen atoms (electrons and protons) for the Calvin cycle."
            },
            {
                question: "Which gas is needed for the light-independent reaction?",
                options: ["Carbon dioxide", "Oxygen", "Nitrogen", "Hydrogen"],
                answer: "A",
                explanation: "CO‚ÇÇ is needed for the Calvin cycle (light-independent reaction) to produce glucose."
            },
            {
                question: "What are the products of the light-dependent reaction?",
                options: ["ATP, NADPH, O‚ÇÇ", "Glucose, CO‚ÇÇ, H‚ÇÇO", "ATP, CO‚ÇÇ, H‚ÇÇO", "Glucose, O‚ÇÇ, ATP"],
                answer: "A",
                explanation: "Light reactions produce ATP, NADPH (energy carriers), and oxygen gas."
            },
            {
                question: "Why are plants called autotrophs?",
                options: ["They make their own food", "They eat other organisms", "They move around", "They decompose matter"],
                answer: "A",
                explanation: "Autotrophs (like plants) produce their own food through photosynthesis."
            },
            {
                question: "What is the function of the cuticle on a leaf?",
                options: ["Reduces water loss", "Absorbs sunlight", "Produces chlorophyll", "Stores starch"],
                answer: "A",
                explanation: "The waxy cuticle reduces water loss through evaporation from the leaf surface."
            },
            {
                question: "Which nutrient deficiency causes yellowing of leaves (chlorosis)?",
                options: ["Nitrogen", "Phosphorus", "Potassium", "Calcium"],
                answer: "A",
                explanation: "Nitrogen deficiency causes chlorosis (yellowing) because nitrogen is needed for chlorophyll production."
            },
            {
                question: "What happens during photolysis in photosynthesis?",
                options: ["Water molecules split", "Glucose breaks down", "CO‚ÇÇ is fixed", "ATP is produced"],
                answer: "A",
                explanation: "Photolysis is the splitting of water molecules using light energy, releasing oxygen and hydrogen."
            },
            {
                question: "What is the main storage form of glucose in plants?",
                options: ["Starch", "Cellulose", "Sucrose", "Fructose"],
                answer: "A",
                explanation: "Plants store glucose as starch, which is insoluble and doesn't affect water balance in cells."
            }
        ];

        // Science tips and facts
        const scienceTips = [
            "Photosynthesis is the process that provides oxygen for us to breathe and food for us to eat!",
            "A single tree can absorb about 48 pounds of CO‚ÇÇ per year and release enough oxygen for 2 people.",
            "The Amazon rainforest produces about 20% of the world's oxygen through photosynthesis.",
            "Chlorophyll absorbs red and blue light best, which is why plants appear green (they reflect green light).",
            "Photosynthesis converts about 1-2% of sunlight energy into chemical energy stored in glucose.",
            "Some bacteria and algae can photosynthesize too - not just plants!",
            "The tallest trees can transport water over 100 meters from roots to leaves for photosynthesis.",
            "Leaves have microscopic 'solar panels' called chloroplasts - a single leaf cell may have 50-100 of them!",
            "Plants use only about 0.03% of the air's CO‚ÇÇ for photosynthesis.",
            "Without photosynthesis, life as we know it would not exist on Earth!"
        ];

        // Quiz questions
        const quizQuestions = [
            {
                question: "What is the main pigment in photosynthesis?",
                options: ["Chlorophyll", "Hemoglobin", "Melanin", "Carotene"],
                answer: "A"
            },
            {
                question: "What gas is released during photosynthesis?",
                options: ["Oxygen", "Carbon dioxide", "Nitrogen", "Hydrogen"],
                answer: "A"
            },
            {
                question: "Where does photosynthesis occur?",
                options: ["Chloroplasts", "Mitochondria", "Nucleus", "Vacuole"],
                answer: "A"
            },
            {
                question: "What are the raw materials?",
                options: ["CO‚ÇÇ and H‚ÇÇO", "O‚ÇÇ and glucose", "N‚ÇÇ and H‚ÇÇO", "CO‚ÇÇ and O‚ÇÇ"],
                answer: "A"
            },
            {
                question: "What is the main product?",
                options: ["Glucose", "Oxygen", "Water", "Carbon dioxide"],
                answer: "A"
            }
        ];

        // Nutrients information
        const nutrients = {
            nitrogen: {
                symbol: "N",
                name: "Nitrogen",
                type: "macro",
                role: "Component of amino acids, proteins, chlorophyll",
                deficiency: "Yellowing of older leaves (chlorosis), stunted growth",
                sources: "Nitrate (NO‚ÇÉ‚Åª), ammonium (NH‚ÇÑ‚Å∫)",
                importance: "High"
            },
            phosphorus: {
                symbol: "P",
                name: "Phosphorus",
                type: "macro",
                role: "ATP, DNA, cell membranes, energy transfer",
                deficiency: "Purple leaves, poor root growth, delayed maturity",
                sources: "Phosphate (PO‚ÇÑ¬≥‚Åª)",
                importance: "High"
            },
            potassium: {
                symbol: "K",
                name: "Potassium",
                type: "macro",
                role: "Enzyme activation, water balance, stomatal opening",
                deficiency: "Brown leaf edges, weak stems, poor fruit quality",
                sources: "Potassium ions (K‚Å∫)",
                importance: "High"
            },
            calcium: {
                symbol: "Ca",
                name: "Calcium",
                type: "macro",
                role: "Cell wall structure, cell division, membrane permeability",
                deficiency: "Young leaves deformed, blossom end rot in fruits",
                sources: "Calcium ions (Ca¬≤‚Å∫)",
                importance: "High"
            },
            magnesium: {
                symbol: "Mg",
                name: "Magnesium",
                type: "macro",
                role: "Central atom in chlorophyll molecule, enzyme activation",
                deficiency: "Yellowing between leaf veins, leaf curling",
                sources: "Magnesium ions (Mg¬≤‚Å∫)",
                importance: "High"
            },
            sulfur: {
                symbol: "S",
                name: "Sulfur",
                type: "macro",
                role: "Amino acids (cysteine, methionine), vitamins, enzymes",
                deficiency: "Yellowing of young leaves, stunted growth",
                sources: "Sulfate (SO‚ÇÑ¬≤‚Åª)",
                importance: "Medium"
            },
            iron: {
                symbol: "Fe",
                name: "Iron",
                type: "micro",
                role: "Chlorophyll synthesis, electron transport",
                deficiency: "Yellowing between veins of young leaves",
                sources: "Iron ions (Fe¬≤‚Å∫, Fe¬≥‚Å∫)",
                importance: "Essential"
            },
            zinc: {
                symbol: "Zn",
                name: "Zinc",
                type: "micro",
                role: "Enzyme systems, auxin synthesis",
                deficiency: "Small leaves, rosette formation, interveinal chlorosis",
                sources: "Zinc ions (Zn¬≤‚Å∫)",
                importance: "Essential"
            },
            copper: {
                symbol: "Cu",
                name: "Copper",
                type: "micro",
                role: "Photosynthesis, respiration, lignin formation",
                deficiency: "Young leaves dark green, twisted, with dead tips",
                sources: "Copper ions (Cu¬≤‚Å∫)",
                importance: "Essential"
            }
        };

        // Factors information
        const factors = {
            light: {
                name: "Light Intensity",
                effect: "Increases rate up to light saturation point",
                explanation: "More light = more energy for photolysis and ATP/NADPH production",
                optimal: "Full sunlight (varies by plant)",
                graph: "Linear increase then plateaus"
            },
            co2: {
                name: "CO‚ÇÇ Concentration",
                effect: "Increases rate up to CO‚ÇÇ saturation point",
                explanation: "More CO‚ÇÇ = more raw material for Calvin cycle",
                optimal: "0.1% (higher than atmospheric 0.04%)",
                graph: "Linear increase then plateaus"
            },
            temperature: {
                name: "Temperature",
                effect: "Increases rate up to optimum, then decreases",
                explanation: "Enzyme activity increases with temperature, but denatures at high temps",
                optimal: "20-35¬∞C (varies by plant species)",
                graph: "Bell curve"
            },
            water: {
                name: "Water Availability",
                effect: "Essential - shortage reduces rate significantly",
                explanation: "Water is raw material and maintains plant structure/turgor",
                optimal: "Well-watered but not waterlogged",
                graph: "Sharp decrease with water shortage"
            },
            chlorophyll: {
                name: "Chlorophyll Content",
                effect: "More chlorophyll = higher rate (up to limit)",
                explanation: "More pigment = more light absorption",
                optimal: "Healthy green leaves",
                graph: "Positive correlation"
            }
        };

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            studentName: "",
            startTime: null,
            currentProcess: 'overview',
            currentLeafPart: 'cross',
            currentExperiment: 'oxygen',
            showLabels: true,
            animationRunning: true,
            animationSpeed: 1,
            quizIndex: 0,
            processCanvas: null,
            processCtx: null,
            leafCanvas: null,
            leafCtx: null,
            experimentCanvas: null,
            experimentCtx: null,
            animationFrame: null
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const backToHomeBtn = document.getElementById('backToHome');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const scienceTip = document.getElementById('scienceTip');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackExplanation = document.getElementById('feedbackExplanation');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const printCertificateBtn = document.getElementById('printCertificate');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const timeSpent = document.getElementById('timeSpent');
        const equationBox = document.getElementById('equationBox');
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');

        // Initialize
        function initApp() {
            setupEventListeners();
            showWelcomePage();
            initializeCanvases();
            loadQuizQuestion();
            drawProcess();
            drawLeaf();
            drawExperiment();
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            printCertificateBtn.addEventListener('click', printCertificate);
            viewTopicsBtn.addEventListener('click', () => alert("Other science topics would be available here."));
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            appState.startTime = new Date();
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const percentage = Math.round((appState.score / questions.length) * 100);
            const timeDiff = new Date() - appState.startTime;
            const minutes = Math.floor(timeDiff / 60000);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            timeSpent.textContent = `${minutes}min`;
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Excellent! You're a photosynthesis expert!";
            } else if (percentage >= 75) {
                scoreMessage.textContent = "Great job! You understand plant biology well!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Good work! You're getting the hang of photosynthesis!";
            } else {
                scoreMessage.textContent = "Keep learning! Plant biology is fascinating - review and try again!";
            }
        }

        // Create science tip display
        function createScienceTip() {
            const tipDiv = document.createElement('div');
            tipDiv.className = 'science-tip';
            tipDiv.innerHTML = `<strong>Biology Tip:</strong> ${scienceTips[Math.floor(Math.random() * scienceTips.length)]}`;
            return tipDiv;
        }

        // Load question
        function loadQuestion() {
            const question = questions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${questions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / questions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            scienceTip.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            scienceTip.appendChild(createScienceTip());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = questions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation);
            }
            
            nextQuestionBtn.disabled = false;
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Skip question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
        }

        // Retry topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            showPracticePage();
        }

        // Print certificate
        function printCertificate() {
            const percentage = Math.round((appState.score / questions.length) * 100);
            const certificateWindow = window.open('', '_blank');
            certificateWindow.document.write(`
                <html>
                <head>
                    <title>Certificate of Achievement</title>
                    <style>
                        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
                        .certificate { border: 20px solid #4CAF50; padding: 50px; max-width: 800px; margin: 0 auto; }
                        h1 { color: #4CAF50; }
                        .name { font-size: 2em; margin: 20px 0; }
                        .grade { font-size: 1.5em; margin: 20px 0; }
                        .score { font-size: 1.2em; margin: 20px 0; }
                        .date { margin-top: 50px; }
                    </style>
                </head>
                <body>
                    <div class="certificate">
                        <h1>Certificate of Achievement</h1>
                        <p>This certifies that</p>
                        <div class="name">${appState.studentName}</div>
                        <p>has successfully completed the Grade 8 Photosynthesis module</p>
                        <div class="grade">Grade 8 Science - Photosynthesis & Plant Nutrition</div>
                        <div class="score">Score: ${appState.score}/${questions.length} (${percentage}%)</div>
                        <div class="date">Date: ${new Date().toLocaleDateString()}</div>
                        <p>Ideolix Learning Hub</p>
                    </div>
                </body>
                </html>
            `);
            certificateWindow.document.close();
            certificateWindow.print();
        }

        // Start practice
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin studying photosynthesis!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            showPracticePage();
        }

        // Initialize canvases
        function initializeCanvases() {
            // Process canvas
            const processCanvas = document.getElementById('processCanvas');
            const processContainer = document.querySelector('.process-canvas-container');
            processCanvas.width = processContainer.clientWidth;
            processCanvas.height = processContainer.clientHeight;
            appState.processCanvas = processCanvas;
            appState.processCtx = processCanvas.getContext('2d');
            
            // Leaf canvas
            const leafCanvas = document.getElementById('leafCanvas');
            const leafContainer = document.querySelector('.leaf-canvas-container');
            leafCanvas.width = leafContainer.clientWidth;
            leafCanvas.height = leafContainer.clientHeight;
            appState.leafCanvas = leafCanvas;
            appState.leafCtx = leafCanvas.getContext('2d');
            
            // Experiment canvas
            const experimentCanvas = document.getElementById('experimentCanvas');
            const experimentContainer = document.querySelector('.experiment-container');
            experimentCanvas.width = experimentContainer.clientWidth;
            experimentCanvas.height = experimentContainer.clientHeight;
            appState.experimentCanvas = experimentCanvas;
            appState.experimentCtx = experimentCanvas.getContext('2d');
        }

        // Show process
        window.showProcess = function(process) {
            appState.currentProcess = process;
            
            // Update active button
            const processBtns = document.querySelectorAll('.process-btn');
            processBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawProcess();
        };

        // Draw process
        function drawProcess() {
            const ctx = appState.processCtx;
            const canvas = appState.processCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Cancel any existing animation
            if (appState.animationFrame) {
                cancelAnimationFrame(appState.animationFrame);
            }
            
            if (appState.currentProcess === 'overview') {
                drawOverview(ctx, width, height);
            } else if (appState.currentProcess === 'light') {
                drawLightReactions(ctx, width, height);
            } else if (appState.currentProcess === 'dark') {
                drawDarkReactions(ctx, width, height);
            } else {
                drawChlorophyllStructure(ctx, width, height);
            }
        }

        // Draw overview
        function drawOverview(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Photosynthesis Overview', width/2, 20);
            
            // Draw plant
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.moveTo(width/2, height - 50);
            ctx.lineTo(width/2, height/2);
            ctx.stroke();
            
            // Draw leaves
            ctx.beginPath();
            ctx.ellipse(width/2 - 30, height/2 - 20, 40, 20, -Math.PI/4, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(width/2 + 30, height/2 - 20, 40, 20, Math.PI/4, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw sun
            ctx.fillStyle = '#FFC107';
            ctx.beginPath();
            ctx.arc(50, 50, 30, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw light rays
            ctx.strokeStyle = '#FFC107';
            ctx.lineWidth = 2;
            for (let i = 0; i < 8; i++) {
                const angle = (i * 45) * Math.PI / 180;
                ctx.beginPath();
                ctx.moveTo(50 + Math.cos(angle) * 30, 50 + Math.sin(angle) * 30);
                ctx.lineTo(50 + Math.cos(angle) * 60, 50 + Math.sin(angle) * 60);
                ctx.stroke();
            }
            
            // Draw CO‚ÇÇ arrows to leaf
            ctx.strokeStyle = '#9E9E9E';
            ctx.fillStyle = '#9E9E9E';
            for (let i = 0; i < 3; i++) {
                const x = width/2 - 60 + i * 40;
                const y = 100;
                
                // Draw CO‚ÇÇ molecule
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('C', x-3, y+3);
                
                // Draw arrow to leaf
                ctx.beginPath();
                ctx.moveTo(x, y + 10);
                ctx.lineTo(width/2 - 30 + i * 20, height/2 - 40);
                ctx.stroke();
                
                // Arrowhead
                ctx.beginPath();
                ctx.moveTo(width/2 - 30 + i * 20, height/2 - 40);
                ctx.lineTo(width/2 - 35 + i * 20, height/2 - 35);
                ctx.lineTo(width/2 - 25 + i * 20, height/2 - 35);
                ctx.closePath();
                ctx.fill();
            }
            
            // Draw O‚ÇÇ bubbles from leaf
            if (appState.animationRunning) {
                drawOxygenBubbles(ctx, width, height);
                appState.animationFrame = requestAnimationFrame(() => drawOverview(ctx, width, height));
            }
            
            // Draw labels
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Sunlight', 50, 100);
            ctx.fillText('CO‚ÇÇ in', width/2 - 60, 120);
            ctx.fillText('O‚ÇÇ out', width/2 + 60, height/2);
            ctx.fillText('Glucose produced', width/2, height - 20);
        }

        // Draw oxygen bubbles animation
        function drawOxygenBubbles(ctx, width, height) {
            const time = Date.now() / 1000;
            
            for (let i = 0; i < 5; i++) {
                const bubbleX = width/2 + 20 + Math.sin(time + i) * 10;
                const bubbleY = height/2 - 30 - (time * 50 + i * 20) % (height/2);
                const size = 5 + Math.sin(time + i) * 2;
                
                if (bubbleY > 0) {
                    ctx.fillStyle = '#F44336';
                    ctx.beginPath();
                    ctx.arc(bubbleX, bubbleY, size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.fillStyle = '#FFFFFF';
                    ctx.font = '8px Arial';
                    ctx.fillText('O‚ÇÇ', bubbleX-4, bubbleY+2);
                }
            }
        }

        // Draw light reactions
        function drawLightReactions(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Light-Dependent Reactions', width/2, 20);
            
            // Draw thylakoid membrane
            ctx.fillStyle = '#4CAF50';
            ctx.fillRect(50, 50, width - 100, 80);
            ctx.strokeStyle = '#FFFFFF';
            ctx.strokeRect(50, 50, width - 100, 80);
            
            // Draw chlorophyll molecules
            for (let i = 0; i < 8; i++) {
                const x = 70 + i * 40;
                const y = 70;
                
                // Draw chlorophyll molecule
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.arc(x, y, 15, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#FFFFFF';
                ctx.stroke();
                
                // Draw Mg atom in center
                ctx.fillStyle = '#FF9800';
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw light hitting chlorophyll
            if (appState.animationRunning) {
                const time = Date.now() / 1000;
                
                for (let i = 0; i < 8; i++) {
                    const x = 70 + i * 40;
                    const lightY = 40 + Math.sin(time + i) * 5;
                    
                    // Draw light ray
                    ctx.strokeStyle = '#FFC107';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x, 30);
                    ctx.lineTo(x, lightY);
                    ctx.stroke();
                }
                
                appState.animationFrame = requestAnimationFrame(() => drawLightReactions(ctx, width, height));
            }
            
            // Draw products
            ctx.fillStyle = '#2196F3';
            ctx.font = '14px Arial';
            
            // ATP
            ctx.beginPath();
            ctx.arc(100, 180, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('ATP', 95, 185);
            
            // NADPH
            ctx.fillStyle = '#9C27B0';
            ctx.beginPath();
            ctx.arc(width/2, 180, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('NADPH', width/2 - 20, 185);
            
            // O‚ÇÇ
            ctx.fillStyle = '#F44336';
            ctx.beginPath();
            ctx.arc(width - 100, 180, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('O‚ÇÇ', width - 105, 185);
            
            // Draw labels
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Thylakoid Membrane', width/2, 45);
            ctx.fillText('Chlorophyll absorbs light', width/2, 100);
            ctx.fillText('Products: ATP, NADPH, O‚ÇÇ', width/2, 210);
        }

        // Draw dark reactions
        function drawDarkReactions(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Light-Independent Reactions (Calvin Cycle)', width/2, 20);
            
            // Draw cycle
            const centerX = width/2;
            const centerY = height/2;
            const radius = 80;
            
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw steps around cycle
            const steps = ['CO‚ÇÇ Fixation', 'Reduction', 'Regeneration'];
            const molecules = ['RuBP', '3-PGA', 'G3P', 'Glucose'];
            
            steps.forEach((step, index) => {
                const angle = (index * 120) * Math.PI / 180;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                
                // Draw step circle
                ctx.fillStyle = '#2196F3';
                ctx.beginPath();
                ctx.arc(x, y, 25, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                // Draw step name
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '10px Arial';
                ctx.fillText(step, x - 25, y);
            });
            
            // Draw CO‚ÇÇ input
            ctx.fillStyle = '#9E9E9E';
            ctx.beginPath();
            ctx.arc(centerX + radius + 40, centerY, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('CO‚ÇÇ', centerX + radius + 35, centerY + 5);
            
            // Draw ATP and NADPH input
            ctx.fillStyle = '#2196F3';
            ctx.beginPath();
            ctx.arc(centerX, centerY - radius - 40, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('ATP', centerX - 10, centerY - radius - 35);
            
            ctx.fillStyle = '#9C27B0';
            ctx.beginPath();
            ctx.arc(centerX - 40, centerY - radius - 40, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('NADPH', centerX - 50, centerY - radius - 35);
            
            // Draw glucose output
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.arc(centerX, centerY + radius + 40, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Glucose', centerX - 20, centerY + radius + 45);
            
            // Draw arrows
            if (appState.animationRunning) {
                drawCalvinCycleArrows(ctx, centerX, centerY, radius);
                appState.animationFrame = requestAnimationFrame(() => drawDarkReactions(ctx, width, height));
            }
        }

        // Draw Calvin cycle arrows animation
        function drawCalvinCycleArrows(ctx, centerX, centerY, radius) {
            const time = Date.now() / 1000;
            const arrowAngle = time * 2; // Rotate with time
            
            ctx.strokeStyle = '#FFC107';
            ctx.lineWidth = 2;
            ctx.fillStyle = '#FFC107';
            
            // Draw rotating arrow
            const arrowX = centerX + Math.cos(arrowAngle) * radius;
            const arrowY = centerY + Math.sin(arrowAngle) * radius;
            
            // Arrow line
            ctx.beginPath();
            const prevAngle = arrowAngle - 0.3;
            const prevX = centerX + Math.cos(prevAngle) * radius;
            const prevY = centerY + Math.sin(prevAngle) * radius;
            ctx.moveTo(prevX, prevY);
            ctx.lineTo(arrowX, arrowY);
            ctx.stroke();
            
            // Arrow head
            ctx.beginPath();
            ctx.moveTo(arrowX, arrowY);
            const angle1 = arrowAngle - Math.PI/6;
            const angle2 = arrowAngle + Math.PI/6;
            ctx.lineTo(arrowX - Math.cos(angle1) * 10, arrowY - Math.sin(angle1) * 10);
            ctx.lineTo(arrowX - Math.cos(angle2) * 10, arrowY - Math.sin(angle2) * 10);
            ctx.closePath();
            ctx.fill();
        }

        // Draw chlorophyll structure
        function drawChlorophyllStructure(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Chlorophyll Structure', width/2, 20);
            
            // Draw chlorophyll molecule
            const centerX = width/2;
            const centerY = height/2;
            
            // Draw porphyrin ring (large circle)
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, 60, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw magnesium atom in center
            ctx.fillStyle = '#FF9800';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Mg', centerX - 5, centerY + 5);
            
            // Draw phytol tail
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX + 60, centerY);
            for (let i = 0; i < 5; i++) {
                ctx.lineTo(centerX + 80 + i * 15, centerY + (i % 2 === 0 ? 10 : -10));
            }
            ctx.stroke();
            
            // Draw light absorption peaks
            ctx.fillStyle = '#2196F3';
            ctx.beginPath();
            ctx.arc(centerX - 40, centerY - 40, 25, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Blue', centerX - 45, centerY - 35);
            
            ctx.fillStyle = '#F44336';
            ctx.beginPath();
            ctx.arc(centerX - 40, centerY + 40, 25, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Red', centerX - 45, centerY + 45);
            
            // Draw green reflection
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.arc(centerX + 40, centerY, 25, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Green', centerX + 35, centerY + 5);
            ctx.fillText('(Reflected)', centerX + 35, centerY + 20);
            
            // Draw labels
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '12px Arial';
            ctx.fillText('Porphyrin Ring', centerX, centerY - 80);
            ctx.fillText('Phytol Tail', centerX + 120, centerY + 30);
            ctx.fillText('Absorbs blue & red light', centerX - 40, centerY + 80);
        }

        // Toggle animation
        window.toggleAnimation = function() {
            appState.animationRunning = !appState.animationRunning;
            event.target.textContent = `Animation: ${appState.animationRunning ? 'On' : 'Off'}`;
            
            if (appState.animationRunning) {
                drawProcess();
            } else {
                if (appState.animationFrame) {
                    cancelAnimationFrame(appState.animationFrame);
                }
            }
        };

        // Speed up animation
        window.speedUp = function() {
            appState.animationSpeed = Math.min(appState.animationSpeed + 0.5, 3);
        };

        // Slow down animation
        window.slowDown = function() {
            appState.animationSpeed = Math.max(appState.animationSpeed - 0.5, 0.5);
        };

        // Reset animation
        window.resetAnimation = function() {
            appState.animationSpeed = 1;
            drawProcess();
        };

        // Explain equation
        window.explainEquation = function() {
            alert("Photosynthesis Equation Explanation:\n\n" +
                  "6CO‚ÇÇ + 6H‚ÇÇO + Light Energy ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ\n\n" +
                  "‚Ä¢ 6 molecules of Carbon Dioxide\n" +
                  "‚Ä¢ 6 molecules of Water\n" +
                  "‚Ä¢ Sunlight Energy\n" +
                  "Produces:\n" +
                  "‚Ä¢ 1 molecule of Glucose (C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ)\n" +
                  "‚Ä¢ 6 molecules of Oxygen\n\n" +
                  "The equation is balanced: Equal atoms on both sides.");
        };

        // Show word equation
        window.showWordEquation = function() {
            equationBox.textContent = "Carbon Dioxide + Water + Sunlight ‚Üí Glucose + Oxygen";
        };

        // Balance equation
        window.balanceEquation = function() {
            equationBox.innerHTML = "6CO‚ÇÇ + 6H‚ÇÇO + Light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ<br>" +
                                   "<small style='color: #FFC107;'>Count the atoms: 6C, 18O, 12H on each side ‚úì</small>";
        };

        // Show leaf part
        window.showLeafPart = function(part) {
            appState.currentLeafPart = part;
            
            // Update active button
            const leafBtns = document.querySelectorAll('.leaf-btn');
            leafBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawLeaf();
        };

        // Draw leaf
        function drawLeaf() {
            const ctx = appState.leafCtx;
            const canvas = appState.leafCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            if (appState.currentLeafPart === 'cross') {
                drawLeafCrossSection(ctx, width, height);
            } else if (appState.currentLeafPart === 'stomata') {
                drawStomata(ctx, width, height);
            } else if (appState.currentLeafPart === 'chloroplast') {
                drawChloroplast(ctx, width, height);
            } else if (appState.currentLeafPart === 'veins') {
                drawLeafVeins(ctx, width, height);
            } else {
                drawLeafAdaptations(ctx, width, height);
            }
        }

        // Draw leaf cross section
        function drawLeafCrossSection(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Leaf Cross Section', width/2, 20);
            
            // Draw leaf layers
            const layers = [
                { name: 'Cuticle', y: 40, thickness: 5, color: '#795548' },
                { name: 'Upper Epidermis', y: 45, thickness: 10, color: '#8BC34A' },
                { name: 'Palisade Mesophyll', y: 55, thickness: 40, color: '#4CAF50' },
                { name: 'Spongy Mesophyll', y: 95, thickness: 30, color: '#8BC34A' },
                { name: 'Lower Epidermis', y: 125, thickness: 10, color: '#8BC34A' },
                { name: 'Cuticle', y: 135, thickness: 5, color: '#795548' }
            ];
            
            layers.forEach(layer => {
                ctx.fillStyle = layer.color;
                ctx.fillRect(50, layer.y, width - 100, layer.thickness);
                ctx.strokeStyle = '#FFFFFF';
                ctx.strokeRect(50, layer.y, width - 100, layer.thickness);
                
                if (appState.showLabels) {
                    ctx.fillStyle = '#FFFFFF';
                    ctx.font = '12px Arial';
                    ctx.fillText(layer.name, 30, layer.y + layer.thickness/2 + 4);
                }
            });
            
            // Draw chloroplasts in palisade cells
            ctx.fillStyle = '#4CAF50';
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 3; j++) {
                    const x = 100 + i * 30;
                    const y = 70 + j * 10;
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Draw stomata on lower epidermis
            ctx.fillStyle = '#2196F3';
            for (let i = 0; i < 3; i++) {
                const x = 100 + i * 50;
                const y = 130;
                
                // Draw stoma opening
                ctx.beginPath();
                ctx.ellipse(x, y, 8, 3, 0, 0, Math.PI * 2);
                ctx.stroke();
                
                // Draw guard cells
                ctx.beginPath();
                ctx.ellipse(x - 6, y, 6, 8, 0, 0, Math.PI * 2);
                ctx.stroke();
                ctx.beginPath();
                ctx.ellipse(x + 6, y, 6, 8, 0, 0, Math.PI * 2);
                ctx.stroke();
            }
            
            // Draw vein
            ctx.fillStyle = '#795548';
            ctx.fillRect(width/2 - 10, 40, 20, 100);
        }

        // Draw stomata
        function drawStomata(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Stomata - Gas Exchange Pores', width/2, 20);
            
            // Draw several stomata
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 2; j++) {
                    const centerX = 100 + i * 100;
                    const centerY = 80 + j * 80;
                    
                    // Draw guard cells
                    ctx.strokeStyle = '#8BC34A';
                    ctx.lineWidth = 2;
                    
                    // Left guard cell
                    ctx.beginPath();
                    ctx.ellipse(centerX - 15, centerY, 15, 20, 0, 0, Math.PI * 2);
                    ctx.stroke();
                    
                    // Right guard cell
                    ctx.beginPath();
                    ctx.ellipse(centerX + 15, centerY, 15, 20, 0, 0, Math.PI * 2);
                    ctx.stroke();
                    
                    // Draw stoma opening
                    ctx.strokeStyle = '#2196F3';
                    ctx.beginPath();
                    ctx.ellipse(centerX, centerY, 10, 5, 0, 0, Math.PI * 2);
                    ctx.stroke();
                    
                    // Draw chloroplasts in guard cells
                    ctx.fillStyle = '#4CAF50';
                    for (let k = 0; k < 3; k++) {
                        const angle = (k * 120) * Math.PI / 180;
                        const chloroplastX = centerX - 15 + Math.cos(angle) * 8;
                        const chloroplastY = centerY + Math.sin(angle) * 8;
                        ctx.beginPath();
                        ctx.arc(chloroplastX, chloroplastY, 4, 0, Math.PI * 2);
                        ctx.fill();
                        
                        const chloroplastX2 = centerX + 15 + Math.cos(angle) * 8;
                        const chloroplastY2 = centerY + Math.sin(angle) * 8;
                        ctx.beginPath();
                        ctx.arc(chloroplastX2, chloroplastY2, 4, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
            }
            
            // Draw gas exchange
            ctx.fillStyle = '#9E9E9E';
            for (let i = 0; i < 4; i++) {
                const x = 50 + i * 30;
                const y = 40;
                
                // CO‚ÇÇ going in
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('CO‚ÇÇ', x-5, y+15);
                
                // Arrow down
                ctx.beginPath();
                ctx.moveTo(x, y+5);
                ctx.lineTo(x, y+20);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#F44336';
            for (let i = 0; i < 4; i++) {
                const x = width - 50 - i * 30;
                const y = 40;
                
                // O‚ÇÇ going out
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('O‚ÇÇ', x-5, y+15);
                
                // Arrow up
                ctx.beginPath();
                ctx.moveTo(x, y-5);
                ctx.lineTo(x, y-20);
                ctx.stroke();
            }
            
            if (appState.showLabels) {
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Guard Cells', width/2, height - 20);
                ctx.fillText('Stoma Opening', width/2, height - 40);
            }
        }

        // Draw chloroplast
        function drawChloroplast(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Chloroplast Structure', width/2, 20);
            
            const centerX = width/2;
            const centerY = height/2;
            
            // Draw outer membrane
            ctx.strokeStyle = '#8BC34A';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, 80, 50, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw inner membrane
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, 70, 40, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw thylakoids (stacked)
            for (let i = 0; i < 5; i++) {
                const y = centerY - 20 + i * 10;
                const thylakoidWidth = 40 + i * 5;
                
                // Draw thylakoid
                ctx.fillStyle = '#4CAF50';
                ctx.fillRect(centerX - thylakoidWidth/2, y - 3, thylakoidWidth, 6);
                ctx.strokeStyle = '#FFFFFF';
                ctx.strokeRect(centerX - thylakoidWidth/2, y - 3, thylakoidWidth, 6);
                
                // Draw chlorophyll molecules on thylakoid
                ctx.fillStyle = '#4CAF50';
                for (let j = 0; j < 3; j++) {
                    const x = centerX - thylakoidWidth/2 + 10 + j * 15;
                    ctx.beginPath();
                    ctx.arc(x, y, 4, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Draw stroma (area between thylakoids)
            ctx.fillStyle = 'rgba(139, 195, 74, 0.3)';
            ctx.fillRect(centerX - 35, centerY - 30, 70, 60);
            
            // Draw starch grains
            ctx.fillStyle = '#FFC107';
            for (let i = 0; i < 3; i++) {
                const angle = (i * 120) * Math.PI / 180;
                const x = centerX + Math.cos(angle) * 30;
                const y = centerY + Math.sin(angle) * 20;
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw labels if enabled
            if (appState.showLabels) {
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '12px Arial';
                ctx.fillText('Outer Membrane', centerX + 90, centerY - 30);
                ctx.fillText('Inner Membrane', centerX + 90, centerY);
                ctx.fillText('Thylakoids', centerX - 90, centerY - 10);
                ctx.fillText('Stroma', centerX - 90, centerY + 20);
                ctx.fillText('Starch Grains', centerX, centerY + 50);
            }
        }

        // Draw leaf veins
        function drawLeafVeins(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Leaf Venation - Transport System', width/2, 20);
            
            // Draw leaf outline
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.ellipse(width/2, height/2, 120, 80, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw midrib (main vein)
            ctx.strokeStyle = '#795548';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(width/2, 40);
            ctx.lineTo(width/2, height - 40);
            ctx.stroke();
            
            // Draw secondary veins
            ctx.lineWidth = 3;
            for (let i = -3; i <= 3; i++) {
                if (i === 0) continue;
                
                const startY = 60 + Math.abs(i) * 20;
                const endX = width/2 + i * 40;
                const endY = height/2 + i * 10;
                
                ctx.beginPath();
                ctx.moveTo(width/2, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
            }
            
            // Draw tertiary veins (network)
            ctx.strokeStyle = '#795548';
            ctx.lineWidth = 1;
            for (let i = -3; i <= 3; i++) {
                for (let j = 0; j < 3; j++) {
                    const startX = width/2 + i * 40;
                    const startY = height/2 + i * 10 + j * 20 - 20;
                    const endX = startX + (Math.random() - 0.5) * 30;
                    const endY = startY + (Math.random() - 0.5) * 30;
                    
                    ctx.beginPath();
                    ctx.moveTo(startX, startY);
                    ctx.lineTo(endX, endY);
                    ctx.stroke();
                }
            }
            
            // Draw transport
            ctx.fillStyle = '#2196F3';
            for (let i = 0; i < 5; i++) {
                const x = width/2;
                const y = 50 + i * 15;
                
                // Water going up
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // Arrow up
                ctx.beginPath();
                ctx.moveTo(x, y - 5);
                ctx.lineTo(x, y - 15);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#FF9800';
            for (let i = 0; i < 5; i++) {
                const x = width/2 + 20;
                const y = height - 50 - i * 15;
                
                // Glucose going down
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // Arrow down
                ctx.beginPath();
                ctx.moveTo(x, y + 5);
                ctx.lineTo(x, y + 15);
                ctx.stroke();
            }
            
            if (appState.showLabels) {
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText('Xylem - Water up', width/2, 30);
                ctx.fillText('Phloem - Food down', width/2, height - 20);
            }
        }

        // Draw leaf adaptations
        function drawLeafAdaptations(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Leaf Adaptations for Photosynthesis', width/2, 20);
            
            // Draw adaptations grid
            const adaptations = [
                { icon: 'üìè', name: 'Large Surface Area', desc: 'Maximizes light absorption' },
                { icon: 'üìÑ', name: 'Thin', desc: 'Short diffusion distance for gases' },
                { icon: 'üü¢', name: 'Green Color', desc: 'Chlorophyll reflects green light' },
                { icon: 'üå¨Ô∏è', name: 'Stomata', desc: 'Gas exchange & transpiration' },
                { icon: 'üîÑ', name: 'Arrangement', desc: 'Minimizes shading' },
                { icon: 'üíß', name: 'Waxy Cuticle', desc: 'Reduces water loss' }
            ];
            
            const gridWidth = 2;
            const cellWidth = width / gridWidth;
            const cellHeight = (height - 40) / 3;
            
            adaptations.forEach((adapt, index) => {
                const row = Math.floor(index / gridWidth);
                const col = index % gridWidth;
                const x = col * cellWidth + cellWidth/2;
                const y = 40 + row * cellHeight + cellHeight/2;
                
                // Draw adaptation box
                ctx.fillStyle = 'rgba(76, 175, 80, 0.2)';
                ctx.fillRect(col * cellWidth + 10, 40 + row * cellHeight + 10, cellWidth - 20, cellHeight - 20);
                ctx.strokeStyle = '#4CAF50';
                ctx.strokeRect(col * cellWidth + 10, 40 + row * cellHeight + 10, cellWidth - 20, cellHeight - 20);
                
                // Draw icon
                ctx.fillStyle = '#FFFFFF';
                ctx.font = '24px Arial';
                ctx.fillText(adapt.icon, x, y - 20);
                
                // Draw name
                ctx.font = '12px Arial';
                ctx.fillText(adapt.name, x, y);
                
                // Draw description
                ctx.font = '10px Arial';
                ctx.fillText(adapt.desc, x, y + 15);
            });
        }

        // Toggle labels
        window.toggleLabels = function() {
            appState.showLabels = !appState.showLabels;
            event.target.textContent = `Labels: ${appState.showLabels ? 'On' : 'Off'}`;
            drawLeaf();
        };

        // Show factor
        window.showFactor = function(factor) {
            const info = factors[factor];
            if (!info) return;
            
            alert(`${info.name}\n\nEffect: ${info.effect}\n\nExplanation: ${info.explanation}\n\nOptimal: ${info.optimal}\n\nGraph: ${info.graph}`);
        };

        // Show graphs
        window.showGraphs = function() {
            alert("Photosynthesis Rate Graphs:\n\n" +
                  "Light Intensity: ‚ÜóÔ∏è then ‚Üí (plateaus at saturation)\n" +
                  "CO‚ÇÇ Concentration: ‚ÜóÔ∏è then ‚Üí (plateaus at saturation)\n" +
                  "Temperature: ‚ÜóÔ∏è peak ‚ÜòÔ∏è (bell curve - enzymes denature)\n" +
                  "Water: Sharp ‚ÜòÔ∏è with shortage (essential raw material)\n" +
                  "Chlorophyll: ‚ÜóÔ∏è (positive correlation up to limit)\n\n" +
                  "Note: Factors interact - limiting factor determines overall rate.");
        };

        // Run factor experiment
        window.runFactorExperiment = function() {
            alert("Factor Experiment Simulation:\n\n" +
                  "Testing photosynthesis rate under different conditions:\n\n" +
                  "1. Vary light intensity: 0% ‚Üí 100%\n" +
                  "2. Vary CO‚ÇÇ: 0.04% (air) ‚Üí 0.1%\n" +
                  "3. Vary temperature: 10¬∞C ‚Üí 45¬∞C\n" +
                  "4. Vary water: dry ‚Üí optimal ‚Üí waterlogged\n\n" +
                  "Results show rate increases then plateaus or decreases.");
        };

        // Show nutrient
        window.showNutrient = function(nutrient) {
            const info = nutrients[nutrient];
            if (!info) return;
            
            alert(`${info.name} (${info.symbol})\n\n` +
                  `Type: ${info.type === 'macro' ? 'Macronutrient' : 'Micronutrient'}\n\n` +
                  `Role: ${info.role}\n\n` +
                  `Deficiency Symptoms: ${info.deficiency}\n\n` +
                  `Source: ${info.sources}\n\n` +
                  `Importance: ${info.importance}`);
        };

        // Run experiment
        window.runExperiment = function(experiment) {
            appState.currentExperiment = experiment;
            
            // Update active button
            const experimentBtns = document.querySelectorAll('.experiment-btn');
            experimentBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            drawExperiment();
        };

        // Draw experiment
        function drawExperiment() {
            const ctx = appState.experimentCtx;
            const canvas = appState.experimentCanvas;
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            if (appState.currentExperiment === 'oxygen') {
                drawOxygenExperiment(ctx, width, height);
            } else if (appState.currentExperiment === 'starch') {
                drawStarchExperiment(ctx, width, height);
            } else if (appState.currentExperiment === 'variegated') {
                drawVariegatedExperiment(ctx, width, height);
            } else if (appState.currentExperiment === 'pondweed') {
                drawPondweedExperiment(ctx, width, height);
            } else if (appState.currentExperiment === 'destarch') {
                drawDestarchExperiment(ctx, width, height);
            } else {
                drawLightColorExperiment(ctx, width, height);
            }
        }

        // Draw oxygen experiment
        function drawOxygenExperiment(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Oxygen Production Experiment', width/2, 20);
            
            // Draw test tube setup
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            
            // Draw test tube
            ctx.beginPath();
            ctx.moveTo(100, 180);
            ctx.lineTo(100, 80);
            ctx.lineTo(150, 80);
            ctx.lineTo(150, 180);
            ctx.closePath();
            ctx.stroke();
            
            // Draw water
            ctx.fillStyle = '#2196F3';
            ctx.fillRect(101, 120, 48, 59);
            
            // Draw pondweed
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.moveTo(125, 120);
            for (let i = 0; i < 5; i++) {
                ctx.lineTo(125 + Math.sin(Date.now()/1000 + i) * 10, 120 - i * 8);
            }
            ctx.stroke();
            
            // Draw oxygen bubbles
            const time = Date.now() / 1000;
            for (let i = 0; i < 3; i++) {
                const bubbleX = 125 + Math.sin(time + i) * 5;
                const bubbleY = 100 - (time * 30 + i * 15) % 40;
                const size = 3 + Math.sin(time + i);
                
                if (bubbleY > 80) {
                    ctx.fillStyle = '#F44336';
                    ctx.beginPath();
                    ctx.arc(bubbleX, bubbleY, size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Draw inverted measuring cylinder collecting gas
            ctx.strokeStyle = '#FFFFFF';
            ctx.beginPath();
            ctx.moveTo(200, 180);
            ctx.lineTo(200, 100);
            ctx.lineTo(220, 100);
            ctx.lineTo(220, 180);
            ctx.closePath();
            ctx.stroke();
            
            // Draw collected gas (oxygen)
            const gasLevel = 140 + Math.sin(time) * 5;
            ctx.fillStyle = 'rgba(244, 67, 54, 0.5)';
            ctx.fillRect(201, gasLevel, 18, 180 - gasLevel);
            
            // Draw labels
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Water', 125, 140);
            ctx.fillText('Pondweed', 125, 160);
            ctx.fillText('O‚ÇÇ collected', 210, 90);
            ctx.fillText('O‚ÇÇ bubbles', 125, 70);
        }

        // Draw starch experiment
        function drawStarchExperiment(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Starch Test Experiment', width/2, 20);
            
            // Draw before and after leaves
            const leaves = [
                { x: 100, y: 100, label: 'Leaf in sunlight', color: '#4CAF50', hasStarch: true },
                { x: 250, y: 100, label: 'Leaf in dark', color: '#8BC34A', hasStarch: false }
            ];
            
            leaves.forEach(leaf => {
                // Draw leaf
                ctx.fillStyle = leaf.color;
                ctx.beginPath();
                ctx.ellipse(leaf.x, leaf.y, 40, 25, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#FFFFFF';
                ctx.stroke();
                
                // Draw iodine test result
                ctx.fillStyle = leaf.hasStarch ? '#795548' : '#FFC107';
                ctx.beginPath();
                ctx.arc(leaf.x, leaf.y + 40, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                
                // Draw label
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText(leaf.label, leaf.x, leaf.y - 40);
                ctx.fillText(leaf.hasStarch ? 'Blue-black' : 'Yellow-brown', leaf.x, leaf.y + 70);
            });
            
            // Draw iodine bottle
            ctx.fillStyle = '#795548';
            ctx.fillRect(180, 180, 40, 60);
            ctx.strokeStyle = '#FFFFFF';
            ctx.strokeRect(180, 180, 40, 60);
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Iodine', 200, 175);
            
            // Draw dropper
            ctx.strokeStyle = '#FFFFFF';
            ctx.beginPath();
            ctx.moveTo(200, 180);
            ctx.lineTo(200, 160);
            ctx.lineTo(190, 150);
            ctx.lineTo(210, 150);
            ctx.closePath();
            ctx.stroke();
        }

        // Draw variegated experiment
        function drawVariegatedExperiment(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Variegated Leaf Experiment', width/2, 20);
            
            // Draw variegated leaf
            const centerX = width/2;
            const centerY = height/2;
            
            // Leaf outline
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, 80, 50, 0, 0, Math.PI * 2);
            ctx.stroke();
            
            // Draw green areas (with chlorophyll)
            ctx.fillStyle = '#4CAF50';
            // Left side
            ctx.beginPath();
            ctx.ellipse(centerX - 30, centerY, 40, 35, 0, 0, Math.PI * 2);
            ctx.fill();
            // Right patches
            ctx.beginPath();
            ctx.arc(centerX + 30, centerY - 20, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(centerX + 20, centerY + 25, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw white areas (no chlorophyll)
            ctx.fillStyle = '#FFFFFF';
            // Right side
            ctx.beginPath();
            ctx.ellipse(centerX + 30, centerY, 40, 35, 0, 0, Math.PI * 2);
            ctx.fill();
            // Left patches
            ctx.beginPath();
            ctx.arc(centerX - 30, centerY - 20, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(centerX - 20, centerY + 25, 10, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw chlorophyll symbols in green areas
            ctx.fillStyle = '#4CAF50';
            for (let i = 0; i < 3; i++) {
                const angle = (i * 120) * Math.PI / 180;
                const x = centerX - 30 + Math.cos(angle) * 20;
                const y = centerY + Math.sin(angle) * 15;
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillText('Chl', x-5, y+3);
            }
            
            // Draw iodine test result pattern
            ctx.fillStyle = '#795548';
            // Only green areas turn blue-black
            ctx.beginPath();
            ctx.ellipse(centerX - 30, centerY, 40, 35, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(centerX + 30, centerY - 20, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(centerX + 20, centerY + 25, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw labels
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText('Green = Chlorophyll present', centerX, centerY - 70);
            ctx.fillText('White = No chlorophyll', centerX, centerY + 70);
            ctx.fillText('Only green areas produce starch!', centerX, height - 20);
        }

        // Draw pondweed experiment
        function drawPondweedExperiment(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Pondweed Rate Experiment', width/2, 20);
            
            // Draw setup with lamp at different distances
            const distances = [50, 150, 250];
            const rates = [3, 8, 5]; // Bubbles per minute
            
            distances.forEach((x, i) => {
                // Draw lamp
                ctx.fillStyle = '#FFC107';
                ctx.beginPath();
                ctx.arc(x, 80, 15, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw light rays
                ctx.strokeStyle = '#FFC107';
                ctx.lineWidth = 1;
                for (let j = 0; j < 5; j++) {
                    const angle = (-30 + j * 15) * Math.PI / 180;
                    ctx.beginPath();
                    ctx.moveTo(x, 95);
                    ctx.lineTo(x + Math.sin(angle) * 40, 95 + Math.cos(angle) * 40);
                    ctx.stroke();
                }
                
                // Draw beaker with pondweed
                ctx.strokeStyle = '#FFFFFF';
                ctx.beginPath();
                ctx.moveTo(x - 25, 180);
                ctx.lineTo(x - 25, 140);
                ctx.lineTo(x + 25, 140);
                ctx.lineTo(x + 25, 180);
                ctx.closePath();
                ctx.stroke();
                
                // Draw water
                ctx.fillStyle = '#2196F3';
                ctx.fillRect(x - 24, 141, 48, 38);
                
                // Draw pondweed
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.moveTo(x, 180);
                for (let j = 0; j < 3; j++) {
                    ctx.lineTo(x + Math.sin(Date.now()/1000 + i + j) * 5, 180 - j * 15);
                }
                ctx.stroke();
                
                // Draw bubbles based on rate
                const time = Date.now() / 1000;
                for (let j = 0; j < rates[i]; j++) {
                    const bubbleY = 160 - ((time * 20 + j * 10) % 40);
                    if (bubbleY > 140) {
                        ctx.fillStyle = '#F44336';
                        ctx.beginPath();
                        ctx.arc(x + (j - rates[i]/2) * 3, bubbleY, 2 + Math.sin(time + j) * 1, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
                
                // Draw distance label
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText(`${(i + 1) * 10}cm`, x, 130);
                ctx.fillText(`${rates[i]} bubbles/min`, x, 200);
            });
            
            // Draw conclusion
            ctx.fillText('Rate highest at medium distance', width/2, height - 20);
        }

        // Draw destarch experiment
        function drawDestarchExperiment(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Destarching Experiment', width/2, 20);
            
            // Draw timeline
            ctx.strokeStyle = '#FFFFFF';
            ctx.beginPath();
            ctx.moveTo(50, 150);
            ctx.lineTo(width - 50, 150);
            ctx.stroke();
            
            // Draw timeline points
            const points = [
                { x: 100, label: 'Day 1: Plant in dark', desc: 'Remove starch' },
                { x: 200, label: 'Day 2: Test leaf', desc: 'Confirm no starch' },
                { x: 300, label: 'Day 3: Experiment', desc: 'Test variable' },
                { x: 400, label: 'Day 4: Test again', desc: 'Check for starch' }
            ];
            
            points.forEach(point => {
                // Draw point
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.arc(point.x, 150, 8, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw vertical line
                ctx.strokeStyle = '#FFFFFF';
                ctx.beginPath();
                ctx.moveTo(point.x, 150);
                ctx.lineTo(point.x, 100);
                ctx.stroke();
                
                // Draw label
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText(point.label, point.x, 90);
                ctx.fillText(point.desc, point.x, 105);
            });
            
            // Draw plant in dark
            ctx.fillStyle = '#333333';
            ctx.fillRect(70, 180, 60, 80);
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.arc(100, 180, 20, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw test tube
            ctx.strokeStyle = '#FFFFFF';
            ctx.beginPath();
            ctx.moveTo(250, 180);
            ctx.lineTo(250, 220);
            ctx.lineTo(270, 220);
            ctx.lineTo(270, 180);
            ctx.closePath();
            ctx.stroke();
            
            // Draw iodine
            ctx.fillStyle = '#795548';
            ctx.fillRect(251, 200, 18, 19);
            
            // Draw leaf being tested
            ctx.fillStyle = '#4CAF50';
            ctx.beginPath();
            ctx.ellipse(260, 190, 15, 10, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw result (no starch - yellow)
            ctx.fillStyle = '#FFC107';
            ctx.beginPath();
            ctx.arc(280, 210, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#000000';
            ctx.fillText('No starch', 280, 212);
        }

        // Draw light color experiment
        function drawLightColorExperiment(ctx, width, height) {
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Light Color Experiment', width/2, 20);
            
            // Draw different colored lights
            const colors = [
                { color: '#F44336', name: 'Red', rate: 8 },
                { color: '#FF9800', name: 'Orange', rate: 6 },
                { color: '#FFC107', name: 'Yellow', rate: 4 },
                { color: '#4CAF50', name: 'Green', rate: 2 },
                { color: '#2196F3', name: 'Blue', rate: 9 }
            ];
            
            colors.forEach((colorInfo, i) => {
                const x = 50 + i * 70;
                
                // Draw colored light
                ctx.fillStyle = colorInfo.color;
                ctx.beginPath();
                ctx.arc(x, 100, 15, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw light beam
                ctx.strokeStyle = colorInfo.color;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(x, 115);
                ctx.lineTo(x, 160);
                ctx.stroke();
                
                // Draw plant
                ctx.fillStyle = '#4CAF50';
                ctx.beginPath();
                ctx.arc(x, 180, 20, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw bubbles based on rate
                const time = Date.now() / 1000;
                for (let j = 0; j < colorInfo.rate; j++) {
                    const bubbleY = 170 - ((time * 20 + j * 5) % 30);
                    ctx.beginPath();
                    ctx.arc(x + (j - colorInfo.rate/2) * 3, bubbleY, 2, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                // Draw label
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText(colorInfo.name, x, 80);
                ctx.fillText(`${colorInfo.rate}/min`, x, 210);
            });
            
            // Draw conclusion
            ctx.fillText('Blue and red light are most effective', width/2, height - 20);
            ctx.fillText('Green light is least effective (reflected)', width/2, height - 5);
        }

        // Pause experiment
        window.pauseExperiment = function() {
            // In a real implementation, this would pause animations
            alert("Experiment paused. Click 'Reset' to restart.");
        };

        // Reset experiment
        window.resetExperiment = function() {
            drawExperiment();
        };

        // Load quiz question
        function loadQuizQuestion() {
            const quiz = quizQuestions[appState.quizIndex];
            quizQuestion.textContent = quiz.question;
            
            quizOptions.innerHTML = '';
            quiz.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                optionElement.onclick = () => checkQuizAnswer(optionElement, String.fromCharCode(65 + index));
                quizOptions.appendChild(optionElement);
            });
        }

        // Check quiz answer
        window.checkQuizAnswer = function(element, selectedAnswer) {
            const quiz = quizQuestions[appState.quizIndex];
            const options = quizOptions.querySelectorAll('.quiz-option');
            
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.textContent.startsWith(quiz.answer + ')')) {
                    opt.classList.add('correct');
                }
            });
            
            if (selectedAnswer === quiz.answer) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
            }
        };

        // Next quiz question
        window.nextQuizQuestion = function() {
            appState.quizIndex = (appState.quizIndex + 1) % quizQuestions.length;
            loadQuizQuestion();
        };

        // Show ecosystem role
        window.showEcosystemRole = function() {
            alert("Photosynthesis in Ecosystems:\n\n" +
                  "1. Primary Production: Base of food chains\n" +
                  "2. Oxygen Production: 50-85% of Earth's oxygen\n" +
                  "3. Carbon Sink: Absorbs CO‚ÇÇ, reduces greenhouse effect\n" +
                  "4. Habitat: Provides food and shelter\n" +
                  "5. Soil Formation: Plant matter enriches soil\n\n" +
                  "Without photosynthesis, most life on Earth would not exist!");
        };

        // Show carbon cycle
        window.showCarbonCycle = function() {
            alert("Carbon Cycle & Photosynthesis:\n\n" +
                  "Plants: CO‚ÇÇ ‚Üí Organic compounds (photosynthesis)\n" +
                  "Animals: Eat plants ‚Üí Respiration ‚Üí CO‚ÇÇ\n" +
                  "Decomposers: Break down dead matter ‚Üí CO‚ÇÇ\n" +
                  "Fossil Fuels: Ancient plants/animals ‚Üí CO‚ÇÇ when burned\n" +
                  "Oceans: Absorb/release CO‚ÇÇ\n\n" +
                  "Photosynthesis removes CO‚ÇÇ, helping balance atmospheric carbon.");
        };

        // Topic information display
        window.showTopicInfo = function(topic) {
            let info = '';
            if (topic === 'process') {
                info = "üîÑ Photosynthesis Process üîÑ\n\n";
                info += "The process by which plants convert light energy into chemical energy.\n\n";
                info += "Key Steps:\n";
                info += "1. Light Absorption: Chlorophyll captures sunlight\n";
                info += "2. Water Splitting: Photolysis produces O‚ÇÇ and H‚Å∫\n";
                info += "3. ATP & NADPH Production: Energy carriers\n";
                info += "4. Carbon Fixation: CO‚ÇÇ ‚Üí Glucose (Calvin cycle)\n\n";
                info += "Chemical Equation:\n";
                info += "6CO‚ÇÇ + 6H‚ÇÇO + Light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ\n\n";
                info += "Importance: Produces oxygen and food for ecosystems.";
            } else if (topic === 'factors') {
                info = "üìä Factors Affecting Photosynthesis üìä\n\n";
                info += "Several factors influence the rate of photosynthesis:\n\n";
                info += "1. Light Intensity: More light = faster rate (up to saturation)\n";
                info += "2. CO‚ÇÇ Concentration: More CO‚ÇÇ = faster rate (up to limit)\n";
                info += "3. Temperature: Optimal 20-35¬∞C (enzyme activity)\n";
                info += "4. Water: Essential raw material and for plant structure\n";
                info += "5. Chlorophyll: More pigment = more light absorption\n\n";
                info += "Limiting Factor: The factor in shortest supply limits the overall rate.";
            } else {
                info = "ü•ó Plant Nutrition ü•ó\n\n";
                info += "Essential nutrients for plant growth and development.\n\n";
                info += "Macronutrients (needed in large amounts):\n";
                info += "‚Ä¢ N, P, K - Primary nutrients\n";
                info += "‚Ä¢ Ca, Mg, S - Secondary nutrients\n\n";
                info += "Micronutrients (needed in small amounts):\n";
                info += "‚Ä¢ Fe, Mn, Zn, Cu, B, Mo, Cl\n\n";
                info += "Sources:\n";
                info += "‚Ä¢ Air: CO‚ÇÇ (carbon), O‚ÇÇ (oxygen)\n";
                info += "‚Ä¢ Water: H‚ÇÇO (hydrogen, oxygen)\n";
                info += "‚Ä¢ Soil: Minerals absorbed by roots\n\n";
                info += "Deficiency symptoms help diagnose nutrient problems.";
            }
            alert(info);
        };

        // Initialize app
        window.addEventListener('DOMContentLoaded', initApp);
        
        // Handle window resize
        window.addEventListener('resize', function() {
            initializeCanvases();
            drawProcess();
            drawLeaf();
            drawExperiment();
        });
    </script>
</body>
</html>
