<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 Science - Classification of Living Things | Ideolix Learning Hub</title>
    <style>
        :root {
            --primary-green: #4CAF50;
            --secondary-blue: #2196F3;
            --accent-yellow: #FFEB3B;
            --accent-orange: #FF9800;
            --accent-red: #F44336;
            --accent-purple: #9C27B0;
            --dark-bg: #121212;
            --dark-surface: #1E1E1E;
            --dark-card: #252525;
            --dark-border: #333;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #888;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Cards */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .welcome-page {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(76, 175, 80, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-green);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin: 0 auto 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-green);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-primary:hover {
            background: #388E3C;
            transform: translateY(-3px);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Practice Page */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-green), var(--secondary-blue));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .example-display {
            background: var(--dark-surface);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid var(--accent-yellow);
            font-family: 'Georgia', serif;
            font-size: 1.2rem;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-green);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--primary-green);
            color: var(--primary-green);
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-blue);
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 5px solid var(--primary-green);
        }

        .feedback-incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 5px solid var(--accent-red);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
            background: var(--primary-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-red);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--primary-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-red);
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            border-color: var(--primary-green);
        }

        /* Kingdom Cards */
        .kingdom-card {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid;
            transition: transform 0.3s ease;
        }

        .kingdom-card:hover {
            transform: translateY(-3px);
        }

        .kingdom-animalia { border-color: #FF9800; background: rgba(255, 152, 0, 0.1); }
        .kingdom-plantae { border-color: #4CAF50; background: rgba(76, 175, 80, 0.1); }
        .kingdom-fungi { border-color: #9C27B0; background: rgba(156, 39, 176, 0.1); }
        .kingdom-protista { border-color: #2196F3; background: rgba(33, 150, 243, 0.1); }
        .kingdom-monera { border-color: #795548; background: rgba(121, 85, 72, 0.1); }

        /* Visualization */
        .classification-tree {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
        }

        .tree-node {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 8px;
            background: var(--dark-card);
            border: 2px solid var(--primary-green);
            font-weight: bold;
        }

        .tree-connector {
            height: 2px;
            background: var(--primary-green);
            margin: 0 20px;
            display: inline-block;
            vertical-align: middle;
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-green);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        @media (max-width: 768px) {
            .welcome-title { font-size: 2rem; }
            .score-value { font-size: 3rem; }
            .stats-container { grid-template-columns: 1fr; }
            .navigation-buttons { flex-direction: column; gap: 10px; }
            .navigation-buttons .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card" id="welcomePage">
            <h1 class="welcome-title">Grade 7 Science</h1>
            <p class="welcome-subtitle">Discover how scientists organize life on Earth! Learn about biological classification, the five kingdoms of life, and the binomial naming system used to identify all living organisms.</p>
            
            <div class="topic-badge">
                <span class="topic-icon">ðŸŒ¿ðŸ”¬ðŸ“Š</span>
                <span class="topic-name">Classification of Living Things</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">Start Learning</button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 60</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.7%"></div>
                </div>
            </div>

            <div class="question-container">
                <h2 class="question-text" id="questionText"></h2>
                
                <div class="example-display" id="exampleDisplay"></div>
                
                <div id="classificationTree"></div>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="feedback-container" id="feedbackContainer">
                    <div class="feedback-header">
                        <div class="feedback-icon"></div>
                        <div class="feedback-title"></div>
                    </div>
                    <div class="feedback-explanation"></div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card" id="resultsPage">
            <h2 class="results-title">Classification Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Try Again</button>
                <button class="btn btn-outline" id="backToHome">Home</button>
            </div>
        </div>
    </div>

    <script>
        // Questions array - Classification of Living Things
        const questions = [
            // Five Kingdoms Basics (1-20)
            {
                type: "kingdoms_basics",
                question: "How many main kingdoms are living things classified into?",
                example: "",
                options: ["5", "3", "7", "10"],
                answer: "A",
                explanation: "Living organisms are classified into 5 main kingdoms: Animalia, Plantae, Fungi, Protista, and Monera."
            },
            {
                type: "kingdoms_basics",
                question: "Which kingdom includes all animals?",
                example: "",
                options: ["Animalia", "Plantae", "Fungi", "Protista"],
                answer: "A",
                explanation: "Animalia is the kingdom that includes all multicellular animals that move and consume other organisms for food."
            },
            {
                type: "kingdoms_basics",
                question: "Which kingdom includes mushrooms and yeast?",
                example: "",
                options: ["Fungi", "Plantae", "Protista", "Monera"],
                answer: "A",
                explanation: "Fungi includes organisms like mushrooms, mold, and yeast that absorb nutrients from their environment."
            },
            {
                type: "kingdoms_basics",
                question: "Which kingdom includes organisms that can make their own food through photosynthesis?",
                example: "",
                options: ["Plantae", "Animalia", "Fungi", "Protista"],
                answer: "A",
                explanation: "Plantae includes plants that use chlorophyll to perform photosynthesis and make their own food."
            },
            {
                type: "kingdoms_basics",
                question: "Bacteria belong to which kingdom?",
                example: "",
                options: ["Monera", "Protista", "Fungi", "Animalia"],
                answer: "A",
                explanation: "Monera includes single-celled prokaryotic organisms like bacteria."
            },
            {
                type: "kingdoms_basics",
                question: "Which kingdom includes amoeba and paramecium?",
                example: "",
                options: ["Protista", "Monera", "Animalia", "Fungi"],
                answer: "A",
                explanation: "Protista includes mostly single-celled eukaryotic organisms like amoeba and paramecium."
            },
            // Kingdom Characteristics (21-40)
            {
                type: "kingdom_characteristics",
                question: "Which characteristic is true for Animalia?",
                example: "",
                options: ["Multicellular, consumers, can move", "Single-celled, producers, stationary", "Absorb nutrients, cell walls of chitin", "Prokaryotic, microscopic"],
                answer: "A",
                explanation: "Animals are multicellular, cannot make their own food (consumers), and most can move."
            },
            {
                type: "kingdom_characteristics",
                question: "Which characteristic is true for Plantae?",
                example: "",
                options: ["Multicellular, producers, stationary", "Single-celled, consumers, can move", "Absorb nutrients, have hyphae", "Prokaryotic, everywhere"],
                answer: "A",
                explanation: "Plants are multicellular, make their own food through photosynthesis (producers), and are stationary."
            },
            {
                type: "kingdom_characteristics",
                question: "What is unique about Fungi?",
                example: "",
                options: ["Absorb nutrients through hyphae", "Perform photosynthesis", "Have nervous systems", "Are always microscopic"],
                answer: "A",
                explanation: "Fungi absorb nutrients through thread-like structures called hyphae."
            },
            {
                type: "kingdom_characteristics",
                question: "Which kingdom contains both plant-like and animal-like organisms?",
                example: "",
                options: ["Protista", "Monera", "Animalia", "Plantae"],
                answer: "A",
                explanation: "Protista is a diverse kingdom that includes both plant-like algae and animal-like protozoa."
            },
            // Binomial Nomenclature (41-60)
            {
                type: "binomial_system",
                question: "What is the binomial system of naming organisms?",
                example: "",
                options: ["Two-name scientific naming system", "Five-kingdom classification", "Common name system", "Numbering system"],
                answer: "A",
                explanation: "Binomial nomenclature uses two Latin names: genus (capitalized) and species (lowercase)."
            },
            {
                type: "binomial_system",
                question: "Who developed the binomial naming system?",
                example: "",
                options: ["Carl Linnaeus", "Charles Darwin", "Gregor Mendel", "Louis Pasteur"],
                answer: "A",
                explanation: "Carl Linnaeus, a Swedish botanist, developed the binomial system in the 18th century."
            },
            {
                type: "binomial_system",
                question: "How is the scientific name for humans written?",
                example: "",
                options: ["Homo sapiens", "Homo Sapiens", "homo sapiens", "HOMO SAPIENS"],
                answer: "A",
                explanation: "Genus capitalized (Homo), species lowercase (sapiens), and usually italicized or underlined."
            },
            {
                type: "binomial_system",
                question: "What does the first word in a scientific name represent?",
                example: "",
                options: ["Genus", "Species", "Kingdom", "Family"],
                answer: "A",
                explanation: "The first word is the genus, a group of closely related species."
            },
            {
                type: "binomial_system",
                question: "What does the second word in a scientific name represent?",
                example: "",
                options: ["Species", "Genus", "Kingdom", "Phylum"],
                answer: "A",
                explanation: "The second word is the species, the most specific classification level."
            },
            // Classification Hierarchy (61-80)
            {
                type: "classification_hierarchy",
                question: "What is the correct order of classification levels from broadest to most specific?",
                example: "",
                options: ["Kingdom â†’ Phylum â†’ Class â†’ Order â†’ Family â†’ Genus â†’ Species", "Species â†’ Genus â†’ Family â†’ Order â†’ Class â†’ Phylum â†’ Kingdom", "Phylum â†’ Kingdom â†’ Class â†’ Order â†’ Family â†’ Genus â†’ Species", "Kingdom â†’ Class â†’ Phylum â†’ Order â†’ Family â†’ Genus â†’ Species"],
                answer: "A",
                explanation: "Kingdom is broadest, species is most specific: KPCOFGS (King Philip Came Over For Good Soup)."
            },
            {
                type: "classification_hierarchy",
                question: "Which level is more specific than genus but broader than species?",
                example: "",
                options: ["Family", "Order", "Class", "Phylum"],
                answer: "A",
                explanation: "Family is between genus and order in the classification hierarchy."
            },
            // Mixed Questions (81-100)
            {
                type: "mixed",
                question: "Which two kingdoms contain only single-celled organisms?",
                example: "",
                options: ["Monera and Protista", "Animalia and Plantae", "Fungi and Plantae", "Protista and Fungi"],
                answer: "A",
                explanation: "Monera (bacteria) and Protista (protozoa, algae) contain single-celled organisms, though some Protista can be multicellular."
            },
            {
                type: "mixed",
                question: "What is the main difference between Monera and Protista?",
                example: "",
                options: ["Monera are prokaryotic, Protista are eukaryotic", "Monera are multicellular, Protista are single-celled", "Monera have nuclei, Protista don't", "Monera are plants, Protista are animals"],
                answer: "A",
                explanation: "Monera organisms lack a nucleus (prokaryotic), while Protista organisms have a nucleus (eukaryotic)."
            },
            {
                type: "mixed",
                question: "Why is the binomial system important?",
                example: "",
                options: ["Provides universal names understood worldwide", "Makes names shorter and easier", "Uses common local names", "Is easier to remember than common names"],
                answer: "A",
                explanation: "Binomial names are the same worldwide, preventing confusion from different common names in different languages."
            }
        ];

        // Kingdom information
        const kingdoms = [
            {
                name: "Animalia",
                description: "Multicellular animals that move and consume other organisms",
                examples: "Dogs, cats, birds, fish, insects",
                characteristics: "Multicellular, heterotrophic (consumers), can move, no cell walls",
                color: "#FF9800"
            },
            {
                name: "Plantae",
                description: "Multicellular plants that perform photosynthesis",
                examples: "Trees, flowers, grasses, mosses",
                characteristics: "Multicellular, autotrophic (producers), stationary, cell walls of cellulose",
                color: "#4CAF50"
            },
            {
                name: "Fungi",
                description: "Organisms that absorb nutrients from their environment",
                examples: "Mushrooms, mold, yeast",
                characteristics: "Mostly multicellular, absorb nutrients, cell walls of chitin",
                color: "#9C27B0"
            },
            {
                name: "Protista",
                description: "Mostly single-celled eukaryotic organisms",
                examples: "Amoeba, paramecium, algae",
                characteristics: "Mostly single-celled, diverse (some plant-like, some animal-like)",
                color: "#2196F3"
            },
            {
                name: "Monera",
                description: "Single-celled prokaryotic organisms",
                examples: "Bacteria, cyanobacteria",
                characteristics: "Single-celled, prokaryotic (no nucleus), microscopic",
                color: "#795548"
            }
        ];

        // Binomial nomenclature examples
        const binomialExamples = [
            { common: "Human", scientific: "Homo sapiens" },
            { common: "Dog", scientific: "Canis familiaris" },
            { common: "Cat", scientific: "Felis catus" },
            { common: "Lion", scientific: "Panthera leo" },
            { common: "Tiger", scientific: "Panthera tigris" },
            { common: "Rose", scientific: "Rosa rubiginosa" },
            { common: "Oak tree", scientific: "Quercus robur" }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const exampleDisplay = document.getElementById('exampleDisplay');
        const classificationTree = document.getElementById('classificationTree');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');

        // Initialize the app
        function initApp() {
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', showWelcomePage);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') startPractice();
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'block';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
        }

        // Create kingdom display
        function createKingdomDisplay() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("kingdom") && Math.random() > 0.5) {
                const randomKingdom = kingdoms[Math.floor(Math.random() * kingdoms.length)];
                const display = document.createElement('div');
                display.className = `kingdom-card kingdom-${randomKingdom.name.toLowerCase()}`;
                display.innerHTML = `
                    <h3 style="color: ${randomKingdom.color}; margin-bottom: 10px;">${randomKingdom.name}</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 10px;">${randomKingdom.description}</p>
                    <div style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 6px;">
                        <strong>Examples:</strong> ${randomKingdom.examples}<br>
                        <strong>Characteristics:</strong> ${randomKingdom.characteristics}
                    </div>
                `;
                return display;
            }
            return null;
        }

        // Create classification tree
        function createClassificationTree() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("classification_hierarchy") || question.type.includes("binomial")) {
                const treeDiv = document.createElement('div');
                treeDiv.className = 'classification-tree';
                treeDiv.innerHTML = `
                    <h3 style="color: var(--primary-green); margin-bottom: 15px; text-align: center;">Classification Hierarchy</h3>
                    <div style="text-align: center;">
                        <div class="tree-node">Kingdom</div>
                        <div class="tree-connector" style="width: 30px;"></div>
                        <div class="tree-node">Phylum</div>
                        <div class="tree-connector" style="width: 30px;"></div>
                        <div class="tree-node">Class</div>
                        <br>
                        <div class="tree-connector" style="width: 20px; height: 20px; display: inline-block;"></div>
                        <div class="tree-node">Order</div>
                        <div class="tree-connector" style="width: 30px;"></div>
                        <div class="tree-node">Family</div>
                        <br>
                        <div class="tree-connector" style="width: 40px; height: 20px; display: inline-block;"></div>
                        <div class="tree-node">Genus</div>
                        <div class="tree-connector" style="width: 30px;"></div>
                        <div class="tree-node">Species</div>
                    </div>
                    <p style="color: var(--text-secondary); margin-top: 15px; text-align: center;">
                        <strong>Mnemonic:</strong> King Philip Came Over For Good Soup
                    </p>
                `;
                return treeDiv;
            }
            return null;
        }

        // Create binomial example
        function createBinomialExample() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            if (question.type.includes("binomial") && Math.random() > 0.5) {
                const randomExample = binomialExamples[Math.floor(Math.random() * binomialExamples.length)];
                const display = document.createElement('div');
                display.style.cssText = 'background: var(--dark-surface); padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid var(--secondary-blue);';
                display.innerHTML = `
                    <h4 style="color: var(--secondary-blue); margin-bottom: 10px;">Binomial Nomenclature Example</h4>
                    <p style="color: var(--text-primary); margin-bottom: 5px;">
                        <strong>Common Name:</strong> ${randomExample.common}
                    </p>
                    <p style="color: var(--text-primary);">
                        <strong>Scientific Name:</strong> <em>${randomExample.scientific}</em>
                    </p>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;">
                        Note: Genus is capitalized, species is lowercase, names are italicized
                    </p>
                `;
                return display;
            }
            return null;
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            // Clear containers
            exampleDisplay.innerHTML = '';
            classificationTree.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            // Add visual aids based on question type
            const kingdomDisplay = createKingdomDisplay();
            if (kingdomDisplay) {
                exampleDisplay.appendChild(kingdomDisplay);
                exampleDisplay.style.display = 'block';
            } else {
                exampleDisplay.style.display = 'none';
            }
            
            const classificationTreeDisplay = createClassificationTree();
            if (classificationTreeDisplay) {
                classificationTree.appendChild(classificationTreeDisplay);
            }
            
            const binomialDisplay = createBinomialExample();
            if (binomialDisplay) {
                exampleDisplay.appendChild(binomialDisplay);
                exampleDisplay.style.display = 'block';
            }
            
            // Add options
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = 'âœ“';
                feedbackTitle.textContent = 'Correct!';
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = 'âœ—';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackExplanation.textContent = `Correct answer: ${correctOption} (${correctText})\n\n${explanation}`;
                }
            }
            
            if (isCorrect) {
                feedbackExplanation.textContent = explanation;
            }
            
            feedbackContainer.style.display = 'block';
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            saveStateToStorage();
            showPracticePage();
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Load/save state
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixClassification');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            } else {
                initializeQuestions();
            }
        }

        function saveStateToStorage() {
            localStorage.setItem('ideolixClassification', JSON.stringify(appState));
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
