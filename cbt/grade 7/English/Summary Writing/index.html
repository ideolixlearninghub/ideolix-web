<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 7 English - Summary Writing | Ideolix Learning Hub</title>
    <style>
        /* CSS Variables for Writing Theme */
        :root {
            --primary-blue: #2962FF;
            --secondary-teal: #00BFA5;
            --accent-amber: #FFAB00;
            --accent-purple: #AA00FF;
            --accent-pink: #FF4081;
            --accent-green: #00C853;
            --accent-orange: #FF6D00;
            --accent-cyan: #00B8D4;
            --dark-bg: #0D1B2A;
            --dark-surface: #1B2B3A;
            --dark-card: #253447;
            --dark-border: #3A4A5A;
            --text-primary: #FFFFFF;
            --text-secondary: #B8D0E0;
            --text-muted: #7A94A8;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(41, 98, 255, 0.3);
            --summary-glow: 0 0 15px rgba(0, 191, 165, 0.4);
            --main-idea-glow: 0 0 15px rgba(255, 171, 0, 0.4);
            --paraphrase-glow: 0 0 15px rgba(170, 0, 255, 0.4);
            --concise-glow: 0 0 15px rgba(255, 64, 129, 0.4);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Writing Pattern Background */
        .writing-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: 
                radial-gradient(circle at 20% 30%, rgba(41, 98, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 191, 165, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 171, 0, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0D1B2A, #1B2B3A);
            opacity: 0.8;
        }

        .floating-text {
            position: absolute;
            color: rgba(255, 255, 255, 0.05);
            font-size: 1.5rem;
            font-weight: normal;
            animation: floatText 30s linear infinite;
            font-family: 'Georgia', serif;
            max-width: 200px;
            text-align: center;
            line-height: 1.3;
        }

        @keyframes floatText {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-100px) translateX(100px) rotate(5deg); opacity: 0.05; }
            50% { transform: translateY(-50px) translateX(-100px) rotate(-5deg); opacity: 0.1; }
            75% { transform: translateY(100px) translateX(50px) rotate(5deg); opacity: 0.05; }
            100% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 27, 42, 0.9);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            display: flex;
            align-items: center;
            background: var(--dark-surface);
            padding: 15px 25px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
            z-index: 100;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(10px);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .brand-info {
            flex: 1;
        }

        .brand-info h1 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .brand-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Card Styles */
        .card {
            background: var(--dark-card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--dark-border);
            backdrop-filter: blur(5px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow), var(--glow);
        }

        /* Welcome Page */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-logo {
            width: 140px;
            height: 140px;
            margin-bottom: 25px;
            border-radius: 20px;
            overflow: hidden;
            background-color: var(--dark-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .welcome-logo img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        .welcome-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 700px;
            line-height: 1.6;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(41, 98, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 25px;
            border: 1px solid var(--primary-blue);
        }

        .topic-icon {
            font-size: 1.5rem;
        }

        .topic-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .input-group {
            width: 100%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            text-align: left;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid var(--dark-border);
            border-radius: 12px;
            font-size: 1.1rem;
            background: var(--dark-surface);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(41, 98, 255, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.4);
        }

        .btn-primary:hover {
            background: #1A56DB;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(41, 98, 255, 0.5);
        }

        .btn-secondary {
            background: var(--secondary-teal);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 191, 165, 0.4);
        }

        .btn-secondary:hover {
            background: #009688;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 191, 165, 0.5);
        }

        .btn-amber {
            background: var(--accent-amber);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 171, 0, 0.4);
        }

        .btn-amber:hover {
            background: #FF9800;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 171, 0, 0.5);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--dark-border);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary-blue);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Practice Mode */
        .practice-page {
            display: none;
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-surface);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(41, 98, 255, 0.5);
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .writing-fact {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-purple);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Content Layout */
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        @media (max-width: 992px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .question-side {
            display: flex;
            flex-direction: column;
        }

        .visualization-side {
            display: flex;
            flex-direction: column;
        }

        .concept-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 15px rgba(41, 98, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .concept-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .concept-label {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 18px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--dark-border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: rgba(41, 98, 255, 0.05);
            transform: translateY(-2px);
        }

        .option.correct {
            background: rgba(0, 200, 83, 0.1);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .option.incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-color: var(--accent-pink);
            color: var(--accent-pink);
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--dark-card);
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            color: white;
            background: var(--secondary-teal);
        }

        .option.correct .option-letter {
            background: var(--accent-green);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--accent-pink);
            color: white;
        }

        .feedback-container {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }

        .feedback-correct {
            background: rgba(0, 200, 83, 0.1);
            border-left: 5px solid var(--accent-green);
        }

        .feedback-incorrect {
            background: rgba(255, 64, 129, 0.1);
            border-left: 5px solid var(--accent-pink);
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .feedback-correct .feedback-icon {
            background: var(--accent-green);
        }

        .feedback-incorrect .feedback-icon {
            background: var(--accent-pink);
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .feedback-correct .feedback-title {
            color: var(--accent-green);
        }

        .feedback-incorrect .feedback-title {
            color: var(--accent-pink);
        }

        .feedback-message {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        /* Visualization Components */
        .visualization-container {
            background: var(--dark-surface);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            border: 1px solid var(--dark-border);
            overflow: auto;
            backdrop-filter: blur(5px);
        }

        /* Summary Writing Display */
        .summary-display {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .display-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
            font-size: 1.3rem;
        }

        .summary-container {
            padding: 20px;
            background: var(--dark-surface);
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-purple);
        }

        .summary-scenario {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .summary-highlight {
            background: rgba(170, 0, 255, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid var(--accent-purple);
        }

        .highlight-text {
            color: var(--accent-purple);
            font-weight: bold;
        }

        /* Interactive Summary Builder */
        .summary-canvas {
            width: 100%;
            height: 300px;
            background: var(--dark-surface);
            border-radius: 12px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--secondary-teal);
            padding: 20px;
        }

        #summaryCanvas {
            width: 100%;
            height: 100%;
            display: block;
            background: var(--dark-surface);
        }

        .word-element {
            position: absolute;
            padding: 8px 12px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }

        .word-element:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        /* Summary Skills Grid */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 992px) {
            .skills-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .skills-grid {
                grid-template-columns: 1fr;
            }
        }

        .skill-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid transparent;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .skill-card:hover {
            transform: translateY(-5px);
        }

        .skill-card.main-idea {
            border-color: var(--secondary-teal);
        }

        .skill-card.paraphrasing {
            border-color: var(--accent-amber);
        }

        .skill-card.conciseness {
            border-color: var(--accent-purple);
        }

        .skill-card.objectivity {
            border-color: var(--accent-pink);
        }

        .skill-card.organization {
            border-color: var(--accent-green);
        }

        .skill-card.keywords {
            border-color: var(--accent-orange);
        }

        .skill-card.avoidance {
            border-color: var(--accent-cyan);
        }

        .skill-card.structure {
            border-color: var(--primary-blue);
        }

        .skill-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .main-idea .skill-icon {
            color: var(--secondary-teal);
        }

        .paraphrasing .skill-icon {
            color: var(--accent-amber);
        }

        .conciseness .skill-icon {
            color: var(--accent-purple);
        }

        .objectivity .skill-icon {
            color: var(--accent-pink);
        }

        .organization .skill-icon {
            color: var(--accent-green);
        }

        .keywords .skill-icon {
            color: var(--accent-orange);
        }

        .avoidance .skill-icon {
            color: var(--accent-cyan);
        }

        .structure .skill-icon {
            color: var(--primary-blue);
        }

        .skill-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .main-idea .skill-title {
            color: var(--secondary-teal);
        }

        .paraphrasing .skill-title {
            color: var(--accent-amber);
        }

        .conciseness .skill-title {
            color: var(--accent-purple);
        }

        .objectivity .skill-title {
            color: var(--accent-pink);
        }

        .organization .skill-title {
            color: var(--accent-green);
        }

        .keywords .skill-title {
            color: var(--accent-orange);
        }

        .avoidance .skill-title {
            color: var(--accent-cyan);
        }

        .structure .skill-title {
            color: var(--primary-blue);
        }

        .skill-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .skill-examples {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 10px;
            background: var(--dark-surface);
            padding: 8px;
            border-radius: 4px;
        }

        /* Summary Writing Table */
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--dark-card);
            border-radius: 8px;
            overflow: hidden;
        }

        .summary-table th {
            background: var(--dark-surface);
            padding: 12px;
            text-align: left;
            color: var(--accent-purple);
            border-bottom: 2px solid var(--accent-purple);
        }

        .summary-table td {
            padding: 10px;
            border-bottom: 1px solid var(--dark-border);
            color: var(--text-primary);
        }

        .summary-table tr:hover {
            background: rgba(170, 0, 255, 0.05);
        }

        /* Detailed Skills Display */
        .skills-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--secondary-teal);
        }

        .skills-title {
            color: var(--secondary-teal);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .skills-inner-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .skills-inner-grid {
                grid-template-columns: 1fr;
            }
        }

        .skill-detail-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .skill-detail-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary-teal);
        }

        .skill-detail-type {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--secondary-teal);
            font-size: 1.2rem;
        }

        .skill-detail-steps {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Paraphrasing Display */
        .paraphrasing-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-amber);
        }

        .paraphrasing-title {
            color: var(--accent-amber);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .paraphrasing-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .paraphrasing-grid {
                grid-template-columns: 1fr;
            }
        }

        .paraphrasing-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .paraphrasing-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-amber);
        }

        .paraphrasing-type {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-amber);
            font-size: 1.2rem;
        }

        .paraphrasing-steps {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Conciseness Display */
        .conciseness-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--accent-purple);
        }

        .conciseness-title {
            color: var(--accent-purple);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .conciseness-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .conciseness-grid {
                grid-template-columns: 1fr;
            }
        }

        .conciseness-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .conciseness-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-purple);
        }

        .conciseness-type {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-purple);
            font-size: 1.2rem;
        }

        .conciseness-steps {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Interactive Summary Builder */
        .builder-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--primary-blue);
        }

        .builder-title {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .builder-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .builder-select {
            padding: 10px 15px;
            background: var(--dark-surface);
            border: 2px solid var(--primary-blue);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .builder-input {
            padding: 15px;
            background: var(--dark-surface);
            border: 2px solid var(--primary-blue);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
        }

        .builder-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .builder-btn {
            padding: 10px 20px;
            background: var(--dark-surface);
            border: 2px solid var(--primary-blue);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .builder-btn:hover {
            background: rgba(41, 98, 255, 0.1);
            transform: translateY(-2px);
        }

        .builder-display {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Writing Study Display */
        .writing-study-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .writing-study-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .writing-study-grid {
                grid-template-columns: 1fr;
            }
        }

        .study-card {
            background: var(--dark-surface);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--accent-green);
        }

        .study-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-green);
        }

        .study-concept {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent-green);
        }

        .study-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Results Page */
        .results-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .results-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-card {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-teal), var(--accent-amber));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-percentage {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .score-message {
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .stat-item {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--dark-border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Summary Writing Visual Elements */
        .summary-step {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 191, 165, 0.05);
            border-radius: 6px;
            border-left: 4px solid var(--secondary-teal);
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--secondary-teal);
            color: white;
            border-radius: 50%;
            font-weight: bold;
        }

        .step-description {
            flex: 1;
        }

        .word-box {
            display: inline-block;
            padding: 5px 10px;
            margin: 0 5px;
            background: rgba(255, 171, 0, 0.1);
            border-radius: 4px;
            border: 1px solid var(--accent-amber);
            font-weight: bold;
        }

        .key-point {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--accent-pink);
            border-radius: 50%;
            margin: 0 5px;
        }

        .detail-line {
            display: inline-block;
            height: 2px;
            width: 30px;
            background: var(--primary-blue);
            margin: 0 5px;
            vertical-align: middle;
        }

        .summary-marker {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--accent-amber);
            margin: 0 5px;
            position: relative;
        }

        .summary-marker::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-amber);
            opacity: 0.3;
        }

        /* Canvas Styling */
        canvas {
            cursor: crosshair;
        }

        .canvas-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .canvas-btn {
            padding: 8px 12px;
            background: var(--dark-surface);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .canvas-btn:hover {
            background: rgba(41, 98, 255, 0.1);
            border-color: var(--primary-blue);
        }

        .canvas-btn.active {
            background: rgba(41, 98, 255, 0.2);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-value {
                font-size: 3rem;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .navigation-buttons .btn {
                width: 100%;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .concept-box {
                min-width: 140px;
                font-size: 1.5rem;
                padding: 15px 20px;
            }
            
            .skills-grid {
                grid-template-columns: 1fr;
            }
            
            .skills-inner-grid {
                grid-template-columns: 1fr;
            }
            
            .paraphrasing-grid {
                grid-template-columns: 1fr;
            }
            
            .conciseness-grid {
                grid-template-columns: 1fr;
            }
            
            .writing-study-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes grow {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .grow {
            animation: grow 0.5s ease forwards;
        }
        
        @keyframes summaryReveal {
            0% { transform: translateX(-100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .summary-reveal {
            animation: summaryReveal 0.5s ease forwards;
        }
        
        @keyframes summaryGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 191, 165, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(0, 191, 165, 0.2); }
        }
        
        .summary-glow {
            animation: summaryGlow 2s ease-in-out infinite;
        }
        
        @keyframes ideaGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 171, 0, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(255, 171, 0, 0.2); }
        }
        
        .idea-glow {
            animation: ideaGlow 2s ease-in-out infinite;
        }
        
        @keyframes paraphraseGlow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(170, 0, 255, 0.4); }
            50% { box-shadow: 0 0 15px 5px rgba(170, 0, 255, 0.2); }
        }
        
        .paraphrase-glow {
            animation: paraphraseGlow 2s ease-in-out infinite;
        }
        
        @keyframes floatSymbol {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .float-symbol {
            animation: floatSymbol 3s ease-in-out infinite;
        }
        
        @keyframes writingGlow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .writing-glow {
            animation: writingGlow 2s ease-in-out infinite;
        }
        
        @keyframes constructSummary {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .construct-summary {
            animation: constructSummary 0.5s ease forwards;
        }
        
        @keyframes typeWord {
            0% { opacity: 0; transform: translateX(-20px); }
            100% { opacity: 1; transform: translateX(0); }
        }
        
        .type-word {
            animation: typeWord 0.5s ease forwards;
        }
        
        /* Text Comparison Styles */
        .text-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .text-comparison {
                grid-template-columns: 1fr;
            }
        }
        
        .original-text {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--accent-pink);
        }
        
        .summary-text {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--accent-green);
        }
        
        .comparison-title {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .original-text .comparison-title {
            color: var(--accent-pink);
        }
        
        .summary-text .comparison-title {
            color: var(--accent-green);
        }
        
        /* Example Passages */
        .example-passage {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-amber);
        }
        
        .passage-title {
            color: var(--accent-amber);
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .passage-content {
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        
        /* Key Points List */
        .key-points {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .key-points-title {
            color: var(--primary-blue);
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .key-point-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: var(--dark-card);
            border-radius: 6px;
        }
        
        .key-point-icon {
            color: var(--accent-green);
            font-size: 1.2rem;
            margin-top: 2px;
        }
        
        /* Before-After Examples */
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .before-after {
                grid-template-columns: 1fr;
            }
        }
        
        .before-example {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--accent-pink);
        }
        
        .after-example {
            background: var(--dark-surface);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--accent-green);
        }
        
        .example-title {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .before-example .example-title {
            color: var(--accent-pink);
        }
        
        .after-example .example-title {
            color: var(--accent-green);
        }
        
        /* Step-by-Step Process */
        .process-steps {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .process-title {
            color: var(--accent-purple);
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .process-step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--dark-surface);
            border-radius: 8px;
            border-left: 4px solid var(--accent-purple);
        }
        
        .step-icon {
            width: 40px;
            height: 40px;
            background: var(--accent-purple);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-heading {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-purple);
        }
        
        /* Common Mistakes */
        .mistakes-container {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid var(--accent-pink);
        }
        
        .mistakes-title {
            color: var(--accent-pink);
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .mistake-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background: var(--dark-surface);
            border-radius: 6px;
        }
        
        .mistake-icon {
            color: var(--accent-pink);
            font-size: 1.2rem;
            margin-top: 2px;
        }
        
        .mistake-heading {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent-pink);
        }
    </style>
</head>
<body>
    <!-- Writing Pattern Background -->
    <div class="writing-bg" id="writingBg">
        <!-- Text snippets will be generated by JavaScript -->
    </div>
    <div class="overlay"></div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <div class="brand-info">
                <h1>Ideolix Learning Hub</h1>
                <p>Building learners for a digital future.</p>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline btn-small" id="backToTopics">Other Topics</button>
                <button class="btn btn-outline btn-small" id="backToHome">Home</button>
            </div>
        </header>

        <!-- Welcome Page -->
        <div class="welcome-page card fade-in" id="welcomePage">
            <div class="welcome-logo">
                <img src="https://raw.githubusercontent.com/ideolixlearninghub/ideolix-web/main/ideolix%20LOGO.jpg" alt="Ideolix Logo">
            </div>
            <h1 class="welcome-title">Grade 7 English - Summary Writing</h1>
            <p class="welcome-subtitle">Master the essential skill of summary writing! Learn to identify main ideas, extract key points, paraphrase effectively, and create concise, accurate summaries. Develop critical reading and writing skills that will help you in all academic subjects and beyond!</p>
            
            <div class="topic-badge">
                <span class="topic-icon">üìù ‚úÇÔ∏è üîç üìä üéØ</span>
                <span class="topic-name">Concise Writing & Key Idea Extraction</span>
            </div>
            
            <div class="input-group">
                <label for="studentName">Enter your full name:</label>
                <input type="text" id="studentName" placeholder="Your full name">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="startPractice">
                    <span>Start Summary Writing Journey</span>
                </button>
            </div>
        </div>

        <!-- Practice Page -->
        <div class="practice-page card fade-in" id="practicePage">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="studentNameDisplay"></span>
                    <span id="progressText">Question 1 of 80</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 1.25%"></div>
                </div>
            </div>

            <div class="question-container">
                <!-- Writing fact display -->
                <div id="writingFact"></div>
                
                <!-- Concept display area -->
                <div id="conceptDisplay"></div>
                
                <!-- Content Wrapper: Questions on left, Visualizations on right -->
                <div class="content-wrapper" id="contentWrapper">
                    <!-- Left side: Question and Options -->
                    <div class="question-side">
                        <h2 class="question-text" id="questionText"></h2>
                        
                        <div class="options-container" id="optionsContainer"></div>
                        
                        <div class="feedback-container" id="feedbackContainer">
                            <div class="feedback-header">
                                <div class="feedback-icon"></div>
                                <div class="feedback-title"></div>
                            </div>
                            <div class="feedback-message"></div>
                            <div class="feedback-explanation"></div>
                        </div>
                    </div>
                    
                    <!-- Right side: Visualizations -->
                    <div class="visualization-side">
                        <div class="visualization-container" id="visualizationContainer">
                            <!-- All visualizations will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="btn btn-outline" id="skipQuestion">Skip Question</button>
                    <button class="btn btn-primary" id="nextQuestion" disabled>Next Question</button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div class="results-page card fade-in" id="resultsPage">
            <h2 class="results-title">Summary Writing Mastery Complete!</h2>
            
            <div class="score-card">
                <div class="score-value" id="finalScore">0</div>
                <div class="score-percentage" id="scorePercentage">0%</div>
                <div class="score-message" id="scoreMessage"></div>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Incorrect Answers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skippedQuestions">0</div>
                        <div class="stat-label">Skipped Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="highestScore">0</div>
                        <div class="stat-label">Highest Score</div>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" id="retryTopic">Practice Again</button>
                <button class="btn btn-secondary" id="viewTopics">Other English Topics</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize background
        function initBackground() {
            const writingBg = document.getElementById('writingBg');
            
            // Create floating text snippets
            const textSnippets = [
                "Main Idea",
                "Key Points",
                "Paraphrase",
                "Concise",
                "Objective",
                "Summarize",
                "Essential",
                "Condense",
                "Extract",
                "Simplify"
            ];
            
            for (let i = 0; i < 20; i++) {
                const text = document.createElement('div');
                text.className = 'floating-text float-symbol';
                text.textContent = textSnippets[Math.floor(Math.random() * textSnippets.length)];
                text.style.left = `${Math.random() * 100}%`;
                text.style.top = `${Math.random() * 100}%`;
                text.style.animationDelay = `${Math.random() * 5}s`;
                text.style.fontSize = `${1 + Math.random() * 1.5}rem`;
                
                // Color based on text content
                const colors = [
                    'rgba(0, 191, 165, 0.1)',    // Teal
                    'rgba(255, 171, 0, 0.1)',    // Amber
                    'rgba(170, 0, 255, 0.1)',    // Purple
                    'rgba(255, 64, 129, 0.1)',   // Pink
                    'rgba(0, 200, 83, 0.1)',     // Green
                    'rgba(41, 98, 255, 0.1)'     // Blue
                ];
                text.style.color = colors[Math.floor(Math.random() * colors.length)];
                
                writingBg.appendChild(text);
            }
        }

        // Questions array - 80+ Grade 7 Summary Writing Questions
        const questions = [
            // What is Summary Writing? (1-10)
            {
                type: "basics",
                question: "What is a summary?",
                options: ["A brief restatement of main ideas in your own words", "A copy of the original text", "Your opinion about the text", "A detailed analysis of every point"],
                answer: "A",
                explanation: "A summary is a concise restatement of the main ideas and key points of a text, written in your own words."
            },
            {
                type: "basics",
                question: "What is the main purpose of writing a summary?",
                options: ["To capture the essential information concisely", "To show your writing skills", "To include all details", "To make the text longer"],
                answer: "A",
                explanation: "The main purpose is to capture the essential information from a longer text in a concise form."
            },
            {
                type: "basics",
                question: "How long should a good summary typically be?",
                options: ["About 1/3 the length of the original", "Same length as original", "Much longer than original", "Exactly 100 words"],
                answer: "A",
                explanation: "A good summary is typically about one-third the length of the original text, capturing main ideas concisely."
            },
            // Identifying Main Ideas (11-20)
            {
                type: "main_ideas",
                question: "What is the 'main idea' of a text?",
                options: ["The central message or most important point", "All interesting details", "The first sentence", "The conclusion only"],
                answer: "A",
                explanation: "The main idea is the central message or most important point the author wants to convey."
            },
            {
                type: "main_ideas",
                question: "Where can you often find the main idea in a paragraph?",
                options: ["In the topic sentence (often first or last)", "Only in the middle", "In every sentence", "Nowhere specific"],
                answer: "A",
                explanation: "The topic sentence, often at the beginning or end of a paragraph, usually states the main idea."
            },
            {
                type: "main_ideas",
                question: "What are 'supporting details'?",
                options: ["Facts, examples, reasons that explain main idea", "The main points", "Your opinions", "Unimportant information"],
                answer: "A",
                explanation: "Supporting details are facts, examples, reasons, or evidence that explain and support the main idea."
            },
            // Paraphrasing Skills (21-30)
            {
                type: "paraphrasing",
                question: "What does it mean to 'paraphrase'?",
                options: ["Restate ideas in your own words", "Copy exactly", "Quote directly", "Ignore the text"],
                answer: "A",
                explanation: "Paraphrasing means restating someone else's ideas in your own words while keeping the original meaning."
            },
            {
                type: "paraphrasing",
                question: "Which is a good paraphrase? Original: 'The quick brown fox jumps over the lazy dog.'",
                options: ["A fast brown fox leaps over a sleepy dog", "The quick brown fox jumps over the lazy dog", "Fox jumps dog", "A fox that is quick and brown jumps"],
                answer: "A",
                explanation: "Good paraphrasing changes sentence structure and vocabulary while keeping the original meaning."
            },
            {
                type: "paraphrasing",
                question: "What should you NOT do when paraphrasing?",
                options: ["Change the original meaning", "Use synonyms", "Change sentence structure", "Keep key terms"],
                answer: "A",
                explanation: "Never change the original meaning when paraphrasing. Always maintain the author's intended message."
            },
            // Conciseness Skills (31-40)
            {
                type: "conciseness",
                question: "What does 'concise' mean in summary writing?",
                options: ["Brief and to the point", "Long and detailed", "Wordy and repetitive", "Vague and unclear"],
                answer: "A",
                explanation: "Concise means expressing much in few words - being brief while still comprehensive."
            },
            {
                type: "conciseness",
                question: "Which sentence is more concise?",
                options: ["Cats are independent pets", "Cats, which are a type of domestic animal that people keep as pets, tend to be very independent creatures", "The feline species demonstrates autonomous behavior", "Cats are pets and they are independent"],
                answer: "A",
                explanation: "The first sentence is concise - it expresses the idea clearly in few words."
            },
            {
                type: "conciseness",
                question: "What should you eliminate to make writing concise?",
                options: ["Unnecessary words and repetition", "Main ideas", "Key points", "Essential information"],
                answer: "A",
                explanation: "Eliminate unnecessary words, repetition, and redundant information to achieve conciseness."
            },
            // Objectivity in Summaries (41-50)
            {
                type: "objectivity",
                question: "What does 'objective' mean in summary writing?",
                options: ["Sticking to facts without personal opinions", "Including your feelings", "Being creative", "Adding your analysis"],
                answer: "A",
                explanation: "Objective means presenting facts and information without personal opinions, biases, or interpretations."
            },
            {
                type: "objectivity",
                question: "Which sentence is objective?",
                options: ["The study found a 20% increase", "This amazing study proved my theory", "I believe the results are wrong", "The boring research showed"],
                answer: "A",
                explanation: "The first sentence is objective - it states a factual finding without personal opinion."
            },
            {
                type: "objectivity",
                question: "What should you avoid in an objective summary?",
                options: ["Personal opinions and emotional language", "Facts from the text", "Author's main points", "Key evidence"],
                answer: "A",
                explanation: "Avoid personal opinions, emotional language, and value judgments in objective summaries."
            },
            // Organization Skills (51-60)
            {
                type: "organization",
                question: "How should a summary be organized?",
                options: ["Follow the original text's structure", "Random order", "Alphabetical order", "From least to most important"],
                answer: "A",
                explanation: "A summary should generally follow the same organizational structure as the original text."
            },
            {
                type: "organization",
                question: "What is a good opening for a summary?",
                options: ["State the main idea first", "Start with a question", "Begin with a quote", "Use 'I think'"],
                answer: "A",
                explanation: "Start a summary by stating the main idea or thesis of the original text."
            },
            // Identifying Key Points (61-70)
            {
                type: "key_points",
                question: "What are 'key points' in a text?",
                options: ["Most important supporting ideas", "Every single detail", "Only statistics", "Your favorite parts"],
                answer: "A",
                explanation: "Key points are the most important supporting ideas that explain or prove the main idea."
            },
            {
                type: "key_points",
                question: "How do you identify key points?",
                options: ["Look for repeated ideas and important evidence", "Choose random sentences", "Pick the longest sentences", "Select what you find interesting"],
                answer: "A",
                explanation: "Identify key points by looking for repeated ideas, important evidence, examples, and explanations."
            },
            // What to Include/Exclude (71-80)
            {
                type: "inclusion",
                question: "What should ALWAYS be included in a summary?",
                options: ["Main idea and key supporting points", "All examples and details", "Your personal reaction", "Quotes from the text"],
                answer: "A",
                explanation: "Always include the main idea and the key supporting points that explain it."
            },
            {
                type: "inclusion",
                question: "What should you EXCLUDE from a summary?",
                options: ["Minor details and examples", "Main ideas", "Key evidence", "Important facts"],
                answer: "A",
                explanation: "Exclude minor details, examples, repetitions, and anything not essential to understanding the main points."
            },
            {
                type: "inclusion",
                question: "Should you include direct quotes in a summary?",
                options: ["Rarely, only if essential", "Always include many quotes", "Never use quotes", "Only long quotes"],
                answer: "A",
                explanation: "Use direct quotes very sparingly in summaries, only when the exact wording is essential."
            },
            // Summary Structure (81-90)
            {
                type: "structure",
                question: "What is a good summary structure?",
                options: ["Introduction (main idea), Body (key points), Conclusion (restatement)", "Random order", "Only main idea", "All details then main idea"],
                answer: "A",
                explanation: "Good structure: Start with main idea, present key points in logical order, conclude by restating main idea."
            },
            {
                type: "structure",
                question: "How should you connect ideas in a summary?",
                options: ["Use transition words for smooth flow", "No connections needed", "Only use 'and'", "Start every sentence with 'The'"],
                answer: "A",
                explanation: "Use transition words (however, therefore, furthermore, etc.) to create smooth connections between ideas."
            },
            // Before/After Examples (91-100)
            {
                type: "examples",
                question: "Original: 'The magnificent, incredibly beautiful sunrise painted the sky with brilliant shades of orange, pink, and purple, creating a breathtaking spectacle that filled me with awe and wonder.' Best summary:",
                options: ["The sunrise created colorful skies", "The magnificent, incredibly beautiful sunrise painted the sky", "I was filled with awe and wonder", "Orange, pink, and purple colors"],
                answer: "A",
                explanation: "The best summary captures the main idea (colorful sunrise) concisely without emotional language."
            },
            {
                type: "examples",
                question: "Original: 'Despite numerous challenges and obstacles, the determined team worked tirelessly and eventually succeeded in completing their ambitious project ahead of schedule.' Best summary:",
                options: ["The team overcame challenges to complete their project early", "The determined team worked tirelessly", "Numerous challenges and obstacles were faced", "The project was ambitious"],
                answer: "A",
                explanation: "Good summary includes main idea (team succeeded), key points (overcame challenges, completed early)."
            },
            // Common Mistakes (101-110)
            {
                type: "mistakes",
                question: "What is a common mistake in summary writing?",
                options: ["Including personal opinions", "Sticking to main ideas", "Using your own words", "Being concise"],
                answer: "A",
                explanation: "A common mistake is including personal opinions, which should be avoided in objective summaries."
            },
            {
                type: "mistakes",
                question: "What is 'plagiarism' in summary writing?",
                options: ["Copying text without proper paraphrasing or citation", "Writing too concisely", "Including main ideas", "Using transition words"],
                answer: "A",
                explanation: "Plagiarism is copying someone else's words or ideas without proper paraphrasing or giving credit."
            },
            // Application Questions (111-120)
            {
                type: "application",
                question: "Read this paragraph: 'Regular exercise provides numerous health benefits. It strengthens the heart, improves circulation, and helps maintain healthy body weight. Exercise also reduces stress and improves mental health.' What's the main idea?",
                options: ["Exercise has many health benefits", "Exercise strengthens the heart", "Exercise reduces stress", "People should exercise"],
                answer: "A",
                explanation: "The main idea is stated in the first sentence: exercise provides numerous health benefits."
            },
            {
                type: "application",
                question: "From the same paragraph, what are key points?",
                options: ["Strengthens heart, improves circulation, maintains weight, reduces stress", "Only strengthens heart", "Many benefits", "Exercise is good"],
                answer: "A",
                explanation: "Key points are the specific benefits listed: strengthens heart, improves circulation, maintains weight, reduces stress."
            },
            // Advanced Skills (121-130)
            {
                type: "advanced",
                question: "What is 'synthesizing' in summary writing?",
                options: ["Combining information from multiple sources", "Copying one source", "Writing opinions", "Making text longer"],
                answer: "A",
                explanation: "Synthesizing means combining information from multiple sources into a cohesive summary."
            },
            {
                type: "advanced",
                question: "What should you do when summarizing complex texts?",
                options: ["Break into sections and summarize each part", "Skip difficult parts", "Copy everything", "Make it very short"],
                answer: "A",
                explanation: "For complex texts, break them into sections, understand each part, then summarize section by section."
            }
        ];

        // App state
        let appState = {
            currentQuestionIndex: 0,
            score: 0,
            skipped: 0,
            answered: 0,
            currentQuestions: [],
            studentName: ""
        };

        // Positive feedback messages
        const positiveMessages = [
            "Excellent summary analysis!",
            "Perfect understanding of main ideas!",
            "Great paraphrasing skills!",
            "Amazing! You're a summary writing champion!",
            "Perfect grasp of conciseness!",
            "You're a future editor or journalist in the making!",
            "Outstanding critical reading skills!",
            "Brilliant summary methodology!",
            "You think like a professional summarizer!",
            "Summary writing mastery achieved!"
        ];

        // Summary writing skills
        const summarySkills = [
            {
                name: "Main Idea Identification",
                description: "Finding the central message of a text",
                examples: "Thesis statements, topic sentences, repeated concepts",
                characteristics: "Core message, most important point, what text is really about",
                icon: "üéØ",
                color: "#00BFA5"
            },
            {
                name: "Paraphrasing",
                description: "Restating ideas in your own words",
                examples: "Changing sentence structure, using synonyms, keeping meaning",
                characteristics: "Original wording, same meaning, different expression",
                icon: "üîÑ",
                color: "#FFAB00"
            },
            {
                name: "Conciseness",
                description: "Being brief while comprehensive",
                examples: "Eliminating redundancy, removing unnecessary words, being direct",
                characteristics: "Few words, clear meaning, no repetition",
                icon: "‚úÇÔ∏è",
                color: "#AA00FF"
            },
            {
                name: "Objectivity",
                description: "Sticking to facts without opinions",
                examples: "Avoiding 'I think', removing emotional language, presenting facts",
                characteristics: "Fact-based, neutral tone, author's perspective",
                icon: "‚öñÔ∏è",
                color: "#FF4081"
            },
            {
                name: "Organization",
                description: "Logical structure and flow",
                examples: "Clear introduction, logical order, smooth transitions",
                characteristics: "Easy to follow, coherent structure, logical progression",
                icon: "üìä",
                color: "#00C853"
            },
            {
                name: "Key Point Extraction",
                description: "Identifying important supporting ideas",
                examples: "Major evidence, key examples, important statistics",
                characteristics: "Supports main idea, essential information, crucial details",
                icon: "üîë",
                color: "#FF6D00"
            },
            {
                name: "Avoiding Plagiarism",
                description: "Using original expression",
                examples: "Proper paraphrasing, citing sources, original sentence structure",
                characteristics: "Your own words, credit to sources, unique expression",
                icon: "‚ö†Ô∏è",
                color: "#00B8D4"
            },
            {
                name: "Summary Structure",
                description: "Effective framework for summaries",
                examples: "Introduction-body-conclusion, topic sentences, transitions",
                characteristics: "Clear beginning-middle-end, logical flow, cohesive",
                icon: "üèóÔ∏è",
                color: "#2962FF"
            }
        ];

        // Example passages for practice
        const examplePassages = [
            {
                title: "The Importance of Reading",
                content: "Regular reading provides numerous cognitive benefits. It improves vocabulary, enhances comprehension skills, and expands knowledge across various subjects. Reading fiction develops empathy by allowing readers to experience different perspectives, while non-fiction builds factual knowledge. Studies show that individuals who read regularly tend to have better focus and concentration in other areas of life as well.",
                mainIdea: "Reading offers many cognitive benefits and skill improvements.",
                keyPoints: [
                    "Improves vocabulary and comprehension",
                    "Expands knowledge across subjects",
                    "Fiction develops empathy",
                    "Non-fiction builds factual knowledge",
                    "Improves focus and concentration"
                ],
                goodSummary: "Reading provides cognitive benefits including improved vocabulary, comprehension, knowledge expansion, empathy development through fiction, factual knowledge through non-fiction, and better focus."
            },
            {
                title: "Benefits of Exercise",
                content: "Physical exercise is essential for maintaining good health. Regular activity strengthens the cardiovascular system, improves muscle tone, and helps maintain a healthy weight. Beyond physical benefits, exercise also positively impacts mental health by reducing stress and anxiety levels. Furthermore, it can improve sleep quality and boost overall energy levels throughout the day.",
                mainIdea: "Exercise is crucial for both physical and mental health.",
                keyPoints: [
                    "Strengthens cardiovascular system",
                    "Improves muscle tone",
                    "Helps maintain healthy weight",
                    "Reduces stress and anxiety",
                    "Improves sleep quality",
                    "Boosts energy levels"
                ],
                goodSummary: "Exercise maintains physical health by strengthening the cardiovascular system, improving muscle tone, and controlling weight, while also benefiting mental health through stress reduction, better sleep, and increased energy."
            },
            {
                title: "Effects of Technology",
                content: "Modern technology has significantly transformed communication methods. While it enables instant global connectivity and access to information, it also presents challenges such as reduced face-to-face interaction and potential privacy concerns. The key is balanced usage that leverages technology's benefits while minimizing its drawbacks through mindful engagement and digital literacy education.",
                mainIdea: "Technology has transformed communication with both benefits and challenges requiring balanced use.",
                keyPoints: [
                    "Enables instant global connectivity",
                    "Provides access to information",
                    "Reduces face-to-face interaction",
                    "Raises privacy concerns",
                    "Requires balanced usage",
                    "Needs digital literacy education"
                ],
                goodSummary: "Technology revolutionizes communication through global connectivity and information access but poses challenges like reduced personal interaction and privacy issues, necessitating balanced use and digital literacy."
            }
        ];

        // Before-After examples
        const beforeAfterExamples = [
            {
                before: "The incredibly amazing and absolutely wonderful sunrise this morning was so beautiful that it literally took my breath away with its stunning array of vibrant colors including oranges, pinks, and purples that painted the entire sky in a magnificent display of natural beauty that I will never forget for as long as I live.",
                after: "The sunrise displayed vibrant colors across the sky.",
                analysis: "Removed emotional language ('incredibly amazing', 'absolutely wonderful'), eliminated redundancy ('beautiful/stunning/magnificent'), cut unnecessary details ('that I will never forget'), kept main idea."
            },
            {
                before: "In my personal opinion, which I strongly believe is correct, the government should definitely implement strict policies immediately to address climate change because it is an extremely serious problem that affects everyone in the whole world and future generations will suffer if we don't take action right now.",
                after: "The government should implement policies to address climate change.",
                analysis: "Removed personal opinion ('In my personal opinion', 'I strongly believe'), eliminated emotional language ('definitely', 'extremely serious', 'suffer'), cut unnecessary emphasis ('immediately', 'right now', 'whole world'), kept main idea."
            },
            {
                before: "The study conducted by researchers at the university, which took place over a period of three years from 2018 to 2021 and involved approximately 500 participants from various demographic backgrounds, found that regular meditation practice can potentially lead to reduced stress levels and improved mental focus based on the data collected through surveys and psychological assessments.",
                after: "A three-year study found that regular meditation can reduce stress and improve focus.",
                analysis: "Condensed details about study (combined duration and timeline), simplified participant description, removed methodological details ('surveys and psychological assessments'), kept key findings."
            }
        ];

        // Summary writing steps
        const summarySteps = [
            {
                step: 1,
                title: "Read Carefully",
                description: "Read the entire text carefully to understand the complete message and context.",
                tips: "Read multiple times if needed. Look up unfamiliar words."
            },
            {
                step: 2,
                title: "Identify Main Idea",
                description: "Determine the central message or thesis of the text.",
                tips: "Ask: 'What is this text mainly about?' Look for topic sentences."
            },
            {
                step: 3,
                title: "Find Key Points",
                description: "Identify the most important supporting ideas and evidence.",
                tips: "Look for repeated concepts, important examples, and major evidence."
            },
            {
                step: 4,
                title: "Eliminate Unnecessary Details",
                description: "Remove examples, repetitions, and minor details not essential to main idea.",
                tips: "Ask: 'Is this detail necessary to understand the main point?'"
            },
            {
                step: 5,
                title: "Paraphrase",
                description: "Restate the main idea and key points in your own words.",
                tips: "Change sentence structure, use synonyms, keep original meaning."
            },
            {
                step: 6,
                title: "Organize Logically",
                description: "Arrange ideas in a clear, logical order, usually following original structure.",
                tips: "Use transition words to connect ideas smoothly."
            },
            {
                step: 7,
                title: "Write Concisely",
                description: "Express ideas briefly while maintaining completeness.",
                tips: "Eliminate unnecessary words, be direct, avoid repetition."
            },
            {
                step: 8,
                title: "Review and Revise",
                description: "Check that summary accurately represents original and is well-written.",
                tips: "Compare with original, check for objectivity, ensure proper length."
            }
        ];

        // Common mistakes to avoid
        const commonMistakes = [
            {
                mistake: "Including Personal Opinions",
                description: "Adding your own thoughts, feelings, or judgments",
                example: "Adding 'I think' or 'This is wrong'",
                correction: "Stick to author's ideas only"
            },
            {
                mistake: "Being Too Detailed",
                description: "Including examples, statistics, or minor details",
                example: "Listing all examples from original",
                correction: "Include only essential supporting points"
            },
            {
                mistake: "Copying Instead of Paraphrasing",
                description: "Using too many of the author's original words",
                example: "Copying phrases or sentences directly",
                correction: "Use your own words and sentence structure"
            },
            {
                mistake: "Changing Meaning",
                description: "Altering the author's intended message",
                example: "Misrepresenting findings or conclusions",
                correction: "Maintain original meaning accurately"
            },
            {
                mistake: "Poor Organization",
                description: "Presenting ideas in confusing or illogical order",
                example: "Jumping between unrelated points",
                correction: "Follow logical structure, use transitions"
            },
            {
                mistake: "Wrong Length",
                description: "Summary is too long or too short",
                example: "Nearly as long as original or just one sentence",
                correction: "Aim for about 1/3 of original length"
            }
        ];

        // Writing facts
        const writingFacts = [
            "The average reading level for most newspapers is Grade 8-10!",
            "Good summaries typically reduce text length by 60-70%!",
            "The word 'summary' comes from Latin 'summarium' meaning 'a total'!",
            "Journalists use the 'inverted pyramid' method for news summaries!",
            "Executive summaries in business are typically 5-10% of report length!",
            "The ability to summarize correlates strongly with reading comprehension!",
            "Ancient scholars summarized philosophical texts to preserve knowledge!",
            "Good summarizers can identify main ideas 3x faster than average readers!"
        ];

        // Summary study concepts
        const summaryStudyConcepts = [
            {
                concept: "Active Reading",
                description: "Engaging deeply with text while reading",
                examples: "Highlighting, annotating, questioning, predicting"
            },
            {
                concept: "Note-taking Strategies",
                description: "Effective methods for capturing key information",
                examples: "Cornell method, outlining, mapping, bullet points"
            },
            {
                concept: "Text Analysis",
                description: "Breaking down text structure and elements",
                examples: "Identifying thesis, evidence, structure, tone"
            },
            {
                concept: "Revision Techniques",
                description: "Improving and polishing summaries",
                examples: "Peer review, self-checking, comparing with original"
            }
        ];

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const practicePage = document.getElementById('practicePage');
        const resultsPage = document.getElementById('resultsPage');
        const studentNameInput = document.getElementById('studentName');
        const startPracticeBtn = document.getElementById('startPractice');
        const studentNameDisplay = document.getElementById('studentNameDisplay');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const questionText = document.getElementById('questionText');
        const writingFact = document.getElementById('writingFact');
        const conceptDisplay = document.getElementById('conceptDisplay');
        const visualizationContainer = document.getElementById('visualizationContainer');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const skipQuestionBtn = document.getElementById('skipQuestion');
        const retryTopicBtn = document.getElementById('retryTopic');
        const backToHomeBtn = document.getElementById('backToHome');
        const backToTopicsBtn = document.getElementById('backToTopics');
        const viewTopicsBtn = document.getElementById('viewTopics');
        const finalScore = document.getElementById('finalScore');
        const scorePercentage = document.getElementById('scorePercentage');
        const scoreMessage = document.getElementById('scoreMessage');
        const correctAnswers = document.getElementById('correctAnswers');
        const incorrectAnswers = document.getElementById('incorrectAnswers');
        const skippedQuestions = document.getElementById('skippedQuestions');
        const highestScore = document.getElementById('highestScore');

        // Initialize the app
        function initApp() {
            initBackground();
            loadStateFromStorage();
            setupEventListeners();
            
            if (appState.studentName && appState.currentQuestions.length > 0) {
                showPracticePage();
            } else {
                showWelcomePage();
            }
        }

        // Load state from localStorage
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('ideolixGrade7SummaryWriting');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.studentName = parsed.studentName || "";
                appState.currentQuestionIndex = parsed.currentQuestionIndex || 0;
                appState.score = parsed.score || 0;
                appState.skipped = parsed.skipped || 0;
                appState.answered = parsed.answered || 0;
                appState.currentQuestions = parsed.currentQuestions || [];
                
                if (appState.currentQuestions.length === 0) {
                    initializeQuestions();
                }
            }
        }

        // Save state to localStorage
        function saveStateToStorage() {
            localStorage.setItem('ideolixGrade7SummaryWriting', JSON.stringify(appState));
        }

        // Initialize and shuffle questions
        function initializeQuestions() {
            appState.currentQuestions = [...questions];
            shuffleArray(appState.currentQuestions);
        }

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Setup event listeners
        function setupEventListeners() {
            startPracticeBtn.addEventListener('click', startPractice);
            nextQuestionBtn.addEventListener('click', nextQuestion);
            skipQuestionBtn.addEventListener('click', skipQuestion);
            retryTopicBtn.addEventListener('click', retryTopic);
            backToHomeBtn.addEventListener('click', backToHome);
            backToTopicsBtn.addEventListener('click', backToTopics);
            viewTopicsBtn.addEventListener('click', backToTopics);
            
            studentNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startPractice();
                }
            });
        }

        // Show welcome page
        function showWelcomePage() {
            welcomePage.style.display = 'flex';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'none';
            studentNameInput.value = appState.studentName || '';
        }

        // Show practice page
        function showPracticePage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'block';
            resultsPage.style.display = 'none';
            studentNameDisplay.textContent = appState.studentName;
            loadQuestion();
        }

        // Show results page
        function showResultsPage() {
            welcomePage.style.display = 'none';
            practicePage.style.display = 'none';
            resultsPage.style.display = 'block';
            
            const totalQuestions = appState.currentQuestions.length;
            const percentage = Math.round((appState.score / totalQuestions) * 100);
            
            finalScore.textContent = appState.score;
            scorePercentage.textContent = `${percentage}%`;
            correctAnswers.textContent = appState.score;
            incorrectAnswers.textContent = appState.answered - appState.score;
            skippedQuestions.textContent = appState.skipped;
            
            const highest = localStorage.getItem('ideolixGrade7SummaryWriting_highestScore') || 0;
            highestScore.textContent = Math.max(highest, appState.score);
            
            if (percentage >= 90) {
                scoreMessage.textContent = "Outstanding! You're a summary writing expert!";
            } else if (percentage >= 80) {
                scoreMessage.textContent = "Great job! You have excellent summarization skills!";
            } else if (percentage >= 70) {
                scoreMessage.textContent = "Good work! Keep practicing your summary writing!";
            } else if (percentage >= 60) {
                scoreMessage.textContent = "Not bad! Review summary techniques and try again!";
            } else {
                scoreMessage.textContent = "Keep learning! Summary writing builds essential communication and analysis skills!";
            }
        }

        // Create writing fact display
        function createWritingFact() {
            const factDiv = document.createElement('div');
            factDiv.className = 'writing-fact';
            
            factDiv.innerHTML = `<strong>Interesting Writing Fact:</strong> ${writingFacts[Math.floor(Math.random() * writingFacts.length)]}`;
            
            return factDiv;
        }

        // Create concept display
        function createConceptDisplay() {
            const display = document.createElement('div');
            display.className = 'concept-display';
            
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            const conceptIcons = {
                "basics": "üìù",
                "main_ideas": "üéØ",
                "paraphrasing": "üîÑ",
                "conciseness": "‚úÇÔ∏è",
                "objectivity": "‚öñÔ∏è",
                "organization": "üìä",
                "key_points": "üîë",
                "inclusion": "‚úì",
                "structure": "üèóÔ∏è",
                "examples": "üìö",
                "mistakes": "‚ö†Ô∏è",
                "application": "üí°",
                "advanced": "üöÄ"
            };
            
            let conceptName = "Basics";
            let conceptIcon = "üìù";
            
            if (question.type.includes("basics")) {
                conceptName = "Summary Basics";
                conceptIcon = conceptIcons.basics;
            } else if (question.type.includes("main_ideas")) {
                conceptName = "Main Ideas";
                conceptIcon = conceptIcons.main_ideas;
            } else if (question.type.includes("paraphrasing")) {
                conceptName = "Paraphrasing";
                conceptIcon = conceptIcons.paraphrasing;
            } else if (question.type.includes("conciseness")) {
                conceptName = "Conciseness";
                conceptIcon = conceptIcons.conciseness;
            } else if (question.type.includes("objectivity")) {
                conceptName = "Objectivity";
                conceptIcon = conceptIcons.objectivity;
            } else if (question.type.includes("organization")) {
                conceptName = "Organization";
                conceptIcon = conceptIcons.organization;
            } else if (question.type.includes("key_points")) {
                conceptName = "Key Points";
                conceptIcon = conceptIcons.key_points;
            } else if (question.type.includes("inclusion")) {
                conceptName = "Inclusion/Exclusion";
                conceptIcon = conceptIcons.inclusion;
            } else if (question.type.includes("structure")) {
                conceptName = "Summary Structure";
                conceptIcon = conceptIcons.structure;
            } else if (question.type.includes("examples")) {
                conceptName = "Examples";
                conceptIcon = conceptIcons.examples;
            } else if (question.type.includes("mistakes")) {
                conceptName = "Common Mistakes";
                conceptIcon = conceptIcons.mistakes;
            } else if (question.type.includes("application")) {
                conceptName = "Application";
                conceptIcon = conceptIcons.application;
            } else if (question.type.includes("advanced")) {
                conceptName = "Advanced Skills";
                conceptIcon = conceptIcons.advanced;
            }
            
            const conceptBox = document.createElement('div');
            conceptBox.className = 'concept-box grow';
            conceptBox.innerHTML = `
                <div class="concept-icon">${conceptIcon}</div>
                <div class="concept-text">${conceptName.toUpperCase()}</div>
            `;
            
            const label = document.createElement('div');
            label.className = 'concept-label';
            
            if (question.type.includes("basics")) {
                label.textContent = "Understanding what summaries are and their purpose";
            } else if (question.type.includes("main_ideas")) {
                label.textContent = "Identifying central messages and thesis statements";
            } else if (question.type.includes("paraphrasing")) {
                label.textContent = "Restating ideas in original words while keeping meaning";
            } else if (question.type.includes("conciseness")) {
                label.textContent = "Being brief while comprehensive, eliminating redundancy";
            } else if (question.type.includes("objectivity")) {
                label.textContent = "Presenting facts without personal opinions or bias";
            } else if (question.type.includes("organization")) {
                label.textContent = "Structuring summaries logically with smooth flow";
            } else if (question.type.includes("key_points")) {
                label.textContent = "Extracting important supporting ideas and evidence";
            } else if (question.type.includes("inclusion")) {
                label.textContent = "Deciding what to include and exclude from summaries";
            } else if (question.type.includes("structure")) {
                label.textContent = "Effective framework and organization for summaries";
            } else if (question.type.includes("examples")) {
                label.textContent = "Practical examples of before/after summarization";
            } else if (question.type.includes("mistakes")) {
                label.textContent = "Common errors to avoid in summary writing";
            } else if (question.type.includes("application")) {
                label.textContent = "Applying summary skills to actual texts";
            } else if (question.type.includes("advanced")) {
                label.textContent = "Advanced techniques like synthesizing multiple sources";
            }
            
            display.appendChild(conceptBox);
            display.appendChild(label);
            
            return display;
        }

        // Create summary writing visualization
        function createSummaryVisualization() {
            const vizDiv = document.createElement('div');
            vizDiv.className = 'visualization-container';
            
            const currentQuestion = appState.currentQuestions[appState.currentQuestionIndex];
            
            vizDiv.innerHTML = `
                <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-blue);">Summary Writing Explorer</h3>
                
                <div class="summary-display">
                    <div class="display-title">Current Summary Concept</div>
                    <div class="summary-container">
                        <div class="summary-scenario">${currentQuestion.question}</div>
                        <div class="summary-highlight">
                            <strong>Key Concept:</strong> <span class="highlight-text">${getSummaryConcept(currentQuestion.type)}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Interactive Summary Practice -->
                <div class="summary-canvas">
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 1.5rem; margin-bottom: 20px; color: var(--secondary-teal);">Interactive Summary Practice</div>
                        
                        <!-- Example Passage -->
                        <div class="example-passage">
                            <div class="passage-title">Example Passage:</div>
                            <div class="passage-content">
                                "Regular physical activity is essential for maintaining overall health and well-being. Exercise strengthens the cardiovascular system, improves muscle tone, and helps control body weight. Additionally, it has significant mental health benefits, including stress reduction and improved mood. Studies consistently show that active individuals tend to have better sleep patterns and higher energy levels throughout the day."
                            </div>
                            <div style="margin-top: 15px;">
                                <button class="canvas-btn" onclick="practiceMainIdea()">Find Main Idea</button>
                                <button class="canvas-btn" onclick="practiceKeyPoints()">Identify Key Points</button>
                                <button class="canvas-btn" onclick="practiceParaphrase()">Practice Paraphrasing</button>
                                <button class="canvas-btn" onclick="practiceConciseness()">Make It Concise</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-bottom: 20px; color: var(--text-secondary); font-size: 0.9rem;">
                    Interactive Summary Practice - Click buttons to practice different summary skills!
                </div>
                
                <div class="skills-grid">
                    ${summarySkills.map(skill => `
                        <div class="skill-card ${skill.name.toLowerCase().replace(/ /g, '-')} ${skill.name.toLowerCase().replace(/ /g, '-')}-glow" style="border-color: ${skill.color}" onclick="showSkillDemo('${skill.name}')">
                            <div class="skill-icon writing-glow" style="color: ${skill.color}">${skill.icon}</div>
                            <div class="skill-title" style="color: ${skill.color}">${skill.name}</div>
                            <div class="skill-description">${skill.description}</div>
                            <div class="skill-examples">
                                <strong>Examples:</strong> ${skill.examples}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <!-- Before-After Examples -->
                <div style="background: var(--dark-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <div class="display-title">Before & After: Summary Examples</div>
                    ${beforeAfterExamples.map((example, index) => `
                        <div class="before-after" style="animation-delay: ${index * 0.2}s">
                            <div class="before-example">
                                <div class="example-title">Before (Original/Wordy)</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5;">${example.before}</div>
                            </div>
                            <div class="after-example">
                                <div class="example-title">After (Good Summary)</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5;">${example.after}</div>
                            </div>
                        </div>
                        <div style="background: var(--dark-surface); padding: 10px; border-radius: 6px; margin: 10px 0; font-size: 0.9rem; color: var(--text-muted);">
                            <strong>Analysis:</strong> ${example.analysis}
                        </div>
                    `).join('')}
                </div>
                
                <!-- Step-by-Step Process -->
                <div class="process-steps">
                    <div class="process-title">8-Step Summary Writing Process</div>
                    ${summarySteps.map((step, index) => `
                        <div class="process-step" style="animation-delay: ${index * 0.1}s">
                            <div class="step-icon">${step.step}</div>
                            <div class="step-content">
                                <div class="step-heading">${step.title}</div>
                                <div style="color: var(--text-secondary); margin-bottom: 5px;">${step.description}</div>
                                <div style="font-size: 0.9rem; color: var(--accent-amber);">
                                    <strong>Tip:</strong> ${step.tips}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <!-- Common Mistakes -->
                <div class="mistakes-container">
                    <div class="mistakes-title">Common Mistakes to Avoid</div>
                    ${commonMistakes.map((mistake, index) => `
                        <div class="mistake-item" style="animation-delay: ${index * 0.1}s">
                            <div class="mistake-icon">‚ùå</div>
                            <div style="flex: 1;">
                                <div class="mistake-heading">${mistake.mistake}</div>
                                <div style="color: var(--text-secondary); margin-bottom: 5px;">${mistake.description}</div>
                                <div style="background: var(--dark-card); padding: 8px; border-radius: 4px; margin: 5px 0; font-size: 0.9rem;">
                                    <strong>Example:</strong> ${mistake.example}
                                </div>
                                <div style="font-size: 0.9rem; color: var(--accent-green);">
                                    <strong>Correction:</strong> ${mistake.correction}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>Skill</th>
                            <th>Purpose</th>
                            <th>Key Question</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${summarySkills.slice(0, 4).map(skill => `
                            <tr>
                                <td style="font-weight: bold; color: ${skill.color};">${skill.name}</td>
                                <td>${skill.description}</td>
                                <td style="color: var(--accent-purple);">${getSkillQuestion(skill.name)}</td>
                                <td style="font-style: italic;">${skill.examples.split(',')[0]}...</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="skills-container summary-glow">
                    <div class="skills-title">Essential Summary Skills</div>
                    <div class="skills-inner-grid">
                        ${summarySkills.slice(0, 4).map(skill => `
                            <div class="skill-detail-card">
                                <div class="skill-detail-icon">${skill.icon}</div>
                                <div class="skill-detail-type">${skill.name}</div>
                                <div class="skill-detail-steps">
                                    <strong>Purpose:</strong> ${skill.description}<br>
                                    <strong>Key Feature:</strong> ${skill.characteristics}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="paraphrasing-container idea-glow">
                    <div class="paraphrasing-title">Paraphrasing Techniques</div>
                    <div class="paraphrasing-grid">
                        ${[
                            {
                                type: "Use Synonyms",
                                steps: "Replace words with similar meanings",
                                example: "'big' ‚Üí 'large', 'important' ‚Üí 'significant'"
                            },
                            {
                                type: "Change Sentence Structure",
                                steps: "Alter word order and sentence patterns",
                                example: "Active to passive, rearrange clauses"
                            },
                            {
                                type: "Combine/Split Sentences",
                                steps: "Merge related ideas or break long sentences",
                                example: "Two short sentences ‚Üí one compound sentence"
                            },
                            {
                                type: "Simplify Language",
                                steps: "Use simpler words and clearer expressions",
                                example: "'utilize' ‚Üí 'use', 'commence' ‚Üí 'begin'"
                            }
                        ].map(tech => `
                            <div class="paraphrasing-card">
                                <div class="paraphrasing-icon">üîÑ</div>
                                <div class="paraphrasing-type">${tech.type}</div>
                                <div class="paraphrasing-steps">
                                    <strong>How:</strong> ${tech.steps}<br>
                                    <strong>Example:</strong> ${tech.example}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="conciseness-container paraphrase-glow">
                    <div class="conciseness-title">Conciseness Strategies</div>
                    <div class="conciseness-grid">
                        ${[
                            {
                                type: "Eliminate Redundancy",
                                steps: "Remove repeated ideas and unnecessary words",
                                example: "'free gift' ‚Üí 'gift', 'basic fundamentals' ‚Üí 'fundamentals'"
                            },
                            {
                                type: "Use Strong Verbs",
                                steps: "Replace weak verb phrases with single strong verbs",
                                example: "'make a decision' ‚Üí 'decide', 'give consideration to' ‚Üí 'consider'"
                            },
                            {
                                type: "Avoid Wordy Phrases",
                                steps: "Replace long phrases with shorter alternatives",
                                example: "'in order to' ‚Üí 'to', 'due to the fact that' ‚Üí 'because'"
                            },
                            {
                                type: "Be Direct",
                                steps: "Get straight to the point without unnecessary introductions",
                                example: "Remove 'It is important to note that...'"
                            }
                        ].map(strategy => `
                            <div class="conciseness-card">
                                <div class="conciseness-icon">‚úÇÔ∏è</div>
                                <div class="conciseness-type">${strategy.type}</div>
                                <div class="conciseness-steps">
                                    <strong>How:</strong> ${strategy.steps}<br>
                                    <strong>Example:</strong> ${strategy.example}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="builder-container">
                    <div class="builder-title">Interactive Summary Builder</div>
                    <div class="builder-controls">
                        <textarea class="builder-input" id="summaryInput" placeholder="Paste or type a passage here to practice summarizing... Example: 'Regular exercise provides numerous health benefits. It strengthens the heart, improves circulation, and helps maintain healthy body weight.'"></textarea>
                        <div class="builder-buttons">
                            <button class="builder-btn" onclick="analyzeForSummary()">Analyze Passage</button>
                            <button class="builder-btn" onclick="generateSummary()">Generate Summary</button>
                            <button class="builder-btn" onclick="getSummaryChallenge()">Get Challenge</button>
                            <button class="builder-btn" onclick="clearSummaryBuilder()">Clear</button>
                        </div>
                    </div>
                    <div class="builder-display" id="builderDisplay">
                        Your summary analysis will appear here...
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-purple);">
                    <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 10px;">Quick Summary Writing Guide:</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>1. Read First:</strong> Understand the complete text before summarizing<br>
                        <strong>2. Find Main Idea:</strong> What is the text mainly about?<br>
                        <strong>3. Identify Key Points:</strong> What are the most important supporting ideas?<br>
                        <strong>4. Paraphrase:</strong> Use your own words, keep original meaning<br>
                        <strong>5. Be Concise:</strong> Eliminate unnecessary words and details<br>
                        <strong>6. Be Objective:</strong> No personal opinions, just facts<br>
                        <strong>7. Organize:</strong> Logical order, smooth transitions<br>
                        <strong>8. Check Length:</strong> About 1/3 of original text<br>
                        <strong>9. Review:</strong> Compare with original, check accuracy<br>
                        <strong>10. Practice:</strong> Summarize different types of texts regularly
                    </div>
                </div>
                
                <div class="writing-study-container">
                    <div class="display-title">Summary Writing Study Strategies</div>
                    <div class="writing-study-grid">
                        ${summaryStudyConcepts.map(concept => `
                            <div class="study-card">
                                <div class="study-icon">üìö</div>
                                <div class="study-concept">${concept.concept}</div>
                                <div class="study-description">
                                    <strong>Description:</strong> ${concept.description}<br>
                                    <strong>Examples:</strong> ${concept.examples}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="solution-container">
                    <div class="display-title">Step-by-Step Learning Path</div>
                    <div class="solution-steps" id="solutionSteps">
                        ${generateLearningPath(currentQuestion)}
                    </div>
                </div>
                
                <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid var(--secondary-teal);">
                    <div style="color: var(--secondary-teal); font-weight: bold; margin-bottom: 10px; text-align: center;">Summary Writing Tips</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem; text-align: center;">
                        <strong>Read Actively:</strong> Highlight, annotate, ask questions as you read<br>
                        <strong>Practice Daily:</strong> Summarize news articles, book chapters, or lectures<br>
                        <strong>Use Templates:</strong> Follow structure: Main Idea ‚Üí Key Points ‚Üí Conclusion<br>
                        <strong>Time Yourself:</strong> Practice writing summaries within time limits<br>
                        <strong>Get Feedback:</strong> Share summaries with teachers or peers for improvement<br>
                        <strong>Vary Texts:</strong> Practice with different genres (news, fiction, academic)<br>
                        <em>Mastering summary writing improves reading comprehension, critical thinking, and communication skills valuable in all subjects and careers!</em>
                    </div>
                </div>
            `;
            
            return vizDiv;
        }

        // Helper functions
        function getSummaryConcept(typeString) {
            const conceptMap = {
                "basics": "Summary Basics - Understanding what summaries are, their purpose, and characteristics",
                "main_ideas": "Main Idea Identification - Finding central messages, thesis statements, core concepts",
                "paraphrasing": "Paraphrasing Skills - Restating ideas in original words while maintaining meaning",
                "conciseness": "Conciseness - Being brief while comprehensive, eliminating redundancy",
                "objectivity": "Objectivity - Presenting facts without personal opinions or bias",
                "organization": "Organization - Structuring summaries logically with smooth transitions",
                "key_points": "Key Point Extraction - Identifying important supporting ideas and evidence",
                "inclusion": "Inclusion/Exclusion - Deciding what to include and exclude from summaries",
                "structure": "Summary Structure - Effective framework and organization for summaries",
                "examples": "Examples - Practical before/after examples of summarization",
                "mistakes": "Common Mistakes - Errors to avoid in summary writing",
                "application": "Application - Applying summary skills to actual texts",
                "advanced": "Advanced Skills - Techniques like synthesizing multiple sources"
            };
            
            return conceptMap[typeString] || "Summary Writing";
        }

        function getSkillQuestion(skillName) {
            const questionMap = {
                "Main Idea Identification": "What is this mainly about?",
                "Paraphrasing": "How can I say this differently?",
                "Conciseness": "How can I say this more briefly?",
                "Objectivity": "Am I including only facts?",
                "Organization": "Does this flow logically?",
                "Key Point Extraction": "What supports the main idea?",
                "Avoiding Plagiarism": "Are these my own words?",
                "Summary Structure": "Is this well-organized?"
            };
            return questionMap[skillName] || "How does this work?";
        }

        function generateLearningPath(question) {
            let steps = [];
            
            if (question.type.includes("basics")) {
                steps = [
                    "Step 1: Understand what a summary is (concise restatement)",
                    "Step 2: Learn the purpose of summaries (capture essential information)",
                    "Step 3: Know the characteristics of good summaries (concise, objective, accurate)",
                    "Step 4: Understand appropriate length (about 1/3 of original)",
                    "Step 5: Apply these concepts to identify good summaries"
                ];
            } else if (question.type.includes("main_ideas")) {
                steps = [
                    "Step 1: Read the entire text carefully",
                    "Step 2: Look for the central message or thesis",
                    "Step 3: Check topic sentences (often first/last in paragraphs)",
                    "Step 4: Identify repeated concepts or ideas",
                    "Step 5: Formulate the main idea in your own words"
                ];
            } else if (question.type.includes("paraphrasing")) {
                steps = [
                    "Step 1: Understand the original text completely",
                    "Step 2: Identify key terms and concepts",
                    "Step 3: Find synonyms for important words",
                    "Step 4: Change sentence structure and word order",
                    "Step 5: Ensure original meaning is preserved"
                ];
            } else if (question.type.includes("conciseness")) {
                steps = [
                    "Step 1: Identify redundant words or phrases",
                    "Step 2: Eliminate unnecessary adjectives/adverbs",
                    "Step 3: Replace wordy phrases with concise alternatives",
                    "Step 4: Combine related ideas into fewer sentences",
                    "Step 5: Ensure all essential information remains"
                ];
            } else {
                steps = [
                    "Step 1: Read the question carefully",
                    "Step 2: Identify which summary skill is being tested",
                    "Step 3: Recall the key principles of that skill",
                    "Step 4: Apply the principles to the specific example",
                    "Step 5: Verify your answer follows summary writing best practices"
                ];
            }
            
            return steps.map((step, index) => `
                <div class="summary-step summary-reveal" style="animation-delay: ${index * 0.1}s">
                    <span class="step-number">${index + 1}</span>
                    <span class="step-description">${step}</span>
                    ${index === steps.length - 1 ? `
                        <div style="margin-top: 10px; padding: 10px; background: rgba(170, 0, 255, 0.05); border-radius: 6px;">
                            <strong>Correct Answer:</strong> ${question.options[question.answer.charCodeAt(0) - 65]}
                        </div>
                        <div style="margin-top: 10px; font-style: italic; color: var(--text-secondary);">
                            ${question.explanation}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Interactive practice functions
        window.practiceMainIdea = function() {
            const builderDisplay = document.getElementById('builderDisplay');
            if (!builderDisplay) return;
            
            builderDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.3rem; color: var(--primary-blue); margin-bottom: 15px;">Practice: Finding Main Idea</div>
                    
                    <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin: 10px 0; border: 2px solid var(--secondary-teal);">
                        <div style="font-weight: bold; margin-bottom: 10px; color: var(--secondary-teal);">Passage:</div>
                        <div style="color: var(--text-secondary); line-height: 1.6;">
                            "Regular physical activity is essential for maintaining overall health and well-being. Exercise strengthens the cardiovascular system, improves muscle tone, and helps control body weight. Additionally, it has significant mental health benefits, including stress reduction and improved mood. Studies consistently show that active individuals tend to have better sleep patterns and higher energy levels throughout the day."
                        </div>
                    </div>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <div style="color: var(--secondary-teal); font-weight: bold; margin-bottom: 10px;">Main Idea Analysis:</div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Step 1: Look for topic sentence</div>
                            <div style="color: var(--text-secondary);">First sentence: "Regular physical activity is essential for maintaining overall health and well-being."</div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Step 2: Identify repeated concept</div>
                            <div style="color: var(--text-secondary);">Repeated concept: benefits/importance of exercise/activity</div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Step 3: Determine central message</div>
                            <div style="color: var(--text-secondary);">Central message: Exercise is important for health</div>
                        </div>
                        
                        <div style="background: rgba(0, 191, 165, 0.1); padding: 15px; border-radius: 6px; margin: 15px 0; border: 2px solid var(--secondary-teal);">
                            <div style="font-weight: bold; color: var(--secondary-teal); margin-bottom: 5px;">Main Idea Identified:</div>
                            <div style="font-size: 1.1rem; color: var(--text-primary);">Regular exercise is essential for maintaining physical and mental health.</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Tip:</strong> The main idea is often stated in the first or last sentence of a paragraph.
                    </div>
                </div>
            `;
        };

        window.practiceKeyPoints = function() {
            const builderDisplay = document.getElementById('builderDisplay');
            if (!builderDisplay) return;
            
            builderDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.3rem; color: var(--primary-blue); margin-bottom: 15px;">Practice: Identifying Key Points</div>
                    
                    <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin: 10px 0; border: 2px solid var(--accent-orange);">
                        <div style="font-weight: bold; margin-bottom: 10px; color: var(--accent-orange);">Passage:</div>
                        <div style="color: var(--text-secondary); line-height: 1.6;">
                            "Regular physical activity is essential for maintaining overall health and well-being. Exercise strengthens the cardiovascular system, improves muscle tone, and helps control body weight. Additionally, it has significant mental health benefits, including stress reduction and improved mood. Studies consistently show that active individuals tend to have better sleep patterns and higher energy levels throughout the day."
                        </div>
                    </div>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <div style="color: var(--accent-orange); font-weight: bold; margin-bottom: 10px;">Key Points Analysis:</div>
                        
                        <div class="key-points">
                            <div class="key-points-title">Key Supporting Points Found:</div>
                            ${[
                                "Strengthens cardiovascular system",
                                "Improves muscle tone",
                                "Helps control body weight",
                                "Reduces stress (mental health benefit)",
                                "Improves mood (mental health benefit)",
                                "Leads to better sleep patterns",
                                "Increases energy levels"
                            ].map((point, index) => `
                                <div class="key-point-item" style="animation-delay: ${index * 0.1}s">
                                    <div class="key-point-icon">‚úì</div>
                                    <div style="flex: 1;">${point}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="background: rgba(255, 109, 0, 0.1); padding: 15px; border-radius: 6px; margin: 15px 0; border: 2px solid var(--accent-orange);">
                            <div style="font-weight: bold; color: var(--accent-orange); margin-bottom: 5px;">Key Points Summary:</div>
                            <div style="color: var(--text-primary);">Exercise provides physical benefits (cardiovascular strength, muscle tone, weight control) and mental benefits (stress reduction, mood improvement, better sleep, more energy).</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Tip:</strong> Key points are the important supporting ideas that explain or prove the main idea.
                    </div>
                </div>
            `;
        };

        window.practiceParaphrase = function() {
            const builderDisplay = document.getElementById('builderDisplay');
            if (!builderDisplay) return;
            
            builderDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.3rem; color: var(--primary-blue); margin-bottom: 15px;">Practice: Paraphrasing</div>
                    
                    <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin: 10px 0; border: 2px solid var(--accent-amber);">
                        <div style="font-weight: bold; margin-bottom: 10px; color: var(--accent-amber);">Original Sentence:</div>
                        <div style="color: var(--text-secondary); line-height: 1.6; font-style: italic;">
                            "Exercise strengthens the cardiovascular system, improves muscle tone, and helps control body weight."
                        </div>
                    </div>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <div style="color: var(--accent-amber); font-weight: bold; margin-bottom: 10px;">Paraphrasing Techniques:</div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Step 1: Identify key terms</div>
                            <div style="color: var(--text-secondary);">Key terms: exercise, strengthens, cardiovascular system, improves, muscle tone, helps control, body weight</div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Step 2: Find synonyms</div>
                            <div style="color: var(--text-secondary);">
                                exercise ‚Üí physical activity<br>
                                strengthens ‚Üí fortifies, enhances<br>
                                cardiovascular system ‚Üí heart and blood vessels<br>
                                improves ‚Üí enhances, boosts<br>
                                muscle tone ‚Üí muscular condition<br>
                                helps control ‚Üí aids in managing<br>
                                body weight ‚Üí weight
                            </div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Step 3: Change sentence structure</div>
                            <div style="color: var(--text-secondary);">Original lists three benefits. Could combine or reorder.</div>
                        </div>
                        
                        <div style="background: rgba(255, 171, 0, 0.1); padding: 15px; border-radius: 6px; margin: 15px 0; border: 2px solid var(--accent-amber);">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Good Paraphrases:</div>
                            <div style="color: var(--text-primary); margin-bottom: 10px;">1. Physical activity enhances heart health, boosts muscular condition, and aids in weight management.</div>
                            <div style="color: var(--text-primary);">2. Regular exercise provides three key benefits: fortifying the heart and blood vessels, improving muscle tone, and helping manage weight.</div>
                        </div>
                        
                        <div style="background: rgba(255, 64, 129, 0.1); padding: 15px; border-radius: 6px; margin: 15px 0; border: 2px solid var(--accent-pink);">
                            <div style="font-weight: bold; color: var(--accent-pink); margin-bottom: 5px;">Poor Paraphrase (too similar):</div>
                            <div style="color: var(--text-primary); font-style: italic;">Exercise strengthens the cardiovascular system, improves muscle tone, and helps with body weight control.</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 5px;">This is too close to the original - needs more word and structure changes.</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Tip:</strong> Good paraphrasing changes both vocabulary AND sentence structure while keeping the original meaning.
                    </div>
                </div>
            `;
        };

        window.practiceConciseness = function() {
            const builderDisplay = document.getElementById('builderDisplay');
            if (!builderDisplay) return;
            
            builderDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.3rem; color: var(--primary-blue); margin-bottom: 15px;">Practice: Making Writing Concise</div>
                    
                    <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin: 10px 0; border: 2px solid var(--accent-purple);">
                        <div style="font-weight: bold; margin-bottom: 10px; color: var(--accent-purple);">Wordy Sentence:</div>
                        <div style="color: var(--text-secondary); line-height: 1.6; font-style: italic;">
                            "It is absolutely essential and critically important for individuals to engage in regular physical activity and exercise on a consistent basis in order to maintain and preserve their overall health and well-being."
                        </div>
                    </div>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 10px;">Conciseness Strategies:</div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-purple); margin-bottom: 5px;">Step 1: Identify redundant phrases</div>
                            <div style="color: var(--text-secondary);">
                                "absolutely essential and critically important" ‚Üí redundant<br>
                                "engage in regular physical activity and exercise" ‚Üí similar concepts<br>
                                "on a consistent basis" ‚Üí implied in "regular"<br>
                                "maintain and preserve" ‚Üí redundant<br>
                                "overall health and well-being" ‚Üí could be simplified
                            </div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-purple); margin-bottom: 5px;">Step 2: Eliminate unnecessary words</div>
                            <div style="color: var(--text-secondary);">
                                Remove: "It is", "absolutely", "critically", "and exercise", "on a consistent basis", "and preserve", "overall", "and well-being"
                            </div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-purple); margin-bottom: 5px;">Step 3: Use stronger, more direct language</div>
                            <div style="color: var(--text-secondary);">
                                "engage in" ‚Üí simpler: "do" or just "exercise"<br>
                                "in order to" ‚Üí "to"
                            </div>
                        </div>
                        
                        <div style="background: rgba(170, 0, 255, 0.1); padding: 15px; border-radius: 6px; margin: 15px 0; border: 2px solid var(--accent-purple);">
                            <div style="font-weight: bold; color: var(--accent-purple); margin-bottom: 5px;">Concise Version:</div>
                            <div style="font-size: 1.1rem; color: var(--text-primary);">Regular exercise is essential for maintaining health.</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 5px;">Original: 30 words ‚Üí Concise: 6 words (80% reduction)</div>
                        </div>
                        
                        <div style="background: rgba(170, 0, 255, 0.05); padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <div style="font-weight: bold; color: var(--accent-purple); margin-bottom: 5px;">Alternative concise versions:</div>
                            <div style="color: var(--text-primary); margin-bottom: 5px;">‚Ä¢ Exercise regularly to stay healthy.</div>
                            <div style="color: var(--text-primary);">‚Ä¢ Regular physical activity maintains health.</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Tip:</strong> Read your writing aloud - if you stumble over wordy sections, they probably need simplification.
                    </div>
                </div>
            `;
        };

        // Summary builder functions
        window.analyzeForSummary = function() {
            const summaryInput = document.getElementById('summaryInput');
            const builderDisplay = document.getElementById('builderDisplay');
            
            if (!summaryInput || !builderDisplay) return;
            
            const passage = summaryInput.value.trim();
            
            if (!passage) {
                builderDisplay.innerHTML = "Please enter a passage to analyze.";
                return;
            }
            
            // Simple analysis (in a real app, this would be more sophisticated)
            const sentences = passage.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const words = passage.split(/\s+/).length;
            
            builderDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.3rem; color: var(--primary-blue); margin-bottom: 15px;">Passage Analysis</div>
                    
                    <div style="background: var(--dark-card); padding: 15px; border-radius: 8px; margin: 10px 0; border: 2px solid var(--accent-purple);">
                        <div style="font-weight: bold; margin-bottom: 10px; color: var(--accent-purple);">Your Passage:</div>
                        <div style="color: var(--text-secondary); line-height: 1.6; max-height: 200px; overflow-y: auto;">
                            "${passage}"
                        </div>
                    </div>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 10px;">Analysis Results:</div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0;">
                            <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: var(--secondary-teal);">${words}</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">Words</div>
                            </div>
                            
                            <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: var(--secondary-teal);">${sentences.length}</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">Sentences</div>
                            </div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Suggested Summary Length:</div>
                            <div style="color: var(--text-primary);">Aim for ${Math.round(words/3)}-${Math.round(words/2)} words (about 1/3 of original)</div>
                        </div>
                        
                        <div style="background: var(--dark-surface); padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <div style="font-weight: bold; color: var(--accent-amber); margin-bottom: 5px;">Summary Writing Steps:</div>
                            <div style="color: var(--text-secondary);">
                                1. Read the passage carefully<br>
                                2. Identify the main idea<br>
                                3. Find key supporting points<br>
                                4. Paraphrase in your own words<br>
                                5. Organize logically<br>
                                6. Check length and accuracy
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Tip:</strong> Look for the first and last sentences of paragraphs - they often contain main ideas.
                    </div>
                </div>
            `;
        };

        window.generateSummary = function() {
            const summaryInput = document.getElementById('summaryInput');
            const builderDisplay = document.getElementById('builderDisplay');
            
            if (!summaryInput || !builderDisplay) return;
            
            const passage = summaryInput.value.trim();
            
            if (!passage) {
                builderDisplay.innerHTML = "Please enter a passage to summarize.";
                return;
            }
            
            // This is a simplified example - in a real app, this would use more sophisticated algorithms
            const exampleSummaries = [
                "This passage discusses the importance of regular exercise for maintaining both physical and mental health, highlighting benefits like cardiovascular strength, weight control, stress reduction, and improved energy levels.",
                "The text emphasizes that physical activity is essential for health, providing benefits such as stronger heart function, better muscle tone, weight management, reduced stress, mood improvement, and increased daily energy.",
                "Regular exercise is crucial for overall wellbeing, offering physical advantages like enhanced cardiovascular health and weight control, along with mental benefits including stress relief and better sleep patterns."
            ];
            
            const randomSummary = exampleSummaries[Math.floor(Math.random() * exampleSummaries.length)];
            
            builderDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.3rem; color: var(--primary-blue); margin-bottom: 15px;">Generated Summary Example</div>
                    
                    <div class="text-comparison">
                        <div class="original-text">
                            <div class="comparison-title">Original Passage</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5; max-height: 200px; overflow-y: auto;">
                                ${passage.substring(0, 300)}${passage.length > 300 ? '...' : ''}
                            </div>
                        </div>
                        
                        <div class="summary-text">
                            <div class="comparison-title">Example Summary</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5;">
                                ${randomSummary}
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: left; margin-top: 20px;">
                        <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 10px;">Why This is a Good Summary:</div>
                        
                        <div class="key-points">
                            ${[
                                "Captures the main idea (importance of exercise for health)",
                                "Includes key supporting points (physical and mental benefits)",
                                "Uses paraphrasing (original wording changed)",
                                "Is concise (much shorter than original)",
                                "Maintains objectivity (no personal opinions)",
                                "Has logical organization (clear structure)"
                            ].map((point, index) => `
                                <div class="key-point-item" style="animation-delay: ${index * 0.1}s">
                                    <div class="key-point-icon">‚úì</div>
                                    <div style="flex: 1;">${point}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 10px; background: var(--dark-surface); border-radius: 6px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Remember:</strong> This is an example. Your summary should be in YOUR own words based on YOUR analysis of the passage.
                    </div>
                </div>
            `;
        };

        window.getSummaryChallenge = function() {
            const summaryInput = document.getElementById('summaryInput');
            
            if (!summaryInput) return;
            
            const challenges = [
                "Summarize this: 'Reading regularly enhances cognitive abilities, expands vocabulary, improves focus, and increases knowledge across various subjects. It also develops empathy through exposure to diverse perspectives in fiction while building factual understanding through non-fiction.'",
                "Create a summary: 'Effective communication requires clear expression, active listening, and appropriate nonverbal cues. It involves both verbal and written skills, with different strategies needed for various contexts like academic, professional, and personal situations.'",
                "Write a concise summary: 'Climate change poses significant global challenges including rising temperatures, extreme weather events, sea level rise, and ecosystem disruptions. Addressing it requires international cooperation, policy changes, technological innovation, and individual action to reduce carbon emissions.'",
                "Summarize this passage: 'Time management skills are essential for academic success. They involve prioritizing tasks, setting realistic goals, avoiding procrastination, and creating structured schedules. Effective time management reduces stress, improves productivity, and creates balance between academic and personal life.'"
            ];
            
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            summaryInput.value = randomChallenge;
            summaryInput.focus();
        };

        window.clearSummaryBuilder = function() {
            const summaryInput = document.getElementById('summaryInput');
            const builderDisplay = document.getElementById('builderDisplay');
            
            if (summaryInput) summaryInput.value = '';
            if (builderDisplay) {
                builderDisplay.innerHTML = "Your summary analysis will appear here...";
            }
        };

        window.showSkillDemo = function(skillName) {
            const builderDisplay = document.getElementById('builderDisplay');
            
            const skill = summarySkills.find(s => s.name === skillName);
            if (!skill || !builderDisplay) return;
            
            builderDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; color: ${skill.color}; margin-bottom: 15px;">
                        ${skill.icon} ${skill.name} Details
                    </div>
                    
                    <div style="background: rgba(${parseInt(skill.color.slice(1,3), 16)}, ${parseInt(skill.color.slice(3,5), 16)}, ${parseInt(skill.color.slice(5,7), 16)}, 0.1); padding: 20px; border-radius: 8px; margin: 15px 0; border: 2px solid ${skill.color};">
                        <div style="font-weight: bold; margin-bottom: 10px; color: ${skill.color};">Definition:</div>
                        <div style="margin-bottom: 15px;">${skill.description}</div>
                        
                        <div style="font-weight: bold; margin-bottom: 10px; color: ${skill.color};">Key Characteristics:</div>
                        <div style="margin-bottom: 15px;">${skill.characteristics}</div>
                        
                        <div style="font-weight: bold; margin-bottom: 10px; color: ${skill.color};">Examples:</div>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                            ${skill.examples.split(', ').map(example => `
                                <div style="padding: 8px 12px; background: var(--dark-surface); border-radius: 20px; border: 1px solid ${skill.color}; color: ${skill.color};">
                                    ${example}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong>Practice Tip:</strong> ${getSkillPracticeTip(skillName)}
                    </div>
                </div>
            `;
        };

        function getSkillPracticeTip(skillName) {
            const tips = {
                "Main Idea Identification": "Practice with news articles - read and immediately state the main idea in one sentence.",
                "Paraphrasing": "Take a sentence and rewrite it three different ways without changing the meaning.",
                "Conciseness": "Take a paragraph and try to reduce it by 50% without losing key information.",
                "Objectivity": "Read opinion pieces and rewrite them as neutral, factual reports.",
                "Organization": "Create outline templates and practice fitting information into them.",
                "Key Point Extraction": "Highlight only the most important sentences in an article.",
                "Avoiding Plagiarism": "Practice summarizing without looking at the original text.",
                "Summary Structure": "Use the formula: Main Idea + 3 Key Points + Conclusion"
            };
            return tips[skillName] || "Practice this skill with different types of texts regularly.";
        }

        // Load current question
        function loadQuestion() {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            
            progressText.textContent = `Question ${appState.currentQuestionIndex + 1} of ${appState.currentQuestions.length}`;
            progressFill.style.width = `${((appState.currentQuestionIndex + 1) / appState.currentQuestions.length) * 100}%`;
            
            questionText.textContent = question.question;
            
            writingFact.innerHTML = '';
            conceptDisplay.innerHTML = '';
            visualizationContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            nextQuestionBtn.disabled = true;
            
            writingFact.appendChild(createWritingFact());
            conceptDisplay.appendChild(createConceptDisplay());
            visualizationContainer.appendChild(createSummaryVisualization());
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, index));
                optionsContainer.appendChild(optionElement);
            });
        }

        // Handle option selection
        function selectOption(optionElement, selectedIndex) {
            const question = appState.currentQuestions[appState.currentQuestionIndex];
            const correctIndex = question.answer.charCodeAt(0) - 65;
            
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            allOptions[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                appState.score++;
                appState.answered++;
                optionElement.classList.add('pulse');
                showFeedback(true, question.explanation);
            } else {
                optionElement.classList.add('incorrect');
                appState.answered++;
                showFeedback(false, question.explanation, question.answer);
            }
            
            nextQuestionBtn.disabled = false;
            saveStateToStorage();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation, correctAnswer = null) {
            const feedbackTitle = feedbackContainer.querySelector('.feedback-title');
            const feedbackMessage = feedbackContainer.querySelector('.feedback-message');
            const feedbackExplanation = feedbackContainer.querySelector('.feedback-explanation');
            const feedbackIcon = feedbackContainer.querySelector('.feedback-icon');
            
            if (isCorrect) {
                feedbackContainer.className = 'feedback-container feedback-correct';
                feedbackIcon.textContent = '‚úì';
                feedbackTitle.textContent = 'Correct!';
                feedbackMessage.textContent = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
            } else {
                feedbackContainer.className = 'feedback-container feedback-incorrect';
                feedbackIcon.textContent = '‚úó';
                feedbackTitle.textContent = 'Incorrect';
                if (correctAnswer) {
                    const correctOption = String.fromCharCode(65 + (correctAnswer.charCodeAt(0) - 65));
                    const correctText = questions.find(q => 
                        appState.currentQuestions[appState.currentQuestionIndex].question === q.question
                    )?.options[correctAnswer.charCodeAt(0) - 65];
                    
                    feedbackMessage.textContent = `Correct answer: ${correctOption} (${correctText})`;
                }
            }
            
            feedbackExplanation.textContent = explanation;
            feedbackContainer.style.display = 'block';
            feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Move to next question
        function nextQuestion() {
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Skip current question
        function skipQuestion() {
            appState.skipped++;
            appState.currentQuestionIndex++;
            
            if (appState.currentQuestionIndex < appState.currentQuestions.length) {
                loadQuestion();
            } else {
                showResultsPage();
            }
            
            saveStateToStorage();
        }

        // Retry the topic
        function retryTopic() {
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            initializeQuestions();
            
            saveStateToStorage();
            showPracticePage();
        }

        // Go back to home page
        function backToHome() {
            showWelcomePage();
        }

        // Go back to topics page
        function backToTopics() {
            alert("In a complete implementation, this would navigate to the topics selection page.");
        }

        // Start practice session
        function startPractice() {
            const name = studentNameInput.value.trim();
            if (!name) {
                alert("Please enter your name to begin your summary writing journey!");
                studentNameInput.focus();
                return;
            }
            
            appState.studentName = name;
            appState.currentQuestionIndex = 0;
            appState.score = 0;
            appState.skipped = 0;
            appState.answered = 0;
            
            if (appState.currentQuestions.length === 0) {
                initializeQuestions();
            }
            
            saveStateToStorage();
            showPracticePage();
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
